{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./elements/noflo-card-styles.js","webpack:///./src/runtime.js","webpack:///./elements/codemirror-styles.js","webpack:///./elements/the-card-styles.js","webpack:///./src/JournalStore.js","webpack:///./runtimeinfo/index.js","webpack:///./elements/noflo-modal-styles.js","webpack:///./src/projects.js","webpack:///./src/urls.js","webpack:///./runtimeinfo/msgflo.yaml","webpack:///./runtimeinfo/sndflo.yaml","webpack:///./runtimeinfo/imgflo.yaml","webpack:///./runtimeinfo/noflo.yaml","webpack:///./runtimeinfo/javafbp.yaml","webpack:///./runtimeinfo/microflo.yaml","webpack:///./elements/the-graph-styles.js","webpack:///./elements/noflo-polymer.js","webpack:///./elements/noflo-account-settings.js","webpack:///./elements/noflo-account.js","webpack:///./elements/noflo-icon.js","webpack:///./elements/noflo-type-selector.js","webpack:///./elements/noflo-new-project.js","webpack:///./elements/noflo-new-repository.js","webpack:///./elements/noflo-add-runtime.js","webpack:///./elements/noflo-new-runtime.js","webpack:///./elements/the-graph-thumb.js","webpack:///./elements/noflo-project-card.js","webpack:///./elements/noflo-repo-card.js","webpack:///./elements/noflo-runtime-card.js","webpack:///./elements/noflo-main.js","webpack:///./elements/the-graph.js","webpack:///./elements/the-graph-editor.js","webpack:///./elements/noflo-library.js","webpack:///./elements/noflo-exported-inspector.js","webpack:///./elements/noflo-icon-selector.js","webpack:///./elements/noflo-new-graph.js","webpack:///./elements/noflo-group-inspector.js","webpack:///./elements/the-card-stack.js","webpack:///./elements/the-card.js","webpack:///./elements/the-panel.js","webpack:///./elements/noflo-context.js","webpack:///./src/components/TestStatus.jsx","webpack:///./src/components/TestStatusDetailed.jsx","webpack:///./elements/noflo-runtime-browserdebug.js","webpack:///./elements/noflo-runtime-customiframe.js","webpack:///./elements/noflo-runtime-selector.js","webpack:///./elements/noflo-runtime-testdetails.js","webpack:///./elements/noflo-runtime.js","webpack:///./elements/the-graph-nav.js","webpack:///./elements/noflo-journal.js","webpack:///./elements/noflo-component-editor.js","webpack:///./elements/noflo-menu.js","webpack:///./elements/noflo-search-graph-results.js","webpack:///./elements/noflo-search-library-results.js","webpack:///./elements/noflo-graph-inspector.js","webpack:///./elements/noflo-component-inspector.js","webpack:///./elements/noflo-search.js","webpack:///./elements/noflo-new-component.js","webpack:///./elements/noflo-project-inspector.js","webpack:///./elements/noflo-project-sync.js","webpack:///./elements/noflo-project.js","webpack:///./src/components/EdgeId.jsx","webpack:///./src/components/RuntimeEvents.jsx","webpack:///./elements/number-scrubber.js","webpack:///./elements/noflo-node-inspector.js","webpack:///./elements/noflo-edge-menu.js","webpack:///./elements/noflo-packets.js","webpack:///./elements/noflo-alert.js","webpack:///./elements/noflo-ui.js","webpack:///./src/icons.js","webpack:///./src/collections.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","2","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","$_documentContainer","document","createElement","innerHTML","head","appendChild","content","fbpGraph","findByComponent","getName","namespace","graphRuntimeIdentifier","graph","projectNamespace","properties","runtimeName","graphName","portForLibrary","port","id","type","description","addressable","schema","componentForLibrary","component","icon","subgraph","inports","inPorts","map","outports","outPorts","getGraphType","g","environment","undefined","runtime","getComponentType","runtimeType","code","match","getSource","client","protocol","getsource","catch","e","indexOf","Promise","reject","definition","getRemoteNodes","route","remote","reduce","promise","node","then","nodes","Error","matchedNode","filter","componentType","componentImplementation","project","graphs","resolve","source","includes","language","loadGraph","instance","method","err","isDefaultRuntime","address","ensureIframe","querySelector","iframe","body","setAttribute","className","transport","disconnect","journal","IDBJournalStore","JournalStore","db","super","this","transactions","revId","entries","putTransaction","transaction","objectStore","add","genKey","cb","index","openCursor","onsuccess","event","cursor","target","lastRevision","info","msgflo","sndflo","imgflo","noflo","javafbp","microflo","findMainGraph","main","find","mainCapable","findGraph","findComponent","components","componentName","library","split","findProject","projects","getProjectHash","callback","setTimeout","isReadOnly","context","capabilities","guessLanguage","defaultLanguage","getComponentHash","getGraphHash","graphId","hashToString","hash","part","encodeURIComponent","join","element","String","customElements","define","_template","is","theme","debug","user","notify","observer","env","NOFLO_APP_TITLE","getElementById","classList","remove","preventDefault","stopPropagation","fire","close","parentNode","removeChild","listeners","click","_isSelectedTheme","current","_isSelectedDebug","askForScope","Array","help","NOFLO_THEME","NOFLO_APP_NAME","NOFLO_APP_VERSION","scope","currentTarget","getAttribute","github","scopes","set","querySelectorAll","dialog","addEventListener","detail","_ifPublicScope","_ifPrivateScope","fallback","icons","getIcon","available","runtimes","label","forEach","rt","getByType","prepareAvailable","runtimeTypeInfo","keys","runtimetypes","availType","shortname","availtype","tokenList","selected","_computeIf","_computeIf2","obj","pieces","canSend","Boolean","projectId","produceNamespace","toLowerCase","replace","ga","specs","disabled","repo","token","matched","availableTypes","canCreate","secret","createUUID","seen","Date","toString","_computeRepeat","rtInfo","def","url","helpurl","runtimeAdd","ev","edgeColors","fillStyle","height","Number","lineWidth","listener","nodeSize","strokeStyle","thumbrectangle","thumbscale","width","viewrectangle","themeChanged","style","thumb","styleFromTheme","fill","stroke","redrawGraph","$","canvas","getContext","render","rectangle","scale","newGraph","oldGraph","removeListener","on","toDataURL","menuopen","menuicon","gist","location","dispatchEvent","CustomEvent","composed","bubbles","mains","open","projectList","remoteProjects","openChanged","_canGithub","fetchGithub","repoParts","org","branch","openLocal","filterRemoteProjects","remoteProject","filterLocalProjects","filterAvailableRuntimes","opener","now","seenHoursAgo","Math","floor","runtimeTypes","examples","typeExamples","ssl","example","_canFlowhub","setProperties","_isLocalProjects","_isSelectedView","view","list","animatedEdges","appView","autolayout","autolayouter","debounceLibraryRefeshTimer","displaySelectionGroup","editable","graphChanges","errorNodes","forceSelection","graphView","grid","maxZoom","menus","minZoom","offsetX","offsetY","pan","readonly","selectedEdges","selectedNodes","selectedNodesHash","snap","klayNoflo","init","onSuccess","applyAutolayout","workerScript","newTheme","previousTheme","svgcontainer","graphEvents","graphRenameEvents","graphPortEvents","trackGraphChange","payload","triggerAutolayout","from","to","pub","priv","public","process","metadata","endTransaction","concat","unsubscribeGraph","unmountComponentAtNode","subscribeGraph","App","onEdgeSelection","onNodeSelection","onPanScale","getMenuDef","refs","x","y","itemKey","item","toggle","isSelected","shallowClone","setSelectedNodes","setErrorNodes","setSelectedEdges","setAnimatedEdges","nodeId","updateIcon","portInfo","layout","direction","options","intCoordinates","algorithm","layoutHierarchy","spacing","borderSpacing","edgeSpacingFactor","inLayerSpacingFactor","nodePlace","nodeLayering","edgeRouting","crossMin","keilerGraph","startTransaction","applyToGraph","triggerFit","setState","markDirty","addNode","state","focusNode","setProps","clearTimeout","rerender","libraryDirty","generated","debounceLibraryRefesh","unnamespaced","registerComponent","toJSON","hostAttributes","copyNodes","notifyView","onContextMenu","plugins","editor","getDefaultMenus","unregister","plugin","register","defaultMenu","notifyViewChanged","buildInitialLibrary","componentsFromGraph","edge","updateErrorNodes","errorNodesChanged","getComponent","search","num","random","getPan","getScale","nameParts","default","addInitial","getLibrary","matching","privateport","publicport","renameInport","renameOutport","getIcons","mainGraph","duplicates","_isSelectedMainGraph","group","groupdescription","renameGroup","setGroupMetadata","addGroup","observeChanges","MutationObserver","updateVisibility","observe","subtree","childList","attributes","characterData","childElementCount","parent","prepend","stacks","getElementsByTagName","stack","insertBefore","firstChild","automatic","handle","size","cleanUpLocation","automaticChanged","unobserve","handleMutations","getMain","sizeDimensions","getSizeDimensions","outside","getPositionDimension","edges","events","errors","contextBar","contextsection","keyCode","clearSelection","pop","fixed","emptyOnReadOnly","addMenuCallback","localMenu","canGetSource","n4","iconLabel","action","href","currentGraphId","e4","w4","fixedmain","scrollTop","scrollHeight","sort","groups","grp","grpNodes","JSON","parse","stringify","currentGraph","show","once","componentParts","libraryMatch","status","online","all","_ifEventIsPlain","_ifEventIsProcessError","_ifEventIsError","_ifEventHasStack","message","_ifEventIsOutput","_ifEventIsStopStart","TestStatus","props","passed","failed","skipped","total","suites","suite","cases","testCase","skip","stateToClass","baseApp","qrCodeUrl","runtimeUrl","generateRuntimeInfo","params","appDebugUrl","launchNewBrowserRuntime","customIframeRuntime","launchImgfloHerokuRuntime","checkRuntimeSeen","getTime","debugOnDevice","addIframeRuntime","deployHeroku","debugOnDeviceModal","addIframeModal","template","TestStatusDetailed","topic","assertion","error","container","shadowRoot","panel","graphChanged","runtimeSelector","runtimeIframe","getRuntimeIframe","hideCard","getRuntimeIcon","execution","running","showCard","details","setIframeVisibility","visibility","display","_produceAddress","backgroundColor","hide","outsideFill","scaledviewrectangle","_","nav","calculateStyleFromTheme","viewBoxBorder","viewBoxBorder2","viewrectangleChanged","outcanvas","viewrect","w","h","canRedo","canUndo","hidenav","klay","returnTo","newEditor","checkState","connectJournal","positionedNodes","store","undo","redo","codeEditor","spec","testsEditor","componentChanged","self","debouncedComponentChange","debounce","debouncedSpecChange","changed","tests","code_editor","getExampleCode","codeOptions","getMirrorOptions","getValue","setSize","tests_editor","testOptions","lineNumbers","getMirrorMode","getMirrorTheme","readOnly","componenttemplates","templateFunc","setOption","refresh","buttons","sender","button","results","downloadUrl","inGraph","isMain","preview","updateName","unnamespace","prepareHtmlEditor","prepareTestsEditor","prepareDownload","Blob","URL","sha","blob","createObjectURL","htmlEditor","focus","html_editor","specCode","hidden","_computeDownload","entity","errorText","dom","graphInspector","menuCard","parentPath","resultsCard","searchGraphResults","searchLibrary","searchLibraryResults","blur","closeInspectors","graphsChanged","componentInspector","findNode","comp","idx","previous","searchinput","clearResults","contains","keyIdentifier","searchChanged","clearSearch","addTo","path","getParentPath","unshift","_canSearch","_canGoBack","_isGraph","_isComponent","_canInspectGraph","_canInspectComponent","_isReadOnly","languages","runtimeI","allLanguages","lang","preferredlanguage","getExampleSpec","_languageSelected","fbpSpec","originalRepo","updateProject","_mainSelected","_getMainGraphs","files","hasOp","hasPush","operation","pull","conflict","noop","statusText","entry","operations","filesChanged","pushes","ops","file","originalConflicts","originalPushes","originalPulls","checkOps","f","_getOperationLabel","op","_isSelectedOp","canComponent","gotoGraph","gotoComponent","account","toggleOpen","_computeClass","nodeLabel","EdgeId","src","connection","tgt","row","routeClass","class","PacketData","multiLine","PacketDetails","isExpanded","clearSizeCache","RuntimeEvents","packets","idWidth","min","columns","header","expander","subComponent","tableHeight","distance","max","Infinity","mod","precision","scrubend","scrubstart","startValue","step","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","parseFloat","delta","dx","round","newValue","isFinite","trackstart","track","trackend","errorLog","lastErrorLog","scrubbing","showErrorLogs","updatePorts","updateLabel","getNode","renameNode","setNodeMetadata","initializers","iip","connected","inport","getPortValue","getPortConnection","portDef","inputType","values","input","checked","parseInt","reader","FileReader","onload","readAsDataURL","portToInput","updateValue","inputToPort","removeValue","setPortValue","removeInitial","val","isNaN","validatePortValue","_computeIf3","_computeIf4","_computeIf5","_computeIf6","_computeIf7","_computeIf8","_computeSelected","routes","secure","setEdgeMetadata","toggleSecure","meta","currentgraph","nodeInspectors","showPackets","frameRequest","newEdges","oldEdges","showEdgeCards","hideEdgeCards","updatePacketInspector","clearErrorNodes","inspector","addErrorNode","fromStr","toUpperCase","genId","edgeMenu","menu","newPackets","oldPackets","requestAnimationFrame","edgeIds","genEdgeId","selectedEdgeIds","packetId","packetEdge","rowId","offsetWidth","showNodeCards","hideNodeCards","found","isError","offerHTTPS","ctx","compatibleRuntimes","dontAutoHideAlert","innerHeight","innerWidth","clearContextFirst","emitEvent","openProject","clear","grapheditor","changes","triggerTests","componenteditor","searchLibraryResult","showError","hideAlertSoon","showProgress","libraryResults","searchGraphResult","graphResults","syncOperation","componentLibrary","libKey","showTests","confirm","alert","hideAlert","oldTheme","TheGraph","iconName","iconMap","FONT_AWESOME","basename","sortByName","a","b","aName","bName","localeCompare","allowUnknown","sortBySeen","ain","bin","addToList","existing","exists","removeFromList"],"mappings":"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","file":"ui.045ca1e816e3f32640aa.min.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([543,0,4]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-card-styles\">\n  <template>\n    <style>\n    :host {\n      display: block;\n      width: 216px;\n      height: 105px;\n      overflow: hidden;\n      display: inline-block;\n      text-align: center;\n      background-color: var(--noflo-ui-background);\n      color: var(--noflo-ui-text);\n      border-radius: 3px;\n      margin-right: 18px;\n      margin-left: 18px;\n      margin-bottom: 36px;\n      position: relative;\n      cursor: pointer;\n    }\n    h2 {\n      position: absolute;\n      top: 36px;\n      line-height: 36px;\n      width: 150px;\n      text-transform: none;\n      font-size: 12px;\n      text-align: left;\n      white-space: nowrap;\n      left: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    p {\n      position: absolute;\n      top: 53px;\n      left: 18px;\n      width: 150px;\n      text-transform: uppercase;\n      font-size: 10px;\n      text-align: left;\n      max-height: 36px;\n      overflow: hidden;\n      color: hsl(189, 11%, 50%);\n    }\n    p span {\n      text-overflow: ellipsis;\n      max-width: 100px;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n    #menubutton {\n      position: absolute;\n      right: 36px;\n      top: 18px;\n      background-color: transparent;\n      color: var(--noflo-ui-text);\n      border: 0px;\n      outline: 0px;\n      cursor: pointer;\n    }\n    #menu {\n      position: absolute;\n      right: 36px;\n      top: 36px;\n      padding: 0px;\n      margin: 0px;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      box-shadow: 3px 3px var(--noflo-ui-background);\n      z-index: 1;\n    }\n    #menu li {\n      list-style: none;\n      text-align: left;\n      margin-bottom: 2px;\n      margin-top: 2px;\n    }\n    #menu li button {\n      background-color: transparent;\n      border: 0px;\n      outline: 0px;\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n      text-align: left;\n    }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const fbpGraph = require('fbp-graph');\nconst { findByComponent } = require('./projects');\nconst { getName, namespace } = require('./collections');\n\nexports.graphRuntimeIdentifier = (graph, projectNamespace = null) => {\n  if (graph && graph.properties && graph.properties.runtimeName) {\n    // Runtime-supplied identifier, keep stable\n    return graph.properties.runtimeName;\n  }\n  const graphName = getName(graph);\n  if (projectNamespace) {\n    return namespace(graphName, projectNamespace);\n  }\n  return graphName;\n};\n\nconst portForLibrary = (port) => ({\n  name: port.id,\n  type: port.type,\n  description: port.type,\n  addressable: port.addressable,\n  schema: port.schema,\n});\n\n// Covert FBP Protocol component to the-graph library component\nexports.componentForLibrary = (component) => ({\n  name: component.name,\n  icon: component.icon || 'cog',\n  description: component.description || '',\n  subgraph: component.subgraph,\n  inports: component.inPorts.map(portForLibrary),\n  outports: component.outPorts.map(portForLibrary),\n});\n\nexports.getGraphType = (g) => {\n  const graph = g;\n  if (!(graph.properties.environment != null ? graph.properties.environment.type : undefined) && ((graph.properties.environment != null ? graph.properties.environment.runtime : undefined) === 'html')) {\n    // Legacy noflo-browser\n    graph.properties.environment.type = 'noflo-browser';\n  }\n  if (graph.properties.environment != null ? graph.properties.environment.type : undefined) {\n    return graph.properties.environment.type;\n  }\n  return null;\n};\n\nexports.getComponentType = (component) => {\n  const runtimeType = component.code.match(/@runtime ([a-z-]+)/);\n  if (runtimeType) {\n    return runtimeType[1];\n  }\n  return null;\n};\n\nexports.getSource = (client, name) => client\n  .protocol.component.getsource({\n    name,\n  })\n  .catch((e) => {\n    if (name.indexOf('/') !== -1) {\n      // Already namespaced, pass failure through\n      return Promise.reject(e);\n    }\n    if (!client.definition.namespace) {\n      // No namespace defined, pass failure through\n      return Promise.reject(e);\n    }\n    return client.protocol.component.getsource({\n      name: `${client.definition.namespace}/${name}`,\n    });\n  });\n\nexports.getRemoteNodes = (client, r) => {\n  const route = r;\n  return route.remote.reduce(((promise, node) => promise.then((graph) => {\n    if (!(graph.nodes != null ? graph.nodes.length : undefined)) {\n      return Promise.reject(new Error(`Node ${graph.name} doesn't contain child nodes`));\n    }\n    const [matchedNode] = graph.nodes.filter((n) => n.id === node);\n    if (!matchedNode) {\n      return Promise.reject(new Error(`Node ${node} not found in graph ${graph.name || graph.properties.id}`));\n    }\n\n    // Check if the node implementation is available in the local project\n    const [\n      componentType,\n      componentImplementation,\n    ] = findByComponent(matchedNode.component, route.project);\n    if (componentType === 'graph') {\n      route.graphs.push(componentImplementation);\n      return Promise.resolve(componentImplementation);\n    }\n    if (componentType === 'component') {\n      route.component = componentImplementation;\n      return Promise.resolve(componentImplementation);\n    }\n    // If not, then get from runtime\n    return exports.getSource(client, matchedNode.component)\n      .then((source) => {\n        if (!['json', 'fbp'].includes(source.language)) {\n          route.component = source;\n          return Promise.resolve(source);\n        }\n        return exports.loadGraph(source)\n          .then((instance) => {\n            route.graphs.push(instance);\n            return Promise.resolve(instance);\n          });\n      });\n  })\n  ), Promise.resolve(route.graphs[route.graphs.length - 1]))\n    .then(() => {\n      route.remote = [];\n      return route;\n    });\n};\n\nexports.loadGraph = (source) => new Promise(((resolve, reject) => {\n  let method;\n  switch (source.language) {\n    case 'json': method = 'loadJSON'; break;\n    case 'fbp': method = 'loadFBP'; break;\n    default:\n      return reject(new Error(`Unknown format ${source.language} for graph ${source.name}`));\n  }\n  method = source.language === 'json' ? 'loadJSON' : 'loadFBP';\n  return fbpGraph.graph[method](source.code, (err, i) => {\n    if (err) { return reject(err); }\n    const instance = i;\n    instance.name = source.name;\n    return resolve(instance);\n  });\n}));\n\nexports.isDefaultRuntime = (runtime) => {\n  if ((runtime.protocol === 'iframe')\n    && (runtime.address === 'https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe')) {\n    return true;\n  }\n  return false;\n};\n\n// Scope iframe runtimes to project\nexports.ensureIframe = (c, project) => {\n  const client = c;\n  if (client.definition.protocol !== 'iframe') {\n    return Promise.resolve();\n  }\n  client.definition.querySelector = `iframe[data-runtime='${client.definition.id}']`;\n  let iframe = document.body.querySelector(client.definition.querySelector);\n  if (!iframe) {\n    // No iframe for this runtime/project combination yet, create\n    iframe = document.createElement('iframe');\n    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms');\n    iframe.setAttribute('data-runtime', client.definition.id);\n    iframe.setAttribute('data-project', project.id);\n    iframe.className = 'iframe-runtime';\n    document.body.appendChild(iframe);\n  }\n  if (!client.transport.iframe) {\n    // Client has not been connected yet\n    client.transport.iframe = iframe;\n    return Promise.resolve();\n  }\n  if (client.transport.iframe === iframe) {\n    // We were already connected to this one\n    return Promise.resolve();\n  }\n  // We were connected to another iframe\n  // Disconnect and set new\n  return client.disconnect()\n    .then(() => {\n      client.transport.iframe = iframe;\n      return Promise.resolve();\n    });\n};\n","/**\n * Generated from lint.css, codemirror.css, mdn-like.css, codemirror-noflo.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"codemirror-styles\">\n  <template>\n    <style>\n      /* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/*\n  MDN-LIKE Theme - Mozilla\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues\n  GitHub: @peterkroon\n\n  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation\n\n*/\n.cm-s-mdn-like.CodeMirror { color: #999; background-color: #fff; }\n.cm-s-mdn-like div.CodeMirror-selected { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::selection, .cm-s-mdn-like .CodeMirror-line > span::selection, .cm-s-mdn-like .CodeMirror-line > span > span::selection { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span > span::-moz-selection { background: #cfc; }\n\n.cm-s-mdn-like .CodeMirror-gutters { background: #f8f8f8; border-left: 6px solid rgba(0,83,159,0.65); color: #333; }\n.cm-s-mdn-like .CodeMirror-linenumber { color: #aaa; padding-left: 8px; }\n.cm-s-mdn-like .CodeMirror-cursor { border-left: 2px solid #222; }\n\n.cm-s-mdn-like .cm-keyword { color: #6262FF; }\n.cm-s-mdn-like .cm-atom { color: #F90; }\n.cm-s-mdn-like .cm-number { color:  #ca7841; }\n.cm-s-mdn-like .cm-def { color: #8DA6CE; }\n.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag { color: #690; }\n.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def, .cm-s-mdn-like span.cm-type { color: #07a; }\n\n.cm-s-mdn-like .cm-variable { color: #07a; }\n.cm-s-mdn-like .cm-property { color: #905; }\n.cm-s-mdn-like .cm-qualifier { color: #690; }\n\n.cm-s-mdn-like .cm-operator { color: #cda869; }\n.cm-s-mdn-like .cm-comment { color:#777; font-weight:normal; }\n.cm-s-mdn-like .cm-string { color:#07a; font-style:italic; }\n.cm-s-mdn-like .cm-string-2 { color:#bd6b18; } /*?*/\n.cm-s-mdn-like .cm-meta { color: #000; } /*?*/\n.cm-s-mdn-like .cm-builtin { color: #9B7536; } /*?*/\n.cm-s-mdn-like .cm-tag { color: #997643; }\n.cm-s-mdn-like .cm-attribute { color: #d6bb6d; } /*?*/\n.cm-s-mdn-like .cm-header { color: #FF6400; }\n.cm-s-mdn-like .cm-hr { color: #AEAEAE; }\n.cm-s-mdn-like .cm-link { color:#ad9361; font-style:italic; text-decoration:none; }\n.cm-s-mdn-like .cm-error { border-bottom: 1px solid red; }\n\ndiv.cm-s-mdn-like .CodeMirror-activeline-background { background: #efefff; }\ndiv.cm-s-mdn-like span.CodeMirror-matchingbracket { outline:1px solid grey; color: inherit; }\n\n.cm-s-mdn-like.CodeMirror { background-image: url(data:image/png;base64,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); }\n\n/*\nCopyright (C) 2013-2017 Flowhub UG\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\n.cm-s-noflo.CodeMirror {\n  color: hsl(188,6%,50%);\n  background-color: rgb(0, 0, 0);\n  font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif !important;\n  font-size: 14px;\n  line-height: 17px;\n}\n\n.cm-s-noflo .CodeMirror-selected {\n  background: hsl(185,100%,26%) !important;\n}\n\n.cm-s-noflo .CodeMirror-gutters {\n  background-color: black;\n  border-right: 1px solid hsla(190, 90%, 80%, 0.1);\n}\n\n.cm-s-noflo .CodeMirror-linenumber {\n  color: hsl(188, 6%, 26%);\n}\n\n.cm-s-noflo .CodeMirror-cursor {\n  border-left: 1px solid hsl(185,98%,46%) !important;\n}\n\n.cm-s-noflo span.cm-keyword {\n  color: hsl(35,100%,75%); \n}\n\n.cm-s-noflo span.cm-atom {\n  color: hsl(35,98%,46%);\n}\n\n.cm-s-noflo span.cm-number {\n  color: hsl(160,100%,75%);\n}\n\n.cm-s-noflo span.cm-def {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-2 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-3 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-property {\n  color: #fff;\n}\n\n.cm-s-noflo span.cm-operator {\n}\n\n.cm-s-noflo span.cm-comment {\n  color: gray;\n}\n\n.cm-s-noflo span.cm-string {\n  color: hsl(135,100%,75%);\n}\n\n.cm-s-noflo span.cm-meta {\n  color: yellow;\n}\n\n.cm-s-noflo span.cm-qualifier {\n  color: #FFF700;\n}\n\n.cm-s-noflo span.cm-builtin {\n  color: #30a;\n}\n\n.cm-s-noflo span.cm-bracket {\n    color: #cc7;\n}\n\n.cm-s-noflo span.cm-tag {\n    color: #FFBD40;\n}\n\n.cm-s-noflo span.cm-attribute {\n    color: #FFF700;\n}\n\n.cm-s-noflo span.cm-error {\n    color: #f00;\n}\n\n.cm-s-noflo .CodeMirror-activeline-background {\n    background: #27282E !important;\n}\n\n.cm-s-noflo .CodeMirror-matchingbracket {\n    outline: 1px solid grey;\n    color: white !important;\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"the-card-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 0px;\n        padding: 10px 10px 10px;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        position: relative;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      h1 {\n        font-size: 12px;\n        line-height: 36px;\n        margin: 0px;\n        margin-bottom: 0px;\n        text-shadow: 0 1px var(--noflo-ui-background);\n        text-align: left;\n      }\n      header {\n        height: 36px;\n      }\n      header h1 {\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        width: calc(72px * 3 - 1px);\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      header h1.clear {\n        cursor: pointer;\n      }\n      header h2 {\n        line-height: 36px;\n        width: 72px;\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        margin: 0px;\n        text-align: right;\n        font-size: 10px;\n        color: var(--noflo-ui-border-highlight);\n        display: block;\n        cursor: default;\n      }\n      ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      ul li {\n        display: block;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.toolbar2right {\n        width: 180px;\n        display: block;\n        position: absolute;\n        right: 36px;\n        top: 10px;\n        text-align: right;\n      }\n      ul.toolbar li {\n        float: left;\n        display: block;\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n      }\n      ul.toolbar2right li {\n        float: right;\n        width: auto;\n      }\n      ul.toolbar li * {\n        line-height: 36px;\n      }\n      li button {\n        width:100%;\n        height:100%;\n      }\n      textarea {\n        width: 100%;\n        min-height: 100px;\n        max-height: calc(72px * 4);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const { journal } = require('fbp-graph');\n\nclass IDBJournalStore extends journal.JournalStore {\n  constructor(graph, db) {\n    super(graph);\n    this.db = db;\n    this.transactions = [];\n  }\n\n  genKey(revId) { return `${this.graph.properties.id}_${revId}`; }\n\n  putTransaction(revId, entries) {\n    super.putTransaction(revId, entries);\n\n    const trans = this.db.transaction(['journals'], 'readwrite');\n    const store = trans.objectStore('journals');\n\n    // We're using add for writing, which will correctly fail if revId alreadyn exists\n    // for the graph\n    store.add({\n      id: this.genKey(revId),\n      graph: this.graph.properties.id,\n      revId,\n      entries,\n    });\n\n    this.transactions[revId] = entries;\n    return super.putTransaction(revId, entries);\n  }\n\n  fetchTransaction(revId) {\n    return this.transactions[revId];\n  }\n\n  init(cb) {\n    const trans = this.db.transaction(['journals']);\n    const store = trans.objectStore('journals');\n    const idx = store.index('graph');\n    idx.openCursor().onsuccess = (event) => {\n      const cursor = event.target.result;\n      if (!cursor) { return cb(); }\n      this.transactions[cursor.value.revId] = cursor.value.entries;\n      if (cursor.value.revId > this.lastRevision) { this.lastRevision = cursor.value.revId; }\n      return (cursor.continue)();\n    };\n  }\n}\n\nexports.IDBJournalStore = IDBJournalStore;\n","const msgflo = require('./msgflo.yaml');\nconst sndflo = require('./sndflo.yaml');\nconst imgflo = require('./imgflo.yaml');\nconst noflo = require('./noflo.yaml');\nconst javafbp = require('./javafbp.yaml');\nconst microflo = require('./microflo.yaml');\n\nconst info = {\n  msgflo,\n  sndflo,\n  imgflo,\n  noflo,\n  javafbp,\n  microflo,\n};\n\ninfo['noflo-browser'] = info.noflo;\ninfo['noflo-gnome'] = info.noflo;\ninfo['noflo-nodejs'] = info.noflo;\n\nmodule.exports = info;\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-modal-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--noflo-ui-background-shadow);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: auto;\n      }\n\n      .modal-container {\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        display: block;\n        position: absolute;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        top: 36px;\n        width: calc(72px * 9);\n        left: calc(50% - 72px * 4.5);\n        z-index: 5;\n        padding: 36px;\n        box-sizing: border-box;\n        border-radius: 3px;\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n      }\n      .modal-content {\n        max-height: calc(100vh - 252px);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        overflow-x: hidden;\n        padding-bottom: 18px;\n        box-sizing: border-box;\n      }\n\n      h1 {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n      }\n      label {\n        display: block;\n        font-size: 13px;\n        margin-top: 17px;\n        color: var(--noflo-ui-text);\n        line-height: 17px;\n      }\n      label > span {\n        line-height: 17px;\n      }\n      input,\n      select,\n      textarea {\n        display: block;\n        font-size: 17px;\n        background-color: hsl(190, 100%, 30%);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        color: #fff;\n        border-radius: 3px;\n        padding: 3px;\n        border: none;\n        margin: 0px;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      input::placeholder {\n        color: hsl(0, 0%, 80%);\n      }\n      select {\n        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwNnB4IiBoZWlnaHQ9IjMwNnB4IiB2aWV3Qm94PSIwIDAgMzA2IDMwNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzA2IDMwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9ImV4cGFuZC1tb3JlIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIyNzAuMyw1OC42NSAxNTMsMTc1Ljk1IDM1LjcsNTguNjUgMCw5NC4zNSAxNTMsMjQ3LjM1IDMwNiw5NC4zNSAJCSIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K);\n        background-repeat: no-repeat;\n        background-position: 98% 50%;\n        background-size: 8px;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        padding-right: 1em;\n      }\n      div.CodeMirror {\n        border: 1px solid var(--noflo-ui-text);\n        border-radius: 3px;\n      }\n\n      .toolbar {\n        display: block;\n        line-height: 36px;\n        margin-top: 18px;\n      }\n      .toolbar button {\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        cursor: pointer;\n      }\n      .toolbar button.disabled {\n        opacity: 0.1;\n      }\n      .toolbar a {\n        font-size: 13px;\n        color: hsl(190, 100%, 30%);\n        text-decoration: none;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n\n      html polymer-element{\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","exports.findMainGraph = (project) => {\n  if (!project.graphs.length) { return null; }\n  if (project.main) {\n    // Ensure currently set main graph exists\n    const mainFound = project.graphs.find((graph) => graph.properties.id === project.main);\n    if (mainFound) {\n      return project.main;\n    }\n  }\n  // No 'main' graph sent, see if we can make a smart choice\n  const mainCapable = project.graphs.find((graph) => {\n    if (graph.name === 'main') { return true; }\n    if (graph.properties.main) { return true; }\n    return false;\n  });\n  if (mainCapable) {\n    return mainCapable.properties.id;\n  }\n  // No suitable graph found, use first\n  return project.graphs[0].properties.id;\n};\n\nexports.findGraph = (id, project) => {\n  if (!project.graphs) { return null; }\n  return project.graphs.find((graph) => {\n    if (graph.name === id) { return true; }\n    if (graph.properties.id === id) { return true; }\n    return false;\n  });\n};\n\nexports.findComponent = (name, project) => {\n  if (!project.components) { return null; }\n  return project.components.find((component) => {\n    if (component.name === name) { return true; }\n    return false;\n  });\n};\n\nexports.findByComponent = (componentName, project) => {\n  let [library, name] = componentName.split('/');\n\n  if (!name) {\n    name = library;\n    library = undefined;\n  }\n\n  const graph = exports.findGraph(name, project);\n  if (graph) { return ['graph', graph]; }\n\n  const component = exports.findComponent(name, project);\n  if (component) { return ['component', component]; }\n\n  // Get from runtime\n  return ['runtime', componentName];\n};\n\nexports.findProject = (id, projects) => {\n  if (!projects) { return null; }\n\n  return projects.find((project) => project.id === id);\n};\n\nexports.getProjectHash = (project, callback) => {\n  if (project.runtime) {\n    if (!project.main) {\n      callback(null, [\n        'runtime',\n        project.runtime,\n      ]);\n      return;\n    }\n    callback(null, [\n      'runtime',\n      project.runtime,\n      project.main,\n    ]);\n    return;\n  }\n  if (!project.graphs.length) {\n    if (project.components.length) {\n      // No graphs in this project, but there are components\n      callback(null, [\n        'project',\n        project.id,\n        'component',\n        project.components[0].name,\n      ]);\n      return;\n    }\n    setTimeout(() => {\n      // Wait for graphs to be populated\n      if (!project.graphs.length && !project.components.length) {\n        return callback(new Error(`Project ${project.id} has no graphs or components`));\n      }\n      return exports.getProjectHash(project, callback);\n    },\n    100);\n    return;\n  }\n  // Open main graph, or the first graph\n  const main = project.main || project.graphs[0].properties.id;\n  if (!main) {\n    callback(new Error(`Unable find a main graph for project ${project.id}`));\n    return;\n  }\n  callback(null, [\n    'project',\n    project.id,\n    main,\n  ]);\n};\n\nexports.isReadOnly = (context) => {\n  if (!context.project) {\n    // If there is no project we must be read-only\n    return true;\n  }\n  if (context.graph && context.project.graphs.indexOf(context.graph) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.component && context.project.components.indexOf(context.component) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.graph\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('protocol:graph') === -1);\n  }\n  if (context.component\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('component:setsource') === -1);\n  }\n  return false;\n};\n\nexports.guessLanguage = (code, defaultLanguage = 'javascript') => {\n  if (code.indexOf('topic: ') !== -1 && code.indexOf('cases:') !== -1) {\n    // Reasonable guess is that this is an fbp-spec file.\n    // Should probably try parsing YAML to be sure.\n    return 'yaml';\n  }\n  return defaultLanguage;\n};\n","exports.getComponentHash = (componentName, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      'component',\n      componentName,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    'component',\n    componentName,\n  ];\n};\n\nexports.getGraphHash = (graphId, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      graphId,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    graphId,\n  ];\n};\n\nexports.hashToString = (hash) => `#${hash.map((part) => encodeURIComponent(part)).join('/')}`;\n","module.exports = {\"runtimetypes\":{\"msgflo\":{\"shortname\":\"MsgFlo Message Queuing\",\"icon\":\"cubes\",\"description\":\"Message queue orchestration\",\"helpurl\":\"https://msgflo.org/docs/usage/\"}},\"preferredlanguage\":\"python\",\"componenttemplates\":{\"python\":\"#!/usr/bin/env python\\nimport msgflo\\n\\nclass <%= name %>(msgflo.Participant):\\n  def __init__(self, role):\\n    d = {\\n      'component': '<%= namespace %>/<%= name %>',\\n      'label': '<%= description %>',\\n      'icon': '<%= icon %>',\\n      'inports': [\\n        { 'id': 'in', 'type': 'any' },\\n      ],\\n      'outports': [\\n        { 'id': 'out', 'type': 'any' },\\n      ],\\n    }\\n    msgflo.Participant.__init__(self, d, role)\\n\\n  def process(self, inport, msg):\\n    self.send('out', msg.data)\\n    self.ack(msg)\\n\\nif __name__ == '__main__':\\n  msgflo.main(<%= name %>)\\n\",\"coffeescript\":\"# To work in msgflo-nodejs source tree\\ntry\\n  msgflo = require 'msgflo-nodejs'\\ncatch e\\n  msgflo = require '..'\\n\\n<%= name %> = (client, role) ->\\n\\n  definition =\\n    component: '<%= namespace %>/<%= name %>'\\n    icon: '<%= icon %>'\\n    label: '<%= description %>'\\n    inports: [\\n      id: 'in'\\n      type: 'any'\\n    ]\\n    outports: [\\n      id: 'out'\\n      type: 'any'\\n    ]\\n  process = (inport, indata, callback) ->\\n    return callback 'out', null, indata\\n  return new msgflo.participant.Participant client, definition, process, role\\n\\nmodule.exports = <%= name %>\\n\",\"javascript\":\"try {\\n  var msgflo = require('msgflo-nodejs');\\n} catch (error) {\\n  var e = error;\\n  var msgflo = require('..');\\n}\\n\\nvar <%= name %> = function(client, role) {\\n  var definition = {\\n    component: '<%= namespace %>/<%= name %>',\\n    icon: '<%= icon %>',\\n    label: '<%= description %>',\\n    inports: [\\n      {\\n        id: 'in',\\n        type: 'any'\\n      }\\n    ],\\n    outports: [\\n      {\\n        id: 'out',\\n        type: 'any'\\n      }\\n    ]\\n  };\\n  var process = function(inport, indata, callback) {\\n    return callback('out', null, indata);\\n  };\\n  return new msgflo.participant.Participant(client, definition, process, role);\\n};\\n\\nmodule.exports = <%= name %>;\\n\",\"yaml\":\"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\\ncomponent: '<%= namespace %>/<%= name %>'\\nlabel: '<%= description %>'\\nicon: '<%= icon %>'\\ninports:\\n  open:\\n    queue: /bitraf/door/#ROLE/open\\n    type: object\\noutports: {}\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"sndflo\":{\"shortname\":\"SndFlo Sound Synthesis\",\"icon\":\"music\",\"description\":\"Create sound using SuperCollider\",\"helpurl\":\"https://github.com/jonnor/sndflo#readme\"}},\"componenttemplates\":{\"supercollider\":\"SynthDef(\\\"MyFilter\\\", {\\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\\n},\\n    metadata: (\\n        description: \\\"my filter\\\",\\n        specs: (\\n            freq: ControlSpec(20, 20000, \\\\exp, 0.1, 2200, \\\"Hz\\\")\\n        )\\n    )\\n)\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"imgflo\":{\"shortname\":\"ImgFlo Image Manipulation\",\"icon\":\"picture-o\",\"description\":\"Process images using GEGL\",\"helpurl\":\"https://github.com/jonnor/imgflo#readme\"}},\"componenttemplates\":{\"c\":\"/* This file is an image processing operation for GEGL */\\n\\n#ifdef GEGL_PROPERTIES\\n    // Dummy prop, for testing\\n    property_double (x, \\\"X\\\", 0.0)\\n        ui_range (0.0, 1024.0)\\n        ui_meta (\\\"unit\\\", \\\"pixel-coordinate\\\")\\n#else\\n\\n#define GEGL_OP_POINT_FILTER\\n#include \\\"gegl-op.h\\\"\\n\\n#ifndef IMGFLO_OP_NAME\\n#define IMGFLO_OP_NAME(orig) orig\\n#endif\\n\\nstatic void prepare(GeglOperation *operation)\\n{\\n    const Babl *format = babl_format(\\\"YA float\\\");\\n    gegl_operation_set_format(operation, \\\"input\\\", format);\\n    gegl_operation_set_format(operation, \\\"output\\\", format);\\n}\\n\\ngboolean\\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\\n        const GeglRectangle *roi, gint level)\\n{\\n    float *in = in_buf;\\n    float *out = out_buf;\\n    while (samples--) {\\n        *out++ = *in++;\\n        *out++ = *in++;\\n    }\\n    return TRUE;\\n}\\n\\nstatic void\\ngegl_op_class_init (GeglOpClass *klass)\\n{\\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\\n  point_filter_class->process = process;\\n  operation_class->prepare = prepare;\\n  gegl_operation_class_set_keys (operation_class,\\n      \\\"name\\\",        IMGFLO_OP_NAME(\\\"myop2\\\"),\\n      \\\"title\\\",       \\\"imgflo: Dynamic Flowhub\\\",\\n      \\\"categories\\\" , \\\"dev\\\",\\n      \\\"description\\\", \\\"First GEGL op written in Flowhub 22\\\",\\n  NULL);\\n}\\n\\n#endif\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"noflo-browser\":{\"shortname\":\"NoFlo for Browser\",\"icon\":\"html5\",\"description\":\"Build client-side browser applications\",\"helpurl\":\"https://github.com/noflo/noflo-browser-app#readme\"},\"noflo-nodejs\":{\"shortname\":\"NoFlo for Node.js\",\"icon\":\"cloud\",\"description\":\"Build network applications\",\"helpurl\":\"https://github.com/noflo/noflo-nodejs#readme\"},\"noflo-gnome\":{\"shortname\":\"NoFlo for GNOME\",\"icon\":\"desktop\",\"description\":\"Build GNOME desktop applications\",\"helpurl\":\"https://github.com/noflo/noflo-gnome#readme\"}},\"preferredlanguage\":\"es2015\",\"componenttemplates\":{\"javascript\":\"var noflo = require('noflo');\\n\\nexports.getComponent = function() {\\n  var c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process(function (input, output) {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    var data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"coffeescript\":\"noflo = require 'noflo'\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = '<%= description %>'\\n  c.icon = '<%= icon %>'\\n  c.inPorts.add 'in',\\n    datatype: 'all'\\n    description: 'Packet to forward'\\n  c.outPorts.add 'out',\\n    datatype: 'all'\\n  c.process (input, output) ->\\n    # Check preconditions on input data\\n    return unless input.hasData 'in'\\n    # Read packets we need to process\\n    data = input.getData 'in'\\n    # Process data and send output\\n    output.send\\n      out: data\\n    # Deactivate\\n    output.done()\\n\",\"es2015\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.process((input, output) => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data,\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"typescript\":\"import { Component } from 'noflo';\\n\\nexports.getComponent = (): Component => {\\n  const c = new Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process((input, output): void => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\"},\"examples\":{\"clock\":{\"label\":\"Animated clock\",\"id\":\"86a28c01d66cd8bf672f4e0a3e1ba851\"},\"camtopalette\":{\"label\":\"Cam to palette\",\"id\":\"efd306b5846c236998a63c535ceebed1\",\"ssl\":true},\"canvas\":{\"label\":\"Canvas pattern\",\"id\":\"dc0414ecf989b4b130b119e948653350\"},\"counter\":{\"label\":\"Click counter\",\"id\":\"38471e33458d644e907f4637434f5bbf\"},\"draganddrop\":{\"label\":\"Drag-and-drop physics\",\"id\":\"026a7bc8f1b482f56ad336c9d72dd72f\"},\"delaunaymasks\":{\"label\":\"Delaunay masks\",\"id\":\"d6c1fa7b4b9d437564e954f338d970b9\",\"ssl\":true},\"reacttodo\":{\"label\":\"React TODO list\",\"id\":\"c111454c9fd2f74d37d1e8a4e739adfd\"},\"webaudio\":{\"label\":\"Web Audio\",\"id\":\"6724a6eb8a1aaf351866e7a43c3ecd43\"}}}","module.exports = {\"runtimetypes\":{\"javafbp\":{\"shortname\":\"JavaFBP\",\"icon\":\"android\",\"description\":\"Program Java and Android applications\",\"helpurl\":\"https://github.com/jonnor/javafbp-runtime#readme\"}},\"componenttemplates\":{\"java\":\"// TODO\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"microflo\":{\"shortname\":\"MicroFlo Microcontroller Programming\",\"icon\":\"lightbulb-o\",\"description\":\"Program microcontrollers like Arduino\",\"helpurl\":\"https://github.com/jonnor/microflo#readme\"}},\"componenttemplates\":{\"c++\":\"// TODO\\n\"},\"examples\":{}}","/**\n * Generated from the-graph-dark.css, the-graph-light.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"the-graph-styles\">\n  <template>\n    <style>\n      .the-graph-dark .the-graph-app {\n  background-color: #000;\n  position: relative;\n}\n.the-graph-dark svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-dark .arrow {\n  cursor: default;\n}\n.the-graph-dark .click {\n  cursor: pointer;\n}\n.the-graph-dark .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-dark .node-border {\n  fill: rgba(0,0,0,0.5);\n  stroke: #666;\n  stroke-width: 2px;\n}\n.the-graph-dark .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-dark .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-dark .eventcatcher {\n  fill: #fff;\n  fill-opacity: 0.1;\n}\n.the-graph-dark .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-dark .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .ex-inports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-outports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-inports .node .node-rect,\n.the-graph-dark .ex-outports .node .node-rect,\n.the-graph-dark .ex-inports .node:hover .node-rect,\n.the-graph-dark .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-dark .selection .ex-inports .node .node-border,\n.the-graph-dark .selection .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .ex-inports .node .node-border,\n.the-graph-dark .small .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .node-bg {\n  opacity: 0;\n}\n.the-graph-dark .selection .node .node-rect {\n  fill: rgba(61,66,67,0.94);\n}\n.the-graph-dark .selection .node .node-border {\n  stroke: #232829;\n}\n.the-graph-dark .selection .node .port-arc {\n  fill: #232829;\n}\n.the-graph-dark .selection .node .node-icon {\n  fill: #232829;\n}\n.the-graph-dark .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-dark .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .selection .node.selected .node-icon {\n  fill: #5e6a6e;\n}\n.the-graph-dark .selection .ex-inports .node .node-icon {\n  fill: #512f01;\n}\n.the-graph-dark .selection .ex-outports .node .node-icon {\n  fill: #015115;\n}\n.the-graph-dark .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node .node-border {\n  fill: rgba(61,66,67,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark path {\n  fill: none;\n}\n.the-graph-dark .arrow-bg {\n  stroke: #000;\n  stroke-width: 2px;\n}\n.the-graph-dark .edge-bg {\n  stroke: #000;\n  stroke-width: 5px;\n}\n.the-graph-dark .edge-fg {\n  stroke: #fff;\n  stroke-width: 3px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .edge-touch {\n  stroke-width: 7px;\n  opacity: 0;\n}\n.the-graph-dark .edge:hover .edge-bg,\n.the-graph-dark .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-dark .edge.selected .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 4px;\n}\n.the-graph-dark .edge.selected .edge-bg {\n  stroke-width: 8px;\n  stroke: #e6e6e6;\n}\n.the-graph-dark .small .edge-bg {\n  stroke-width: 8px;\n}\n.the-graph-dark .small .edge-fg {\n  stroke-width: 6px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n.the-graph-dark .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 4px;\n  stroke: #e6e6e6;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n.the-graph-dark .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 6px;\n  stroke: #e6e6e6;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-dark text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #fff;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .text-bg-rect {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .node-label,\n.the-graph-dark .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-dark .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-dark .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-dark .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-dark .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-dark .iip-path {\n  stroke-width: 1px;\n  stroke: #fff;\n}\n.the-graph-dark .iip-info {\n  visibility: hidden;\n}\n.the-graph-dark .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-dark .big .iip-info {\n  visibility: visible;\n}\n.the-graph-dark .context-modal-bg {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .context-node-rect {\n  fill: #121417;\n  stroke: #bfbfbf;\n  stroke-width: 0.5px;\n}\n.the-graph-dark .context-node-icon {\n  font-size: 30px;\n  fill: #fff;\n}\n.the-graph-dark .context-icon {\n  font-size: 20px;\n  fill: #fff;\n}\n.the-graph-dark .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-dark .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-slice.click:hover .context-arc {\n  stroke: rgba(90,102,114,0.95);\n}\n.the-graph-dark .context-circle {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-dark .context-circle-x {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-dark .context-port-bg {\n  fill: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-port-bg.highlight {\n  stroke: #bfbfbf;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(43,48,54,0.95);\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-path {\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-label {\n  fill: #fff;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-dark .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-dark .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-dark .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-dark .tooltip-bg {\n  fill: rgba(0,0,0,0.9);\n  opacity: 0.75;\n}\n.the-graph-dark .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-dark .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .node-icon {\n  font-size: 45px;\n  fill: #5e6a6e;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-dark .small .node-icon {\n  fill: #2f3537;\n  font-size: 66px;\n}\n.the-graph-dark .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-dark .ex-inports .node-icon,\n.the-graph-dark .small .ex-inports .node-icon {\n  fill: #e88802;\n}\n.the-graph-dark .ex-outports .node-icon,\n.the-graph-dark .small .ex-outports .node-icon {\n  fill: #02e83c;\n}\n.the-graph-dark .port-circle-bg {\n  fill: #666;\n  opacity: 0;\n}\n.the-graph-dark .port-arc {\n  fill: #666;\n}\n.the-graph-dark .port-circle-small {\n  fill: none;\n}\n.the-graph-dark .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-dark .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-dark .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-dark .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-dark .big .port-label {\n  visibility: visible;\n}\n.the-graph-dark .big .ex-inports .port-label,\n.the-graph-dark .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-dark .group-box {\n  fill: rgba(191,191,191,0.15);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .group-box:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-dark .group-box.color0 {\n  fill: rgba(191,191,191,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color1 {\n  fill: rgba(255,128,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color2 {\n  fill: rgba(255,202,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color3 {\n  fill: rgba(255,255,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color4 {\n  fill: rgba(128,255,159,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color5 {\n  fill: rgba(128,255,212,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color6 {\n  fill: rgba(128,244,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color7 {\n  fill: rgba(128,191,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color8 {\n  fill: rgba(223,128,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color9 {\n  fill: rgba(255,128,234,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color10 {\n  fill: rgba(255,128,181,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color0:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .group-box.color1:hover {\n  fill: rgba(255,128,128,0.25);\n}\n.the-graph-dark .group-box.color2:hover {\n  fill: rgba(255,202,128,0.25);\n}\n.the-graph-dark .group-box.color3:hover {\n  fill: rgba(255,255,128,0.25);\n}\n.the-graph-dark .group-box.color4:hover {\n  fill: rgba(128,255,159,0.25);\n}\n.the-graph-dark .group-box.color5:hover {\n  fill: rgba(128,255,212,0.25);\n}\n.the-graph-dark .group-box.color6:hover {\n  fill: rgba(128,244,255,0.25);\n}\n.the-graph-dark .group-box.color7:hover {\n  fill: rgba(128,191,255,0.25);\n}\n.the-graph-dark .group-box.color8:hover {\n  fill: rgba(223,128,255,0.25);\n}\n.the-graph-dark .group-box.color9:hover {\n  fill: rgba(255,128,234,0.25);\n}\n.the-graph-dark .group-box.color10:hover {\n  fill: rgba(255,128,181,0.25);\n}\n.the-graph-dark .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.1);\n}\n.the-graph-dark .selection .group-box.color1 {\n  fill: rgba(255,128,128,0.1);\n}\n.the-graph-dark .selection .group-box.color2 {\n  fill: rgba(255,202,128,0.1);\n}\n.the-graph-dark .selection .group-box.color3 {\n  fill: rgba(255,255,128,0.1);\n}\n.the-graph-dark .selection .group-box.color4 {\n  fill: rgba(128,255,159,0.1);\n}\n.the-graph-dark .selection .group-box.color5 {\n  fill: rgba(128,255,212,0.1);\n}\n.the-graph-dark .selection .group-box.color6 {\n  fill: rgba(128,244,255,0.1);\n}\n.the-graph-dark .selection .group-box.color7 {\n  fill: rgba(128,191,255,0.1);\n}\n.the-graph-dark .selection .group-box.color8 {\n  fill: rgba(223,128,255,0.1);\n}\n.the-graph-dark .selection .group-box.color9 {\n  fill: rgba(255,128,234,0.1);\n}\n.the-graph-dark .selection .group-box.color10 {\n  fill: rgba(255,128,181,0.1);\n}\n.the-graph-dark .selection .group-box.selection {\n  fill: rgba(255,255,255,0.15);\n  stroke: #e6e6e6;\n  stroke-width: 1px;\n}\n.the-graph-dark .selection .group-box.selection:hover {\n  fill: rgba(255,255,255,0.25);\n}\n.the-graph-dark .group-label {\n  text-anchor: start;\n  fill: #fff;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .group-description {\n  fill: #fff;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-dark .small .group-description {\n  visibility: hidden;\n}\n.the-graph-dark .stroke,\n.the-graph-dark .stroke.route0,\n.the-graph-dark .selection .selected .stroke,\n.the-graph-dark .selection .selected .stroke.route0 {\n  stroke: #fff;\n}\n.the-graph-dark .stroke.route1,\n.the-graph-dark .selection .selected .stroke.route1 {\n  stroke: #e80202;\n}\n.the-graph-dark .stroke.route2,\n.the-graph-dark .selection .selected .stroke.route2 {\n  stroke: #e88802;\n}\n.the-graph-dark .stroke.route3,\n.the-graph-dark .selection .selected .stroke.route3 {\n  stroke: #e8e802;\n}\n.the-graph-dark .stroke.route4,\n.the-graph-dark .selection .selected .stroke.route4 {\n  stroke: #02e83c;\n}\n.the-graph-dark .stroke.route5,\n.the-graph-dark .selection .selected .stroke.route5 {\n  stroke: #02e89c;\n}\n.the-graph-dark .stroke.route6,\n.the-graph-dark .selection .selected .stroke.route6 {\n  stroke: #02d5e8;\n}\n.the-graph-dark .stroke.route7,\n.the-graph-dark .selection .selected .stroke.route7 {\n  stroke: #0275e8;\n}\n.the-graph-dark .stroke.route8,\n.the-graph-dark .selection .selected .stroke.route8 {\n  stroke: #af02e8;\n}\n.the-graph-dark .stroke.route9,\n.the-graph-dark .selection .selected .stroke.route9 {\n  stroke: #e802c2;\n}\n.the-graph-dark .stroke.route10,\n.the-graph-dark .selection .selected .stroke.route10 {\n  stroke: #e80262;\n}\n.the-graph-dark .selection .stroke,\n.the-graph-dark .selection .stroke.route0 {\n  stroke: #757575;\n}\n.the-graph-dark .selection .stroke.route1 {\n  stroke: #510101;\n}\n.the-graph-dark .selection .stroke.route2 {\n  stroke: #512f01;\n}\n.the-graph-dark .selection .stroke.route3 {\n  stroke: #515101;\n}\n.the-graph-dark .selection .stroke.route4 {\n  stroke: #015115;\n}\n.the-graph-dark .selection .stroke.route5 {\n  stroke: #015136;\n}\n.the-graph-dark .selection .stroke.route6 {\n  stroke: #014a51;\n}\n.the-graph-dark .selection .stroke.route7 {\n  stroke: #012951;\n}\n.the-graph-dark .selection .stroke.route8 {\n  stroke: #3d0151;\n}\n.the-graph-dark .selection .stroke.route9 {\n  stroke: #510143;\n}\n.the-graph-dark .selection .stroke.route10 {\n  stroke: #510122;\n}\n.the-graph-dark .fill,\n.the-graph-dark .fill.route0,\n.the-graph-dark .selection .selected .fill,\n.the-graph-dark .selection .selected .fill.route0 {\n  fill: #fff;\n}\n.the-graph-dark .fill.route1,\n.the-graph-dark .selection .selected .fill.route1 {\n  fill: #e80202;\n}\n.the-graph-dark .fill.route2,\n.the-graph-dark .selection .selected .fill.route2 {\n  fill: #e88802;\n}\n.the-graph-dark .fill.route3,\n.the-graph-dark .selection .selected .fill.route3 {\n  fill: #e8e802;\n}\n.the-graph-dark .fill.route4,\n.the-graph-dark .selection .selected .fill.route4 {\n  fill: #02e83c;\n}\n.the-graph-dark .fill.route5,\n.the-graph-dark .selection .selected .fill.route5 {\n  fill: #02e89c;\n}\n.the-graph-dark .fill.route6,\n.the-graph-dark .selection .selected .fill.route6 {\n  fill: #02d5e8;\n}\n.the-graph-dark .fill.route7,\n.the-graph-dark .selection .selected .fill.route7 {\n  fill: #0275e8;\n}\n.the-graph-dark .fill.route8,\n.the-graph-dark .selection .selected .fill.route8 {\n  fill: #af02e8;\n}\n.the-graph-dark .fill.route9,\n.the-graph-dark .selection .selected .fill.route9 {\n  fill: #e802c2;\n}\n.the-graph-dark .fill.route10,\n.the-graph-dark .selection .selected .fill.route10 {\n  fill: #e80262;\n}\n.the-graph-dark .selection .fill,\n.the-graph-dark .selection .fill.route0 {\n  fill: #757575;\n}\n.the-graph-dark .selection .fill.route1 {\n  fill: #510101;\n}\n.the-graph-dark .selection .fill.route2 {\n  fill: #512f01;\n}\n.the-graph-dark .selection .fill.route3 {\n  fill: #515101;\n}\n.the-graph-dark .selection .fill.route4 {\n  fill: #015115;\n}\n.the-graph-dark .selection .fill.route5 {\n  fill: #015136;\n}\n.the-graph-dark .selection .fill.route6 {\n  fill: #014a51;\n}\n.the-graph-dark .selection .fill.route7 {\n  fill: #012951;\n}\n.the-graph-dark .selection .fill.route8 {\n  fill: #3d0151;\n}\n.the-graph-dark .selection .fill.route9 {\n  fill: #510143;\n}\n.the-graph-dark .selection .fill.route10 {\n  fill: #510122;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n\n.the-graph-light .the-graph-app {\n  background-color: #fff;\n  position: relative;\n}\n.the-graph-light svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-light .arrow {\n  cursor: default;\n}\n.the-graph-light .click {\n  cursor: pointer;\n}\n.the-graph-light .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-light .node-border {\n  fill: rgba(255,255,255,0.5);\n  stroke: #3b4245;\n  stroke-width: 2px;\n}\n.the-graph-light .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-light .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-light .eventcatcher {\n  fill: #000;\n  fill-opacity: 0.1;\n}\n.the-graph-light .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-light .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-light .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-light .ex-inports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-outports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-inports .node .node-rect,\n.the-graph-light .ex-outports .node .node-rect,\n.the-graph-light .ex-inports .node:hover .node-rect,\n.the-graph-light .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-light .selection .ex-inports .node .node-border,\n.the-graph-light .selection .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light .small .ex-inports .node .node-border,\n.the-graph-light .small .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .node-bg {\n  opacity: 0;\n}\n.the-graph-light .selection .node .node-rect {\n  fill: rgba(245,248,249,0.94);\n}\n.the-graph-light .selection .node .node-border {\n  stroke: #d6dadc;\n}\n.the-graph-light .selection .node .port-arc {\n  fill: #d6dadc;\n}\n.the-graph-light .selection .node .node-icon {\n  fill: #bac2c4;\n}\n.the-graph-light .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-light .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-light .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-light .selection .node.selected .node-icon {\n  fill: #2f3537;\n}\n.the-graph-light .selection .ex-inports .node .node-icon {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .ex-outports .node .node-icon {\n  fill: #ccffdb;\n}\n.the-graph-light .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node .node-border {\n  fill: rgba(245,248,249,0.94);\n  stroke: none;\n}\n.the-graph-light .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light path {\n  fill: none;\n}\n.the-graph-light .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 2.5px;\n}\n.the-graph-light .edge-bg {\n  stroke: #e6e6e6;\n  stroke-width: 6px;\n}\n.the-graph-light .edge-fg {\n  stroke: #bfbfbf;\n  stroke-width: 4px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-light .edge-touch {\n  stroke-width: 8px;\n  opacity: 0;\n}\n.the-graph-light .edge:hover .edge-bg,\n.the-graph-light .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-light .edge.selected .arrow-bg {\n  stroke: #808080;\n  stroke-width: 5px;\n}\n.the-graph-light .edge.selected .edge-bg {\n  stroke-width: 10px;\n  stroke: #808080;\n}\n.the-graph-light .small .edge-bg {\n  stroke-width: 10px;\n}\n.the-graph-light .small .edge-fg {\n  stroke-width: 8px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n.the-graph-light .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 5px;\n  stroke: #808080;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n.the-graph-light .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 8px;\n  stroke: #808080;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-light text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #000;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .text-bg-rect {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .node-label,\n.the-graph-light .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-light .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-light .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-light .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-light .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-light .iip-path {\n  stroke-width: 1px;\n  stroke: #bfbfbf;\n}\n.the-graph-light .iip-info {\n  visibility: hidden;\n}\n.the-graph-light .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-light .big .iip-info {\n  visibility: visible;\n}\n.the-graph-light .context-modal-bg {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .context-node-rect {\n  fill: #e0e3e6;\n  stroke: #404040;\n  stroke-width: 0.5px;\n}\n.the-graph-light .context-node-icon {\n  font-size: 30px;\n  fill: #000;\n}\n.the-graph-light .context-icon {\n  font-size: 20px;\n  fill: #000;\n}\n.the-graph-light .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-light .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-slice.click:hover .context-arc {\n  stroke: rgba(195,201,208,0.95);\n}\n.the-graph-light .context-circle {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-light .context-circle-x {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-light .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-light .context-port-bg {\n  fill: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-port-bg.highlight {\n  stroke: #404040;\n  stroke-width: 1px;\n}\n.the-graph-light .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(224,227,230,0.95);\n  stroke: #404040;\n}\n.the-graph-light .context-port-path {\n  stroke: #404040;\n}\n.the-graph-light .context-port-label {\n  fill: #000;\n  dominant-baseline: central;\n}\n.the-graph-light .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-light .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-light .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-light .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-light .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-light .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-light .tooltip-bg {\n  fill: rgba(255,255,255,0.9);\n  opacity: 0.75;\n}\n.the-graph-light .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-light .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .node-icon {\n  font-size: 45px;\n  fill: #3b4245;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-light .small .node-icon {\n  fill: #171b1c;\n  font-size: 66px;\n}\n.the-graph-light .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-light .ex-inports .node-icon,\n.the-graph-light .small .ex-inports .node-icon {\n  fill: #cc6300;\n}\n.the-graph-light .ex-outports .node-icon,\n.the-graph-light .small .ex-outports .node-icon {\n  fill: #00cc3d;\n}\n.the-graph-light .port-circle-bg {\n  fill: #3b4245;\n  opacity: 0;\n}\n.the-graph-light .port-arc {\n  fill: #3b4245;\n}\n.the-graph-light .port-circle-small {\n  fill: none;\n}\n.the-graph-light .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-light .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-light .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-light .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-light .big .port-label {\n  visibility: visible;\n}\n.the-graph-light .big .ex-inports .port-label,\n.the-graph-light .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-light .group-box {\n  fill: rgba(191,191,191,0.05);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-light .group-box:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-light .group-box.color0 {\n  fill: rgba(191,191,191,0.05);\n  stroke: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1 {\n  fill: rgba(204,0,0,0.05);\n  stroke: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2 {\n  fill: rgba(204,99,0,0.05);\n  stroke: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3 {\n  fill: rgba(255,200,0,0.05);\n  stroke: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4 {\n  fill: rgba(0,204,61,0.05);\n  stroke: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5 {\n  fill: rgba(171,242,218,0.05);\n  stroke: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6 {\n  fill: rgba(0,201,204,0.05);\n  stroke: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7 {\n  fill: rgba(0,82,204,0.05);\n  stroke: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8 {\n  fill: rgba(68,0,204,0.05);\n  stroke: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9 {\n  fill: rgba(255,168,186,0.05);\n  stroke: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10 {\n  fill: rgba(204,0,109,0.05);\n  stroke: rgba(204,0,109,0.15);\n}\n.the-graph-light .group-box.color0:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1:hover {\n  fill: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2:hover {\n  fill: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3:hover {\n  fill: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4:hover {\n  fill: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5:hover {\n  fill: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6:hover {\n  fill: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7:hover {\n  fill: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8:hover {\n  fill: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9:hover {\n  fill: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10:hover {\n  fill: rgba(204,0,109,0.15);\n}\n.the-graph-light .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.01);\n}\n.the-graph-light .selection .group-box.color1 {\n  fill: rgba(204,0,0,0.01);\n}\n.the-graph-light .selection .group-box.color2 {\n  fill: rgba(204,99,0,0.01);\n}\n.the-graph-light .selection .group-box.color3 {\n  fill: rgba(255,200,0,0.01);\n}\n.the-graph-light .selection .group-box.color4 {\n  fill: rgba(0,204,61,0.01);\n}\n.the-graph-light .selection .group-box.color5 {\n  fill: rgba(171,242,218,0.01);\n}\n.the-graph-light .selection .group-box.color6 {\n  fill: rgba(0,201,204,0.01);\n}\n.the-graph-light .selection .group-box.color7 {\n  fill: rgba(0,82,204,0.01);\n}\n.the-graph-light .selection .group-box.color8 {\n  fill: rgba(68,0,204,0.01);\n}\n.the-graph-light .selection .group-box.color9 {\n  fill: rgba(255,168,186,0.01);\n}\n.the-graph-light .selection .group-box.color10 {\n  fill: rgba(204,0,109,0.01);\n}\n.the-graph-light .selection .group-box.selection {\n  fill: rgba(128,128,128,0.15);\n  stroke: #808080;\n  stroke-width: 1px;\n}\n.the-graph-light .selection .group-box.selection:hover {\n  fill: rgba(102,102,102,0.25);\n}\n.the-graph-light .group-label {\n  text-anchor: start;\n  fill: #000;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .group-description {\n  fill: #000;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-light .small .group-description {\n  visibility: hidden;\n}\n.the-graph-light .stroke,\n.the-graph-light .stroke.route0,\n.the-graph-light .selection .selected .stroke,\n.the-graph-light .selection .selected .stroke.route0 {\n  stroke: #bfbfbf;\n}\n.the-graph-light .stroke.route1,\n.the-graph-light .selection .selected .stroke.route1 {\n  stroke: #c00;\n}\n.the-graph-light .stroke.route2,\n.the-graph-light .selection .selected .stroke.route2 {\n  stroke: #cc6300;\n}\n.the-graph-light .stroke.route3,\n.the-graph-light .selection .selected .stroke.route3 {\n  stroke: #ffc800;\n}\n.the-graph-light .stroke.route4,\n.the-graph-light .selection .selected .stroke.route4 {\n  stroke: #00cc3d;\n}\n.the-graph-light .stroke.route5,\n.the-graph-light .selection .selected .stroke.route5 {\n  stroke: #abf2da;\n}\n.the-graph-light .stroke.route6,\n.the-graph-light .selection .selected .stroke.route6 {\n  stroke: #00c9cc;\n}\n.the-graph-light .stroke.route7,\n.the-graph-light .selection .selected .stroke.route7 {\n  stroke: #0052cc;\n}\n.the-graph-light .stroke.route8,\n.the-graph-light .selection .selected .stroke.route8 {\n  stroke: #40c;\n}\n.the-graph-light .stroke.route9,\n.the-graph-light .selection .selected .stroke.route9 {\n  stroke: #ffa8ba;\n}\n.the-graph-light .stroke.route10,\n.the-graph-light .selection .selected .stroke.route10 {\n  stroke: #cc006d;\n}\n.the-graph-light .selection .stroke,\n.the-graph-light .selection .stroke.route0 {\n  stroke: #e6e6e6;\n}\n.the-graph-light .selection .stroke.route1 {\n  stroke: #fcc;\n}\n.the-graph-light .selection .stroke.route2 {\n  stroke: #ffe5cc;\n}\n.the-graph-light .selection .stroke.route3 {\n  stroke: #fff4cc;\n}\n.the-graph-light .selection .stroke.route4 {\n  stroke: #ccffdb;\n}\n.the-graph-light .selection .stroke.route5 {\n  stroke: #d3f8ec;\n}\n.the-graph-light .selection .stroke.route6 {\n  stroke: #ccfeff;\n}\n.the-graph-light .selection .stroke.route7 {\n  stroke: #cce0ff;\n}\n.the-graph-light .selection .stroke.route8 {\n  stroke: #dcf;\n}\n.the-graph-light .selection .stroke.route9 {\n  stroke: #ffccd6;\n}\n.the-graph-light .selection .stroke.route10 {\n  stroke: #ffcce7;\n}\n.the-graph-light .fill,\n.the-graph-light .fill.route0,\n.the-graph-light .selection .selected .fill,\n.the-graph-light .selection .selected .fill.route0 {\n  fill: #bfbfbf;\n}\n.the-graph-light .fill.route1,\n.the-graph-light .selection .selected .fill.route1 {\n  fill: #c00;\n}\n.the-graph-light .fill.route2,\n.the-graph-light .selection .selected .fill.route2 {\n  fill: #cc6300;\n}\n.the-graph-light .fill.route3,\n.the-graph-light .selection .selected .fill.route3 {\n  fill: #ffc800;\n}\n.the-graph-light .fill.route4,\n.the-graph-light .selection .selected .fill.route4 {\n  fill: #00cc3d;\n}\n.the-graph-light .fill.route5,\n.the-graph-light .selection .selected .fill.route5 {\n  fill: #abf2da;\n}\n.the-graph-light .fill.route6,\n.the-graph-light .selection .selected .fill.route6 {\n  fill: #00c9cc;\n}\n.the-graph-light .fill.route7,\n.the-graph-light .selection .selected .fill.route7 {\n  fill: #0052cc;\n}\n.the-graph-light .fill.route8,\n.the-graph-light .selection .selected .fill.route8 {\n  fill: #40c;\n}\n.the-graph-light .fill.route9,\n.the-graph-light .selection .selected .fill.route9 {\n  fill: #ffa8ba;\n}\n.the-graph-light .fill.route10,\n.the-graph-light .selection .selected .fill.route10 {\n  fill: #cc006d;\n}\n.the-graph-light .selection .fill,\n.the-graph-light .selection .fill.route0 {\n  fill: #e6e6e6;\n}\n.the-graph-light .selection .fill.route1 {\n  fill: #fcc;\n}\n.the-graph-light .selection .fill.route2 {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .fill.route3 {\n  fill: #fff4cc;\n}\n.the-graph-light .selection .fill.route4 {\n  fill: #ccffdb;\n}\n.the-graph-light .selection .fill.route5 {\n  fill: #d3f8ec;\n}\n.the-graph-light .selection .fill.route6 {\n  fill: #ccfeff;\n}\n.the-graph-light .selection .fill.route7 {\n  fill: #cce0ff;\n}\n.the-graph-light .selection .fill.route8 {\n  fill: #dcf;\n}\n.the-graph-light .selection .fill.route9 {\n  fill: #ffccd6;\n}\n.the-graph-light .selection .fill.route10 {\n  fill: #ffcce7;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","import { PolymerElement } from '@polymer/polymer';\n\nclass NofloPolymer extends PolymerElement {\n  static get properties() {\n    return {\n      element: {\n        type: String,\n      },\n      inports: {\n        type: String,\n      },\n      outports: {\n        type: String,\n      },\n    };\n  }\n}\n\ncustomElements.define('noflo-polymer', NofloPolymer);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #cta {\n        display: inline;\n        width: auto;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Account settings for <span>{{user.flowhub-user.name}}</span></h1>\n      <form>\n        <label>\n          Theme\n          <select name=\"type\" value=\"{{theme::input}}\">\n            <option value=\"dark\" selected\\$=\"[[_isSelectedTheme('dark', theme)]]\">Lazer</option>\n            <option value=\"light\" selected\\$=\"[[_isSelectedTheme('light', theme)]]\">Tube</option>\n          </select>\n        </label>\n        <label>\n          Debug [[env.NOFLO_APP_TITLE]] in Flowhub (requires reload)\n          <select name=\"type\" value=\"{{debug::input}}\">\n            <option value=\"false\" selected\\$=\"[[_isSelectedDebug('false', debug)]]\">Disabled</option>\n            <option value=\"true\" selected\\$=\"[[_isSelectedDebug('true', debug)]]\">Enabled</option>\n          </select>\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">Save</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-account-settings',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    debug: {\n      type: String,\n      value: 'false',\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.fire('updated', {\n      'flowhub-theme': this.theme,\n      'flowhub-debug': this.debug,\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  userChanged() {\n    this.theme = this.user['flowhub-theme'] || 'dark';\n    this.debug = this.user['flowhub-debug'] || 'false';\n  },\n\n  _isSelectedTheme(theme, current) {\n    return theme === current;\n  },\n\n  _isSelectedDebug(value, current) {\n    return value === current;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-account-settings';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        display: block;\n        padding-top: 18px;\n        width: 100%;\n      }\n      nav {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        padding-left: 72px;\n        padding-right: 72px;\n        padding-bottom: 18px;\n      }\n      section.app {\n        display: flex;\n        flex-direction: row;\n      }\n      section.app .logo {\n        margin-right: 18px;\n        width: 72px;\n        height: 72px;\n      }\n      section.app .logo img {\n        width: 72px;\n        height: 72px;\n        display: inline-block;\n      }\n      section.app h1 {\n        font-size: 18px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.app h2 {\n        font-size: 9px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.user {\n        text-align: right;\n      }\n      section.user .avatar {\n        display: inline;\n        line-height: 18px;\n      }\n      section.user .avatar img {\n        width: 18px;\n        height: 18px;\n        display: inline-block;\n      }\n      section.user h1 {\n        display: inline;\n        line-height: 36px;\n      }\n      section.user .toolbar {\n        line-height: 36px;\n        font-size: 9px;\n      }\n      section.user .toolbar a,\n      section.user .toolbar button {\n        padding: 3px;\n        text-shadow: none;\n        text-decoration: none;\n        box-shadow: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 9px;\n        margin-left: 9px;\n        cursor: pointer;\n        border: none;\n        background-color: transparent;\n        color: var(--noflo-ui-text);\n      }\n      section.user .toolbar a.login::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsla(190, 98%, 46%, .8);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n        transition: all 0.3s ease;\n      }\n      section.user .toolbar a.login {\n        position: relative;\n        padding: 9px;\n        font-size: 18px;\n        border: 1px solid hsl(190, 98%, 46%);\n        background: hsla(190, 98%, 46%, .8);\n        line-height: 18px;\n        border-radius: 3px;\n        color: var(--noflo-ui-text);\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        box-sizing: border-box;\n        transition: background-color 0.2s ease-in;\n      }\n      section.user .toolbar a.login:hover,\n      section.user .toolbar a.login:focus,\n      section.user .toolbar a.login:active {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text) !important;\n        outline: 0;\n      }\n      div.banner {\n        background-color: hsla(190, 98%, 46%, .8);\n        padding: 18px;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      div.banner a {\n        color: var(--noflo-ui-text);\n        cursor: pointer;\n      }\n      div.banner div {\n        margin-top: 18px;\n      }\n      div.banner button,\n      div.banner a.cta,\n      div.banner input[type=\"submit\"] {\n        display: inline-block;\n        color: var(--noflo-ui-background);\n        background-color: var(--noflo-ui-text);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        padding-top: 1px;\n        padding-bottom: 1px;\n        line-height: 36px;\n        margin: 0px;\n        cursor: pointer;\n        font-size: 13px;\n        text-decoration: none;\n      }\n      </style>\n    <nav>\n    <section class=\"app\">\n      <div class=\"logo [[env.NOFLO_THEME]]\"><img src=\"app/[[env.NOFLO_THEME]]-72.png\"></div>\n      <div class=\"name\">\n        <h1>\n          [[env.NOFLO_APP_NAME]]\n        </h1>\n        <h2>\n          v[[env.NOFLO_APP_VERSION]]\n        </h2>\n      </div>\n    </section>\n    <section class=\"user\">\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <div>\n        <template is=\"dom-if\" if=\"{{user.flowhub-avatar}}\">\n          <div class=\"avatar\"><img src=\"{{user.flowhub-avatar}}\"></div>\n        </template>\n        <h1>\n          <span>{{user.github-username}}</span>\n        </h1>\n        <div class=\"toolbar\">\n          <a href=\"https://docs.flowhub.io\" target=\"_blank\">Docs</a>\n          <a on-click=\"openSettings\">Settings</a>\n          <button on-click=\"logout\">Logout</button>\n        </div>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!user.flowhub-user}}\">\n      <div class=\"toolbar\">\n        <a id=\"loginbutton\" class=\"login\" on-click=\"login\">Login</a>\n      </div>\n    </template>\n    </section>\n    </nav>\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <template is=\"dom-if\" if=\"{{askForScope.length}}\">\n        <div class=\"banner\">\n          To be able to synchronize your GitHub projects, [[env.NOFLO_APP_TITLE]] needs repository access permissions. <a href=\"https://docs.flowhub.io/github-integration/\" target=\"_blank\">Read more</a>\n          <div>\n            Grant access to:\n            <template is=\"dom-repeat\" items=\"{{askForScope}}\" as=\"scope\">\n              <template is=\"dom-if\" if=\"{{_ifPublicScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public repositories only</button>\n              </template>\n              <template is=\"dom-if\" if=\"{{_ifPrivateScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public and private repositories</button>\n              </template>\n            </template>\n          </div>\n        </div>\n      </template>\n    </template>\n    </template>\n`,\n\n  is: 'noflo-account',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    askForScope: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    help: { value: null },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_THEME: process.env.NOFLO_THEME,\n          NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n          NOFLO_APP_VERSION: process.env.NOFLO_APP_VERSION,\n        };\n      },\n    },\n  },\n\n  login() {\n    this.fire('login', true);\n  },\n\n  logout() {\n    this.fire('logout', true);\n  },\n\n  relogin(event) {\n    event.preventDefault();\n    const scope = event.currentTarget.getAttribute('data-scope');\n    this.fire('relogin', scope);\n  },\n\n  userChanged() {\n    if (!this.user || !this.user['flowhub-user']) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('repo') === -1) {\n      // User hasn't granted repo access\n      this.set('askForScope', ['repo']);\n      if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('public_repo') === -1) {\n        // Allow paid users to limit repo access to only public if they want\n        this.push('askForScope', 'public_repo');\n      }\n    }\n  },\n\n  openSettings() {\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this.user['flowhub-user']) {\n      return;\n    }\n    const dialog = document.createElement('noflo-account-settings');\n    dialog.user = this.user;\n    dialog.theme = this.theme;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (event) => {\n      this.fire('userUpdated', event.detail);\n    });\n  },\n\n  _ifPublicScope(scope) {\n    return scope === 'public_repo';\n  },\n\n  _ifPrivateScope(scope) {\n    return scope === 'repo';\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\n\nclass NoFloIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: inline-block;\n      font: normal normal normal 14px/1 FontAwesomeSVG;\n      font-size: inherit;\n      text-rendering: auto;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n    </style>\n    [[_getIcon(icon, fallback)]]\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon';\n  }\n\n  static get properties() {\n    return {\n      icon: {\n        type: String,\n      },\n      fallback: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = icons;\n  }\n\n  _getIcon(icon, fallback) {\n    const result = this.icons.getIcon(icon, fallback);\n    return result;\n  }\n}\ncustomElements.define(NoFloIcon.is, NoFloIcon);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        top: calc(50% - 220px) !important;\n      }\n      ul.types {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n      }\n      ul.types li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 75%);\n        color: hsl(189, 50%, 80%);\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        transition: background-color 0.3s ease-in-out;\n      }\n      ul.types li.selected,\n      ul.types li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.types li.selected p {\n        color: hsl(0, 0%, 80%);\n      }\n      ul.types li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.types li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n      ul.types li noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n      }\n    </style>\n    <ul class=\"types\">\n      <template is=\"dom-repeat\" items=\"{{available}}\" as=\"availtype\">\n      <li on-click=\"selectType\" data-id\\$=\"{{availtype.id}}\" class\\$=\"{{_computeClass(availtype, type)}}\">\n        <h2>{{availtype.label}}</h2>\n        <noflo-icon icon=\"{{availtype.icon}}\"></noflo-icon>\n        <template is=\"dom-if\" if=\"{{_computeIf(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtime</p>\n        </template>\n        <template is=\"dom-if\" if=\"{{_computeIf2(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtimes</p>\n        </template>\n      </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-type-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'runtimesChanged',\n    },\n    type: {\n      type: String,\n      value: 'noflo-nodejs',\n      notify: true,\n    },\n  },\n\n  runtimesChanged() {\n    this.available = [{\n      id: 'all',\n      label: 'Multi-platform',\n      icon: 'asterisk',\n      runtimes: [],\n    }];\n    if (!this.runtimes) {\n      return;\n    }\n    this.runtimes.forEach((rt) => {\n      if (!rt.type) {\n        return;\n      }\n      const availType = this.getByType(rt.type);\n      availType.runtimes.push(rt);\n    });\n  },\n\n  selectType(event) {\n    this.type = event.currentTarget.getAttribute('data-id');\n  },\n\n  getByType(type) {\n    for (let i = 0; i < this.available.length; i += 1) {\n      if (this.available[i].id === type) {\n        return this.available[i];\n      }\n    }\n    return this.prepareAvailable(type);\n  },\n\n  prepareAvailable(type) {\n    const runtimeTypeInfo = {};\n    Object.keys(runtimeInfo).forEach((name) => {\n      const info = runtimeInfo[name];\n      Object.keys(info.runtimetypes).forEach((runtimeType) => {\n        runtimeTypeInfo[runtimeType] = info.runtimetypes[runtimeType];\n      });\n    });\n    // Also unknown runtimes should show up, synthesize info using defaults\n    const availType = {\n      id: type,\n      label: type,\n      icon: 'cogs',\n      runtimes: [],\n    };\n    const info = runtimeTypeInfo[type];\n    if (info && info.icon) {\n      availType.icon = info.icon;\n    }\n    if (info && info.shortname) {\n      availType.label = info.shortname;\n    }\n    this.push('available', availType);\n    return availType;\n  },\n\n  _computeClass(availtype, type) {\n    return this.tokenList({ selected: type === availtype.id });\n  },\n\n  _computeIf(availtype) {\n    return availtype.runtimes.length === 1;\n  },\n\n  _computeIf2(availtype) {\n    return availtype.runtimes.length > 1;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-type-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new project</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Project label\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          Project namespace\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-project\" autocapitalize=\"off\" autocorrect=\"off\" readonly=\"\">\n        </label>\n        <label>\n          Primary Type\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-project',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    projectId: {\n      type: String,\n      value: '',\n    },\n    projects: { value: null },\n    runtimes: {\n      value: null,\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  produceNamespace(namespace) {\n    return namespace.toLowerCase().replace(/[\\s/._]/g, '-').replace('--', '-').replace(/[^a-z0-9-]/g, '');\n  },\n\n  nameChanged() {\n    this.namespace = this.produceNamespace(this.name);\n    this.projectId = uuid();\n    if (this.name && this.namespace && this.projectId) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name || !this.namespace || !this.projectId) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newProject');\n    }\n    this.fire('new', {\n      id: this.projectId,\n      name: this.name,\n      namespace: this.produceNamespace(this.namespace),\n      type: this.type,\n      graphs: [],\n      components: [],\n      specs: [],\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add a new repository</h1>\n      <div class=\"modal-content\">\n      <form>\n        <label>\n          GitHub repository name\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/repository\" required=\"\">\n        </label>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Add</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-repository',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    repo: {\n      type: String,\n      value: '',\n      observer: 'repoChanged',\n    },\n    runtimes: { notify: true },\n    token: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  repoChanged() {\n    this.canSend = false;\n    if (this.repo && typeof this.repo === 'string') {\n      const matched = this.repo.match(/^(git@github\\.com:|https:\\/\\/github\\.com\\/)?(\\S+\\/\\S+?(?=\\.git|$))(\\.git)?$/);\n      if (!matched || !matched[2]) {\n        return;\n      }\n      if (matched[2] !== this.repo) {\n        // eslint-disable-next-line prefer-destructuring\n        this.repo = matched[2];\n      }\n      this.canSend = true;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.repo) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newRepository');\n    }\n    this.fire('new', this.repo);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      :host {\n        display: block;\n      }\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add new runtime</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Runtime name \n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"New local runtime\" required=\"\">\n        </label>\n        <label>\n          IP address\n          <input type=\"text\" value=\"{{address::input}}\" placeholder=\"127.0.0.1\" required=\"\">\n        </label>\n        <label>\n          Port\n          <input type=\"text\" data-type=\"int\" value=\"{{port::input}}\" placeholder=\"3569\" required=\"\">\n        </label>\n        <label>\n          Type\n          <select id=\"type\" value=\"{{type::input}}\">\n            <template is=\"dom-repeat\" items=\"{{availableTypes}}\" as=\"type\">\n            <option value=\"{{type}}\">{{type}}</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Secret\n          <input type=\"text\" value=\"{{secret::input}}\" placeholder=\"secret-string\" required=\"\">\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"create\" class\\$=\"{{_computeClass(canCreate)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-add-runtime',\n\n  properties: {\n    address: {\n      type: String,\n      value: 'localhost',\n      observer: 'validate',\n    },\n    availableTypes: {\n      type: Array,\n      value() {\n        return [\n          '',\n          'custom',\n          'noflo-nodejs',\n          'microflo',\n          'javafbp',\n          'imgflo',\n          'sndflo',\n          'msgflo',\n        ];\n      },\n    },\n    canCreate: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n    port: {\n      type: String,\n      value: '3569',\n      observer: 'validate',\n    },\n    secret: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n  },\n\n  attached() {\n    // PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    // PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  validate() {\n    if (this.name && this.address && this.port && this.type) {\n      this.canCreate = true;\n    }\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  createUUID() {\n    return uuid();\n  },\n\n  create(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    const runtime = {\n      name: this.name,\n      label: this.name,\n      id: this.createUUID(),\n      type: this.type,\n      seen: new Date().toString(),\n      protocol: 'websocket',\n      address: `ws://${this.address}:${this.port}`,\n      description: '',\n      secret: this.secret,\n      icon: 'cloud',\n    };\n    this.fire('new', runtime);\n    this.close();\n  },\n\n  listeners: { click: 'close' },\n\n  _computeRepeat(availableTypes, t) {\n    return t in availableTypes;\n  },\n\n  _computeClass(canCreate) {\n    return this.tokenList({ disabled: !canCreate });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-add-runtime';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nconst runtimes = [];\n\nconst runtimeTypes = {};\nObject.keys(runtimeInfo).forEach((name) => {\n  const rtInfo = runtimeInfo[name];\n  Object.keys(rtInfo.runtimetypes).forEach((runtimeType) => {\n    const info = rtInfo.runtimetypes[runtimeType];\n    const def = {\n      name: runtimeType,\n      label: info.shortname,\n      icon: info.icon,\n      description: info.description,\n      url: info.helpurl,\n    };\n    if (!runtimeTypes[runtimeType]) {\n      // Avoid duplicates\n      runtimeTypes[runtimeType] = def;\n      runtimes.push(def);\n    }\n  });\n});\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n      ul.runtimes {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -10px;\n        margin-right: -10px;\n        list-style: none;\n      }\n      ul.runtimes li {\n        display: inline-block;\n      }\n      ul.runtimes li a {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        text-decoration: none;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        text-decoration: none;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n        text-decoration: none;\n      }\n      ul.runtimes li a noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        text-decoration: none;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Register new runtime</h1>\n      <div class=\"modal-content\">\n      <p>\n      [[env.NOFLO_APP_TITLE]] supports all flow-based programming runtimes that are compatible with the <a href=\"https://flowbased.github.io/fbp-protocol/\" target=\"_blank\">FBP protocol</a>.\n      [[env.NOFLO_APP_TITLE]] comes with a bundled <a href=\"http://noflojs.org\" target=\"_blank\">NoFlo</a> runtime for the browser.\n      Here are some other popular ones:\n      </p>\n      <ul class=\"runtimes\">\n      <template is=\"dom-repeat\" items=\"{{runtimes}}\" as=\"runtime\">\n      <li class\\$=\"{{runtime.name}}\">\n        <a target=\"_blank\" href\\$=\"{{runtime.url}}\">\n          <noflo-icon icon=\"{{ runtime.icon }}\" fallback=\"cog\"></noflo-icon>\n          <h2>{{runtime.label}}</h2>\n          <p>{{runtime.description}}</p>\n        </a>\n      </li>\n      </template>\n      </ul>\n      <p>\n      Most runtimes provide a link that connects to them in [[env.NOFLO_APP_TITLE]] live mode at start-up. You can also add a runtime manually.\n      </p>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"addRuntime\">Add manually</button>\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-runtime',\n\n  properties: {\n    runtimes: {\n      value() {\n        return runtimes;\n      },\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    if (this.runtimeAdd) {\n      if (PolymerDom(this.runtimeAdd).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeAdd).parentNode).removeChild(this.runtimeAdd);\n      }\n      this.runtimeAdd = null;\n    }\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  addRuntime(event) {\n    event.preventDefault();\n    this.runtimeAdd = document.createElement('noflo-add-runtime');\n    PolymerDom(document.body).appendChild(this.runtimeAdd);\n    this.runtimeAdd.addEventListener('new', (ev) => {\n      this.fire('addRuntime', ev.detail);\n    });\n  },\n\n  listeners: { click: 'close' },\n});\n","/*\n* Renders a fbp-graph instance into a canvas\n* Autoscales the render to fit, and exposes the scale as thumbscale, thumbrectangle, viewrectangle\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\n\nPolymer({\n  _template: html`\n    <canvas id=\"canvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n`,\n\n  is: 'the-graph-thumb',\n\n  properties: {\n    edgeColors: {\n      type: Array,\n      value() {\n        return [\n          'white',\n          'hsl(  0, 100%, 46%)',\n          'hsl( 35, 100%, 46%)',\n          'hsl( 60, 100%, 46%)',\n          'hsl(135, 100%, 46%)',\n          'hsl(160, 100%, 46%)',\n          'hsl(185, 100%, 46%)',\n          'hsl(210, 100%, 46%)',\n          'hsl(285, 100%, 46%)',\n          'hsl(310, 100%, 46%)',\n          'hsl(335, 100%, 46%)',\n        ];\n      },\n    },\n    fillStyle: {\n      type: String,\n      value: 'hsl(184, 8%, 10%)',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    lineWidth: {\n      type: Number,\n      value: 0.75,\n    },\n    listener: { value: null },\n    nodeSize: {\n      type: Number,\n      value: 60,\n    },\n    strokeStyle: {\n      type: String,\n      value: 'hsl(180, 11%, 70%)',\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { notify: true },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.thumbrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.viewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n  },\n\n  attached() {\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n    this.themeChanged();\n  },\n\n  themeChanged() {\n    const style = TheGraph.thumb.styleFromTheme(this.theme);\n    this.edgeColors = style.edgeColors;\n    this.fillStyle = style.fill;\n    this.strokeStyle = style.stroke;\n    // Redraw\n    this.redrawGraph();\n  },\n\n  redrawGraph() {\n    if (!this.graph) {\n      return;\n    }\n    const context = this.$.canvas.getContext('2d');\n    if (!context) {\n      // ???\n      setTimeout(this.redrawGraph.bind(this), 500);\n      return;\n    }\n    const properties = {\n      width: this.width,\n      height: this.height,\n      edgeColors: this.edgeColors,\n      nodeSize: this.nodeSize,\n      strokeStyle: this.strokeStyle,\n      fillStyle: this.fillStyle,\n      lineWidth: this.lineWidth,\n    };\n    const thumb = TheGraph.thumb.render(context, this.graph, properties);\n    this.thumbrectangle = thumb.rectangle;\n    this.thumbscale = thumb.scale;\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (!this.listener) {\n      this.listener = this.redrawGraph.bind(this);\n    }\n    if (oldGraph) {\n      oldGraph.removeListener('endTransaction', this.listener);\n    }\n    if (!this.graph) {\n      return;\n    }\n    this.graph.on('endTransaction', this.listener);\n    this.redrawGraph();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.redrawGraph();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.redrawGraph();\n  },\n\n  toDataURL() {\n    return this.$.canvas.toDataURL();\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\nimport './the-graph-thumb';\n\nclass NoFloProjectCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n    </style>\n    <the-graph-thumb graph=\"[[_getMainGraph(project.main)]]\" width=\"200\" height=\"120\"></the-graph-thumb>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <template is=\"dom-if\" if=\"[[project.gist]]\">\n      <li><button on-click=\"openGithub\">View Gist</button></li>\n      </template>\n      <li><button on-click=\"deleteProject\">Delete project</button></li>\n    </ul>\n    </template>\n    <h2>[[project.name]]</h2>\n    <p><span>[[project.graphs.length]]</span>&nbsp;graphs, <span>[[project.components.length]]</span>&nbsp;components</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-project-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo && !this.project.gist) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n      return;\n    }\n    if (this.project.gist) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGist');\n      }\n      window.location = `https://gist.github.com/${this.project.gist}`;\n    }\n  }\n\n  deleteProject(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.dispatchEvent(new CustomEvent('deleteProject', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _getMainGraph(main) {\n    if (!main) {\n      return null;\n    }\n    const mains = this.project.graphs.filter((graph) => {\n      if (graph.properties.id !== main) {\n        return false;\n      }\n      return true;\n    });\n    if (!mains.length) {\n      return null;\n    }\n    return mains[0];\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloProjectCard.is, NoFloProjectCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRepoCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      #repoicon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        color: hsla(185, 100%, 75%, 0.2);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-icon id=\"repoicon\" icon=\"[[getRepoIcon(project)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <li><button on-click=\"deleteRepo\">Remove from [[env.NOFLO_APP_NAME]]</button></li>\n    </ul>\n    </template>\n    <h2>[[project.repo]]</h2>\n    <template is=\"dom-if\" if=\"[[project.private]]\">\n    <p>Private repository</p>\n      <template is=\"dom-if\" if=\"[[!_isFree(user)]]\">\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!project.private]]\">\n    <p>Public repository</p>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'noflo-repo-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n      env: {\n        type: Object,\n        value() {\n          return {\n            NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          };\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n    }\n  }\n\n  deleteRepo(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteRepo');\n    }\n    this.dispatchEvent(new CustomEvent('deleteRepo', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n\n  getRepoIcon() {\n    return 'github';\n  }\n}\ncustomElements.define(NoFloRepoCard.is, NoFloRepoCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRuntimeCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n    #runtimeicon {\n      font-size: 72px;\n      position: absolute;\n      right: -8px;\n      top: 9px;\n      color: hsla(185, 100%, 75%, 0.2);\n      text-decoration: none;\n    }\n    </style>\n    <noflo-icon id=\"runtimeicon\" icon=\"[[getRuntimeIcon(runtime)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Runtime menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <li><button on-click=\"deleteRuntime\">Delete runtime</button></li>\n    </ul>\n    </template>\n    <h2>[[runtime.label]]</h2>\n    <p><span>[[_produceAddress(runtime)]]</span>. Seen <span>[[runtime.seenHoursAgo]]</span>h ago</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-runtime-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      runtime: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  deleteRuntime(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.dispatchEvent(new CustomEvent('deleteRuntime', {\n      detail: this.runtime,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.type || !runtimeInfo[runtime.type]) {\n      return 'cog';\n    }\n    let icon = 'cog';\n    Object.keys(runtimeInfo).forEach((name) => {\n      Object.keys(runtimeInfo[name].runtimetypes).forEach((runtimeType) => {\n        if (runtimeType !== runtime.type) {\n          return;\n        }\n        icon = runtimeInfo[name].runtimetypes[runtime.type].icon;\n      });\n    });\n    return icon;\n  }\n\n  _produceAddress(runtime) {\n    if (runtime.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.id}`;\n    }\n    return runtime.address;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloRuntimeCard.is, NoFloRuntimeCard);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-account';\nimport './noflo-new-project';\nimport './noflo-new-repository';\nimport './noflo-new-runtime';\nimport './noflo-project-card';\nimport './noflo-repo-card';\nimport './noflo-runtime-card';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: hsl(190, 90%, 45%);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        transition: height 1s ease-in-out;\n        display: block;\n      }\n      section {\n        display: block;\n        position: relative;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      section > h2 {\n        font-size: 17px;\n        line-height: 36px;\n        margin-top: 36px;\n        height: 36px;\n        color: white;\n        text-shadow: 0 1px 0 hsl(190, 100%, 40%);\n        text-transform: none;\n      }\n      section > h2 small {\n        font-size: 10px;\n        text-transform: uppercase;\n        color: hsl(189, 50%, 25%);\n      }\n      ul.tabs {\n        position: absolute;\n        display: inline-block;\n        top: 0px;\n        left: calc(50% - 133px);\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n      ul.projects {\n        padding: 0px;\n        margin-top: 36px;\n        margin-bottom: 36px;\n        margin-left: -18px;\n        margin-right: -18px;\n        list-style: none;\n      }\n      ul.projects li {\n        width: 216px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        border-radius: 3px;\n        margin-right: 18px;\n        margin-left: 18px;\n        margin-bottom: 36px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.projects li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.projects li.remote {\n        cursor: default;\n      }\n      section button,\n      section #cta {\n        background-color: transparent;\n        color: hsl(189, 50%, 25%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        border: none;\n        padding-left: 13px;\n        padding-right: 13px;\n        cursor: pointer;\n      }\n      ul.projects li button,\n      ul.projects li #cta {\n        display: block;\n        border: 1px solid hsl(189, 50%, 25%);\n        position: absolute;\n        right: 18px;\n        top: 36px;\n      }\n      ul.projects li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 150px;\n        text-transform: none;\n        font-size: 12px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.projects li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 150px;\n        text-transform: uppercase;\n        font-size: 10px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 11%, 50%);\n      }\n      ul.projects li a {\n        color: var(--noflo-ui-background);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-account id=\"mainaccount\" user=\"[[user]]\" theme=\"[[theme]]\"></noflo-account>\n      <section id=\"projects\">\n        <h2>Projects\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <small>[[numberOfLocalProjects(projects)]]</small>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <small>[[numberOfRemoteProjects(remoteProjects)]]</small>\n          <button on-click=\"fetchGithub\">\n            <noflo-icon id=\"fetchgithub\" icon=\"refresh\"></noflo-icon>\n          </button>\n          </template>\n        </h2>\n        <ul class=\"tabs\">\n          <li on-click=\"openLocal\" class\\$=\"[[_isSelectedView('local', projectList)]]\">On device</li>\n          <template is=\"dom-if\" if=\"[[_canGithub(user)]]\">\n          <li on-click=\"openGithub\" class\\$=\"[[_isSelectedView('github', projectList)]]\">GitHub</li>\n          </template>\n        </ul>\n        <ul class=\"projects\">\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>New project</h2>\n            <button id=\"newproject\" on-click=\"newProject\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[projects]]\" as=\"project\" filter=\"filterLocalProjects\">\n            <li on-click=\"openProject\" data-id\\$=\"[[project.id]]\">\n              <noflo-project-card project=\"[[project]]\"></noflo-project-card>\n            </li>\n          </template>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>Add a repository</h2>\n            <button id=\"newrepository\" on-click=\"newRepository\">Add</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[remoteProjects]]\" as=\"project\" filter=\"filterRemoteProjects\">\n            <li class=\"remote\" on-click=\"downloadProject\" data-repo\\$=\"[[project.repo]]\">\n              <noflo-repo-card project=\"[[project]]\"></noflo-repo-card>\n            </li>\n          </template>\n          </template>\n        </ul>\n      </section>\n    <section id=\"runtimes\">\n      <h2>\n        Runtimes <small><span>[[numberOfAvailableRuntimes(runtimes)]]</span> / <span>[[runtimes.length]]</span></small>\n        <template is=\"dom-if\" if=\"[[_canFlowhub(user)]]\">\n        <button on-click=\"fetchRuntimes\">\n          <noflo-icon id=\"fetchruntimes\" icon=\"refresh\"></noflo-icon>\n        </button>\n        </template>\n      </h2>\n      <ul class=\"projects\">\n        <li class=\"add\">\n          <h2>New runtime</h2>\n          <button on-click=\"newRuntime\">Register</button>\n        </li>\n\n        <template is=\"dom-repeat\" items=\"[[runtimes]]\" as=\"runtime\" filter=\"filterAvailableRuntimes\">\n          <li on-click=\"openRuntime\" data-id\\$=\"[[runtime.id]]\" data-protocol\\$=\"[[runtime.protocol]]\">\n            <noflo-runtime-card runtime=\"[[runtime]]\"></noflo-runtime-card>\n          </li>\n        </template>\n      </ul>\n    </section>\n    <section id=\"examples\">\n      <h2>\n        Examples\n      </h2>\n      <ul class=\"projects\">\n        <template is=\"dom-repeat\" items=\"[[_getExamples(projects, runtimes)]]\" as=\"example\">\n        <li on-click=\"openExample\" class=\"example\" data-id\\$=\"[[example.id]]\">\n          <h2>[[example.label]]</h2>\n          <p>[[example.address]]</p>\n        </li>\n        </template>\n      </ul>\n    </section>\n`,\n\n  is: 'noflo-main',\n\n  properties: {\n    help: { value: null },\n    open: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'openChanged',\n    },\n    projectList: {\n      type: String,\n      value: 'local',\n    },\n    projects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    remoteProjects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    theme: {\n      type: String,\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.openChanged();\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  openChanged() {\n    if (String(this.open) === 'true') {\n      // Make main visible\n      this.set('style.height', '100%');\n      return;\n    }\n    this.set('style.height', '0px');\n  },\n\n  openLocal(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.projectList = 'local';\n  },\n\n  openGithub(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    event.preventDefault();\n    this.projectList = 'github';\n    if (!this.remoteProjects || this.remoteProjects.length === 0) {\n      setTimeout(() => {\n        this.fetchGithub();\n      }, 1);\n    }\n  },\n\n  downloadProject(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const repo = event.currentTarget.getAttribute('data-repo');\n    const repoParts = repo.split('/');\n    const branch = 'master';\n    this.fire('downloadProject', {\n      org: repoParts[0],\n      repo: repoParts[1],\n      branch,\n    });\n    this.openLocal();\n  },\n\n  fetchGithub(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    this.fire('fetchRemote', true);\n  },\n\n  numberOfRemoteProjects(remoteProjects) {\n    return remoteProjects.filter(this.filterRemoteProjects.bind(this)).length;\n  },\n\n  filterRemoteProjects(remoteProject) {\n    if (!this.projects) {\n      return true;\n    }\n    for (let i = 0; i < this.projects.length; i += 1) {\n      if (this.projects[i].repo === remoteProject.repo) {\n        // We already have this project checked out\n        return false;\n      }\n    }\n    return true;\n  },\n\n  numberOfLocalProjects(projects) {\n    return projects.filter(this.filterLocalProjects.bind(this)).length;\n  },\n\n  filterLocalProjects(project) {\n    if (project.type === 'flowtrace-replay') {\n      return false;\n    }\n    return true;\n  },\n\n  numberOfAvailableRuntimes(runtimes) {\n    return runtimes.filter(this.filterAvailableRuntimes.bind(this)).length;\n  },\n\n  filterAvailableRuntimes(runtime) {\n    if (!runtime) {\n      return false;\n    }\n    if (!runtime.seen) {\n      // Non-persistent runtime, don't show\n      return false;\n    }\n    if (runtime.type === 'flowtrace-replay') {\n      // Flowtrace runtimes don't make sense to show\n      return false;\n    }\n    if (runtime.protocol === 'opener' && !window.opener) {\n      // Can't use opener runtimes if opener is not defined\n      return false;\n    }\n    if (typeof runtime.seen !== 'object') {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = new Date(runtime.seen);\n    }\n    const now = new Date();\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor((now - runtime.seen) / (60 * 60 * 1000));\n    return true;\n  },\n\n  _getExamples(projects, runtimes) {\n    const runtimeTypes = [];\n    // Find examples for current runtime types\n    runtimes.forEach((runtime) => {\n      if (!runtime.type) {\n        return;\n      }\n      if (runtimeTypes.indexOf(runtime.type) === -1) {\n        runtimeTypes.push(runtime.type);\n      }\n    });\n    const examples = [];\n    runtimeTypes.forEach((type) => {\n      if (!runtimeInfo[type]) {\n        return;\n      }\n      const typeExamples = runtimeInfo[type].examples;\n      if (!typeExamples) {\n        return;\n      }\n      Object.keys(typeExamples).forEach((key) => {\n        if (typeExamples[key].ssl && window.location.protocol !== 'https:') {\n          // Skip examples that require SSL when on HTTP\n          return;\n        }\n        examples.push(typeExamples[key]);\n      });\n    });\n    const seen = [];\n    return examples.filter((example) => {\n      if (seen.indexOf(example.id) !== -1) {\n        return false;\n      }\n      seen.push(example.id);\n      const local = projects.filter((project) => {\n        if (project.gist === example.id) {\n          return true;\n        }\n        return false;\n      });\n      if (!local.length) {\n        return true;\n      }\n      return false;\n    });\n  },\n\n  fetchRuntimes() {\n    if (!this._canFlowhub(this.user)) {\n      return;\n    }\n    this.fire('fetchRuntimes', true);\n  },\n\n  openProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    let project = null;\n    this.projects.forEach((p) => {\n      if (p.id === event.currentTarget.getAttribute('data-id')) {\n        project = p;\n      }\n    });\n    if (!project) {\n      return;\n    }\n    if (project.runtime) {\n      const matchingRuntime = this.runtimes.filter(this.filterAvailableRuntimes).filter((rt) => {\n        if (rt.id === project.runtime) {\n          return true;\n        }\n        return false;\n      });\n      if (!matchingRuntime.length) {\n        // Runtime for this project is not available\n        return;\n      }\n    }\n    this.fire('openProject', project);\n  },\n\n  openRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (event.currentTarget.getAttribute('data-protocol') === 'iframe') {\n      return;\n    }\n    this.fire('hash', [\n      'runtime',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  openExample(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.fire('hash', [\n      'gist',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  newProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-project');\n    dialog.projects = this.projects;\n    dialog.runtimes = this.runtimes;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const project = ev.detail;\n      const graph = new Graph('main');\n      const graphId = `${project.id}/main`;\n      graph.setProperties({\n        id: graphId,\n        project: project.id,\n        environment: { type: project.type },\n        main: true,\n      });\n      project.graphs.push(graph);\n      project.main = graphId;\n      this.fire('newgraph', graph);\n      this.fire('newproject', project);\n    });\n  },\n\n  newRepository(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-repository');\n    dialog.addEventListener('new', (ev) => {\n      const repo = ev.detail;\n      const repoParts = repo.split('/');\n      const branch = 'master';\n      this.fire('downloadProject', {\n        org: repoParts[0],\n        repo: repoParts[1],\n        branch,\n      });\n      setTimeout(() => {\n        this.openLocal();\n      }, 1);\n    });\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  newRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-runtime');\n    dialog.addEventListener('addRuntime', (ev) => {\n      this.fire('newruntime', ev.detail);\n    });\n    dialog.user = this.user;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  _isLocalProjects(projectList) {\n    return projectList === 'local';\n  },\n\n  _canGithub(user) {\n    if (user && user['github-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _canFlowhub(user) {\n    if (user && user['flowhub-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _isSelectedView(view, list) {\n    if (list === view) {\n      return 'selected';\n    }\n    return '';\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'hammerjs';\nimport TheGraph from 'the-graph';\nimport { unnamespace } from '../src/collections';\nimport './the-graph-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-graph-styles\">\n    </style>\n    <div id=\"svgcontainer\"></div>\n`,\n\n  is: 'the-graph',\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'iconsChanged',\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'animatedEdgesChanged',\n    },\n    appView: { value: null },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    autolayouter: { value: null },\n    debounceLibraryRefeshTimer: { value: null },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'displaySelectionGroupChanged',\n    },\n    editable: {\n      type: Boolean,\n      value: true,\n    },\n    graphChanges: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'errorNodesChanged',\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'forceSelectionChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    graphView: { value: null },\n    grid: {\n      type: Number,\n      value: 72,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    library: {\n      value: null,\n      notify: true,\n    },\n    maxZoom: {\n      type: Number,\n      value: 15,\n      notify: true,\n    },\n    menus: {\n      value: null,\n      notify: true,\n      observer: 'menusChanged',\n    },\n    minZoom: {\n      type: Number,\n      value: 0.15,\n      notify: true,\n    },\n    offsetX: {\n      value: 0,\n      notify: true,\n    },\n    offsetY: {\n      value: 0,\n      notify: true,\n    },\n    pan: {\n      notify: true,\n      observer: 'panChanged',\n    },\n    readonly: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    scale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedEdgesChanged',\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedNodesChanged',\n    },\n    selectedNodesHash: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'selectedNodesHashChanged',\n    },\n    snap: {\n      type: Number,\n      value: 36,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.library = {};\n    // Default pan\n    this.pan = [\n      0,\n      0,\n    ];\n    // Initializes the autolayouter\n    this.autolayouter = klayNoflo.init({\n      onSuccess: this.applyAutolayout.bind(this),\n      workerScript: 'vendor/klayjs/klay.js',\n    });\n    this.themeChanged();\n  },\n\n  themeChanged(newTheme, previousTheme) {\n    PolymerDom(this.$.svgcontainer).classList.remove(`the-graph-${previousTheme}`);\n    if (newTheme) {\n      PolymerDom(this.$.svgcontainer).classList.add(`the-graph-${newTheme}`);\n    }\n  },\n\n  graphEvents: [\n    'changeProperties',\n    'addNode',\n    'changeNode',\n    'removeNode',\n    'addEdge',\n    'changeEdge',\n    'removeEdge',\n    'addInitial',\n    'removeInitial',\n    'addGroup',\n    'removeGroup',\n    'changeGroup',\n  ],\n\n  graphRenameEvents: [\n    'renameInport',\n    'renameOutport',\n    'renameGroup',\n    'renameNode',\n  ],\n\n  graphPortEvents: [\n    'addInport',\n    'removeInport',\n    'addOutport',\n    'removeOutport',\n  ],\n\n  subscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      this.trackGraphChange = {};\n    }\n    this.graphEvents.forEach((event) => {\n      this.trackGraphChange[event] = (payload) => {\n        this.graphChanges.push({\n          event,\n          payload,\n        });\n        if (this.autolayout) {\n          this.triggerAutolayout();\n        }\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphRenameEvents.forEach((event) => {\n      this.trackGraphChange[event] = (from, to) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            from,\n            to,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphPortEvents.forEach((event) => {\n      this.trackGraphChange[event] = (pub, priv) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            public: pub,\n            node: priv.process,\n            port: priv.port,\n            metadata: priv.metadata,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n\n    // Send changeset at end of transaction\n    this.trackGraphChange.endTransaction = () => {\n      // Send full graph for storage\n      this.fire('changed', graph);\n      // Send and clear graph change log\n      if (this.graphChanges.length) {\n        if (!this.readonly) {\n          this.fire('graphChanges', this.graphChanges);\n        }\n        this.graphChanges = [];\n      }\n    };\n    this.graph.on('endTransaction', this.trackGraphChange.endTransaction);\n  },\n\n  unsubscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      return;\n    }\n    const allEvents = this.graphEvents.concat(this.graphRenameEvents, this.graphPortEvents);\n    allEvents.forEach((event) => {\n      if (!this.trackGraphChange[event]) {\n        return;\n      }\n      graph.removeListener(event, this.trackGraphChange[event]);\n      delete this.trackGraphChange[event];\n    });\n\n    if (this.trackGraphChange.endTransaction) {\n      graph.removeListener('endTransaction', this.trackGraphChange.endTransaction);\n      delete this.trackGraphChange.endTransaction;\n    }\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (oldGraph && oldGraph.removeListener) {\n      this.unsubscribeGraph(oldGraph);\n    }\n\n    if (this.appView) {\n      // Remove previous instance\n      ReactDOM.unmountComponentAtNode(this.$.svgcontainer);\n    }\n\n    if (!this.graph) {\n      return;\n    }\n\n    // Subscribe to graph changes\n    this.subscribeGraph(newGraph);\n\n    // Setup app\n    PolymerDom(this.$.svgcontainer).innerHTML = '';\n    this.appView = ReactDOM.render(TheGraph.App({\n      graph: this.graph,\n      width: this.width,\n      minZoom: this.minZoom,\n      maxZoom: this.maxZoom,\n      height: this.height,\n      library: this.library,\n      menus: this.menus,\n      editable: this.editable,\n      onEdgeSelection: this.onEdgeSelection.bind(this),\n      onNodeSelection: this.onNodeSelection.bind(this),\n      onPanScale: this.onPanScale.bind(this),\n      getMenuDef: this.getMenuDef.bind(this),\n      displaySelectionGroup: this.displaySelectionGroup,\n      forceSelection: this.forceSelection,\n      offsetY: this.offsetY,\n      offsetX: this.offsetX,\n      readonly: this.readonly,\n    }), this.$.svgcontainer);\n    this.graphView = this.appView.refs.graph;\n  },\n\n  onPanScale(x, y, scale) {\n    this.set(`pan.${0}`, x);\n    this.set(`pan.${1}`, y);\n    this.scale = scale;\n  },\n\n  onEdgeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedEdges.length > 0) {\n        this.selectedEdges = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedEdges.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedEdges.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedEdges = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedEdges = shallowClone;\n      }\n    } else {\n      this.selectedEdges = [item];\n    }\n  },\n\n  onNodeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedNodes.length > 0) {\n        this.selectedNodes = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedNodes.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedNodes.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedNodes = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedNodes = shallowClone;\n      }\n    } else {\n      this.selectedNodes = [item];\n    }\n  },\n\n  selectedNodesChanged() {\n    this.set('selectedNodesHash', {});\n    const selectedNodesHash = {};\n    this.selectedNodes.forEach((item) => {\n      selectedNodesHash[item.id] = true;\n    });\n    this.set('selectedNodesHash', selectedNodesHash);\n    this.fire('nodes', this.selectedNodes);\n  },\n\n  selectedNodesHashChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedNodes(this.selectedNodesHash);\n  },\n\n  errorNodesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setErrorNodes(this.errorNodes);\n  },\n\n  selectedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedEdges(this.selectedEdges);\n    this.fire('edges', this.selectedEdges);\n  },\n\n  animatedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setAnimatedEdges(this.animatedEdges);\n  },\n\n  iconsChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    Object.keys(this.icons).forEach((nodeId) => {\n      this.graphView.updateIcon(nodeId, this.icons[nodeId]);\n    });\n  },\n\n  triggerAutolayout() {\n    const { graph } = this;\n    const portInfo = this.graphView ? this.graphView.portInfo : null;\n    // Calls the autolayouter\n    this.autolayouter.layout({\n      graph,\n      portInfo,\n      direction: 'RIGHT',\n      options: {\n        intCoordinates: true,\n        algorithm: 'de.cau.cs.kieler.klay.layered',\n        layoutHierarchy: true,\n        spacing: 36,\n        borderSpacing: 20,\n        edgeSpacingFactor: 0.2,\n        inLayerSpacingFactor: 2,\n        nodePlace: 'BRANDES_KOEPF',\n        nodeLayering: 'NETWORK_SIMPLEX',\n        edgeRouting: 'POLYLINE',\n        crossMin: 'LAYER_SWEEP',\n        direction: 'RIGHT',\n      },\n    });\n  },\n\n  applyAutolayout(keilerGraph) {\n    this.graph.startTransaction('autolayout');\n    TheGraph.autolayout.applyToGraph(this.graph, keilerGraph, { snap: this.snap });\n    this.graph.endTransaction('autolayout');\n    // Fit to window\n    this.triggerFit();\n  },\n\n  triggerFit() {\n    if (this.appView) {\n      this.appView.triggerFit();\n    }\n  },\n\n  widthChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ width: this.width });\n  },\n\n  heightChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ height: this.height });\n  },\n\n  rerender(options) {\n    // This is throttled with rAF internally\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.markDirty(options);\n  },\n\n  addNode(id, component, metadata) {\n    if (!this.graph) {\n      return;\n    }\n    this.graph.addNode(id, component, metadata);\n  },\n\n  getPan() {\n    if (!this.appView) {\n      return [\n        0,\n        0,\n      ];\n    }\n    return [\n      this.appView.state.x,\n      this.appView.state.y,\n    ];\n  },\n\n  panChanged() {\n    // Send pan back to React\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({\n      x: this.pan[0],\n      y: this.pan[1],\n    });\n  },\n\n  getScale() {\n    if (!this.appView) {\n      return 1;\n    }\n    return this.appView.state.scale;\n  },\n\n  displaySelectionGroupChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ displaySelectionGroup: this.displaySelectionGroup });\n  },\n\n  forceSelectionChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ forceSelection: this.forceSelection });\n  },\n\n  focusNode(node) {\n    this.appView.focusNode(node);\n  },\n\n  menusChanged() {\n    // Only if the object itself changes,\n    // otherwise builds menu from reference every time menu shown\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ menus: this.menus });\n  },\n\n  readonlyChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ readonly: this.readonly });\n  },\n\n  debounceLibraryRefesh() {\n    // Breaking the \"no debounce\" rule, this fixes #76 for subgraphs\n    if (this.debounceLibraryRefeshTimer) {\n      clearTimeout(this.debounceLibraryRefeshTimer);\n    }\n    this.debounceLibraryRefeshTimer = setTimeout(() => {\n      this.rerender({ libraryDirty: true });\n    }, 200);\n  },\n\n  registerComponent(definition, generated) {\n    const component = this.library[definition.name];\n    const def = definition;\n    if (component && generated) {\n      // Don't override real one with generated dummy\n      return;\n    }\n    this.set(`library.${definition.name}`, def);\n    // So changes are rendered\n    this.debounceLibraryRefesh();\n    // Register namespaced components also without their alias\n    if (definition.name.indexOf('/') !== -1) {\n      const unnamespaced = unnamespace(definition.name);\n      this.registerComponent({\n        ...definition,\n        name: unnamespaced,\n        unnamespaced: true,\n      }, false);\n    }\n  },\n\n  getComponent(name) {\n    return this.library[name];\n  },\n\n  toJSON() {\n    if (!this.graph) {\n      return {};\n    }\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph';\n\nPolymer({\n  _template: html`\n    <the-graph id=\"graph\" menus=\"{{menus}}\" width=\"{{width}}\" height=\"{{height}}\" pan=\"{{pan}}\" scale=\"{{scale}}\" autolayout=\"{{autolayout}}\" readonly=\"{{readonly}}\" theme=\"{{theme}}\" selected-nodes=\"{{selectedNodes}}\" error-nodes=\"{{errorNodes}}\" selected-edges=\"{{selectedEdges}}\" animated-edges=\"{{animatedEdges}}\" display-selection-group=\"{{displaySelectionGroup}}\" force-selection=\"{{forceSelection}}\" icons=\"[[icons]]\">\n    </the-graph>\n`,\n\n  is: 'the-graph-editor',\n\n  attached() {\n    this.$.graph.getMenuDef = this.getMenuDef;\n  },\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    copyNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    grid: {\n      type: Number,\n      value: 72,\n      notify: true,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    menus: { value: null },\n    notifyView: { observer: 'notifyViewChanged' },\n    onContextMenu: { notify: true },\n    pan: { observer: 'panChanged' },\n    plugins: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    readonly: { notify: true },\n    scale: {\n      type: Number,\n      value: 1,\n      observer: 'scaleChanged',\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    snap: {\n      type: Number,\n      value: 36,\n      notify: true,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.pan = [\n      0,\n      0,\n    ];\n    this.menus = TheGraph.editor.getDefaultMenus(this);\n  },\n\n  detached() {\n    Object.keys(this.plugins).forEach((name) => {\n      this.plugins[name].unregister(this);\n      delete this.plugins[name];\n    });\n  },\n\n  addPlugin(name, plugin) {\n    this.set(`plugins.${name}`, plugin);\n    plugin.register(this);\n  },\n\n  addMenu(type, options) {\n    // options: icon, label\n    this.set(`menus.${type}`, options);\n  },\n\n  addMenuCallback(type, callback) {\n    if (!this.menus[type]) {\n      return;\n    }\n    this.set(`menus.${type}.callback`, callback);\n  },\n\n  addMenuAction(type, direction, options) {\n    if (!this.menus[type]) {\n      this.set(`menus.${type}`, {});\n    }\n    const menu = this.menus[type];\n    menu[direction] = options;\n  },\n\n  getMenuDef(options) {\n    // Options: type, graph, itemKey, item\n    if (options.type && this.menus[options.type]) {\n      const defaultMenu = this.menus[options.type];\n      if (defaultMenu.callback) {\n        return defaultMenu.callback(defaultMenu, options);\n      }\n      return defaultMenu;\n    }\n    return null;\n  },\n\n  notifyViewChanged() {\n    const view = {\n      scale: this.scale,\n      pan: this.pan,\n      width: this.width,\n      height: this.height,\n    };\n    this.fire('viewchanged', view);\n  },\n\n  panChanged() {\n    this.notifyViewChanged();\n  },\n\n  scaleChanged() {\n    this.notifyViewChanged();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.notifyViewChanged();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.notifyViewChanged();\n  },\n\n  themeChanged() {\n    this.$.graph.theme = this.theme;\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      this.set('$.graph.graph', this.graph);\n      return;\n    }\n    if (typeof this.graph.addNode !== 'function') {\n      throw new Error('.graph property of the-graph-editor must be a fbp-graph instance (since the-graph 0.8)');\n    }\n    this.buildInitialLibrary(this.graph);\n    this.set('$.graph.graph', this.graph);\n  },\n\n  buildInitialLibrary(graph) {\n    /* if (Object.keys(this.$.graph.library).length !== 0) {\n      // We already have a library, skip\n      // TODO what about loading a new graph? Are we making a new editor?\n      return;\n    } */\n    const components = TheGraph.library.componentsFromGraph(graph);\n    components.forEach((component) => {\n      this.registerComponent(component, true);\n    });\n  },\n\n  registerComponent(definition, generated) {\n    this.$.graph.registerComponent(definition, generated);\n  },\n\n  libraryRefresh() {\n    this.$.graph.debounceLibraryRefesh();\n  },\n\n  rerender() {\n    this.$.graph.rerender();\n  },\n\n  triggerAutolayout() {\n    this.$.graph.triggerAutolayout();\n  },\n\n  triggerFit() {\n    this.$.graph.triggerFit();\n  },\n\n  animateEdge(edge) {\n    // Make sure unique\n    const index = this.animatedEdges.indexOf(edge);\n    if (index === -1) {\n      this.push('animatedEdges', edge);\n    }\n  },\n\n  unanimateEdge(edge) {\n    const index = this.animatedEdges.indexOf(edge);\n    if (index >= 0) {\n      this.splice('animatedEdges', index, 1);\n    }\n  },\n\n  addErrorNode(id) {\n    this.set(`errorNodes.${id}`, true);\n    this.updateErrorNodes();\n  },\n\n  removeErrorNode(id) {\n    this.set(`errorNodes.${id}`, false);\n    this.updateErrorNodes();\n  },\n\n  clearErrorNodes() {\n    this.errorNodes = {};\n    this.updateErrorNodes();\n  },\n\n  updateErrorNodes() {\n    this.$.graph.errorNodesChanged();\n  },\n\n  focusNode(node) {\n    this.$.graph.focusNode(node);\n  },\n\n  getComponent(name) {\n    return this.$.graph.getComponent(name);\n  },\n\n  getLibrary() {\n    return this.$.graph.library;\n  },\n\n  toJSON() {\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  is: 'noflo-library',\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n  },\n  addNode(component) {\n    const componentName = component.name;\n    let num = 60466176;\n    // 36^5\n    num = Math.floor(Math.random() * num);\n    const id = `${componentName}_${num.toString(36)}`;\n    // TODO fix with pan\n    const pan = this.editor.$.graph.getPan();\n    const scale = this.editor.$.graph.getScale();\n    const { graph } = this.editor;\n    graph.startTransaction('addnode');\n    const nameParts = componentName.split('/');\n    graph.addNode(id, componentName, {\n      label: nameParts[nameParts.length - 1],\n      x: Math.floor((-pan[0] + 334) / scale),\n      y: Math.floor((-pan[1] + 100) / scale),\n    });\n    // Add IIPs for default values\n    component.inports.forEach((port) => {\n      const value = port.default;\n      if (value !== undefined) {\n        graph.addInitial(value, id, port.name);\n      }\n    });\n    graph.endTransaction('addnode');\n  },\n  searchChanged() {\n    if (typeof this.search !== 'string') {\n      return;\n    }\n    if (!this.editor) {\n      return;\n    }\n    const library = this.editor.getLibrary();\n    if (!library) {\n      return;\n    }\n    const search = this.search.toLowerCase();\n    const components = Object.keys(library).map((name) => this.editor.getComponent(name));\n    const matching = components.filter((component) => {\n      if (component.unnamespaced) {\n        // Skip the non-namespaced variants from results\n        return false;\n      }\n      // First find all components matching the search\n      if (search === '') {\n        // Empty search, all components match\n        return true;\n      }\n      if (component.name.toLowerCase().indexOf(search) !== -1) {\n        // Component name matches\n        return true;\n      }\n      if (typeof component.description === 'string' && component.description.toLowerCase().indexOf(search) !== -1) {\n        // Component description matches\n        return true;\n      }\n      return false;\n    }).filter((component) => {\n      // Then filter out components we're not supposed to use\n      if (!component.subgraph) {\n        // Elementary components can always be used\n        return true;\n      }\n      const nameParts = component.name.split('/');\n      if (nameParts[0] === this.project.id || nameParts[0] === this.project.namespace) {\n        for (let i = 0; i < this.graphs.length; i += 1) {\n          if (this.graphs[i].name === nameParts[1]\n            || this.graphs[i].properties.id === nameParts[1]) {\n            // Prevent circular dependencies\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n    // timeout required because events fired by polymer that are received\n    // by graph router need to clean up before the graph receives another event\n    window.setTimeout(() => {\n      const addNode = this.addNode.bind(this);\n      this.fire('result', matching.map((component) => ({\n        label: component.name,\n        icon: component.icon || 'cog',\n        description: component.description,\n        action() {\n          addNode(component);\n        },\n      })));\n    }, 0);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Published <span>{{direction}}</span> port <span>{{publicport}}</span></h1>\n      <form>\n        <label>\n          Port name\n          <input type=\"text\" value=\"{{name::input}}\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Rename</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-exported-inspector',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    direction: {\n      type: String,\n      value: 'input',\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    privateport: {\n      value: null,\n      notify: true,\n    },\n    publicport: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.publicport;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    if (!this.name) {\n      this.canSend = false;\n      return;\n    }\n    if (this.direction === 'input' && (this.name === 'start' || this.name === 'graph')) {\n      // Reserved port names\n      this.canSend = false;\n      return;\n    }\n    this.canSend = true;\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.direction === 'input') {\n      if (this.name === 'start' || this.name === 'graph') {\n        return;\n      }\n      this.graph.renameInport(this.publicport, this.name);\n    } else {\n      this.graph.renameOutport(this.publicport, this.name);\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\nimport './noflo-icon';\n\nclass NoFloIconSelector extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: block;\n    }\n    ul.icons {\n      padding: 0px;\n      margin: 0px;\n      list-style: none;\n    }\n    ul.icons li {\n      display: inline-block;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-align: center;\n      overflow: hidden;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      transition: background-color 0.3s ease-in-out;\n      border-radius: 2px;\n      margin-right: 2px\n      margin-bottom: 2px;\n    }\n    ul.icons li.selected,\n    ul.icons li:hover {\n      background-color: hsl(190, 100%, 30%);\n      color: white;\n    }\n    </style>\n    <ul class=\"icons\">\n      <template is=\"dom-repeat\" items=\"{{icons}}\" as=\"icon\">\n        <li data-id\\$=\"[[icon]]\" class\\$=\"[[_selectedClass(icon, selected)]]\" on-click=\"selectIcon\">\n          <noflo-icon icon=\"[[icon]]\" title=\"[[icon]]\"></noflo-icon>\n        </li>\n      </template>\n    </ul>\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon-selector';\n  }\n\n  static get properties() {\n    return {\n      icons: {\n        type: Array,\n        value() {\n          return [];\n        },\n      },\n      selected: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = Object.keys(icons.getIcons());\n  }\n\n  selectIcon(event) {\n    this.selected = event.currentTarget.getAttribute('data-id');\n  }\n\n  _selectedClass(icon, selected) {\n    if (icon === selected) {\n      return 'selected';\n    }\n    return '';\n  }\n}\ncustomElements.define(NoFloIconSelector.is, NoFloIconSelector);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport './noflo-type-selector';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new graph</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Graph name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolGraph\" required=\"\">\n        </label>\n        <label>\n          Graph type\n          <select name=\"type\" value=\"{{mainGraph::input}}\">\n            <option value=\"true\" selected\\$=\"[[_isSelectedMainGraph('true', mainGraph)]]\">Main graph</option>\n            <option value=\"false\" selected\\$=\"[[_isSelectedMainGraph('false', mainGraph)]]\">Subgraph</option>\n          </select>\n        </label>\n        <label>\n          Graph description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Runtime\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-graph',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    mainGraph: {\n      type: String,\n      value: 'true',\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.project) {\n      if (!this.project.graphs || !this.project.components) {\n        return;\n      }\n      duplicates = this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newGraph');\n    }\n    const graph = new Graph(this.name);\n    graph.setProperties({\n      description: this.description,\n      project: this.project.id,\n      id: `${this.project.id}/${this.name}`,\n      icon: this.icon,\n      main: (this.mainGraph === 'true'),\n      environment: { type: this.type },\n    });\n    this.fire('new', graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _isSelectedMainGraph(value, current) {\n    return value === current;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>\n        <template is=\"dom-if\" if=\"{{group}}\">\n        <span>{{group}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{!group}}\">\n        New\n        </template>\n        group containing <span>{{nodes.length}}</span> nodes\n      </h1>\n      <form>\n        <label>\n          Group name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"processing\" required=\"\">\n        </label>\n        <label>\n          Group description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"The nodes that process things\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">\n            <template is=\"dom-if\" if=\"{{group}}\">\n            Rename\n            </template>\n            <template is=\"dom-if\" if=\"{{!group}}\">\n            Create\n            </template>\n          </button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-group-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    group: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    groupdescription: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.group;\n    this.description = this.groupdescription;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.group) {\n      if (this.name !== this.group) {\n        this.graph.renameGroup(this.group, this.name);\n      }\n      if (this.description !== this.groupdescription) {\n        this.graph.setGroupMetadata(this.group, { description: this.description });\n      }\n    } else {\n      this.graph.addGroup(this.name, this.nodes, { description: this.description });\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  is: 'the-card-stack',\n  properties: { type: { notify: true } },\n  enteredView() {\n    this.observeChanges();\n  },\n  leftView() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  observeChanges() {\n    this.observer = new MutationObserver(this.updateVisibility.bind(this));\n    this.observer.observe(this, {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n  updateVisibility() {\n    if (this.childElementCount === 0) {\n      PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './the-card-stack';\n\nPolymer({\n  _template: html`\n    <slot name=\"header\"></slot>\n    <slot></slot>\n`,\n\n  is: 'the-card',\n  properties: { type: { notify: true } },\n\n  enteredView() {\n    this.fire('show', this);\n  },\n\n  leftView() {\n    this.fire('hide', this);\n  },\n\n  addTo(parent, prepend) {\n    const stacks = parent.getElementsByTagName('the-card-stack');\n    for (let i = 0; i < stacks.length; i += 1) {\n      if (stacks[i].type === this.type) {\n        PolymerDom(stacks[i]).appendChild(this);\n        return;\n      }\n    }\n    const stack = document.createElement('the-card-stack');\n    stack.type = this.type;\n    PolymerDom(stack).appendChild(this);\n    if (prepend && parent.childElementCount > 0) {\n      PolymerDom(parent).insertBefore(stack, PolymerDom(parent).firstChild);\n      return;\n    }\n    PolymerDom(parent).appendChild(stack);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n        overflow: hidden;\n      }\n    </style>\n    <slot name=\"header\"></slot>\n    <slot></slot>\n    <slot name=\"footer\"></slot>\n`,\n\n  is: 'the-panel',\n\n  properties: {\n    automatic: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'automaticChanged',\n    },\n    edge: {\n      type: String,\n      value: 'left',\n      notify: true,\n      observer: 'edgeChanged',\n    },\n    handle: {\n      type: Number,\n      value: 0,\n      notify: true,\n      observer: 'handleChanged',\n    },\n    open: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'openChanged',\n    },\n    size: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'sizeChanged',\n    },\n  },\n\n  toggleOpen(open) {\n    this.open = open;\n    this.updateVisibility();\n  },\n\n  enteredView() {\n    this.cleanUpLocation();\n    this.automaticChanged();\n    this.updateVisibility();\n  },\n\n  leftView() {\n    this.unobserve();\n  },\n\n  edgeChanged() {\n    this.updateVisibility();\n  },\n\n  sizeChanged() {\n    this.updateVisibility();\n  },\n\n  handleChanged() {\n    this.updateVisibility();\n  },\n\n  openChanged() {\n    this.updateVisibility();\n  },\n\n  automaticChanged() {\n    if (this.automatic) {\n      this.observeChanges();\n    } else {\n      this.unobserve();\n    }\n  },\n\n  getHeader() {\n    return PolymerDom(this).querySelector('header');\n  },\n\n  getMain() {\n    return PolymerDom(this).querySelector('main');\n  },\n\n  getFooter() {\n    return PolymerDom(this).querySelector('footer');\n  },\n\n  handleClicked(event) {\n    if (this.automatic) {\n      return;\n    }\n    if (event.target !== this) {\n      return;\n    }\n    if (this.open) {\n      this.open = false;\n      return;\n    }\n    this.open = true;\n  },\n\n  observeChanges() {\n    this.observer = new MutationObserver(this.handleMutations.bind(this));\n    this.observer.observe(this.getMain(), {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n\n  unobserve() {\n    if (!this.observer) {\n      return;\n    }\n    this.observer.disconnect();\n    this.observer = null;\n  },\n\n  handleMutations() {\n    if (this.getMain().childElementCount === 0) {\n      this.open = false;\n    } else {\n      this.open = true;\n    }\n  },\n\n  getPositionDimension() {\n    return this.edge;\n  },\n\n  getSizeDimensions() {\n    switch (this.edge) {\n      case 'left':\n      case 'right':\n        return [\n          'width',\n          'height',\n        ];\n      case 'top':\n      case 'bottom':\n        return [\n          'height',\n          'width',\n        ];\n      default:\n        throw new Error(`Unknown edge ${this.edge}`);\n    }\n  },\n\n  cleanUpLocation() {\n    this.set('style.left', '');\n    this.set('style.right', '');\n    this.set('style.top', '');\n    this.set('style.bottom', '');\n  },\n\n  updateVisibility() {\n    const sizeDimensions = this.getSizeDimensions();\n    this.set(`style.${sizeDimensions[1]}`, '100%');\n    this.set(`style.${sizeDimensions[0]}`, `${this.size}px`);\n    let outside = 0;\n    if (!this.open) {\n      outside = (this.size - this.handle) * -1;\n    }\n    this.set(`style.${this.getPositionDimension()}`, `${outside}px`);\n  },\n\n  listeners: { click: 'handleClicked' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-exported-inspector';\nimport './noflo-new-graph';\nimport './noflo-group-inspector';\nimport './the-card';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      #contextsection {\n        position: fixed;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        left: 36px;\n        top: 72px;\n        width: calc(72px * 4);\n        max-height: calc(100% - 72px);\n        box-sizing: border-box;\n        display: block;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: visible;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-top: 72px;\n        top: 0px;\n        border-left-width: 1px;\n        height: 100vh;\n        padding-left: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f188';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        left: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: w-resize;\n      }\n      the-panel footer {\n        position: absolute;\n        bottom: 0px;\n        right: 0px;\n      }\n      the-panel#fixed header {\n        display: flex;\n        justify-content: space-between;\n        width: calc(72px * 4);\n        padding-right: 36px;\n        box-sizing: border-box;\n      }\n      the-panel#fixed header ul.toolbar {\n        margin: 0px;\n        padding: 0px;\n      }\n      the-panel#fixed header ul.toolbar li {\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n        list-style: none;\n      }\n      the-panel#fixed header ul.toolbar button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      the-panel#fixed header h1 {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 15px;\n        font-weight: normal;\n        line-height: 36px;\n        width: 100%;\n        color: var(--noflo-ui-text);\n        padding: 0px;\n        margin: 0px;\n      }\n      the-panel#fixed main {\n        height: calc(100% - 72px);\n        overflow-y: scroll;\n        overflow-x: hidden;\n        width: calc(72px * 4);\n      }\n      the-panel#fixed main p {\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main ul {\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        margin-top: 0px;\n        padding-top: 0px;\n        margin-left: 0px;\n        padding-left: 0px;\n        width: 252px;\n      }\n      the-panel#fixed main li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-left: 0px;\n        padding-left: 0px;\n        margin-bottom: 0px;\n        color: var(--noflo-ui-text-highlight);\n        margin-bottom: 4px;\n        padding-bottom: 2px;\n        border-bottom: 1px hsla(190, 100%, 30%, 0.4) solid;\n        list-style: none;\n      }\n      the-panel#fixed main li.error,\n      the-panel#fixed main li.processerror,\n      the-panel#fixed main li.networkerror,\n      the-panel#fixed main li.protocolerror {\n        color: hsl(  0,  98%, 46%);\n      }\n      the-panel#fixed main li pre {\n        color: rgba(179, 222, 230, 0.5);\n        font-size: 8px;\n      }\n      the-panel#fixed main li.output {\n        color: var(--noflo-ui-text);\n      }\n    </style>\n    <section id=\"contextsection\"></section>\n    <the-panel id=\"fixed\" edge=\"right\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <h1>Runtime events</h1>\n        <template is=\"dom-if\" if=\"[[events.length]]\">\n          <ul class=\"toolbar\">\n            <li>\n              <button id=\"clear\" on-click=\"clearEvents\" class=\"blue-button\" title=\"Clear Event Log\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n             </li>\n          </ul>\n        </template>\n      </header>\n      <main id=\"fixedmain\">\n        <template is=\"dom-if\" if=\"[[runtime]]\">\n          <ul>\n          <template is=\"dom-repeat\" items=\"[[events]]\" as=\"event\">\n            <li class\\$=\"{{ event.type }}\">\n              <template is=\"dom-if\" if=\"[[_ifEventIsPlain(event)]]\">\n                {{ event.type }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsProcessError(event)]]\">\n                {{ event.payload.error }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsError(event)]]\">\n                {{ event.payload.message }}\n                <template is=\"dom-if\" if=\"[[_ifEventHasStack(event)]]\"><pre>{{ event.payload.stack }}</pre></template>\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsOutput(event)]]\">\n                {{ event.payload.message }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsStopStart(event)]]\">\n                {{ event.payload.graph }} {{ event.type }}\n              </template>\n            </li>\n          </template>\n          </ul>\n        </template>\n        <template is=\"dom-if\" if=\"[[!runtime]]\">\n          <p>Not connected to a runtime.</p>\n        </template>\n      </main>\n      <footer slot=\"footer\"></footer>\n    </the-panel>\n`,\n\n  is: 'noflo-context',\n\n  properties: {\n    component: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'componentChanged',\n    },\n    edge: { notify: true },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    editor: {\n      value: null,\n      observer: 'editorChanged',\n    },\n    errors: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    help: { value: null },\n    node: { notify: true },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    readonly: { notify: true },\n    runtime: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.contextBar = this.$.contextsection;\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    // Workaround for https://github.com/Polymer/PointerEvents/issues/134\n    document.addEventListener('touchstart', () => {\n    });\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n\n  getpanel() {\n    this.fire('toolpanel', this.$.fixed);\n    this.fire('contextpanel', this.$.contextsection);\n  },\n\n  editorChanged() {\n    if (!this.editor) {\n      return;\n    }\n    const emptyOnReadOnly = (defaultMenu) => {\n      if (this.readonly) {\n        return {};\n      }\n      return defaultMenu;\n    };\n    this.editor.addMenuCallback('main', emptyOnReadOnly);\n    this.editor.addMenuCallback('edge', emptyOnReadOnly);\n    this.editor.addMenuCallback('node', (defaultMenu, options) => {\n      const localMenu = emptyOnReadOnly(defaultMenu, options);\n      if (!options.item.component) {\n        return localMenu;\n      }\n      if (!this.canGetSource(options.item.component)) {\n        return localMenu;\n      }\n      localMenu.n4 = {\n        icon: 'arrow-circle-o-up',\n        iconLabel: 'open',\n        action: (graph, itemKey, item) => {\n          if (typeof ga === 'function') {\n            ga('send', 'event', 'menu', 'click', 'openNode');\n          }\n          let hash = window.location.href.split('#')[1] || '';\n          if (graph === this.graphs[0] && graph.properties.id) {\n            const currentGraphId = encodeURIComponent(graph.properties.id);\n            if (hash.indexOf(currentGraphId) === -1) {\n              hash += `/${currentGraphId}`;\n            }\n          }\n          window.location.hash = `${hash}/${encodeURIComponent(item.id)}`;\n        },\n      };\n      return localMenu;\n    });\n    this.editor.addMenuCallback('nodeInport', emptyOnReadOnly);\n    this.editor.addMenuCallback('nodeOutport', emptyOnReadOnly);\n    this.editor.addMenuCallback('graphInport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'input';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('graphOutport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'output';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('group', emptyOnReadOnly);\n    this.editor.addMenuCallback('selection', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        e4: {\n          icon: 'sitemap',\n          iconLabel: 'graph',\n          action: this.subgraph.bind(this),\n        },\n        w4: {\n          icon: 'square-o',\n          iconLabel: 'group',\n          action: this.group.bind(this),\n        },\n      };\n    });\n  },\n\n  edgesChanged() {\n    this.fire('edges', this.edges);\n  },\n\n  eventsChanged() {\n    this.$.fixedmain.scrollTop = this.$.fixedmain.scrollHeight;\n  },\n\n  componentChanged() {\n    if (this.component && typeof this.component === 'object' && !this.component.name) {\n      this.component = null;\n    }\n    if (this.component && typeof ga === 'function') {\n      ga('send', 'event', 'url', 'navigation', 'openComponent');\n    }\n    this.fire('component', this.component);\n  },\n\n  group(graph, itemKey, item) {\n    if (this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createGroup');\n    }\n    // See if the nodes are already part of a group\n    let group = '';\n    let description = '';\n    const selectedNodes = item.nodes;\n    selectedNodes.sort();\n    graph.groups.forEach((grp) => {\n      const grpNodes = JSON.parse(JSON.stringify(grp.nodes));\n      grpNodes.sort();\n      if (grpNodes.join(',') === selectedNodes.join(',')) {\n        group = grp.name;\n        description = grp.metadata.description;\n      }\n    });\n    const dialog = document.createElement('noflo-group-inspector');\n    dialog.group = group;\n    dialog.groupdescription = description;\n    dialog.nodes = selectedNodes;\n    dialog.graph = graph;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  subgraph(currentGraph, itemKey, item) {\n    if (!this.project || this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createSubgraph');\n    }\n    // Ask user to name the new subgraph\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.runtimes = this.runtimes;\n    dialog.type = currentGraph.properties.environment.type;\n    dialog.project = this.project;\n    dialog.mainGraph = 'false';\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (event) => {\n      // Register new subgraph\n      this.fire('newsubgraph', {\n        currentGraph,\n        subgraph: event.detail,\n        nodes: item.nodes,\n        project: this.project,\n      });\n      // Editor deselect, hide node inspectors\n      if (this.editor) {\n        this.editor.selectedNodes = [];\n      }\n    });\n  },\n\n  setHelp() {\n    // If manually triggered, show something relevant\n    if (!this.help) {\n      return;\n    }\n    this.set('help.headline', `${process.env.NOFLO_APP_TITLE} graph editor`);\n    this.set('help.text', 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n  },\n\n  showHelp(graph) {\n    if (!this.help) {\n      return;\n    }\n    this.help.show(`${process.env.NOFLO_APP_TITLE} graph editor`, 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n    graph.once('addNode', () => {\n      this.help.close();\n    });\n  },\n\n  libraryMatch(library, project) {\n    const namespace = project.namespace || project.id;\n    if (library === namespace) {\n      return true;\n    }\n    if (library === namespace.replace('noflo-')) {\n      return true;\n    }\n    return false;\n  },\n\n  canGetSource(component) {\n    const componentParts = component.split('/');\n    if (componentParts.length > 1\n      && this.project\n      && this.libraryMatch(componentParts.shift(), this.project)) {\n      // Local component, see if it is available\n      for (let i = 0; i < this.project.graphs.length; i += 1) {\n        if (this.project.graphs[i].name === componentParts[0]) {\n          return true;\n        }\n        if (this.project.graphs[i].properties.id === componentParts[0]) {\n          return true;\n        }\n      }\n      for (let i = 0; i < this.project.components.length; i += 1) {\n        if (this.project.components[i].name === componentParts[0]) {\n          return true;\n        }\n      }\n    }\n    // Otherwise we check if Runtime can get it for us\n    if (!this.runtime.definition || !this.runtime.definition.capabilities) {\n      return false;\n    }\n    if (this.runtime.definition.capabilities.indexOf('component:getsource') === -1) {\n      return false;\n    }\n    return this.runtime.status.online;\n  },\n\n  clearEvents() {\n    this.fire('clear:runtimeevents', {\n      all: true,\n    });\n  },\n\n  _ifEventIsPlain(event) {\n    return (['stopped', 'started', 'output', 'error', 'processerror', 'networkerror', 'protocolerror'].indexOf(event.type) === -1);\n  },\n\n  _ifEventIsProcessError(event) {\n    return (['processerror'].indexOf(event.type) !== -1);\n  },\n\n  _ifEventIsError(event) {\n    return (['error', 'networkerror', 'protocolerror'].indexOf(event.type) !== -1);\n  },\n\n  _ifEventHasStack(event) {\n    return (['error', 'networkerror'].indexOf(event.type) !== -1 && event.payload.stack && event.payload.stack.length && event.payload.message.indexOf('Runtime sent invalid') === -1);\n  },\n\n  _ifEventIsOutput(event) {\n    return (event.type === 'output' && event.payload.message);\n  },\n\n  _ifEventIsStopStart(event) {\n    return (['stopped', 'started'].indexOf(event.type) !== -1 && event.payload.graph);\n  },\n});\n","import React from 'react';\n\nfunction TestStatus(props) {\n  const state = {\n    passed: 0,\n    failed: 0,\n    skipped: 0,\n    total: 0,\n  };\n  props.suites.forEach((suite) => {\n    suite.cases.forEach((testCase) => {\n      state.total += 1;\n      if (suite.skip || testCase.skip) {\n        state.skipped += 1;\n        return;\n      }\n      if (testCase.passed === true) {\n        state.passed += 1;\n      }\n      if (testCase.passed === false) {\n        state.failed += 1;\n      }\n    });\n  });\n  return (\n    <ul className=\"test-status\">\n      <li className=\"pass\">{state.passed}</li>\n      <li className=\"fail\">{state.failed}</li>\n      <li className=\"skip\">{state.skipped}</li>\n      <li className=\"total\">{state.total}</li>\n    </ul>\n  );\n}\n\nexport default TestStatus;\n","import React from 'react';\n\nfunction stateToClass(testCase, suite) {\n  if (testCase.skip || suite.skip) {\n    return 'skip';\n  }\n  if (testCase.passed === true) {\n    return 'pass';\n  }\n  if (testCase.passed === false) {\n    return 'fail';\n  }\n  return 'pending';\n}\n\nfunction TestStatusDetailed(props) {\n  return (\n    <ul>\n      {\n        props.suites.map((suite) => (\n          <li className=\"testsuite\">\n            <div className=\"suite-header\">\n              <label className=\"name\">{suite.name}</label>\n              <label className=\"topic\">{suite.topic}</label>\n            </div>\n            <ul>\n              {\n                suite.cases.map((testCase) => (\n                  <li className={stateToClass(testCase, suite)}>\n                    <div className=\"testcase\">\n                      <label className=\"name\">{testCase.name}</label>\n                      <label className=\"assertion\">{testCase.assertion}</label>\n                      <label className=\"error\">{testCase.error || ''}</label>\n                    </div>\n                  </li>\n                ))\n              }\n            </ul>\n          </li>\n        ))\n      }\n    </ul>\n  );\n}\n\nexport default TestStatusDetailed;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Launch noflo-browser device</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"text\" value=\"{{baseApp::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"info\">\n        <div><a id=\"runtimeLink\" href\\$=\"{{runtimeUrl}}\">Launch</a></div>\n        <div><img id=\"qrcode\" src=\"{{qrCodeUrl}}\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-browserdebug',\n\n  properties: {\n    baseApp: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser-app/main.html',\n    },\n    graph: { notify: true },\n    qrCodeUrl: {\n      type: String,\n      value: '',\n    },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const signaller = 'https://api.flowhub.io';\n    const id = uuid();\n    const address = `${signaller}#${id}`;\n    const params = `?fbp_noload=true&fbp_protocol=webrtc&fbp_address=${encodeURIComponent(address)}`;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1931',\n      // FIXME: correct\n      secret: 'my-super-secret',\n      // FIXME: correct\n      label: 'noflo-browser live debug',\n      description: 'On device debugging project',\n      graph: this.graph.properties.id,\n      protocol: 'webrtc',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n    const appDebugUrl = this.baseApp + params;\n    const qrBase = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=';\n    this.qrCodeUrl = qrBase + encodeURIComponent(appDebugUrl);\n    this.runtimeUrl = appDebugUrl;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Open noflo-browser runtime in preview area</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"url\" value=\"{{runtimeUrl::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-customiframe',\n\n  properties: {\n    graph: { notify: true },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser/everything.html',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const id = uuid();\n    // TODO: make a hash of the URL instead??\n    const params = '?fbp_noload=true&fbp_protocol=iframe';\n    const address = this.runtimeUrl + params;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1932',\n      // FIXME: correct\n      label: 'noflo-browser iframe',\n      description: 'running in iframe',\n      graph: this.graph.properties.id,\n      protocol: 'iframe',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimelib from '../src/runtime';\nimport './noflo-runtime-browserdebug';\nimport './noflo-runtime-customiframe';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      ul.runtimes {\n        padding: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n        margin-top: 18px;\n        margin-bottom: 18px;\n      }\n      ul.runtimes li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 60%);\n        color: white;\n        transition: background-color 0.3s ease-in-out;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.runtimes li.selected,\n      ul.runtimes li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Select runtime for <span>{{graph.name}}</span></h1>\n      <template is=\"dom-if\" if=\"{{available.length}}\">\n        <ul class=\"runtimes modal-content\">\n          <template is=\"dom-repeat\" items=\"{{available}}\" as=\"runtime\">\n          <li on-click=\"selectRuntime\" data-id\\$=\"{{runtime.id}}\" class\\$=\"{{runtime.type}}\">\n            <h2>{{runtime.label}}</h2>\n            <p><span>{{runtime.address}}</span>.<br>Seen <span>{{runtime.seenHoursAgo}}</span>h ago</p>\n          </li>\n          </template>\n        </ul>\n      </template>\n      <template is=\"dom-if\" if=\"{{!available.length}}\">\n        <p>No compatible runtimes available.</p>\n      </template>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graph: { notify: true },\n    component: { notify: true },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    let type;\n    if (this.component) {\n      type = runtimelib.getComponentType(this.component);\n    }\n    if (this.graph) {\n      type = runtimelib.getGraphType(this.graph);\n    }\n    if (!type) {\n      type = 'all';\n    }\n    // Insert button to launch new runtime for noflo-browser\n    const launchNewBrowserRuntime = {\n      id: 'new-browser-runtime',\n      label: 'Launch new runtime',\n      address: 'WebRTC',\n    };\n    const customIframeRuntime = {\n      id: 'custom-iframe-address',\n      label: 'Custom iframe URL',\n      address: 'myapp.html',\n    };\n    const launchImgfloHerokuRuntime = {\n      id: 'imgflo-heroku-new',\n      label: 'New imgflo app on Heroku',\n      address: 'myapp.herokuapps.com',\n    };\n    if (type === 'noflo-browser') {\n      this.push('available', launchNewBrowserRuntime);\n      this.push('available', customIframeRuntime);\n    }\n    if (type === 'imgflo') {\n      this.push('available', launchImgfloHerokuRuntime);\n    }\n    this.runtimes.forEach((rt) => {\n      this.push('available', rt);\n    });\n    this.available.forEach(this.checkRuntimeSeen.bind(this));\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  // similiar to in noflo-main.html\n  checkRuntimeSeen(runtime) {\n    if (!runtime.seen) {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = Date.now();\n    }\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor(\n      (Date.now() - new Date(runtime.seen).getTime()) / (60 * 60 * 1000),\n    );\n    if (runtime.seenHoursAgo / 24 > 31) {\n      // We haven't seen this runtime in over a month, don't show it\n      const index = this.available.indexOf(runtime);\n      this.splice('available', index, 1);\n    }\n  },\n\n  selectRuntime(event) {\n    const id = event.currentTarget.getAttribute('data-id');\n    if (id === 'new-browser-runtime') {\n      // Launch new runtime instead of connect to existing\n      this.close();\n      this.debugOnDevice();\n      return;\n    } if (id === 'custom-iframe-address') {\n      // Add new iframe runtime for given address\n      this.close();\n      this.addIframeRuntime();\n      return;\n    } if (id === 'imgflo-heroku-new') {\n      this.close();\n      this.deployHeroku('https://github.com/jonnor/imgflo');\n    }\n    this.runtimes.forEach((runtime) => {\n      if (runtime.id === id) {\n        this.fire('runtime', runtime);\n        this.close();\n      }\n    });\n  },\n\n  debugOnDevice() {\n    this.debugOnDeviceModal = document.createElement('noflo-runtime-browserdebug');\n    this.set('debugOnDeviceModal.graph', this.graph);\n    this.debugOnDeviceModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.debugOnDeviceModal);\n  },\n\n  addIframeRuntime() {\n    this.addIframeModal = document.createElement('noflo-runtime-customiframe');\n    this.set('addIframeModal.graph', this.graph);\n    this.addIframeModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.addIframeModal);\n  },\n\n  deployHeroku(template) {\n    // Send user over to Heroku\n    // The deployed runtime will then have a link which takes them back to Flowhub\n    // TODO: inform the user about this process\n    const baseUrl = 'https://dashboard.heroku.com/new?template=';\n    document.location.href = baseUrl + encodeURIComponent(template);\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatusDetailed from '../src/components/TestStatusDetailed';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #testlisting ul {\n        padding: 0px;\n      }\n      li .suite-header label.topic {\n        font-weight: bold;\n      }\n      li .suite-header label {\n        display: inline !important;\n        padding-right: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      li.testsuite {\n        margin-bottom: 1em;\n      }\n      li {\n        list-style: none;\n      }\n      li.testsuite li {\n        margin-left: 28px;\n      }\n      li label {\n        display: inline;\n        margin-top: 7px !important;\n      }\n      li label.assertion {\n        padding-left: 8px;\n      }\n      li label.error {\n        margin-bottom: 8px;\n        font-style: italic;\n        display: block;\n      }\n      li.pass {\n        color: hsl(135, 98%, 46%);\n        list-style: disc;\n      }\n      li.fail {\n        color: hsl(0, 98%, 46%);\n        list-style: square;\n      }\n      li.skip {\n        color: hsl( 60, 98%, 46%);\n        list-style: disc;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <div class=\"modal-content\">\n        <div id=\"testlisting\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-testdetails',\n\n  properties: {\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    const container = this.shadowRoot.getElementById('testlisting');\n    ReactDOM.render(TestStatusDetailed({ suites: this.suites }), container);\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatus from '../src/components/TestStatus';\nimport './noflo-runtime-selector';\nimport './noflo-runtime-testdetails';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding-left: 18px;\n        box-sizing: border-box;\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n      }\n\n      #runtime_icon {\n        position: absolute;\n        right: 8px;\n        top: 0px;\n        font-size: 72px;\n        color: hsla(185, 100%, 75%, 0.1);\n      }\n\n      #teststatus {\n        position: absolute;\n        right: 0px;\n        z-index: 1;\n        width: 100px;\n      }\n      #teststatus ul {\n        margin: 0px;\n        padding: 0px;\n      }\n      #teststatus ul li {\n        display: inline;\n        padding-left: 8px;\n        line-height: 36px;\n      }\n      #teststatus ul li.pass {\n        color: hsl(135, 98%, 46%);\n      }\n      #teststatus ul li.fail {\n        color: hsl(0, 98%, 46%);\n      }\n      #teststatus ul li.skip {\n        color: hsl( 60, 98%, 46%);\n      }\n\n      h2 {\n        font-size: 14px;\n        width: 216px;\n        font-weight: normal;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n      }\n\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text-highlight);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      #address h2 {\n        position: absolute;\n        left: 54px;\n        width: 180px;\n        top: 0px;\n        color: var(--noflo-ui-text);\n      }\n\n      #address, #address button {\n        color: #e70215;\n      }\n      .online#address, .online#address button {\n        color: #01d159;\n      }\n      #address button.clear {\n        position: absolute;\n        right: 0px;\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #runcontrol h2 {\n        position: absolute;\n        left: 54px;\n        top: 36px;\n      }\n      #runcontrol button {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #select {\n        text-align: center;\n      }\n      #select button.select {\n        width: auto;\n        height: auto;\n        background-color: hsl(190, 90%, 45%);\n        color: hsla(0, 0%, 0%, 0.98);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        margin-top: 18px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{runtime}}\">\n      <noflo-icon id=\"runtime_icon\" icon=\"{{icon}}\"></noflo-icon>\n      <div id=\"address\" class\\$=\"{{_computeOnlineClass(runtime.status.online)}}\">\n        <button title=\"Connect/Disconnect\" on-click=\"reconnect\"><noflo-icon icon=\"refresh\"></noflo-icon></button>\n        <h2>{{_produceAddress(runtime)}}</h2>\n        <button title=\"Change Runtime\" on-click=\"clearRuntime\" class=\"clear\"><noflo-icon icon=\"exchange\"></noflo-icon></button>\n      </div>\n      <div id=\"teststatus\" on-click=\"showTestDetails\"></div>\n      <div id=\"runcontrol\">\n        <template is=\"dom-if\" if=\"{{runtime.status.online}}\">\n          <template is=\"dom-if\" if=\"{{runtime.execution.running}}\">\n            <button title=\"Stop\" class=\"stop\" on-click=\"stop\"><noflo-icon icon=\"pause\"></noflo-icon></button>\n          </template>\n          <template is=\"dom-if\" if=\"{{!runtime.execution.running}}\">\n            <button title=\"Start\" class=\"start\" on-click=\"start\"><noflo-icon icon=\"play\"></noflo-icon></button>\n          </template>\n          <h2>{{runtime.execution.label}}</h2>\n        </template>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!runtime}}\">\n      <div id=\"select\">\n        <button on-click=\"selectRuntime\" class=\"select\">Select runtime</button>\n      </div>\n    </template>\n`,\n\n  is: 'noflo-runtime',\n\n  properties: {\n    icon: {\n      type: String,\n      value: 'asterisk',\n    },\n    graph: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    panel: { value: null },\n    iframe: { value: null },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n  },\n\n  clearRuntime() {\n    // Disassociate old runtime with this project\n    this.runtime.definition.project = null;\n    this.fire('changed', this.runtime.definition);\n    this.set('runtime', null);\n    this.graphChanged();\n  },\n\n  graphChanged() {\n    if (this.runtimeSelector) {\n      if (PolymerDom(this.runtimeSelector).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeSelector).parentNode).removeChild(this.runtimeSelector);\n      }\n      this.runtimeSelector = null;\n    }\n  },\n\n  runtimeChanged() {\n    const runtimeIframe = this.getRuntimeIframe();\n    if (this.iframe && this.iframe !== runtimeIframe) {\n      // Hide old iframe\n      this.hideCard();\n    }\n    this.iframe = runtimeIframe;\n    if (!this.runtime) {\n      return;\n    }\n    this.set('icon', this.getRuntimeIcon(this.runtime));\n    if (!this.runtime.status || !this.runtime.status.online) {\n      this.hideCard();\n    } else if (this.runtime.execution && this.runtime.execution.running) {\n      this.showCard();\n    }\n  },\n\n  start(event) {\n    event.preventDefault();\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.showCard();\n    this.fire('start', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  stop(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.fire('stop', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  reconnect(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    this.fire('reconnect', {\n      runtime: this.runtime.definition.id,\n    });\n  },\n\n  showTests(suites) {\n    this.suites = suites;\n    const container = this.shadowRoot.getElementById('teststatus');\n    ReactDOM.render(TestStatus({ suites: this.suites }), container);\n  },\n\n  showTestDetails() {\n    if (!this.suites || !this.suites.length) {\n      return;\n    }\n    const details = document.createElement('noflo-runtime-testdetails');\n    details.suites = this.suites;\n    PolymerDom(document.body).appendChild(details);\n  },\n\n  showCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'block');\n  },\n\n  hideCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'none');\n  },\n\n  getRuntimeIframe() {\n    if (!this.runtime || !this.runtime.definition) {\n      return null;\n    }\n    if (!this.runtime.definition.querySelector) {\n      return null;\n    }\n    const iframe = document.body.querySelector(this.runtime.definition.querySelector);\n    if (!iframe) {\n      return null;\n    }\n    return iframe;\n  },\n\n  setIframeVisibility(iframe, visibility) {\n    // eslint-disable-next-line no-param-reassign\n    iframe.style.display = visibility;\n  },\n\n  selectRuntime() {\n    if (!this.graph && !this.component) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.runtimeSelector = document.createElement('noflo-runtime-selector');\n    this.set('runtimeSelector.runtimes', this.runtimes);\n    this.set('runtimeSelector.graph', this.graph);\n    this.set('runtimeSelector.component', this.component);\n    this.runtimeSelector.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      if (this.graph) {\n        runtime.project = this.graph.properties.project;\n      }\n      if (this.component) {\n        runtime.project = this.component.project;\n      }\n      this.fire('changed', runtime);\n      setTimeout(() => {\n        this.fire('switchRuntime', runtime.id);\n      }, 10);\n    });\n    PolymerDom(document.body).appendChild(this.runtimeSelector);\n  },\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.definition || !runtime.definition.type) {\n      return 'cog';\n    }\n    switch (runtime.definition.type) {\n      case 'noflo-browser':\n        return 'html5';\n      case 'noflo-nodejs':\n        return 'cloud';\n      case 'noflo-gnome':\n        return 'desktop';\n      case 'microflo':\n        return 'lightbulb-o';\n      case 'javafbp':\n        return 'android';\n      case 'imgflo':\n        return 'picture-o';\n      case 'sndflo':\n        return 'music';\n      case 'flowtrace-replay':\n        return 'pause-circle';\n      default:\n        return 'cog';\n    }\n  },\n\n  _computeOnlineClass(online) {\n    return this.tokenList({ online });\n  },\n\n  _produceAddress(runtime) {\n    if (!runtime.definition) {\n      return '';\n    }\n    if (runtime.definition.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.definition.id}`;\n    }\n    return runtime.definition.address;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","/*\n\n* Wraps the-graph-thumb with a current view bounding box\n* Observes changes from attached instance of the-graph-editor\n\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph-thumb';\n\nPolymer({\n  _template: html`\n    <style>\n      #thumb, \n      #outcanvas {\n        position: absolute;\n        top: 0;\n        left: 0;\n        overflow: visible;\n      }\n      #viewrect {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 200px;\n        height: 150px;\n        border: 1px solid hsla(190, 100%, 80%, 0.4);\n        border-style: dotted;\n      }\n    </style>\n    <the-graph-thumb id=\"thumb\" graph=\"{{graph}}\" thumbrectangle=\"{{thumbrectangle}}\" width=\"{{width}}\" height=\"{{height}}\" thumbscale=\"{{thumbscale}}\" theme=\"{{theme}}\">\n    </the-graph-thumb>\n    <canvas id=\"outcanvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n    <div id=\"viewrect\"></div>\n`,\n\n  is: 'the-graph-nav',\n\n  properties: {\n    backgroundColor: {\n      type: String,\n      value: 'hsla(184, 8%, 75%, 0.9)',\n    },\n    graph: { notify: true },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n    },\n    hide: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'hideChanged',\n    },\n    outsideFill: {\n      type: String,\n      value: 'hsla(0, 0%, 0%, 0.4)',\n    },\n    theme: {\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { observer: 'thumbrectangleChanged' },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      observer: 'thumbscaleChanged',\n    },\n    view: { observer: 'viewChanged' },\n    viewrectangle: { observer: 'viewrectangleChanged' },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n    },\n  },\n\n  ready() {\n    this.viewrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.scaledviewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n    this.theme = 'dark';\n  },\n\n  attached() {\n    this.set('style.overflow', 'hidden');\n    this.set('style.cursor', 'move');\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n  },\n\n  viewChanged(_, view) {\n    if (!view) {\n      return;\n    }\n    const x = view.pan[0];\n    const y = view.pan[1];\n    this.viewrectangle = [-x, -y, view.width, view.height];\n    this.scale = view.scale;\n  },\n\n  themeChanged() {\n    const style = TheGraph.nav.calculateStyleFromTheme(this.theme);\n    this.backgroundColor = style.backgroundColor;\n    this.viewBoxBorder = style.viewBoxBorder;\n    this.viewBoxBorder2 = style.viewBoxBorder2;\n    this.outsideFill = style.outsideFill;\n    this.set('style.backgroundColor', this.backgroundColor);\n    // Redraw rectangle\n    this.viewrectangleChanged();\n  },\n\n  viewrectangleChanged() {\n    if (!this.viewrectangle || !this.viewrectangle.length) {\n      return;\n    }\n    // Canvas to grey out outside view\n    const context = this.$.outcanvas.getContext('2d');\n    const properties = {\n      width: this.width,\n      height: this.height,\n      scale: this.scale,\n      thumbscale: this.thumbscale,\n      thumbrectangle: this.thumbrectangle,\n      viewrectangle: this.viewrectangle,\n      viewBoxBorder: this.viewBoxBorder,\n      viewBoxBorder2: this.viewBoxBorder2,\n      outsideFill: this.outsideFill,\n    };\n    const nav = TheGraph.nav.render(context, this.$.viewrect, properties);\n    this.hide = nav.hide;\n  },\n\n  // this.scaledviewrectangle = [x, y, w, h];\n  hideChanged() {\n    if (this.hide) {\n      this.set('style.display', 'none');\n    } else {\n      this.set('style.display', 'block');\n    }\n  },\n\n  thumbscaleChanged() {\n    this.viewrectangleChanged();\n  },\n\n  thumbrectangleChanged() {\n    // Binding this from the-graph-thumb to know the dimensions rendered\n    const w = this.thumbrectangle[2];\n    const h = this.thumbrectangle[3];\n    this.thumbscale = w > h ? this.width / w : this.height / h;\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { Journal } from 'fbp-graph';\nimport { IDBJournalStore } from '../src/JournalStore';\nimport './the-graph-nav';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      #controls {\n        display: block;\n        position: fixed;\n        right: 36px;\n        bottom: 0;\n        width: 288px;\n        height: 180px;\n        color: var(--noflo-ui-text-highlight);\n        box-sizing: border-box;\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px -1px;\n        border-top: 1px solid var(--noflo-ui-border);\n      }\n\n      #controls button {\n        line-height: 36px;\n        border: none;\n        background-color: transparent;\n        font-size: 14px;\n        width: 72px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: pointer;\n      }\n      #controls button.undo {\n        position: absolute;\n        left: 0;\n        bottom: 0;\n      }\n      #controls button.redo {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n      }\n      #controls button.disabled {\n        color: rgba(179, 222, 230, 0.2);\n      }\n      #controls button.autolayout {\n        position: absolute;\n        left: calc(50% - 18px);\n        bottom: 0;\n      }\n\n      #nav {\n        position: absolute;\n        left: 0;\n        top: 0;\n      }\n    </style>\n    <div id=\"controls\">\n      <the-graph-nav id=\"nav\" width=\"288\" height=\"144\" graph=\"{{graph}}\" hide=\"{{hidenav}}\"></the-graph-nav>\n\n      <template is=\"dom-if\" if=\"{{graph}}\">\n        <button title=\"Undo\" on-click=\"undo\" class\\$=\"{{_computeClass(canUndo)}}\">\n          <noflo-icon icon=\"undo\"></noflo-icon>\n        </button>\n        <template is=\"dom-if\" if=\"{{klay}}\">\n          <button title=\"Autolayout\" class=\"autolayout\" on-click=\"autolayout\">\n            <noflo-icon icon=\"magic\"></noflo-icon>\n          </button>\n        </template>\n        <button title=\"Redo\" on-click=\"{{_computeClass2(canRedo)}}\" class\\$=\"{{_computeClass(canRedo)}}\">\n          <noflo-icon icon=\"repeat\"></noflo-icon>\n        </button>\n      </template>\n    </div>\n`,\n\n  is: 'noflo-journal',\n\n  properties: {\n    canRedo: {\n      type: Boolean,\n      value: false,\n    },\n    canUndo: {\n      type: Boolean,\n      value: false,\n    },\n    db: {\n      value: null,\n      notify: true,\n      observer: 'dbChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n      observer: 'editorChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    hidenav: {\n      type: Boolean,\n      value: false,\n      observer: 'hidenavChanged',\n    },\n    klay: {\n      type: Boolean,\n      value: false,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    panel: { notify: true },\n    returnTo: { value: null },\n  },\n\n  attached() {\n    this.klay = true;\n  },\n\n  editorChanged(newEditor) {\n    if (!newEditor) {\n      return;\n    }\n    // Connect nav and editor together\n    const { nav } = this.$;\n    const editor = newEditor;\n    editor.addEventListener('viewchanged', (e) => {\n      nav.view = e.detail;\n    });\n    nav.addEventListener('panto', (e) => {\n      const pan = e.detail;\n      if (pan.x !== editor.pan[0] || pan.y !== editor.pan[1]) {\n        editor.pan[0] = pan.x;\n        editor.pan[1] = pan.y;\n      }\n    });\n    nav.addEventListener('tap', () => {\n      editor.triggerFit();\n    });\n  },\n\n  graphChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  dbChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  componentChanged() {\n    if (this.component && this.component.name) {\n      this.hidenav = true;\n    } else {\n      this.hidenav = false;\n    }\n  },\n\n  connectJournal() {\n    if (!this.graph || !this.graph.on || !this.db) {\n      return;\n    }\n    const positionedNodes = this.graph.nodes.filter((node) => {\n      if (!node.metadata) {\n        return false;\n      }\n      if (!node.metadata.x || !node.metadata.y) {\n        return false;\n      }\n      return true;\n    });\n    if (this.graph.nodes.length && !positionedNodes.length) {\n      setTimeout(() => {\n        this.autolayout();\n      }, 10);\n    }\n    if (!this.graph.properties.project || this.graph.journal || !this.db) {\n      return;\n    }\n    // Initialize persistent journal whenever needed\n    const store = new IDBJournalStore(this.graph, this.db);\n    store.init(() => {\n      this.graph.journal = new Journal(this.graph, undefined, store);\n      this.checkState();\n      this.graph.journal.store.on('transaction', () => {\n        this.checkState();\n      });\n    });\n  },\n\n  checkState() {\n    if (!this.graph || !this.graph.journal) {\n      this.canUndo = false;\n      this.canRedo = false;\n      return;\n    }\n    this.canUndo = this.graph.journal.canUndo();\n    this.canRedo = this.graph.journal.canRedo();\n  },\n\n  undo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.undo();\n    this.checkState();\n  },\n\n  redo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.redo();\n    this.checkState();\n  },\n\n  autolayout(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.klay) {\n      return;\n    }\n    this.editor.triggerAutolayout();\n  },\n\n  themeChanged(newTheme) {\n    this.$.nav.theme = newTheme;\n  },\n\n  hidenavChanged() {\n    if (this.hidenav) {\n      this.set('$.controls.style.height', '36px');\n    } else {\n      this.set('$.controls.style.height', '180px');\n    }\n  },\n\n  _computeClass(canUndo) {\n    return `undo ${this.tokenList({ disabled: !canUndo })}`;\n  },\n\n  _computeClass2(canRedo) {\n    return `redo ${this.tokenList({ disabled: !canRedo })}`;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"codemirror-styles\">\n      :host {\n        background-color: var(--noflo-ui-background);\n        overflow: hidden;\n      }\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      #code,\n      #tests {\n        display: block;\n        width: 50%;\n        height: 100%;\n        position: absolute;\n        left: 0px;\n        top: 36px;\n      }\n      #tests {\n        left: auto;\n        right: 0px;\n      }\n      #code h1,\n      #tests h1 {\n        margin: 0;\n        line-height: 36px;\n        padding-left: 36px;\n        font-size: 14px;\n        text-transform: uppercase;\n        color: var(--noflo-ui-text);\n      }\n      #code h1 {\n        text-align: right;\n      }\n    </style>\n    <section id=\"code\">\n      <h1>Implementation</h1>\n      <div id=\"code_editor\"></div>\n    </section>\n    <section id=\"tests\">\n      <h1>Tests</h1>\n      <div id=\"tests_editor\"></div>\n    </section>\n`,\n\n  is: 'noflo-component-editor',\n\n  properties: {\n    codeEditor: { value: null },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    height: {\n      value: null,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    project: { value: null },\n    runtime: { value: null },\n    spec: {\n      value: null,\n      observer: 'specChanged',\n    },\n    testsEditor: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    width: {\n      value: null,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.componentChanged();\n    const self = this;\n    this.debouncedComponentChange = _.debounce(() => {\n      if (!self.component) {\n        return;\n      }\n      self.fire('changed', self.component);\n    }, 1500);\n    this.debouncedSpecChange = _.debounce(() => {\n      if (!self.spec) {\n        return;\n      }\n      self.fire('specschanged', self.spec);\n    }, 1500);\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      this.set('style.display', 'none');\n      return;\n    }\n    this.set('spec', null);\n    if (this.project) {\n      this.project.specs.forEach((spec) => {\n        if (spec.name === this.component.name) {\n          this.set('spec', spec);\n        }\n      });\n      if (!this.spec) {\n        this.set('spec', {\n          name: this.component.name,\n          changed: false,\n          code: this.component.tests || '',\n          language: 'yaml',\n          project: this.component.project,\n          type: 'spec',\n        });\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.set('style.display', 'block');\n    PolymerDom(this.$.code_editor).innerHTML = '';\n    if (!this.component.code) {\n      this.set('component.code', this.getExampleCode());\n    }\n    const codeOptions = this.getMirrorOptions(this.component, this.component.code);\n    this.codeEditor = CodeMirror(this.$.code_editor, codeOptions);\n    this.codeEditor.on('change', () => {\n      this.set('component.code', this.codeEditor.getValue());\n      this.set('component.changed', true);\n      this.debouncedComponentChange();\n    });\n    this.setSize();\n  },\n\n  specChanged() {\n    PolymerDom(this.$.tests_editor).innerHTML = '';\n    if (!this.spec) {\n      return;\n    }\n    const testOptions = this.getMirrorOptions(this.spec, this.spec.code);\n    this.testsEditor = CodeMirror(this.$.tests_editor, testOptions);\n    this.testsEditor.on('change', () => {\n      this.set('spec.code', this.testsEditor.getValue());\n      this.set('spec.changed', true);\n      this.debouncedSpecChange();\n    });\n    this.setSize();\n  },\n\n  widthChanged() {\n    this.setSize();\n  },\n\n  heightChanged() {\n    this.setSize();\n  },\n\n  getMirrorOptions(component, value) {\n    const options = {\n      lineNumbers: true,\n      value: value || '',\n      mode: this.getMirrorMode(component.language),\n      theme: this.getMirrorTheme(),\n      readOnly: component.project ? false : 'nocursor',\n    };\n    const canLint = () => false;\n    if (canLint(component.language) && !options.readOnly) {\n      options.gutters = ['CodeMirror-lint-markers'];\n      options.lint = true;\n    }\n    return options;\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript') {\n      return language;\n    } if (language === 'typescript') {\n      return 'text/typescript';\n    } if (language === 'yaml') {\n      return 'text/x-yaml';\n    } if (language === 'python') {\n      return 'text/x-python';\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  getExampleCode() {\n    let runtimeType = null;\n    if (this.runtime && this.runtime && this.runtime.definition && this.runtime.definition.type) {\n      runtimeType = this.runtime.definition.type;\n    }\n    if (!runtimeType && this.project) {\n      runtimeType = this.project.type;\n    }\n    if (!runtimeType) {\n      return '';\n    }\n    const info = runtimeInfo[runtimeType];\n    let { language } = this.component;\n    if (language === 'es6') {\n      language = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[this.component.language]) {\n      template = info.componenttemplates[this.component.language];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.component.name,\n        description: this.component.description,\n        icon: this.component.icon,\n      });\n    }\n    return template;\n  },\n\n  themeChanged() {\n    if (!this.codeEditor || !this.testsEditor) {\n      return;\n    }\n    this.codeEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  setSize() {\n    if (!this.width || !this.height) {\n      return;\n    }\n    const width = (this.width - 90) / 2;\n    const height = this.height - 102;\n    if (this.codeEditor) {\n      this.codeEditor.setSize(width, height);\n      this.codeEditor.refresh();\n    }\n    if (this.testsEditor) {\n      this.testsEditor.setSize(width, height);\n      this.testsEditor.refresh();\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <ul class=\"toolbar2right\">\n      <template is=\"dom-repeat\" items=\"{{buttons}}\" as=\"button\">\n        <li>\n          <button on-click=\"clicked\" id=\"{{button.id}}\">\n            <noflo-icon icon=\"{{button.icon}}\" fallback=\"\"></noflo-icon>\n            <span>{{button.label}}</span>\n          </button>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-menu',\n\n  properties: {\n    buttons: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  clicked(event, detail, sender) {\n    event.preventDefault();\n    this.buttons.forEach((button) => {\n      if (button.id !== sender.getAttribute('id')) {\n        return;\n      }\n      this.fire('click', button.id);\n      if (button.search) {\n        this.fire('search', button.search);\n        return;\n      }\n      button.action();\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i class=\"fa fa-cog\"></i>\n          <h2>{{result.metadata.label}}</h2>\n          <p>{{result.component}}</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-graph-results',\n\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'resultsChanged',\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  detached() {\n    this.editor = null;\n  },\n\n  resultsChanged() {\n    if (!this.editor) return;\n    if (!this.search || this.search.length < 1) {\n      this.set('editor.displaySelectionGroup', true);\n      this.set('editor.selectedNodes', []);\n    } else if (this.results) {\n      this.set('editor.displaySelectionGroup', !(this.results.length > 0));\n      this.set('editor.selectedNodes', this.results);\n    }\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result) {\n      return;\n    }\n    this.set('editor.displaySelectionGroup', true);\n    this.set('editor.selectedNodes', [result]);\n    this.editor.focusNode(result);\n    this.fire('resultclick', result);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n        font: normal normal normal 14px/1 FontAwesomeSVG;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i><noflo-icon icon=\"[[result.icon]]\" fallback=\"cog\"></noflo-icon></i>\n          <h2>[[result.label]]</h2>\n          <p>[[result.description]]</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-library-results',\n\n  properties: {\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result || !result.action) {\n      return;\n    }\n    this.fire('resultclick', result);\n    result.action();\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\n\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport runtime from '../src/runtime';\nimport './noflo-type-selector';\nimport './noflo-icon';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles codemirror-styles\">\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      textarea {\n        height: 144px;\n      }\n      .editable-title {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n      }\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      div.hidden {\n        display: none;\n      }\n      a#download {\n        position: absolute;\n        right: 36px;\n        top: 36px;\n        width: 36px;\n        display: block;\n        height: 36px;\n        line-height: 36px;\n        background-color: rgb(0, 127, 153);\n        text-align: center;\n        border-radius: 6px;\n        color: white;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n      ul.tabs {\n        display: block;\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n        text-align: center;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <input type=\"text\" on-keydown=\"checkUpdateName\" on-blur=\"updateName\" class=\"editable-title\" value=\"{{getName(graph)}}\">\n      <template is=\"dom-if\" if=\"{{downloadUrl}}\">\n        <a id=\"download\" download=\"{{_computeDownload(graph)}}\" href\\$=\"{{downloadUrl}}\">\n          <noflo-icon icon=\"download\"></noflo-icon>\n        </a>\n      </template>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{isMain}}\">\n      <p>Main graph in project <span>{{project.name}}</span>.</p>\n      </template>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as subgraph in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <ul class=\"tabs\">\n        <li id=\"properties\" on-click=\"setView\" class\\$=\"{{_computeClass(view)}}\">Properties</li>\n        <template is=\"dom-if\" if=\"{{_computeIf(type)}}\">\n        <li id=\"html\" on-click=\"setView\" class\\$=\"{{_computeClass5(view)}}\">HTML</li>\n        </template>\n        <template is=\"dom-if\" if=\"{{spec}}\">\n        <li id=\"tests\" on-click=\"setView\" class\\$=\"{{_computeClass6(view)}}\">Tests</li>\n        </template>\n      </ul>\n      <div class\\$=\"{{_computeClass2(view)}}\">\n      <label>\n        <span>Description</span>\n        <input type=\"text\" value=\"{{description::input}}\">\n      </label>\n      <label>\n        Icon\n        <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n      </label>\n      <label>\n        <span>Type</span>\n        <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass3(view)}}\">\n      <label id=\"html_editor\">\n        <span>Preview contents</span>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass4(view)}}\">\n      <label id=\"tests_editor\">\n        <span>Tests</span>\n      </label>\n      </div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"save\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-graph-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    downloadUrl: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    icon: {\n      type: String,\n      value: '',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    isMain: {\n      type: Boolean,\n      value: false,\n    },\n    preview: {\n      type: String,\n      value: '',\n    },\n    project: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    spec: {\n      value: null,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    type: {\n      type: String,\n      value: '',\n    },\n    view: {\n      type: String,\n      value: 'properties',\n      observer: 'viewChanged',\n    },\n  },\n\n  checkUpdateName(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateName(event);\n    }\n  },\n\n  updateName(event) {\n    this.set('graph.name', event.currentTarget.value);\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    if (!this.graph) {\n      return;\n    }\n    this.description = this.graph.properties.description;\n    this.icon = this.graph.properties.icon || 'cog';\n    this.type = runtime.getGraphType(this.graph);\n    this.view = 'properties';\n    this.inGraph = [];\n    this.isMain = false;\n\n    if (this.project) {\n      if (this.graph.properties.main) {\n        this.isMain = true;\n      } else {\n        this.project.graphs.forEach((graph) => {\n          graph.nodes.forEach((node) => {\n            if (node.component === collections.unnamespace(this.graph.name)\n            || node.component === collections.namespace(this.graph.name, this.project.namespace)) {\n              this.push('inGraph', graph);\n            }\n          });\n        });\n      }\n      this.project.specs.forEach((spec) => {\n        if (collections.unnamespace(spec.name) === collections.unnamespace(this.graph.name)) {\n          this.spec = spec;\n        }\n      });\n      if (!this.spec) {\n        this.spec = {\n          name: collections.unnamespace(this.graph.name),\n          changed: false,\n          code: '',\n          language: 'yaml',\n          project: this.project.id,\n          type: 'spec',\n        };\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.prepareHtmlEditor();\n    this.prepareTestsEditor();\n    this.prepareDownload();\n  },\n\n  prepareDownload() {\n    if (!window.Blob || !window.URL) {\n      return;\n    }\n    const graph = JSON.parse(JSON.stringify(this.graph));\n    if (graph.properties) {\n      delete graph.properties.sha;\n      delete graph.properties.changed;\n      delete graph.properties.project;\n      delete graph.properties.id;\n    }\n    const blob = new Blob([JSON.stringify(graph, null, 4)], { type: 'application/json' });\n    try {\n      this.downloadUrl = URL.createObjectURL(blob);\n    } catch (e) {\n      // Ignore URL failure\n    }\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  viewChanged() {\n    if (this.view === 'html' && this.htmlEditor) {\n      setTimeout(() => {\n        this.htmlEditor.setSize(576 - 4, 288);\n        this.htmlEditor.refresh();\n        this.htmlEditor.focus();\n      }, 1);\n    }\n    if (this.view === 'tests' && this.testsEditor) {\n      setTimeout(() => {\n        this.testsEditor.setSize(576 - 4, 288);\n        this.testsEditor.refresh();\n        this.testsEditor.focus();\n      }, 1);\n    }\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  themeChanged() {\n    if (!this.htmlEditor || !this.testsEditor) {\n      return;\n    }\n    this.htmlEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  prepareHtmlEditor() {\n    if (this.type !== 'noflo-browser') {\n      return;\n    }\n    this.htmlEditor = CodeMirror(this.$.html_editor, {\n      lineNumbers: true,\n      value: this.graph.properties.environment.content || '',\n      language: 'htmlmixed',\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  prepareTestsEditor() {\n    if (!this.spec) {\n      return;\n    }\n    this.testsEditor = CodeMirror(this.$.tests_editor, {\n      lineNumbers: true,\n      value: this.spec.code || '',\n      mode: this.getMirrorMode(this.spec.language),\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript' || language === 'yaml') {\n      return language;\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  save() {\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveGraphProperties');\n    }\n    const env = JSON.parse(JSON.stringify(this.graph.properties.environment));\n    if (this.htmlEditor) {\n      this.preview = this.htmlEditor.getValue();\n      env.content = this.preview;\n    }\n    if (this.testsEditor && this.spec) {\n      const specCode = this.testsEditor.getValue();\n      if (specCode !== this.spec.code) {\n        this.set('spec.code', specCode);\n        this.set('spec.changed', true);\n        this.fire('specschanged', this.spec);\n      }\n    }\n    env.type = this.type;\n    this.graph.setProperties({\n      environment: env,\n      description: this.description,\n      icon: this.icon,\n    });\n    this.close();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteGraph');\n    }\n    this.fire('delete', this.graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  setView(event) {\n    this.view = event.currentTarget.id;\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(view) {\n    return this.tokenList({ selected: view === 'properties' });\n  },\n\n  _computeIf(type) {\n    return type === 'noflo-browser';\n  },\n\n  _computeClass2(view) {\n    return this.tokenList({ hidden: view !== 'properties' });\n  },\n\n  _computeClass3(view) {\n    return this.tokenList({ hidden: view !== 'html' });\n  },\n\n  _computeClass4(view) {\n    return this.tokenList({ hidden: view !== 'tests' });\n  },\n\n  _computeDownload(graph) {\n    return `${collections.unnamespace(graph.name)}.json`;\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  _computeClass5(view) {\n    return this.tokenList({ selected: view === 'html' });\n  },\n\n  _computeClass6(view) {\n    return this.tokenList({ selected: view === 'tests' });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{getName(component)}}</span></h1>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as component in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <div class=\"toolbar\">\n          <!-- <button on-click=\"{{send}}\">Save</button> -->\n          <a on-click=\"close\">Cancel</a>\n          <button class=\"delete\" on-click=\"delete\">Delete</button>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-component-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      observer: 'componentChanged',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    errorText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    Polymer.dom(document.getElementById('container')).classList.add('blur');\n    Polymer.dom(this).classList.add('modal-content');\n    this.inGraph = [];\n    if (this.project) {\n      this.project.graphs.forEach((graph) => {\n        graph.nodes.forEach((node) => {\n          if (node.component === collections.unnamespace(this.component.name)\n            || node.component === collections.namespace(\n              this.component.name,\n              this.project.namespace,\n            )) {\n            this.push('inGraph', graph);\n          }\n        });\n      });\n    }\n  },\n\n  detached() {\n    Polymer.dom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  componentChanged() {\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteComponent');\n    }\n    this.fire('delete', this.component);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!Polymer.dom(this).parentNode) {\n      return;\n    }\n    Polymer.dom(Polymer.dom(this).parentNode).removeChild(this);\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  listeners: { click: 'close' },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport './noflo-menu';\nimport './noflo-search-graph-results';\nimport './noflo-search-library-results';\nimport './noflo-graph-inspector';\nimport './noflo-component-inspector';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        color: var(--noflo-ui-text);\n        font-size: 10px;\n        white-space: nowrap;\n      }\n      input {\n        background-color: var(--noflo-ui-background);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        border: none;\n        padding: 0px;\n        padding-right: 10px;\n        padding-left: 10px;\n        color: var(--noflo-ui-text);\n        width: 245px;\n        height: 36px;\n        display: inline;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        margin: 0px;\n        margin-left: -5px;\n        padding: 0px;\n        display: inline;\n        display: inline;\n\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      :host(.overlay) #breadcrumb {\n        width: calc(72px * 4);\n        display: block;\n      }\n      #breadcrumb {\n        position: relative;\n        overflow: hidden;\n        width: 0px;\n        height: 71px;\n        left: 0px;\n        top: 0px;\n        z-index: 1;\n\n        /*transition: width 0.3s ease-in-out;*/\n        display: none;\n        /*box-sizing: border-box;*/\n\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n\n      }\n      #breadcrumb noflo-icon.fa-search {\n        position: absolute;\n        line-height: 72px;\n        right: 54px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: text;\n      }\n      #breadcrumb #parentlink {\n        line-height: 72px;\n        display: inline-block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear,\n      #breadcrumb #graphinspector,\n      #breadcrumb #componentinspector,\n      #breadcrumb #readonly-lock {\n        position: absolute;\n        right: 9px;\n        top: 0px;\n        line-height: 72px;\n        display: block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear {\n        color: var(--noflo-ui-border-highlight);\n      }\n      #breadcrumb h1 {\n        display: inline-block;\n        line-height: 72px;\n        font-size: 15px;\n        margin: 0px;\n        padding: 0px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        width: 156px;\n        font-weight: normal;\n        padding-left: 18px;\n        cursor: pointer;\n      }\n      :host(.overlay) #searchinput {\n        display: none;\n      }\n      #searchinput {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        display: block;\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        border: none;\n        padding: 0px;\n        padding-right: 54px;\n        padding-left: 18px;\n        width: calc(72px * 3 - 1px);\n        height: 71px;\n        font-size: 12px;\n        display: inline;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        border-radius: none;\n      }\n      #searchinput #speech {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #searchinput.components {\n        background-color: var(--noflo-ui-text);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.components::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n        color: var(--noflo-ui-text-highlight);\n      }\n      #searchinput.processes {\n        background-color: hsl(161, 79%, 68%);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.processes::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n      }\n    </style>\n    <div id=\"breadcrumb\" on-click=\"focus\">\n      <template is=\"dom-if\" if=\"{{_canSearch(component, readonly)}}\">\n      <noflo-icon class=\"fa-search\" icon=\"search\"></noflo-icon>\n      </template>\n      <h1 title=\"Search\">\n        <template is=\"dom-if\" if=\"{{_canGoBack(project, graphs, component)}}\">\n        <button id=\"parentlink\" title=\"Back\" on-click=\"goBack\">\n          <noflo-icon icon=\"angle-left\"></noflo-icon>\n        </button>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isGraph(component, graph)}}\">\n        <span>{{getName(graph)}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isComponent(component)}}\">\n        <span>{{getName(component)}}</span>\n        </template>\n      </h1>\n      <template is=\"dom-if\" if=\"{{_canInspectGraph(component, graph, readonly)}}\">\n      <button on-click=\"showGraphInspector\" id=\"graphinspector\" title=\"Graph properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_canInspectComponent(component, graph, readonly)}}\">\n      <button on-click=\"showComponentInspector\" id=\"componentinspector\" title=\"Component properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_isReadOnly(component, graph, readonly)}}\">\n      <button title=\"Read-only\" id=\"readonly-lock\">\n        <noflo-icon icon=\"lock\"></noflo-icon>\n      </button>\n      </template>\n    </div>\n    <input id=\"searchinput\" placeholder=\"Search components\" on-keydown=\"switchSearch\" value=\"{{search::input}}\" type=\"text\" autocapitalize=\"off\" autocorrect=\"off\" x-webkit-speech=\"\">\n    <button id=\"clear\" on-click=\"clearSearch\" title=\"Clear search\">\n      <noflo-icon icon=\"times\"></noflo-icon>\n    </button>\n`,\n\n  is: 'noflo-search',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graph: { value: null },\n    graphInspector: { value: null },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'graphsChanged',\n    },\n    menuCard: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n    },\n    panel: { value: null },\n    parentPath: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    readonly: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    results: { notify: true },\n    resultsCard: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n    searchGraphResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchGraphResultsChanged',\n    },\n    searchLibrary: {\n      type: Boolean,\n      value: true,\n    },\n    searchLibraryResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchLibraryResultsChanged',\n    },\n  },\n\n  readonlyChanged() {\n    if (this.readonly) {\n      this.blur();\n    }\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      // Component nullified, ensure we recount graphs\n      this.graphsChanged();\n      return;\n    }\n    this.closeInspectors();\n  },\n\n  graphsChanged() {\n    this.closeInspectors();\n    this.blur();\n  },\n\n  closeInspectors() {\n    if (this.graphInspector) {\n      if (PolymerDom(this.graphInspector).parentNode) {\n        PolymerDom(PolymerDom(this.graphInspector).parentNode)\n          .removeChild(this.graphInspector);\n      }\n      this.graphInspector = null;\n    }\n    if (this.componentInspector) {\n      if (PolymerDom(this.componentInspector).parentNode) {\n        PolymerDom(PolymerDom(this.componentInspector).parentNode)\n          .removeChild(this.componentInspector);\n      }\n      this.componentInspector = null;\n    }\n  },\n\n  getParentPath(graphs, component) {\n    const parentPath = [];\n    if (!this.project) {\n      return parentPath;\n    }\n    const findNode = (comp, graph) => {\n      const matching = graph.nodes.filter((node) => {\n        if (node.id === comp) {\n          return true;\n        }\n        if (node.component === comp) {\n          // Direct match\n          return true;\n        }\n        if (!this.project) {\n          return false;\n        }\n        if (node.component === `${this.project.namespace}/${comp}`) {\n          return true;\n        }\n        if (node.component === `${this.project.id}/${comp}`) {\n          return true;\n        }\n        return false;\n      });\n      return matching[0];\n    };\n    graphs.forEach((graph, idx) => {\n      if (!component && idx >= graphs.length - 1) {\n        return;\n      }\n      if (idx === 0) {\n        parentPath.push(graph.properties.id);\n        return;\n      }\n      const previous = graphs[idx - 1];\n      const node = findNode(graph.name, previous);\n      if (!node) {\n        return;\n      }\n      parentPath.push(node.id);\n    });\n    return parentPath;\n  },\n\n  libraryResults(results) {\n    this.set('searchLibraryResults', []);\n    this.set('searchLibraryResults', results);\n  },\n\n  graphResults(result) {\n    this.push('searchGraphResults', result);\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n    this.blur();\n  },\n\n  focus() {\n    if (this.readonly) {\n      return;\n    }\n    if (this.component && this.component.name) {\n      return;\n    }\n    PolymerDom(this).classList.remove('overlay');\n    this.$.searchinput.focus();\n    if (this.search === null) {\n      // Show all\n      this.search = '';\n    }\n  },\n\n  blur() {\n    this.clearResults();\n    PolymerDom(this).classList.add('overlay');\n  },\n\n  toggle() {\n    if (PolymerDom(this).classList.contains('overlay')) {\n      this.focus();\n      return;\n    }\n    this.blur();\n  },\n\n  clearResults() {\n    this.set('searchGraphResults', []);\n    this.set('searchLibraryResults', []);\n  },\n\n  clearSearch() {\n    if (this.resultsCard) {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    this.search = null;\n    this.blur();\n  },\n\n  switchSearch(event) {\n    if (event.keyIdentifier === 'U+0009') {\n      event.preventDefault();\n      this.searchLibrary = !this.searchLibrary;\n      if (this.searchLibrary) {\n        PolymerDom(this.$.searchinput).classList.add('components');\n        PolymerDom(this.$.searchinput).classList.remove('processes');\n        this.set('$.searchinput.placeholder', 'Search components');\n      } else {\n        PolymerDom(this.$.searchinput).classList.add('processes');\n        PolymerDom(this.$.searchinput).classList.remove('components');\n        this.set('$.searchinput.placeholder', 'Search processes');\n      }\n      this.searchChanged();\n    }\n    event.stopPropagation();\n  },\n\n  searchChanged() {\n    this.clearResults();\n    if (this.search && typeof ga === 'function') {\n      ga('send', 'event', 'search', 'input', 'newSearch');\n    }\n    if (this.resultsCard) {\n      this.set('resultsCard.children.0.search', this.search);\n      this.set('resultsCard.search', this.search);\n    }\n    const event = this.searchLibrary ? 'search:library' : 'search:graph';\n    this.fire(event, { search: this.search });\n  },\n\n  searchLibraryResultsChanged() {\n    if (!this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-library-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchLibraryResults);\n      return;\n    }\n    if (this.searchLibraryResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-library-results');\n    results.id = 'results';\n    results.search = this.search;\n    results.results = this.searchLibraryResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-library-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  searchGraphResultsChanged() {\n    if (this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-graph-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchGraphResults);\n      return;\n    }\n    if (this.searchGraphResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-graph-results');\n    results.id = 'results';\n    results.editor = this.editor;\n    results.search = this.search;\n    results.results = this.searchGraphResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-graph-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  goBack(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    const path = this.getParentPath(this.graphs, this.component);\n    if (this.project.runtime) {\n      path.unshift(this.project.runtime);\n      path.unshift('runtime');\n      this.fire('hash', path);\n      return;\n    }\n    path.unshift(this.project.id);\n    path.unshift('project');\n    this.fire('hash', path);\n  },\n\n  showGraphInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (this.graphs.length === 0) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'graphProperties');\n    }\n    this.graphInspector = document.createElement('noflo-graph-inspector');\n    this.set('graphInspector.graph', this.graph);\n    this.set('graphInspector.project', this.project);\n    this.set('graphInspector.runtimes', this.runtimes);\n    this.set('graphInspector.theme', this.theme);\n    this.graphInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteGraph', ev.detail);\n    });\n    this.graphInspector.addEventListener('specschanged', (ev) => {\n      this.fire('specschanged', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.graphInspector);\n  },\n\n  showComponentInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'componentProperties');\n    }\n    this.componentInspector = document.createElement('noflo-component-inspector');\n    this.set('componentInspector.component', this.component);\n    this.set('componentInspector.project', this.project);\n    this.componentInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteComponent', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.componentInspector);\n  },\n\n  _canSearch(component, readonly) {\n    return !readonly && (!component || !component.name);\n  },\n\n  _canGoBack(project, graphs, component) {\n    if (!project) {\n      return false;\n    }\n    if (graphs.length > 1 || (graphs.length && component)) {\n      return true;\n    }\n    return false;\n  },\n\n  _isGraph(component, graph) {\n    return graph && (!component || !component.name);\n  },\n\n  _isComponent(component) {\n    return component && component.name;\n  },\n\n  _canInspectGraph(component, graph, readonly) {\n    return !readonly && graph && (!component || !component.name);\n  },\n\n  _canInspectComponent(component, graph, readonly) {\n    return !readonly && !graph && component && component.name;\n  },\n\n  _isReadOnly(component, graph, readonly) {\n    return readonly || (component && component.readonly) || (graph && graph.properties.readonly);\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new component</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Component name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolComponent\" required=\"\">\n        </label>\n        <label>\n          Component description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Language\n          <select name=\"type\" value=\"{{language::input}}\">\n            <template is=\"dom-repeat\" items=\"{{languages}}\" as=\"lang\">\n            <option value=\"[[lang.id]]\" selected\\$=\"[[_languageSelected(lang, language)]]\">[[lang.label]]</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-new-component',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    language: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'typeChanged',\n    },\n    languages: {\n      type: Array,\n      value() {\n        return [\n          {\n            id: 'c',\n            label: 'C',\n          },\n          {\n            id: 'c++',\n            label: 'C++',\n          },\n          {\n            id: 'coffeescript',\n            label: 'CoffeeScript',\n          },\n          {\n            id: 'es2015',\n            label: 'JavaScript (modern ES2015)',\n          },\n          {\n            id: 'javascript',\n            label: 'JavaScript',\n          },\n          {\n            id: 'typescript',\n            label: 'TypeScript',\n          },\n          {\n            id: 'python',\n            label: 'Python',\n          },\n          {\n            id: 'supercollider',\n            label: 'SuperCollider',\n          },\n          {\n            id: 'yaml',\n            label: 'YAML',\n          },\n        ];\n      },\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  typeChanged() {\n    if (!this.type) {\n      // No type defined, keep full list\n      return;\n    }\n    const runtimeI = runtimeInfo[this.type];\n    if (!runtimeI || !runtimeI.componenttemplates) {\n      // We don't know what languages the runtime supports, so keep full list\n      return;\n    }\n\n    // Filter list of languages to the ones supported by the runtime\n    const allLanguages = this.languages;\n    this.languages = allLanguages.filter((lang) => {\n      if (!runtimeI.componenttemplates[lang.id]) {\n        return false;\n      }\n      return true;\n    });\n    if (!this.languages.length) {\n      // Default back to all\n      this.languages = allLanguages;\n    }\n    // Default to first language if runtime has no preference\n    this.language = runtimeI.preferredlanguage || this.languages[0].id;\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.name) {\n      // Same regexp as used by the FBP language parser\n      this.name = this.name.replace(/[^a-zA-Z0-9]+/g, '_');\n    }\n    if (this.project) {\n      duplicates = this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newComponent');\n    }\n    this.fire('new', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      description: this.description,\n      language: this.language,\n      icon: this.icon,\n      project: this.project.id,\n      code: this.getExampleCode(this.language),\n      tests: '',\n    });\n    this.fire('newSpec', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      code: this.getExampleSpec(),\n      language: 'yaml',\n      project: this.project.id,\n      type: 'spec',\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _languageSelected(lang, selected) {\n    if (lang.id === selected) {\n      return true;\n    }\n    return false;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getExampleCode(language) {\n    if (!this.type) {\n      return '';\n    }\n    const info = runtimeInfo[this.type];\n    let lang = language;\n    if (lang === 'es6') {\n      lang = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[lang]) {\n      template = info.componenttemplates[lang];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.name,\n        description: this.description,\n        icon: this.icon,\n      });\n    }\n    return template;\n  },\n\n  getExampleSpec() {\n    let fbpSpec = '';\n    fbpSpec += `name: ${this.name} component\\n`;\n    fbpSpec += `topic: ${this.project.namespace || this.project.id}/${this.name}\\n`;\n    fbpSpec += 'cases:\\n';\n    fbpSpec += '  -\\n';\n    fbpSpec += '    name: with an input packet\\n';\n    fbpSpec += '    assertion: should send the same packet out\\n';\n    fbpSpec += '    inputs:\\n';\n    fbpSpec += '      in: true\\n';\n    fbpSpec += '    expect:\\n';\n    fbpSpec += '      out:\\n';\n    fbpSpec += '        equals: true\\n';\n    return fbpSpec;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{project.name}}</span> settings</h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <label>\n          <span>GitHub repository</span>\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/my-project\" autocapitalize=\"off\" autocorrect=\"off\" required=\"\">\n        </label>\n        <label>\n          <span>Project label</span>\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          <span>Project namespace</span>\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-cool-project\" required=\"\">\n        </label>\n        <label>\n          <span>Main graph</span>\n          <select name=\"type\" value=\"{{main::input}}\">\n            <template is=\"dom-repeat\" items=\"[[_getMainGraphs(project.graphs)]]\" as=\"graph\">\n              <option value=\"{{graph.properties.id}}\" selected\\$=\"[[_mainSelected(graph.properties.id, main)]]\">{{graph.name}}</option>\n            </template>\n          </select>\n        </label>\n        </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <a href=\"https://github.com/new\" target=\"_blank\">New Repository</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n      </div>\n`,\n\n  is: 'noflo-project-inspector',\n\n  properties: {\n    errorText: {\n      type: String,\n      value: '',\n    },\n    main: {\n      type: String,\n      value: '',\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    originalRepo: {\n      type: String,\n      value: '',\n    },\n    project: { observer: 'projectChanged' },\n    repo: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  projectChanged() {\n    this.originalRepo = this.project.repo;\n    this.repo = this.project.repo;\n    this.name = this.project.name;\n    this.namespace = this.project.namespace || this.project.id;\n    this.main = this.project.main;\n  },\n\n  updateProject() {\n    this.fire('updated', {\n      id: this.project.id,\n      name: this.name,\n      namespace: this.namespace,\n      main: this.main,\n      type: this.project.type,\n      repo: this.repo,\n    });\n    this.close();\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveProjectProperties');\n    }\n    this.updateProject();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.fire('delete', this.project);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _mainSelected(graphId, main) {\n    if (graphId === main) {\n      return true;\n    }\n    return false;\n  },\n\n  _getMainGraphs(graphs) {\n    return graphs.filter((graph) => graph.properties.main);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      table th {\n        text-align: left;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Synchronize with <noflo-icon icon=\"github\"></noflo-icon> <span>{{operation.repo}}</span></h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{statusText}}\">\n        <div>{{statusText}}</div>\n      </template>\n      <form>\n        <table>\n          <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n          <tr>\n            <th>{{file.path}}</th>\n            <td>\n              <select name=\"{{file.path}}\" on-change=\"choose\">\n                <template is=\"dom-repeat\" items=\"{{file.operations}}\" as=\"op\">\n                <option value=\"[[op]]\" selected\\$=\"[[_isSelectedOp(file, op)]]\">[[_getOperationLabel(op)]]</option>\n                </template>\n              </select>\n            </td>\n          </tr>\n          </template>\n        </table>\n        <template is=\"dom-if\" if=\"{{hasPush}}\">\n          <label>\n            <span>Commit message</span>\n            <input type=\"text\" value=\"{{message::input}}\" required=\"\">\n          </label>\n        </template>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(hasOp)}}\">Synchronize</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-project-sync',\n\n  properties: {\n    files: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'filesChanged',\n    },\n    hasOp: {\n      type: Boolean,\n      value: true,\n    },\n    hasPush: {\n      type: Boolean,\n      value: false,\n    },\n    message: {\n      type: String,\n      value: '',\n    },\n    operation: {\n      type: Object,\n      value() {\n        return {\n          repo: '',\n          push: [],\n          pull: [],\n          conflict: [],\n          noop: [],\n        };\n      },\n      observer: 'operationChanged',\n    },\n    statusText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  operationChanged() {\n    if (!this.operation.push.length\n      && !this.operation.pull.length\n      && !this.operation.conflict.length) {\n      this.statusText = 'All changes have been synchronized';\n      this.hasOp = false;\n    }\n    this.hasPush = false;\n    this.operation.conflict.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'pull', 'noop'],\n      });\n    });\n    this.operation.push.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'noop'],\n      });\n    });\n    this.operation.pull.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'pull',\n        operations: ['pull', 'noop'],\n      });\n    });\n    this.filesChanged();\n  },\n\n  filesChanged() {\n    let pushes = false;\n    let ops = false;\n    this.files.forEach((file) => {\n      if (file.operation === 'push') {\n        pushes = true;\n        ops = true;\n      }\n      if (file.operation === 'pull') {\n        ops = true;\n      }\n    });\n    this.hasPush = pushes;\n    this.hasOp = ops;\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (this.hasPush && !this.message) {\n      return;\n    }\n    const originalConflicts = this.operation.conflict;\n    const originalPushes = this.operation.push;\n    const originalPulls = this.operation.pull;\n    this.set('operation.conflict', []);\n    this.set('operation.pull', []);\n    this.set('operation.push', []);\n    const checkOps = (entry) => {\n      this.files.forEach((file) => {\n        if (file.path !== entry.path) {\n          return;\n        }\n        if (file.operation === 'push') {\n          this.push('operation.push', entry);\n        }\n        if (file.operation === 'pull') {\n          this.push('operation.pull', entry);\n        }\n      });\n    };\n    originalConflicts.forEach(checkOps);\n    originalPushes.forEach(checkOps);\n    originalPulls.forEach(checkOps);\n    this.set('operation.message', this.message);\n    this.fire('sync', this.operation);\n    this.close();\n  },\n\n  choose(event) {\n    let index = null;\n    let f = null;\n    this.files.forEach((file, idx) => {\n      if (file.path === event.currentTarget.name) {\n        index = idx;\n        f = file;\n      }\n    });\n    if (index === null) {\n      return;\n    }\n    this.splice('files', index, 1, {\n      id: event.currentTarget.name,\n      path: f.path,\n      operation: event.currentTarget.value,\n      operations: f.operations,\n    });\n    this.filesChanged();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(hasOp) {\n    return this.tokenList({ disabled: !hasOp });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  _getOperationLabel(op) {\n    if (op === 'push') {\n      return 'Push';\n    }\n    if (op === 'pull') {\n      return 'Pull';\n    }\n    if (op === 'noop') {\n      return 'Ignore';\n    }\n    return op;\n  },\n\n  _isSelectedOp(file, op) {\n    if (op === file.operation) {\n      return true;\n    }\n    return false;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './the-panel';\nimport './the-graph-thumb';\nimport './noflo-new-graph';\nimport './noflo-new-component';\nimport './noflo-project-inspector';\nimport './noflo-project-sync';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      h2 {\n        font-size: 16px;\n        line-height: 36px;\n        text-transform: none;\n        font-weight: normal;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.graphs {\n        margin-bottom: 144px;\n      }\n      ul.graphs li {\n        width: 245px;\n        height: 70px;\n        overflow: hidden;\n        float: left;\n        text-align: center;\n        background-color: hsl(190, 90%, 45%);\n        color: black;\n        border-radius: 3px;\n        margin-right: 0px;\n        margin-left: 0px;\n        margin-bottom: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.graphs li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.graphs li the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n      ul.graphs li noflo-icon {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        font-size: 36px;\n        color: black;\n      }\n      ul.graphs li button {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 13px;\n        padding-right: 13px;\n      }\n      ul.graphs li h2 {\n        position: absolute;\n        top: 18px;\n        left: 17px;\n        width: 75px;\n        text-transform: none;\n        font-size: 13px;\n        text-align: left;\n        white-space: nowrap;\n      }\n      header h1 {\n        text-align: center;\n        height: 36px;\n        line-height: 36px;\n        font-size: 17px;\n        white-space: nowrap;\n        max-width: 100%;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        padding-left: 36px;\n        box-sizing: border-box;\n      }\n      main ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      main ul li {\n        line-height: 36px;\n        min-height: 36px;\n      }\n      main ul li a {\n        color: var(--noflo-ui-text);\n        text-decoration: none;\n        display: block;\n        cursor: pointer;\n      }\n      main ul li a i {\n        float: right;\n        line-height: 36px;\n        color: var(--noflo-ui-border);\n        margin-right: 4px;\n      }\n      main {\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        max-height: calc(100% - 72px);\n        padding-left: 36px;\n      }\n      main.repo {\n        max-height: calc(100% - 72px * 2);\n      }\n      main::-webkit-scrollbar {\n        display: none;\n      }\n      footer {\n        background-color: transparent;\n        display: block;\n        position: absolute;\n        bottom: 0px;\n        left: 0px;\n        padding-left: 36px;\n        width: 325px;\n        padding-right: 36px;\n        box-sizing: border-box;\n        overflow: hidden;\n        height: 72;\n        transition: background-color 0.3s ease-in-out;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        top: 0px;\n        border-right-width: 1px;\n        height: 100vh;\n        padding-right: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f03a';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        right: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        cursor: e-resize;\n        opacity: 1;\n      }\n      #account[open] footer {\n        background-color: hsl(190, 90%, 45%);\n      }\n      footer h1 {\n        font-size: 17px;\n        line-height: 36px;\n        text-align: center;\n        margin: 0;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      footer button {\n        background-color: white;\n        color: hsl(190, 90%, 45%);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 17px;\n        padding-right: 17px;\n        line-height: 36px;\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        cursor: pointer;\n      }\n      footer button:disabled {\n        opacity: 0.5;\n      }\n    </style>\n    <the-panel id=\"account\" edge=\"left\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <h1>{{project.name}}</h1>\n        </template>\n        <template is=\"dom-if\" if=\"{{!project}}\">\n        <h1>Live mode</h1>\n        </template>\n      </header>\n      <main class\\$=\"{{_computeClass(project)}}\">\n        <ul>\n          <li>\n            <a on-click=\"openHome\">\n              <noflo-icon icon=\"home\"></noflo-icon>\n              Home\n            </a>\n          </li>\n          <template is=\"dom-if\" if=\"{{project}}\">\n          <li>\n            <a on-click=\"openSettings\">\n              <noflo-icon icon=\"cog\"></noflo-icon>\n              Settings\n            </a>\n          </li>\n          </template>\n        </ul>\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <template is=\"dom-if\" if=\"{{_canGraph(project, runtime)}}\">\n        <h2>Graphs</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New graph</h2>\n            <button on-click=\"newGraph\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.graphs}}\" as=\"graph\">\n          <li on-click=\"openGraph\" data-id\\$=\"{{graph.properties.id}}\">\n            <the-graph-thumb graph=\"{{graph}}\" width=\"200\" height=\"120\"></the-graph-thumb>\n            <h2>{{getName(graph)}}</h2>\n          </li>\n          </template>\n        </ul>\n        </template>\n        <template is=\"dom-if\" if=\"{{_canComponent(project, runtime)}}\">\n        <h2>Components</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New component</h2>\n            <button on-click=\"newComponent\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.components}}\" as=\"component\">\n          <li on-click=\"openComponent\" data-id\\$=\"{{component.name}}\">\n            <h2>{{getName(component)}}</h2>\n            <template is=\"dom-if\" if=\"{{_computeIf(component)}}\">\n            <noflo-icon icon=\"coffee\"></noflo-icon>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf2(component)}}\">\n            <noflo-icon icon=\"code\"></noflo-icon>\n            </template>\n          </li>\n          </template>\n        </ul>\n        </template>\n        </template>\n      </main>\n      <template is=\"dom-if\" if=\"{{project.repo}}\">\n      <footer slot=\"footer\">\n        <h1 title=\"{{project.repo}}\">\n          <noflo-icon icon=\"github\"></noflo-icon>\n          <span>{{project.repo}}</span>\n        </h1>\n        <button on-click=\"synchronize\">\n          <noflo-icon icon=\"cloud-upload\"></noflo-icon>\n          <span>Synchronize</span>\n        </button>\n      </footer>\n      </template>\n    </the-panel>\n`,\n\n  is: 'noflo-project',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  runtimeChanged() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      this.canComponent = this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n  },\n\n  newGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.project = this.project;\n    dialog.runtimes = this.runtimes;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const graph = ev.detail;\n      this.push('project.graphs', graph);\n      this.fire('newgraph', graph);\n      this.gotoGraph(graph.properties.id);\n    });\n  },\n\n  newComponent(event) {\n    if (!this.canComponent) {\n      return;\n    }\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-component');\n    dialog.project = this.project;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const component = ev.detail;\n      this.push('project.components', component);\n      this.fire('newcomponent', component);\n      // TODO: Add node to graph\n      this.gotoComponent(component.name);\n    });\n    dialog.addEventListener('newSpec', (ev) => {\n      const spec = ev.detail;\n      this.push('project.specs', spec);\n      this.fire('newspec', spec);\n    });\n  },\n\n  openHome(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.$.account.toggleOpen(false);\n    this.fire('hash', []);\n  },\n\n  openSettings(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'projectProperties');\n    }\n    const dialog = document.createElement('noflo-project-inspector');\n    dialog.project = this.project;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (ev) => {\n      Object.keys(ev.detail).forEach((property) => {\n        this.set(`project.${property}`, ev.detail[property]);\n      });\n      if (this.project.repo) {\n        this.set('project.gist', null);\n        if (!this.project.branch) {\n          this.set('project.branch', 'master');\n        }\n      }\n      this.project.graphs.forEach((graph) => {\n        if (graph.properties.id === this.project.main) {\n          const { type } = graph.properties.environment;\n          this.set('project.mainGraph', graph);\n          this.set('project.type', type);\n        }\n      });\n      // Send only the data we actually want to store\n      this.fire('changed', this.project);\n    });\n    dialog.addEventListener('delete', (ev) => {\n      this.$.account.toggleOpen(false);\n      this.fire('deleteProject', ev.detail);\n    });\n  },\n\n  gotoGraph(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getGraphHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  gotoComponent(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getComponentHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  openGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openGraph');\n    }\n    this.gotoGraph(event.currentTarget.getAttribute('data-id'));\n  },\n\n  openComponent(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openComponent');\n    }\n    this.gotoComponent(event.currentTarget.getAttribute('data-id'));\n  },\n\n  synchronize(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'syncGithub');\n    }\n    this.fire('sync', {\n      repo: this.project.repo,\n      project: this.project,\n    });\n    this.$.account.toggleOpen(false);\n  },\n\n  confirm(operation) {\n    const dialog = document.createElement('noflo-project-sync');\n    dialog.operation = operation;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('sync', (event) => {\n      if (typeof ga === 'function') {\n        if (event.detail.push.length) {\n          ga('send', 'event', 'button', 'click', 'pushGithub');\n        }\n        if (event.detail.pull.length) {\n          ga('send', 'event', 'button', 'click', 'pullGithub');\n        }\n      }\n      this.fire('syncDecision', event.detail);\n    });\n  },\n\n  _computeClass(project) {\n    return project && project.repo ? 'repo' : 'norepo';\n  },\n\n  _computeIf(component) {\n    return component.language === 'coffeescript';\n  },\n\n  _computeIf2(component) {\n    return component.language !== 'coffeescript';\n  },\n\n  _canGraph() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('protocol:graph') !== -1;\n    }\n    return true;\n  },\n\n  _canComponent() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n    return true;\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import React from 'react';\nimport { unnamespace } from '../collections';\n\nfunction nodeLabel(node) {\n  return unnamespace(node).split('_')[0];\n}\n\nfunction EdgeId({ row }) {\n  let subgraph;\n  let src;\n  let connection;\n  let tgt;\n  if (row.subgraph) {\n    subgraph = <span className=\"subgraph\">{row.subgraph.map((s) => nodeLabel(s)).join(' / ')}</span>;\n  }\n  if (row.src) {\n    src = (\n      <span className=\"source\">\n        <span className=\"node-id\">{nodeLabel(row.src.node)}</span>\n      </span>\n    );\n  }\n  if (row.tgt) {\n    tgt = (\n      <span className=\"target\">\n        <span className=\"node-id\">{nodeLabel(row.tgt.node)}</span>\n      </span>\n    );\n  }\n  let routeClass = 'connection';\n  if (row.edge && row.edge.metadata && typeof row.edge.metadata.route !== 'undefined') {\n    routeClass = `connection route${row.edge.metadata.route}`;\n  }\n  connection = <span className={routeClass}></span>;\n  if (row.src && row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  } else if (row.src) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n      </span>\n    );\n  } else if (row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  }\n  return (\n    <div className=\"edge\">\n      {subgraph}\n      {src}\n      {connection}\n      {tgt}\n    </div>\n  );\n}\n\nexport default EdgeId;\n","import React, { useState } from 'react';\nimport { Table } from 'react-fluid-table';\nimport EdgeId from './EdgeId';\n\nfunction PacketData({ row, multiLine = false }) {\n  switch (typeof row.data) {\n    case 'number':\n    case 'string': {\n      return row.data;\n    }\n    default: {\n      if (multiLine) {\n        return JSON.stringify(row.data, null, 2);\n      }\n      return JSON.stringify(row.data);\n    }\n  }\n}\n\nfunction PacketDetails({ row, index, isExpanded, clearSizeCache }) {\n  return (\n    <div className=\"packet-details\">\n      <dl>\n        <dt>Payload</dt>\n        <dd className=\"packet-data\">\n          <PacketData row={row} multiLine={true} />\n        </dd>\n      </dl>\n    </div>\n  );\n}\n\nfunction RuntimeEvents({ packets, width }) {\n  const idWidth = Math.min(width / 4, 238);\n  const dataWidth = width - idWidth - 36;\n  const columns = [\n    {\n      key: 'id',\n      header: 'Edge',\n      width: idWidth,\n      content: EdgeId,\n    },\n    {\n      key: 'data',\n      header: 'Data',\n      width: dataWidth,\n      content: PacketData,\n    },\n    {\n      key: '',\n      width: 36,\n      expander: true,\n    },\n  ];\n  return (\n    <Table\n      data={packets}\n      columns={columns}\n      subComponent={PacketDetails}\n      tableHeight={288}\n    />\n  );\n}\n\nexport default RuntimeEvents;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        -webkit-user-select: none;      /* disable cut copy paste */\n        -webkit-touch-callout: none;    /* disable callout, image save panel */\n        user-select: none;\n        touch-callout: none;\n\n        cursor: ew-resize;\n\n        display: inline-block;\n        text-align: center;      \n      }\n    </style>\n`,\n\n  is: 'number-scrubber',\n\n  properties: {\n    distance: {\n      type: Number,\n      value: 5,\n      notify: true,\n    },\n    max: {\n      value() {\n        return Infinity;\n      },\n      notify: true,\n    },\n    min: {\n      value() {\n        return -Infinity;\n      },\n      notify: true,\n    },\n    mod: {\n      type: Number,\n      value: 0,\n      notify: true,\n    },\n    precision: {\n      type: Number,\n      value: 1000000,\n    },\n    scrubend: { value: null },\n    scrubstart: { value: null },\n    startValue: {\n      type: Number,\n      value: 0,\n    },\n    step: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    value: {\n      value() {\n        return undefined;\n      },\n      notify: true,\n    },\n  },\n\n  onTrackStart() {\n    // Don't select\n    document.body.style.webkitUserSelect = 'none';\n    document.body.style.MozUserSelect = 'none';\n    document.body.style.msUserSelect = 'none';\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'ew-resize';\n    this.fire('scrubstart');\n    if (this.value === undefined) {\n      return;\n    }\n    this.value = parseFloat(this.value);\n    this.startValue = this.value;\n  },\n\n  onTrack(event) {\n    if (this.value === undefined) {\n      return;\n    }\n    let delta = event.dx;\n    if (this.distance > 1) {\n      delta = Math.round(delta / this.distance);\n    }\n    if (this.step !== 1) {\n      if (this.step > 1) {\n        delta = Math.round(delta / this.step) * this.step;\n      } else if (this.step > 0) {\n        delta *= this.step;\n      }\n    }\n    let newValue = this.startValue + delta;\n    if (this.mod !== 0) {\n      newValue %= this.mod;\n    }\n    if (Number.isFinite(this.min)) {\n      newValue = Math.max(newValue, this.min);\n    }\n    if (Number.isFinite(this.max)) {\n      newValue = Math.min(newValue, this.max);\n    }\n    // Stupid JS numbers\n    if (this.precision > 1) {\n      newValue = Math.round(newValue * this.precision) / this.precision;\n    }\n    if (this.value !== newValue) {\n      this.value = newValue;\n      this.fire('scrub', this.value);\n    }\n  },\n\n  onTrackEnd() {\n    // Reset select\n    document.body.style.webkitUserSelect = 'auto';\n    document.body.style.MozUserSelect = 'auto';\n    document.body.style.msUserSelect = 'auto';\n    document.body.style.userSelect = 'auto';\n    document.body.style.cursor = 'auto';\n    this.fire('scrubend');\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n\n  listeners: {\n    trackstart: 'onTrackStart',\n    track: 'onTrack',\n    trackend: 'onTrackEnd',\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './number-scrubber';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      .editable-title {\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n        border: 0px;\n        display: block;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 12px;\n        font-weight: 700;\n      }\n      .ports {\n        margin-bottom: 8px;\n      }\n      ul.ports li {\n        display: block;\n        position: relative;\n        clear: left;\n      }\n      ul.ports li label span {\n        float: left;\n        clear: left;\n        font-size: 12px;\n        padding-top: 0;\n        width: 87px;\n        line-height: 36px;\n        overflow: hidden;\n      }\n\n      ul.ports li p {\n        margin: 0px;\n        padding: 0px;\n        font-size: 10px;\n        margin-left: 87px;\n        margin-bottom: 3px;\n        line-height: 13px;\n        max-height: 26px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n\n      /* Hide spinners */\n      input[type=number]::-webkit-inner-spin-button, \n      input[type=number]::-webkit-outer-spin-button {\n        -webkit-appearance: none; \n        margin: 0; \n      }\n      input[type=number] {\n        -moz-appearance:textfield;\n      }\n\n      ul.ports li button {\n        padding: 8px;\n        height: 19px;\n        width: 19px;\n      }\n      ul.ports li label button {\n        background-color: hsl(184, 50%, 11%);\n        color: hsl(184, 40%, 89%);\n        display: block;\n        padding: 8px;\n        height: 36px;\n        width: 36px;\n      }\n      ul.ports li label button:active {\n        color: white;\n      }\n      ul.ports li label i {\n        margin:0;\n      }\n      ul.ports li span.route {\n        /* TODO: route colors */\n        background-color: white;\n        float: none;\n        display: inline-block;\n        width: 125px;\n        height: 1px;\n        padding: 0;\n      }\n      ul.ports .remove-value {\n        background-color: transparent !important;\n        opacity: .3;\n        border: none !important;\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        line-height: 36px;\n        height: 36px;\n        width: 36px;\n        text-align: center;\n        padding: 0px;\n        font-size: 12px;\n      }\n      ul.ports li span.route0  { background-color: hsl(  0,100%,100%); }\n      ul.ports li span.route1  { background-color: hsl(  0, 98%, 46%); }\n      ul.ports li span.route2  { background-color: hsl( 35, 98%, 46%); }\n      ul.ports li span.route3  { background-color: hsl( 60, 98%, 46%); }\n      ul.ports li span.route4  { background-color: hsl(135, 98%, 46%); }\n      ul.ports li span.route5  { background-color: hsl(160, 98%, 46%); }\n      ul.ports li span.route6  { background-color: hsl(185, 98%, 46%); }\n      ul.ports li span.route7  { background-color: hsl(210, 98%, 46%); }\n      ul.ports li span.route8  { background-color: hsl(285, 98%, 46%); }\n      ul.ports li span.route9  { background-color: hsl(310, 98%, 46%); }\n      ul.ports li span.route10 { background-color: hsl(335, 98%, 46%); }\n      \n      \n      ul.ports li input {\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        width: 178px;\n        height: 36px;\n        border: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 10px;\n        padding: 9px 26px 9px 36px;\n        margin: 0px;\n      }\n      ul.ports li input[type=\"checkbox\"] {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        width: 18px;\n      }\n      ul.ports li input[type=\"checkbox\"]:before {\n        display: block;\n        content: '';\n        width: 177px;\n        height: 36px;\n        margin-top: -9px;\n        margin-left: -36px;\n        background-color: hsla( 0, 0%, 20%, .2);\n        color: hsl( 0, 0%, 75%);\n        border-left: 1px solid hsla( 0, 0%, 75%, 0.1);\n      }\n\n      ul.ports li select {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        max-width: 110px;\n      }\n\n      ul.ports li  input, \n      ul.ports li  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n        color:             hsl(  0,  0%, 90%);\n      }\n      \n      ul.ports li:nth-child(even) input, \n      ul.ports li:nth-child(even) button {\n        background-color: hsla(210, 100%, 20%, .1);\n      }\n      ul.ports li:nth-child(odd) input, \n      ul.ports li:nth-child(odd) button {\n        background-color: hsla(190, 100%, 20%, .1);\n      }\n\n      ul.ports li.route0  input, \n      ul.ports li.route0  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n      }\n      ul.ports li.route1  input, \n      ul.ports li.route1  button  { \n        background-color: hsla(  0, 98%, 20%, 0.35); \n      }\n      ul.ports li.route2  input, \n      ul.ports li.route2  button  { \n        background-color: hsla( 35, 98%, 20%, 0.35); \n      }\n      ul.ports li.route3  input, \n      ul.ports li.route3  button  { \n        background-color: hsla( 60, 98%, 20%, 0.35); \n      }\n      ul.ports li.route4  input, \n      ul.ports li.route4  button  { \n        background-color: hsla(135, 98%, 20%, 0.35); \n      }\n      ul.ports li.route5  input, \n      ul.ports li.route5  button  { \n        background-color: hsla(160, 98%, 20%, 0.35); \n      }\n      ul.ports li.route6  input, \n      ul.ports li.route6  button  { \n        background-color: hsla(185, 98%, 20%, 0.35); \n      }\n      ul.ports li.route7  input, \n      ul.ports li.route7  button  { \n        background-color: hsla(210, 98%, 20%, 0.35); \n      }\n      ul.ports li.route8  input, \n      ul.ports li.route8  button  { \n        background-color: hsla(285, 98%, 20%, 0.35); \n      }\n      ul.ports li.route9  input, \n      ul.ports li.route9  button  { \n        background-color: hsla(310, 98%, 20%, 0.35); \n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button  { \n        background-color: hsla(335, 98%, 20%, 0.35); \n      }\n\n\n      ul.ports li.error input {\n        background-color: rgb(121, 18, 18);\n        border: 1px solid red;\n      }\n      \n      \n      ul.ports li         label > span { color: hsl(  0,  0%, 75%);}  \n      ul.ports li.route0  label > span { color: hsl(  0,  0%,100%);}  \n      ul.ports li.route1  label > span { color: hsl(  0, 98%, 46%);}\n      ul.ports li.route2  label > span { color: hsl( 35, 98%, 46%);}\n      ul.ports li.route3  label > span { color: hsl( 60, 98%, 46%);}\n      ul.ports li.route4  label > span { color: hsl(135, 98%, 46%);}\n      ul.ports li.route5  label > span { color: hsl(160, 98%, 46%);}\n      ul.ports li.route6  label > span { color: hsl(185, 98%, 46%);}\n      ul.ports li.route7  label > span { color: hsl(210, 98%, 46%);}\n      ul.ports li.route8  label > span { color: hsl(285, 98%, 46%);}\n      ul.ports li.route9  label > span { color: hsl(310, 98%, 46%);}\n      ul.ports li.route10 label > span { color: hsl(335, 98%, 46%);}\n      \n      \n\n      ul.ports  li        input, \n      ul.ports  li        button {\n        border-left: 1px solid hsla(  0,  0%, 75%, 0.5); \n      }\n      ul.ports  li.route0 input, \n      ul.ports  li.route0 button {\n        border-left: 1px solid hsla(  0,  0%,100%, 0.5); \n      }\n      ul.ports  li.route1 input, \n      ul.ports  li.route1 button {\n        border-left: 1px solid hsla(  0, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route2 input, \n      ul.ports  li.route2 button {\n        border-left: 1px solid hsla( 35, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route3 input, \n      ul.ports  li.route3 button {\n        border-left: 1px solid hsla( 60, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route4 input, \n      ul.ports  li.route4 button {\n        border-left: 1px solid hsla(135, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route5 input, \n      ul.ports  li.route5 button {\n        border-left: 1px solid hsla(160, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route6 input, \n      ul.ports  li.route6 button {\n        border-left: 1px solid hsla(185, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route7 input, \n      ul.ports  li.route7 button {\n        border-left: 1px solid hsla(210, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route8 input, \n      ul.ports  li.route8 button {\n        border-left: 1px solid hsla(285, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route9 input, \n      ul.ports  li.route9 button {\n        border-left: 1px solid hsla(310, 98%, 46%, 0.5);\n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button {\n        border-left: 1px solid hsla(335, 98%, 46%, 0.5);\n      }\n      \n      number-scrubber,\n      ul.ports li label span:before {\n        display: inline;\n        line-height: 36px;\n        font-size: 10px;\n        float: right;\n        position: absolute;\n        left: 86px;\n        text-transform: uppercase;\n        opacity: 0.5;\n        width: 36px;\n        text-align: center;      \n      }\n\n      number-scrubber {\n        z-index: 5;\n        height: 36px;\n      }\n      \n      ul.ports li.port-type-color label span:before,\n      ul.ports li.port-type-int label span:before,\n      ul.ports li.port-type-number label span:before {\n        content: '#';\n      }\n      ul.ports li.port-type-array label span:before {\n        content: '[]';\n      }\n      ul.ports li.port-type-object label span:before {\n        content: '{}';\n      }\n      ul.ports li.port-type-string label span:before {\n        content: '\"';\n      }\n      ul.ports li.port-type-all label span:before {\n        content: '*';\n      }\n\n      section.errors header {\n        display: flex;\n        justify-content: space-between;\n      }\n      section.errors header h2 {\n        font-size: 10px;\n        font-weight: normal;\n        line-height: 36px;\n        margin-bottom: 0px;\n        padding-bottom: 0px;\n        position: static;\n        text-align: left;\n        color: var(--noflo-ui-text);\n      }\n      section.errors ul.toolbar {\n        display: inline-block;\n      }\n\n      ul#errorEvents {\n        max-height: 140px;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        clear: left;\n      }\n      ul#errorEvents li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-bottom: 0px;\n        color: hsl(185,100%,75%);\n        max-height: 56px;\n        overflow: hidden;\n        margin-bottom: 2px;\n        padding-bottom: 2px;\n        border-bottom: 1px solid hsla(190, 30%, 2%, 0.4);\n      }\n    </style>\n    <header>\n      <input type=\"text\" on-keydown=\"checkUpdateLabel\" on-blur=\"updateLabel\" class=\"editable-title\" value=\"{{label}}\">\n      <template is=\"dom-if\" if=\"{{_computeIf(node)}}\">\n        <h2>{{node.component}}</h2>\n      </template>\n    </header>\n    <ul class=\"ports\">\n      <template is=\"dom-repeat\" items=\"{{inports}}\" as=\"port\">\n        <li class\\$=\"{{_computeClass(port)}}\">\n          <label><span title=\"{{port.name}}\">{{port.label}}</span>\n\n            <template is=\"dom-if\" if=\"{{_computeIf2(port)}}\">\n              <button data-name\\$=\"{{port.name}}\" on-click=\"sendBang\">\n                <noflo-icon icon=\"bolt\"></noflo-icon>\n              </button>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf3(port)}}\">\n              <input type=\"checkbox\" data-name\\$=\"{{port.name}}\" checked=\"{{port.value}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{port.values}}\">\n              <select data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" value=\"{{port.value::input}}\" data-type\\$=\"{{port.type}}\">\n                <option></option>\n                <template is=\"dom-repeat\" items=\"{{port.values}}\" as=\"value\">\n                  <option value=\"[[value]]\" selected\\$=\"{{_computeSelected(port, value)}}\">{{value}}</option>\n                </template>\n              </select>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf4(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"1\" data-type=\"int\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"int\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf5(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"0.01\" data-type=\"number\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"number\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf6(port)}}\">\n              <input type=\"{{port.inputType}}\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" autocapitalize=\"off\" autocorrect=\"off\" on-keydown=\"checkEnter\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf7(port)}}\">\n              <input type=\"text\" data-name\\$=\"{{port.name}}\" data-type=\"string\" on-change=\"updateValue\">\n              <input type=\"file\" data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf8(port)}}\">\n              <button class=\"remove-value\" on-click=\"removeValue\" data-port\\$=\"{{port.name}}\" title=\"Clear data\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n            </template>\n\n          </label>\n          <template is=\"dom-if\" if=\"{{port.description}}\">\n          <p>{{port.description}}</p>\n          </template>\n        </li>\n      </template>\n    </ul>\n    <template is=\"dom-if\" if=\"[[errorLog.length]]\">\n    <section class=\"errors\">\n      <header>\n        <h2>Errors</h2>\n        <ul class=\"toolbar\">\n          <li>\n            <button id=\"clear\" on-click=\"clearErrors\" class=\"blue-button\" title=\"Clear Error Log\">\n              <noflo-icon icon=\"ban\"></noflo-icon>\n            </button>\n           </li>\n        </ul>\n      </header>\n      <ul id=\"errorEvents\">\n        <template is=\"dom-repeat\" items=\"[[errorLog]]\" as=\"event\">\n          <li>{{ event.payload.error }}</li>\n        </template>\n      </ul>\n    </section></template>\n`,\n\n  is: 'noflo-node-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    errorLog: {\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    inports: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    label: {\n      type: String,\n      value: '',\n    },\n    lastErrorLog: {\n      type: Number,\n      value: 0,\n    },\n    node: {\n      value: null,\n      notify: true,\n      observer: 'nodeChanged',\n    },\n    scrubbing: {\n      type: Boolean,\n      value: false,\n    },\n    showErrorLogs: {\n      type: Number,\n      value: 20,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n  },\n\n  nodeChanged() {\n    if (!this.node) {\n      return;\n    }\n    this.updatePorts();\n    this.label = this.node.metadata.label;\n  },\n\n  componentChanged() {\n    if (!this.component) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  checkUpdateLabel(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateLabel(event);\n    }\n  },\n\n  updateLabel(event) {\n    // Check if we need to make change\n    const label = event.currentTarget.value;\n    if (label === this.node.metadata.label) {\n      return;\n    }\n    this.graph.startTransaction('rename');\n    // Change id\n    let id = label;\n    if (id !== this.node.id) {\n      // Ensure unique\n      while (this.graph.getNode(id)) {\n        let num = 60466176;\n        // 36^5\n        num = Math.floor(Math.random() * num);\n        id = `${label}_${num.toString(36)}`;\n      }\n      this.graph.renameNode(this.node.id, id);\n    }\n    // Change label\n    this.graph.setNodeMetadata(id, { label });\n    this.graph.endTransaction('rename');\n  },\n\n  getPortValue(port) {\n    let value;\n    this.graph.initializers.forEach((iip) => {\n      if (iip.to.node === this.node.id && iip.to.port === port) {\n        value = iip.from.data;\n      }\n    });\n    return value;\n  },\n\n  getPortConnection(port) {\n    let connected = false;\n    let route = 'X';\n    Object.keys(this.graph.inports).forEach((name) => {\n      const inport = this.graph.inports[name];\n      if (inport.process === this.node.id && inport.port === port) {\n        connected = true;\n        route = 2;\n      }\n    });\n    this.graph.edges.forEach((edge) => {\n      if (edge.to.node === this.node.id && edge.to.port === port) {\n        connected = true;\n        route = edge.metadata.route || 0;\n      }\n    });\n    return {\n      connected,\n      route,\n    };\n  },\n\n  portToInput(port) {\n    const value = this.getPortValue(port.name);\n    const connection = this.getPortConnection(port.name);\n    const portDef = {\n      name: port.name,\n      label: port.name.replace(/(.*)\\/(.*)(_.*)\\.(.*)/, '$2.$4'),\n      class: '',\n      type: port.type,\n      description: port.description,\n      inputType: port.type,\n      value,\n      values: port.values,\n      route: connection.route,\n    };\n    switch (port.type) {\n      case 'object':\n      case 'array':\n        portDef.value = JSON.stringify(value);\n        portDef.inputType = 'text';\n        break;\n      case 'int':\n        portDef.inputType = 'number';\n        break;\n      case 'all':\n      default:\n        portDef.inputType = 'text';\n        break;\n    }\n    return portDef;\n  },\n\n  inputToPort(input) {\n    const dataType = input.getAttribute('data-type');\n    switch (dataType) {\n      case 'object':\n      case 'array':\n        try {\n          return JSON.parse(input.value);\n        } catch (e) {\n          return input.value;\n        }\n      case 'boolean':\n        return input.checked;\n      case 'number':\n        return parseFloat(input.value);\n      case 'int':\n        return parseInt(input.value, 10);\n      case 'date':\n        return new Date(input.value);\n      case 'uri':\n        return (callback) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            callback(reader.result);\n          };\n          reader.readAsDataURL(input.files[0]);\n        };\n      default:\n        return input.value;\n    }\n  },\n\n  updatePorts() {\n    this.set('inports', []);\n    if (!this.component || !this.graph) {\n      return;\n    }\n    this.component.inports.forEach((port) => {\n      const portDef = this.portToInput(port);\n      this.push('inports', portDef);\n    });\n  },\n\n  checkEnter(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      this.updateValue(event);\n    }\n  },\n\n  updateValue(event) {\n    event.preventDefault();\n    const value = this.inputToPort(event.currentTarget);\n    const name = event.currentTarget.getAttribute('data-name');\n    let port;\n    this.inports.forEach((p) => {\n      if (p.name === name) {\n        port = p;\n      }\n    });\n    if (port.type !== 'string' && event.currentTarget.value === '') {\n      // Empty string should remove number, object, array IIPs\n      this.removeValue(event);\n      return;\n    }\n    const validatePortValue = (type, val) => {\n      switch (type) {\n        case 'number':\n        case 'int':\n          return val !== '' && !Number.isNaN(val);\n        case 'object':\n          return val instanceof Object;\n        case 'array':\n          return val instanceof Array;\n        case 'date':\n          return val instanceof Date;\n        default:\n          return true;\n      }\n    };\n    const setPortValue = () => {\n      if (!this.scrubbing) {\n        this.graph.startTransaction('iipchange');\n      }\n      this.graph.removeInitial(this.node.id, name);\n      this.graph.addInitial(value, this.node.id, name);\n      if (!this.scrubbing) {\n        this.graph.endTransaction('iipchange');\n        // Force Polymer to update view\n        this.updatePorts();\n      }\n    };\n    if (validatePortValue(port.type, value)) {\n      if (typeof value === 'function') {\n        // async callback\n        value(setPortValue);\n      } else {\n        setPortValue(value);\n      }\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    } else {\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.add('error');\n    }\n  },\n\n  scrubStart(event) {\n    if (event.currentTarget.value === null) {\n      // eslint-disable-next-line no-param-reassign\n      event.currentTarget.value = 0;\n    }\n  },\n\n  // This need to work with the journal\n  // this.scrubbing = true;\n  // this.graph.startTransaction('iipscrub');\n  scrubEnd() {\n  },\n\n  // this.graph.endTransaction('iipscrub');\n  // this.scrubbing = false;\n  removeValue(event) {\n    event.preventDefault();\n    let name = event.currentTarget.getAttribute('data-port');\n    if (!name) {\n      name = event.currentTarget.getAttribute('data-name');\n    }\n    this.graph.removeInitial(this.node.id, name);\n    PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    this.updatePorts();\n  },\n\n  sendBang(event) {\n    event.preventDefault();\n    const name = event.currentTarget.getAttribute('data-name');\n    this.graph.startTransaction('bang');\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.addInitial(true, this.node.id, name);\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.endTransaction('bang');\n  },\n\n  clearErrors() {\n    this.fire('clear:runtimeevents', {\n      id: this.node.id,\n      type: 'processerror',\n    });\n  },\n\n  _computeIf(node) {\n    if (!node) {\n      return true;\n    }\n    return node.label !== node.component;\n  },\n\n  _computeClass(port) {\n    return `route route${port.route} ${port.class} port-type-${port.type}`;\n  },\n\n  _computeIf2(port) {\n    return port.type === 'bang';\n  },\n\n  _computeIf3(port) {\n    return port.type === 'boolean';\n  },\n\n  _computeIf4(port) {\n    return port.type === 'int' && !port.values;\n  },\n\n  _computeIf5(port) {\n    return port.type === 'number' && !port.values;\n  },\n\n  _computeIf6(port) {\n    return port.type !== 'bang' && port.type !== 'boolean' && port.type !== 'int' && port.type !== 'number' && port.type !== 'uri' && !port.values;\n  },\n\n  _computeIf7(port) {\n    return port.type === 'uri';\n  },\n\n  _computeIf8(port) {\n    return port.type !== 'bang' && port.value !== undefined;\n  },\n\n  _computeSelected(port, value) {\n    return port.value === value;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      :host {\n        display: block;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, hsla(0, 0%, 0%, 0) 1px);\n        background-size: calc(100% - 1px) 100%;\n        background-position: 0px;\n      }\n      h1 {\n        font-size:15px;\n      }\n      ul.toolbar2right {\n        right: 0px !important;\n      }\n      ul.routes {\n        margin: 0;\n        margin-left: 0px;\n        margin-right: 0px;\n        padding-top: 10px;\n      }\n      ul.routes li {\n        display: inline-block;\n        position: relative;\n        float: left;\n        margin: 0px;\n        height: 26px;\n      }\n      ul.routes li button:hover {\n        opacity: 1;\n      }\n      ul.routes li button {\n        opacity: 0.7;\n        display: block;\n        padding: 0px;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n        -webkit-box-sizing: border-box;\n           -mox-box-sizing: border-box;\n                box-sizing: border-box;\n        border: none;\n      }\n\n      .routes button {\n        width: 25px !important;\n        height: 20px !important;\n        background-color: hsla(  0, 98%, 100%, .8); \n        border: 1px solid hsl(  0, 98%, 46%);\n      }\n      .routes button.route0  { \n        background-color: hsla(  0, 98%, 100%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route1  { \n        background-color: hsla(  0, 98%, 46%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route2  { \n        background-color: hsla( 35, 98%, 46%, .8); \n        border-color:      hsl( 35, 98%, 46%); \n      }\n      .routes button.route3  { \n        background-color: hsla( 60, 98%, 46%, .8); \n        border-color:      hsl( 60, 98%, 46%); \n      }\n      .routes button.route4  { \n        background-color: hsla(135, 98%, 46%, .8); \n        border-color:      hsl(135, 98%, 46%); \n      }\n      .routes button.route5  { \n        background-color: hsla(160, 98%, 46%, .8); \n        border-color:      hsl(160, 98%, 46%);\n      }\n      .routes button.route6  { \n        background-color: hsla(185, 98%, 46%, .8); \n        border-color:      hsl(185, 98%, 46%);\n      }\n      .routes button.route7  { \n        background-color: hsla(210, 98%, 46%, .8); \n        border-color:      hsl(210, 98%, 46%);\n      }\n      .routes button.route8  { \n        background-color: hsla(285, 98%, 46%, .8); \n        border-color:      hsl(285, 98%, 46%);\n      }\n      .routes button.route9  { \n        background-color: hsla(310, 98%, 46%, .8); \n        border-color:      hsl(310, 98%, 46%);\n      }\n      .routes button.route10 { \n        background-color: hsla(335, 98%, 46%, .8); \n        border-color:      hsl(335, 98%, 46%);\n      }\n      \n      .routes  button.route0:hover  { background-color: hsla(  0, 98%, 100%, 1); }\n      .routes  button.route1:hover  { background-color: hsla(  0, 98%, 46%, 1); }\n      .routes  button.route2:hover  { background-color: hsla( 35, 98%, 46%, 1); }\n      .routes  button.route3:hover  { background-color: hsla( 60, 98%, 46%, 1); }\n      .routes  button.route4:hover  { background-color: hsla(135, 98%, 46%, 1); }\n      .routes  button.route5:hover  { background-color: hsla(160, 98%, 46%, 1); }\n      .routes  button.route6:hover  { background-color: hsla(185, 98%, 46%, 1); }\n      .routes  button.route7:hover  { background-color: hsla(210, 98%, 46%, 1); }\n      .routes  button.route8:hover  { background-color: hsla(285, 98%, 46%, 1); }\n      .routes  button.route9:hover  { background-color: hsla(310, 98%, 46%, 1); }\n      .routes button.route10:hover  { background-color: hsla(335, 98%, 46%, 1); }\n    </style>\n    <header>\n      <h1 slot=\"header\" class=\"clear\" on-click=\"clear\"><span>{{ edges.length}}</span> <template is=\"dom-if\" if=\"{{_computeIf(edges)}}\">Edges</template><template is=\"dom-if\" if=\"{{_computeIf2(edges)}}\">Edge</template></h1>\n    </header>\n    <ul class=\"toolbar toolbar2right\">\n      <template is=\"dom-if\" if=\"{{secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setUnsecure\" title=\"Set as visible\">\n            <noflo-icon icon=\"lock\"></noflo-icon>&nbsp;Secure\n          </button>\n        </li>\n      </template>\n      <template is=\"dom-if\" if=\"{{!secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setSecure\" title=\"Set as hidden\">\n            <noflo-icon icon=\"unlock\"></noflo-icon>&nbsp;Visible\n          </button>\n        </li>\n      </template>\n    </ul>\n    <ul class=\"routes\">\n      <template is=\"dom-repeat\" items=\"{{routes}}\" as=\"route\">\n        <li><button name=\"{{route}}\" on-click=\"setRoute\" class\\$=\"{{_computeClass(route)}}\"></button></li>\n      </template>\n    </ul>    \n`,\n\n  is: 'noflo-edge-menu',\n\n  properties: {\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'edgesChanged',\n    },\n    graph: { value: null },\n    routes: {\n      type: Array,\n      value() {\n        return [\n          0,\n          1,\n          2,\n          3,\n          4,\n          5,\n          6,\n          7,\n          9,\n          10,\n        ];\n      },\n    },\n    secure: {\n      type: Boolean,\n      value: false,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n    PolymerDom(this).classList.add('sticky-head');\n  },\n\n  edgesChanged() {\n    if (!this.edges.length) {\n      return;\n    }\n    this.secure = true;\n    for (let i = 0; i < this.edges.length; i += 1) {\n      if (!this.edges[i].metadata.secure) {\n        this.secure = false;\n        return;\n      }\n    }\n  },\n\n  clear(event) {\n    event.preventDefault();\n    let edge;\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n  },\n\n  remove(event) {\n    event.preventDefault();\n    while (this.edges.length) {\n      const edge = this.pop('edges');\n      if (PolymerDom(edge).parentNode) {\n        PolymerDom(PolymerDom(edge).parentNode).removeChild(edge);\n      }\n    }\n  },\n\n  setRoute(event) {\n    event.preventDefault();\n    const route = parseInt(event.currentTarget.getAttribute('name'), 10);\n    this.graph.startTransaction('changeroute');\n    this.edges.forEach((edge) => {\n      this.graph.setEdgeMetadata(\n        edge.from.node,\n        edge.from.port,\n        edge.to.node,\n        edge.to.port,\n        {\n          route,\n        },\n      );\n    });\n    this.graph.endTransaction('changeroute');\n  },\n\n  setSecure(event) {\n    event.preventDefault();\n    this.toggleSecure(true);\n  },\n\n  setUnsecure(event) {\n    event.preventDefault();\n    this.toggleSecure(false);\n  },\n\n  toggleSecure(secure) {\n    this.graph.startTransaction('changesecure');\n    this.edges.forEach((edge) => {\n      const meta = edge.metadata;\n      meta.secure = secure;\n      this.graph.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, meta);\n    });\n    this.graph.endTransaction('changesecure');\n    this.secure = secure;\n  },\n\n  _computeIf(edges) {\n    return edges.length > 1;\n  },\n\n  _computeIf2(edges) {\n    return edges.length === 1;\n  },\n\n  _computeClass(route) {\n    return `route${route}`;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport RuntimeEvents from '../src/components/RuntimeEvents';\nimport './noflo-node-inspector';\nimport './noflo-edge-menu';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-left: 7px;\n        padding-right: 7px;\n        bottom: 0px;\n        border-top-width: 1px;\n        height: 100vh;\n        padding-top: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f16c';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        top: 0px;\n        height: 36px;\n        line-height: 36px;\n        left: 50%;\n        left: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: n-resize;\n      }\n      the-panel#fixed main {\n        height: 288px;\n      }\n      the-panel#fixed main div.cell {\n      }\n      the-panel#fixed main .react-fluid-table .cell,\n      the-panel#fixed main .react-fluid-table .header-cell {\n        box-sizing: border-box;\n        display: flex;\n        padding: 7px;\n      }\n      the-panel#fixed main .react-fluid-table-container {\n        will-change: height;\n      }\n      the-panel#fixed main .sticky-header {\n        position: sticky;\n        top: 0;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n      }\n      the-panel#fixed main .row-wrapper {\n        display: nline-block;\n      }\n      the-panel#fixed main .react-fluid-table-header {\n        display: flex;\n        border-bottom: 1px solid var(--noflo-ui-border);\n        background-color: var(--noflo-ui-background);\n        z-index: 2;\n      }\n      the-panel#fixed main .header-cell {\n        align-items: baseline;\n      }\n      the-panel#fixed main .header-cell-text {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 10px;\n        font-weight: bold;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .header-cell-arrow {\n        width: 0;\n        height: 0;\n        margin-left: 4px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n      }\n      the-panel#fixed main .header-cell-arrow.asc {\n      }\n      the-panel#fixed main .header-cell-arrow.desc {\n      }\n      the-panel#fixed main .react-fluid-table-row {\n      }\n      the-panel#fixed main .react-fluid-table-row .hidden {\n        display: none;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details {\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background);\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        /* This is a workaround for react-fluid-table not recalculating on expand, most likely due to Shadow DOM */\n        position: absolute;\n        z-index: 1;\n        right: 7px;\n        width: max(60%, 288px);\n        height: 144px;\n        overflow-y: auto;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dl {\n        margin: 0px;\n        padding: 7px;\n        font-size: 10px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dt {\n        font-weight: bold;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd {\n        margin: 0px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd.packet-data {\n        white-space: pre-wrap;\n      }\n      the-panel#fixed main .row-container {\n        display: flex;\n      }\n      the-panel#fixed main .cell {\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text);\n      }\n      the-panel#fixed main .cell .expander {\n        cursor: pointer;\n        height: 1em;\n        width: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge {\n        font-weight: bold;\n      }\n      the-panel#fixed main .cell .edge .subgraph {\n        margin-right: 7px;\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .edge .source span {\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .target span {\n        margin-left: 7px;\n      }\n      the-panel#fixed main .cell .edge .port-id {\n        text-transform: uppercase;\n      }\n      the-panel#fixed main .cell .edge .arrow {\n        margin-left: 7px;\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .connection {\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge .route0 { color: #fff; }\n      the-panel#fixed main .cell .edge .route1 { color: hsl(  0,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route2 { color: hsl( 35,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route3 { color: hsl( 60,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route4 { color: hsl(135,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route5 { color: hsl(160,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route6 { color: hsl(185,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route7 { color: hsl(210,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route8 { color: hsl(285,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route9 { color: hsl(310,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route10 { color: hsl(335,  98%, 46%); }\n    </style>\n    <the-panel id=\"fixed\" edge=\"bottom\" size=\"324\" handle=\"36\" open={{showPackets}}>\n      <main id=\"fixedmain\">\n      </main>\n    </the-panel>\n  `,\n  is: 'noflo-packets',\n  properties: {\n    currentgraph: { value: null },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: { value: null },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    packets: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'packetsChanged',\n    },\n    nodeInspectors: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'nodesChanged',\n    },\n    panel: { value: null },\n    showPackets: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n    readonly: { notify: true },\n  },\n  attached() {\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    this.frameRequest = null;\n  },\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n  edgesChanged(newEdges, oldEdges) {\n    if (this.edges.length) {\n      this.showEdgeCards();\n    } else {\n      this.hideEdgeCards();\n    }\n    this.updatePacketInspector();\n    if (newEdges.length && !oldEdges.length && this.packets.length) {\n      // Show packet inspector when selecting an edge\n      this.showPackets = true;\n    }\n  },\n  widthChanged() {\n    this.updatePacketInspector();\n  },\n  eventsChanged() {\n    // Clear previous state\n    if (this.editor) {\n      this.editor.clearErrorNodes();\n    }\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      this.nodeInspectors[id].inspector.errorLog = [];\n    });\n\n    if (!this.events) {\n      return;\n    }\n    this.events.forEach((event) => {\n      if (event.type !== 'processerror' || !event.payload.id) {\n        return;\n      }\n      // TODO: Check that process is in current graph\n      if (this.editor) {\n        this.editor.addErrorNode(event.payload.id);\n      }\n      if (this.nodeInspectors[event.payload.id]) {\n        this.nodeInspectors[event.payload.id].inspector.push('errorLog', event);\n      }\n    });\n  },\n  genId(source, target) {\n    let fromStr;\n    if (source) {\n      fromStr = `${source.node} ${source.port.toUpperCase()}`;\n    } else {\n      fromStr = 'DATA';\n    }\n    const toStr = `${target.port.toUpperCase()} ${target.node}`;\n    return `${fromStr} -> ${toStr}`;\n  },\n  genEdgeId(edge) {\n    return this.genId(edge.from, edge.to);\n  },\n  showEdgeCards() {\n    if (this.edgeMenu) {\n      if (this.readonly) {\n        PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n        this.edgeMenu = null;\n      } else {\n        this.set('edgeMenu.dialog.edges', this.edges);\n      }\n    } else if (!this.readonly) {\n      const menu = document.createElement('noflo-edge-menu');\n      menu.edges = this.edges;\n      menu.graph = this.currentgraph;\n      this.edgeMenu = document.createElement('the-card');\n      this.set('edgeMenu.type', 'edge-menu');\n      this.set('edgeMenu.dialog', menu);\n      PolymerDom(this.edgeMenu).appendChild(menu);\n      this.edgeMenu.addTo(this.panel);\n    }\n  },\n  packetsChanged(newPackets, oldPackets) {\n    this.updatePacketInspector();\n    if (newPackets.length && !oldPackets.length) {\n      // Show packet inspector when first packets arrive\n      this.showPackets = true;\n    }\n    if (!newPackets.length && oldPackets.length) {\n      this.showPackets = false;\n    }\n  },\n  updatePacketInspector() {\n    if (this.frameRequest) {\n      return;\n    }\n    this.frameRequest = requestAnimationFrame(() => {\n      this.frameRequest = null;\n      const edgeIds = this.currentgraph\n        ? this.currentgraph.edges.map((e) => this.genEdgeId(e)) : [];\n      const selectedEdgeIds = this.edges.map((e) => this.genEdgeId(e));\n      const packets = this.packets\n        .map((p, idx) => {\n          const packetId = this.genId(p.src, p.tgt);\n          let packetEdge;\n          if (this.currentgraph && edgeIds.indexOf(packetId) !== -1) {\n            packetEdge = this.currentgraph.edges[edgeIds.indexOf(packetId)];\n          }\n          return {\n            ...p,\n            rowId: `${idx + 1}`,\n            id: packetId,\n            edge: packetEdge,\n          };\n        })\n        .filter((p) => {\n          if (!selectedEdgeIds.length) {\n            // Show all packets when no edges are selected\n            return true;\n          }\n          return (selectedEdgeIds.indexOf(p.id) !== -1);\n        });\n      const container = this.shadowRoot.getElementById('fixedmain');\n      ReactDOM.render(RuntimeEvents({\n        packets,\n        width: container.offsetWidth, // TODO: Update on resize\n      }), container);\n    });\n  },\n  hideEdgeCards() {\n    if (this.edgeMenu) {\n      PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n      this.edgeMenu = null;\n    }\n  },\n  nodesChanged() {\n    if (this.nodes.length) {\n      this.showNodeCards();\n    } else {\n      this.hideNodeCards();\n    }\n  },\n  showNodeCards() {\n    this.nodes.forEach((node) => {\n      const { id } = node;\n      if (this.nodeInspectors[id]) {\n        return;\n      }\n      if (this.readonly) {\n        return;\n      }\n      const inspector = document.createElement('noflo-node-inspector');\n      inspector.node = node;\n      inspector.component = this.editor.getComponent(node.component);\n      inspector.graph = this.currentgraph;\n      if (this.events) {\n        inspector.errorLog = this.events.filter((event) => {\n          if (event.type !== 'processerror') {\n            return false;\n          }\n          if (event.payload.id !== id) {\n            return false;\n          }\n          return true;\n        });\n      }\n      this.nodeInspectors[id] = document.createElement('the-card');\n      this.nodeInspectors[id].type = 'node-inspector';\n      this.nodeInspectors[id].inspector = inspector;\n      PolymerDom(this.nodeInspectors[id]).appendChild(inspector);\n      this.nodeInspectors[id].addTo(this.panel);\n    });\n    let found;\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      found = false;\n      this.nodes.forEach((node) => {\n        if (node.id === id) {\n          found = true;\n        }\n      });\n      if (!found) {\n        PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n          .removeChild(this.nodeInspectors[id]);\n        delete this.nodeInspectors[id];\n      }\n    });\n  },\n  hideNodeCards() {\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n        .removeChild(this.nodeInspectors[id]);\n      delete this.nodeInspectors[id];\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        text-align: center;\n        background-color: hsl(35, 98%, 46%);\n        color: white;\n        border-bottom: 1px black solid;\n        padding: 18px;\n      }\n      :host(.error) {\n        background-color: hsl(0, 98%, 46%);\n      }\n      a {\n        color: hsl(0, 98%, 46%);\n        background-color: white;\n        display: inline-block;\n        padding: 9px;\n        text-decoration: none;\n        font-size: 12px;\n        border-radius: 3px;\n      }\n\n      /* /deep/ animations don't work: https://github.com/Polymer/polymer/issues/141#issuecomment-31887427 */\n      /* only animate when on-screen */\n      .fa-spin {\n        -webkit-animation: none !important;\n        animation: none !important;\n      }\n      :host(.show) .fa-spin {\n        -webkit-animation: fa-spin 2s infinite linear !important;\n        animation: fa-spin 2s infinite linear !important;\n      }\n      @-webkit-keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n      @keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <noflo-icon icon=\"warning\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{_computeIf(isError, offerHTTPS)}}\">\n      <noflo-icon icon=\"spinner\" class=\"fa-spin\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{offerHTTPS}}\">\n      <noflo-icon icon=\"lock\"></noflo-icon>\n      This app is available securely at <a href=\"https://app.flowhub.io/\">https://app.flowhub.io/</a> - <a href=\"https://docs.flowhub.io/article/75-security-with-https-and-wss\">about</a>\n    </template>\n    <slot>\n    <span>{{message}}</span>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <a href=\"#\" class=\"button\">go home</a>\n    </template>\n  </slot>\n`,\n\n  is: 'noflo-alert',\n\n  properties: {\n    isError: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'isErrorChanged',\n    },\n    message: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    offerHTTPS: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n  },\n\n  isErrorChanged() {\n    if (this.isError) {\n      PolymerDom(this).classList.add('error');\n    } else {\n      PolymerDom(this).classList.remove('error');\n    }\n  },\n\n  _computeIf(isError, offerHTTPS) {\n    return !isError && !offerHTTPS;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport projects from '../src/projects';\nimport './noflo-polymer';\nimport './noflo-main';\nimport './the-graph-editor';\nimport './noflo-library';\nimport './noflo-context';\nimport './noflo-runtime';\nimport './noflo-journal';\nimport './noflo-component-editor';\nimport './noflo-search';\nimport './noflo-project';\nimport './noflo-packets';\nimport './noflo-alert';\n\nPolymer({\n  _template: html`\n    <style>\n      /*\n       * z-indexes:\n       *\n       * Modal dialogs: 5\n       * Main screen: 4\n       * Panels: 3\n       * Context cards & runtime controls: 2\n       * Workspace chrome: 1\n       * Workspace: 0\n       */\n      :host {\n        display: block;\n      }\n\n      noflo-main {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        z-index: 4;\n      }\n      the-graph-editor {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n      }\n      noflo-component-editor {\n        position: fixed;\n        top: 0;\n        left: 36px;\n        height: 100vh;\n        right: 36px;\n        z-index: 0;\n      }\n      noflo-search {\n        position: fixed;\n        top: 0px;\n        left: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 2;\n      }\n      noflo-runtime {\n        position: fixed;\n        top: 0px;\n        right: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 3;\n      }\n      noflo-journal {\n        position: fixed;\n        bottom: 0px;\n        right: 36px;\n        width: 288px;\n        z-index: 3;\n      }\n\n      #alert {\n        box-sizing: border-box;\n        position: fixed;\n        top: -144px;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        max-height: 144px;\n        overflow: hidden;\n        transition: top 0.3s ease-in-out;\n      }\n      #alert.show {\n        top: 0;\n      }\n      #asproject::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsl(185, 98%, 46%);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n      }\n      #asproject:hover {\n        background-color: black;\n        color: hsl(185, 98%, 46%);\n      }\n      #asproject {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        position: fixed;\n        box-sizing: border-box;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 9;\n        background-color: hsla(185, 98%, 46%, .8);\n        border: 1px solid hsl(185, 98%, 46%);\n        color: black;\n        top: 36px;\n        height: 36px;\n        border-radius: 3px;\n        padding: 8px;\n        cursor: pointer;\n        transition: color 0.3s ease, background-color 0.3s ease, opacity 5.0s ease-in;\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <noflo-main id=\"main\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" projects=\"{{ctx.projects}}\" user=\"{{ctx.user}}\" remote-projects=\"{{ctx.remoteProjects}}\"></noflo-main>\n    <the-graph-editor id=\"grapheditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" graph=\"{{ctx.graph}}\" icons=\"[[ctx.icons]]\"></the-graph-editor>\n    <noflo-library id=\"library\" search=\"{{ctx.search}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\"></noflo-library>\n    <noflo-context id=\"context\" nodes=\"{{ctx.nodes}}\" edges=\"{{ctx.edges}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\" runtimes=\"{{ctx.runtimes}}\" events=\"[[ctx.events]]\"></noflo-context>\n    <noflo-runtime id=\"runtime\" runtime=\"{{ctx.runtime}}\" runtimes=\"{{ctx.compatible}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-runtime>\n    <noflo-journal id=\"journal\" db=\"{{ctx.db}}\" theme=\"[[theme]]\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-journal>\n    <noflo-component-editor id=\"componenteditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\"></noflo-component-editor>\n    <noflo-search id=\"search\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" project=\"{{ctx.project}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\" graphs=\"{{ctx.graphs}}\"></noflo-search>\n    <noflo-project id=\"project\" runtimes=\"{{ctx.runtimes}}\" graph=\"{{ctx.graph}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\" runtime=\"{{ctx.runtime}}\"></noflo-project>\n    <noflo-packets id=\"packets\" edges=\"[[ctx.edges]]\" nodes=\"[[ctx.nodes]]\" currentgraph=\"[[ctx.graph]]\" packets=\"[[ctx.packets]]\" events=\"[[ctx.events]]\" width=\"[[width]]\"></noflo-packets>\n    <noflo-alert id=\"alert\" on-click=\"hideAlert\"></noflo-alert>\n`,\n\n  is: 'noflo-ui',\n\n  properties: {\n    ctx: {\n      type: Object,\n      value() {\n        return {\n          db: null,\n          search: null,\n          graph: null,\n          component: null,\n          graphs: [],\n          project: null,\n          projects: [],\n          runtime: null,\n          runtimes: [],\n          compatibleRuntimes: [],\n          packets: [],\n          edges: [],\n          nodes: [],\n        };\n      },\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    dontAutoHideAlert: {\n      type: Boolean,\n      value: false,\n    },\n    height: {\n      value() {\n        return window.innerHeight;\n      },\n      notify: true,\n    },\n    width: {\n      value() {\n        return window.innerWidth;\n      },\n      notify: true,\n    },\n  },\n\n  clearContextFirst: [\n    'graphs',\n    'runtimes',\n    'projects',\n    'edges',\n    'nodes',\n    'compatibleRuntimes',\n    'remoteProjects',\n  ],\n\n  emitEvent(event, payload) {\n    this.fire(event, payload);\n  },\n\n  ready() {\n    this.$.main.addEventListener('userUpdated', (event) => {\n      this.emitEvent('user:update', event.detail);\n    });\n    this.$.main.addEventListener('logout', () => {\n      this.emitEvent('user:logout', true);\n    });\n    this.$.main.addEventListener('login', () => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [],\n      });\n    });\n    this.$.main.addEventListener('relogin', (event) => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [event.detail],\n      });\n    });\n    this.$.main.addEventListener('fetchRemote', (event) => {\n      this.emitEvent('flowhub:projects:fetch', event.detail);\n    });\n    this.$.main.addEventListener('downloadProject', (event) => {\n      this.emitEvent('application:sethash', [\n        'github',\n        event.detail.org,\n        event.detail.repo,\n        'tree',\n        event.detail.branch,\n      ]);\n    });\n    this.$.main.addEventListener('fetchRuntimes', (event) => {\n      this.emitEvent('flowhub:runtimes:fetch', event.detail);\n    });\n    this.$.main.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.main.addEventListener('newruntime', (event) => {\n      this.emitEvent('flowhub:runtimes:register', event.detail);\n    });\n    this.$.main.addEventListener('newproject', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.main.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('openProject', (event) => {\n      this.openProject(event.detail);\n    });\n    this.$.context.addEventListener('newsubgraph', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendSubgraph', {\n        ...event.detail,\n        runtime: this.ctx.runtime.definition.id,\n      });\n    });\n    this.$.context.addEventListener('clear:runtimeevents', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph && !clear.all) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      delete clear.all;\n      this.emitEvent('runtime:clearevents', clear);\n    });\n    this.$.context.addEventListener('clear:runtimepackets', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      this.emitEvent('runtime:clearpackets', clear);\n    });\n    this.$.runtime.addEventListener('switchRuntime', (event) => {\n      this.emitEvent('application:recreatestate', event.detail);\n    });\n    this.$.runtime.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:runtime', event.detail);\n    });\n    this.$.runtime.addEventListener('start', (event) => {\n      this.emitEvent('runtime:start', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('stop', (event) => {\n      this.emitEvent('runtime:stop', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('reconnect', (event) => {\n      this.emitEvent('runtime:reconnect', event.detail);\n    });\n    this.$.grapheditor.addEventListener('edges', (event) => {\n      this.emitEvent('context:edges', event.detail);\n    });\n    this.$.grapheditor.addEventListener('nodes', (event) => {\n      this.emitEvent('context:nodes', event.detail);\n    });\n    this.$.grapheditor.addEventListener('changed', (event) => {\n      const ev = event;\n      ev.detail.properties.changed = true;\n      this.emitEvent('storage:save:graph', ev.detail);\n    });\n    this.$.grapheditor.addEventListener('graphChanges', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraphChanges', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: this.ctx.graph,\n        changes: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.project.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.project.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.project.addEventListener('newcomponent', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n    });\n    this.$.project.addEventListener('newspec', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n    });\n    this.$.project.addEventListener('sync', (event) => {\n      this.emitEvent('github:sync:prepare', event.detail);\n    });\n    this.$.project.addEventListener('syncDecision', (event) => {\n      this.emitEvent('github:sync:synchronize', event.detail);\n    });\n    this.$.project.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.project.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.main.addEventListener('deleteRuntime', (event) => {\n      this.emitEvent('flowhub:runtimes:remove', event.detail);\n    });\n    this.$.main.addEventListener('deleteRepo', (event) => {\n      this.emitEvent('flowhub:projects:remove', event.detail);\n      if (this.ctx.remoteProjects) {\n        // Since remote projects are not updated via normal flow, we can\n        // directly remove it from view\n        this.splice('ctx.remoteProjects', this.ctx.remoteProjects.indexOf(event.detail), 1);\n      }\n    });\n    this.$.componenteditor.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.componenteditor.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: this.ctx.component,\n      });\n      this.triggerTests();\n    });\n    this.$.search.addEventListener('search:library', (event) => {\n      this.emitEvent('context:search_library', event.detail);\n    });\n    this.$.search.addEventListener('search:graph', (event) => {\n      this.emitEvent('context:search_graph', event.detail);\n    });\n    this.$.search.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.library.addEventListener('result', (event) => {\n      this.emitEvent('context:search_library_result', { searchLibraryResult: event.detail });\n    });\n    this.$.search.addEventListener('deleteGraph', (event) => {\n      const { project } = this.ctx;\n      this.emitEvent('storage:delete:graph', event.detail);\n      if (project && project.graphs.indexOf(event.detail) !== -1) {\n        this.splice('ctx.project.graphs', project.graphs.indexOf(event.detail), 1);\n      }\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('deleteComponent', (event) => {\n      const { project } = this.ctx;\n      if (!project || !project.components) {\n        return;\n      }\n      const component = event.detail;\n      const index = project.components.indexOf(component);\n      if (index !== -1) {\n        this.splice('ctx.project.components', index, 1);\n      }\n      this.emitEvent('storage:delete:component', component);\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.triggerTests();\n    });\n    this.set('$.library.editor', this.$.grapheditor);\n    this.set('$.journal.editor', this.$.grapheditor);\n    this.set('$.context.editor', this.$.grapheditor);\n    this.set('$.packets.editor', this.$.grapheditor);\n    this.set('$.search.editor', this.$.grapheditor);\n    this.set('$.runtime.panel', this.$.context.$.fixed);\n    this.set('$.packets.panel', this.$.context.$.contextsection);\n    this.set('$.search.panel', this.$.context.$.contextsection);\n  },\n\n  updated(context) {\n    if (context.state) {\n      switch (context.state) {\n        case 'error': {\n          this.showError(context);\n          break;\n        }\n        case 'ok': {\n          this.hideAlertSoon();\n          break;\n        }\n        case 'loading': {\n          this.showProgress(context);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n\n    // Update local state with incoming data\n    Object.keys(context).forEach((key) => {\n      if (this.clearContextFirst.indexOf(key) !== -1) {\n        // Clear arrays first so Polymer knows there are changes\n        this.set(`ctx.${key}`, context[key].slice(0));\n        if (key === 'projects') {\n          // Projects are complex objects that need a full notify\n          for (let i = 0; i < this.ctx.projects.length; i += 1) {\n            const project = this.ctx.projects[i];\n            this.set(`ctx.projects.${i}`, {});\n            this.set(`ctx.projects.${i}`, project);\n            if (this.ctx.project && this.ctx.project.id === project.id) {\n              this.set('ctx.project', {});\n              this.set('ctx.project', project);\n            }\n          }\n        }\n        return;\n      }\n      this.set(`ctx.${key}`, context[key]);\n    });\n    if (context.user && context.user['flowhub-theme']) {\n      this.theme = context.user['flowhub-theme'];\n    }\n    if (context.searchLibraryResult) {\n      this.$.search.libraryResults(this.ctx.searchLibraryResult);\n    }\n    if (context.searchGraphResult) {\n      this.$.search.graphResults(this.ctx.searchGraphResult);\n    }\n    if (context.syncOperation !== undefined) {\n      this.$.project.confirm(context.syncOperation);\n      return;\n    }\n    if (context.componentLibrary) {\n      Object.keys(this.$.grapheditor.$.graph.library).forEach((libKey) => {\n        delete this.$.grapheditor.$.graph.library[libKey];\n      });\n      context.componentLibrary.forEach((def) => {\n        this.$.grapheditor.registerComponent(def);\n      });\n      this.set('ctx.componentLibrary', null);\n    }\n    if (this.ctx.suites) {\n      this.$.runtime.showTests(this.ctx.suites);\n    }\n    if (this.ctx.state === 'loading') {\n      return;\n    }\n    if (this.ctx.state === 'error') {\n      this.showError(this.ctx);\n      return;\n    }\n    if (context.graphs) {\n      if (context.graphs.length) {\n        const oldGraph = this.ctx.graph;\n        this.set('ctx.graph', context.graphs[context.graphs.length - 1]);\n        if (oldGraph !== this.ctx.graph) {\n          setTimeout(() => {\n            this.emitEvent('context:graph', { graph: this.ctx.graph });\n          }, 1);\n        }\n      } else {\n        this.set('ctx.graph', null);\n      }\n    }\n    if (this.ctx.graph || this.ctx.component) {\n      this.set('$.main.open', false);\n      const isReadOnly = projects.isReadOnly(this.ctx);\n      this.set('$.search.readonly', isReadOnly);\n      this.set('$.grapheditor.readonly', isReadOnly);\n      this.set('$.context.readonly', isReadOnly);\n      this.set('$.packets.readonly', isReadOnly);\n    } else {\n      this.set('$.main.open', true);\n    }\n  },\n\n  showError(context) {\n    if (context.error && context.error.message) {\n      this.set('$.alert.message', context.error.message);\n      this.set('$.alert.isError', true);\n      this.set('$.alert.offerHTTPS', false);\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  showProgress(context) {\n    if (context.state || context.offerHTTPS) {\n      this.set('$.alert.message', context.state || '');\n      this.set('$.alert.isError', false);\n      this.set('$.alert.offerHTTPS', context.offerHTTPS || false);\n      this.dontAutoHideAlert = context.dontAutoHideAlert || false;\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  triggerTests() {\n    if (!this.ctx.runtime) {\n      return;\n    }\n    this.emitEvent('runtime:runTests', {\n      project: this.ctx.project,\n      runtime: this.ctx.runtime.definition,\n    });\n  },\n\n  hideAlert() {\n    PolymerDom(this.$.alert).classList.remove('show');\n  },\n\n  hideAlertSoon() {\n    if (this.dontAutoHideAlert) {\n      return;\n    }\n    if (!PolymerDom(this.$.alert).classList.contains('show')) {\n      return;\n    }\n    window.setTimeout(() => {\n      this.hideAlert();\n    }, 1300);\n  },\n\n  openProject(project) {\n    projects.getProjectHash(project, (err, hash) => {\n      if (err) {\n        return;\n      }\n      this.emitEvent('application:sethash', hash);\n    });\n  },\n\n  themeChanged(newTheme, oldTheme) {\n    if (oldTheme) {\n      PolymerDom(document.body).classList.remove(oldTheme);\n    }\n    PolymerDom(document.body).classList.add(this.theme);\n  },\n});\n","const TheGraph = require('the-graph');\n\nexports.getIcon = (iconName, fallback = '') => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return iconName;\n  }\n  if (!iconMap[iconName]) {\n    if (!fallback) { return fallback; }\n    return iconMap[fallback];\n  }\n  return iconMap[iconName];\n};\n\nexports.getIcons = () => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return {};\n  }\n  return iconMap;\n};\n","const { basename } = require('path');\n\nexports.sortByName = (a, b) => {\n  const aName = exports.unnamespace(exports.getName(a));\n  const bName = exports.unnamespace(exports.getName(b));\n  return aName.localeCompare(bName);\n};\n\nexports.getName = (obj, allowUnknown = true) => {\n  if (!obj) {\n    if (allowUnknown) {\n      return 'Unknown';\n    }\n    return null;\n  }\n  const name = (obj.properties != null ? obj.properties.name : undefined) || obj.name || obj.id;\n  if (!name && allowUnknown) {\n    return 'Unknown';\n  }\n  return name;\n};\n\nexports.unnamespace = (name) => {\n  if (name.indexOf('/') === -1) {\n    return name;\n  }\n  return basename(name);\n};\n\nexports.namespace = (name, namespace) => {\n  if (name.indexOf('/') !== -1) {\n    return name;\n  }\n  return `${namespace}/${name}`;\n};\n\nexports.sortBySeen = (ain, bin) => {\n  const a = ain;\n  const b = bin;\n  if (!a.seen) {\n    return 1;\n  }\n  if (!b.seen) {\n    return -1;\n  }\n  a.seen = typeof a.seen === 'object' ? a.seen : new Date(a.seen);\n  b.seen = typeof b.seen === 'object' ? b.seen : new Date(b.seen);\n  if (a.seen > b.seen) {\n    return -1;\n  }\n  if (b.seen > a.seen) {\n    return 1;\n  }\n  return 0;\n};\n\nexports.addToList = (list, entity, sort = exports.sortByName) => {\n  let found = false;\n  list.forEach((existing) => {\n    if (existing === entity) {\n      // Entity is already in list as-is, skip\n      found = true;\n      return;\n    }\n    const existingId = exports.unnamespace(exports.getName(existing, false));\n    const entityId = exports.unnamespace(exports.getName(entity, false));\n    if (existingId === entityId) {\n      // id match, replace\n      const exists = existing;\n      Object.keys(entity).forEach((key) => {\n        exists[key] = entity[key];\n      });\n      found = true;\n    }\n  });\n  if (found) { return; }\n  list.push(entity);\n  // Sort the list on desired criteria\n  list.sort(sort);\n};\n\nexports.removeFromList = (list, entity) => {\n  const matched = list.find((existing) => {\n    if (existing === entity) {\n      return true;\n    }\n    const existingId = existing.properties ? existing.properties.id : existing.id;\n    const entityId = entity.properties ? entity.properties.id : entity.id;\n    return (existingId === entityId);\n  });\n  if (!matched) {\n    return;\n  }\n  list.splice(list.indexOf(matched), 1);\n};\n"],"sourceRoot":""}