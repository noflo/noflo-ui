{"version":3,"sources":["webpack:///./elements/noflo-card-styles.js","webpack:///./src/runtime.js","webpack:///./elements/codemirror-styles.js","webpack:///./elements/the-card-styles.js","webpack:///./src/JournalStore.js","webpack:///./runtimeinfo/index.js","webpack:///./elements/noflo-modal-styles.js","webpack:///./src/projects.js","webpack:///./src/urls.js","webpack:///./runtimeinfo/msgflo.yaml","webpack:///./runtimeinfo/sndflo.yaml","webpack:///./runtimeinfo/imgflo.yaml","webpack:///./runtimeinfo/noflo.yaml","webpack:///./runtimeinfo/javafbp.yaml","webpack:///./runtimeinfo/microflo.yaml","webpack:///./elements/the-graph-styles.js","webpack:///./elements/noflo-polymer.js","webpack:///./elements/noflo-account-settings.js","webpack:///./elements/noflo-account.js","webpack:///./elements/noflo-icon.js","webpack:///./elements/noflo-type-selector.js","webpack:///./elements/noflo-new-project.js","webpack:///./elements/noflo-new-repository.js","webpack:///./elements/noflo-add-runtime.js","webpack:///./elements/noflo-new-runtime.js","webpack:///./elements/the-graph-thumb.js","webpack:///./elements/noflo-project-card.js","webpack:///./elements/noflo-repo-card.js","webpack:///./elements/noflo-runtime-card.js","webpack:///./elements/noflo-main.js","webpack:///./elements/the-graph.js","webpack:///./elements/the-graph-editor.js","webpack:///./elements/noflo-library.js","webpack:///./elements/noflo-exported-inspector.js","webpack:///./elements/noflo-icon-selector.js","webpack:///./elements/noflo-new-graph.js","webpack:///./elements/noflo-group-inspector.js","webpack:///./elements/the-card-stack.js","webpack:///./elements/the-card.js","webpack:///./elements/the-panel.js","webpack:///./elements/noflo-context.js","webpack:///./src/components/TestStatus.jsx","webpack:///./src/components/TestStatusDetailed.jsx","webpack:///./elements/noflo-runtime-browserdebug.js","webpack:///./elements/noflo-runtime-customiframe.js","webpack:///./elements/noflo-runtime-selector.js","webpack:///./elements/noflo-runtime-testdetails.js","webpack:///./elements/noflo-runtime.js","webpack:///./elements/the-graph-nav.js","webpack:///./elements/noflo-journal.js","webpack:///./elements/noflo-component-editor.js","webpack:///./elements/noflo-menu.js","webpack:///./elements/noflo-search-graph-results.js","webpack:///./elements/noflo-search-library-results.js","webpack:///./elements/noflo-graph-inspector.js","webpack:///./elements/noflo-component-inspector.js","webpack:///./elements/noflo-search.js","webpack:///./elements/noflo-new-component.js","webpack:///./elements/noflo-project-inspector.js","webpack:///./elements/noflo-project-sync.js","webpack:///./elements/noflo-project.js","webpack:///./src/components/EdgeId.jsx","webpack:///./src/components/RuntimeEvents.jsx","webpack:///./elements/number-scrubber.js","webpack:///./elements/noflo-node-inspector.js","webpack:///./elements/noflo-edge-menu.js","webpack:///./elements/noflo-packets.js","webpack:///./elements/noflo-alert.js","webpack:///./elements/noflo-ui.js","webpack:///./src/icons.js","webpack:///./src/collections.js"],"names":["$_documentContainer","document","createElement","innerHTML","head","appendChild","content","fbpGraph","findByComponent","getName","namespace","exports","graphRuntimeIdentifier","graph","projectNamespace","properties","runtimeName","graphName","portForLibrary","port","name","id","type","description","addressable","schema","componentForLibrary","component","icon","subgraph","inports","inPorts","map","outports","outPorts","getGraphType","g","environment","undefined","runtime","getComponentType","runtimeType","code","match","getSource","client","protocol","getsource","catch","e","indexOf","Promise","reject","definition","getRemoteNodes","r","route","remote","reduce","promise","node","then","nodes","length","Error","matchedNode","filter","n","componentType","componentImplementation","project","graphs","push","resolve","source","includes","language","loadGraph","instance","method","err","i","isDefaultRuntime","address","ensureIframe","c","querySelector","iframe","body","setAttribute","className","transport","disconnect","journal","IDBJournalStore","JournalStore","db","super","this","transactions","revId","entries","putTransaction","transaction","objectStore","add","genKey","cb","index","openCursor","onsuccess","event","cursor","target","result","value","lastRevision","info","msgflo","sndflo","imgflo","noflo","javafbp","microflo","module","findMainGraph","main","find","mainCapable","findGraph","findComponent","components","componentName","library","split","findProject","projects","getProjectHash","callback","setTimeout","isReadOnly","context","capabilities","guessLanguage","defaultLanguage","getComponentHash","getGraphHash","graphId","hashToString","hash","part","encodeURIComponent","join","element","String","customElements","define","_template","is","theme","debug","user","Object","notify","observer","env","NOFLO_APP_TITLE","getElementById","classList","remove","preventDefault","stopPropagation","fire","close","parentNode","removeChild","listeners","click","_isSelectedTheme","current","_isSelectedDebug","askForScope","Array","help","NOFLO_THEME","NOFLO_APP_NAME","NOFLO_APP_VERSION","scope","currentTarget","getAttribute","github","scopes","set","querySelectorAll","dialog","addEventListener","detail","_ifPublicScope","_ifPrivateScope","fallback","icons","getIcon","available","runtimes","label","forEach","rt","getByType","prepareAvailable","runtimeTypeInfo","keys","runtimetypes","availType","shortname","availtype","tokenList","selected","_computeIf","_computeIf2","obj","pieces","key","canSend","Boolean","projectId","produceNamespace","toLowerCase","replace","ga","specs","disabled","repo","token","matched","availableTypes","canCreate","secret","createUUID","seen","Date","toString","_computeRepeat","t","rtInfo","def","url","helpurl","runtimeAdd","ev","edgeColors","fillStyle","height","Number","lineWidth","listener","nodeSize","strokeStyle","thumbrectangle","thumbscale","width","viewrectangle","themeChanged","style","thumb","styleFromTheme","fill","stroke","redrawGraph","$","canvas","getContext","bind","render","rectangle","scale","newGraph","oldGraph","removeListener","on","toDataURL","menuopen","menuicon","gist","window","location","dispatchEvent","CustomEvent","composed","bubbles","mains","open","projectList","remoteProjects","openChanged","_canGithub","fetchGithub","repoParts","org","branch","openLocal","filterRemoteProjects","remoteProject","filterLocalProjects","filterAvailableRuntimes","opener","now","seenHoursAgo","Math","floor","runtimeTypes","examples","typeExamples","ssl","example","_canFlowhub","p","setProperties","_isLocalProjects","_isSelectedView","view","list","animatedEdges","appView","autolayout","autolayouter","debounceLibraryRefeshTimer","displaySelectionGroup","editable","graphChanges","errorNodes","forceSelection","graphView","grid","maxZoom","menus","minZoom","offsetX","offsetY","pan","readonly","selectedEdges","selectedNodes","selectedNodesHash","snap","klayNoflo","init","onSuccess","applyAutolayout","workerScript","newTheme","previousTheme","svgcontainer","graphEvents","graphRenameEvents","graphPortEvents","trackGraphChange","payload","triggerAutolayout","from","to","pub","priv","public","process","metadata","endTransaction","concat","unsubscribeGraph","unmountComponentAtNode","subscribeGraph","App","onEdgeSelection","onNodeSelection","onPanScale","getMenuDef","refs","x","y","itemKey","item","toggle","isSelected","shallowClone","slice","splice","setSelectedNodes","setErrorNodes","setSelectedEdges","setAnimatedEdges","nodeId","updateIcon","portInfo","layout","direction","options","intCoordinates","algorithm","layoutHierarchy","spacing","borderSpacing","edgeSpacingFactor","inLayerSpacingFactor","nodePlace","nodeLayering","edgeRouting","crossMin","keilerGraph","startTransaction","applyToGraph","triggerFit","setState","markDirty","addNode","state","focusNode","setProps","clearTimeout","rerender","libraryDirty","generated","debounceLibraryRefesh","unnamespaced","registerComponent","toJSON","hostAttributes","copyNodes","notifyView","onContextMenu","plugins","editor","getDefaultMenus","unregister","plugin","register","defaultMenu","notifyViewChanged","buildInitialLibrary","componentsFromGraph","edge","updateErrorNodes","errorNodesChanged","getComponent","search","num","random","getPan","getScale","nameParts","default","addInitial","getLibrary","matching","privateport","publicport","renameInport","renameOutport","getIcons","mainGraph","duplicates","_isSelectedMainGraph","group","groupdescription","renameGroup","setGroupMetadata","addGroup","observeChanges","MutationObserver","updateVisibility","observe","subtree","childList","attributes","characterData","childElementCount","parent","prepend","stacks","getElementsByTagName","stack","insertBefore","firstChild","automatic","handle","size","cleanUpLocation","automaticChanged","unobserve","handleMutations","getMain","sizeDimensions","getSizeDimensions","outside","getPositionDimension","edges","events","errors","contextBar","contextsection","keyCode","clearSelection","pop","fixed","emptyOnReadOnly","addMenuCallback","localMenu","canGetSource","n4","iconLabel","action","href","currentGraphId","e4","w4","fixedmain","scrollTop","scrollHeight","sort","groups","grp","grpNodes","JSON","parse","stringify","currentGraph","show","once","componentParts","libraryMatch","shift","status","online","all","_ifEventIsPlain","_ifEventIsProcessError","_ifEventIsError","_ifEventHasStack","message","_ifEventIsOutput","_ifEventIsStopStart","TestStatus","props","passed","failed","skipped","total","suites","suite","cases","testCase","skip","stateToClass","baseApp","qrCodeUrl","runtimeUrl","generateRuntimeInfo","params","appDebugUrl","launchNewBrowserRuntime","customIframeRuntime","launchImgfloHerokuRuntime","checkRuntimeSeen","getTime","debugOnDevice","addIframeRuntime","deployHeroku","debugOnDeviceModal","addIframeModal","template","TestStatusDetailed","topic","assertion","error","container","shadowRoot","panel","graphChanged","runtimeSelector","runtimeIframe","getRuntimeIframe","hideCard","getRuntimeIcon","execution","running","showCard","details","setIframeVisibility","visibility","display","_produceAddress","backgroundColor","hide","outsideFill","scaledviewrectangle","_","nav","calculateStyleFromTheme","viewBoxBorder","viewBoxBorder2","viewrectangleChanged","outcanvas","viewrect","w","h","canRedo","canUndo","hidenav","klay","returnTo","newEditor","checkState","connectJournal","positionedNodes","store","undo","redo","codeEditor","spec","testsEditor","componentChanged","self","debouncedComponentChange","debounce","debouncedSpecChange","changed","tests","code_editor","getExampleCode","codeOptions","getMirrorOptions","getValue","setSize","tests_editor","testOptions","lineNumbers","mode","getMirrorMode","getMirrorTheme","readOnly","componenttemplates","templateFunc","setOption","refresh","buttons","sender","button","results","downloadUrl","inGraph","isMain","preview","updateName","unnamespace","prepareHtmlEditor","prepareTestsEditor","prepareDownload","Blob","URL","sha","blob","createObjectURL","htmlEditor","focus","html_editor","specCode","hidden","_computeDownload","entity","errorText","dom","graphInspector","menuCard","parentPath","resultsCard","searchGraphResults","searchLibrary","searchLibraryResults","blur","closeInspectors","graphsChanged","componentInspector","findNode","comp","idx","previous","searchinput","clearResults","contains","keyIdentifier","searchChanged","clearSearch","addTo","path","getParentPath","unshift","_canSearch","_canGoBack","_isGraph","_isComponent","_canInspectGraph","_canInspectComponent","_isReadOnly","languages","runtimeI","allLanguages","lang","preferredlanguage","getExampleSpec","_languageSelected","fbpSpec","originalRepo","updateProject","_mainSelected","_getMainGraphs","files","hasOp","hasPush","operation","pull","conflict","noop","statusText","entry","operations","filesChanged","pushes","ops","file","originalConflicts","originalPushes","originalPulls","checkOps","f","_getOperationLabel","op","_isSelectedOp","canComponent","gotoGraph","gotoComponent","account","toggleOpen","property","_computeClass","nodeLabel","EdgeId","src","connection","tgt","row","s","routeClass","class","PacketData","multiLine","data","PacketDetails","isExpanded","clearSizeCache","RuntimeEvents","packets","idWidth","min","columns","header","expander","subComponent","tableHeight","distance","max","Infinity","mod","precision","scrubend","scrubstart","startValue","step","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","parseFloat","delta","dx","round","newValue","isFinite","trackstart","track","trackend","errorLog","lastErrorLog","scrubbing","showErrorLogs","updatePorts","updateLabel","getNode","renameNode","setNodeMetadata","initializers","iip","connected","inport","getPortValue","getPortConnection","portDef","inputType","values","input","checked","parseInt","reader","FileReader","onload","readAsDataURL","portToInput","updateValue","inputToPort","removeValue","setPortValue","removeInitial","val","isNaN","validatePortValue","_computeIf3","_computeIf4","_computeIf5","_computeIf6","_computeIf7","_computeIf8","_computeSelected","routes","secure","setEdgeMetadata","toggleSecure","meta","currentgraph","nodeInspectors","showPackets","frameRequest","newEdges","oldEdges","showEdgeCards","hideEdgeCards","updatePacketInspector","clearErrorNodes","inspector","addErrorNode","fromStr","toUpperCase","genId","edgeMenu","menu","newPackets","oldPackets","requestAnimationFrame","edgeIds","genEdgeId","selectedEdgeIds","packetId","packetEdge","rowId","offsetWidth","showNodeCards","hideNodeCards","found","isError","offerHTTPS","ctx","compatibleRuntimes","dontAutoHideAlert","innerHeight","innerWidth","clearContextFirst","emitEvent","openProject","clear","grapheditor","changes","triggerTests","componenteditor","searchLibraryResult","showError","hideAlertSoon","showProgress","libraryResults","searchGraphResult","graphResults","syncOperation","componentLibrary","libKey","showTests","confirm","alert","hideAlert","oldTheme","TheGraph","iconName","iconMap","FONT_AWESOME","basename","sortByName","a","b","aName","bName","localeCompare","allowUnknown","sortBySeen","ain","bin","addToList","existing","exists","removeFromList"],"mappings":"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","file":"ui.f8b1d310807ae1468e72.min.js","sourcesContent":["const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-card-styles\">\n  <template>\n    <style>\n    :host {\n      display: block;\n      width: 216px;\n      height: 105px;\n      overflow: hidden;\n      display: inline-block;\n      text-align: center;\n      background-color: var(--noflo-ui-background);\n      color: var(--noflo-ui-text);\n      border-radius: 3px;\n      margin-right: 18px;\n      margin-left: 18px;\n      margin-bottom: 36px;\n      position: relative;\n      cursor: pointer;\n    }\n    h2 {\n      position: absolute;\n      top: 36px;\n      line-height: 36px;\n      width: 150px;\n      text-transform: none;\n      font-size: 12px;\n      text-align: left;\n      white-space: nowrap;\n      left: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    p {\n      position: absolute;\n      top: 53px;\n      left: 18px;\n      width: 150px;\n      text-transform: uppercase;\n      font-size: 10px;\n      text-align: left;\n      max-height: 36px;\n      overflow: hidden;\n      color: hsl(189, 11%, 50%);\n    }\n    p span {\n      text-overflow: ellipsis;\n      max-width: 100px;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n    #menubutton {\n      position: absolute;\n      right: 36px;\n      top: 18px;\n      background-color: transparent;\n      color: var(--noflo-ui-text);\n      border: 0px;\n      outline: 0px;\n      cursor: pointer;\n    }\n    #menu {\n      position: absolute;\n      right: 36px;\n      top: 36px;\n      padding: 0px;\n      margin: 0px;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      box-shadow: 3px 3px var(--noflo-ui-background);\n      z-index: 1;\n    }\n    #menu li {\n      list-style: none;\n      text-align: left;\n      margin-bottom: 2px;\n      margin-top: 2px;\n    }\n    #menu li button {\n      background-color: transparent;\n      border: 0px;\n      outline: 0px;\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n      text-align: left;\n    }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const fbpGraph = require('fbp-graph');\nconst { findByComponent } = require('./projects');\nconst { getName, namespace } = require('./collections');\n\nexports.graphRuntimeIdentifier = (graph, projectNamespace = null) => {\n  if (graph && graph.properties && graph.properties.runtimeName) {\n    // Runtime-supplied identifier, keep stable\n    return graph.properties.runtimeName;\n  }\n  const graphName = getName(graph);\n  if (projectNamespace) {\n    return namespace(graphName, projectNamespace);\n  }\n  return graphName;\n};\n\nconst portForLibrary = (port) => ({\n  name: port.id,\n  type: port.type,\n  description: port.type,\n  addressable: port.addressable,\n  schema: port.schema,\n});\n\n// Covert FBP Protocol component to the-graph library component\nexports.componentForLibrary = (component) => ({\n  name: component.name,\n  icon: component.icon || 'cog',\n  description: component.description || '',\n  subgraph: component.subgraph,\n  inports: component.inPorts.map(portForLibrary),\n  outports: component.outPorts.map(portForLibrary),\n});\n\nexports.getGraphType = (g) => {\n  const graph = g;\n  if (!(graph.properties.environment != null ? graph.properties.environment.type : undefined) && ((graph.properties.environment != null ? graph.properties.environment.runtime : undefined) === 'html')) {\n    // Legacy noflo-browser\n    graph.properties.environment.type = 'noflo-browser';\n  }\n  if (graph.properties.environment != null ? graph.properties.environment.type : undefined) {\n    return graph.properties.environment.type;\n  }\n  return null;\n};\n\nexports.getComponentType = (component) => {\n  const runtimeType = component.code.match(/@runtime ([a-z-]+)/);\n  if (runtimeType) {\n    return runtimeType[1];\n  }\n  return null;\n};\n\nexports.getSource = (client, name) => client\n  .protocol.component.getsource({\n    name,\n  })\n  .catch((e) => {\n    if (name.indexOf('/') !== -1) {\n      // Already namespaced, pass failure through\n      return Promise.reject(e);\n    }\n    if (!client.definition.namespace) {\n      // No namespace defined, pass failure through\n      return Promise.reject(e);\n    }\n    return client.protocol.component.getsource({\n      name: `${client.definition.namespace}/${name}`,\n    });\n  });\n\nexports.getRemoteNodes = (client, r) => {\n  const route = r;\n  return route.remote.reduce(((promise, node) => promise.then((graph) => {\n    if (!(graph.nodes != null ? graph.nodes.length : undefined)) {\n      return Promise.reject(new Error(`Node ${graph.name} doesn't contain child nodes`));\n    }\n    const [matchedNode] = graph.nodes.filter((n) => n.id === node);\n    if (!matchedNode) {\n      return Promise.reject(new Error(`Node ${node} not found in graph ${graph.name || graph.properties.id}`));\n    }\n\n    // Check if the node implementation is available in the local project\n    const [\n      componentType,\n      componentImplementation,\n    ] = findByComponent(matchedNode.component, route.project);\n    if (componentType === 'graph') {\n      route.graphs.push(componentImplementation);\n      return Promise.resolve(componentImplementation);\n    }\n    if (componentType === 'component') {\n      route.component = componentImplementation;\n      return Promise.resolve(componentImplementation);\n    }\n    // If not, then get from runtime\n    return exports.getSource(client, matchedNode.component)\n      .then((source) => {\n        if (!['json', 'fbp'].includes(source.language)) {\n          route.component = source;\n          return Promise.resolve(source);\n        }\n        return exports.loadGraph(source)\n          .then((instance) => {\n            route.graphs.push(instance);\n            return Promise.resolve(instance);\n          });\n      });\n  })\n  ), Promise.resolve(route.graphs[route.graphs.length - 1]))\n    .then(() => {\n      route.remote = [];\n      return route;\n    });\n};\n\nexports.loadGraph = (source) => new Promise(((resolve, reject) => {\n  let method;\n  switch (source.language) {\n    case 'json': method = 'loadJSON'; break;\n    case 'fbp': method = 'loadFBP'; break;\n    default:\n      return reject(new Error(`Unknown format ${source.language} for graph ${source.name}`));\n  }\n  method = source.language === 'json' ? 'loadJSON' : 'loadFBP';\n  return fbpGraph.graph[method](source.code, (err, i) => {\n    if (err) { return reject(err); }\n    const instance = i;\n    instance.name = source.name;\n    return resolve(instance);\n  });\n}));\n\nexports.isDefaultRuntime = (runtime) => {\n  if ((runtime.protocol === 'iframe')\n    && (runtime.address === 'https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe')) {\n    return true;\n  }\n  return false;\n};\n\n// Scope iframe runtimes to project\nexports.ensureIframe = (c, project) => {\n  const client = c;\n  if (client.definition.protocol !== 'iframe') {\n    return Promise.resolve();\n  }\n  client.definition.querySelector = `iframe[data-runtime='${client.definition.id}']`;\n  let iframe = document.body.querySelector(client.definition.querySelector);\n  if (!iframe) {\n    // No iframe for this runtime/project combination yet, create\n    iframe = document.createElement('iframe');\n    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms');\n    iframe.setAttribute('data-runtime', client.definition.id);\n    iframe.setAttribute('data-project', project.id);\n    iframe.className = 'iframe-runtime';\n    document.body.appendChild(iframe);\n  }\n  if (!client.transport.iframe) {\n    // Client has not been connected yet\n    client.transport.iframe = iframe;\n    return Promise.resolve();\n  }\n  if (client.transport.iframe === iframe) {\n    // We were already connected to this one\n    return Promise.resolve();\n  }\n  // We were connected to another iframe\n  // Disconnect and set new\n  return client.disconnect()\n    .then(() => {\n      client.transport.iframe = iframe;\n      return Promise.resolve();\n    });\n};\n","/**\n * Generated from lint.css, codemirror.css, mdn-like.css, codemirror-noflo.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"codemirror-styles\">\n  <template>\n    <style>\n      /* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/*\n  MDN-LIKE Theme - Mozilla\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues\n  GitHub: @peterkroon\n\n  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation\n\n*/\n.cm-s-mdn-like.CodeMirror { color: #999; background-color: #fff; }\n.cm-s-mdn-like div.CodeMirror-selected { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::selection, .cm-s-mdn-like .CodeMirror-line > span::selection, .cm-s-mdn-like .CodeMirror-line > span > span::selection { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span > span::-moz-selection { background: #cfc; }\n\n.cm-s-mdn-like .CodeMirror-gutters { background: #f8f8f8; border-left: 6px solid rgba(0,83,159,0.65); color: #333; }\n.cm-s-mdn-like .CodeMirror-linenumber { color: #aaa; padding-left: 8px; }\n.cm-s-mdn-like .CodeMirror-cursor { border-left: 2px solid #222; }\n\n.cm-s-mdn-like .cm-keyword { color: #6262FF; }\n.cm-s-mdn-like .cm-atom { color: #F90; }\n.cm-s-mdn-like .cm-number { color:  #ca7841; }\n.cm-s-mdn-like .cm-def { color: #8DA6CE; }\n.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag { color: #690; }\n.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def, .cm-s-mdn-like span.cm-type { color: #07a; }\n\n.cm-s-mdn-like .cm-variable { color: #07a; }\n.cm-s-mdn-like .cm-property { color: #905; }\n.cm-s-mdn-like .cm-qualifier { color: #690; }\n\n.cm-s-mdn-like .cm-operator { color: #cda869; }\n.cm-s-mdn-like .cm-comment { color:#777; font-weight:normal; }\n.cm-s-mdn-like .cm-string { color:#07a; font-style:italic; }\n.cm-s-mdn-like .cm-string-2 { color:#bd6b18; } /*?*/\n.cm-s-mdn-like .cm-meta { color: #000; } /*?*/\n.cm-s-mdn-like .cm-builtin { color: #9B7536; } /*?*/\n.cm-s-mdn-like .cm-tag { color: #997643; }\n.cm-s-mdn-like .cm-attribute { color: #d6bb6d; } /*?*/\n.cm-s-mdn-like .cm-header { color: #FF6400; }\n.cm-s-mdn-like .cm-hr { color: #AEAEAE; }\n.cm-s-mdn-like .cm-link { color:#ad9361; font-style:italic; text-decoration:none; }\n.cm-s-mdn-like .cm-error { border-bottom: 1px solid red; }\n\ndiv.cm-s-mdn-like .CodeMirror-activeline-background { background: #efefff; }\ndiv.cm-s-mdn-like span.CodeMirror-matchingbracket { outline:1px solid grey; color: inherit; }\n\n.cm-s-mdn-like.CodeMirror { background-image: url(data:image/png;base64,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); }\n\n/*\nCopyright (C) 2013-2017 Flowhub UG\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\n.cm-s-noflo.CodeMirror {\n  color: hsl(188,6%,50%);\n  background-color: rgb(0, 0, 0);\n  font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif !important;\n  font-size: 14px;\n  line-height: 17px;\n}\n\n.cm-s-noflo .CodeMirror-selected {\n  background: hsl(185,100%,26%) !important;\n}\n\n.cm-s-noflo .CodeMirror-gutters {\n  background-color: black;\n  border-right: 1px solid hsla(190, 90%, 80%, 0.1);\n}\n\n.cm-s-noflo .CodeMirror-linenumber {\n  color: hsl(188, 6%, 26%);\n}\n\n.cm-s-noflo .CodeMirror-cursor {\n  border-left: 1px solid hsl(185,98%,46%) !important;\n}\n\n.cm-s-noflo span.cm-keyword {\n  color: hsl(35,100%,75%); \n}\n\n.cm-s-noflo span.cm-atom {\n  color: hsl(35,98%,46%);\n}\n\n.cm-s-noflo span.cm-number {\n  color: hsl(160,100%,75%);\n}\n\n.cm-s-noflo span.cm-def {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-2 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-3 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-property {\n  color: #fff;\n}\n\n.cm-s-noflo span.cm-operator {\n}\n\n.cm-s-noflo span.cm-comment {\n  color: gray;\n}\n\n.cm-s-noflo span.cm-string {\n  color: hsl(135,100%,75%);\n}\n\n.cm-s-noflo span.cm-meta {\n  color: yellow;\n}\n\n.cm-s-noflo span.cm-qualifier {\n  color: #FFF700;\n}\n\n.cm-s-noflo span.cm-builtin {\n  color: #30a;\n}\n\n.cm-s-noflo span.cm-bracket {\n    color: #cc7;\n}\n\n.cm-s-noflo span.cm-tag {\n    color: #FFBD40;\n}\n\n.cm-s-noflo span.cm-attribute {\n    color: #FFF700;\n}\n\n.cm-s-noflo span.cm-error {\n    color: #f00;\n}\n\n.cm-s-noflo .CodeMirror-activeline-background {\n    background: #27282E !important;\n}\n\n.cm-s-noflo .CodeMirror-matchingbracket {\n    outline: 1px solid grey;\n    color: white !important;\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"the-card-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 0px;\n        padding: 10px 10px 10px;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        position: relative;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      h1 {\n        font-size: 12px;\n        line-height: 36px;\n        margin: 0px;\n        margin-bottom: 0px;\n        text-shadow: 0 1px var(--noflo-ui-background);\n        text-align: left;\n      }\n      header {\n        height: 36px;\n      }\n      header h1 {\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        width: calc(72px * 3 - 1px);\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      header h1.clear {\n        cursor: pointer;\n      }\n      header h2 {\n        line-height: 36px;\n        width: 72px;\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        margin: 0px;\n        text-align: right;\n        font-size: 10px;\n        color: var(--noflo-ui-border-highlight);\n        display: block;\n        cursor: default;\n      }\n      ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      ul li {\n        display: block;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.toolbar2right {\n        width: 180px;\n        display: block;\n        position: absolute;\n        right: 36px;\n        top: 10px;\n        text-align: right;\n      }\n      ul.toolbar li {\n        float: left;\n        display: block;\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n      }\n      ul.toolbar2right li {\n        float: right;\n        width: auto;\n      }\n      ul.toolbar li * {\n        line-height: 36px;\n      }\n      li button {\n        width:100%;\n        height:100%;\n      }\n      textarea {\n        width: 100%;\n        min-height: 100px;\n        max-height: calc(72px * 4);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const { journal } = require('fbp-graph');\n\nclass IDBJournalStore extends journal.JournalStore {\n  constructor(graph, db) {\n    super(graph);\n    this.db = db;\n    this.transactions = [];\n  }\n\n  genKey(revId) { return `${this.graph.properties.id}_${revId}`; }\n\n  putTransaction(revId, entries) {\n    super.putTransaction(revId, entries);\n\n    const trans = this.db.transaction(['journals'], 'readwrite');\n    const store = trans.objectStore('journals');\n\n    // We're using add for writing, which will correctly fail if revId alreadyn exists\n    // for the graph\n    store.add({\n      id: this.genKey(revId),\n      graph: this.graph.properties.id,\n      revId,\n      entries,\n    });\n\n    this.transactions[revId] = entries;\n    return super.putTransaction(revId, entries);\n  }\n\n  fetchTransaction(revId) {\n    return this.transactions[revId];\n  }\n\n  init(cb) {\n    const trans = this.db.transaction(['journals']);\n    const store = trans.objectStore('journals');\n    const idx = store.index('graph');\n    idx.openCursor().onsuccess = (event) => {\n      const cursor = event.target.result;\n      if (!cursor) { return cb(); }\n      this.transactions[cursor.value.revId] = cursor.value.entries;\n      if (cursor.value.revId > this.lastRevision) { this.lastRevision = cursor.value.revId; }\n      return (cursor.continue)();\n    };\n  }\n}\n\nexports.IDBJournalStore = IDBJournalStore;\n","const msgflo = require('./msgflo.yaml');\nconst sndflo = require('./sndflo.yaml');\nconst imgflo = require('./imgflo.yaml');\nconst noflo = require('./noflo.yaml');\nconst javafbp = require('./javafbp.yaml');\nconst microflo = require('./microflo.yaml');\n\nconst info = {\n  msgflo,\n  sndflo,\n  imgflo,\n  noflo,\n  javafbp,\n  microflo,\n};\n\ninfo['noflo-browser'] = info.noflo;\ninfo['noflo-gnome'] = info.noflo;\ninfo['noflo-nodejs'] = info.noflo;\n\nmodule.exports = info;\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-modal-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--noflo-ui-background-shadow);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: auto;\n      }\n\n      .modal-container {\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        display: block;\n        position: absolute;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        top: 36px;\n        width: calc(72px * 9);\n        left: calc(50% - 72px * 4.5);\n        z-index: 5;\n        padding: 36px;\n        box-sizing: border-box;\n        border-radius: 3px;\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n      }\n      .modal-content {\n        max-height: calc(100vh - 252px);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        overflow-x: hidden;\n        padding-bottom: 18px;\n        box-sizing: border-box;\n      }\n\n      h1 {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n      }\n      label {\n        display: block;\n        font-size: 13px;\n        margin-top: 17px;\n        color: var(--noflo-ui-text);\n        line-height: 17px;\n      }\n      label > span {\n        line-height: 17px;\n      }\n      input,\n      select,\n      textarea {\n        display: block;\n        font-size: 17px;\n        background-color: hsl(190, 100%, 30%);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        color: #fff;\n        border-radius: 3px;\n        padding: 3px;\n        border: none;\n        margin: 0px;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      input::placeholder {\n        color: hsl(0, 0%, 80%);\n      }\n      select {\n        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwNnB4IiBoZWlnaHQ9IjMwNnB4IiB2aWV3Qm94PSIwIDAgMzA2IDMwNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzA2IDMwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9ImV4cGFuZC1tb3JlIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIyNzAuMyw1OC42NSAxNTMsMTc1Ljk1IDM1LjcsNTguNjUgMCw5NC4zNSAxNTMsMjQ3LjM1IDMwNiw5NC4zNSAJCSIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K);\n        background-repeat: no-repeat;\n        background-position: 98% 50%;\n        background-size: 8px;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        padding-right: 1em;\n      }\n      div.CodeMirror {\n        border: 1px solid var(--noflo-ui-text);\n        border-radius: 3px;\n      }\n\n      .toolbar {\n        display: block;\n        line-height: 36px;\n        margin-top: 18px;\n      }\n      .toolbar button {\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        cursor: pointer;\n      }\n      .toolbar button.disabled {\n        opacity: 0.1;\n      }\n      .toolbar a {\n        font-size: 13px;\n        color: hsl(190, 100%, 30%);\n        text-decoration: none;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n\n      html polymer-element{\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","exports.findMainGraph = (project) => {\n  if (!project.graphs.length) { return null; }\n  if (project.main) {\n    // Ensure currently set main graph exists\n    const mainFound = project.graphs.find((graph) => graph.properties.id === project.main);\n    if (mainFound) {\n      return project.main;\n    }\n  }\n  // No 'main' graph sent, see if we can make a smart choice\n  const mainCapable = project.graphs.find((graph) => {\n    if (graph.name === 'main') { return true; }\n    if (graph.properties.main) { return true; }\n    return false;\n  });\n  if (mainCapable) {\n    return mainCapable.properties.id;\n  }\n  // No suitable graph found, use first\n  return project.graphs[0].properties.id;\n};\n\nexports.findGraph = (id, project) => {\n  if (!project.graphs) { return null; }\n  return project.graphs.find((graph) => {\n    if (graph.name === id) { return true; }\n    if (graph.properties.id === id) { return true; }\n    return false;\n  });\n};\n\nexports.findComponent = (name, project) => {\n  if (!project.components) { return null; }\n  return project.components.find((component) => {\n    if (component.name === name) { return true; }\n    return false;\n  });\n};\n\nexports.findByComponent = (componentName, project) => {\n  let [library, name] = componentName.split('/');\n\n  if (!name) {\n    name = library;\n    library = undefined;\n  }\n\n  const graph = exports.findGraph(name, project);\n  if (graph) { return ['graph', graph]; }\n\n  const component = exports.findComponent(name, project);\n  if (component) { return ['component', component]; }\n\n  // Get from runtime\n  return ['runtime', componentName];\n};\n\nexports.findProject = (id, projects) => {\n  if (!projects) { return null; }\n\n  return projects.find((project) => project.id === id);\n};\n\nexports.getProjectHash = (project, callback) => {\n  if (project.runtime) {\n    if (!project.main) {\n      callback(null, [\n        'runtime',\n        project.runtime,\n      ]);\n      return;\n    }\n    callback(null, [\n      'runtime',\n      project.runtime,\n      project.main,\n    ]);\n    return;\n  }\n  if (!project.graphs.length) {\n    if (project.components.length) {\n      // No graphs in this project, but there are components\n      callback(null, [\n        'project',\n        project.id,\n        'component',\n        project.components[0].name,\n      ]);\n      return;\n    }\n    setTimeout(() => {\n      // Wait for graphs to be populated\n      if (!project.graphs.length && !project.components.length) {\n        return callback(new Error(`Project ${project.id} has no graphs or components`));\n      }\n      return exports.getProjectHash(project, callback);\n    },\n    100);\n    return;\n  }\n  // Open main graph, or the first graph\n  const main = project.main || project.graphs[0].properties.id;\n  if (!main) {\n    callback(new Error(`Unable find a main graph for project ${project.id}`));\n    return;\n  }\n  callback(null, [\n    'project',\n    project.id,\n    main,\n  ]);\n};\n\nexports.isReadOnly = (context) => {\n  if (!context.project) {\n    // If there is no project we must be read-only\n    return true;\n  }\n  if (context.graph && context.project.graphs.indexOf(context.graph) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.component && context.project.components.indexOf(context.component) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.graph\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('protocol:graph') === -1);\n  }\n  if (context.component\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('component:setsource') === -1);\n  }\n  return false;\n};\n\nexports.guessLanguage = (code, defaultLanguage = 'javascript') => {\n  if (code.indexOf('topic: ') !== -1 && code.indexOf('cases:') !== -1) {\n    // Reasonable guess is that this is an fbp-spec file.\n    // Should probably try parsing YAML to be sure.\n    return 'yaml';\n  }\n  return defaultLanguage;\n};\n","exports.getComponentHash = (componentName, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      'component',\n      componentName,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    'component',\n    componentName,\n  ];\n};\n\nexports.getGraphHash = (graphId, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      graphId,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    graphId,\n  ];\n};\n\nexports.hashToString = (hash) => `#${hash.map((part) => encodeURIComponent(part)).join('/')}`;\n","module.exports = {\"runtimetypes\":{\"msgflo\":{\"shortname\":\"MsgFlo Message Queuing\",\"icon\":\"cubes\",\"description\":\"Message queue orchestration\",\"helpurl\":\"https://msgflo.org/docs/usage/\"}},\"preferredlanguage\":\"python\",\"componenttemplates\":{\"python\":\"#!/usr/bin/env python\\nimport msgflo\\n\\nclass <%= name %>(msgflo.Participant):\\n  def __init__(self, role):\\n    d = {\\n      'component': '<%= namespace %>/<%= name %>',\\n      'label': '<%= description %>',\\n      'icon': '<%= icon %>',\\n      'inports': [\\n        { 'id': 'in', 'type': 'any' },\\n      ],\\n      'outports': [\\n        { 'id': 'out', 'type': 'any' },\\n      ],\\n    }\\n    msgflo.Participant.__init__(self, d, role)\\n\\n  def process(self, inport, msg):\\n    self.send('out', msg.data)\\n    self.ack(msg)\\n\\nif __name__ == '__main__':\\n  msgflo.main(<%= name %>)\\n\",\"coffeescript\":\"# To work in msgflo-nodejs source tree\\ntry\\n  msgflo = require 'msgflo-nodejs'\\ncatch e\\n  msgflo = require '..'\\n\\n<%= name %> = (client, role) ->\\n\\n  definition =\\n    component: '<%= namespace %>/<%= name %>'\\n    icon: '<%= icon %>'\\n    label: '<%= description %>'\\n    inports: [\\n      id: 'in'\\n      type: 'any'\\n    ]\\n    outports: [\\n      id: 'out'\\n      type: 'any'\\n    ]\\n  process = (inport, indata, callback) ->\\n    return callback 'out', null, indata\\n  return new msgflo.participant.Participant client, definition, process, role\\n\\nmodule.exports = <%= name %>\\n\",\"javascript\":\"try {\\n  var msgflo = require('msgflo-nodejs');\\n} catch (error) {\\n  var e = error;\\n  var msgflo = require('..');\\n}\\n\\nvar <%= name %> = function(client, role) {\\n  var definition = {\\n    component: '<%= namespace %>/<%= name %>',\\n    icon: '<%= icon %>',\\n    label: '<%= description %>',\\n    inports: [\\n      {\\n        id: 'in',\\n        type: 'any'\\n      }\\n    ],\\n    outports: [\\n      {\\n        id: 'out',\\n        type: 'any'\\n      }\\n    ]\\n  };\\n  var process = function(inport, indata, callback) {\\n    return callback('out', null, indata);\\n  };\\n  return new msgflo.participant.Participant(client, definition, process, role);\\n};\\n\\nmodule.exports = <%= name %>;\\n\",\"yaml\":\"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\\ncomponent: '<%= namespace %>/<%= name %>'\\nlabel: '<%= description %>'\\nicon: '<%= icon %>'\\ninports:\\n  open:\\n    queue: /bitraf/door/#ROLE/open\\n    type: object\\noutports: {}\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"sndflo\":{\"shortname\":\"SndFlo Sound Synthesis\",\"icon\":\"music\",\"description\":\"Create sound using SuperCollider\",\"helpurl\":\"https://github.com/jonnor/sndflo#readme\"}},\"componenttemplates\":{\"supercollider\":\"SynthDef(\\\"MyFilter\\\", {\\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\\n},\\n    metadata: (\\n        description: \\\"my filter\\\",\\n        specs: (\\n            freq: ControlSpec(20, 20000, \\\\exp, 0.1, 2200, \\\"Hz\\\")\\n        )\\n    )\\n)\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"imgflo\":{\"shortname\":\"ImgFlo Image Manipulation\",\"icon\":\"picture-o\",\"description\":\"Process images using GEGL\",\"helpurl\":\"https://github.com/jonnor/imgflo#readme\"}},\"componenttemplates\":{\"c\":\"/* This file is an image processing operation for GEGL */\\n\\n#ifdef GEGL_PROPERTIES\\n    // Dummy prop, for testing\\n    property_double (x, \\\"X\\\", 0.0)\\n        ui_range (0.0, 1024.0)\\n        ui_meta (\\\"unit\\\", \\\"pixel-coordinate\\\")\\n#else\\n\\n#define GEGL_OP_POINT_FILTER\\n#include \\\"gegl-op.h\\\"\\n\\n#ifndef IMGFLO_OP_NAME\\n#define IMGFLO_OP_NAME(orig) orig\\n#endif\\n\\nstatic void prepare(GeglOperation *operation)\\n{\\n    const Babl *format = babl_format(\\\"YA float\\\");\\n    gegl_operation_set_format(operation, \\\"input\\\", format);\\n    gegl_operation_set_format(operation, \\\"output\\\", format);\\n}\\n\\ngboolean\\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\\n        const GeglRectangle *roi, gint level)\\n{\\n    float *in = in_buf;\\n    float *out = out_buf;\\n    while (samples--) {\\n        *out++ = *in++;\\n        *out++ = *in++;\\n    }\\n    return TRUE;\\n}\\n\\nstatic void\\ngegl_op_class_init (GeglOpClass *klass)\\n{\\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\\n  point_filter_class->process = process;\\n  operation_class->prepare = prepare;\\n  gegl_operation_class_set_keys (operation_class,\\n      \\\"name\\\",        IMGFLO_OP_NAME(\\\"myop2\\\"),\\n      \\\"title\\\",       \\\"imgflo: Dynamic Flowhub\\\",\\n      \\\"categories\\\" , \\\"dev\\\",\\n      \\\"description\\\", \\\"First GEGL op written in Flowhub 22\\\",\\n  NULL);\\n}\\n\\n#endif\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"noflo-browser\":{\"shortname\":\"NoFlo for Browser\",\"icon\":\"html5\",\"description\":\"Build client-side browser applications\",\"helpurl\":\"https://github.com/noflo/noflo-browser-app#readme\"},\"noflo-nodejs\":{\"shortname\":\"NoFlo for Node.js\",\"icon\":\"cloud\",\"description\":\"Build network applications\",\"helpurl\":\"https://github.com/noflo/noflo-nodejs#readme\"},\"noflo-gnome\":{\"shortname\":\"NoFlo for GNOME\",\"icon\":\"desktop\",\"description\":\"Build GNOME desktop applications\",\"helpurl\":\"https://github.com/noflo/noflo-gnome#readme\"}},\"preferredlanguage\":\"es2015\",\"componenttemplates\":{\"javascript\":\"var noflo = require('noflo');\\n\\nexports.getComponent = function() {\\n  var c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process(function (input, output) {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    var data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"coffeescript\":\"noflo = require 'noflo'\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = '<%= description %>'\\n  c.icon = '<%= icon %>'\\n  c.inPorts.add 'in',\\n    datatype: 'all'\\n    description: 'Packet to forward'\\n  c.outPorts.add 'out',\\n    datatype: 'all'\\n  c.process (input, output) ->\\n    # Check preconditions on input data\\n    return unless input.hasData 'in'\\n    # Read packets we need to process\\n    data = input.getData 'in'\\n    # Process data and send output\\n    output.send\\n      out: data\\n    # Deactivate\\n    output.done()\\n\",\"es2015\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.process((input, output) => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data,\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"typescript\":\"import { Component } from 'noflo';\\n\\nexports.getComponent = (): Component => {\\n  const c = new Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process((input, output): void => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\"},\"examples\":{\"clock\":{\"label\":\"Animated clock\",\"id\":\"86a28c01d66cd8bf672f4e0a3e1ba851\"},\"camtopalette\":{\"label\":\"Cam to palette\",\"id\":\"efd306b5846c236998a63c535ceebed1\",\"ssl\":true},\"canvas\":{\"label\":\"Canvas pattern\",\"id\":\"dc0414ecf989b4b130b119e948653350\"},\"counter\":{\"label\":\"Click counter\",\"id\":\"38471e33458d644e907f4637434f5bbf\"},\"draganddrop\":{\"label\":\"Drag-and-drop physics\",\"id\":\"026a7bc8f1b482f56ad336c9d72dd72f\"},\"delaunaymasks\":{\"label\":\"Delaunay masks\",\"id\":\"d6c1fa7b4b9d437564e954f338d970b9\",\"ssl\":true},\"reacttodo\":{\"label\":\"React TODO list\",\"id\":\"c111454c9fd2f74d37d1e8a4e739adfd\"},\"webaudio\":{\"label\":\"Web Audio\",\"id\":\"6724a6eb8a1aaf351866e7a43c3ecd43\"}}}","module.exports = {\"runtimetypes\":{\"javafbp\":{\"shortname\":\"JavaFBP\",\"icon\":\"android\",\"description\":\"Program Java and Android applications\",\"helpurl\":\"https://github.com/jonnor/javafbp-runtime#readme\"}},\"componenttemplates\":{\"java\":\"// TODO\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"microflo\":{\"shortname\":\"MicroFlo Microcontroller Programming\",\"icon\":\"lightbulb-o\",\"description\":\"Program microcontrollers like Arduino\",\"helpurl\":\"https://github.com/jonnor/microflo#readme\"}},\"componenttemplates\":{\"c++\":\"// TODO\\n\"},\"examples\":{}}","/**\n * Generated from the-graph-dark.css, the-graph-light.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"the-graph-styles\">\n  <template>\n    <style>\n      .the-graph-dark .the-graph-app {\n  background-color: #000;\n  position: relative;\n}\n.the-graph-dark svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-dark .arrow {\n  cursor: default;\n}\n.the-graph-dark .click {\n  cursor: pointer;\n}\n.the-graph-dark .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-dark .node-border {\n  fill: rgba(0,0,0,0.5);\n  stroke: #666;\n  stroke-width: 2px;\n}\n.the-graph-dark .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-dark .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-dark .eventcatcher {\n  fill: #fff;\n  fill-opacity: 0.1;\n}\n.the-graph-dark .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-dark .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .ex-inports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-outports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-inports .node .node-rect,\n.the-graph-dark .ex-outports .node .node-rect,\n.the-graph-dark .ex-inports .node:hover .node-rect,\n.the-graph-dark .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-dark .selection .ex-inports .node .node-border,\n.the-graph-dark .selection .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .ex-inports .node .node-border,\n.the-graph-dark .small .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .node-bg {\n  opacity: 0;\n}\n.the-graph-dark .selection .node .node-rect {\n  fill: rgba(61,66,67,0.94);\n}\n.the-graph-dark .selection .node .node-border {\n  stroke: #232829;\n}\n.the-graph-dark .selection .node .port-arc {\n  fill: #232829;\n}\n.the-graph-dark .selection .node .node-icon {\n  fill: #232829;\n}\n.the-graph-dark .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-dark .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .selection .node.selected .node-icon {\n  fill: #5e6a6e;\n}\n.the-graph-dark .selection .ex-inports .node .node-icon {\n  fill: #512f01;\n}\n.the-graph-dark .selection .ex-outports .node .node-icon {\n  fill: #015115;\n}\n.the-graph-dark .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node .node-border {\n  fill: rgba(61,66,67,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark path {\n  fill: none;\n}\n.the-graph-dark .arrow-bg {\n  stroke: #000;\n  stroke-width: 2px;\n}\n.the-graph-dark .edge-bg {\n  stroke: #000;\n  stroke-width: 5px;\n}\n.the-graph-dark .edge-fg {\n  stroke: #fff;\n  stroke-width: 3px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .edge-touch {\n  stroke-width: 7px;\n  opacity: 0;\n}\n.the-graph-dark .edge:hover .edge-bg,\n.the-graph-dark .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-dark .edge.selected .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 4px;\n}\n.the-graph-dark .edge.selected .edge-bg {\n  stroke-width: 8px;\n  stroke: #e6e6e6;\n}\n.the-graph-dark .small .edge-bg {\n  stroke-width: 8px;\n}\n.the-graph-dark .small .edge-fg {\n  stroke-width: 6px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n.the-graph-dark .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 4px;\n  stroke: #e6e6e6;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n.the-graph-dark .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 6px;\n  stroke: #e6e6e6;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-dark text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #fff;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .text-bg-rect {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .node-label,\n.the-graph-dark .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-dark .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-dark .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-dark .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-dark .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-dark .iip-path {\n  stroke-width: 1px;\n  stroke: #fff;\n}\n.the-graph-dark .iip-info {\n  visibility: hidden;\n}\n.the-graph-dark .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-dark .big .iip-info {\n  visibility: visible;\n}\n.the-graph-dark .context-modal-bg {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .context-node-rect {\n  fill: #121417;\n  stroke: #bfbfbf;\n  stroke-width: 0.5px;\n}\n.the-graph-dark .context-node-icon {\n  font-size: 30px;\n  fill: #fff;\n}\n.the-graph-dark .context-icon {\n  font-size: 20px;\n  fill: #fff;\n}\n.the-graph-dark .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-dark .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-slice.click:hover .context-arc {\n  stroke: rgba(90,102,114,0.95);\n}\n.the-graph-dark .context-circle {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-dark .context-circle-x {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-dark .context-port-bg {\n  fill: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-port-bg.highlight {\n  stroke: #bfbfbf;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(43,48,54,0.95);\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-path {\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-label {\n  fill: #fff;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-dark .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-dark .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-dark .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-dark .tooltip-bg {\n  fill: rgba(0,0,0,0.9);\n  opacity: 0.75;\n}\n.the-graph-dark .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-dark .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .node-icon {\n  font-size: 45px;\n  fill: #5e6a6e;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-dark .small .node-icon {\n  fill: #2f3537;\n  font-size: 66px;\n}\n.the-graph-dark .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-dark .ex-inports .node-icon,\n.the-graph-dark .small .ex-inports .node-icon {\n  fill: #e88802;\n}\n.the-graph-dark .ex-outports .node-icon,\n.the-graph-dark .small .ex-outports .node-icon {\n  fill: #02e83c;\n}\n.the-graph-dark .port-circle-bg {\n  fill: #666;\n  opacity: 0;\n}\n.the-graph-dark .port-arc {\n  fill: #666;\n}\n.the-graph-dark .port-circle-small {\n  fill: none;\n}\n.the-graph-dark .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-dark .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-dark .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-dark .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-dark .big .port-label {\n  visibility: visible;\n}\n.the-graph-dark .big .ex-inports .port-label,\n.the-graph-dark .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-dark .group-box {\n  fill: rgba(191,191,191,0.15);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .group-box:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-dark .group-box.color0 {\n  fill: rgba(191,191,191,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color1 {\n  fill: rgba(255,128,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color2 {\n  fill: rgba(255,202,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color3 {\n  fill: rgba(255,255,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color4 {\n  fill: rgba(128,255,159,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color5 {\n  fill: rgba(128,255,212,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color6 {\n  fill: rgba(128,244,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color7 {\n  fill: rgba(128,191,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color8 {\n  fill: rgba(223,128,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color9 {\n  fill: rgba(255,128,234,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color10 {\n  fill: rgba(255,128,181,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color0:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .group-box.color1:hover {\n  fill: rgba(255,128,128,0.25);\n}\n.the-graph-dark .group-box.color2:hover {\n  fill: rgba(255,202,128,0.25);\n}\n.the-graph-dark .group-box.color3:hover {\n  fill: rgba(255,255,128,0.25);\n}\n.the-graph-dark .group-box.color4:hover {\n  fill: rgba(128,255,159,0.25);\n}\n.the-graph-dark .group-box.color5:hover {\n  fill: rgba(128,255,212,0.25);\n}\n.the-graph-dark .group-box.color6:hover {\n  fill: rgba(128,244,255,0.25);\n}\n.the-graph-dark .group-box.color7:hover {\n  fill: rgba(128,191,255,0.25);\n}\n.the-graph-dark .group-box.color8:hover {\n  fill: rgba(223,128,255,0.25);\n}\n.the-graph-dark .group-box.color9:hover {\n  fill: rgba(255,128,234,0.25);\n}\n.the-graph-dark .group-box.color10:hover {\n  fill: rgba(255,128,181,0.25);\n}\n.the-graph-dark .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.1);\n}\n.the-graph-dark .selection .group-box.color1 {\n  fill: rgba(255,128,128,0.1);\n}\n.the-graph-dark .selection .group-box.color2 {\n  fill: rgba(255,202,128,0.1);\n}\n.the-graph-dark .selection .group-box.color3 {\n  fill: rgba(255,255,128,0.1);\n}\n.the-graph-dark .selection .group-box.color4 {\n  fill: rgba(128,255,159,0.1);\n}\n.the-graph-dark .selection .group-box.color5 {\n  fill: rgba(128,255,212,0.1);\n}\n.the-graph-dark .selection .group-box.color6 {\n  fill: rgba(128,244,255,0.1);\n}\n.the-graph-dark .selection .group-box.color7 {\n  fill: rgba(128,191,255,0.1);\n}\n.the-graph-dark .selection .group-box.color8 {\n  fill: rgba(223,128,255,0.1);\n}\n.the-graph-dark .selection .group-box.color9 {\n  fill: rgba(255,128,234,0.1);\n}\n.the-graph-dark .selection .group-box.color10 {\n  fill: rgba(255,128,181,0.1);\n}\n.the-graph-dark .selection .group-box.selection {\n  fill: rgba(255,255,255,0.15);\n  stroke: #e6e6e6;\n  stroke-width: 1px;\n}\n.the-graph-dark .selection .group-box.selection:hover {\n  fill: rgba(255,255,255,0.25);\n}\n.the-graph-dark .group-label {\n  text-anchor: start;\n  fill: #fff;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .group-description {\n  fill: #fff;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-dark .small .group-description {\n  visibility: hidden;\n}\n.the-graph-dark .stroke,\n.the-graph-dark .stroke.route0,\n.the-graph-dark .selection .selected .stroke,\n.the-graph-dark .selection .selected .stroke.route0 {\n  stroke: #fff;\n}\n.the-graph-dark .stroke.route1,\n.the-graph-dark .selection .selected .stroke.route1 {\n  stroke: #e80202;\n}\n.the-graph-dark .stroke.route2,\n.the-graph-dark .selection .selected .stroke.route2 {\n  stroke: #e88802;\n}\n.the-graph-dark .stroke.route3,\n.the-graph-dark .selection .selected .stroke.route3 {\n  stroke: #e8e802;\n}\n.the-graph-dark .stroke.route4,\n.the-graph-dark .selection .selected .stroke.route4 {\n  stroke: #02e83c;\n}\n.the-graph-dark .stroke.route5,\n.the-graph-dark .selection .selected .stroke.route5 {\n  stroke: #02e89c;\n}\n.the-graph-dark .stroke.route6,\n.the-graph-dark .selection .selected .stroke.route6 {\n  stroke: #02d5e8;\n}\n.the-graph-dark .stroke.route7,\n.the-graph-dark .selection .selected .stroke.route7 {\n  stroke: #0275e8;\n}\n.the-graph-dark .stroke.route8,\n.the-graph-dark .selection .selected .stroke.route8 {\n  stroke: #af02e8;\n}\n.the-graph-dark .stroke.route9,\n.the-graph-dark .selection .selected .stroke.route9 {\n  stroke: #e802c2;\n}\n.the-graph-dark .stroke.route10,\n.the-graph-dark .selection .selected .stroke.route10 {\n  stroke: #e80262;\n}\n.the-graph-dark .selection .stroke,\n.the-graph-dark .selection .stroke.route0 {\n  stroke: #757575;\n}\n.the-graph-dark .selection .stroke.route1 {\n  stroke: #510101;\n}\n.the-graph-dark .selection .stroke.route2 {\n  stroke: #512f01;\n}\n.the-graph-dark .selection .stroke.route3 {\n  stroke: #515101;\n}\n.the-graph-dark .selection .stroke.route4 {\n  stroke: #015115;\n}\n.the-graph-dark .selection .stroke.route5 {\n  stroke: #015136;\n}\n.the-graph-dark .selection .stroke.route6 {\n  stroke: #014a51;\n}\n.the-graph-dark .selection .stroke.route7 {\n  stroke: #012951;\n}\n.the-graph-dark .selection .stroke.route8 {\n  stroke: #3d0151;\n}\n.the-graph-dark .selection .stroke.route9 {\n  stroke: #510143;\n}\n.the-graph-dark .selection .stroke.route10 {\n  stroke: #510122;\n}\n.the-graph-dark .fill,\n.the-graph-dark .fill.route0,\n.the-graph-dark .selection .selected .fill,\n.the-graph-dark .selection .selected .fill.route0 {\n  fill: #fff;\n}\n.the-graph-dark .fill.route1,\n.the-graph-dark .selection .selected .fill.route1 {\n  fill: #e80202;\n}\n.the-graph-dark .fill.route2,\n.the-graph-dark .selection .selected .fill.route2 {\n  fill: #e88802;\n}\n.the-graph-dark .fill.route3,\n.the-graph-dark .selection .selected .fill.route3 {\n  fill: #e8e802;\n}\n.the-graph-dark .fill.route4,\n.the-graph-dark .selection .selected .fill.route4 {\n  fill: #02e83c;\n}\n.the-graph-dark .fill.route5,\n.the-graph-dark .selection .selected .fill.route5 {\n  fill: #02e89c;\n}\n.the-graph-dark .fill.route6,\n.the-graph-dark .selection .selected .fill.route6 {\n  fill: #02d5e8;\n}\n.the-graph-dark .fill.route7,\n.the-graph-dark .selection .selected .fill.route7 {\n  fill: #0275e8;\n}\n.the-graph-dark .fill.route8,\n.the-graph-dark .selection .selected .fill.route8 {\n  fill: #af02e8;\n}\n.the-graph-dark .fill.route9,\n.the-graph-dark .selection .selected .fill.route9 {\n  fill: #e802c2;\n}\n.the-graph-dark .fill.route10,\n.the-graph-dark .selection .selected .fill.route10 {\n  fill: #e80262;\n}\n.the-graph-dark .selection .fill,\n.the-graph-dark .selection .fill.route0 {\n  fill: #757575;\n}\n.the-graph-dark .selection .fill.route1 {\n  fill: #510101;\n}\n.the-graph-dark .selection .fill.route2 {\n  fill: #512f01;\n}\n.the-graph-dark .selection .fill.route3 {\n  fill: #515101;\n}\n.the-graph-dark .selection .fill.route4 {\n  fill: #015115;\n}\n.the-graph-dark .selection .fill.route5 {\n  fill: #015136;\n}\n.the-graph-dark .selection .fill.route6 {\n  fill: #014a51;\n}\n.the-graph-dark .selection .fill.route7 {\n  fill: #012951;\n}\n.the-graph-dark .selection .fill.route8 {\n  fill: #3d0151;\n}\n.the-graph-dark .selection .fill.route9 {\n  fill: #510143;\n}\n.the-graph-dark .selection .fill.route10 {\n  fill: #510122;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n\n.the-graph-light .the-graph-app {\n  background-color: #fff;\n  position: relative;\n}\n.the-graph-light svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-light .arrow {\n  cursor: default;\n}\n.the-graph-light .click {\n  cursor: pointer;\n}\n.the-graph-light .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-light .node-border {\n  fill: rgba(255,255,255,0.5);\n  stroke: #3b4245;\n  stroke-width: 2px;\n}\n.the-graph-light .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-light .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-light .eventcatcher {\n  fill: #000;\n  fill-opacity: 0.1;\n}\n.the-graph-light .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-light .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-light .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-light .ex-inports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-outports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-inports .node .node-rect,\n.the-graph-light .ex-outports .node .node-rect,\n.the-graph-light .ex-inports .node:hover .node-rect,\n.the-graph-light .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-light .selection .ex-inports .node .node-border,\n.the-graph-light .selection .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light .small .ex-inports .node .node-border,\n.the-graph-light .small .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .node-bg {\n  opacity: 0;\n}\n.the-graph-light .selection .node .node-rect {\n  fill: rgba(245,248,249,0.94);\n}\n.the-graph-light .selection .node .node-border {\n  stroke: #d6dadc;\n}\n.the-graph-light .selection .node .port-arc {\n  fill: #d6dadc;\n}\n.the-graph-light .selection .node .node-icon {\n  fill: #bac2c4;\n}\n.the-graph-light .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-light .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-light .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-light .selection .node.selected .node-icon {\n  fill: #2f3537;\n}\n.the-graph-light .selection .ex-inports .node .node-icon {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .ex-outports .node .node-icon {\n  fill: #ccffdb;\n}\n.the-graph-light .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node .node-border {\n  fill: rgba(245,248,249,0.94);\n  stroke: none;\n}\n.the-graph-light .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light path {\n  fill: none;\n}\n.the-graph-light .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 2.5px;\n}\n.the-graph-light .edge-bg {\n  stroke: #e6e6e6;\n  stroke-width: 6px;\n}\n.the-graph-light .edge-fg {\n  stroke: #bfbfbf;\n  stroke-width: 4px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-light .edge-touch {\n  stroke-width: 8px;\n  opacity: 0;\n}\n.the-graph-light .edge:hover .edge-bg,\n.the-graph-light .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-light .edge.selected .arrow-bg {\n  stroke: #808080;\n  stroke-width: 5px;\n}\n.the-graph-light .edge.selected .edge-bg {\n  stroke-width: 10px;\n  stroke: #808080;\n}\n.the-graph-light .small .edge-bg {\n  stroke-width: 10px;\n}\n.the-graph-light .small .edge-fg {\n  stroke-width: 8px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n.the-graph-light .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 5px;\n  stroke: #808080;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n.the-graph-light .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 8px;\n  stroke: #808080;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-light text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #000;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .text-bg-rect {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .node-label,\n.the-graph-light .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-light .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-light .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-light .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-light .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-light .iip-path {\n  stroke-width: 1px;\n  stroke: #bfbfbf;\n}\n.the-graph-light .iip-info {\n  visibility: hidden;\n}\n.the-graph-light .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-light .big .iip-info {\n  visibility: visible;\n}\n.the-graph-light .context-modal-bg {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .context-node-rect {\n  fill: #e0e3e6;\n  stroke: #404040;\n  stroke-width: 0.5px;\n}\n.the-graph-light .context-node-icon {\n  font-size: 30px;\n  fill: #000;\n}\n.the-graph-light .context-icon {\n  font-size: 20px;\n  fill: #000;\n}\n.the-graph-light .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-light .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-slice.click:hover .context-arc {\n  stroke: rgba(195,201,208,0.95);\n}\n.the-graph-light .context-circle {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-light .context-circle-x {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-light .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-light .context-port-bg {\n  fill: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-port-bg.highlight {\n  stroke: #404040;\n  stroke-width: 1px;\n}\n.the-graph-light .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(224,227,230,0.95);\n  stroke: #404040;\n}\n.the-graph-light .context-port-path {\n  stroke: #404040;\n}\n.the-graph-light .context-port-label {\n  fill: #000;\n  dominant-baseline: central;\n}\n.the-graph-light .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-light .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-light .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-light .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-light .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-light .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-light .tooltip-bg {\n  fill: rgba(255,255,255,0.9);\n  opacity: 0.75;\n}\n.the-graph-light .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-light .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .node-icon {\n  font-size: 45px;\n  fill: #3b4245;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-light .small .node-icon {\n  fill: #171b1c;\n  font-size: 66px;\n}\n.the-graph-light .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-light .ex-inports .node-icon,\n.the-graph-light .small .ex-inports .node-icon {\n  fill: #cc6300;\n}\n.the-graph-light .ex-outports .node-icon,\n.the-graph-light .small .ex-outports .node-icon {\n  fill: #00cc3d;\n}\n.the-graph-light .port-circle-bg {\n  fill: #3b4245;\n  opacity: 0;\n}\n.the-graph-light .port-arc {\n  fill: #3b4245;\n}\n.the-graph-light .port-circle-small {\n  fill: none;\n}\n.the-graph-light .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-light .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-light .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-light .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-light .big .port-label {\n  visibility: visible;\n}\n.the-graph-light .big .ex-inports .port-label,\n.the-graph-light .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-light .group-box {\n  fill: rgba(191,191,191,0.05);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-light .group-box:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-light .group-box.color0 {\n  fill: rgba(191,191,191,0.05);\n  stroke: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1 {\n  fill: rgba(204,0,0,0.05);\n  stroke: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2 {\n  fill: rgba(204,99,0,0.05);\n  stroke: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3 {\n  fill: rgba(255,200,0,0.05);\n  stroke: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4 {\n  fill: rgba(0,204,61,0.05);\n  stroke: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5 {\n  fill: rgba(171,242,218,0.05);\n  stroke: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6 {\n  fill: rgba(0,201,204,0.05);\n  stroke: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7 {\n  fill: rgba(0,82,204,0.05);\n  stroke: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8 {\n  fill: rgba(68,0,204,0.05);\n  stroke: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9 {\n  fill: rgba(255,168,186,0.05);\n  stroke: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10 {\n  fill: rgba(204,0,109,0.05);\n  stroke: rgba(204,0,109,0.15);\n}\n.the-graph-light .group-box.color0:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1:hover {\n  fill: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2:hover {\n  fill: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3:hover {\n  fill: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4:hover {\n  fill: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5:hover {\n  fill: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6:hover {\n  fill: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7:hover {\n  fill: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8:hover {\n  fill: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9:hover {\n  fill: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10:hover {\n  fill: rgba(204,0,109,0.15);\n}\n.the-graph-light .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.01);\n}\n.the-graph-light .selection .group-box.color1 {\n  fill: rgba(204,0,0,0.01);\n}\n.the-graph-light .selection .group-box.color2 {\n  fill: rgba(204,99,0,0.01);\n}\n.the-graph-light .selection .group-box.color3 {\n  fill: rgba(255,200,0,0.01);\n}\n.the-graph-light .selection .group-box.color4 {\n  fill: rgba(0,204,61,0.01);\n}\n.the-graph-light .selection .group-box.color5 {\n  fill: rgba(171,242,218,0.01);\n}\n.the-graph-light .selection .group-box.color6 {\n  fill: rgba(0,201,204,0.01);\n}\n.the-graph-light .selection .group-box.color7 {\n  fill: rgba(0,82,204,0.01);\n}\n.the-graph-light .selection .group-box.color8 {\n  fill: rgba(68,0,204,0.01);\n}\n.the-graph-light .selection .group-box.color9 {\n  fill: rgba(255,168,186,0.01);\n}\n.the-graph-light .selection .group-box.color10 {\n  fill: rgba(204,0,109,0.01);\n}\n.the-graph-light .selection .group-box.selection {\n  fill: rgba(128,128,128,0.15);\n  stroke: #808080;\n  stroke-width: 1px;\n}\n.the-graph-light .selection .group-box.selection:hover {\n  fill: rgba(102,102,102,0.25);\n}\n.the-graph-light .group-label {\n  text-anchor: start;\n  fill: #000;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .group-description {\n  fill: #000;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-light .small .group-description {\n  visibility: hidden;\n}\n.the-graph-light .stroke,\n.the-graph-light .stroke.route0,\n.the-graph-light .selection .selected .stroke,\n.the-graph-light .selection .selected .stroke.route0 {\n  stroke: #bfbfbf;\n}\n.the-graph-light .stroke.route1,\n.the-graph-light .selection .selected .stroke.route1 {\n  stroke: #c00;\n}\n.the-graph-light .stroke.route2,\n.the-graph-light .selection .selected .stroke.route2 {\n  stroke: #cc6300;\n}\n.the-graph-light .stroke.route3,\n.the-graph-light .selection .selected .stroke.route3 {\n  stroke: #ffc800;\n}\n.the-graph-light .stroke.route4,\n.the-graph-light .selection .selected .stroke.route4 {\n  stroke: #00cc3d;\n}\n.the-graph-light .stroke.route5,\n.the-graph-light .selection .selected .stroke.route5 {\n  stroke: #abf2da;\n}\n.the-graph-light .stroke.route6,\n.the-graph-light .selection .selected .stroke.route6 {\n  stroke: #00c9cc;\n}\n.the-graph-light .stroke.route7,\n.the-graph-light .selection .selected .stroke.route7 {\n  stroke: #0052cc;\n}\n.the-graph-light .stroke.route8,\n.the-graph-light .selection .selected .stroke.route8 {\n  stroke: #40c;\n}\n.the-graph-light .stroke.route9,\n.the-graph-light .selection .selected .stroke.route9 {\n  stroke: #ffa8ba;\n}\n.the-graph-light .stroke.route10,\n.the-graph-light .selection .selected .stroke.route10 {\n  stroke: #cc006d;\n}\n.the-graph-light .selection .stroke,\n.the-graph-light .selection .stroke.route0 {\n  stroke: #e6e6e6;\n}\n.the-graph-light .selection .stroke.route1 {\n  stroke: #fcc;\n}\n.the-graph-light .selection .stroke.route2 {\n  stroke: #ffe5cc;\n}\n.the-graph-light .selection .stroke.route3 {\n  stroke: #fff4cc;\n}\n.the-graph-light .selection .stroke.route4 {\n  stroke: #ccffdb;\n}\n.the-graph-light .selection .stroke.route5 {\n  stroke: #d3f8ec;\n}\n.the-graph-light .selection .stroke.route6 {\n  stroke: #ccfeff;\n}\n.the-graph-light .selection .stroke.route7 {\n  stroke: #cce0ff;\n}\n.the-graph-light .selection .stroke.route8 {\n  stroke: #dcf;\n}\n.the-graph-light .selection .stroke.route9 {\n  stroke: #ffccd6;\n}\n.the-graph-light .selection .stroke.route10 {\n  stroke: #ffcce7;\n}\n.the-graph-light .fill,\n.the-graph-light .fill.route0,\n.the-graph-light .selection .selected .fill,\n.the-graph-light .selection .selected .fill.route0 {\n  fill: #bfbfbf;\n}\n.the-graph-light .fill.route1,\n.the-graph-light .selection .selected .fill.route1 {\n  fill: #c00;\n}\n.the-graph-light .fill.route2,\n.the-graph-light .selection .selected .fill.route2 {\n  fill: #cc6300;\n}\n.the-graph-light .fill.route3,\n.the-graph-light .selection .selected .fill.route3 {\n  fill: #ffc800;\n}\n.the-graph-light .fill.route4,\n.the-graph-light .selection .selected .fill.route4 {\n  fill: #00cc3d;\n}\n.the-graph-light .fill.route5,\n.the-graph-light .selection .selected .fill.route5 {\n  fill: #abf2da;\n}\n.the-graph-light .fill.route6,\n.the-graph-light .selection .selected .fill.route6 {\n  fill: #00c9cc;\n}\n.the-graph-light .fill.route7,\n.the-graph-light .selection .selected .fill.route7 {\n  fill: #0052cc;\n}\n.the-graph-light .fill.route8,\n.the-graph-light .selection .selected .fill.route8 {\n  fill: #40c;\n}\n.the-graph-light .fill.route9,\n.the-graph-light .selection .selected .fill.route9 {\n  fill: #ffa8ba;\n}\n.the-graph-light .fill.route10,\n.the-graph-light .selection .selected .fill.route10 {\n  fill: #cc006d;\n}\n.the-graph-light .selection .fill,\n.the-graph-light .selection .fill.route0 {\n  fill: #e6e6e6;\n}\n.the-graph-light .selection .fill.route1 {\n  fill: #fcc;\n}\n.the-graph-light .selection .fill.route2 {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .fill.route3 {\n  fill: #fff4cc;\n}\n.the-graph-light .selection .fill.route4 {\n  fill: #ccffdb;\n}\n.the-graph-light .selection .fill.route5 {\n  fill: #d3f8ec;\n}\n.the-graph-light .selection .fill.route6 {\n  fill: #ccfeff;\n}\n.the-graph-light .selection .fill.route7 {\n  fill: #cce0ff;\n}\n.the-graph-light .selection .fill.route8 {\n  fill: #dcf;\n}\n.the-graph-light .selection .fill.route9 {\n  fill: #ffccd6;\n}\n.the-graph-light .selection .fill.route10 {\n  fill: #ffcce7;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","import { PolymerElement } from '@polymer/polymer';\n\nclass NofloPolymer extends PolymerElement {\n  static get properties() {\n    return {\n      element: {\n        type: String,\n      },\n      inports: {\n        type: String,\n      },\n      outports: {\n        type: String,\n      },\n    };\n  }\n}\n\ncustomElements.define('noflo-polymer', NofloPolymer);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #cta {\n        display: inline;\n        width: auto;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Account settings for <span>{{user.flowhub-user.name}}</span></h1>\n      <form>\n        <label>\n          Theme\n          <select name=\"type\" value=\"{{theme::input}}\">\n            <option value=\"dark\" selected\\$=\"[[_isSelectedTheme('dark', theme)]]\">Lazer</option>\n            <option value=\"light\" selected\\$=\"[[_isSelectedTheme('light', theme)]]\">Tube</option>\n          </select>\n        </label>\n        <label>\n          Debug [[env.NOFLO_APP_TITLE]] in Flowhub (requires reload)\n          <select name=\"type\" value=\"{{debug::input}}\">\n            <option value=\"false\" selected\\$=\"[[_isSelectedDebug('false', debug)]]\">Disabled</option>\n            <option value=\"true\" selected\\$=\"[[_isSelectedDebug('true', debug)]]\">Enabled</option>\n          </select>\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">Save</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-account-settings',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    debug: {\n      type: String,\n      value: 'false',\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.fire('updated', {\n      'flowhub-theme': this.theme,\n      'flowhub-debug': this.debug,\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  userChanged() {\n    this.theme = this.user['flowhub-theme'] || 'dark';\n    this.debug = this.user['flowhub-debug'] || 'false';\n  },\n\n  _isSelectedTheme(theme, current) {\n    return theme === current;\n  },\n\n  _isSelectedDebug(value, current) {\n    return value === current;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-account-settings';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        display: block;\n        padding-top: 18px;\n        width: 100%;\n      }\n      nav {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        padding-left: 72px;\n        padding-right: 72px;\n        padding-bottom: 18px;\n      }\n      section.app {\n        display: flex;\n        flex-direction: row;\n      }\n      section.app .logo {\n        margin-right: 18px;\n        width: 72px;\n        height: 72px;\n      }\n      section.app .logo img {\n        width: 72px;\n        height: 72px;\n        display: inline-block;\n      }\n      section.app h1 {\n        font-size: 18px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.app h2 {\n        font-size: 9px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.user {\n        text-align: right;\n      }\n      section.user .avatar {\n        display: inline;\n        line-height: 18px;\n      }\n      section.user .avatar img {\n        width: 18px;\n        height: 18px;\n        display: inline-block;\n      }\n      section.user h1 {\n        display: inline;\n        line-height: 36px;\n      }\n      section.user .toolbar {\n        line-height: 36px;\n        font-size: 9px;\n      }\n      section.user .toolbar a,\n      section.user .toolbar button {\n        padding: 3px;\n        text-shadow: none;\n        text-decoration: none;\n        box-shadow: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 9px;\n        margin-left: 9px;\n        cursor: pointer;\n        border: none;\n        background-color: transparent;\n        color: var(--noflo-ui-text);\n      }\n      section.user .toolbar a.login::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsla(190, 98%, 46%, .8);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n        transition: all 0.3s ease;\n      }\n      section.user .toolbar a.login {\n        position: relative;\n        padding: 9px;\n        font-size: 18px;\n        border: 1px solid hsl(190, 98%, 46%);\n        background: hsla(190, 98%, 46%, .8);\n        line-height: 18px;\n        border-radius: 3px;\n        color: var(--noflo-ui-text);\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        box-sizing: border-box;\n        transition: background-color 0.2s ease-in;\n      }\n      section.user .toolbar a.login:hover,\n      section.user .toolbar a.login:focus,\n      section.user .toolbar a.login:active {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text) !important;\n        outline: 0;\n      }\n      div.banner {\n        background-color: hsla(190, 98%, 46%, .8);\n        padding: 18px;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      div.banner a {\n        color: var(--noflo-ui-text);\n        cursor: pointer;\n      }\n      div.banner div {\n        margin-top: 18px;\n      }\n      div.banner button,\n      div.banner a.cta,\n      div.banner input[type=\"submit\"] {\n        display: inline-block;\n        color: var(--noflo-ui-background);\n        background-color: var(--noflo-ui-text);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        padding-top: 1px;\n        padding-bottom: 1px;\n        line-height: 36px;\n        margin: 0px;\n        cursor: pointer;\n        font-size: 13px;\n        text-decoration: none;\n      }\n      </style>\n    <nav>\n    <section class=\"app\">\n      <div class=\"logo\">\n        <img src=\"app/[[env.NOFLO_THEME]]-72.png\">\n      </div>\n      <div class=\"name\">\n        <h1>\n          [[env.NOFLO_APP_NAME]]\n        </h1>\n        <h2>\n          v[[env.NOFLO_APP_VERSION]]\n        </h2>\n      </div>\n    </section>\n    <section class=\"user\">\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <div>\n        <template is=\"dom-if\" if=\"{{user.flowhub-avatar}}\">\n          <div class=\"avatar\"><img src=\"{{user.flowhub-avatar}}\"></div>\n        </template>\n        <h1>\n          <span>{{user.github-username}}</span>\n        </h1>\n        <div class=\"toolbar\">\n          <a href=\"https://docs.flowhub.io\" target=\"_blank\">Docs</a>\n          <a on-click=\"openSettings\">Settings</a>\n          <button on-click=\"logout\">Logout</button>\n        </div>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!user.flowhub-user}}\">\n      <div class=\"toolbar\">\n        <a id=\"loginbutton\" class=\"login\" on-click=\"login\">Login</a>\n      </div>\n    </template>\n    </section>\n    </nav>\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <template is=\"dom-if\" if=\"{{askForScope.length}}\">\n        <div class=\"banner\">\n          To be able to synchronize your GitHub projects, [[env.NOFLO_APP_TITLE]] needs repository access permissions. <a href=\"https://docs.flowhub.io/github-integration/\" target=\"_blank\">Read more</a>\n          <div>\n            Grant access to:\n            <template is=\"dom-repeat\" items=\"{{askForScope}}\" as=\"scope\">\n              <template is=\"dom-if\" if=\"{{_ifPublicScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public repositories only</button>\n              </template>\n              <template is=\"dom-if\" if=\"{{_ifPrivateScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public and private repositories</button>\n              </template>\n            </template>\n          </div>\n        </div>\n      </template>\n    </template>\n    </template>\n`,\n\n  is: 'noflo-account',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    askForScope: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    help: { value: null },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_THEME: process.env.NOFLO_THEME,\n          NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n          NOFLO_APP_VERSION: process.env.NOFLO_APP_VERSION,\n        };\n      },\n    },\n  },\n\n  login() {\n    this.fire('login', true);\n  },\n\n  logout() {\n    this.fire('logout', true);\n  },\n\n  relogin(event) {\n    event.preventDefault();\n    const scope = event.currentTarget.getAttribute('data-scope');\n    this.fire('relogin', scope);\n  },\n\n  userChanged() {\n    if (!this.user || !this.user['flowhub-user']) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('repo') === -1) {\n      // User hasn't granted repo access\n      this.set('askForScope', ['repo']);\n      if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('public_repo') === -1) {\n        // Allow paid users to limit repo access to only public if they want\n        this.push('askForScope', 'public_repo');\n      }\n    }\n  },\n\n  openSettings() {\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this.user['flowhub-user']) {\n      return;\n    }\n    const dialog = document.createElement('noflo-account-settings');\n    dialog.user = this.user;\n    dialog.theme = this.theme;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (event) => {\n      this.fire('userUpdated', event.detail);\n    });\n  },\n\n  _ifPublicScope(scope) {\n    return scope === 'public_repo';\n  },\n\n  _ifPrivateScope(scope) {\n    return scope === 'repo';\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\n\nclass NoFloIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: inline-block;\n      font: normal normal normal 14px/1 FontAwesomeSVG;\n      font-size: inherit;\n      text-rendering: auto;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n    </style>\n    [[_getIcon(icon, fallback)]]\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon';\n  }\n\n  static get properties() {\n    return {\n      icon: {\n        type: String,\n      },\n      fallback: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = icons;\n  }\n\n  _getIcon(icon, fallback) {\n    const result = this.icons.getIcon(icon, fallback);\n    return result;\n  }\n}\ncustomElements.define(NoFloIcon.is, NoFloIcon);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        top: calc(50% - 220px) !important;\n      }\n      ul.types {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n      }\n      ul.types li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 75%);\n        color: hsl(189, 50%, 80%);\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        transition: background-color 0.3s ease-in-out;\n      }\n      ul.types li.selected,\n      ul.types li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.types li.selected p {\n        color: hsl(0, 0%, 80%);\n      }\n      ul.types li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.types li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n      ul.types li noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n      }\n    </style>\n    <ul class=\"types\">\n      <template is=\"dom-repeat\" items=\"{{available}}\" as=\"availtype\">\n      <li on-click=\"selectType\" data-id\\$=\"{{availtype.id}}\" class\\$=\"{{_computeClass(availtype, type)}}\">\n        <h2>{{availtype.label}}</h2>\n        <noflo-icon icon=\"{{availtype.icon}}\"></noflo-icon>\n        <template is=\"dom-if\" if=\"{{_computeIf(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtime</p>\n        </template>\n        <template is=\"dom-if\" if=\"{{_computeIf2(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtimes</p>\n        </template>\n      </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-type-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'runtimesChanged',\n    },\n    type: {\n      type: String,\n      value: 'noflo-nodejs',\n      notify: true,\n    },\n  },\n\n  runtimesChanged() {\n    this.available = [{\n      id: 'all',\n      label: 'Multi-platform',\n      icon: 'asterisk',\n      runtimes: [],\n    }];\n    if (!this.runtimes) {\n      return;\n    }\n    this.runtimes.forEach((rt) => {\n      if (!rt.type) {\n        return;\n      }\n      const availType = this.getByType(rt.type);\n      availType.runtimes.push(rt);\n    });\n  },\n\n  selectType(event) {\n    this.type = event.currentTarget.getAttribute('data-id');\n  },\n\n  getByType(type) {\n    for (let i = 0; i < this.available.length; i += 1) {\n      if (this.available[i].id === type) {\n        return this.available[i];\n      }\n    }\n    return this.prepareAvailable(type);\n  },\n\n  prepareAvailable(type) {\n    const runtimeTypeInfo = {};\n    Object.keys(runtimeInfo).forEach((name) => {\n      const info = runtimeInfo[name];\n      Object.keys(info.runtimetypes).forEach((runtimeType) => {\n        runtimeTypeInfo[runtimeType] = info.runtimetypes[runtimeType];\n      });\n    });\n    // Also unknown runtimes should show up, synthesize info using defaults\n    const availType = {\n      id: type,\n      label: type,\n      icon: 'cogs',\n      runtimes: [],\n    };\n    const info = runtimeTypeInfo[type];\n    if (info && info.icon) {\n      availType.icon = info.icon;\n    }\n    if (info && info.shortname) {\n      availType.label = info.shortname;\n    }\n    this.push('available', availType);\n    return availType;\n  },\n\n  _computeClass(availtype, type) {\n    return this.tokenList({ selected: type === availtype.id });\n  },\n\n  _computeIf(availtype) {\n    return availtype.runtimes.length === 1;\n  },\n\n  _computeIf2(availtype) {\n    return availtype.runtimes.length > 1;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-type-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new project</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Project label\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          Project namespace\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-project\" autocapitalize=\"off\" autocorrect=\"off\" readonly=\"\">\n        </label>\n        <label>\n          Primary Type\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-project',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    projectId: {\n      type: String,\n      value: '',\n    },\n    projects: { value: null },\n    runtimes: {\n      value: null,\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  produceNamespace(namespace) {\n    return namespace.toLowerCase().replace(/[\\s/._]/g, '-').replace('--', '-').replace(/[^a-z0-9-]/g, '');\n  },\n\n  nameChanged() {\n    this.namespace = this.produceNamespace(this.name);\n    this.projectId = uuid();\n    if (this.name && this.namespace && this.projectId) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name || !this.namespace || !this.projectId) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newProject');\n    }\n    this.fire('new', {\n      id: this.projectId,\n      name: this.name,\n      namespace: this.produceNamespace(this.namespace),\n      type: this.type,\n      graphs: [],\n      components: [],\n      specs: [],\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add a new repository</h1>\n      <div class=\"modal-content\">\n      <form>\n        <label>\n          GitHub repository name\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/repository\" required=\"\">\n        </label>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Add</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-repository',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    repo: {\n      type: String,\n      value: '',\n      observer: 'repoChanged',\n    },\n    runtimes: { notify: true },\n    token: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  repoChanged() {\n    this.canSend = false;\n    if (this.repo && typeof this.repo === 'string') {\n      const matched = this.repo.match(/^(git@github\\.com:|https:\\/\\/github\\.com\\/)?(\\S+\\/\\S+?(?=\\.git|$))(\\.git)?$/);\n      if (!matched || !matched[2]) {\n        return;\n      }\n      if (matched[2] !== this.repo) {\n        // eslint-disable-next-line prefer-destructuring\n        this.repo = matched[2];\n      }\n      this.canSend = true;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.repo) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newRepository');\n    }\n    this.fire('new', this.repo);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      :host {\n        display: block;\n      }\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add new runtime</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Runtime name \n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"New local runtime\" required=\"\">\n        </label>\n        <label>\n          IP address\n          <input type=\"text\" value=\"{{address::input}}\" placeholder=\"127.0.0.1\" required=\"\">\n        </label>\n        <label>\n          Port\n          <input type=\"text\" data-type=\"int\" value=\"{{port::input}}\" placeholder=\"3569\" required=\"\">\n        </label>\n        <label>\n          Type\n          <select id=\"type\" value=\"{{type::input}}\">\n            <template is=\"dom-repeat\" items=\"{{availableTypes}}\" as=\"type\">\n            <option value=\"{{type}}\">{{type}}</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Secret\n          <input type=\"text\" value=\"{{secret::input}}\" placeholder=\"secret-string\" required=\"\">\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"create\" class\\$=\"{{_computeClass(canCreate)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-add-runtime',\n\n  properties: {\n    address: {\n      type: String,\n      value: 'localhost',\n      observer: 'validate',\n    },\n    availableTypes: {\n      type: Array,\n      value() {\n        return [\n          '',\n          'custom',\n          'noflo-nodejs',\n          'microflo',\n          'javafbp',\n          'imgflo',\n          'sndflo',\n          'msgflo',\n        ];\n      },\n    },\n    canCreate: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n    port: {\n      type: String,\n      value: '3569',\n      observer: 'validate',\n    },\n    secret: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n  },\n\n  attached() {\n    // PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    // PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  validate() {\n    if (this.name && this.address && this.port && this.type) {\n      this.canCreate = true;\n    }\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  createUUID() {\n    return uuid();\n  },\n\n  create(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    const runtime = {\n      name: this.name,\n      label: this.name,\n      id: this.createUUID(),\n      type: this.type,\n      seen: new Date().toString(),\n      protocol: 'websocket',\n      address: `ws://${this.address}:${this.port}`,\n      description: '',\n      secret: this.secret,\n      icon: 'cloud',\n    };\n    this.fire('new', runtime);\n    this.close();\n  },\n\n  listeners: { click: 'close' },\n\n  _computeRepeat(availableTypes, t) {\n    return t in availableTypes;\n  },\n\n  _computeClass(canCreate) {\n    return this.tokenList({ disabled: !canCreate });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-add-runtime';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nconst runtimes = [];\n\nconst runtimeTypes = {};\nObject.keys(runtimeInfo).forEach((name) => {\n  const rtInfo = runtimeInfo[name];\n  Object.keys(rtInfo.runtimetypes).forEach((runtimeType) => {\n    const info = rtInfo.runtimetypes[runtimeType];\n    const def = {\n      name: runtimeType,\n      label: info.shortname,\n      icon: info.icon,\n      description: info.description,\n      url: info.helpurl,\n    };\n    if (!runtimeTypes[runtimeType]) {\n      // Avoid duplicates\n      runtimeTypes[runtimeType] = def;\n      runtimes.push(def);\n    }\n  });\n});\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n      ul.runtimes {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -10px;\n        margin-right: -10px;\n        list-style: none;\n      }\n      ul.runtimes li {\n        display: inline-block;\n      }\n      ul.runtimes li a {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        text-decoration: none;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        text-decoration: none;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n        text-decoration: none;\n      }\n      ul.runtimes li a noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        text-decoration: none;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Register new runtime</h1>\n      <div class=\"modal-content\">\n      <p>\n      [[env.NOFLO_APP_TITLE]] supports all flow-based programming runtimes that are compatible with the <a href=\"https://flowbased.github.io/fbp-protocol/\" target=\"_blank\">FBP protocol</a>.\n      [[env.NOFLO_APP_TITLE]] comes with a bundled <a href=\"http://noflojs.org\" target=\"_blank\">NoFlo</a> runtime for the browser.\n      Here are some other popular ones:\n      </p>\n      <ul class=\"runtimes\">\n      <template is=\"dom-repeat\" items=\"{{runtimes}}\" as=\"runtime\">\n      <li class\\$=\"{{runtime.name}}\">\n        <a target=\"_blank\" href\\$=\"{{runtime.url}}\">\n          <noflo-icon icon=\"{{ runtime.icon }}\" fallback=\"cog\"></noflo-icon>\n          <h2>{{runtime.label}}</h2>\n          <p>{{runtime.description}}</p>\n        </a>\n      </li>\n      </template>\n      </ul>\n      <p>\n      Most runtimes provide a link that connects to them in [[env.NOFLO_APP_TITLE]] live mode at start-up. You can also add a runtime manually.\n      </p>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"addRuntime\">Add manually</button>\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-runtime',\n\n  properties: {\n    runtimes: {\n      value() {\n        return runtimes;\n      },\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    if (this.runtimeAdd) {\n      if (PolymerDom(this.runtimeAdd).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeAdd).parentNode).removeChild(this.runtimeAdd);\n      }\n      this.runtimeAdd = null;\n    }\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  addRuntime(event) {\n    event.preventDefault();\n    this.runtimeAdd = document.createElement('noflo-add-runtime');\n    PolymerDom(document.body).appendChild(this.runtimeAdd);\n    this.runtimeAdd.addEventListener('new', (ev) => {\n      this.fire('addRuntime', ev.detail);\n    });\n  },\n\n  listeners: { click: 'close' },\n});\n","/*\n* Renders a fbp-graph instance into a canvas\n* Autoscales the render to fit, and exposes the scale as thumbscale, thumbrectangle, viewrectangle\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\n\nPolymer({\n  _template: html`\n    <canvas id=\"canvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n`,\n\n  is: 'the-graph-thumb',\n\n  properties: {\n    edgeColors: {\n      type: Array,\n      value() {\n        return [\n          'white',\n          'hsl(  0, 100%, 46%)',\n          'hsl( 35, 100%, 46%)',\n          'hsl( 60, 100%, 46%)',\n          'hsl(135, 100%, 46%)',\n          'hsl(160, 100%, 46%)',\n          'hsl(185, 100%, 46%)',\n          'hsl(210, 100%, 46%)',\n          'hsl(285, 100%, 46%)',\n          'hsl(310, 100%, 46%)',\n          'hsl(335, 100%, 46%)',\n        ];\n      },\n    },\n    fillStyle: {\n      type: String,\n      value: 'hsl(184, 8%, 10%)',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    lineWidth: {\n      type: Number,\n      value: 0.75,\n    },\n    listener: { value: null },\n    nodeSize: {\n      type: Number,\n      value: 60,\n    },\n    strokeStyle: {\n      type: String,\n      value: 'hsl(180, 11%, 70%)',\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { notify: true },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.thumbrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.viewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n  },\n\n  attached() {\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n    this.themeChanged();\n  },\n\n  themeChanged() {\n    const style = TheGraph.thumb.styleFromTheme(this.theme);\n    this.edgeColors = style.edgeColors;\n    this.fillStyle = style.fill;\n    this.strokeStyle = style.stroke;\n    // Redraw\n    this.redrawGraph();\n  },\n\n  redrawGraph() {\n    if (!this.graph) {\n      return;\n    }\n    const context = this.$.canvas.getContext('2d');\n    if (!context) {\n      // ???\n      setTimeout(this.redrawGraph.bind(this), 500);\n      return;\n    }\n    const properties = {\n      width: this.width,\n      height: this.height,\n      edgeColors: this.edgeColors,\n      nodeSize: this.nodeSize,\n      strokeStyle: this.strokeStyle,\n      fillStyle: this.fillStyle,\n      lineWidth: this.lineWidth,\n    };\n    const thumb = TheGraph.thumb.render(context, this.graph, properties);\n    this.thumbrectangle = thumb.rectangle;\n    this.thumbscale = thumb.scale;\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (!this.listener) {\n      this.listener = this.redrawGraph.bind(this);\n    }\n    if (oldGraph) {\n      oldGraph.removeListener('endTransaction', this.listener);\n    }\n    if (!this.graph) {\n      return;\n    }\n    this.graph.on('endTransaction', this.listener);\n    this.redrawGraph();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.redrawGraph();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.redrawGraph();\n  },\n\n  toDataURL() {\n    return this.$.canvas.toDataURL();\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\nimport './the-graph-thumb';\n\nclass NoFloProjectCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n    </style>\n    <the-graph-thumb graph=\"[[_getMainGraph(project.main)]]\" width=\"200\" height=\"120\"></the-graph-thumb>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <template is=\"dom-if\" if=\"[[project.gist]]\">\n      <li><button on-click=\"openGithub\">View Gist</button></li>\n      </template>\n      <li><button on-click=\"deleteProject\">Delete project</button></li>\n    </ul>\n    </template>\n    <h2>[[project.name]]</h2>\n    <p><span>[[project.graphs.length]]</span>&nbsp;graphs, <span>[[project.components.length]]</span>&nbsp;components</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-project-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo && !this.project.gist) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n      return;\n    }\n    if (this.project.gist) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGist');\n      }\n      window.location = `https://gist.github.com/${this.project.gist}`;\n    }\n  }\n\n  deleteProject(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.dispatchEvent(new CustomEvent('deleteProject', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _getMainGraph(main) {\n    if (!main) {\n      return null;\n    }\n    const mains = this.project.graphs.filter((graph) => {\n      if (graph.properties.id !== main) {\n        return false;\n      }\n      return true;\n    });\n    if (!mains.length) {\n      return null;\n    }\n    return mains[0];\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloProjectCard.is, NoFloProjectCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRepoCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      #repoicon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        color: hsla(185, 100%, 75%, 0.2);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-icon id=\"repoicon\" icon=\"[[getRepoIcon(project)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <li><button on-click=\"deleteRepo\">Remove from [[env.NOFLO_APP_NAME]]</button></li>\n    </ul>\n    </template>\n    <h2>[[project.repo]]</h2>\n    <template is=\"dom-if\" if=\"[[project.private]]\">\n    <p>Private repository</p>\n      <template is=\"dom-if\" if=\"[[!_isFree(user)]]\">\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!project.private]]\">\n    <p>Public repository</p>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'noflo-repo-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n      env: {\n        type: Object,\n        value() {\n          return {\n            NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          };\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n    }\n  }\n\n  deleteRepo(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteRepo');\n    }\n    this.dispatchEvent(new CustomEvent('deleteRepo', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n\n  getRepoIcon() {\n    return 'github';\n  }\n}\ncustomElements.define(NoFloRepoCard.is, NoFloRepoCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRuntimeCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n    #runtimeicon {\n      font-size: 72px;\n      position: absolute;\n      right: -8px;\n      top: 9px;\n      color: hsla(185, 100%, 75%, 0.2);\n      text-decoration: none;\n    }\n    </style>\n    <noflo-icon id=\"runtimeicon\" icon=\"[[getRuntimeIcon(runtime)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Runtime menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <li><button on-click=\"deleteRuntime\">Delete runtime</button></li>\n    </ul>\n    </template>\n    <h2>[[runtime.label]]</h2>\n    <p><span>[[_produceAddress(runtime)]]</span>. Seen <span>[[runtime.seenHoursAgo]]</span>h ago</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-runtime-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      runtime: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  deleteRuntime(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.dispatchEvent(new CustomEvent('deleteRuntime', {\n      detail: this.runtime,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.type || !runtimeInfo[runtime.type]) {\n      return 'cog';\n    }\n    let icon = 'cog';\n    Object.keys(runtimeInfo).forEach((name) => {\n      Object.keys(runtimeInfo[name].runtimetypes).forEach((runtimeType) => {\n        if (runtimeType !== runtime.type) {\n          return;\n        }\n        icon = runtimeInfo[name].runtimetypes[runtime.type].icon;\n      });\n    });\n    return icon;\n  }\n\n  _produceAddress(runtime) {\n    if (runtime.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.id}`;\n    }\n    return runtime.address;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloRuntimeCard.is, NoFloRuntimeCard);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-account';\nimport './noflo-new-project';\nimport './noflo-new-repository';\nimport './noflo-new-runtime';\nimport './noflo-project-card';\nimport './noflo-repo-card';\nimport './noflo-runtime-card';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: hsl(190, 90%, 45%);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        transition: height 1s ease-in-out;\n        display: block;\n      }\n      section {\n        display: block;\n        position: relative;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      section > h2 {\n        font-size: 17px;\n        line-height: 36px;\n        margin-top: 36px;\n        height: 36px;\n        color: white;\n        text-shadow: 0 1px 0 hsl(190, 100%, 40%);\n        text-transform: none;\n      }\n      section > h2 small {\n        font-size: 10px;\n        text-transform: uppercase;\n        color: hsl(189, 50%, 25%);\n      }\n      ul.tabs {\n        position: absolute;\n        display: inline-block;\n        top: 0px;\n        left: calc(50% - 133px);\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n      ul.projects {\n        padding: 0px;\n        margin-top: 36px;\n        margin-bottom: 36px;\n        margin-left: -18px;\n        margin-right: -18px;\n        list-style: none;\n      }\n      ul.projects li {\n        width: 216px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        border-radius: 3px;\n        margin-right: 18px;\n        margin-left: 18px;\n        margin-bottom: 36px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.projects li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.projects li.remote {\n        cursor: default;\n      }\n      section button,\n      section #cta {\n        background-color: transparent;\n        color: hsl(189, 50%, 25%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        border: none;\n        padding-left: 13px;\n        padding-right: 13px;\n        cursor: pointer;\n      }\n      ul.projects li button,\n      ul.projects li #cta {\n        display: block;\n        border: 1px solid hsl(189, 50%, 25%);\n        position: absolute;\n        right: 18px;\n        top: 36px;\n      }\n      ul.projects li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 150px;\n        text-transform: none;\n        font-size: 12px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.projects li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 150px;\n        text-transform: uppercase;\n        font-size: 10px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 11%, 50%);\n      }\n      ul.projects li a {\n        color: var(--noflo-ui-background);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-account id=\"mainaccount\" user=\"[[user]]\" theme=\"[[theme]]\"></noflo-account>\n      <section id=\"projects\">\n        <h2>Projects\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <small>[[numberOfLocalProjects(projects)]]</small>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <small>[[numberOfRemoteProjects(remoteProjects)]]</small>\n          <button on-click=\"fetchGithub\">\n            <noflo-icon id=\"fetchgithub\" icon=\"refresh\"></noflo-icon>\n          </button>\n          </template>\n        </h2>\n        <ul class=\"tabs\">\n          <li on-click=\"openLocal\" class\\$=\"[[_isSelectedView('local', projectList)]]\">On device</li>\n          <template is=\"dom-if\" if=\"[[_canGithub(user)]]\">\n          <li on-click=\"openGithub\" class\\$=\"[[_isSelectedView('github', projectList)]]\">GitHub</li>\n          </template>\n        </ul>\n        <ul class=\"projects\">\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>New project</h2>\n            <button id=\"newproject\" on-click=\"newProject\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[projects]]\" as=\"project\" filter=\"filterLocalProjects\">\n            <li on-click=\"openProject\" data-id\\$=\"[[project.id]]\">\n              <noflo-project-card project=\"[[project]]\"></noflo-project-card>\n            </li>\n          </template>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>Add a repository</h2>\n            <button id=\"newrepository\" on-click=\"newRepository\">Add</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[remoteProjects]]\" as=\"project\" filter=\"filterRemoteProjects\">\n            <li class=\"remote\" on-click=\"downloadProject\" data-repo\\$=\"[[project.repo]]\">\n              <noflo-repo-card project=\"[[project]]\"></noflo-repo-card>\n            </li>\n          </template>\n          </template>\n        </ul>\n      </section>\n    <section id=\"runtimes\">\n      <h2>\n        Runtimes <small><span>[[numberOfAvailableRuntimes(runtimes)]]</span> / <span>[[runtimes.length]]</span></small>\n        <template is=\"dom-if\" if=\"[[_canFlowhub(user)]]\">\n        <button on-click=\"fetchRuntimes\">\n          <noflo-icon id=\"fetchruntimes\" icon=\"refresh\"></noflo-icon>\n        </button>\n        </template>\n      </h2>\n      <ul class=\"projects\">\n        <li class=\"add\">\n          <h2>New runtime</h2>\n          <button on-click=\"newRuntime\">Register</button>\n        </li>\n\n        <template is=\"dom-repeat\" items=\"[[runtimes]]\" as=\"runtime\" filter=\"filterAvailableRuntimes\">\n          <li on-click=\"openRuntime\" data-id\\$=\"[[runtime.id]]\" data-protocol\\$=\"[[runtime.protocol]]\">\n            <noflo-runtime-card runtime=\"[[runtime]]\"></noflo-runtime-card>\n          </li>\n        </template>\n      </ul>\n    </section>\n    <section id=\"examples\">\n      <h2>\n        Examples\n      </h2>\n      <ul class=\"projects\">\n        <template is=\"dom-repeat\" items=\"[[_getExamples(projects, runtimes)]]\" as=\"example\">\n        <li on-click=\"openExample\" class=\"example\" data-id\\$=\"[[example.id]]\">\n          <h2>[[example.label]]</h2>\n          <p>[[example.address]]</p>\n        </li>\n        </template>\n      </ul>\n    </section>\n`,\n\n  is: 'noflo-main',\n\n  properties: {\n    help: { value: null },\n    open: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'openChanged',\n    },\n    projectList: {\n      type: String,\n      value: 'local',\n    },\n    projects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    remoteProjects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    theme: {\n      type: String,\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.openChanged();\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  openChanged() {\n    if (String(this.open) === 'true') {\n      // Make main visible\n      this.set('style.height', '100%');\n      return;\n    }\n    this.set('style.height', '0px');\n  },\n\n  openLocal(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.projectList = 'local';\n  },\n\n  openGithub(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    event.preventDefault();\n    this.projectList = 'github';\n    if (!this.remoteProjects || this.remoteProjects.length === 0) {\n      setTimeout(() => {\n        this.fetchGithub();\n      }, 1);\n    }\n  },\n\n  downloadProject(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const repo = event.currentTarget.getAttribute('data-repo');\n    const repoParts = repo.split('/');\n    const branch = 'master';\n    this.fire('downloadProject', {\n      org: repoParts[0],\n      repo: repoParts[1],\n      branch,\n    });\n    this.openLocal();\n  },\n\n  fetchGithub(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    this.fire('fetchRemote', true);\n  },\n\n  numberOfRemoteProjects(remoteProjects) {\n    return remoteProjects.filter(this.filterRemoteProjects.bind(this)).length;\n  },\n\n  filterRemoteProjects(remoteProject) {\n    if (!this.projects) {\n      return true;\n    }\n    for (let i = 0; i < this.projects.length; i += 1) {\n      if (this.projects[i].repo === remoteProject.repo) {\n        // We already have this project checked out\n        return false;\n      }\n    }\n    return true;\n  },\n\n  numberOfLocalProjects(projects) {\n    return projects.filter(this.filterLocalProjects.bind(this)).length;\n  },\n\n  filterLocalProjects(project) {\n    if (project.type === 'flowtrace-replay') {\n      return false;\n    }\n    return true;\n  },\n\n  numberOfAvailableRuntimes(runtimes) {\n    return runtimes.filter(this.filterAvailableRuntimes.bind(this)).length;\n  },\n\n  filterAvailableRuntimes(runtime) {\n    if (!runtime) {\n      return false;\n    }\n    if (!runtime.seen) {\n      // Non-persistent runtime, don't show\n      return false;\n    }\n    if (runtime.type === 'flowtrace-replay') {\n      // Flowtrace runtimes don't make sense to show\n      return false;\n    }\n    if (runtime.protocol === 'opener' && !window.opener) {\n      // Can't use opener runtimes if opener is not defined\n      return false;\n    }\n    if (typeof runtime.seen !== 'object') {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = new Date(runtime.seen);\n    }\n    const now = new Date();\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor((now - runtime.seen) / (60 * 60 * 1000));\n    return true;\n  },\n\n  _getExamples(projects, runtimes) {\n    const runtimeTypes = [];\n    // Find examples for current runtime types\n    runtimes.forEach((runtime) => {\n      if (!runtime.type) {\n        return;\n      }\n      if (runtimeTypes.indexOf(runtime.type) === -1) {\n        runtimeTypes.push(runtime.type);\n      }\n    });\n    const examples = [];\n    runtimeTypes.forEach((type) => {\n      if (!runtimeInfo[type]) {\n        return;\n      }\n      const typeExamples = runtimeInfo[type].examples;\n      if (!typeExamples) {\n        return;\n      }\n      Object.keys(typeExamples).forEach((key) => {\n        if (typeExamples[key].ssl && window.location.protocol !== 'https:') {\n          // Skip examples that require SSL when on HTTP\n          return;\n        }\n        examples.push(typeExamples[key]);\n      });\n    });\n    const seen = [];\n    return examples.filter((example) => {\n      if (seen.indexOf(example.id) !== -1) {\n        return false;\n      }\n      seen.push(example.id);\n      const local = projects.filter((project) => {\n        if (project.gist === example.id) {\n          return true;\n        }\n        return false;\n      });\n      if (!local.length) {\n        return true;\n      }\n      return false;\n    });\n  },\n\n  fetchRuntimes() {\n    if (!this._canFlowhub(this.user)) {\n      return;\n    }\n    this.fire('fetchRuntimes', true);\n  },\n\n  openProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    let project = null;\n    this.projects.forEach((p) => {\n      if (p.id === event.currentTarget.getAttribute('data-id')) {\n        project = p;\n      }\n    });\n    if (!project) {\n      return;\n    }\n    if (project.runtime) {\n      const matchingRuntime = this.runtimes.filter(this.filterAvailableRuntimes).filter((rt) => {\n        if (rt.id === project.runtime) {\n          return true;\n        }\n        return false;\n      });\n      if (!matchingRuntime.length) {\n        // Runtime for this project is not available\n        return;\n      }\n    }\n    this.fire('openProject', project);\n  },\n\n  openRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (event.currentTarget.getAttribute('data-protocol') === 'iframe') {\n      return;\n    }\n    this.fire('hash', [\n      'runtime',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  openExample(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.fire('hash', [\n      'gist',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  newProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-project');\n    dialog.projects = this.projects;\n    dialog.runtimes = this.runtimes;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const project = ev.detail;\n      const graph = new Graph('main');\n      const graphId = `${project.id}/main`;\n      graph.setProperties({\n        id: graphId,\n        project: project.id,\n        environment: { type: project.type },\n        main: true,\n      });\n      project.graphs.push(graph);\n      project.main = graphId;\n      this.fire('newgraph', graph);\n      this.fire('newproject', project);\n    });\n  },\n\n  newRepository(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-repository');\n    dialog.addEventListener('new', (ev) => {\n      const repo = ev.detail;\n      const repoParts = repo.split('/');\n      const branch = 'master';\n      this.fire('downloadProject', {\n        org: repoParts[0],\n        repo: repoParts[1],\n        branch,\n      });\n      setTimeout(() => {\n        this.openLocal();\n      }, 1);\n    });\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  newRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-runtime');\n    dialog.addEventListener('addRuntime', (ev) => {\n      this.fire('newruntime', ev.detail);\n    });\n    dialog.user = this.user;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  _isLocalProjects(projectList) {\n    return projectList === 'local';\n  },\n\n  _canGithub(user) {\n    if (user && user['github-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _canFlowhub(user) {\n    if (user && user['flowhub-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _isSelectedView(view, list) {\n    if (list === view) {\n      return 'selected';\n    }\n    return '';\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'hammerjs';\nimport TheGraph from 'the-graph';\nimport { unnamespace } from '../src/collections';\nimport './the-graph-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-graph-styles\">\n    </style>\n    <div id=\"svgcontainer\"></div>\n`,\n\n  is: 'the-graph',\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'iconsChanged',\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'animatedEdgesChanged',\n    },\n    appView: { value: null },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    autolayouter: { value: null },\n    debounceLibraryRefeshTimer: { value: null },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'displaySelectionGroupChanged',\n    },\n    editable: {\n      type: Boolean,\n      value: true,\n    },\n    graphChanges: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'errorNodesChanged',\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'forceSelectionChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    graphView: { value: null },\n    grid: {\n      type: Number,\n      value: 72,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    library: {\n      value: null,\n      notify: true,\n    },\n    maxZoom: {\n      type: Number,\n      value: 15,\n      notify: true,\n    },\n    menus: {\n      value: null,\n      notify: true,\n      observer: 'menusChanged',\n    },\n    minZoom: {\n      type: Number,\n      value: 0.15,\n      notify: true,\n    },\n    offsetX: {\n      value: 0,\n      notify: true,\n    },\n    offsetY: {\n      value: 0,\n      notify: true,\n    },\n    pan: {\n      notify: true,\n      observer: 'panChanged',\n    },\n    readonly: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    scale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedEdgesChanged',\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedNodesChanged',\n    },\n    selectedNodesHash: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'selectedNodesHashChanged',\n    },\n    snap: {\n      type: Number,\n      value: 36,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.library = {};\n    // Default pan\n    this.pan = [\n      0,\n      0,\n    ];\n    // Initializes the autolayouter\n    this.autolayouter = klayNoflo.init({\n      onSuccess: this.applyAutolayout.bind(this),\n      workerScript: 'vendor/klayjs/klay.js',\n    });\n    this.themeChanged();\n  },\n\n  themeChanged(newTheme, previousTheme) {\n    PolymerDom(this.$.svgcontainer).classList.remove(`the-graph-${previousTheme}`);\n    if (newTheme) {\n      PolymerDom(this.$.svgcontainer).classList.add(`the-graph-${newTheme}`);\n    }\n  },\n\n  graphEvents: [\n    'changeProperties',\n    'addNode',\n    'changeNode',\n    'removeNode',\n    'addEdge',\n    'changeEdge',\n    'removeEdge',\n    'addInitial',\n    'removeInitial',\n    'addGroup',\n    'removeGroup',\n    'changeGroup',\n  ],\n\n  graphRenameEvents: [\n    'renameInport',\n    'renameOutport',\n    'renameGroup',\n    'renameNode',\n  ],\n\n  graphPortEvents: [\n    'addInport',\n    'removeInport',\n    'addOutport',\n    'removeOutport',\n  ],\n\n  subscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      this.trackGraphChange = {};\n    }\n    this.graphEvents.forEach((event) => {\n      this.trackGraphChange[event] = (payload) => {\n        this.graphChanges.push({\n          event,\n          payload,\n        });\n        if (this.autolayout) {\n          this.triggerAutolayout();\n        }\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphRenameEvents.forEach((event) => {\n      this.trackGraphChange[event] = (from, to) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            from,\n            to,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphPortEvents.forEach((event) => {\n      this.trackGraphChange[event] = (pub, priv) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            public: pub,\n            node: priv.process,\n            port: priv.port,\n            metadata: priv.metadata,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n\n    // Send changeset at end of transaction\n    this.trackGraphChange.endTransaction = () => {\n      // Send full graph for storage\n      this.fire('changed', graph);\n      // Send and clear graph change log\n      if (this.graphChanges.length) {\n        if (!this.readonly) {\n          this.fire('graphChanges', this.graphChanges);\n        }\n        this.graphChanges = [];\n      }\n    };\n    this.graph.on('endTransaction', this.trackGraphChange.endTransaction);\n  },\n\n  unsubscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      return;\n    }\n    const allEvents = this.graphEvents.concat(this.graphRenameEvents, this.graphPortEvents);\n    allEvents.forEach((event) => {\n      if (!this.trackGraphChange[event]) {\n        return;\n      }\n      graph.removeListener(event, this.trackGraphChange[event]);\n      delete this.trackGraphChange[event];\n    });\n\n    if (this.trackGraphChange.endTransaction) {\n      graph.removeListener('endTransaction', this.trackGraphChange.endTransaction);\n      delete this.trackGraphChange.endTransaction;\n    }\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (oldGraph && oldGraph.removeListener) {\n      this.unsubscribeGraph(oldGraph);\n    }\n\n    if (this.appView) {\n      // Remove previous instance\n      ReactDOM.unmountComponentAtNode(this.$.svgcontainer);\n    }\n\n    if (!this.graph) {\n      return;\n    }\n\n    // Subscribe to graph changes\n    this.subscribeGraph(newGraph);\n\n    // Setup app\n    PolymerDom(this.$.svgcontainer).innerHTML = '';\n    this.appView = ReactDOM.render(TheGraph.App({\n      graph: this.graph,\n      width: this.width,\n      minZoom: this.minZoom,\n      maxZoom: this.maxZoom,\n      height: this.height,\n      library: this.library,\n      menus: this.menus,\n      editable: this.editable,\n      onEdgeSelection: this.onEdgeSelection.bind(this),\n      onNodeSelection: this.onNodeSelection.bind(this),\n      onPanScale: this.onPanScale.bind(this),\n      getMenuDef: this.getMenuDef.bind(this),\n      displaySelectionGroup: this.displaySelectionGroup,\n      forceSelection: this.forceSelection,\n      offsetY: this.offsetY,\n      offsetX: this.offsetX,\n      readonly: this.readonly,\n    }), this.$.svgcontainer);\n    this.graphView = this.appView.refs.graph;\n  },\n\n  onPanScale(x, y, scale) {\n    this.set(`pan.${0}`, x);\n    this.set(`pan.${1}`, y);\n    this.scale = scale;\n  },\n\n  onEdgeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedEdges.length > 0) {\n        this.selectedEdges = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedEdges.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedEdges.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedEdges = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedEdges = shallowClone;\n      }\n    } else {\n      this.selectedEdges = [item];\n    }\n  },\n\n  onNodeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedNodes.length > 0) {\n        this.selectedNodes = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedNodes.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedNodes.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedNodes = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedNodes = shallowClone;\n      }\n    } else {\n      this.selectedNodes = [item];\n    }\n  },\n\n  selectedNodesChanged() {\n    this.set('selectedNodesHash', {});\n    const selectedNodesHash = {};\n    this.selectedNodes.forEach((item) => {\n      selectedNodesHash[item.id] = true;\n    });\n    this.set('selectedNodesHash', selectedNodesHash);\n    this.fire('nodes', this.selectedNodes);\n  },\n\n  selectedNodesHashChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedNodes(this.selectedNodesHash);\n  },\n\n  errorNodesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setErrorNodes(this.errorNodes);\n  },\n\n  selectedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedEdges(this.selectedEdges);\n    this.fire('edges', this.selectedEdges);\n  },\n\n  animatedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setAnimatedEdges(this.animatedEdges);\n  },\n\n  iconsChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    Object.keys(this.icons).forEach((nodeId) => {\n      this.graphView.updateIcon(nodeId, this.icons[nodeId]);\n    });\n  },\n\n  triggerAutolayout() {\n    const { graph } = this;\n    const portInfo = this.graphView ? this.graphView.portInfo : null;\n    // Calls the autolayouter\n    this.autolayouter.layout({\n      graph,\n      portInfo,\n      direction: 'RIGHT',\n      options: {\n        intCoordinates: true,\n        algorithm: 'de.cau.cs.kieler.klay.layered',\n        layoutHierarchy: true,\n        spacing: 36,\n        borderSpacing: 20,\n        edgeSpacingFactor: 0.2,\n        inLayerSpacingFactor: 2,\n        nodePlace: 'BRANDES_KOEPF',\n        nodeLayering: 'NETWORK_SIMPLEX',\n        edgeRouting: 'POLYLINE',\n        crossMin: 'LAYER_SWEEP',\n        direction: 'RIGHT',\n      },\n    });\n  },\n\n  applyAutolayout(keilerGraph) {\n    this.graph.startTransaction('autolayout');\n    TheGraph.autolayout.applyToGraph(this.graph, keilerGraph, { snap: this.snap });\n    this.graph.endTransaction('autolayout');\n    // Fit to window\n    this.triggerFit();\n  },\n\n  triggerFit() {\n    if (this.appView) {\n      this.appView.triggerFit();\n    }\n  },\n\n  widthChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ width: this.width });\n  },\n\n  heightChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ height: this.height });\n  },\n\n  rerender(options) {\n    // This is throttled with rAF internally\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.markDirty(options);\n  },\n\n  addNode(id, component, metadata) {\n    if (!this.graph) {\n      return;\n    }\n    this.graph.addNode(id, component, metadata);\n  },\n\n  getPan() {\n    if (!this.appView) {\n      return [\n        0,\n        0,\n      ];\n    }\n    return [\n      this.appView.state.x,\n      this.appView.state.y,\n    ];\n  },\n\n  panChanged() {\n    // Send pan back to React\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({\n      x: this.pan[0],\n      y: this.pan[1],\n    });\n  },\n\n  getScale() {\n    if (!this.appView) {\n      return 1;\n    }\n    return this.appView.state.scale;\n  },\n\n  displaySelectionGroupChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ displaySelectionGroup: this.displaySelectionGroup });\n  },\n\n  forceSelectionChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ forceSelection: this.forceSelection });\n  },\n\n  focusNode(node) {\n    this.appView.focusNode(node);\n  },\n\n  menusChanged() {\n    // Only if the object itself changes,\n    // otherwise builds menu from reference every time menu shown\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ menus: this.menus });\n  },\n\n  readonlyChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ readonly: this.readonly });\n  },\n\n  debounceLibraryRefesh() {\n    // Breaking the \"no debounce\" rule, this fixes #76 for subgraphs\n    if (this.debounceLibraryRefeshTimer) {\n      clearTimeout(this.debounceLibraryRefeshTimer);\n    }\n    this.debounceLibraryRefeshTimer = setTimeout(() => {\n      this.rerender({ libraryDirty: true });\n    }, 200);\n  },\n\n  registerComponent(definition, generated) {\n    const component = this.library[definition.name];\n    const def = definition;\n    if (component && generated) {\n      // Don't override real one with generated dummy\n      return;\n    }\n    this.set(`library.${definition.name}`, def);\n    // So changes are rendered\n    this.debounceLibraryRefesh();\n    // Register namespaced components also without their alias\n    if (definition.name.indexOf('/') !== -1) {\n      const unnamespaced = unnamespace(definition.name);\n      this.registerComponent({\n        ...definition,\n        name: unnamespaced,\n        unnamespaced: true,\n      }, false);\n    }\n  },\n\n  getComponent(name) {\n    return this.library[name];\n  },\n\n  toJSON() {\n    if (!this.graph) {\n      return {};\n    }\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph';\n\nPolymer({\n  _template: html`\n    <the-graph id=\"graph\" menus=\"{{menus}}\" width=\"{{width}}\" height=\"{{height}}\" pan=\"{{pan}}\" scale=\"{{scale}}\" autolayout=\"{{autolayout}}\" readonly=\"{{readonly}}\" theme=\"{{theme}}\" selected-nodes=\"{{selectedNodes}}\" error-nodes=\"{{errorNodes}}\" selected-edges=\"{{selectedEdges}}\" animated-edges=\"{{animatedEdges}}\" display-selection-group=\"{{displaySelectionGroup}}\" force-selection=\"{{forceSelection}}\" icons=\"[[icons]]\">\n    </the-graph>\n`,\n\n  is: 'the-graph-editor',\n\n  attached() {\n    this.$.graph.getMenuDef = this.getMenuDef;\n  },\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    copyNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    grid: {\n      type: Number,\n      value: 72,\n      notify: true,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    menus: { value: null },\n    notifyView: { observer: 'notifyViewChanged' },\n    onContextMenu: { notify: true },\n    pan: { observer: 'panChanged' },\n    plugins: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    readonly: { notify: true },\n    scale: {\n      type: Number,\n      value: 1,\n      observer: 'scaleChanged',\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    snap: {\n      type: Number,\n      value: 36,\n      notify: true,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.pan = [\n      0,\n      0,\n    ];\n    this.menus = TheGraph.editor.getDefaultMenus(this);\n  },\n\n  detached() {\n    Object.keys(this.plugins).forEach((name) => {\n      this.plugins[name].unregister(this);\n      delete this.plugins[name];\n    });\n  },\n\n  addPlugin(name, plugin) {\n    this.set(`plugins.${name}`, plugin);\n    plugin.register(this);\n  },\n\n  addMenu(type, options) {\n    // options: icon, label\n    this.set(`menus.${type}`, options);\n  },\n\n  addMenuCallback(type, callback) {\n    if (!this.menus[type]) {\n      return;\n    }\n    this.set(`menus.${type}.callback`, callback);\n  },\n\n  addMenuAction(type, direction, options) {\n    if (!this.menus[type]) {\n      this.set(`menus.${type}`, {});\n    }\n    const menu = this.menus[type];\n    menu[direction] = options;\n  },\n\n  getMenuDef(options) {\n    // Options: type, graph, itemKey, item\n    if (options.type && this.menus[options.type]) {\n      const defaultMenu = this.menus[options.type];\n      if (defaultMenu.callback) {\n        return defaultMenu.callback(defaultMenu, options);\n      }\n      return defaultMenu;\n    }\n    return null;\n  },\n\n  notifyViewChanged() {\n    const view = {\n      scale: this.scale,\n      pan: this.pan,\n      width: this.width,\n      height: this.height,\n    };\n    this.fire('viewchanged', view);\n  },\n\n  panChanged() {\n    this.notifyViewChanged();\n  },\n\n  scaleChanged() {\n    this.notifyViewChanged();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.notifyViewChanged();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.notifyViewChanged();\n  },\n\n  themeChanged() {\n    this.$.graph.theme = this.theme;\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      this.set('$.graph.graph', this.graph);\n      return;\n    }\n    if (typeof this.graph.addNode !== 'function') {\n      throw new Error('.graph property of the-graph-editor must be a fbp-graph instance (since the-graph 0.8)');\n    }\n    this.buildInitialLibrary(this.graph);\n    this.set('$.graph.graph', this.graph);\n  },\n\n  buildInitialLibrary(graph) {\n    /* if (Object.keys(this.$.graph.library).length !== 0) {\n      // We already have a library, skip\n      // TODO what about loading a new graph? Are we making a new editor?\n      return;\n    } */\n    const components = TheGraph.library.componentsFromGraph(graph);\n    components.forEach((component) => {\n      this.registerComponent(component, true);\n    });\n  },\n\n  registerComponent(definition, generated) {\n    this.$.graph.registerComponent(definition, generated);\n  },\n\n  libraryRefresh() {\n    this.$.graph.debounceLibraryRefesh();\n  },\n\n  rerender() {\n    this.$.graph.rerender();\n  },\n\n  triggerAutolayout() {\n    this.$.graph.triggerAutolayout();\n  },\n\n  triggerFit() {\n    this.$.graph.triggerFit();\n  },\n\n  animateEdge(edge) {\n    // Make sure unique\n    const index = this.animatedEdges.indexOf(edge);\n    if (index === -1) {\n      this.push('animatedEdges', edge);\n    }\n  },\n\n  unanimateEdge(edge) {\n    const index = this.animatedEdges.indexOf(edge);\n    if (index >= 0) {\n      this.splice('animatedEdges', index, 1);\n    }\n  },\n\n  addErrorNode(id) {\n    this.set(`errorNodes.${id}`, true);\n    this.updateErrorNodes();\n  },\n\n  removeErrorNode(id) {\n    this.set(`errorNodes.${id}`, false);\n    this.updateErrorNodes();\n  },\n\n  clearErrorNodes() {\n    this.errorNodes = {};\n    this.updateErrorNodes();\n  },\n\n  updateErrorNodes() {\n    this.$.graph.errorNodesChanged();\n  },\n\n  focusNode(node) {\n    this.$.graph.focusNode(node);\n  },\n\n  getComponent(name) {\n    return this.$.graph.getComponent(name);\n  },\n\n  getLibrary() {\n    return this.$.graph.library;\n  },\n\n  toJSON() {\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  is: 'noflo-library',\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n  },\n  addNode(component) {\n    const componentName = component.name;\n    let num = 60466176;\n    // 36^5\n    num = Math.floor(Math.random() * num);\n    const id = `${componentName}_${num.toString(36)}`;\n    // TODO fix with pan\n    const pan = this.editor.$.graph.getPan();\n    const scale = this.editor.$.graph.getScale();\n    const { graph } = this.editor;\n    graph.startTransaction('addnode');\n    const nameParts = componentName.split('/');\n    graph.addNode(id, componentName, {\n      label: nameParts[nameParts.length - 1],\n      x: Math.floor((-pan[0] + 334) / scale),\n      y: Math.floor((-pan[1] + 100) / scale),\n    });\n    // Add IIPs for default values\n    component.inports.forEach((port) => {\n      const value = port.default;\n      if (value !== undefined) {\n        graph.addInitial(value, id, port.name);\n      }\n    });\n    graph.endTransaction('addnode');\n  },\n  searchChanged() {\n    if (typeof this.search !== 'string') {\n      return;\n    }\n    if (!this.editor) {\n      return;\n    }\n    const library = this.editor.getLibrary();\n    if (!library) {\n      return;\n    }\n    const search = this.search.toLowerCase();\n    const components = Object.keys(library).map((name) => this.editor.getComponent(name));\n    const matching = components.filter((component) => {\n      if (component.unnamespaced) {\n        // Skip the non-namespaced variants from results\n        return false;\n      }\n      // First find all components matching the search\n      if (search === '') {\n        // Empty search, all components match\n        return true;\n      }\n      if (component.name.toLowerCase().indexOf(search) !== -1) {\n        // Component name matches\n        return true;\n      }\n      if (typeof component.description === 'string' && component.description.toLowerCase().indexOf(search) !== -1) {\n        // Component description matches\n        return true;\n      }\n      return false;\n    }).filter((component) => {\n      // Then filter out components we're not supposed to use\n      if (!component.subgraph) {\n        // Elementary components can always be used\n        return true;\n      }\n      const nameParts = component.name.split('/');\n      if (nameParts[0] === this.project.id || nameParts[0] === this.project.namespace) {\n        for (let i = 0; i < this.graphs.length; i += 1) {\n          if (this.graphs[i].name === nameParts[1]\n            || this.graphs[i].properties.id === nameParts[1]) {\n            // Prevent circular dependencies\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n    // timeout required because events fired by polymer that are received\n    // by graph router need to clean up before the graph receives another event\n    window.setTimeout(() => {\n      const addNode = this.addNode.bind(this);\n      this.fire('result', matching.map((component) => ({\n        label: component.name,\n        icon: component.icon || 'cog',\n        description: component.description,\n        action() {\n          addNode(component);\n        },\n      })));\n    }, 0);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Published <span>{{direction}}</span> port <span>{{publicport}}</span></h1>\n      <form>\n        <label>\n          Port name\n          <input type=\"text\" value=\"{{name::input}}\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Rename</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-exported-inspector',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    direction: {\n      type: String,\n      value: 'input',\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    privateport: {\n      value: null,\n      notify: true,\n    },\n    publicport: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.publicport;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    if (!this.name) {\n      this.canSend = false;\n      return;\n    }\n    if (this.direction === 'input' && (this.name === 'start' || this.name === 'graph')) {\n      // Reserved port names\n      this.canSend = false;\n      return;\n    }\n    this.canSend = true;\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.direction === 'input') {\n      if (this.name === 'start' || this.name === 'graph') {\n        return;\n      }\n      this.graph.renameInport(this.publicport, this.name);\n    } else {\n      this.graph.renameOutport(this.publicport, this.name);\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\nimport './noflo-icon';\n\nclass NoFloIconSelector extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: block;\n    }\n    ul.icons {\n      padding: 0px;\n      margin: 0px;\n      list-style: none;\n    }\n    ul.icons li {\n      display: inline-block;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-align: center;\n      overflow: hidden;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      transition: background-color 0.3s ease-in-out;\n      border-radius: 2px;\n      margin-right: 2px\n      margin-bottom: 2px;\n    }\n    ul.icons li.selected,\n    ul.icons li:hover {\n      background-color: hsl(190, 100%, 30%);\n      color: white;\n    }\n    </style>\n    <ul class=\"icons\">\n      <template is=\"dom-repeat\" items=\"{{icons}}\" as=\"icon\">\n        <li data-id\\$=\"[[icon]]\" class\\$=\"[[_selectedClass(icon, selected)]]\" on-click=\"selectIcon\">\n          <noflo-icon icon=\"[[icon]]\" title=\"[[icon]]\"></noflo-icon>\n        </li>\n      </template>\n    </ul>\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon-selector';\n  }\n\n  static get properties() {\n    return {\n      icons: {\n        type: Array,\n        value() {\n          return [];\n        },\n      },\n      selected: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = Object.keys(icons.getIcons());\n  }\n\n  selectIcon(event) {\n    this.selected = event.currentTarget.getAttribute('data-id');\n  }\n\n  _selectedClass(icon, selected) {\n    if (icon === selected) {\n      return 'selected';\n    }\n    return '';\n  }\n}\ncustomElements.define(NoFloIconSelector.is, NoFloIconSelector);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport './noflo-type-selector';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new graph</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Graph name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolGraph\" required=\"\">\n        </label>\n        <label>\n          Graph type\n          <select name=\"type\" value=\"{{mainGraph::input}}\">\n            <option value=\"true\" selected\\$=\"[[_isSelectedMainGraph('true', mainGraph)]]\">Main graph</option>\n            <option value=\"false\" selected\\$=\"[[_isSelectedMainGraph('false', mainGraph)]]\">Subgraph</option>\n          </select>\n        </label>\n        <label>\n          Graph description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Runtime\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-graph',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    mainGraph: {\n      type: String,\n      value: 'true',\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.project) {\n      if (!this.project.graphs || !this.project.components) {\n        return;\n      }\n      duplicates = this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newGraph');\n    }\n    const graph = new Graph(this.name);\n    graph.setProperties({\n      description: this.description,\n      project: this.project.id,\n      id: `${this.project.id}/${this.name}`,\n      icon: this.icon,\n      main: (this.mainGraph === 'true'),\n      environment: { type: this.type },\n    });\n    this.fire('new', graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _isSelectedMainGraph(value, current) {\n    return value === current;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>\n        <template is=\"dom-if\" if=\"{{group}}\">\n        <span>{{group}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{!group}}\">\n        New\n        </template>\n        group containing <span>{{nodes.length}}</span> nodes\n      </h1>\n      <form>\n        <label>\n          Group name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"processing\" required=\"\">\n        </label>\n        <label>\n          Group description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"The nodes that process things\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">\n            <template is=\"dom-if\" if=\"{{group}}\">\n            Rename\n            </template>\n            <template is=\"dom-if\" if=\"{{!group}}\">\n            Create\n            </template>\n          </button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-group-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    group: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    groupdescription: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.group;\n    this.description = this.groupdescription;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.group) {\n      if (this.name !== this.group) {\n        this.graph.renameGroup(this.group, this.name);\n      }\n      if (this.description !== this.groupdescription) {\n        this.graph.setGroupMetadata(this.group, { description: this.description });\n      }\n    } else {\n      this.graph.addGroup(this.name, this.nodes, { description: this.description });\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  is: 'the-card-stack',\n  properties: { type: { notify: true } },\n  enteredView() {\n    this.observeChanges();\n  },\n  leftView() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  observeChanges() {\n    this.observer = new MutationObserver(this.updateVisibility.bind(this));\n    this.observer.observe(this, {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n  updateVisibility() {\n    if (this.childElementCount === 0) {\n      PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './the-card-stack';\n\nPolymer({\n  _template: html`\n    <slot name=\"header\"></slot>\n    <slot></slot>\n`,\n\n  is: 'the-card',\n  properties: { type: { notify: true } },\n\n  enteredView() {\n    this.fire('show', this);\n  },\n\n  leftView() {\n    this.fire('hide', this);\n  },\n\n  addTo(parent, prepend) {\n    const stacks = parent.getElementsByTagName('the-card-stack');\n    for (let i = 0; i < stacks.length; i += 1) {\n      if (stacks[i].type === this.type) {\n        PolymerDom(stacks[i]).appendChild(this);\n        return;\n      }\n    }\n    const stack = document.createElement('the-card-stack');\n    stack.type = this.type;\n    PolymerDom(stack).appendChild(this);\n    if (prepend && parent.childElementCount > 0) {\n      PolymerDom(parent).insertBefore(stack, PolymerDom(parent).firstChild);\n      return;\n    }\n    PolymerDom(parent).appendChild(stack);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n        overflow: hidden;\n      }\n    </style>\n    <slot name=\"header\"></slot>\n    <slot></slot>\n    <slot name=\"footer\"></slot>\n`,\n\n  is: 'the-panel',\n\n  properties: {\n    automatic: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'automaticChanged',\n    },\n    edge: {\n      type: String,\n      value: 'left',\n      notify: true,\n      observer: 'edgeChanged',\n    },\n    handle: {\n      type: Number,\n      value: 0,\n      notify: true,\n      observer: 'handleChanged',\n    },\n    open: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'openChanged',\n    },\n    size: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'sizeChanged',\n    },\n  },\n\n  toggleOpen(open) {\n    this.open = open;\n    this.updateVisibility();\n  },\n\n  enteredView() {\n    this.cleanUpLocation();\n    this.automaticChanged();\n    this.updateVisibility();\n  },\n\n  leftView() {\n    this.unobserve();\n  },\n\n  edgeChanged() {\n    this.updateVisibility();\n  },\n\n  sizeChanged() {\n    this.updateVisibility();\n  },\n\n  handleChanged() {\n    this.updateVisibility();\n  },\n\n  openChanged() {\n    this.updateVisibility();\n  },\n\n  automaticChanged() {\n    if (this.automatic) {\n      this.observeChanges();\n    } else {\n      this.unobserve();\n    }\n  },\n\n  getHeader() {\n    return PolymerDom(this).querySelector('header');\n  },\n\n  getMain() {\n    return PolymerDom(this).querySelector('main');\n  },\n\n  getFooter() {\n    return PolymerDom(this).querySelector('footer');\n  },\n\n  handleClicked(event) {\n    if (this.automatic) {\n      return;\n    }\n    if (event.target !== this) {\n      return;\n    }\n    if (this.open) {\n      this.open = false;\n      return;\n    }\n    this.open = true;\n  },\n\n  observeChanges() {\n    this.observer = new MutationObserver(this.handleMutations.bind(this));\n    this.observer.observe(this.getMain(), {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n\n  unobserve() {\n    if (!this.observer) {\n      return;\n    }\n    this.observer.disconnect();\n    this.observer = null;\n  },\n\n  handleMutations() {\n    if (this.getMain().childElementCount === 0) {\n      this.open = false;\n    } else {\n      this.open = true;\n    }\n  },\n\n  getPositionDimension() {\n    return this.edge;\n  },\n\n  getSizeDimensions() {\n    switch (this.edge) {\n      case 'left':\n      case 'right':\n        return [\n          'width',\n          'height',\n        ];\n      case 'top':\n      case 'bottom':\n        return [\n          'height',\n          'width',\n        ];\n      default:\n        throw new Error(`Unknown edge ${this.edge}`);\n    }\n  },\n\n  cleanUpLocation() {\n    this.set('style.left', '');\n    this.set('style.right', '');\n    this.set('style.top', '');\n    this.set('style.bottom', '');\n  },\n\n  updateVisibility() {\n    const sizeDimensions = this.getSizeDimensions();\n    this.set(`style.${sizeDimensions[1]}`, '100%');\n    this.set(`style.${sizeDimensions[0]}`, `${this.size}px`);\n    let outside = 0;\n    if (!this.open) {\n      outside = (this.size - this.handle) * -1;\n    }\n    this.set(`style.${this.getPositionDimension()}`, `${outside}px`);\n  },\n\n  listeners: { click: 'handleClicked' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-exported-inspector';\nimport './noflo-new-graph';\nimport './noflo-group-inspector';\nimport './the-card';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      #contextsection {\n        position: fixed;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        left: 36px;\n        top: 72px;\n        width: calc(72px * 4);\n        max-height: calc(100% - 72px);\n        box-sizing: border-box;\n        display: block;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: visible;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-top: 72px;\n        top: 0px;\n        border-left-width: 1px;\n        height: 100vh;\n        padding-left: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f188';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        left: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: w-resize;\n      }\n      the-panel footer {\n        position: absolute;\n        bottom: 0px;\n        right: 0px;\n      }\n      the-panel#fixed header {\n        display: flex;\n        justify-content: space-between;\n        width: calc(72px * 4);\n        padding-right: 36px;\n        box-sizing: border-box;\n      }\n      the-panel#fixed header ul.toolbar {\n        margin: 0px;\n        padding: 0px;\n      }\n      the-panel#fixed header ul.toolbar li {\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n        list-style: none;\n      }\n      the-panel#fixed header ul.toolbar button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      the-panel#fixed header h1 {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 15px;\n        font-weight: normal;\n        line-height: 36px;\n        width: 100%;\n        color: var(--noflo-ui-text);\n        padding: 0px;\n        margin: 0px;\n      }\n      the-panel#fixed main {\n        height: calc(100% - 72px);\n        overflow-y: scroll;\n        overflow-x: hidden;\n        width: calc(72px * 4);\n      }\n      the-panel#fixed main p {\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main ul {\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        margin-top: 0px;\n        padding-top: 0px;\n        margin-left: 0px;\n        padding-left: 0px;\n        width: 252px;\n      }\n      the-panel#fixed main li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-left: 0px;\n        padding-left: 0px;\n        margin-bottom: 0px;\n        color: var(--noflo-ui-text-highlight);\n        margin-bottom: 4px;\n        padding-bottom: 2px;\n        border-bottom: 1px hsla(190, 100%, 30%, 0.4) solid;\n        list-style: none;\n      }\n      the-panel#fixed main li.error,\n      the-panel#fixed main li.processerror,\n      the-panel#fixed main li.networkerror,\n      the-panel#fixed main li.protocolerror {\n        color: hsl(  0,  98%, 46%);\n      }\n      the-panel#fixed main li pre {\n        color: rgba(179, 222, 230, 0.5);\n        font-size: 8px;\n      }\n      the-panel#fixed main li.output {\n        color: var(--noflo-ui-text);\n      }\n    </style>\n    <section id=\"contextsection\"></section>\n    <the-panel id=\"fixed\" edge=\"right\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <h1>Runtime events</h1>\n        <template is=\"dom-if\" if=\"[[events.length]]\">\n          <ul class=\"toolbar\">\n            <li>\n              <button id=\"clear\" on-click=\"clearEvents\" class=\"blue-button\" title=\"Clear Event Log\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n             </li>\n          </ul>\n        </template>\n      </header>\n      <main id=\"fixedmain\">\n        <template is=\"dom-if\" if=\"[[runtime]]\">\n          <ul>\n          <template is=\"dom-repeat\" items=\"[[events]]\" as=\"event\">\n            <li class\\$=\"{{ event.type }}\">\n              <template is=\"dom-if\" if=\"[[_ifEventIsPlain(event)]]\">\n                {{ event.type }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsProcessError(event)]]\">\n                {{ event.payload.error }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsError(event)]]\">\n                {{ event.payload.message }}\n                <template is=\"dom-if\" if=\"[[_ifEventHasStack(event)]]\"><pre>{{ event.payload.stack }}</pre></template>\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsOutput(event)]]\">\n                {{ event.payload.message }}\n              </template>\n              <template is=\"dom-if\" if=\"[[_ifEventIsStopStart(event)]]\">\n                {{ event.payload.graph }} {{ event.type }}\n              </template>\n            </li>\n          </template>\n          </ul>\n        </template>\n        <template is=\"dom-if\" if=\"[[!runtime]]\">\n          <p>Not connected to a runtime.</p>\n        </template>\n      </main>\n      <footer slot=\"footer\"></footer>\n    </the-panel>\n`,\n\n  is: 'noflo-context',\n\n  properties: {\n    component: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'componentChanged',\n    },\n    edge: { notify: true },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    editor: {\n      value: null,\n      observer: 'editorChanged',\n    },\n    errors: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    help: { value: null },\n    node: { notify: true },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    readonly: { notify: true },\n    runtime: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.contextBar = this.$.contextsection;\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    // Workaround for https://github.com/Polymer/PointerEvents/issues/134\n    document.addEventListener('touchstart', () => {\n    });\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n\n  getpanel() {\n    this.fire('toolpanel', this.$.fixed);\n    this.fire('contextpanel', this.$.contextsection);\n  },\n\n  editorChanged() {\n    if (!this.editor) {\n      return;\n    }\n    const emptyOnReadOnly = (defaultMenu) => {\n      if (this.readonly) {\n        return {};\n      }\n      return defaultMenu;\n    };\n    this.editor.addMenuCallback('main', emptyOnReadOnly);\n    this.editor.addMenuCallback('edge', emptyOnReadOnly);\n    this.editor.addMenuCallback('node', (defaultMenu, options) => {\n      const localMenu = emptyOnReadOnly(defaultMenu, options);\n      if (!options.item.component) {\n        return localMenu;\n      }\n      if (!this.canGetSource(options.item.component)) {\n        return localMenu;\n      }\n      localMenu.n4 = {\n        icon: 'arrow-circle-o-up',\n        iconLabel: 'open',\n        action: (graph, itemKey, item) => {\n          if (typeof ga === 'function') {\n            ga('send', 'event', 'menu', 'click', 'openNode');\n          }\n          let hash = window.location.href.split('#')[1] || '';\n          if (graph === this.graphs[0] && graph.properties.id) {\n            const currentGraphId = encodeURIComponent(graph.properties.id);\n            if (hash.indexOf(currentGraphId) === -1) {\n              hash += `/${currentGraphId}`;\n            }\n          }\n          window.location.hash = `${hash}/${encodeURIComponent(item.id)}`;\n        },\n      };\n      return localMenu;\n    });\n    this.editor.addMenuCallback('nodeInport', emptyOnReadOnly);\n    this.editor.addMenuCallback('nodeOutport', emptyOnReadOnly);\n    this.editor.addMenuCallback('graphInport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'input';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('graphOutport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'output';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('group', emptyOnReadOnly);\n    this.editor.addMenuCallback('selection', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        e4: {\n          icon: 'sitemap',\n          iconLabel: 'graph',\n          action: this.subgraph.bind(this),\n        },\n        w4: {\n          icon: 'square-o',\n          iconLabel: 'group',\n          action: this.group.bind(this),\n        },\n      };\n    });\n  },\n\n  edgesChanged() {\n    this.fire('edges', this.edges);\n  },\n\n  eventsChanged() {\n    this.$.fixedmain.scrollTop = this.$.fixedmain.scrollHeight;\n  },\n\n  componentChanged() {\n    if (this.component && typeof this.component === 'object' && !this.component.name) {\n      this.component = null;\n    }\n    if (this.component && typeof ga === 'function') {\n      ga('send', 'event', 'url', 'navigation', 'openComponent');\n    }\n    this.fire('component', this.component);\n  },\n\n  group(graph, itemKey, item) {\n    if (this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createGroup');\n    }\n    // See if the nodes are already part of a group\n    let group = '';\n    let description = '';\n    const selectedNodes = item.nodes;\n    selectedNodes.sort();\n    graph.groups.forEach((grp) => {\n      const grpNodes = JSON.parse(JSON.stringify(grp.nodes));\n      grpNodes.sort();\n      if (grpNodes.join(',') === selectedNodes.join(',')) {\n        group = grp.name;\n        description = grp.metadata.description;\n      }\n    });\n    const dialog = document.createElement('noflo-group-inspector');\n    dialog.group = group;\n    dialog.groupdescription = description;\n    dialog.nodes = selectedNodes;\n    dialog.graph = graph;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  subgraph(currentGraph, itemKey, item) {\n    if (!this.project || this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createSubgraph');\n    }\n    // Ask user to name the new subgraph\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.runtimes = this.runtimes;\n    dialog.type = currentGraph.properties.environment.type;\n    dialog.project = this.project;\n    dialog.mainGraph = 'false';\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (event) => {\n      // Register new subgraph\n      this.fire('newsubgraph', {\n        currentGraph,\n        subgraph: event.detail,\n        nodes: item.nodes,\n        project: this.project,\n      });\n      // Editor deselect, hide node inspectors\n      if (this.editor) {\n        this.editor.selectedNodes = [];\n      }\n    });\n  },\n\n  setHelp() {\n    // If manually triggered, show something relevant\n    if (!this.help) {\n      return;\n    }\n    this.set('help.headline', `${process.env.NOFLO_APP_TITLE} graph editor`);\n    this.set('help.text', 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n  },\n\n  showHelp(graph) {\n    if (!this.help) {\n      return;\n    }\n    this.help.show(`${process.env.NOFLO_APP_TITLE} graph editor`, 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n    graph.once('addNode', () => {\n      this.help.close();\n    });\n  },\n\n  libraryMatch(library, project) {\n    const namespace = project.namespace || project.id;\n    if (library === namespace) {\n      return true;\n    }\n    if (library === namespace.replace('noflo-')) {\n      return true;\n    }\n    return false;\n  },\n\n  canGetSource(component) {\n    const componentParts = component.split('/');\n    if (componentParts.length > 1\n      && this.project\n      && this.libraryMatch(componentParts.shift(), this.project)) {\n      // Local component, see if it is available\n      for (let i = 0; i < this.project.graphs.length; i += 1) {\n        if (this.project.graphs[i].name === componentParts[0]) {\n          return true;\n        }\n        if (this.project.graphs[i].properties.id === componentParts[0]) {\n          return true;\n        }\n      }\n      for (let i = 0; i < this.project.components.length; i += 1) {\n        if (this.project.components[i].name === componentParts[0]) {\n          return true;\n        }\n      }\n    }\n    // Otherwise we check if Runtime can get it for us\n    if (!this.runtime.definition || !this.runtime.definition.capabilities) {\n      return false;\n    }\n    if (this.runtime.definition.capabilities.indexOf('component:getsource') === -1) {\n      return false;\n    }\n    return this.runtime.status.online;\n  },\n\n  clearEvents() {\n    this.fire('clear:runtimeevents', {\n      all: true,\n    });\n  },\n\n  _ifEventIsPlain(event) {\n    return (['stopped', 'started', 'output', 'error', 'processerror', 'networkerror', 'protocolerror'].indexOf(event.type) === -1);\n  },\n\n  _ifEventIsProcessError(event) {\n    return (['processerror'].indexOf(event.type) !== -1);\n  },\n\n  _ifEventIsError(event) {\n    return (['error', 'networkerror', 'protocolerror'].indexOf(event.type) !== -1);\n  },\n\n  _ifEventHasStack(event) {\n    return (['error', 'networkerror'].indexOf(event.type) !== -1 && event.payload.stack && event.payload.stack.length && event.payload.message.indexOf('Runtime sent invalid') === -1);\n  },\n\n  _ifEventIsOutput(event) {\n    return (event.type === 'output' && event.payload.message);\n  },\n\n  _ifEventIsStopStart(event) {\n    return (['stopped', 'started'].indexOf(event.type) !== -1 && event.payload.graph);\n  },\n});\n","import React from 'react';\n\nfunction TestStatus(props) {\n  const state = {\n    passed: 0,\n    failed: 0,\n    skipped: 0,\n    total: 0,\n  };\n  props.suites.forEach((suite) => {\n    suite.cases.forEach((testCase) => {\n      state.total += 1;\n      if (suite.skip || testCase.skip) {\n        state.skipped += 1;\n        return;\n      }\n      if (testCase.passed === true) {\n        state.passed += 1;\n      }\n      if (testCase.passed === false) {\n        state.failed += 1;\n      }\n    });\n  });\n  return (\n    <ul className=\"test-status\">\n      <li className=\"pass\">{state.passed}</li>\n      <li className=\"fail\">{state.failed}</li>\n      <li className=\"skip\">{state.skipped}</li>\n      <li className=\"total\">{state.total}</li>\n    </ul>\n  );\n}\n\nexport default TestStatus;\n","import React from 'react';\n\nfunction stateToClass(testCase, suite) {\n  if (testCase.skip || suite.skip) {\n    return 'skip';\n  }\n  if (testCase.passed === true) {\n    return 'pass';\n  }\n  if (testCase.passed === false) {\n    return 'fail';\n  }\n  return 'pending';\n}\n\nfunction TestStatusDetailed(props) {\n  return (\n    <ul>\n      {\n        props.suites.map((suite) => (\n          <li className=\"testsuite\">\n            <div className=\"suite-header\">\n              <label className=\"name\">{suite.name}</label>\n              <label className=\"topic\">{suite.topic}</label>\n            </div>\n            <ul>\n              {\n                suite.cases.map((testCase) => (\n                  <li className={stateToClass(testCase, suite)}>\n                    <div className=\"testcase\">\n                      <label className=\"name\">{testCase.name}</label>\n                      <label className=\"assertion\">{testCase.assertion}</label>\n                      <label className=\"error\">{testCase.error || ''}</label>\n                    </div>\n                  </li>\n                ))\n              }\n            </ul>\n          </li>\n        ))\n      }\n    </ul>\n  );\n}\n\nexport default TestStatusDetailed;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Launch noflo-browser device</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"text\" value=\"{{baseApp::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"info\">\n        <div><a id=\"runtimeLink\" href\\$=\"{{runtimeUrl}}\">Launch</a></div>\n        <div><img id=\"qrcode\" src=\"{{qrCodeUrl}}\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-browserdebug',\n\n  properties: {\n    baseApp: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser-app/main.html',\n    },\n    graph: { notify: true },\n    qrCodeUrl: {\n      type: String,\n      value: '',\n    },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const signaller = 'https://api.flowhub.io';\n    const id = uuid();\n    const address = `${signaller}#${id}`;\n    const params = `?fbp_noload=true&fbp_protocol=webrtc&fbp_address=${encodeURIComponent(address)}`;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1931',\n      // FIXME: correct\n      secret: 'my-super-secret',\n      // FIXME: correct\n      label: 'noflo-browser live debug',\n      description: 'On device debugging project',\n      graph: this.graph.properties.id,\n      protocol: 'webrtc',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n    const appDebugUrl = this.baseApp + params;\n    const qrBase = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=';\n    this.qrCodeUrl = qrBase + encodeURIComponent(appDebugUrl);\n    this.runtimeUrl = appDebugUrl;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Open noflo-browser runtime in preview area</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"url\" value=\"{{runtimeUrl::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-customiframe',\n\n  properties: {\n    graph: { notify: true },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser/everything.html',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const id = uuid();\n    // TODO: make a hash of the URL instead??\n    const params = '?fbp_noload=true&fbp_protocol=iframe';\n    const address = this.runtimeUrl + params;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1932',\n      // FIXME: correct\n      label: 'noflo-browser iframe',\n      description: 'running in iframe',\n      graph: this.graph.properties.id,\n      protocol: 'iframe',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimelib from '../src/runtime';\nimport './noflo-runtime-browserdebug';\nimport './noflo-runtime-customiframe';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      ul.runtimes {\n        padding: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n        margin-top: 18px;\n        margin-bottom: 18px;\n      }\n      ul.runtimes li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 60%);\n        color: white;\n        transition: background-color 0.3s ease-in-out;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.runtimes li.selected,\n      ul.runtimes li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Select runtime for <span>{{graph.name}}</span></h1>\n      <template is=\"dom-if\" if=\"{{available.length}}\">\n        <ul class=\"runtimes modal-content\">\n          <template is=\"dom-repeat\" items=\"{{available}}\" as=\"runtime\">\n          <li on-click=\"selectRuntime\" data-id\\$=\"{{runtime.id}}\" class\\$=\"{{runtime.type}}\">\n            <h2>{{runtime.label}}</h2>\n            <p><span>{{runtime.address}}</span>.<br>Seen <span>{{runtime.seenHoursAgo}}</span>h ago</p>\n          </li>\n          </template>\n        </ul>\n      </template>\n      <template is=\"dom-if\" if=\"{{!available.length}}\">\n        <p>No compatible runtimes available.</p>\n      </template>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graph: { notify: true },\n    component: { notify: true },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    let type;\n    if (this.component) {\n      type = runtimelib.getComponentType(this.component);\n    }\n    if (this.graph) {\n      type = runtimelib.getGraphType(this.graph);\n    }\n    if (!type) {\n      type = 'all';\n    }\n    // Insert button to launch new runtime for noflo-browser\n    const launchNewBrowserRuntime = {\n      id: 'new-browser-runtime',\n      label: 'Launch new runtime',\n      address: 'WebRTC',\n    };\n    const customIframeRuntime = {\n      id: 'custom-iframe-address',\n      label: 'Custom iframe URL',\n      address: 'myapp.html',\n    };\n    const launchImgfloHerokuRuntime = {\n      id: 'imgflo-heroku-new',\n      label: 'New imgflo app on Heroku',\n      address: 'myapp.herokuapps.com',\n    };\n    if (type === 'noflo-browser') {\n      this.push('available', launchNewBrowserRuntime);\n      this.push('available', customIframeRuntime);\n    }\n    if (type === 'imgflo') {\n      this.push('available', launchImgfloHerokuRuntime);\n    }\n    this.runtimes.forEach((rt) => {\n      this.push('available', rt);\n    });\n    this.available.forEach(this.checkRuntimeSeen.bind(this));\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  // similiar to in noflo-main.html\n  checkRuntimeSeen(runtime) {\n    if (!runtime.seen) {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = Date.now();\n    }\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor(\n      (Date.now() - new Date(runtime.seen).getTime()) / (60 * 60 * 1000),\n    );\n    if (runtime.seenHoursAgo / 24 > 31) {\n      // We haven't seen this runtime in over a month, don't show it\n      const index = this.available.indexOf(runtime);\n      this.splice('available', index, 1);\n    }\n  },\n\n  selectRuntime(event) {\n    const id = event.currentTarget.getAttribute('data-id');\n    if (id === 'new-browser-runtime') {\n      // Launch new runtime instead of connect to existing\n      this.close();\n      this.debugOnDevice();\n      return;\n    } if (id === 'custom-iframe-address') {\n      // Add new iframe runtime for given address\n      this.close();\n      this.addIframeRuntime();\n      return;\n    } if (id === 'imgflo-heroku-new') {\n      this.close();\n      this.deployHeroku('https://github.com/jonnor/imgflo');\n    }\n    this.runtimes.forEach((runtime) => {\n      if (runtime.id === id) {\n        this.fire('runtime', runtime);\n        this.close();\n      }\n    });\n  },\n\n  debugOnDevice() {\n    this.debugOnDeviceModal = document.createElement('noflo-runtime-browserdebug');\n    this.set('debugOnDeviceModal.graph', this.graph);\n    this.debugOnDeviceModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.debugOnDeviceModal);\n  },\n\n  addIframeRuntime() {\n    this.addIframeModal = document.createElement('noflo-runtime-customiframe');\n    this.set('addIframeModal.graph', this.graph);\n    this.addIframeModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.addIframeModal);\n  },\n\n  deployHeroku(template) {\n    // Send user over to Heroku\n    // The deployed runtime will then have a link which takes them back to Flowhub\n    // TODO: inform the user about this process\n    const baseUrl = 'https://dashboard.heroku.com/new?template=';\n    document.location.href = baseUrl + encodeURIComponent(template);\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatusDetailed from '../src/components/TestStatusDetailed';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #testlisting ul {\n        padding: 0px;\n      }\n      li .suite-header label.topic {\n        font-weight: bold;\n      }\n      li .suite-header label {\n        display: inline !important;\n        padding-right: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      li.testsuite {\n        margin-bottom: 1em;\n      }\n      li {\n        list-style: none;\n      }\n      li.testsuite li {\n        margin-left: 28px;\n      }\n      li label {\n        display: inline;\n        margin-top: 7px !important;\n      }\n      li label.assertion {\n        padding-left: 8px;\n      }\n      li label.error {\n        margin-bottom: 8px;\n        font-style: italic;\n        display: block;\n      }\n      li.pass {\n        color: hsl(135, 98%, 46%);\n        list-style: disc;\n      }\n      li.fail {\n        color: hsl(0, 98%, 46%);\n        list-style: square;\n      }\n      li.skip {\n        color: hsl( 60, 98%, 46%);\n        list-style: disc;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <div class=\"modal-content\">\n        <div id=\"testlisting\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-testdetails',\n\n  properties: {\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    const container = this.shadowRoot.getElementById('testlisting');\n    ReactDOM.render(TestStatusDetailed({ suites: this.suites }), container);\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatus from '../src/components/TestStatus';\nimport './noflo-runtime-selector';\nimport './noflo-runtime-testdetails';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding-left: 18px;\n        box-sizing: border-box;\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n      }\n\n      #runtime_icon {\n        position: absolute;\n        right: 8px;\n        top: 0px;\n        font-size: 72px;\n        color: hsla(185, 100%, 75%, 0.1);\n      }\n\n      #teststatus {\n        position: absolute;\n        right: 0px;\n        z-index: 1;\n        width: 100px;\n      }\n      #teststatus ul {\n        margin: 0px;\n        padding: 0px;\n      }\n      #teststatus ul li {\n        display: inline;\n        padding-left: 8px;\n        line-height: 36px;\n      }\n      #teststatus ul li.pass {\n        color: hsl(135, 98%, 46%);\n      }\n      #teststatus ul li.fail {\n        color: hsl(0, 98%, 46%);\n      }\n      #teststatus ul li.skip {\n        color: hsl( 60, 98%, 46%);\n      }\n\n      h2 {\n        font-size: 14px;\n        width: 216px;\n        font-weight: normal;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n      }\n\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text-highlight);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      #address h2 {\n        position: absolute;\n        left: 54px;\n        width: 180px;\n        top: 0px;\n        color: var(--noflo-ui-text);\n      }\n\n      #address, #address button {\n        color: #e70215;\n      }\n      .online#address, .online#address button {\n        color: #01d159;\n      }\n      #address button.clear {\n        position: absolute;\n        right: 0px;\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #runcontrol h2 {\n        position: absolute;\n        left: 54px;\n        top: 36px;\n      }\n      #runcontrol button {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #select {\n        text-align: center;\n      }\n      #select button.select {\n        width: auto;\n        height: auto;\n        background-color: hsl(190, 90%, 45%);\n        color: hsla(0, 0%, 0%, 0.98);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        margin-top: 18px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{runtime}}\">\n      <noflo-icon id=\"runtime_icon\" icon=\"{{icon}}\"></noflo-icon>\n      <div id=\"address\" class\\$=\"{{_computeOnlineClass(runtime.status.online)}}\">\n        <button title=\"Connect/Disconnect\" on-click=\"reconnect\"><noflo-icon icon=\"refresh\"></noflo-icon></button>\n        <h2>{{_produceAddress(runtime)}}</h2>\n        <button title=\"Change Runtime\" on-click=\"clearRuntime\" class=\"clear\"><noflo-icon icon=\"exchange\"></noflo-icon></button>\n      </div>\n      <div id=\"teststatus\" on-click=\"showTestDetails\"></div>\n      <div id=\"runcontrol\">\n        <template is=\"dom-if\" if=\"{{runtime.status.online}}\">\n          <template is=\"dom-if\" if=\"{{runtime.execution.running}}\">\n            <button title=\"Stop\" class=\"stop\" on-click=\"stop\"><noflo-icon icon=\"pause\"></noflo-icon></button>\n          </template>\n          <template is=\"dom-if\" if=\"{{!runtime.execution.running}}\">\n            <button title=\"Start\" class=\"start\" on-click=\"start\"><noflo-icon icon=\"play\"></noflo-icon></button>\n          </template>\n          <h2>{{runtime.execution.label}}</h2>\n        </template>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!runtime}}\">\n      <div id=\"select\">\n        <button on-click=\"selectRuntime\" class=\"select\">Select runtime</button>\n      </div>\n    </template>\n`,\n\n  is: 'noflo-runtime',\n\n  properties: {\n    icon: {\n      type: String,\n      value: 'asterisk',\n    },\n    graph: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    panel: { value: null },\n    iframe: { value: null },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n  },\n\n  clearRuntime() {\n    // Disassociate old runtime with this project\n    this.runtime.definition.project = null;\n    this.fire('changed', this.runtime.definition);\n    this.set('runtime', null);\n    this.graphChanged();\n  },\n\n  graphChanged() {\n    if (this.runtimeSelector) {\n      if (PolymerDom(this.runtimeSelector).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeSelector).parentNode).removeChild(this.runtimeSelector);\n      }\n      this.runtimeSelector = null;\n    }\n  },\n\n  runtimeChanged() {\n    const runtimeIframe = this.getRuntimeIframe();\n    if (this.iframe && this.iframe !== runtimeIframe) {\n      // Hide old iframe\n      this.hideCard();\n    }\n    this.iframe = runtimeIframe;\n    if (!this.runtime) {\n      return;\n    }\n    this.set('icon', this.getRuntimeIcon(this.runtime));\n    if (!this.runtime.status || !this.runtime.status.online) {\n      this.hideCard();\n    } else if (this.runtime.execution && this.runtime.execution.running) {\n      this.showCard();\n    }\n  },\n\n  start(event) {\n    event.preventDefault();\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.showCard();\n    this.fire('start', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  stop(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.fire('stop', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  reconnect(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    this.fire('reconnect', {\n      runtime: this.runtime.definition.id,\n    });\n  },\n\n  showTests(suites) {\n    this.suites = suites;\n    const container = this.shadowRoot.getElementById('teststatus');\n    ReactDOM.render(TestStatus({ suites: this.suites }), container);\n  },\n\n  showTestDetails() {\n    if (!this.suites || !this.suites.length) {\n      return;\n    }\n    const details = document.createElement('noflo-runtime-testdetails');\n    details.suites = this.suites;\n    PolymerDom(document.body).appendChild(details);\n  },\n\n  showCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'block');\n  },\n\n  hideCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'none');\n  },\n\n  getRuntimeIframe() {\n    if (!this.runtime || !this.runtime.definition) {\n      return null;\n    }\n    if (!this.runtime.definition.querySelector) {\n      return null;\n    }\n    const iframe = document.body.querySelector(this.runtime.definition.querySelector);\n    if (!iframe) {\n      return null;\n    }\n    return iframe;\n  },\n\n  setIframeVisibility(iframe, visibility) {\n    // eslint-disable-next-line no-param-reassign\n    iframe.style.display = visibility;\n  },\n\n  selectRuntime() {\n    if (!this.graph && !this.component) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.runtimeSelector = document.createElement('noflo-runtime-selector');\n    this.set('runtimeSelector.runtimes', this.runtimes);\n    this.set('runtimeSelector.graph', this.graph);\n    this.set('runtimeSelector.component', this.component);\n    this.runtimeSelector.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      if (this.graph) {\n        runtime.project = this.graph.properties.project;\n      }\n      if (this.component) {\n        runtime.project = this.component.project;\n      }\n      this.fire('changed', runtime);\n      setTimeout(() => {\n        this.fire('switchRuntime', runtime.id);\n      }, 10);\n    });\n    PolymerDom(document.body).appendChild(this.runtimeSelector);\n  },\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.definition || !runtime.definition.type) {\n      return 'cog';\n    }\n    switch (runtime.definition.type) {\n      case 'noflo-browser':\n        return 'html5';\n      case 'noflo-nodejs':\n        return 'cloud';\n      case 'noflo-gnome':\n        return 'desktop';\n      case 'microflo':\n        return 'lightbulb-o';\n      case 'javafbp':\n        return 'android';\n      case 'imgflo':\n        return 'picture-o';\n      case 'sndflo':\n        return 'music';\n      case 'flowtrace-replay':\n        return 'pause-circle';\n      default:\n        return 'cog';\n    }\n  },\n\n  _computeOnlineClass(online) {\n    return this.tokenList({ online });\n  },\n\n  _produceAddress(runtime) {\n    if (!runtime.definition) {\n      return '';\n    }\n    if (runtime.definition.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.definition.id}`;\n    }\n    return runtime.definition.address;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","/*\n\n* Wraps the-graph-thumb with a current view bounding box\n* Observes changes from attached instance of the-graph-editor\n\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph-thumb';\n\nPolymer({\n  _template: html`\n    <style>\n      #thumb, \n      #outcanvas {\n        position: absolute;\n        top: 0;\n        left: 0;\n        overflow: visible;\n      }\n      #viewrect {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 200px;\n        height: 150px;\n        border: 1px solid hsla(190, 100%, 80%, 0.4);\n        border-style: dotted;\n      }\n    </style>\n    <the-graph-thumb id=\"thumb\" graph=\"{{graph}}\" thumbrectangle=\"{{thumbrectangle}}\" width=\"{{width}}\" height=\"{{height}}\" thumbscale=\"{{thumbscale}}\" theme=\"{{theme}}\">\n    </the-graph-thumb>\n    <canvas id=\"outcanvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n    <div id=\"viewrect\"></div>\n`,\n\n  is: 'the-graph-nav',\n\n  properties: {\n    backgroundColor: {\n      type: String,\n      value: 'hsla(184, 8%, 75%, 0.9)',\n    },\n    graph: { notify: true },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n    },\n    hide: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'hideChanged',\n    },\n    outsideFill: {\n      type: String,\n      value: 'hsla(0, 0%, 0%, 0.4)',\n    },\n    theme: {\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { observer: 'thumbrectangleChanged' },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      observer: 'thumbscaleChanged',\n    },\n    view: { observer: 'viewChanged' },\n    viewrectangle: { observer: 'viewrectangleChanged' },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n    },\n  },\n\n  ready() {\n    this.viewrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.scaledviewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n    this.theme = 'dark';\n  },\n\n  attached() {\n    this.set('style.overflow', 'hidden');\n    this.set('style.cursor', 'move');\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n  },\n\n  viewChanged(_, view) {\n    if (!view) {\n      return;\n    }\n    const x = view.pan[0];\n    const y = view.pan[1];\n    this.viewrectangle = [-x, -y, view.width, view.height];\n    this.scale = view.scale;\n  },\n\n  themeChanged() {\n    const style = TheGraph.nav.calculateStyleFromTheme(this.theme);\n    this.backgroundColor = style.backgroundColor;\n    this.viewBoxBorder = style.viewBoxBorder;\n    this.viewBoxBorder2 = style.viewBoxBorder2;\n    this.outsideFill = style.outsideFill;\n    this.set('style.backgroundColor', this.backgroundColor);\n    // Redraw rectangle\n    this.viewrectangleChanged();\n  },\n\n  viewrectangleChanged() {\n    if (!this.viewrectangle || !this.viewrectangle.length) {\n      return;\n    }\n    // Canvas to grey out outside view\n    const context = this.$.outcanvas.getContext('2d');\n    const properties = {\n      width: this.width,\n      height: this.height,\n      scale: this.scale,\n      thumbscale: this.thumbscale,\n      thumbrectangle: this.thumbrectangle,\n      viewrectangle: this.viewrectangle,\n      viewBoxBorder: this.viewBoxBorder,\n      viewBoxBorder2: this.viewBoxBorder2,\n      outsideFill: this.outsideFill,\n    };\n    const nav = TheGraph.nav.render(context, this.$.viewrect, properties);\n    this.hide = nav.hide;\n  },\n\n  // this.scaledviewrectangle = [x, y, w, h];\n  hideChanged() {\n    if (this.hide) {\n      this.set('style.display', 'none');\n    } else {\n      this.set('style.display', 'block');\n    }\n  },\n\n  thumbscaleChanged() {\n    this.viewrectangleChanged();\n  },\n\n  thumbrectangleChanged() {\n    // Binding this from the-graph-thumb to know the dimensions rendered\n    const w = this.thumbrectangle[2];\n    const h = this.thumbrectangle[3];\n    this.thumbscale = w > h ? this.width / w : this.height / h;\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { Journal } from 'fbp-graph';\nimport { IDBJournalStore } from '../src/JournalStore';\nimport './the-graph-nav';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      #controls {\n        display: block;\n        position: fixed;\n        right: 36px;\n        bottom: 0;\n        width: 288px;\n        height: 180px;\n        color: var(--noflo-ui-text-highlight);\n        box-sizing: border-box;\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px -1px;\n        border-top: 1px solid var(--noflo-ui-border);\n      }\n\n      #controls button {\n        line-height: 36px;\n        border: none;\n        background-color: transparent;\n        font-size: 14px;\n        width: 72px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: pointer;\n      }\n      #controls button.undo {\n        position: absolute;\n        left: 0;\n        bottom: 0;\n      }\n      #controls button.redo {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n      }\n      #controls button.disabled {\n        color: rgba(179, 222, 230, 0.2);\n      }\n      #controls button.autolayout {\n        position: absolute;\n        left: calc(50% - 18px);\n        bottom: 0;\n      }\n\n      #nav {\n        position: absolute;\n        left: 0;\n        top: 0;\n      }\n    </style>\n    <div id=\"controls\">\n      <the-graph-nav id=\"nav\" width=\"288\" height=\"144\" graph=\"{{graph}}\" hide=\"{{hidenav}}\"></the-graph-nav>\n\n      <template is=\"dom-if\" if=\"{{graph}}\">\n        <button title=\"Undo\" on-click=\"undo\" class\\$=\"{{_computeClass(canUndo)}}\">\n          <noflo-icon icon=\"undo\"></noflo-icon>\n        </button>\n        <template is=\"dom-if\" if=\"{{klay}}\">\n          <button title=\"Autolayout\" class=\"autolayout\" on-click=\"autolayout\">\n            <noflo-icon icon=\"magic\"></noflo-icon>\n          </button>\n        </template>\n        <button title=\"Redo\" on-click=\"{{_computeClass2(canRedo)}}\" class\\$=\"{{_computeClass(canRedo)}}\">\n          <noflo-icon icon=\"repeat\"></noflo-icon>\n        </button>\n      </template>\n    </div>\n`,\n\n  is: 'noflo-journal',\n\n  properties: {\n    canRedo: {\n      type: Boolean,\n      value: false,\n    },\n    canUndo: {\n      type: Boolean,\n      value: false,\n    },\n    db: {\n      value: null,\n      notify: true,\n      observer: 'dbChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n      observer: 'editorChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    hidenav: {\n      type: Boolean,\n      value: false,\n      observer: 'hidenavChanged',\n    },\n    klay: {\n      type: Boolean,\n      value: false,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    panel: { notify: true },\n    returnTo: { value: null },\n  },\n\n  attached() {\n    this.klay = true;\n  },\n\n  editorChanged(newEditor) {\n    if (!newEditor) {\n      return;\n    }\n    // Connect nav and editor together\n    const { nav } = this.$;\n    const editor = newEditor;\n    editor.addEventListener('viewchanged', (e) => {\n      nav.view = e.detail;\n    });\n    nav.addEventListener('panto', (e) => {\n      const pan = e.detail;\n      if (pan.x !== editor.pan[0] || pan.y !== editor.pan[1]) {\n        editor.pan[0] = pan.x;\n        editor.pan[1] = pan.y;\n      }\n    });\n    nav.addEventListener('tap', () => {\n      editor.triggerFit();\n    });\n  },\n\n  graphChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  dbChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  componentChanged() {\n    if (this.component && this.component.name) {\n      this.hidenav = true;\n    } else {\n      this.hidenav = false;\n    }\n  },\n\n  connectJournal() {\n    if (!this.graph || !this.graph.on || !this.db) {\n      return;\n    }\n    const positionedNodes = this.graph.nodes.filter((node) => {\n      if (!node.metadata) {\n        return false;\n      }\n      if (!node.metadata.x || !node.metadata.y) {\n        return false;\n      }\n      return true;\n    });\n    if (this.graph.nodes.length && !positionedNodes.length) {\n      setTimeout(() => {\n        this.autolayout();\n      }, 10);\n    }\n    if (!this.graph.properties.project || this.graph.journal || !this.db) {\n      return;\n    }\n    // Initialize persistent journal whenever needed\n    const store = new IDBJournalStore(this.graph, this.db);\n    store.init(() => {\n      this.graph.journal = new Journal(this.graph, undefined, store);\n      this.checkState();\n      this.graph.journal.store.on('transaction', () => {\n        this.checkState();\n      });\n    });\n  },\n\n  checkState() {\n    if (!this.graph || !this.graph.journal) {\n      this.canUndo = false;\n      this.canRedo = false;\n      return;\n    }\n    this.canUndo = this.graph.journal.canUndo();\n    this.canRedo = this.graph.journal.canRedo();\n  },\n\n  undo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.undo();\n    this.checkState();\n  },\n\n  redo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.redo();\n    this.checkState();\n  },\n\n  autolayout(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.klay) {\n      return;\n    }\n    this.editor.triggerAutolayout();\n  },\n\n  themeChanged(newTheme) {\n    this.$.nav.theme = newTheme;\n  },\n\n  hidenavChanged() {\n    if (this.hidenav) {\n      this.set('$.controls.style.height', '36px');\n    } else {\n      this.set('$.controls.style.height', '180px');\n    }\n  },\n\n  _computeClass(canUndo) {\n    return `undo ${this.tokenList({ disabled: !canUndo })}`;\n  },\n\n  _computeClass2(canRedo) {\n    return `redo ${this.tokenList({ disabled: !canRedo })}`;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"codemirror-styles\">\n      :host {\n        background-color: var(--noflo-ui-background);\n        overflow: hidden;\n      }\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      #code,\n      #tests {\n        display: block;\n        width: 50%;\n        height: 100%;\n        position: absolute;\n        left: 0px;\n        top: 36px;\n      }\n      #tests {\n        left: auto;\n        right: 0px;\n      }\n      #code h1,\n      #tests h1 {\n        margin: 0;\n        line-height: 36px;\n        padding-left: 36px;\n        font-size: 14px;\n        text-transform: uppercase;\n        color: var(--noflo-ui-text);\n      }\n      #code h1 {\n        text-align: right;\n      }\n    </style>\n    <section id=\"code\">\n      <h1>Implementation</h1>\n      <div id=\"code_editor\"></div>\n    </section>\n    <section id=\"tests\">\n      <h1>Tests</h1>\n      <div id=\"tests_editor\"></div>\n    </section>\n`,\n\n  is: 'noflo-component-editor',\n\n  properties: {\n    codeEditor: { value: null },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    height: {\n      value: null,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    project: { value: null },\n    runtime: { value: null },\n    spec: {\n      value: null,\n      observer: 'specChanged',\n    },\n    testsEditor: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    width: {\n      value: null,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.componentChanged();\n    const self = this;\n    this.debouncedComponentChange = _.debounce(() => {\n      if (!self.component) {\n        return;\n      }\n      self.fire('changed', self.component);\n    }, 1500);\n    this.debouncedSpecChange = _.debounce(() => {\n      if (!self.spec) {\n        return;\n      }\n      self.fire('specschanged', self.spec);\n    }, 1500);\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      this.set('style.display', 'none');\n      return;\n    }\n    this.set('spec', null);\n    if (this.project) {\n      this.project.specs.forEach((spec) => {\n        if (spec.name === this.component.name) {\n          this.set('spec', spec);\n        }\n      });\n      if (!this.spec) {\n        this.set('spec', {\n          name: this.component.name,\n          changed: false,\n          code: this.component.tests || '',\n          language: 'yaml',\n          project: this.component.project,\n          type: 'spec',\n        });\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.set('style.display', 'block');\n    PolymerDom(this.$.code_editor).innerHTML = '';\n    if (!this.component.code) {\n      this.set('component.code', this.getExampleCode());\n    }\n    const codeOptions = this.getMirrorOptions(this.component, this.component.code);\n    this.codeEditor = CodeMirror(this.$.code_editor, codeOptions);\n    this.codeEditor.on('change', () => {\n      this.set('component.code', this.codeEditor.getValue());\n      this.set('component.changed', true);\n      this.debouncedComponentChange();\n    });\n    this.setSize();\n  },\n\n  specChanged() {\n    PolymerDom(this.$.tests_editor).innerHTML = '';\n    if (!this.spec) {\n      return;\n    }\n    const testOptions = this.getMirrorOptions(this.spec, this.spec.code);\n    this.testsEditor = CodeMirror(this.$.tests_editor, testOptions);\n    this.testsEditor.on('change', () => {\n      this.set('spec.code', this.testsEditor.getValue());\n      this.set('spec.changed', true);\n      this.debouncedSpecChange();\n    });\n    this.setSize();\n  },\n\n  widthChanged() {\n    this.setSize();\n  },\n\n  heightChanged() {\n    this.setSize();\n  },\n\n  getMirrorOptions(component, value) {\n    const options = {\n      lineNumbers: true,\n      value: value || '',\n      mode: this.getMirrorMode(component.language),\n      theme: this.getMirrorTheme(),\n      readOnly: component.project ? false : 'nocursor',\n    };\n    const canLint = () => false;\n    if (canLint(component.language) && !options.readOnly) {\n      options.gutters = ['CodeMirror-lint-markers'];\n      options.lint = true;\n    }\n    return options;\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript') {\n      return language;\n    } if (language === 'typescript') {\n      return 'text/typescript';\n    } if (language === 'yaml') {\n      return 'text/x-yaml';\n    } if (language === 'python') {\n      return 'text/x-python';\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  getExampleCode() {\n    let runtimeType = null;\n    if (this.runtime && this.runtime && this.runtime.definition && this.runtime.definition.type) {\n      runtimeType = this.runtime.definition.type;\n    }\n    if (!runtimeType && this.project) {\n      runtimeType = this.project.type;\n    }\n    if (!runtimeType) {\n      return '';\n    }\n    const info = runtimeInfo[runtimeType];\n    let { language } = this.component;\n    if (language === 'es6') {\n      language = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[this.component.language]) {\n      template = info.componenttemplates[this.component.language];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.component.name,\n        description: this.component.description,\n        icon: this.component.icon,\n      });\n    }\n    return template;\n  },\n\n  themeChanged() {\n    if (!this.codeEditor || !this.testsEditor) {\n      return;\n    }\n    this.codeEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  setSize() {\n    if (!this.width || !this.height) {\n      return;\n    }\n    const width = (this.width - 90) / 2;\n    const height = this.height - 102;\n    if (this.codeEditor) {\n      this.codeEditor.setSize(width, height);\n      this.codeEditor.refresh();\n    }\n    if (this.testsEditor) {\n      this.testsEditor.setSize(width, height);\n      this.testsEditor.refresh();\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <ul class=\"toolbar2right\">\n      <template is=\"dom-repeat\" items=\"{{buttons}}\" as=\"button\">\n        <li>\n          <button on-click=\"clicked\" id=\"{{button.id}}\">\n            <noflo-icon icon=\"{{button.icon}}\" fallback=\"\"></noflo-icon>\n            <span>{{button.label}}</span>\n          </button>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-menu',\n\n  properties: {\n    buttons: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  clicked(event, detail, sender) {\n    event.preventDefault();\n    this.buttons.forEach((button) => {\n      if (button.id !== sender.getAttribute('id')) {\n        return;\n      }\n      this.fire('click', button.id);\n      if (button.search) {\n        this.fire('search', button.search);\n        return;\n      }\n      button.action();\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i class=\"fa fa-cog\"></i>\n          <h2>{{result.metadata.label}}</h2>\n          <p>{{result.component}}</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-graph-results',\n\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'resultsChanged',\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  detached() {\n    this.editor = null;\n  },\n\n  resultsChanged() {\n    if (!this.editor) return;\n    if (!this.search || this.search.length < 1) {\n      this.set('editor.displaySelectionGroup', true);\n      this.set('editor.selectedNodes', []);\n    } else if (this.results) {\n      this.set('editor.displaySelectionGroup', !(this.results.length > 0));\n      this.set('editor.selectedNodes', this.results);\n    }\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result) {\n      return;\n    }\n    this.set('editor.displaySelectionGroup', true);\n    this.set('editor.selectedNodes', [result]);\n    this.editor.focusNode(result);\n    this.fire('resultclick', result);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n        font: normal normal normal 14px/1 FontAwesomeSVG;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i><noflo-icon icon=\"[[result.icon]]\" fallback=\"cog\"></noflo-icon></i>\n          <h2>[[result.label]]</h2>\n          <p>[[result.description]]</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-library-results',\n\n  properties: {\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result || !result.action) {\n      return;\n    }\n    this.fire('resultclick', result);\n    result.action();\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\n\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport runtime from '../src/runtime';\nimport './noflo-type-selector';\nimport './noflo-icon';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles codemirror-styles\">\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      textarea {\n        height: 144px;\n      }\n      .editable-title {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n      }\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      div.hidden {\n        display: none;\n      }\n      a#download {\n        position: absolute;\n        right: 36px;\n        top: 36px;\n        width: 36px;\n        display: block;\n        height: 36px;\n        line-height: 36px;\n        background-color: rgb(0, 127, 153);\n        text-align: center;\n        border-radius: 6px;\n        color: white;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n      ul.tabs {\n        display: block;\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n        text-align: center;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <input type=\"text\" on-keydown=\"checkUpdateName\" on-blur=\"updateName\" class=\"editable-title\" value=\"{{getName(graph)}}\">\n      <template is=\"dom-if\" if=\"{{downloadUrl}}\">\n        <a id=\"download\" download=\"{{_computeDownload(graph)}}\" href\\$=\"{{downloadUrl}}\">\n          <noflo-icon icon=\"download\"></noflo-icon>\n        </a>\n      </template>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{isMain}}\">\n      <p>Main graph in project <span>{{project.name}}</span>.</p>\n      </template>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as subgraph in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <ul class=\"tabs\">\n        <li id=\"properties\" on-click=\"setView\" class\\$=\"{{_computeClass(view)}}\">Properties</li>\n        <template is=\"dom-if\" if=\"{{_computeIf(type)}}\">\n        <li id=\"html\" on-click=\"setView\" class\\$=\"{{_computeClass5(view)}}\">HTML</li>\n        </template>\n        <template is=\"dom-if\" if=\"{{spec}}\">\n        <li id=\"tests\" on-click=\"setView\" class\\$=\"{{_computeClass6(view)}}\">Tests</li>\n        </template>\n      </ul>\n      <div class\\$=\"{{_computeClass2(view)}}\">\n      <label>\n        <span>Description</span>\n        <input type=\"text\" value=\"{{description::input}}\">\n      </label>\n      <label>\n        Icon\n        <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n      </label>\n      <label>\n        <span>Type</span>\n        <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass3(view)}}\">\n      <label id=\"html_editor\">\n        <span>Preview contents</span>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass4(view)}}\">\n      <label id=\"tests_editor\">\n        <span>Tests</span>\n      </label>\n      </div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"save\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-graph-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    downloadUrl: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    icon: {\n      type: String,\n      value: '',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    isMain: {\n      type: Boolean,\n      value: false,\n    },\n    preview: {\n      type: String,\n      value: '',\n    },\n    project: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    spec: {\n      value: null,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    type: {\n      type: String,\n      value: '',\n    },\n    view: {\n      type: String,\n      value: 'properties',\n      observer: 'viewChanged',\n    },\n  },\n\n  checkUpdateName(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateName(event);\n    }\n  },\n\n  updateName(event) {\n    this.set('graph.name', event.currentTarget.value);\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    if (!this.graph) {\n      return;\n    }\n    this.description = this.graph.properties.description;\n    this.icon = this.graph.properties.icon || 'cog';\n    this.type = runtime.getGraphType(this.graph);\n    this.view = 'properties';\n    this.inGraph = [];\n    this.isMain = false;\n\n    if (this.project) {\n      if (this.graph.properties.main) {\n        this.isMain = true;\n      } else {\n        this.project.graphs.forEach((graph) => {\n          graph.nodes.forEach((node) => {\n            if (node.component === collections.unnamespace(this.graph.name)\n            || node.component === collections.namespace(this.graph.name, this.project.namespace)) {\n              this.push('inGraph', graph);\n            }\n          });\n        });\n      }\n      this.project.specs.forEach((spec) => {\n        if (collections.unnamespace(spec.name) === collections.unnamespace(this.graph.name)) {\n          this.spec = spec;\n        }\n      });\n      if (!this.spec) {\n        this.spec = {\n          name: collections.unnamespace(this.graph.name),\n          changed: false,\n          code: '',\n          language: 'yaml',\n          project: this.project.id,\n          type: 'spec',\n        };\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.prepareHtmlEditor();\n    this.prepareTestsEditor();\n    this.prepareDownload();\n  },\n\n  prepareDownload() {\n    if (!window.Blob || !window.URL) {\n      return;\n    }\n    const graph = JSON.parse(JSON.stringify(this.graph));\n    if (graph.properties) {\n      delete graph.properties.sha;\n      delete graph.properties.changed;\n      delete graph.properties.project;\n      delete graph.properties.id;\n    }\n    const blob = new Blob([JSON.stringify(graph, null, 4)], { type: 'application/json' });\n    try {\n      this.downloadUrl = URL.createObjectURL(blob);\n    } catch (e) {\n      // Ignore URL failure\n    }\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  viewChanged() {\n    if (this.view === 'html' && this.htmlEditor) {\n      setTimeout(() => {\n        this.htmlEditor.setSize(576 - 4, 288);\n        this.htmlEditor.refresh();\n        this.htmlEditor.focus();\n      }, 1);\n    }\n    if (this.view === 'tests' && this.testsEditor) {\n      setTimeout(() => {\n        this.testsEditor.setSize(576 - 4, 288);\n        this.testsEditor.refresh();\n        this.testsEditor.focus();\n      }, 1);\n    }\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  themeChanged() {\n    if (!this.htmlEditor || !this.testsEditor) {\n      return;\n    }\n    this.htmlEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  prepareHtmlEditor() {\n    if (this.type !== 'noflo-browser') {\n      return;\n    }\n    this.htmlEditor = CodeMirror(this.$.html_editor, {\n      lineNumbers: true,\n      value: this.graph.properties.environment.content || '',\n      language: 'htmlmixed',\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  prepareTestsEditor() {\n    if (!this.spec) {\n      return;\n    }\n    this.testsEditor = CodeMirror(this.$.tests_editor, {\n      lineNumbers: true,\n      value: this.spec.code || '',\n      mode: this.getMirrorMode(this.spec.language),\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript' || language === 'yaml') {\n      return language;\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  save() {\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveGraphProperties');\n    }\n    const env = JSON.parse(JSON.stringify(this.graph.properties.environment));\n    if (this.htmlEditor) {\n      this.preview = this.htmlEditor.getValue();\n      env.content = this.preview;\n    }\n    if (this.testsEditor && this.spec) {\n      const specCode = this.testsEditor.getValue();\n      if (specCode !== this.spec.code) {\n        this.set('spec.code', specCode);\n        this.set('spec.changed', true);\n        this.fire('specschanged', this.spec);\n      }\n    }\n    env.type = this.type;\n    this.graph.setProperties({\n      environment: env,\n      description: this.description,\n      icon: this.icon,\n    });\n    this.close();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteGraph');\n    }\n    this.fire('delete', this.graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  setView(event) {\n    this.view = event.currentTarget.id;\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(view) {\n    return this.tokenList({ selected: view === 'properties' });\n  },\n\n  _computeIf(type) {\n    return type === 'noflo-browser';\n  },\n\n  _computeClass2(view) {\n    return this.tokenList({ hidden: view !== 'properties' });\n  },\n\n  _computeClass3(view) {\n    return this.tokenList({ hidden: view !== 'html' });\n  },\n\n  _computeClass4(view) {\n    return this.tokenList({ hidden: view !== 'tests' });\n  },\n\n  _computeDownload(graph) {\n    return `${collections.unnamespace(graph.name)}.json`;\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  _computeClass5(view) {\n    return this.tokenList({ selected: view === 'html' });\n  },\n\n  _computeClass6(view) {\n    return this.tokenList({ selected: view === 'tests' });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{getName(component)}}</span></h1>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as component in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <div class=\"toolbar\">\n          <!-- <button on-click=\"{{send}}\">Save</button> -->\n          <a on-click=\"close\">Cancel</a>\n          <button class=\"delete\" on-click=\"delete\">Delete</button>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-component-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      observer: 'componentChanged',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    errorText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    Polymer.dom(document.getElementById('container')).classList.add('blur');\n    Polymer.dom(this).classList.add('modal-content');\n    this.inGraph = [];\n    if (this.project) {\n      this.project.graphs.forEach((graph) => {\n        graph.nodes.forEach((node) => {\n          if (node.component === collections.unnamespace(this.component.name)\n            || node.component === collections.namespace(\n              this.component.name,\n              this.project.namespace,\n            )) {\n            this.push('inGraph', graph);\n          }\n        });\n      });\n    }\n  },\n\n  detached() {\n    Polymer.dom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  componentChanged() {\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteComponent');\n    }\n    this.fire('delete', this.component);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!Polymer.dom(this).parentNode) {\n      return;\n    }\n    Polymer.dom(Polymer.dom(this).parentNode).removeChild(this);\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  listeners: { click: 'close' },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport './noflo-menu';\nimport './noflo-search-graph-results';\nimport './noflo-search-library-results';\nimport './noflo-graph-inspector';\nimport './noflo-component-inspector';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        color: var(--noflo-ui-text);\n        font-size: 10px;\n        white-space: nowrap;\n      }\n      input {\n        background-color: var(--noflo-ui-background);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        border: none;\n        padding: 0px;\n        padding-right: 10px;\n        padding-left: 10px;\n        color: var(--noflo-ui-text);\n        width: 245px;\n        height: 36px;\n        display: inline;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        margin: 0px;\n        margin-left: -5px;\n        padding: 0px;\n        display: inline;\n        display: inline;\n\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      :host(.overlay) #breadcrumb {\n        width: calc(72px * 4);\n        display: block;\n      }\n      #breadcrumb {\n        position: relative;\n        overflow: hidden;\n        width: 0px;\n        height: 71px;\n        left: 0px;\n        top: 0px;\n        z-index: 1;\n\n        /*transition: width 0.3s ease-in-out;*/\n        display: none;\n        /*box-sizing: border-box;*/\n\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n\n      }\n      #breadcrumb noflo-icon.fa-search {\n        position: absolute;\n        line-height: 72px;\n        right: 54px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: text;\n      }\n      #breadcrumb #parentlink {\n        line-height: 72px;\n        display: inline-block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear,\n      #breadcrumb #graphinspector,\n      #breadcrumb #componentinspector,\n      #breadcrumb #readonly-lock {\n        position: absolute;\n        right: 9px;\n        top: 0px;\n        line-height: 72px;\n        display: block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear {\n        color: var(--noflo-ui-border-highlight);\n      }\n      #breadcrumb h1 {\n        display: inline-block;\n        line-height: 72px;\n        font-size: 15px;\n        margin: 0px;\n        padding: 0px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        width: 156px;\n        font-weight: normal;\n        padding-left: 18px;\n        cursor: pointer;\n      }\n      :host(.overlay) #searchinput {\n        display: none;\n      }\n      #searchinput {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        display: block;\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        border: none;\n        padding: 0px;\n        padding-right: 54px;\n        padding-left: 18px;\n        width: calc(72px * 3 - 1px);\n        height: 71px;\n        font-size: 12px;\n        display: inline;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        border-radius: none;\n      }\n      #searchinput #speech {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #searchinput.components {\n        background-color: var(--noflo-ui-text);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.components::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n        color: var(--noflo-ui-text-highlight);\n      }\n      #searchinput.processes {\n        background-color: hsl(161, 79%, 68%);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.processes::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n      }\n    </style>\n    <div id=\"breadcrumb\" on-click=\"focus\">\n      <template is=\"dom-if\" if=\"{{_canSearch(component, readonly)}}\">\n      <noflo-icon class=\"fa-search\" icon=\"search\"></noflo-icon>\n      </template>\n      <h1 title=\"Search\">\n        <template is=\"dom-if\" if=\"{{_canGoBack(project, graphs, component)}}\">\n        <button id=\"parentlink\" title=\"Back\" on-click=\"goBack\">\n          <noflo-icon icon=\"angle-left\"></noflo-icon>\n        </button>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isGraph(component, graph)}}\">\n        <span>{{getName(graph)}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isComponent(component)}}\">\n        <span>{{getName(component)}}</span>\n        </template>\n      </h1>\n      <template is=\"dom-if\" if=\"{{_canInspectGraph(component, graph, readonly)}}\">\n      <button on-click=\"showGraphInspector\" id=\"graphinspector\" title=\"Graph properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_canInspectComponent(component, graph, readonly)}}\">\n      <button on-click=\"showComponentInspector\" id=\"componentinspector\" title=\"Component properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_isReadOnly(component, graph, readonly)}}\">\n      <button title=\"Read-only\" id=\"readonly-lock\">\n        <noflo-icon icon=\"lock\"></noflo-icon>\n      </button>\n      </template>\n    </div>\n    <input id=\"searchinput\" placeholder=\"Search components\" on-keydown=\"switchSearch\" value=\"{{search::input}}\" type=\"text\" autocapitalize=\"off\" autocorrect=\"off\" x-webkit-speech=\"\">\n    <button id=\"clear\" on-click=\"clearSearch\" title=\"Clear search\">\n      <noflo-icon icon=\"times\"></noflo-icon>\n    </button>\n`,\n\n  is: 'noflo-search',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graph: { value: null },\n    graphInspector: { value: null },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'graphsChanged',\n    },\n    menuCard: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n    },\n    panel: { value: null },\n    parentPath: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    readonly: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    results: { notify: true },\n    resultsCard: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n    searchGraphResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchGraphResultsChanged',\n    },\n    searchLibrary: {\n      type: Boolean,\n      value: true,\n    },\n    searchLibraryResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchLibraryResultsChanged',\n    },\n  },\n\n  readonlyChanged() {\n    if (this.readonly) {\n      this.blur();\n    }\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      // Component nullified, ensure we recount graphs\n      this.graphsChanged();\n      return;\n    }\n    this.closeInspectors();\n  },\n\n  graphsChanged() {\n    this.closeInspectors();\n    this.blur();\n  },\n\n  closeInspectors() {\n    if (this.graphInspector) {\n      if (PolymerDom(this.graphInspector).parentNode) {\n        PolymerDom(PolymerDom(this.graphInspector).parentNode)\n          .removeChild(this.graphInspector);\n      }\n      this.graphInspector = null;\n    }\n    if (this.componentInspector) {\n      if (PolymerDom(this.componentInspector).parentNode) {\n        PolymerDom(PolymerDom(this.componentInspector).parentNode)\n          .removeChild(this.componentInspector);\n      }\n      this.componentInspector = null;\n    }\n  },\n\n  getParentPath(graphs, component) {\n    const parentPath = [];\n    if (!this.project) {\n      return parentPath;\n    }\n    const findNode = (comp, graph) => {\n      const matching = graph.nodes.filter((node) => {\n        if (node.id === comp) {\n          return true;\n        }\n        if (node.component === comp) {\n          // Direct match\n          return true;\n        }\n        if (!this.project) {\n          return false;\n        }\n        if (node.component === `${this.project.namespace}/${comp}`) {\n          return true;\n        }\n        if (node.component === `${this.project.id}/${comp}`) {\n          return true;\n        }\n        return false;\n      });\n      return matching[0];\n    };\n    graphs.forEach((graph, idx) => {\n      if (!component && idx >= graphs.length - 1) {\n        return;\n      }\n      if (idx === 0) {\n        parentPath.push(graph.properties.id);\n        return;\n      }\n      const previous = graphs[idx - 1];\n      const node = findNode(graph.name, previous);\n      if (!node) {\n        return;\n      }\n      parentPath.push(node.id);\n    });\n    return parentPath;\n  },\n\n  libraryResults(results) {\n    this.set('searchLibraryResults', []);\n    this.set('searchLibraryResults', results);\n  },\n\n  graphResults(result) {\n    this.push('searchGraphResults', result);\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n    this.blur();\n  },\n\n  focus() {\n    if (this.readonly) {\n      return;\n    }\n    if (this.component && this.component.name) {\n      return;\n    }\n    PolymerDom(this).classList.remove('overlay');\n    this.$.searchinput.focus();\n    if (this.search === null) {\n      // Show all\n      this.search = '';\n    }\n  },\n\n  blur() {\n    this.clearResults();\n    PolymerDom(this).classList.add('overlay');\n  },\n\n  toggle() {\n    if (PolymerDom(this).classList.contains('overlay')) {\n      this.focus();\n      return;\n    }\n    this.blur();\n  },\n\n  clearResults() {\n    this.set('searchGraphResults', []);\n    this.set('searchLibraryResults', []);\n  },\n\n  clearSearch() {\n    if (this.resultsCard) {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    this.search = null;\n    this.blur();\n  },\n\n  switchSearch(event) {\n    if (event.keyIdentifier === 'U+0009') {\n      event.preventDefault();\n      this.searchLibrary = !this.searchLibrary;\n      if (this.searchLibrary) {\n        PolymerDom(this.$.searchinput).classList.add('components');\n        PolymerDom(this.$.searchinput).classList.remove('processes');\n        this.set('$.searchinput.placeholder', 'Search components');\n      } else {\n        PolymerDom(this.$.searchinput).classList.add('processes');\n        PolymerDom(this.$.searchinput).classList.remove('components');\n        this.set('$.searchinput.placeholder', 'Search processes');\n      }\n      this.searchChanged();\n    }\n    event.stopPropagation();\n  },\n\n  searchChanged() {\n    this.clearResults();\n    if (this.search && typeof ga === 'function') {\n      ga('send', 'event', 'search', 'input', 'newSearch');\n    }\n    if (this.resultsCard) {\n      this.set('resultsCard.children.0.search', this.search);\n      this.set('resultsCard.search', this.search);\n    }\n    const event = this.searchLibrary ? 'search:library' : 'search:graph';\n    this.fire(event, { search: this.search });\n  },\n\n  searchLibraryResultsChanged() {\n    if (!this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-library-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchLibraryResults);\n      return;\n    }\n    if (this.searchLibraryResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-library-results');\n    results.id = 'results';\n    results.search = this.search;\n    results.results = this.searchLibraryResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-library-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  searchGraphResultsChanged() {\n    if (this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-graph-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchGraphResults);\n      return;\n    }\n    if (this.searchGraphResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-graph-results');\n    results.id = 'results';\n    results.editor = this.editor;\n    results.search = this.search;\n    results.results = this.searchGraphResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-graph-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  goBack(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    const path = this.getParentPath(this.graphs, this.component);\n    if (this.project.runtime) {\n      path.unshift(this.project.runtime);\n      path.unshift('runtime');\n      this.fire('hash', path);\n      return;\n    }\n    path.unshift(this.project.id);\n    path.unshift('project');\n    this.fire('hash', path);\n  },\n\n  showGraphInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (this.graphs.length === 0) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'graphProperties');\n    }\n    this.graphInspector = document.createElement('noflo-graph-inspector');\n    this.set('graphInspector.graph', this.graph);\n    this.set('graphInspector.project', this.project);\n    this.set('graphInspector.runtimes', this.runtimes);\n    this.set('graphInspector.theme', this.theme);\n    this.graphInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteGraph', ev.detail);\n    });\n    this.graphInspector.addEventListener('specschanged', (ev) => {\n      this.fire('specschanged', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.graphInspector);\n  },\n\n  showComponentInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'componentProperties');\n    }\n    this.componentInspector = document.createElement('noflo-component-inspector');\n    this.set('componentInspector.component', this.component);\n    this.set('componentInspector.project', this.project);\n    this.componentInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteComponent', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.componentInspector);\n  },\n\n  _canSearch(component, readonly) {\n    return !readonly && (!component || !component.name);\n  },\n\n  _canGoBack(project, graphs, component) {\n    if (!project) {\n      return false;\n    }\n    if (graphs.length > 1 || (graphs.length && component)) {\n      return true;\n    }\n    return false;\n  },\n\n  _isGraph(component, graph) {\n    return graph && (!component || !component.name);\n  },\n\n  _isComponent(component) {\n    return component && component.name;\n  },\n\n  _canInspectGraph(component, graph, readonly) {\n    return !readonly && graph && (!component || !component.name);\n  },\n\n  _canInspectComponent(component, graph, readonly) {\n    return !readonly && !graph && component && component.name;\n  },\n\n  _isReadOnly(component, graph, readonly) {\n    return readonly || (component && component.readonly) || (graph && graph.properties.readonly);\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new component</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Component name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolComponent\" required=\"\">\n        </label>\n        <label>\n          Component description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Language\n          <select name=\"type\" value=\"{{language::input}}\">\n            <template is=\"dom-repeat\" items=\"{{languages}}\" as=\"lang\">\n            <option value=\"[[lang.id]]\" selected\\$=\"[[_languageSelected(lang, language)]]\">[[lang.label]]</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-new-component',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    language: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'typeChanged',\n    },\n    languages: {\n      type: Array,\n      value() {\n        return [\n          {\n            id: 'c',\n            label: 'C',\n          },\n          {\n            id: 'c++',\n            label: 'C++',\n          },\n          {\n            id: 'coffeescript',\n            label: 'CoffeeScript',\n          },\n          {\n            id: 'es2015',\n            label: 'JavaScript (modern ES2015)',\n          },\n          {\n            id: 'javascript',\n            label: 'JavaScript',\n          },\n          {\n            id: 'typescript',\n            label: 'TypeScript',\n          },\n          {\n            id: 'python',\n            label: 'Python',\n          },\n          {\n            id: 'supercollider',\n            label: 'SuperCollider',\n          },\n          {\n            id: 'yaml',\n            label: 'YAML',\n          },\n        ];\n      },\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  typeChanged() {\n    if (!this.type) {\n      // No type defined, keep full list\n      return;\n    }\n    const runtimeI = runtimeInfo[this.type];\n    if (!runtimeI || !runtimeI.componenttemplates) {\n      // We don't know what languages the runtime supports, so keep full list\n      return;\n    }\n\n    // Filter list of languages to the ones supported by the runtime\n    const allLanguages = this.languages;\n    this.languages = allLanguages.filter((lang) => {\n      if (!runtimeI.componenttemplates[lang.id]) {\n        return false;\n      }\n      return true;\n    });\n    if (!this.languages.length) {\n      // Default back to all\n      this.languages = allLanguages;\n    }\n    // Default to first language if runtime has no preference\n    this.language = runtimeI.preferredlanguage || this.languages[0].id;\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.name) {\n      // Same regexp as used by the FBP language parser\n      this.name = this.name.replace(/[^a-zA-Z0-9]+/g, '_');\n    }\n    if (this.project) {\n      duplicates = this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newComponent');\n    }\n    this.fire('new', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      description: this.description,\n      language: this.language,\n      icon: this.icon,\n      project: this.project.id,\n      code: this.getExampleCode(this.language),\n      tests: '',\n    });\n    this.fire('newSpec', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      code: this.getExampleSpec(),\n      language: 'yaml',\n      project: this.project.id,\n      type: 'spec',\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _languageSelected(lang, selected) {\n    if (lang.id === selected) {\n      return true;\n    }\n    return false;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getExampleCode(language) {\n    if (!this.type) {\n      return '';\n    }\n    const info = runtimeInfo[this.type];\n    let lang = language;\n    if (lang === 'es6') {\n      lang = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[lang]) {\n      template = info.componenttemplates[lang];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.name,\n        description: this.description,\n        icon: this.icon,\n      });\n    }\n    return template;\n  },\n\n  getExampleSpec() {\n    let fbpSpec = '';\n    fbpSpec += `name: ${this.name} component\\n`;\n    fbpSpec += `topic: ${this.project.namespace || this.project.id}/${this.name}\\n`;\n    fbpSpec += 'cases:\\n';\n    fbpSpec += '  -\\n';\n    fbpSpec += '    name: with an input packet\\n';\n    fbpSpec += '    assertion: should send the same packet out\\n';\n    fbpSpec += '    inputs:\\n';\n    fbpSpec += '      in: true\\n';\n    fbpSpec += '    expect:\\n';\n    fbpSpec += '      out:\\n';\n    fbpSpec += '        equals: true\\n';\n    return fbpSpec;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{project.name}}</span> settings</h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <label>\n          <span>GitHub repository</span>\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/my-project\" autocapitalize=\"off\" autocorrect=\"off\" required=\"\">\n        </label>\n        <label>\n          <span>Project label</span>\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          <span>Project namespace</span>\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-cool-project\" required=\"\">\n        </label>\n        <label>\n          <span>Main graph</span>\n          <select name=\"type\" value=\"{{main::input}}\">\n            <template is=\"dom-repeat\" items=\"[[_getMainGraphs(project.graphs)]]\" as=\"graph\">\n              <option value=\"{{graph.properties.id}}\" selected\\$=\"[[_mainSelected(graph.properties.id, main)]]\">{{graph.name}}</option>\n            </template>\n          </select>\n        </label>\n        </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <a href=\"https://github.com/new\" target=\"_blank\">New Repository</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n      </div>\n`,\n\n  is: 'noflo-project-inspector',\n\n  properties: {\n    errorText: {\n      type: String,\n      value: '',\n    },\n    main: {\n      type: String,\n      value: '',\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    originalRepo: {\n      type: String,\n      value: '',\n    },\n    project: { observer: 'projectChanged' },\n    repo: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  projectChanged() {\n    this.originalRepo = this.project.repo;\n    this.repo = this.project.repo;\n    this.name = this.project.name;\n    this.namespace = this.project.namespace || this.project.id;\n    this.main = this.project.main;\n  },\n\n  updateProject() {\n    this.fire('updated', {\n      id: this.project.id,\n      name: this.name,\n      namespace: this.namespace,\n      main: this.main,\n      type: this.project.type,\n      repo: this.repo,\n    });\n    this.close();\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveProjectProperties');\n    }\n    this.updateProject();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.fire('delete', this.project);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _mainSelected(graphId, main) {\n    if (graphId === main) {\n      return true;\n    }\n    return false;\n  },\n\n  _getMainGraphs(graphs) {\n    return graphs.filter((graph) => graph.properties.main);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      table th {\n        text-align: left;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Synchronize with <noflo-icon icon=\"github\"></noflo-icon> <span>{{operation.repo}}</span></h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{statusText}}\">\n        <div>{{statusText}}</div>\n      </template>\n      <form>\n        <table>\n          <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n          <tr>\n            <th>{{file.path}}</th>\n            <td>\n              <select name=\"{{file.path}}\" on-change=\"choose\">\n                <template is=\"dom-repeat\" items=\"{{file.operations}}\" as=\"op\">\n                <option value=\"[[op]]\" selected\\$=\"[[_isSelectedOp(file, op)]]\">[[_getOperationLabel(op)]]</option>\n                </template>\n              </select>\n            </td>\n          </tr>\n          </template>\n        </table>\n        <template is=\"dom-if\" if=\"{{hasPush}}\">\n          <label>\n            <span>Commit message</span>\n            <input type=\"text\" value=\"{{message::input}}\" required=\"\">\n          </label>\n        </template>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(hasOp)}}\">Synchronize</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-project-sync',\n\n  properties: {\n    files: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'filesChanged',\n    },\n    hasOp: {\n      type: Boolean,\n      value: true,\n    },\n    hasPush: {\n      type: Boolean,\n      value: false,\n    },\n    message: {\n      type: String,\n      value: '',\n    },\n    operation: {\n      type: Object,\n      value() {\n        return {\n          repo: '',\n          push: [],\n          pull: [],\n          conflict: [],\n          noop: [],\n        };\n      },\n      observer: 'operationChanged',\n    },\n    statusText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  operationChanged() {\n    if (!this.operation.push.length\n      && !this.operation.pull.length\n      && !this.operation.conflict.length) {\n      this.statusText = 'All changes have been synchronized';\n      this.hasOp = false;\n    }\n    this.hasPush = false;\n    this.operation.conflict.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'pull', 'noop'],\n      });\n    });\n    this.operation.push.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'noop'],\n      });\n    });\n    this.operation.pull.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'pull',\n        operations: ['pull', 'noop'],\n      });\n    });\n    this.filesChanged();\n  },\n\n  filesChanged() {\n    let pushes = false;\n    let ops = false;\n    this.files.forEach((file) => {\n      if (file.operation === 'push') {\n        pushes = true;\n        ops = true;\n      }\n      if (file.operation === 'pull') {\n        ops = true;\n      }\n    });\n    this.hasPush = pushes;\n    this.hasOp = ops;\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (this.hasPush && !this.message) {\n      return;\n    }\n    const originalConflicts = this.operation.conflict;\n    const originalPushes = this.operation.push;\n    const originalPulls = this.operation.pull;\n    this.set('operation.conflict', []);\n    this.set('operation.pull', []);\n    this.set('operation.push', []);\n    const checkOps = (entry) => {\n      this.files.forEach((file) => {\n        if (file.path !== entry.path) {\n          return;\n        }\n        if (file.operation === 'push') {\n          this.push('operation.push', entry);\n        }\n        if (file.operation === 'pull') {\n          this.push('operation.pull', entry);\n        }\n      });\n    };\n    originalConflicts.forEach(checkOps);\n    originalPushes.forEach(checkOps);\n    originalPulls.forEach(checkOps);\n    this.set('operation.message', this.message);\n    this.fire('sync', this.operation);\n    this.close();\n  },\n\n  choose(event) {\n    let index = null;\n    let f = null;\n    this.files.forEach((file, idx) => {\n      if (file.path === event.currentTarget.name) {\n        index = idx;\n        f = file;\n      }\n    });\n    if (index === null) {\n      return;\n    }\n    this.splice('files', index, 1, {\n      id: event.currentTarget.name,\n      path: f.path,\n      operation: event.currentTarget.value,\n      operations: f.operations,\n    });\n    this.filesChanged();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(hasOp) {\n    return this.tokenList({ disabled: !hasOp });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  _getOperationLabel(op) {\n    if (op === 'push') {\n      return 'Push';\n    }\n    if (op === 'pull') {\n      return 'Pull';\n    }\n    if (op === 'noop') {\n      return 'Ignore';\n    }\n    return op;\n  },\n\n  _isSelectedOp(file, op) {\n    if (op === file.operation) {\n      return true;\n    }\n    return false;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './the-panel';\nimport './the-graph-thumb';\nimport './noflo-new-graph';\nimport './noflo-new-component';\nimport './noflo-project-inspector';\nimport './noflo-project-sync';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      h2 {\n        font-size: 16px;\n        line-height: 36px;\n        text-transform: none;\n        font-weight: normal;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.graphs {\n        margin-bottom: 144px;\n      }\n      ul.graphs li {\n        width: 245px;\n        height: 70px;\n        overflow: hidden;\n        float: left;\n        text-align: center;\n        background-color: hsl(190, 90%, 45%);\n        color: black;\n        border-radius: 3px;\n        margin-right: 0px;\n        margin-left: 0px;\n        margin-bottom: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.graphs li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.graphs li the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n      ul.graphs li noflo-icon {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        font-size: 36px;\n        color: black;\n      }\n      ul.graphs li button {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 13px;\n        padding-right: 13px;\n      }\n      ul.graphs li h2 {\n        position: absolute;\n        top: 18px;\n        left: 17px;\n        width: 75px;\n        text-transform: none;\n        font-size: 13px;\n        text-align: left;\n        white-space: nowrap;\n      }\n      header h1 {\n        text-align: center;\n        height: 36px;\n        line-height: 36px;\n        font-size: 17px;\n        white-space: nowrap;\n        max-width: 100%;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        padding-left: 36px;\n        box-sizing: border-box;\n      }\n      main ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      main ul li {\n        line-height: 36px;\n        min-height: 36px;\n      }\n      main ul li a {\n        color: var(--noflo-ui-text);\n        text-decoration: none;\n        display: block;\n        cursor: pointer;\n      }\n      main ul li a i {\n        float: right;\n        line-height: 36px;\n        color: var(--noflo-ui-border);\n        margin-right: 4px;\n      }\n      main {\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        max-height: calc(100% - 72px);\n        padding-left: 36px;\n      }\n      main.repo {\n        max-height: calc(100% - 72px * 2);\n      }\n      main::-webkit-scrollbar {\n        display: none;\n      }\n      footer {\n        background-color: transparent;\n        display: block;\n        position: absolute;\n        bottom: 0px;\n        left: 0px;\n        padding-left: 36px;\n        width: 325px;\n        padding-right: 36px;\n        box-sizing: border-box;\n        overflow: hidden;\n        height: 72;\n        transition: background-color 0.3s ease-in-out;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        top: 0px;\n        border-right-width: 1px;\n        height: 100vh;\n        padding-right: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f03a';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        right: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        cursor: e-resize;\n        opacity: 1;\n      }\n      #account[open] footer {\n        background-color: hsl(190, 90%, 45%);\n      }\n      footer h1 {\n        font-size: 17px;\n        line-height: 36px;\n        text-align: center;\n        margin: 0;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      footer button {\n        background-color: white;\n        color: hsl(190, 90%, 45%);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 17px;\n        padding-right: 17px;\n        line-height: 36px;\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        cursor: pointer;\n      }\n      footer button:disabled {\n        opacity: 0.5;\n      }\n    </style>\n    <the-panel id=\"account\" edge=\"left\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <h1>{{project.name}}</h1>\n        </template>\n        <template is=\"dom-if\" if=\"{{!project}}\">\n        <h1>Live mode</h1>\n        </template>\n      </header>\n      <main class\\$=\"{{_computeClass(project)}}\">\n        <ul>\n          <li>\n            <a on-click=\"openHome\">\n              <noflo-icon icon=\"home\"></noflo-icon>\n              Home\n            </a>\n          </li>\n          <template is=\"dom-if\" if=\"{{project}}\">\n          <li>\n            <a on-click=\"openSettings\">\n              <noflo-icon icon=\"cog\"></noflo-icon>\n              Settings\n            </a>\n          </li>\n          </template>\n        </ul>\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <template is=\"dom-if\" if=\"{{_canGraph(project, runtime)}}\">\n        <h2>Graphs</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New graph</h2>\n            <button on-click=\"newGraph\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.graphs}}\" as=\"graph\">\n          <li on-click=\"openGraph\" data-id\\$=\"{{graph.properties.id}}\">\n            <the-graph-thumb graph=\"{{graph}}\" width=\"200\" height=\"120\"></the-graph-thumb>\n            <h2>{{getName(graph)}}</h2>\n          </li>\n          </template>\n        </ul>\n        </template>\n        <template is=\"dom-if\" if=\"{{_canComponent(project, runtime)}}\">\n        <h2>Components</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New component</h2>\n            <button on-click=\"newComponent\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.components}}\" as=\"component\">\n          <li on-click=\"openComponent\" data-id\\$=\"{{component.name}}\">\n            <h2>{{getName(component)}}</h2>\n            <template is=\"dom-if\" if=\"{{_computeIf(component)}}\">\n            <noflo-icon icon=\"coffee\"></noflo-icon>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf2(component)}}\">\n            <noflo-icon icon=\"code\"></noflo-icon>\n            </template>\n          </li>\n          </template>\n        </ul>\n        </template>\n        </template>\n      </main>\n      <template is=\"dom-if\" if=\"{{project.repo}}\">\n      <footer slot=\"footer\">\n        <h1 title=\"{{project.repo}}\">\n          <noflo-icon icon=\"github\"></noflo-icon>\n          <span>{{project.repo}}</span>\n        </h1>\n        <button on-click=\"synchronize\">\n          <noflo-icon icon=\"cloud-upload\"></noflo-icon>\n          <span>Synchronize</span>\n        </button>\n      </footer>\n      </template>\n    </the-panel>\n`,\n\n  is: 'noflo-project',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  runtimeChanged() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      this.canComponent = this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n  },\n\n  newGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.project = this.project;\n    dialog.runtimes = this.runtimes;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const graph = ev.detail;\n      this.push('project.graphs', graph);\n      this.fire('newgraph', graph);\n      this.gotoGraph(graph.properties.id);\n    });\n  },\n\n  newComponent(event) {\n    if (!this.canComponent) {\n      return;\n    }\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-component');\n    dialog.project = this.project;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const component = ev.detail;\n      this.push('project.components', component);\n      this.fire('newcomponent', component);\n      // TODO: Add node to graph\n      this.gotoComponent(component.name);\n    });\n    dialog.addEventListener('newSpec', (ev) => {\n      const spec = ev.detail;\n      this.push('project.specs', spec);\n      this.fire('newspec', spec);\n    });\n  },\n\n  openHome(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.$.account.toggleOpen(false);\n    this.fire('hash', []);\n  },\n\n  openSettings(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'projectProperties');\n    }\n    const dialog = document.createElement('noflo-project-inspector');\n    dialog.project = this.project;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (ev) => {\n      Object.keys(ev.detail).forEach((property) => {\n        this.set(`project.${property}`, ev.detail[property]);\n      });\n      if (this.project.repo) {\n        this.set('project.gist', null);\n        if (!this.project.branch) {\n          this.set('project.branch', 'master');\n        }\n      }\n      this.project.graphs.forEach((graph) => {\n        if (graph.properties.id === this.project.main) {\n          const { type } = graph.properties.environment;\n          this.set('project.mainGraph', graph);\n          this.set('project.type', type);\n        }\n      });\n      // Send only the data we actually want to store\n      this.fire('changed', this.project);\n    });\n    dialog.addEventListener('delete', (ev) => {\n      this.$.account.toggleOpen(false);\n      this.fire('deleteProject', ev.detail);\n    });\n  },\n\n  gotoGraph(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getGraphHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  gotoComponent(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getComponentHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  openGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openGraph');\n    }\n    this.gotoGraph(event.currentTarget.getAttribute('data-id'));\n  },\n\n  openComponent(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openComponent');\n    }\n    this.gotoComponent(event.currentTarget.getAttribute('data-id'));\n  },\n\n  synchronize(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'syncGithub');\n    }\n    this.fire('sync', {\n      repo: this.project.repo,\n      project: this.project,\n    });\n    this.$.account.toggleOpen(false);\n  },\n\n  confirm(operation) {\n    const dialog = document.createElement('noflo-project-sync');\n    dialog.operation = operation;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('sync', (event) => {\n      if (typeof ga === 'function') {\n        if (event.detail.push.length) {\n          ga('send', 'event', 'button', 'click', 'pushGithub');\n        }\n        if (event.detail.pull.length) {\n          ga('send', 'event', 'button', 'click', 'pullGithub');\n        }\n      }\n      this.fire('syncDecision', event.detail);\n    });\n  },\n\n  _computeClass(project) {\n    return project && project.repo ? 'repo' : 'norepo';\n  },\n\n  _computeIf(component) {\n    return component.language === 'coffeescript';\n  },\n\n  _computeIf2(component) {\n    return component.language !== 'coffeescript';\n  },\n\n  _canGraph() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('protocol:graph') !== -1;\n    }\n    return true;\n  },\n\n  _canComponent() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n    return true;\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import React from 'react';\nimport { unnamespace } from '../collections';\n\nfunction nodeLabel(node) {\n  return unnamespace(node).split('_')[0];\n}\n\nfunction EdgeId({ row }) {\n  let subgraph;\n  let src;\n  let connection;\n  let tgt;\n  if (row.subgraph) {\n    subgraph = <span className=\"subgraph\">{row.subgraph.map((s) => nodeLabel(s)).join(' / ')}</span>;\n  }\n  if (row.src) {\n    src = (\n      <span className=\"source\">\n        <span className=\"node-id\">{nodeLabel(row.src.node)}</span>\n      </span>\n    );\n  }\n  if (row.tgt) {\n    tgt = (\n      <span className=\"target\">\n        <span className=\"node-id\">{nodeLabel(row.tgt.node)}</span>\n      </span>\n    );\n  }\n  let routeClass = 'connection';\n  if (row.edge && row.edge.metadata && typeof row.edge.metadata.route !== 'undefined') {\n    routeClass = `connection route${row.edge.metadata.route}`;\n  }\n  connection = <span className={routeClass}></span>;\n  if (row.src && row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  } else if (row.src) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n      </span>\n    );\n  } else if (row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  }\n  return (\n    <div className=\"edge\">\n      {subgraph}\n      {src}\n      {connection}\n      {tgt}\n    </div>\n  );\n}\n\nexport default EdgeId;\n","import React, { useState } from 'react';\nimport { Table } from 'react-fluid-table';\nimport EdgeId from './EdgeId';\n\nfunction PacketData({ row, multiLine = false }) {\n  switch (typeof row.data) {\n    case 'number':\n    case 'string': {\n      return row.data;\n    }\n    default: {\n      if (multiLine) {\n        return JSON.stringify(row.data, null, 2);\n      }\n      return JSON.stringify(row.data);\n    }\n  }\n}\n\nfunction PacketDetails({ row, index, isExpanded, clearSizeCache }) {\n  return (\n    <div className=\"packet-details\">\n      <dl>\n        <dt>Payload</dt>\n        <dd className=\"packet-data\">\n          <PacketData row={row} multiLine={true} />\n        </dd>\n      </dl>\n    </div>\n  );\n}\n\nfunction RuntimeEvents({ packets, width }) {\n  const idWidth = Math.min(width / 4, 238);\n  const dataWidth = width - idWidth - 36;\n  const columns = [\n    {\n      key: 'id',\n      header: 'Edge',\n      width: idWidth,\n      content: EdgeId,\n    },\n    {\n      key: 'data',\n      header: 'Data',\n      width: dataWidth,\n      content: PacketData,\n    },\n    {\n      key: '',\n      width: 36,\n      expander: true,\n    },\n  ];\n  return (\n    <Table\n      data={packets}\n      columns={columns}\n      subComponent={PacketDetails}\n      tableHeight={288}\n    />\n  );\n}\n\nexport default RuntimeEvents;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        -webkit-user-select: none;      /* disable cut copy paste */\n        -webkit-touch-callout: none;    /* disable callout, image save panel */\n        user-select: none;\n        touch-callout: none;\n\n        cursor: ew-resize;\n\n        display: inline-block;\n        text-align: center;      \n      }\n    </style>\n`,\n\n  is: 'number-scrubber',\n\n  properties: {\n    distance: {\n      type: Number,\n      value: 5,\n      notify: true,\n    },\n    max: {\n      value() {\n        return Infinity;\n      },\n      notify: true,\n    },\n    min: {\n      value() {\n        return -Infinity;\n      },\n      notify: true,\n    },\n    mod: {\n      type: Number,\n      value: 0,\n      notify: true,\n    },\n    precision: {\n      type: Number,\n      value: 1000000,\n    },\n    scrubend: { value: null },\n    scrubstart: { value: null },\n    startValue: {\n      type: Number,\n      value: 0,\n    },\n    step: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    value: {\n      value() {\n        return undefined;\n      },\n      notify: true,\n    },\n  },\n\n  onTrackStart() {\n    // Don't select\n    document.body.style.webkitUserSelect = 'none';\n    document.body.style.MozUserSelect = 'none';\n    document.body.style.msUserSelect = 'none';\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'ew-resize';\n    this.fire('scrubstart');\n    if (this.value === undefined) {\n      return;\n    }\n    this.value = parseFloat(this.value);\n    this.startValue = this.value;\n  },\n\n  onTrack(event) {\n    if (this.value === undefined) {\n      return;\n    }\n    let delta = event.dx;\n    if (this.distance > 1) {\n      delta = Math.round(delta / this.distance);\n    }\n    if (this.step !== 1) {\n      if (this.step > 1) {\n        delta = Math.round(delta / this.step) * this.step;\n      } else if (this.step > 0) {\n        delta *= this.step;\n      }\n    }\n    let newValue = this.startValue + delta;\n    if (this.mod !== 0) {\n      newValue %= this.mod;\n    }\n    if (Number.isFinite(this.min)) {\n      newValue = Math.max(newValue, this.min);\n    }\n    if (Number.isFinite(this.max)) {\n      newValue = Math.min(newValue, this.max);\n    }\n    // Stupid JS numbers\n    if (this.precision > 1) {\n      newValue = Math.round(newValue * this.precision) / this.precision;\n    }\n    if (this.value !== newValue) {\n      this.value = newValue;\n      this.fire('scrub', this.value);\n    }\n  },\n\n  onTrackEnd() {\n    // Reset select\n    document.body.style.webkitUserSelect = 'auto';\n    document.body.style.MozUserSelect = 'auto';\n    document.body.style.msUserSelect = 'auto';\n    document.body.style.userSelect = 'auto';\n    document.body.style.cursor = 'auto';\n    this.fire('scrubend');\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n\n  listeners: {\n    trackstart: 'onTrackStart',\n    track: 'onTrack',\n    trackend: 'onTrackEnd',\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './number-scrubber';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      .editable-title {\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n        border: 0px;\n        display: block;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 12px;\n        font-weight: 700;\n      }\n      .ports {\n        margin-bottom: 8px;\n      }\n      ul.ports li {\n        display: block;\n        position: relative;\n        clear: left;\n      }\n      ul.ports li label span {\n        float: left;\n        clear: left;\n        font-size: 12px;\n        padding-top: 0;\n        width: 87px;\n        line-height: 36px;\n        overflow: hidden;\n      }\n\n      ul.ports li p {\n        margin: 0px;\n        padding: 0px;\n        font-size: 10px;\n        margin-left: 87px;\n        margin-bottom: 3px;\n        line-height: 13px;\n        max-height: 26px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n\n      /* Hide spinners */\n      input[type=number]::-webkit-inner-spin-button, \n      input[type=number]::-webkit-outer-spin-button {\n        -webkit-appearance: none; \n        margin: 0; \n      }\n      input[type=number] {\n        -moz-appearance:textfield;\n      }\n\n      ul.ports li button {\n        padding: 8px;\n        height: 19px;\n        width: 19px;\n      }\n      ul.ports li label button {\n        background-color: hsl(184, 50%, 11%);\n        color: hsl(184, 40%, 89%);\n        display: block;\n        padding: 8px;\n        height: 36px;\n        width: 36px;\n      }\n      ul.ports li label button:active {\n        color: white;\n      }\n      ul.ports li label i {\n        margin:0;\n      }\n      ul.ports li span.route {\n        /* TODO: route colors */\n        background-color: white;\n        float: none;\n        display: inline-block;\n        width: 125px;\n        height: 1px;\n        padding: 0;\n      }\n      ul.ports .remove-value {\n        background-color: transparent !important;\n        opacity: .3;\n        border: none !important;\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        line-height: 36px;\n        height: 36px;\n        width: 36px;\n        text-align: center;\n        padding: 0px;\n        font-size: 12px;\n      }\n      ul.ports li span.route0  { background-color: hsl(  0,100%,100%); }\n      ul.ports li span.route1  { background-color: hsl(  0, 98%, 46%); }\n      ul.ports li span.route2  { background-color: hsl( 35, 98%, 46%); }\n      ul.ports li span.route3  { background-color: hsl( 60, 98%, 46%); }\n      ul.ports li span.route4  { background-color: hsl(135, 98%, 46%); }\n      ul.ports li span.route5  { background-color: hsl(160, 98%, 46%); }\n      ul.ports li span.route6  { background-color: hsl(185, 98%, 46%); }\n      ul.ports li span.route7  { background-color: hsl(210, 98%, 46%); }\n      ul.ports li span.route8  { background-color: hsl(285, 98%, 46%); }\n      ul.ports li span.route9  { background-color: hsl(310, 98%, 46%); }\n      ul.ports li span.route10 { background-color: hsl(335, 98%, 46%); }\n      \n      \n      ul.ports li input {\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        width: 178px;\n        height: 36px;\n        border: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 10px;\n        padding: 9px 26px 9px 36px;\n        margin: 0px;\n      }\n      ul.ports li input[type=\"checkbox\"] {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        width: 18px;\n      }\n      ul.ports li input[type=\"checkbox\"]:before {\n        display: block;\n        content: '';\n        width: 177px;\n        height: 36px;\n        margin-top: -9px;\n        margin-left: -36px;\n        background-color: hsla( 0, 0%, 20%, .2);\n        color: hsl( 0, 0%, 75%);\n        border-left: 1px solid hsla( 0, 0%, 75%, 0.1);\n      }\n\n      ul.ports li select {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        max-width: 110px;\n      }\n\n      ul.ports li  input, \n      ul.ports li  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n        color:             hsl(  0,  0%, 90%);\n      }\n      \n      ul.ports li:nth-child(even) input, \n      ul.ports li:nth-child(even) button {\n        background-color: hsla(210, 100%, 20%, .1);\n      }\n      ul.ports li:nth-child(odd) input, \n      ul.ports li:nth-child(odd) button {\n        background-color: hsla(190, 100%, 20%, .1);\n      }\n\n      ul.ports li.route0  input, \n      ul.ports li.route0  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n      }\n      ul.ports li.route1  input, \n      ul.ports li.route1  button  { \n        background-color: hsla(  0, 98%, 20%, 0.35); \n      }\n      ul.ports li.route2  input, \n      ul.ports li.route2  button  { \n        background-color: hsla( 35, 98%, 20%, 0.35); \n      }\n      ul.ports li.route3  input, \n      ul.ports li.route3  button  { \n        background-color: hsla( 60, 98%, 20%, 0.35); \n      }\n      ul.ports li.route4  input, \n      ul.ports li.route4  button  { \n        background-color: hsla(135, 98%, 20%, 0.35); \n      }\n      ul.ports li.route5  input, \n      ul.ports li.route5  button  { \n        background-color: hsla(160, 98%, 20%, 0.35); \n      }\n      ul.ports li.route6  input, \n      ul.ports li.route6  button  { \n        background-color: hsla(185, 98%, 20%, 0.35); \n      }\n      ul.ports li.route7  input, \n      ul.ports li.route7  button  { \n        background-color: hsla(210, 98%, 20%, 0.35); \n      }\n      ul.ports li.route8  input, \n      ul.ports li.route8  button  { \n        background-color: hsla(285, 98%, 20%, 0.35); \n      }\n      ul.ports li.route9  input, \n      ul.ports li.route9  button  { \n        background-color: hsla(310, 98%, 20%, 0.35); \n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button  { \n        background-color: hsla(335, 98%, 20%, 0.35); \n      }\n\n\n      ul.ports li.error input {\n        background-color: rgb(121, 18, 18);\n        border: 1px solid red;\n      }\n      \n      \n      ul.ports li         label > span { color: hsl(  0,  0%, 75%);}  \n      ul.ports li.route0  label > span { color: hsl(  0,  0%,100%);}  \n      ul.ports li.route1  label > span { color: hsl(  0, 98%, 46%);}\n      ul.ports li.route2  label > span { color: hsl( 35, 98%, 46%);}\n      ul.ports li.route3  label > span { color: hsl( 60, 98%, 46%);}\n      ul.ports li.route4  label > span { color: hsl(135, 98%, 46%);}\n      ul.ports li.route5  label > span { color: hsl(160, 98%, 46%);}\n      ul.ports li.route6  label > span { color: hsl(185, 98%, 46%);}\n      ul.ports li.route7  label > span { color: hsl(210, 98%, 46%);}\n      ul.ports li.route8  label > span { color: hsl(285, 98%, 46%);}\n      ul.ports li.route9  label > span { color: hsl(310, 98%, 46%);}\n      ul.ports li.route10 label > span { color: hsl(335, 98%, 46%);}\n      \n      \n\n      ul.ports  li        input, \n      ul.ports  li        button {\n        border-left: 1px solid hsla(  0,  0%, 75%, 0.5); \n      }\n      ul.ports  li.route0 input, \n      ul.ports  li.route0 button {\n        border-left: 1px solid hsla(  0,  0%,100%, 0.5); \n      }\n      ul.ports  li.route1 input, \n      ul.ports  li.route1 button {\n        border-left: 1px solid hsla(  0, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route2 input, \n      ul.ports  li.route2 button {\n        border-left: 1px solid hsla( 35, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route3 input, \n      ul.ports  li.route3 button {\n        border-left: 1px solid hsla( 60, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route4 input, \n      ul.ports  li.route4 button {\n        border-left: 1px solid hsla(135, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route5 input, \n      ul.ports  li.route5 button {\n        border-left: 1px solid hsla(160, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route6 input, \n      ul.ports  li.route6 button {\n        border-left: 1px solid hsla(185, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route7 input, \n      ul.ports  li.route7 button {\n        border-left: 1px solid hsla(210, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route8 input, \n      ul.ports  li.route8 button {\n        border-left: 1px solid hsla(285, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route9 input, \n      ul.ports  li.route9 button {\n        border-left: 1px solid hsla(310, 98%, 46%, 0.5);\n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button {\n        border-left: 1px solid hsla(335, 98%, 46%, 0.5);\n      }\n      \n      number-scrubber,\n      ul.ports li label span:before {\n        display: inline;\n        line-height: 36px;\n        font-size: 10px;\n        float: right;\n        position: absolute;\n        left: 86px;\n        text-transform: uppercase;\n        opacity: 0.5;\n        width: 36px;\n        text-align: center;      \n      }\n\n      number-scrubber {\n        z-index: 5;\n        height: 36px;\n      }\n      \n      ul.ports li.port-type-color label span:before,\n      ul.ports li.port-type-int label span:before,\n      ul.ports li.port-type-number label span:before {\n        content: '#';\n      }\n      ul.ports li.port-type-array label span:before {\n        content: '[]';\n      }\n      ul.ports li.port-type-object label span:before {\n        content: '{}';\n      }\n      ul.ports li.port-type-string label span:before {\n        content: '\"';\n      }\n      ul.ports li.port-type-all label span:before {\n        content: '*';\n      }\n\n      section.errors header {\n        display: flex;\n        justify-content: space-between;\n      }\n      section.errors header h2 {\n        font-size: 10px;\n        font-weight: normal;\n        line-height: 36px;\n        margin-bottom: 0px;\n        padding-bottom: 0px;\n        position: static;\n        text-align: left;\n        color: var(--noflo-ui-text);\n      }\n      section.errors ul.toolbar {\n        display: inline-block;\n      }\n\n      ul#errorEvents {\n        max-height: 140px;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        clear: left;\n      }\n      ul#errorEvents li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-bottom: 0px;\n        color: hsl(185,100%,75%);\n        max-height: 56px;\n        overflow: hidden;\n        margin-bottom: 2px;\n        padding-bottom: 2px;\n        border-bottom: 1px solid hsla(190, 30%, 2%, 0.4);\n      }\n    </style>\n    <header>\n      <input type=\"text\" on-keydown=\"checkUpdateLabel\" on-blur=\"updateLabel\" class=\"editable-title\" value=\"{{label}}\">\n      <template is=\"dom-if\" if=\"{{_computeIf(node)}}\">\n        <h2>{{node.component}}</h2>\n      </template>\n    </header>\n    <ul class=\"ports\">\n      <template is=\"dom-repeat\" items=\"{{inports}}\" as=\"port\">\n        <li class\\$=\"{{_computeClass(port)}}\">\n          <label><span title=\"{{port.name}}\">{{port.label}}</span>\n\n            <template is=\"dom-if\" if=\"{{_computeIf2(port)}}\">\n              <button data-name\\$=\"{{port.name}}\" on-click=\"sendBang\">\n                <noflo-icon icon=\"bolt\"></noflo-icon>\n              </button>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf3(port)}}\">\n              <input type=\"checkbox\" data-name\\$=\"{{port.name}}\" checked=\"{{port.value}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{port.values}}\">\n              <select data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" value=\"{{port.value::input}}\" data-type\\$=\"{{port.type}}\">\n                <option></option>\n                <template is=\"dom-repeat\" items=\"{{port.values}}\" as=\"value\">\n                  <option value=\"[[value]]\" selected\\$=\"{{_computeSelected(port, value)}}\">{{value}}</option>\n                </template>\n              </select>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf4(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"1\" data-type=\"int\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"int\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf5(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"0.01\" data-type=\"number\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"number\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf6(port)}}\">\n              <input type=\"{{port.inputType}}\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" autocapitalize=\"off\" autocorrect=\"off\" on-keydown=\"checkEnter\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf7(port)}}\">\n              <input type=\"text\" data-name\\$=\"{{port.name}}\" data-type=\"string\" on-change=\"updateValue\">\n              <input type=\"file\" data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf8(port)}}\">\n              <button class=\"remove-value\" on-click=\"removeValue\" data-port\\$=\"{{port.name}}\" title=\"Clear data\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n            </template>\n\n          </label>\n          <template is=\"dom-if\" if=\"{{port.description}}\">\n          <p>{{port.description}}</p>\n          </template>\n        </li>\n      </template>\n    </ul>\n    <template is=\"dom-if\" if=\"[[errorLog.length]]\">\n    <section class=\"errors\">\n      <header>\n        <h2>Errors</h2>\n        <ul class=\"toolbar\">\n          <li>\n            <button id=\"clear\" on-click=\"clearErrors\" class=\"blue-button\" title=\"Clear Error Log\">\n              <noflo-icon icon=\"ban\"></noflo-icon>\n            </button>\n           </li>\n        </ul>\n      </header>\n      <ul id=\"errorEvents\">\n        <template is=\"dom-repeat\" items=\"[[errorLog]]\" as=\"event\">\n          <li>{{ event.payload.error }}</li>\n        </template>\n      </ul>\n    </section></template>\n`,\n\n  is: 'noflo-node-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    errorLog: {\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    inports: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    label: {\n      type: String,\n      value: '',\n    },\n    lastErrorLog: {\n      type: Number,\n      value: 0,\n    },\n    node: {\n      value: null,\n      notify: true,\n      observer: 'nodeChanged',\n    },\n    scrubbing: {\n      type: Boolean,\n      value: false,\n    },\n    showErrorLogs: {\n      type: Number,\n      value: 20,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n  },\n\n  nodeChanged() {\n    if (!this.node) {\n      return;\n    }\n    this.updatePorts();\n    this.label = this.node.metadata.label;\n  },\n\n  componentChanged() {\n    if (!this.component) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  checkUpdateLabel(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateLabel(event);\n    }\n  },\n\n  updateLabel(event) {\n    // Check if we need to make change\n    const label = event.currentTarget.value;\n    if (label === this.node.metadata.label) {\n      return;\n    }\n    this.graph.startTransaction('rename');\n    // Change id\n    let id = label;\n    if (id !== this.node.id) {\n      // Ensure unique\n      while (this.graph.getNode(id)) {\n        let num = 60466176;\n        // 36^5\n        num = Math.floor(Math.random() * num);\n        id = `${label}_${num.toString(36)}`;\n      }\n      this.graph.renameNode(this.node.id, id);\n    }\n    // Change label\n    this.graph.setNodeMetadata(id, { label });\n    this.graph.endTransaction('rename');\n  },\n\n  getPortValue(port) {\n    let value;\n    this.graph.initializers.forEach((iip) => {\n      if (iip.to.node === this.node.id && iip.to.port === port) {\n        value = iip.from.data;\n      }\n    });\n    return value;\n  },\n\n  getPortConnection(port) {\n    let connected = false;\n    let route = 'X';\n    Object.keys(this.graph.inports).forEach((name) => {\n      const inport = this.graph.inports[name];\n      if (inport.process === this.node.id && inport.port === port) {\n        connected = true;\n        route = 2;\n      }\n    });\n    this.graph.edges.forEach((edge) => {\n      if (edge.to.node === this.node.id && edge.to.port === port) {\n        connected = true;\n        route = edge.metadata.route || 0;\n      }\n    });\n    return {\n      connected,\n      route,\n    };\n  },\n\n  portToInput(port) {\n    const value = this.getPortValue(port.name);\n    const connection = this.getPortConnection(port.name);\n    const portDef = {\n      name: port.name,\n      label: port.name.replace(/(.*)\\/(.*)(_.*)\\.(.*)/, '$2.$4'),\n      class: '',\n      type: port.type,\n      description: port.description,\n      inputType: port.type,\n      value,\n      values: port.values,\n      route: connection.route,\n    };\n    switch (port.type) {\n      case 'object':\n      case 'array':\n        portDef.value = JSON.stringify(value);\n        portDef.inputType = 'text';\n        break;\n      case 'int':\n        portDef.inputType = 'number';\n        break;\n      case 'all':\n      default:\n        portDef.inputType = 'text';\n        break;\n    }\n    return portDef;\n  },\n\n  inputToPort(input) {\n    const dataType = input.getAttribute('data-type');\n    switch (dataType) {\n      case 'object':\n      case 'array':\n        try {\n          return JSON.parse(input.value);\n        } catch (e) {\n          return input.value;\n        }\n      case 'boolean':\n        return input.checked;\n      case 'number':\n        return parseFloat(input.value);\n      case 'int':\n        return parseInt(input.value, 10);\n      case 'date':\n        return new Date(input.value);\n      case 'uri':\n        return (callback) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            callback(reader.result);\n          };\n          reader.readAsDataURL(input.files[0]);\n        };\n      default:\n        return input.value;\n    }\n  },\n\n  updatePorts() {\n    this.set('inports', []);\n    if (!this.component || !this.graph) {\n      return;\n    }\n    this.component.inports.forEach((port) => {\n      const portDef = this.portToInput(port);\n      this.push('inports', portDef);\n    });\n  },\n\n  checkEnter(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      this.updateValue(event);\n    }\n  },\n\n  updateValue(event) {\n    event.preventDefault();\n    const value = this.inputToPort(event.currentTarget);\n    const name = event.currentTarget.getAttribute('data-name');\n    let port;\n    this.inports.forEach((p) => {\n      if (p.name === name) {\n        port = p;\n      }\n    });\n    if (port.type !== 'string' && event.currentTarget.value === '') {\n      // Empty string should remove number, object, array IIPs\n      this.removeValue(event);\n      return;\n    }\n    const validatePortValue = (type, val) => {\n      switch (type) {\n        case 'number':\n        case 'int':\n          return val !== '' && !Number.isNaN(val);\n        case 'object':\n          return val instanceof Object;\n        case 'array':\n          return val instanceof Array;\n        case 'date':\n          return val instanceof Date;\n        default:\n          return true;\n      }\n    };\n    const setPortValue = () => {\n      if (!this.scrubbing) {\n        this.graph.startTransaction('iipchange');\n      }\n      this.graph.removeInitial(this.node.id, name);\n      this.graph.addInitial(value, this.node.id, name);\n      if (!this.scrubbing) {\n        this.graph.endTransaction('iipchange');\n        // Force Polymer to update view\n        this.updatePorts();\n      }\n    };\n    if (validatePortValue(port.type, value)) {\n      if (typeof value === 'function') {\n        // async callback\n        value(setPortValue);\n      } else {\n        setPortValue(value);\n      }\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    } else {\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.add('error');\n    }\n  },\n\n  scrubStart(event) {\n    if (event.currentTarget.value === null) {\n      // eslint-disable-next-line no-param-reassign\n      event.currentTarget.value = 0;\n    }\n  },\n\n  // This need to work with the journal\n  // this.scrubbing = true;\n  // this.graph.startTransaction('iipscrub');\n  scrubEnd() {\n  },\n\n  // this.graph.endTransaction('iipscrub');\n  // this.scrubbing = false;\n  removeValue(event) {\n    event.preventDefault();\n    let name = event.currentTarget.getAttribute('data-port');\n    if (!name) {\n      name = event.currentTarget.getAttribute('data-name');\n    }\n    this.graph.removeInitial(this.node.id, name);\n    PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    this.updatePorts();\n  },\n\n  sendBang(event) {\n    event.preventDefault();\n    const name = event.currentTarget.getAttribute('data-name');\n    this.graph.startTransaction('bang');\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.addInitial(true, this.node.id, name);\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.endTransaction('bang');\n  },\n\n  clearErrors() {\n    this.fire('clear:runtimeevents', {\n      id: this.node.id,\n      type: 'processerror',\n    });\n  },\n\n  _computeIf(node) {\n    if (!node) {\n      return true;\n    }\n    return node.label !== node.component;\n  },\n\n  _computeClass(port) {\n    return `route route${port.route} ${port.class} port-type-${port.type}`;\n  },\n\n  _computeIf2(port) {\n    return port.type === 'bang';\n  },\n\n  _computeIf3(port) {\n    return port.type === 'boolean';\n  },\n\n  _computeIf4(port) {\n    return port.type === 'int' && !port.values;\n  },\n\n  _computeIf5(port) {\n    return port.type === 'number' && !port.values;\n  },\n\n  _computeIf6(port) {\n    return port.type !== 'bang' && port.type !== 'boolean' && port.type !== 'int' && port.type !== 'number' && port.type !== 'uri' && !port.values;\n  },\n\n  _computeIf7(port) {\n    return port.type === 'uri';\n  },\n\n  _computeIf8(port) {\n    return port.type !== 'bang' && port.value !== undefined;\n  },\n\n  _computeSelected(port, value) {\n    return port.value === value;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      :host {\n        display: block;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, hsla(0, 0%, 0%, 0) 1px);\n        background-size: calc(100% - 1px) 100%;\n        background-position: 0px;\n      }\n      h1 {\n        font-size:15px;\n      }\n      ul.toolbar2right {\n        right: 0px !important;\n      }\n      ul.routes {\n        margin: 0;\n        margin-left: 0px;\n        margin-right: 0px;\n        padding-top: 10px;\n      }\n      ul.routes li {\n        display: inline-block;\n        position: relative;\n        float: left;\n        margin: 0px;\n        height: 26px;\n      }\n      ul.routes li button:hover {\n        opacity: 1;\n      }\n      ul.routes li button {\n        opacity: 0.7;\n        display: block;\n        padding: 0px;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n        -webkit-box-sizing: border-box;\n           -mox-box-sizing: border-box;\n                box-sizing: border-box;\n        border: none;\n      }\n\n      .routes button {\n        width: 25px !important;\n        height: 20px !important;\n        background-color: hsla(  0, 98%, 100%, .8); \n        border: 1px solid hsl(  0, 98%, 46%);\n      }\n      .routes button.route0  { \n        background-color: hsla(  0, 98%, 100%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route1  { \n        background-color: hsla(  0, 98%, 46%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route2  { \n        background-color: hsla( 35, 98%, 46%, .8); \n        border-color:      hsl( 35, 98%, 46%); \n      }\n      .routes button.route3  { \n        background-color: hsla( 60, 98%, 46%, .8); \n        border-color:      hsl( 60, 98%, 46%); \n      }\n      .routes button.route4  { \n        background-color: hsla(135, 98%, 46%, .8); \n        border-color:      hsl(135, 98%, 46%); \n      }\n      .routes button.route5  { \n        background-color: hsla(160, 98%, 46%, .8); \n        border-color:      hsl(160, 98%, 46%);\n      }\n      .routes button.route6  { \n        background-color: hsla(185, 98%, 46%, .8); \n        border-color:      hsl(185, 98%, 46%);\n      }\n      .routes button.route7  { \n        background-color: hsla(210, 98%, 46%, .8); \n        border-color:      hsl(210, 98%, 46%);\n      }\n      .routes button.route8  { \n        background-color: hsla(285, 98%, 46%, .8); \n        border-color:      hsl(285, 98%, 46%);\n      }\n      .routes button.route9  { \n        background-color: hsla(310, 98%, 46%, .8); \n        border-color:      hsl(310, 98%, 46%);\n      }\n      .routes button.route10 { \n        background-color: hsla(335, 98%, 46%, .8); \n        border-color:      hsl(335, 98%, 46%);\n      }\n      \n      .routes  button.route0:hover  { background-color: hsla(  0, 98%, 100%, 1); }\n      .routes  button.route1:hover  { background-color: hsla(  0, 98%, 46%, 1); }\n      .routes  button.route2:hover  { background-color: hsla( 35, 98%, 46%, 1); }\n      .routes  button.route3:hover  { background-color: hsla( 60, 98%, 46%, 1); }\n      .routes  button.route4:hover  { background-color: hsla(135, 98%, 46%, 1); }\n      .routes  button.route5:hover  { background-color: hsla(160, 98%, 46%, 1); }\n      .routes  button.route6:hover  { background-color: hsla(185, 98%, 46%, 1); }\n      .routes  button.route7:hover  { background-color: hsla(210, 98%, 46%, 1); }\n      .routes  button.route8:hover  { background-color: hsla(285, 98%, 46%, 1); }\n      .routes  button.route9:hover  { background-color: hsla(310, 98%, 46%, 1); }\n      .routes button.route10:hover  { background-color: hsla(335, 98%, 46%, 1); }\n    </style>\n    <header>\n      <h1 slot=\"header\" class=\"clear\" on-click=\"clear\"><span>{{ edges.length}}</span> <template is=\"dom-if\" if=\"{{_computeIf(edges)}}\">Edges</template><template is=\"dom-if\" if=\"{{_computeIf2(edges)}}\">Edge</template></h1>\n    </header>\n    <ul class=\"toolbar toolbar2right\">\n      <template is=\"dom-if\" if=\"{{secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setUnsecure\" title=\"Set as visible\">\n            <noflo-icon icon=\"lock\"></noflo-icon>&nbsp;Secure\n          </button>\n        </li>\n      </template>\n      <template is=\"dom-if\" if=\"{{!secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setSecure\" title=\"Set as hidden\">\n            <noflo-icon icon=\"unlock\"></noflo-icon>&nbsp;Visible\n          </button>\n        </li>\n      </template>\n    </ul>\n    <ul class=\"routes\">\n      <template is=\"dom-repeat\" items=\"{{routes}}\" as=\"route\">\n        <li><button name=\"{{route}}\" on-click=\"setRoute\" class\\$=\"{{_computeClass(route)}}\"></button></li>\n      </template>\n    </ul>    \n`,\n\n  is: 'noflo-edge-menu',\n\n  properties: {\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'edgesChanged',\n    },\n    graph: { value: null },\n    routes: {\n      type: Array,\n      value() {\n        return [\n          0,\n          1,\n          2,\n          3,\n          4,\n          5,\n          6,\n          7,\n          9,\n          10,\n        ];\n      },\n    },\n    secure: {\n      type: Boolean,\n      value: false,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n    PolymerDom(this).classList.add('sticky-head');\n  },\n\n  edgesChanged() {\n    if (!this.edges.length) {\n      return;\n    }\n    this.secure = true;\n    for (let i = 0; i < this.edges.length; i += 1) {\n      if (!this.edges[i].metadata.secure) {\n        this.secure = false;\n        return;\n      }\n    }\n  },\n\n  clear(event) {\n    event.preventDefault();\n    let edge;\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n  },\n\n  remove(event) {\n    event.preventDefault();\n    while (this.edges.length) {\n      const edge = this.pop('edges');\n      if (PolymerDom(edge).parentNode) {\n        PolymerDom(PolymerDom(edge).parentNode).removeChild(edge);\n      }\n    }\n  },\n\n  setRoute(event) {\n    event.preventDefault();\n    const route = parseInt(event.currentTarget.getAttribute('name'), 10);\n    this.graph.startTransaction('changeroute');\n    this.edges.forEach((edge) => {\n      this.graph.setEdgeMetadata(\n        edge.from.node,\n        edge.from.port,\n        edge.to.node,\n        edge.to.port,\n        {\n          route,\n        },\n      );\n    });\n    this.graph.endTransaction('changeroute');\n  },\n\n  setSecure(event) {\n    event.preventDefault();\n    this.toggleSecure(true);\n  },\n\n  setUnsecure(event) {\n    event.preventDefault();\n    this.toggleSecure(false);\n  },\n\n  toggleSecure(secure) {\n    this.graph.startTransaction('changesecure');\n    this.edges.forEach((edge) => {\n      const meta = edge.metadata;\n      meta.secure = secure;\n      this.graph.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, meta);\n    });\n    this.graph.endTransaction('changesecure');\n    this.secure = secure;\n  },\n\n  _computeIf(edges) {\n    return edges.length > 1;\n  },\n\n  _computeIf2(edges) {\n    return edges.length === 1;\n  },\n\n  _computeClass(route) {\n    return `route${route}`;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport RuntimeEvents from '../src/components/RuntimeEvents';\nimport './noflo-node-inspector';\nimport './noflo-edge-menu';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-left: 7px;\n        padding-right: 7px;\n        bottom: 0px;\n        border-top-width: 1px;\n        height: 100vh;\n        padding-top: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f16c';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        top: 0px;\n        height: 36px;\n        line-height: 36px;\n        left: 50%;\n        left: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: n-resize;\n      }\n      the-panel#fixed main {\n        height: 288px;\n      }\n      the-panel#fixed main .react-fluid-table .cell {\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .react-fluid-table .cell,\n      the-panel#fixed main .react-fluid-table .header-cell {\n        box-sizing: border-box;\n        display: flex;\n        padding: 7px;\n      }\n      the-panel#fixed main .react-fluid-table-container {\n        will-change: height;\n      }\n      the-panel#fixed main .sticky-header {\n        position: sticky;\n        top: 0;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n      }\n      the-panel#fixed main .row-wrapper {\n        display: nline-block;\n      }\n      the-panel#fixed main .react-fluid-table-header {\n        display: flex;\n        border-bottom: 1px solid var(--noflo-ui-border);\n        background-color: var(--noflo-ui-background);\n        z-index: 2;\n      }\n      the-panel#fixed main .header-cell {\n        align-items: baseline;\n      }\n      the-panel#fixed main .header-cell-text {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 10px;\n        font-weight: bold;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .header-cell-arrow {\n        width: 0;\n        height: 0;\n        margin-left: 4px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n      }\n      the-panel#fixed main .header-cell-arrow.asc {\n      }\n      the-panel#fixed main .header-cell-arrow.desc {\n      }\n      the-panel#fixed main .react-fluid-table-row {\n      }\n      the-panel#fixed main .react-fluid-table-row .hidden {\n        display: none;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details {\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background);\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        /* This is a workaround for react-fluid-table not recalculating on expand, most likely due to Shadow DOM */\n        position: absolute;\n        z-index: 1;\n        right: 7px;\n        width: max(60%, 288px);\n        height: 144px;\n        overflow-y: auto;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dl {\n        margin: 0px;\n        padding: 7px;\n        font-size: 10px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dt {\n        font-weight: bold;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd {\n        margin: 0px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd.packet-data {\n        white-space: pre-wrap;\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .row-container {\n        display: flex;\n      }\n      the-panel#fixed main .cell {\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text);\n      }\n      the-panel#fixed main .cell .expander {\n        cursor: pointer;\n        height: 1em;\n        width: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge {\n        font-weight: bold;\n      }\n      the-panel#fixed main .cell .edge .subgraph {\n        margin-right: 7px;\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .edge .source span {\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .target span {\n        margin-left: 7px;\n      }\n      the-panel#fixed main .cell .edge .port-id {\n        text-transform: uppercase;\n      }\n      the-panel#fixed main .cell .edge .arrow {\n        margin-left: 7px;\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .connection {\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge .route0 { color: #fff; }\n      the-panel#fixed main .cell .edge .route1 { color: hsl(  0,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route2 { color: hsl( 35,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route3 { color: hsl( 60,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route4 { color: hsl(135,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route5 { color: hsl(160,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route6 { color: hsl(185,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route7 { color: hsl(210,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route8 { color: hsl(285,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route9 { color: hsl(310,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route10 { color: hsl(335,  98%, 46%); }\n    </style>\n    <the-panel id=\"fixed\" edge=\"bottom\" size=\"324\" handle=\"36\" open={{showPackets}}>\n      <main id=\"fixedmain\">\n      </main>\n    </the-panel>\n  `,\n  is: 'noflo-packets',\n  properties: {\n    currentgraph: { value: null },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: { value: null },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    packets: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'packetsChanged',\n    },\n    nodeInspectors: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'nodesChanged',\n    },\n    panel: { value: null },\n    showPackets: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n    readonly: { notify: true },\n  },\n  attached() {\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    this.frameRequest = null;\n  },\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n  edgesChanged(newEdges, oldEdges) {\n    if (this.edges.length) {\n      this.showEdgeCards();\n    } else {\n      this.hideEdgeCards();\n    }\n    this.updatePacketInspector();\n    if (newEdges.length && !oldEdges.length && this.packets.length) {\n      // Show packet inspector when selecting an edge\n      this.showPackets = true;\n    }\n  },\n  widthChanged() {\n    this.updatePacketInspector();\n  },\n  eventsChanged() {\n    // Clear previous state\n    if (this.editor) {\n      this.editor.clearErrorNodes();\n    }\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      this.nodeInspectors[id].inspector.errorLog = [];\n    });\n\n    if (!this.events) {\n      return;\n    }\n    this.events.forEach((event) => {\n      if (event.type !== 'processerror' || !event.payload.id) {\n        return;\n      }\n      // TODO: Check that process is in current graph\n      if (this.editor) {\n        this.editor.addErrorNode(event.payload.id);\n      }\n      if (this.nodeInspectors[event.payload.id]) {\n        this.nodeInspectors[event.payload.id].inspector.push('errorLog', event);\n      }\n    });\n  },\n  genId(source, target) {\n    let fromStr;\n    if (source) {\n      fromStr = `${source.node} ${source.port.toUpperCase()}`;\n    } else {\n      fromStr = 'DATA';\n    }\n    const toStr = `${target.port.toUpperCase()} ${target.node}`;\n    return `${fromStr} -> ${toStr}`;\n  },\n  genEdgeId(edge) {\n    return this.genId(edge.from, edge.to);\n  },\n  showEdgeCards() {\n    if (this.edgeMenu) {\n      if (this.readonly) {\n        PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n        this.edgeMenu = null;\n      } else {\n        this.set('edgeMenu.dialog.edges', this.edges);\n      }\n    } else if (!this.readonly) {\n      const menu = document.createElement('noflo-edge-menu');\n      menu.edges = this.edges;\n      menu.graph = this.currentgraph;\n      this.edgeMenu = document.createElement('the-card');\n      this.set('edgeMenu.type', 'edge-menu');\n      this.set('edgeMenu.dialog', menu);\n      PolymerDom(this.edgeMenu).appendChild(menu);\n      this.edgeMenu.addTo(this.panel);\n    }\n  },\n  packetsChanged(newPackets, oldPackets) {\n    this.updatePacketInspector();\n    if (newPackets.length && !oldPackets.length) {\n      // Show packet inspector when first packets arrive\n      this.showPackets = true;\n    }\n    if (!newPackets.length && oldPackets.length) {\n      this.showPackets = false;\n    }\n  },\n  updatePacketInspector() {\n    if (this.frameRequest) {\n      return;\n    }\n    this.frameRequest = requestAnimationFrame(() => {\n      this.frameRequest = null;\n      const edgeIds = this.currentgraph\n        ? this.currentgraph.edges.map((e) => this.genEdgeId(e)) : [];\n      const selectedEdgeIds = this.edges.map((e) => this.genEdgeId(e));\n      const packets = this.packets\n        .map((p, idx) => {\n          const packetId = this.genId(p.src, p.tgt);\n          let packetEdge;\n          if (this.currentgraph && edgeIds.indexOf(packetId) !== -1) {\n            packetEdge = this.currentgraph.edges[edgeIds.indexOf(packetId)];\n          }\n          return {\n            ...p,\n            rowId: `${idx + 1}`,\n            id: packetId,\n            edge: packetEdge,\n          };\n        })\n        .filter((p) => {\n          if (!selectedEdgeIds.length) {\n            // Show all packets when no edges are selected\n            return true;\n          }\n          return (selectedEdgeIds.indexOf(p.id) !== -1);\n        });\n      const container = this.shadowRoot.getElementById('fixedmain');\n      ReactDOM.render(RuntimeEvents({\n        packets,\n        width: container.offsetWidth, // TODO: Update on resize\n      }), container);\n    });\n  },\n  hideEdgeCards() {\n    if (this.edgeMenu) {\n      PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n      this.edgeMenu = null;\n    }\n  },\n  nodesChanged() {\n    if (this.nodes.length) {\n      this.showNodeCards();\n    } else {\n      this.hideNodeCards();\n    }\n  },\n  showNodeCards() {\n    this.nodes.forEach((node) => {\n      const { id } = node;\n      if (this.nodeInspectors[id]) {\n        return;\n      }\n      if (this.readonly) {\n        return;\n      }\n      const inspector = document.createElement('noflo-node-inspector');\n      inspector.node = node;\n      inspector.component = this.editor.getComponent(node.component);\n      inspector.graph = this.currentgraph;\n      if (this.events) {\n        inspector.errorLog = this.events.filter((event) => {\n          if (event.type !== 'processerror') {\n            return false;\n          }\n          if (event.payload.id !== id) {\n            return false;\n          }\n          return true;\n        });\n      }\n      this.nodeInspectors[id] = document.createElement('the-card');\n      this.nodeInspectors[id].type = 'node-inspector';\n      this.nodeInspectors[id].inspector = inspector;\n      PolymerDom(this.nodeInspectors[id]).appendChild(inspector);\n      this.nodeInspectors[id].addTo(this.panel);\n    });\n    let found;\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      found = false;\n      this.nodes.forEach((node) => {\n        if (node.id === id) {\n          found = true;\n        }\n      });\n      if (!found) {\n        PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n          .removeChild(this.nodeInspectors[id]);\n        delete this.nodeInspectors[id];\n      }\n    });\n  },\n  hideNodeCards() {\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n        .removeChild(this.nodeInspectors[id]);\n      delete this.nodeInspectors[id];\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        text-align: center;\n        background-color: hsl(35, 98%, 46%);\n        color: white;\n        border-bottom: 1px black solid;\n        padding: 18px;\n      }\n      :host(.error) {\n        background-color: hsl(0, 98%, 46%);\n      }\n      a {\n        color: hsl(0, 98%, 46%);\n        background-color: white;\n        display: inline-block;\n        padding: 9px;\n        text-decoration: none;\n        font-size: 12px;\n        border-radius: 3px;\n      }\n\n      /* /deep/ animations don't work: https://github.com/Polymer/polymer/issues/141#issuecomment-31887427 */\n      /* only animate when on-screen */\n      .fa-spin {\n        -webkit-animation: none !important;\n        animation: none !important;\n      }\n      :host(.show) .fa-spin {\n        -webkit-animation: fa-spin 2s infinite linear !important;\n        animation: fa-spin 2s infinite linear !important;\n      }\n      @-webkit-keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n      @keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <noflo-icon icon=\"warning\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{_computeIf(isError, offerHTTPS)}}\">\n      <noflo-icon icon=\"spinner\" class=\"fa-spin\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{offerHTTPS}}\">\n      <noflo-icon icon=\"lock\"></noflo-icon>\n      This app is available securely at <a href=\"https://app.flowhub.io/\">https://app.flowhub.io/</a> - <a href=\"https://docs.flowhub.io/article/75-security-with-https-and-wss\">about</a>\n    </template>\n    <slot>\n    <span>{{message}}</span>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <a href=\"#\" class=\"button\">go home</a>\n    </template>\n  </slot>\n`,\n\n  is: 'noflo-alert',\n\n  properties: {\n    isError: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'isErrorChanged',\n    },\n    message: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    offerHTTPS: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n  },\n\n  isErrorChanged() {\n    if (this.isError) {\n      PolymerDom(this).classList.add('error');\n    } else {\n      PolymerDom(this).classList.remove('error');\n    }\n  },\n\n  _computeIf(isError, offerHTTPS) {\n    return !isError && !offerHTTPS;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport projects from '../src/projects';\nimport './noflo-polymer';\nimport './noflo-main';\nimport './the-graph-editor';\nimport './noflo-library';\nimport './noflo-context';\nimport './noflo-runtime';\nimport './noflo-journal';\nimport './noflo-component-editor';\nimport './noflo-search';\nimport './noflo-project';\nimport './noflo-packets';\nimport './noflo-alert';\n\nPolymer({\n  _template: html`\n    <style>\n      /*\n       * z-indexes:\n       *\n       * Modal dialogs: 5\n       * Main screen: 4\n       * Panels: 3\n       * Context cards & runtime controls: 2\n       * Workspace chrome: 1\n       * Workspace: 0\n       */\n      :host {\n        display: block;\n      }\n\n      noflo-main {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        z-index: 4;\n      }\n      the-graph-editor {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n      }\n      noflo-component-editor {\n        position: fixed;\n        top: 0;\n        left: 36px;\n        height: 100vh;\n        right: 36px;\n        z-index: 0;\n      }\n      noflo-search {\n        position: fixed;\n        top: 0px;\n        left: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 2;\n      }\n      noflo-runtime {\n        position: fixed;\n        top: 0px;\n        right: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 3;\n      }\n      noflo-journal {\n        position: fixed;\n        bottom: 0px;\n        right: 36px;\n        width: 288px;\n        z-index: 3;\n      }\n\n      #alert {\n        box-sizing: border-box;\n        position: fixed;\n        top: -144px;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        max-height: 144px;\n        overflow: hidden;\n        transition: top 0.3s ease-in-out;\n      }\n      #alert.show {\n        top: 0;\n      }\n      #asproject::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsl(185, 98%, 46%);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n      }\n      #asproject:hover {\n        background-color: black;\n        color: hsl(185, 98%, 46%);\n      }\n      #asproject {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        position: fixed;\n        box-sizing: border-box;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 9;\n        background-color: hsla(185, 98%, 46%, .8);\n        border: 1px solid hsl(185, 98%, 46%);\n        color: black;\n        top: 36px;\n        height: 36px;\n        border-radius: 3px;\n        padding: 8px;\n        cursor: pointer;\n        transition: color 0.3s ease, background-color 0.3s ease, opacity 5.0s ease-in;\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <noflo-main id=\"main\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" projects=\"{{ctx.projects}}\" user=\"{{ctx.user}}\" remote-projects=\"{{ctx.remoteProjects}}\"></noflo-main>\n    <the-graph-editor id=\"grapheditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" graph=\"{{ctx.graph}}\" icons=\"[[ctx.icons]]\"></the-graph-editor>\n    <noflo-library id=\"library\" search=\"{{ctx.search}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\"></noflo-library>\n    <noflo-context id=\"context\" nodes=\"{{ctx.nodes}}\" edges=\"{{ctx.edges}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\" runtimes=\"{{ctx.runtimes}}\" events=\"[[ctx.events]]\"></noflo-context>\n    <noflo-runtime id=\"runtime\" runtime=\"{{ctx.runtime}}\" runtimes=\"{{ctx.compatible}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-runtime>\n    <noflo-journal id=\"journal\" db=\"{{ctx.db}}\" theme=\"[[theme]]\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-journal>\n    <noflo-component-editor id=\"componenteditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\"></noflo-component-editor>\n    <noflo-search id=\"search\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" project=\"{{ctx.project}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\" graphs=\"{{ctx.graphs}}\"></noflo-search>\n    <noflo-project id=\"project\" runtimes=\"{{ctx.runtimes}}\" graph=\"{{ctx.graph}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\" runtime=\"{{ctx.runtime}}\"></noflo-project>\n    <noflo-packets id=\"packets\" edges=\"[[ctx.edges]]\" nodes=\"[[ctx.nodes]]\" currentgraph=\"[[ctx.graph]]\" packets=\"[[ctx.packets]]\" events=\"[[ctx.events]]\" width=\"[[width]]\"></noflo-packets>\n    <noflo-alert id=\"alert\" on-click=\"hideAlert\"></noflo-alert>\n`,\n\n  is: 'noflo-ui',\n\n  properties: {\n    ctx: {\n      type: Object,\n      value() {\n        return {\n          db: null,\n          search: null,\n          graph: null,\n          component: null,\n          graphs: [],\n          project: null,\n          projects: [],\n          runtime: null,\n          runtimes: [],\n          compatibleRuntimes: [],\n          packets: [],\n          edges: [],\n          nodes: [],\n        };\n      },\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    dontAutoHideAlert: {\n      type: Boolean,\n      value: false,\n    },\n    height: {\n      value() {\n        return window.innerHeight;\n      },\n      notify: true,\n    },\n    width: {\n      value() {\n        return window.innerWidth;\n      },\n      notify: true,\n    },\n  },\n\n  clearContextFirst: [\n    'graphs',\n    'runtimes',\n    'projects',\n    'edges',\n    'nodes',\n    'compatibleRuntimes',\n    'remoteProjects',\n  ],\n\n  emitEvent(event, payload) {\n    this.fire(event, payload);\n  },\n\n  ready() {\n    this.$.main.addEventListener('userUpdated', (event) => {\n      this.emitEvent('user:update', event.detail);\n    });\n    this.$.main.addEventListener('logout', () => {\n      this.emitEvent('user:logout', true);\n    });\n    this.$.main.addEventListener('login', () => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [],\n      });\n    });\n    this.$.main.addEventListener('relogin', (event) => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [event.detail],\n      });\n    });\n    this.$.main.addEventListener('fetchRemote', (event) => {\n      this.emitEvent('flowhub:projects:fetch', event.detail);\n    });\n    this.$.main.addEventListener('downloadProject', (event) => {\n      this.emitEvent('application:sethash', [\n        'github',\n        event.detail.org,\n        event.detail.repo,\n        'tree',\n        event.detail.branch,\n      ]);\n    });\n    this.$.main.addEventListener('fetchRuntimes', (event) => {\n      this.emitEvent('flowhub:runtimes:fetch', event.detail);\n    });\n    this.$.main.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.main.addEventListener('newruntime', (event) => {\n      this.emitEvent('flowhub:runtimes:register', event.detail);\n    });\n    this.$.main.addEventListener('newproject', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.main.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('openProject', (event) => {\n      this.openProject(event.detail);\n    });\n    this.$.context.addEventListener('newsubgraph', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendSubgraph', {\n        ...event.detail,\n        runtime: this.ctx.runtime.definition.id,\n      });\n    });\n    this.$.context.addEventListener('clear:runtimeevents', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph && !clear.all) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      delete clear.all;\n      this.emitEvent('runtime:clearevents', clear);\n    });\n    this.$.context.addEventListener('clear:runtimepackets', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      this.emitEvent('runtime:clearpackets', clear);\n    });\n    this.$.runtime.addEventListener('switchRuntime', (event) => {\n      this.emitEvent('application:recreatestate', event.detail);\n    });\n    this.$.runtime.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:runtime', event.detail);\n    });\n    this.$.runtime.addEventListener('start', (event) => {\n      this.emitEvent('runtime:start', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('stop', (event) => {\n      this.emitEvent('runtime:stop', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('reconnect', (event) => {\n      this.emitEvent('runtime:reconnect', event.detail);\n    });\n    this.$.grapheditor.addEventListener('edges', (event) => {\n      this.emitEvent('context:edges', event.detail);\n    });\n    this.$.grapheditor.addEventListener('nodes', (event) => {\n      this.emitEvent('context:nodes', event.detail);\n    });\n    this.$.grapheditor.addEventListener('changed', (event) => {\n      const ev = event;\n      ev.detail.properties.changed = true;\n      this.emitEvent('storage:save:graph', ev.detail);\n    });\n    this.$.grapheditor.addEventListener('graphChanges', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraphChanges', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: this.ctx.graph,\n        changes: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.project.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.project.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.project.addEventListener('newcomponent', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n    });\n    this.$.project.addEventListener('newspec', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n    });\n    this.$.project.addEventListener('sync', (event) => {\n      this.emitEvent('github:sync:prepare', event.detail);\n    });\n    this.$.project.addEventListener('syncDecision', (event) => {\n      this.emitEvent('github:sync:synchronize', event.detail);\n    });\n    this.$.project.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.project.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.main.addEventListener('deleteRuntime', (event) => {\n      this.emitEvent('flowhub:runtimes:remove', event.detail);\n    });\n    this.$.main.addEventListener('deleteRepo', (event) => {\n      this.emitEvent('flowhub:projects:remove', event.detail);\n      if (this.ctx.remoteProjects) {\n        // Since remote projects are not updated via normal flow, we can\n        // directly remove it from view\n        this.splice('ctx.remoteProjects', this.ctx.remoteProjects.indexOf(event.detail), 1);\n      }\n    });\n    this.$.componenteditor.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.componenteditor.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: this.ctx.component,\n      });\n      this.triggerTests();\n    });\n    this.$.search.addEventListener('search:library', (event) => {\n      this.emitEvent('context:search_library', event.detail);\n    });\n    this.$.search.addEventListener('search:graph', (event) => {\n      this.emitEvent('context:search_graph', event.detail);\n    });\n    this.$.search.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.library.addEventListener('result', (event) => {\n      this.emitEvent('context:search_library_result', { searchLibraryResult: event.detail });\n    });\n    this.$.search.addEventListener('deleteGraph', (event) => {\n      const { project } = this.ctx;\n      this.emitEvent('storage:delete:graph', event.detail);\n      if (project && project.graphs.indexOf(event.detail) !== -1) {\n        this.splice('ctx.project.graphs', project.graphs.indexOf(event.detail), 1);\n      }\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('deleteComponent', (event) => {\n      const { project } = this.ctx;\n      if (!project || !project.components) {\n        return;\n      }\n      const component = event.detail;\n      const index = project.components.indexOf(component);\n      if (index !== -1) {\n        this.splice('ctx.project.components', index, 1);\n      }\n      this.emitEvent('storage:delete:component', component);\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.triggerTests();\n    });\n    this.set('$.library.editor', this.$.grapheditor);\n    this.set('$.journal.editor', this.$.grapheditor);\n    this.set('$.context.editor', this.$.grapheditor);\n    this.set('$.packets.editor', this.$.grapheditor);\n    this.set('$.search.editor', this.$.grapheditor);\n    this.set('$.runtime.panel', this.$.context.$.fixed);\n    this.set('$.packets.panel', this.$.context.$.contextsection);\n    this.set('$.search.panel', this.$.context.$.contextsection);\n  },\n\n  updated(context) {\n    if (context.state) {\n      switch (context.state) {\n        case 'error': {\n          this.showError(context);\n          break;\n        }\n        case 'ok': {\n          this.hideAlertSoon();\n          break;\n        }\n        case 'loading': {\n          this.showProgress(context);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n\n    // Update local state with incoming data\n    Object.keys(context).forEach((key) => {\n      if (this.clearContextFirst.indexOf(key) !== -1) {\n        // Clear arrays first so Polymer knows there are changes\n        this.set(`ctx.${key}`, context[key].slice(0));\n        if (key === 'projects') {\n          // Projects are complex objects that need a full notify\n          for (let i = 0; i < this.ctx.projects.length; i += 1) {\n            const project = this.ctx.projects[i];\n            this.set(`ctx.projects.${i}`, {});\n            this.set(`ctx.projects.${i}`, project);\n            if (this.ctx.project && this.ctx.project.id === project.id) {\n              this.set('ctx.project', {});\n              this.set('ctx.project', project);\n            }\n          }\n        }\n        return;\n      }\n      this.set(`ctx.${key}`, context[key]);\n    });\n    if (context.user && context.user['flowhub-theme']) {\n      this.theme = context.user['flowhub-theme'];\n    }\n    if (context.searchLibraryResult) {\n      this.$.search.libraryResults(this.ctx.searchLibraryResult);\n    }\n    if (context.searchGraphResult) {\n      this.$.search.graphResults(this.ctx.searchGraphResult);\n    }\n    if (context.syncOperation !== undefined) {\n      this.$.project.confirm(context.syncOperation);\n      return;\n    }\n    if (context.componentLibrary) {\n      Object.keys(this.$.grapheditor.$.graph.library).forEach((libKey) => {\n        delete this.$.grapheditor.$.graph.library[libKey];\n      });\n      context.componentLibrary.forEach((def) => {\n        this.$.grapheditor.registerComponent(def);\n      });\n      this.set('ctx.componentLibrary', null);\n    }\n    if (this.ctx.suites) {\n      this.$.runtime.showTests(this.ctx.suites);\n    }\n    if (this.ctx.state === 'loading') {\n      return;\n    }\n    if (this.ctx.state === 'error') {\n      this.showError(this.ctx);\n      return;\n    }\n    if (context.graphs) {\n      if (context.graphs.length) {\n        const oldGraph = this.ctx.graph;\n        this.set('ctx.graph', context.graphs[context.graphs.length - 1]);\n        if (oldGraph !== this.ctx.graph) {\n          setTimeout(() => {\n            this.emitEvent('context:graph', { graph: this.ctx.graph });\n          }, 1);\n        }\n      } else {\n        this.set('ctx.graph', null);\n      }\n    }\n    if (this.ctx.graph || this.ctx.component) {\n      this.set('$.main.open', false);\n      const isReadOnly = projects.isReadOnly(this.ctx);\n      this.set('$.search.readonly', isReadOnly);\n      this.set('$.grapheditor.readonly', isReadOnly);\n      this.set('$.context.readonly', isReadOnly);\n      this.set('$.packets.readonly', isReadOnly);\n    } else {\n      this.set('$.main.open', true);\n    }\n  },\n\n  showError(context) {\n    if (context.error && context.error.message) {\n      this.set('$.alert.message', context.error.message);\n      this.set('$.alert.isError', true);\n      this.set('$.alert.offerHTTPS', false);\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  showProgress(context) {\n    if (context.state || context.offerHTTPS) {\n      this.set('$.alert.message', context.state || '');\n      this.set('$.alert.isError', false);\n      this.set('$.alert.offerHTTPS', context.offerHTTPS || false);\n      this.dontAutoHideAlert = context.dontAutoHideAlert || false;\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  triggerTests() {\n    if (!this.ctx.runtime) {\n      return;\n    }\n    this.emitEvent('runtime:runTests', {\n      project: this.ctx.project,\n      runtime: this.ctx.runtime.definition,\n    });\n  },\n\n  hideAlert() {\n    PolymerDom(this.$.alert).classList.remove('show');\n  },\n\n  hideAlertSoon() {\n    if (this.dontAutoHideAlert) {\n      return;\n    }\n    if (!PolymerDom(this.$.alert).classList.contains('show')) {\n      return;\n    }\n    window.setTimeout(() => {\n      this.hideAlert();\n    }, 1300);\n  },\n\n  openProject(project) {\n    projects.getProjectHash(project, (err, hash) => {\n      if (err) {\n        return;\n      }\n      this.emitEvent('application:sethash', hash);\n    });\n  },\n\n  themeChanged(newTheme, oldTheme) {\n    if (oldTheme) {\n      PolymerDom(document.body).classList.remove(oldTheme);\n    }\n    PolymerDom(document.body).classList.add(this.theme);\n  },\n});\n","const TheGraph = require('the-graph');\n\nexports.getIcon = (iconName, fallback = '') => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return iconName;\n  }\n  if (!iconMap[iconName]) {\n    if (!fallback) { return fallback; }\n    return iconMap[fallback];\n  }\n  return iconMap[iconName];\n};\n\nexports.getIcons = () => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return {};\n  }\n  return iconMap;\n};\n","const { basename } = require('path');\n\nexports.sortByName = (a, b) => {\n  const aName = exports.unnamespace(exports.getName(a));\n  const bName = exports.unnamespace(exports.getName(b));\n  return aName.localeCompare(bName);\n};\n\nexports.getName = (obj, allowUnknown = true) => {\n  if (!obj) {\n    if (allowUnknown) {\n      return 'Unknown';\n    }\n    return null;\n  }\n  const name = (obj.properties != null ? obj.properties.name : undefined) || obj.name || obj.id;\n  if (!name && allowUnknown) {\n    return 'Unknown';\n  }\n  return name;\n};\n\nexports.unnamespace = (name) => {\n  if (name.indexOf('/') === -1) {\n    return name;\n  }\n  return basename(name);\n};\n\nexports.namespace = (name, namespace) => {\n  if (name.indexOf('/') !== -1) {\n    return name;\n  }\n  return `${namespace}/${name}`;\n};\n\nexports.sortBySeen = (ain, bin) => {\n  const a = ain;\n  const b = bin;\n  if (!a.seen) {\n    return 1;\n  }\n  if (!b.seen) {\n    return -1;\n  }\n  a.seen = typeof a.seen === 'object' ? a.seen : new Date(a.seen);\n  b.seen = typeof b.seen === 'object' ? b.seen : new Date(b.seen);\n  if (a.seen > b.seen) {\n    return -1;\n  }\n  if (b.seen > a.seen) {\n    return 1;\n  }\n  return 0;\n};\n\nexports.addToList = (list, entity, sort = exports.sortByName) => {\n  let found = false;\n  list.forEach((existing) => {\n    if (existing === entity) {\n      // Entity is already in list as-is, skip\n      found = true;\n      return;\n    }\n    const existingId = exports.unnamespace(exports.getName(existing, false));\n    const entityId = exports.unnamespace(exports.getName(entity, false));\n    if (existingId === entityId) {\n      // id match, replace\n      const exists = existing;\n      Object.keys(entity).forEach((key) => {\n        exists[key] = entity[key];\n      });\n      found = true;\n    }\n  });\n  if (found) { return; }\n  list.push(entity);\n  // Sort the list on desired criteria\n  list.sort(sort);\n};\n\nexports.removeFromList = (list, entity) => {\n  const matched = list.find((existing) => {\n    if (existing === entity) {\n      return true;\n    }\n    const existingId = existing.properties ? existing.properties.id : existing.id;\n    const entityId = entity.properties ? entity.properties.id : entity.id;\n    return (existingId === entityId);\n  });\n  if (!matched) {\n    return;\n  }\n  list.splice(list.indexOf(matched), 1);\n};\n"],"sourceRoot":""}