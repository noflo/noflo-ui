# Event dispatching
AppView(polymer/noflo-ui) EVENT -> ACTION StoreDispatch(ui/Store)
# First we send the events to middlewares, and allow them
# to either pass along or generate new events
StoreDispatch OUT -> IN Logger(ui/LoggingMiddleware)
Logger PASS -> IN UrlMiddleware(ui/UrlMiddleware)
UrlMiddleware NEW -> ACTION StoreDispatch
UrlMiddleware PASS -> IN StorageMiddleware(ui/StorageMiddleware)
StorageMiddleware NEW -> ACTION StoreDispatch
StorageMiddleware PASS -> IN UserMiddleware(ui/UserMiddleware)
UserMiddleware NEW -> ACTION StoreDispatch
UserMiddleware PASS -> IN GithubMiddleware(ui/GithubMiddleware)
GithubMiddleware NEW -> ACTION StoreDispatch
GithubMiddleware PASS -> IN RegistryMiddleware(ui/RegistryMiddleware)
RegistryMiddleware NEW -> ACTION StoreDispatch
RegistryMiddleware PASS -> IN RuntimeMiddleware(ui/RuntimeMiddleware)
RuntimeMiddleware NEW -> ACTION StoreDispatch
# Once middlewares have processed event, pass to stores
RuntimeMiddleware PASS -> IN Dispatch(routers/GroupRouter)
'user,storage,flowhub,workspace,github,context' -> ROUTES Dispatch
# Reducers for producing state changes from actions
Dispatch OUT[0] -> IN UserReducer(ui/UserReducer) STATE -> STATE UpdateState(ui/UpdateState)
Dispatch OUT[1] -> IN StorageReducer(ui/StorageReducer) STATE -> STATE UpdateState
Dispatch OUT[2] -> IN FlowhubReducer(ui/FlowhubReducer) STATE -> STATE UpdateState
Dispatch OUT[3] -> IN WorkspaceReducer(ui/WorkspaceReducer) STATE -> STATE UpdateState
Dispatch OUT[4] -> IN GithubReducer(ui/GithubReducer) STATE -> STATE UpdateState
# Legacy stores
Dispatch OUT[5] -> IN CleanContext(ui/CleanAction) OUT -> ContextStorage(ui/ContextStorage)
Dispatch MISSED -> IN ShowErrors(core/Output)

# Pass ready contexts to the UI
RuntimeStorage CONTEXT -> CONTEXT UpdateState
RuntimeStorage NEW -> ACTION StoreDispatch
ContextStorage CONTEXT -> CONTEXT UpdateState

# Send updated state to app view
UpdateState STATE -> STATE StoreDispatch
UpdateState STATE -> STATE AppView

# Start the app
'noflo-ui' -> SELECTOR AppView
'' -> START ListenWindow(interaction/ListenResize)

# Handle resizes
ListenWindow WIDTH -> WIDTH AppView
ListenWindow HEIGHT -> HEIGHT AppView
