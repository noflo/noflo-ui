{"version":3,"sources":["webpack:///./elements/noflo-card-styles.js","webpack:///./css/noflo-ui.css","webpack:///./src/runtime.js","webpack:///./elements/codemirror-styles.js","webpack:///./elements/the-card-styles.js","webpack:///./src/JournalStore.js","webpack:///./runtimeinfo/index.js","webpack:///./css/SourceCodePro-Regular.otf.woff","webpack:///./css/SourceCodePro-Bold.otf.woff","webpack:///./elements/noflo-modal-styles.js","webpack:///./src/projects.js","webpack:///./src/urls.js","webpack:///./runtimeinfo/msgflo.yaml","webpack:///./runtimeinfo/sndflo.yaml","webpack:///./runtimeinfo/imgflo.yaml","webpack:///./runtimeinfo/noflo.yaml","webpack:///./runtimeinfo/javafbp.yaml","webpack:///./runtimeinfo/microflo.yaml","webpack:///./elements/the-graph-styles.js","webpack:///./elements/noflo-polymer.js","webpack:///./elements/noflo-account-settings.js","webpack:///./elements/noflo-account.js","webpack:///./elements/noflo-icon.js","webpack:///./elements/noflo-type-selector.js","webpack:///./elements/noflo-new-project.js","webpack:///./elements/noflo-new-repository.js","webpack:///./elements/noflo-add-runtime.js","webpack:///./elements/noflo-new-runtime.js","webpack:///./elements/the-graph-thumb.js","webpack:///./elements/noflo-project-card.js","webpack:///./elements/noflo-repo-card.js","webpack:///./elements/noflo-runtime-card.js","webpack:///./elements/noflo-main.js","webpack:///./elements/the-graph.js","webpack:///./elements/the-graph-editor.js","webpack:///./elements/noflo-library.js","webpack:///./elements/noflo-exported-inspector.js","webpack:///./elements/noflo-icon-selector.js","webpack:///./elements/noflo-new-graph.js","webpack:///./elements/noflo-group-inspector.js","webpack:///./elements/the-card-stack.js","webpack:///./elements/the-card.js","webpack:///./elements/the-panel.js","webpack:///./elements/noflo-context.js","webpack:///./src/components/TestStatus.jsx","webpack:///./src/components/TestStatusDetailed.jsx","webpack:///./elements/noflo-runtime-browserdebug.js","webpack:///./elements/noflo-runtime-customiframe.js","webpack:///./elements/noflo-runtime-selector.js","webpack:///./elements/noflo-runtime-testdetails.js","webpack:///./elements/noflo-runtime.js","webpack:///./elements/the-graph-nav.js","webpack:///./elements/noflo-journal.js","webpack:///./elements/noflo-component-editor.js","webpack:///./elements/noflo-menu.js","webpack:///./elements/noflo-search-graph-results.js","webpack:///./elements/noflo-search-library-results.js","webpack:///./elements/noflo-graph-inspector.js","webpack:///./elements/noflo-component-inspector.js","webpack:///./elements/noflo-search.js","webpack:///./elements/noflo-new-component.js","webpack:///./elements/noflo-project-inspector.js","webpack:///./elements/noflo-project-sync.js","webpack:///./elements/noflo-project.js","webpack:///./src/components/EdgeId.jsx","webpack:///./src/components/RuntimeEvents.jsx","webpack:///./elements/number-scrubber.js","webpack:///./elements/noflo-node-inspector.js","webpack:///./elements/noflo-edge-menu.js","webpack:///./elements/noflo-packets.js","webpack:///./elements/noflo-alert.js","webpack:///./css/noflo-ui.css?e366","webpack:///./elements/noflo-ui.js","webpack:///./src/icons.js","webpack:///./src/collections.js"],"names":["$_documentContainer","document","createElement","innerHTML","head","appendChild","content","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","hash","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","push","module","i","fbpGraph","findByComponent","getName","namespace","exports","graphRuntimeIdentifier","graph","projectNamespace","properties","runtimeName","graphName","portForLibrary","port","name","id","type","description","addressable","schema","componentForLibrary","component","icon","subgraph","inports","inPorts","map","outports","outPorts","getGraphType","g","environment","undefined","runtime","getComponentType","runtimeType","code","match","getSource","client","protocol","getsource","catch","e","indexOf","Promise","reject","definition","getRemoteNodes","r","route","remote","reduce","promise","node","then","nodes","length","Error","matchedNode","filter","n","componentType","componentImplementation","project","graphs","resolve","source","includes","language","loadGraph","instance","method","err","isDefaultRuntime","address","ensureIframe","c","querySelector","iframe","body","setAttribute","className","transport","disconnect","journal","IDBJournalStore","JournalStore","db","super","this","transactions","revId","entries","putTransaction","transaction","objectStore","add","genKey","cb","index","openCursor","onsuccess","event","cursor","target","result","value","lastRevision","info","msgflo","sndflo","imgflo","noflo","javafbp","microflo","findMainGraph","main","find","mainCapable","findGraph","findComponent","components","componentName","library","split","findProject","projects","getProjectHash","callback","setTimeout","isReadOnly","context","capabilities","guessLanguage","defaultLanguage","getComponentHash","getGraphHash","graphId","hashToString","part","encodeURIComponent","join","element","String","customElements","define","_template","is","theme","debug","user","Object","notify","observer","env","NOFLO_APP_TITLE","getElementById","classList","remove","preventDefault","stopPropagation","fire","close","parentNode","removeChild","listeners","click","_isSelectedTheme","current","_isSelectedDebug","askForScope","Array","help","NOFLO_THEME","NOFLO_APP_NAME","NOFLO_APP_VERSION","scope","currentTarget","getAttribute","github","scopes","set","querySelectorAll","dialog","addEventListener","detail","_ifPublicScope","_ifPrivateScope","fallback","icons","getIcon","available","runtimes","label","forEach","rt","getByType","prepareAvailable","runtimeTypeInfo","keys","runtimetypes","availType","shortname","availtype","tokenList","selected","_computeIf","_computeIf2","obj","pieces","key","canSend","Boolean","projectId","produceNamespace","toLowerCase","replace","ga","specs","disabled","repo","token","matched","availableTypes","canCreate","secret","createUUID","seen","Date","toString","_computeRepeat","t","rtInfo","def","url","helpurl","runtimeAdd","ev","edgeColors","fillStyle","height","Number","lineWidth","listener","nodeSize","strokeStyle","thumbrectangle","thumbscale","width","viewrectangle","themeChanged","style","thumb","styleFromTheme","fill","stroke","redrawGraph","$","canvas","getContext","bind","render","rectangle","scale","newGraph","oldGraph","removeListener","on","toDataURL","menuopen","menuicon","gist","window","location","dispatchEvent","CustomEvent","composed","bubbles","mains","open","projectList","remoteProjects","openChanged","_canGithub","fetchGithub","repoParts","org","branch","openLocal","filterRemoteProjects","remoteProject","filterLocalProjects","filterAvailableRuntimes","opener","now","seenHoursAgo","Math","floor","runtimeTypes","examples","typeExamples","ssl","example","_canFlowhub","p","setProperties","_isLocalProjects","_isSelectedView","view","list","animatedEdges","appView","autolayout","autolayouter","debounceLibraryRefeshTimer","displaySelectionGroup","editable","graphChanges","errorNodes","forceSelection","graphView","grid","maxZoom","menus","minZoom","offsetX","offsetY","pan","readonly","selectedEdges","selectedNodes","selectedNodesHash","snap","klayNoflo","init","onSuccess","applyAutolayout","workerScript","newTheme","previousTheme","svgcontainer","graphEvents","graphRenameEvents","graphPortEvents","trackGraphChange","payload","triggerAutolayout","from","to","pub","priv","public","process","metadata","endTransaction","concat","unsubscribeGraph","unmountComponentAtNode","subscribeGraph","App","onEdgeSelection","onNodeSelection","onPanScale","getMenuDef","refs","x","y","itemKey","item","toggle","isSelected","shallowClone","slice","splice","setSelectedNodes","setErrorNodes","setSelectedEdges","setAnimatedEdges","nodeId","updateIcon","portInfo","layout","direction","options","intCoordinates","algorithm","layoutHierarchy","spacing","borderSpacing","edgeSpacingFactor","inLayerSpacingFactor","nodePlace","nodeLayering","edgeRouting","crossMin","keilerGraph","startTransaction","applyToGraph","triggerFit","setState","markDirty","addNode","state","focusNode","setProps","clearTimeout","rerender","libraryDirty","generated","debounceLibraryRefesh","unnamespaced","registerComponent","toJSON","hostAttributes","copyNodes","notifyView","onContextMenu","plugins","editor","getDefaultMenus","unregister","plugin","register","defaultMenu","notifyViewChanged","buildInitialLibrary","componentsFromGraph","edge","updateErrorNodes","errorNodesChanged","getComponent","search","num","random","getPan","getScale","nameParts","default","addInitial","getLibrary","matching","privateport","publicport","renameInport","renameOutport","getIcons","mainGraph","duplicates","_isSelectedMainGraph","group","groupdescription","renameGroup","setGroupMetadata","addGroup","observeChanges","MutationObserver","updateVisibility","observe","subtree","childList","attributes","characterData","childElementCount","parent","prepend","stacks","getElementsByTagName","stack","insertBefore","firstChild","automatic","handle","size","cleanUpLocation","automaticChanged","unobserve","handleMutations","getMain","sizeDimensions","getSizeDimensions","outside","getPositionDimension","edges","errors","contextBar","contextsection","keyCode","clearSelection","pop","emptyOnReadOnly","addMenuCallback","localMenu","canGetSource","n4","iconLabel","action","href","currentGraphId","e4","w4","sort","groups","grp","grpNodes","JSON","parse","stringify","currentGraph","show","once","componentParts","libraryMatch","shift","status","online","TestStatus","props","passed","failed","skipped","total","suites","suite","cases","testCase","skip","stateToClass","baseApp","qrCodeUrl","runtimeUrl","generateRuntimeInfo","params","appDebugUrl","launchNewBrowserRuntime","customIframeRuntime","launchImgfloHerokuRuntime","checkRuntimeSeen","getTime","debugOnDevice","addIframeRuntime","deployHeroku","debugOnDeviceModal","addIframeModal","template","TestStatusDetailed","topic","assertion","error","container","shadowRoot","panel","graphChanged","runtimeSelector","runtimeIframe","getRuntimeIframe","hideCard","getRuntimeIcon","execution","running","showCard","details","setIframeVisibility","visibility","display","_produceAddress","backgroundColor","hide","outsideFill","scaledviewrectangle","_","nav","calculateStyleFromTheme","viewBoxBorder","viewBoxBorder2","viewrectangleChanged","outcanvas","viewrect","w","h","canRedo","canUndo","hidenav","klay","returnTo","newEditor","checkState","connectJournal","positionedNodes","store","undo","redo","codeEditor","spec","testsEditor","componentChanged","self","debouncedComponentChange","debounce","debouncedSpecChange","changed","tests","code_editor","getExampleCode","codeOptions","getMirrorOptions","getValue","setSize","tests_editor","testOptions","lineNumbers","mode","getMirrorMode","getMirrorTheme","readOnly","componenttemplates","templateFunc","setOption","refresh","buttons","sender","button","results","downloadUrl","inGraph","isMain","preview","updateName","unnamespace","prepareHtmlEditor","prepareTestsEditor","prepareDownload","Blob","URL","sha","blob","createObjectURL","htmlEditor","focus","html_editor","specCode","hidden","_computeDownload","entity","errorText","dom","graphInspector","menuCard","parentPath","resultsCard","searchGraphResults","searchLibrary","searchLibraryResults","blur","closeInspectors","graphsChanged","componentInspector","findNode","comp","idx","previous","searchinput","clearResults","contains","keyIdentifier","searchChanged","clearSearch","addTo","path","getParentPath","unshift","_canSearch","_canGoBack","_isGraph","_isComponent","_canInspectGraph","_canInspectComponent","_isReadOnly","languages","runtimeI","allLanguages","lang","preferredlanguage","getExampleSpec","_languageSelected","fbpSpec","originalRepo","updateProject","_mainSelected","_getMainGraphs","files","hasOp","hasPush","message","operation","pull","conflict","noop","statusText","entry","operations","filesChanged","pushes","ops","file","originalConflicts","originalPushes","originalPulls","checkOps","f","_getOperationLabel","op","_isSelectedOp","canComponent","gotoGraph","gotoComponent","account","toggleOpen","property","_computeClass","nodeLabel","EdgeId","src","connection","tgt","row","s","routeClass","class","PacketData","multiLine","title","data","PacketDetails","isExpanded","clearSizeCache","RuntimeEvents","packets","idWidth","min","columns","header","expander","subComponent","tableHeight","distance","max","Infinity","mod","precision","scrubend","scrubstart","startValue","step","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","parseFloat","delta","dx","round","newValue","isFinite","trackstart","track","trackend","errorLog","lastErrorLog","scrubbing","showErrorLogs","updatePorts","updateLabel","getNode","renameNode","setNodeMetadata","initializers","iip","connected","inport","getPortValue","getPortConnection","portDef","inputType","values","input","checked","parseInt","reader","FileReader","onload","readAsDataURL","portToInput","updateValue","inputToPort","removeValue","setPortValue","removeInitial","val","isNaN","validatePortValue","_computeIf3","_computeIf4","_computeIf5","_computeIf6","_computeIf7","_computeIf8","_computeSelected","routes","secure","setEdgeMetadata","toggleSecure","meta","currentgraph","events","nodeInspectors","showPackets","frameRequest","newEdges","oldEdges","showEdgeCards","hideEdgeCards","updatePacketInspector","clearErrorNodes","inspector","addErrorNode","fromStr","toUpperCase","genId","edgeMenu","menu","newPackets","oldPackets","requestAnimationFrame","edgeIds","genEdgeId","selectedEdgeIds","packetId","packetEdge","rowId","offsetWidth","showNodeCards","hideNodeCards","found","isError","offerHTTPS","locals","ctx","compatibleRuntimes","dontAutoHideAlert","innerHeight","innerWidth","clearContextFirst","emitEvent","openProject","clear","all","grapheditor","changes","triggerTests","componenteditor","searchLibraryResult","fixed","showError","hideAlertSoon","showProgress","libraryResults","searchGraphResult","graphResults","syncOperation","componentLibrary","libKey","showTests","confirm","alert","hideAlert","oldTheme","TheGraph","iconName","iconMap","FONT_AWESOME","basename","sortByName","a","b","aName","bName","localeCompare","allowUnknown","sortBySeen","ain","bin","addToList","existing","exists","removeFromList"],"mappings":"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","file":"ui.47a22c58a03565e231fa.min.js","sourcesContent":["const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-card-styles\">\n  <template>\n    <style>\n    :host {\n      display: block;\n      width: 216px;\n      height: 105px;\n      overflow: hidden;\n      display: inline-block;\n      text-align: center;\n      background-color: var(--noflo-ui-background);\n      color: var(--noflo-ui-text);\n      border-radius: 3px;\n      margin-right: 18px;\n      margin-left: 18px;\n      margin-bottom: 36px;\n      position: relative;\n      cursor: pointer;\n    }\n    h2 {\n      position: absolute;\n      top: 36px;\n      line-height: 36px;\n      width: 150px;\n      text-transform: none;\n      font-size: 12px;\n      text-align: left;\n      white-space: nowrap;\n      left: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    p {\n      position: absolute;\n      top: 53px;\n      left: 18px;\n      width: 150px;\n      text-transform: uppercase;\n      font-size: 10px;\n      text-align: left;\n      max-height: 36px;\n      overflow: hidden;\n      color: hsl(189, 11%, 50%);\n    }\n    p span {\n      text-overflow: ellipsis;\n      max-width: 100px;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n    #menubutton {\n      position: absolute;\n      right: 36px;\n      top: 18px;\n      background-color: transparent;\n      color: var(--noflo-ui-text);\n      border: 0px;\n      outline: 0px;\n      cursor: pointer;\n    }\n    #menu {\n      position: absolute;\n      right: 36px;\n      top: 36px;\n      padding: 0px;\n      margin: 0px;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      box-shadow: 3px 3px var(--noflo-ui-background);\n      z-index: 1;\n    }\n    #menu li {\n      list-style: none;\n      text-align: left;\n      margin-bottom: 2px;\n      margin-top: 2px;\n    }\n    #menu li button {\n      background-color: transparent;\n      border: 0px;\n      outline: 0px;\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n      text-align: left;\n    }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./SourceCodePro-Regular.otf.woff\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./SourceCodePro-Bold.otf.woff\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.0.3\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.eot\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.0.3\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.0.3\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___, { hash: \"#fontawesomeregular\" });\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___, { hash: \"?#iefix&v=4.0.3\" });\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"input::-webkit-input-speech-button {\\n  margin-right: 18px;\\n  cursor: pointer;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nbody {\\n  --noflo-ui-background: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-background-shadow: hsla(0, 0%, 0%, 0.5);\\n  --noflo-ui-text: hsl(192, 25%, 92%);\\n  --noflo-ui-text-highlight: hsl(185,100%,75%);\\n  --noflo-ui-border: hsla(190, 90%, 80%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 80%);\\n  --noflo-ui-base-unit: 72px;\\n}\\nbody.light {\\n  --noflo-ui-background: hsl(192, 25%, 92%);\\n  --noflo-ui-background-shadow: hsla(192, 25%, 100%, 0.3);\\n  --noflo-ui-text: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-text-highlight: hsl(185,100%,15%);\\n  --noflo-ui-border: hsla(190, 90%, 8%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 8%);\\n}\\n\\nbody {\\n  /* iOS don't clash with our hold behavior */\\n  -webkit-user-select: none;                /* disable cut copy paste */\\n  -webkit-touch-callout: none;              /* disable callout, image save panel */\\n  -webkit-tap-highlight-color: transparent; /* \\\"turn off\\\" link highlight */\\n}\\n\\nbody #loading {\\n  opacity: 0;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  z-index: -1;\\n  width: 400px;\\n  color: var(--noflo-ui-text-highlight);\\n  text-align: center;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  position: fixed;\\n}\\n\\nbody.loading #loading {\\n  display: block;\\n  opacity: 1;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  animation: pulsate 2s ease-in-out;\\n  animation-iteration-count: infinite;\\n  -webkit-animation: pulsate 2s ease-in-out;\\n  -webkit-animation-iteration-count: infinite;\\n  text-align: center;\\n  z-index: 10;\\n}\\nbody noflo-ui {\\n  opacity: 1;\\n  transition: opacity 0.3s ease-in;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  display: block;\\n  width: 100vw;\\n  height: 100vh;\\n}\\nbody.loading noflo-ui {\\n  opacity: 0;\\n}\\n@keyframes pulsate {\\n  0% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n@-webkit-keyframes pulsate {\\n  0% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    -webkit-transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n\\nbutton {\\n  padding:0;\\n  cursor: pointer;\\n  background-image: none;\\n  border: 0;\\n}\\n\\n#bugreport {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 11px;\\n  top: 0px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n#openhelp {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 14px;\\n  top: 36px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n\\n#container.blur {\\n  -webkit-filter: blur(2px);\\n  -moz-filter: blur(2px);\\n  filter: blur(2px);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n\\n  overflow: hidden;\\n}\\n\\n#container > pre {\\n  display: none;\\n}\\n\\nh1, h2, h3 {\\n  font-weight: normal;\\n}\\n\\n.gpu {\\n  -webkit-transform: translateZ(0);\\n  -transform: translateZ(0);\\n}\\n\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff');\\n}\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") format('woff');\\n  font-weight: bold;\\n}\\n@font-face {\\n  font-family: 'FontAwesomeSVG';\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") format('svg'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") format('embedded-opentype'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") format('woff'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \") format('truetype');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n\\nhtml, body, button {\\n  background-color: var(--noflo-ui-background);\\n  color: var(--noflo-ui-text);\\n  font-family: \\\"SourceCodePro\\\",Helvetica,Arial,sans-serif;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.iframe-runtime {\\n  display: none;\\n  border: none;\\n  width: 288px;\\n  height: 288px;\\n  box-sizing: border-box;\\n  position: fixed;\\n  right: 0px;\\n  top: 72px;\\n  z-index: 2;\\n  background-color: var(--noflo-ui-background) !important;\\n  background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\\n  background-size: calc(100% - 1px);\\n  background-position: 0px;\\n  border-bottom: 1px var(--noflo-ui-border) solid;\\n}\\n\\n#container > .preview-container {\\n  display: none;\\n}\\n\\n#zoomrange {\\n  display: none;\\n}\\n\\nthe-graph-nav {\\n  right: 36px !important;\\n  bottom: 36px !important;\\n}\\n\\n\\n\\n\\n::-webkit-scrollbar {\\n  width: 2px;\\n}\\n::-webkit-scrollbar-thumb {\\n  -webkit-border-radius: 5px;\\n  border-radius: 1px;\\n  background: hsla(191, 100%, 92%, 0.3);\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.5);\\n}\\n\\n::-webkit-scrollbar-track {\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.3);\\n  -webkit-border-radius: 5px;\\n  border-radius: 5px;\\n  background-color: hsl(0, 0%, 0%);\\n}\\n\\nh1,\\nh2,\\nh3 {\\n  font-weight: normal;\\n}\\n\\ninput:focus,\\nselect:focus,\\ntextarea:focus,\\nbutton:focus,\\nh1,\\nh2,\\nh3,\\ndiv,\\na,\\np,\\ndiv {\\n  outline:none;\\n}\\n\\nth {\\n  text-align: left;\\n}\\n\\ndiv.error {\\n  color: hsla( 0, 98%, 46%, .8);\\n}\\n\\n.red-button {\\n  background-color: hsla(0, 100%, 20%, 0.2);\\n  color: hsl(0, 100%, 65%);\\n}\\n.blue-button {\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: hsl(190, 100%, 65%);\\n}\\n\\n#flowhub_debug_url {\\n  position: fixed;\\n  bottom: 0px;\\n  right: 0px;\\n  font-size: 18px;\\n  padding: 9px;\\n  z-index: 10;\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: var(--noflo-ui-text);\\n  border-left: 1px solid var(--noflo-ui-background);\\n  border-top: 1px solid var(--noflo-ui-background);\\n  cursor: pointer;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/noflo-ui.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"input::-webkit-input-speech-button {\\n  margin-right: 18px;\\n  cursor: pointer;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nbody {\\n  --noflo-ui-background: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-background-shadow: hsla(0, 0%, 0%, 0.5);\\n  --noflo-ui-text: hsl(192, 25%, 92%);\\n  --noflo-ui-text-highlight: hsl(185,100%,75%);\\n  --noflo-ui-border: hsla(190, 90%, 80%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 80%);\\n  --noflo-ui-base-unit: 72px;\\n}\\nbody.light {\\n  --noflo-ui-background: hsl(192, 25%, 92%);\\n  --noflo-ui-background-shadow: hsla(192, 25%, 100%, 0.3);\\n  --noflo-ui-text: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-text-highlight: hsl(185,100%,15%);\\n  --noflo-ui-border: hsla(190, 90%, 8%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 8%);\\n}\\n\\nbody {\\n  /* iOS don't clash with our hold behavior */\\n  -webkit-user-select: none;                /* disable cut copy paste */\\n  -webkit-touch-callout: none;              /* disable callout, image save panel */\\n  -webkit-tap-highlight-color: transparent; /* \\\"turn off\\\" link highlight */\\n}\\n\\nbody #loading {\\n  opacity: 0;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  z-index: -1;\\n  width: 400px;\\n  color: var(--noflo-ui-text-highlight);\\n  text-align: center;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  position: fixed;\\n}\\n\\nbody.loading #loading {\\n  display: block;\\n  opacity: 1;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  animation: pulsate 2s ease-in-out;\\n  animation-iteration-count: infinite;\\n  -webkit-animation: pulsate 2s ease-in-out;\\n  -webkit-animation-iteration-count: infinite;\\n  text-align: center;\\n  z-index: 10;\\n}\\nbody noflo-ui {\\n  opacity: 1;\\n  transition: opacity 0.3s ease-in;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  display: block;\\n  width: 100vw;\\n  height: 100vh;\\n}\\nbody.loading noflo-ui {\\n  opacity: 0;\\n}\\n@keyframes pulsate {\\n  0% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n@-webkit-keyframes pulsate {\\n  0% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    -webkit-transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n\\nbutton {\\n  padding:0;\\n  cursor: pointer;\\n  background-image: none;\\n  border: 0;\\n}\\n\\n#bugreport {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 11px;\\n  top: 0px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n#openhelp {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 14px;\\n  top: 36px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n\\n#container.blur {\\n  -webkit-filter: blur(2px);\\n  -moz-filter: blur(2px);\\n  filter: blur(2px);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n\\n  overflow: hidden;\\n}\\n\\n#container > pre {\\n  display: none;\\n}\\n\\nh1, h2, h3 {\\n  font-weight: normal;\\n}\\n\\n.gpu {\\n  -webkit-transform: translateZ(0);\\n  -transform: translateZ(0);\\n}\\n\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\\\"SourceCodePro-Regular.otf.woff\\\") format('woff');\\n}\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\\\"SourceCodePro-Bold.otf.woff\\\") format('woff');\\n  font-weight: bold;\\n}\\n@font-face {\\n  font-family: 'FontAwesomeSVG';\\n  src: url('../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.0.3#fontawesomeregular') format('svg'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3') format('embedded-opentype'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.0.3') format('woff'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.0.3') format('truetype');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n\\nhtml, body, button {\\n  background-color: var(--noflo-ui-background);\\n  color: var(--noflo-ui-text);\\n  font-family: \\\"SourceCodePro\\\",Helvetica,Arial,sans-serif;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.iframe-runtime {\\n  display: none;\\n  border: none;\\n  width: 288px;\\n  height: 288px;\\n  box-sizing: border-box;\\n  position: fixed;\\n  right: 0px;\\n  top: 72px;\\n  z-index: 2;\\n  background-color: var(--noflo-ui-background) !important;\\n  background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\\n  background-size: calc(100% - 1px);\\n  background-position: 0px;\\n  border-bottom: 1px var(--noflo-ui-border) solid;\\n}\\n\\n#container > .preview-container {\\n  display: none;\\n}\\n\\n#zoomrange {\\n  display: none;\\n}\\n\\nthe-graph-nav {\\n  right: 36px !important;\\n  bottom: 36px !important;\\n}\\n\\n\\n\\n\\n::-webkit-scrollbar {\\n  width: 2px;\\n}\\n::-webkit-scrollbar-thumb {\\n  -webkit-border-radius: 5px;\\n  border-radius: 1px;\\n  background: hsla(191, 100%, 92%, 0.3);\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.5);\\n}\\n\\n::-webkit-scrollbar-track {\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.3);\\n  -webkit-border-radius: 5px;\\n  border-radius: 5px;\\n  background-color: hsl(0, 0%, 0%);\\n}\\n\\nh1,\\nh2,\\nh3 {\\n  font-weight: normal;\\n}\\n\\ninput:focus,\\nselect:focus,\\ntextarea:focus,\\nbutton:focus,\\nh1,\\nh2,\\nh3,\\ndiv,\\na,\\np,\\ndiv {\\n  outline:none;\\n}\\n\\nth {\\n  text-align: left;\\n}\\n\\ndiv.error {\\n  color: hsla( 0, 98%, 46%, .8);\\n}\\n\\n.red-button {\\n  background-color: hsla(0, 100%, 20%, 0.2);\\n  color: hsl(0, 100%, 65%);\\n}\\n.blue-button {\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: hsl(190, 100%, 65%);\\n}\\n\\n#flowhub_debug_url {\\n  position: fixed;\\n  bottom: 0px;\\n  right: 0px;\\n  font-size: 18px;\\n  padding: 9px;\\n  z-index: 10;\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: var(--noflo-ui-text);\\n  border-left: 1px solid var(--noflo-ui-background);\\n  border-top: 1px solid var(--noflo-ui-background);\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","const fbpGraph = require('fbp-graph');\nconst { findByComponent } = require('./projects');\nconst { getName, namespace } = require('./collections');\n\nexports.graphRuntimeIdentifier = (graph, projectNamespace = null) => {\n  if (graph && graph.properties && graph.properties.runtimeName) {\n    // Runtime-supplied identifier, keep stable\n    return graph.properties.runtimeName;\n  }\n  const graphName = getName(graph);\n  if (projectNamespace) {\n    return namespace(graphName, projectNamespace);\n  }\n  return graphName;\n};\n\nconst portForLibrary = (port) => ({\n  name: port.id,\n  type: port.type,\n  description: port.type,\n  addressable: port.addressable,\n  schema: port.schema,\n});\n\n// Covert FBP Protocol component to the-graph library component\nexports.componentForLibrary = (component) => ({\n  name: component.name,\n  icon: component.icon || 'cog',\n  description: component.description || '',\n  subgraph: component.subgraph,\n  inports: component.inPorts.map(portForLibrary),\n  outports: component.outPorts.map(portForLibrary),\n});\n\nexports.getGraphType = (g) => {\n  const graph = g;\n  if (!(graph.properties.environment != null ? graph.properties.environment.type : undefined) && ((graph.properties.environment != null ? graph.properties.environment.runtime : undefined) === 'html')) {\n    // Legacy noflo-browser\n    graph.properties.environment.type = 'noflo-browser';\n  }\n  if (graph.properties.environment != null ? graph.properties.environment.type : undefined) {\n    return graph.properties.environment.type;\n  }\n  return null;\n};\n\nexports.getComponentType = (component) => {\n  const runtimeType = component.code.match(/@runtime ([a-z-]+)/);\n  if (runtimeType) {\n    return runtimeType[1];\n  }\n  return null;\n};\n\nexports.getSource = (client, name) => client\n  .protocol.component.getsource({\n    name,\n  })\n  .catch((e) => {\n    if (name.indexOf('/') !== -1) {\n      // Already namespaced, pass failure through\n      return Promise.reject(e);\n    }\n    if (!client.definition.namespace) {\n      // No namespace defined, pass failure through\n      return Promise.reject(e);\n    }\n    return client.protocol.component.getsource({\n      name: `${client.definition.namespace}/${name}`,\n    });\n  });\n\nexports.getRemoteNodes = (client, r) => {\n  const route = r;\n  return route.remote.reduce(((promise, node) => promise.then((graph) => {\n    if (!(graph.nodes != null ? graph.nodes.length : undefined)) {\n      return Promise.reject(new Error(`Node ${graph.name} doesn't contain child nodes`));\n    }\n    const [matchedNode] = graph.nodes.filter((n) => n.id === node);\n    if (!matchedNode) {\n      return Promise.reject(new Error(`Node ${node} not found in graph ${graph.name || graph.properties.id}`));\n    }\n\n    // Check if the node implementation is available in the local project\n    const [\n      componentType,\n      componentImplementation,\n    ] = findByComponent(matchedNode.component, route.project);\n    if (componentType === 'graph') {\n      route.graphs.push(componentImplementation);\n      return Promise.resolve(componentImplementation);\n    }\n    if (componentType === 'component') {\n      route.component = componentImplementation;\n      return Promise.resolve(componentImplementation);\n    }\n    // If not, then get from runtime\n    return exports.getSource(client, matchedNode.component)\n      .then((source) => {\n        if (!['json', 'fbp'].includes(source.language)) {\n          route.component = source;\n          return Promise.resolve(source);\n        }\n        return exports.loadGraph(source)\n          .then((instance) => {\n            route.graphs.push(instance);\n            return Promise.resolve(instance);\n          });\n      });\n  })\n  ), Promise.resolve(route.graphs[route.graphs.length - 1]))\n    .then(() => {\n      route.remote = [];\n      return route;\n    });\n};\n\nexports.loadGraph = (source) => new Promise(((resolve, reject) => {\n  let method;\n  switch (source.language) {\n    case 'json': method = 'loadJSON'; break;\n    case 'fbp': method = 'loadFBP'; break;\n    default:\n      return reject(new Error(`Unknown format ${source.language} for graph ${source.name}`));\n  }\n  method = source.language === 'json' ? 'loadJSON' : 'loadFBP';\n  return fbpGraph.graph[method](source.code, (err, i) => {\n    if (err) { return reject(err); }\n    const instance = i;\n    instance.name = source.name;\n    return resolve(instance);\n  });\n}));\n\nexports.isDefaultRuntime = (runtime) => {\n  if ((runtime.protocol === 'iframe')\n    && (runtime.address === 'https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe')) {\n    return true;\n  }\n  return false;\n};\n\n// Scope iframe runtimes to project\nexports.ensureIframe = (c, project) => {\n  const client = c;\n  if (client.definition.protocol !== 'iframe') {\n    return Promise.resolve();\n  }\n  client.definition.querySelector = `iframe[data-runtime='${client.definition.id}']`;\n  let iframe = document.body.querySelector(client.definition.querySelector);\n  if (!iframe) {\n    // No iframe for this runtime/project combination yet, create\n    iframe = document.createElement('iframe');\n    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms');\n    iframe.setAttribute('data-runtime', client.definition.id);\n    iframe.setAttribute('data-project', project.id);\n    iframe.className = 'iframe-runtime';\n    document.body.appendChild(iframe);\n  }\n  if (!client.transport.iframe) {\n    // Client has not been connected yet\n    client.transport.iframe = iframe;\n    return Promise.resolve();\n  }\n  if (client.transport.iframe === iframe) {\n    // We were already connected to this one\n    return Promise.resolve();\n  }\n  // We were connected to another iframe\n  // Disconnect and set new\n  return client.disconnect()\n    .then(() => {\n      client.transport.iframe = iframe;\n      return Promise.resolve();\n    });\n};\n","/**\n * Generated from lint.css, codemirror.css, mdn-like.css, codemirror-noflo.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"codemirror-styles\">\n  <template>\n    <style>\n      /* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/*\n  MDN-LIKE Theme - Mozilla\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues\n  GitHub: @peterkroon\n\n  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation\n\n*/\n.cm-s-mdn-like.CodeMirror { color: #999; background-color: #fff; }\n.cm-s-mdn-like div.CodeMirror-selected { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::selection, .cm-s-mdn-like .CodeMirror-line > span::selection, .cm-s-mdn-like .CodeMirror-line > span > span::selection { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span > span::-moz-selection { background: #cfc; }\n\n.cm-s-mdn-like .CodeMirror-gutters { background: #f8f8f8; border-left: 6px solid rgba(0,83,159,0.65); color: #333; }\n.cm-s-mdn-like .CodeMirror-linenumber { color: #aaa; padding-left: 8px; }\n.cm-s-mdn-like .CodeMirror-cursor { border-left: 2px solid #222; }\n\n.cm-s-mdn-like .cm-keyword { color: #6262FF; }\n.cm-s-mdn-like .cm-atom { color: #F90; }\n.cm-s-mdn-like .cm-number { color:  #ca7841; }\n.cm-s-mdn-like .cm-def { color: #8DA6CE; }\n.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag { color: #690; }\n.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def, .cm-s-mdn-like span.cm-type { color: #07a; }\n\n.cm-s-mdn-like .cm-variable { color: #07a; }\n.cm-s-mdn-like .cm-property { color: #905; }\n.cm-s-mdn-like .cm-qualifier { color: #690; }\n\n.cm-s-mdn-like .cm-operator { color: #cda869; }\n.cm-s-mdn-like .cm-comment { color:#777; font-weight:normal; }\n.cm-s-mdn-like .cm-string { color:#07a; font-style:italic; }\n.cm-s-mdn-like .cm-string-2 { color:#bd6b18; } /*?*/\n.cm-s-mdn-like .cm-meta { color: #000; } /*?*/\n.cm-s-mdn-like .cm-builtin { color: #9B7536; } /*?*/\n.cm-s-mdn-like .cm-tag { color: #997643; }\n.cm-s-mdn-like .cm-attribute { color: #d6bb6d; } /*?*/\n.cm-s-mdn-like .cm-header { color: #FF6400; }\n.cm-s-mdn-like .cm-hr { color: #AEAEAE; }\n.cm-s-mdn-like .cm-link { color:#ad9361; font-style:italic; text-decoration:none; }\n.cm-s-mdn-like .cm-error { border-bottom: 1px solid red; }\n\ndiv.cm-s-mdn-like .CodeMirror-activeline-background { background: #efefff; }\ndiv.cm-s-mdn-like span.CodeMirror-matchingbracket { outline:1px solid grey; color: inherit; }\n\n.cm-s-mdn-like.CodeMirror { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAAyCAYAAAAp8UeFAAAHvklEQVR42s2b63bcNgyEQZCSHCdt2vd/0tWF7I+Q6XgMXiTtuvU5Pl57ZQKkKHzEAOtF5KeIJBGJ8uvL599FRFREZhFx8DeXv8trn68RuGaC8TRfo3SNp9dlDDHedyLyTUTeRWStXKPZrjtpZxaRw5hPqozRs1N8/enzIiQRWcCgy4MUA0f+XWliDhyL8Lfyvx7ei/Ae3iQFHyw7U/59pQVIMEEPEz0G7XiwdRjzSfC3UTtz9vchIntxvry5iMgfIhJoEflOz2CQr3F5h/HfeFe+GTdLaKcu9L8LTeQb/R/7GgbsfKedyNdoHsN31uRPWrfZ5wsj/NzzRQHuToIdU3ahwnsKPxXCjJITuOsi7XLc7SG/v5GdALs7wf8JjTFiB5+QvTEfRyGOfX3Lrx8wxyQi3sNq46O7QahQiCsRFgqddjBouVEHOKDgXAQHD9gJCr5sMKkEdjwsarG/ww3BMHBU7OBjXnzdyY7SfCxf5/z6ATccrwlKuwC/jhznnPF4CgVzhhVf4xp2EixcBActO75iZ8/fM9zAs2OMzKdslgXWJ9XG8PQoOAMA5fGcsvORgv0doBXyHrCwfLJAOwo71QLNkb8n2Pl6EWiR7OCibtkPaz4Kc/0NNAze2gju3zOwekALDaCFPI5vjPFmgGY5AZqyGEvH1x7QfIb8YtxMnA/b+QQ0aQDAwc6JMFg8CbQZ4qoYEEHbRwNojuK3EHwd7VALSgq+MNDKzfT58T8qdpADrgW0GmgcAS1lhzztJmkAzcPNOQbsWEALBDSlMKUG0Eq4CLAQWvEVQ9WU57gZJwZtgPO3r9oBTQ9WO8TjqXINx8R0EYpiZEUWOF3FxkbJkgU9B2f41YBrIj5ZfsQa0M5kTgiAAqM3ShXLgu8XMqcrQBvJ0CL5pnTsfMB13oB8athpAq2XOQmcGmoACCLydx7nToa23ATaSIY2ichfOdPTGxlasXMLaL0MLZAOwAKIM+y8CmicobGdCcbbK9DzN+yYGVoNNI5iUKTMyYOjPse4A8SM1MmcXgU0toOq1yO/v8FOxlASyc7TgeYaAMBJHcY1CcCwGI/TK4AmDbDyKYBBtFUkRwto8gygiQEaByFgJ00BH2M8JWwQS1nafDXQCidWyOI8AcjDCSjCLk8ngObuAm3JAHAdubAmOaK06V8MNEsKPJOhobSprwQa6gD7DclRQdqcwL4zxqgBrQcabUiBLclRDKAlWp+etPkBaNMA0AKlrHwTdEByZAA4GM+SNluSY6wAzcMNewxmgig5Ks0nkrSpBvSaQHMdKTBAnLojOdYyGpQ254602ZILPdTD1hdlggdIm74jbTp8vDwF5ZYUeLWGJpWsh6XNyXgcYwVoJQTEhhTYkxzZjiU5npU2TaB979TQehlaAVq4kaGpiPwwwLkYUuBbQwocyQTv1tA0+1UFWoJF3iv1oq+qoSk8EQdJmwHkziIF7oOZk14EGitibAdjLYYK78H5vZOhtWpoI0ATGHs0Q8OMb4Ey+2bU2UYztCtA0wFAs7TplGLRVQCcqaFdGSPCeTI1QNIC52iWNzof6Uib7xjEp07mNNoUYmVosVItHrHzRlLgBn9LFyRHaQCtVUMbtTNhoXWiTOO9k/V8BdAc1Oq0ArSQs6/5SU0hckNy9NnXqQY0PGYo5dWJ7nINaN6o958FWin27aBaWRka1r5myvLOAm0j30eBJqCxHLReVclxhxOEN2JfDWjxBtAC7MIH1fVaGdoOp4qJYDgKtKPSFNID2gSnGldrCqkFZ+5UeQXQBIRrSwocbdZYQT/2LwRahBPBXoHrB8nxaGROST62DKUbQOMMzZIC9abkuELfQzQALWTnDNAm8KHWFOJgJ5+SHIvTPcmx1xQyZRhNL5Qci689aXMEaN/uNIWkEwDAvFpOZmgsBaaGnbs1NPa1Jm32gBZAIh1pCtG7TSH4aE0y1uVY4uqoFPisGlpP2rSA5qTecWn5agK6BzSpgAyD+wFaqhnYoSZ1Vwr8CmlTQbrcO3ZaX0NAEyMbYaAlyquFoLKK3SPby9CeVUPThrSJmkCAE0CrKUQadi4DrdSlWhmah0YL9z9vClH59YGbHx1J8VZTyAjQepJjmXwAKTDQI3omc3p1U4gDUf6RfcdYfrUp5ClAi2J3Ba6UOXGo+K+bQrjjssitG2SJzshaLwMtXgRagUNpYYoVkMSBLM+9GGiJZMvduG6DRZ4qc04DMPtQQxOjEtACmhO7K1AbNbQDEggZyJwscFpAGwENhoBeUwh3bWolhe8BTYVKxQEWrSUn/uhcM5KhvUu/+eQu0Lzhi+VrK0PrZZNDQKs9cpYUuFYgMVpD4/NxenJTiMCNqdUEUf1qZWjppLT5qSkkUZbCwkbZMSuVnu80hfSkzRbQeqCZSAh6huR4VtoM2gHAlLf72smuWgE+VV7XpE25Ab2WFDgyhnSuKbs4GuGzCjR+tIoUuMFg3kgcWKLTwRqanJQ2W00hAsenfaApRC42hbCvK1SlE0HtE9BGgneJO+ELamitD1YjjOYnNYVcraGhtKkW0EqVVeDx733I2NH581k1NNxNLG0i0IJ8/NjVaOZ0tYZ2Vtr0Xv7tPV3hkWp9EFkgS/J0vosngTaSoaG06WHi+xObQkaAdlbanP8B2+2l0f90LmUAAAAASUVORK5CYII=); }\n\n/*\nCopyright (C) 2013-2017 Flowhub UG\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\n.cm-s-noflo.CodeMirror {\n  color: hsl(188,6%,50%);\n  background-color: rgb(0, 0, 0);\n  font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif !important;\n  font-size: 14px;\n  line-height: 17px;\n}\n\n.cm-s-noflo .CodeMirror-selected {\n  background: hsl(185,100%,26%) !important;\n}\n\n.cm-s-noflo .CodeMirror-gutters {\n  background-color: black;\n  border-right: 1px solid hsla(190, 90%, 80%, 0.1);\n}\n\n.cm-s-noflo .CodeMirror-linenumber {\n  color: hsl(188, 6%, 26%);\n}\n\n.cm-s-noflo .CodeMirror-cursor {\n  border-left: 1px solid hsl(185,98%,46%) !important;\n}\n\n.cm-s-noflo span.cm-keyword {\n  color: hsl(35,100%,75%); \n}\n\n.cm-s-noflo span.cm-atom {\n  color: hsl(35,98%,46%);\n}\n\n.cm-s-noflo span.cm-number {\n  color: hsl(160,100%,75%);\n}\n\n.cm-s-noflo span.cm-def {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-2 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-3 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-property {\n  color: #fff;\n}\n\n.cm-s-noflo span.cm-operator {\n}\n\n.cm-s-noflo span.cm-comment {\n  color: gray;\n}\n\n.cm-s-noflo span.cm-string {\n  color: hsl(135,100%,75%);\n}\n\n.cm-s-noflo span.cm-meta {\n  color: yellow;\n}\n\n.cm-s-noflo span.cm-qualifier {\n  color: #FFF700;\n}\n\n.cm-s-noflo span.cm-builtin {\n  color: #30a;\n}\n\n.cm-s-noflo span.cm-bracket {\n    color: #cc7;\n}\n\n.cm-s-noflo span.cm-tag {\n    color: #FFBD40;\n}\n\n.cm-s-noflo span.cm-attribute {\n    color: #FFF700;\n}\n\n.cm-s-noflo span.cm-error {\n    color: #f00;\n}\n\n.cm-s-noflo .CodeMirror-activeline-background {\n    background: #27282E !important;\n}\n\n.cm-s-noflo .CodeMirror-matchingbracket {\n    outline: 1px solid grey;\n    color: white !important;\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"the-card-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 0px;\n        padding: 10px 10px 10px;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        position: relative;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      h1 {\n        font-size: 12px;\n        line-height: 36px;\n        margin: 0px;\n        margin-bottom: 0px;\n        text-shadow: 0 1px var(--noflo-ui-background);\n        text-align: left;\n      }\n      header {\n        height: 36px;\n      }\n      header h1 {\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        width: calc(72px * 3 - 1px);\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      header h1.clear {\n        cursor: pointer;\n      }\n      header h2 {\n        line-height: 36px;\n        width: 72px;\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        margin: 0px;\n        text-align: right;\n        font-size: 10px;\n        color: var(--noflo-ui-border-highlight);\n        display: block;\n        cursor: default;\n      }\n      ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      ul li {\n        display: block;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.toolbar2right {\n        width: 180px;\n        display: block;\n        position: absolute;\n        right: 36px;\n        top: 10px;\n        text-align: right;\n      }\n      ul.toolbar li {\n        float: left;\n        display: block;\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n      }\n      ul.toolbar2right li {\n        float: right;\n        width: auto;\n      }\n      ul.toolbar li * {\n        line-height: 36px;\n      }\n      li button {\n        width:100%;\n        height:100%;\n      }\n      textarea {\n        width: 100%;\n        min-height: 100px;\n        max-height: calc(72px * 4);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const { journal } = require('fbp-graph');\n\nclass IDBJournalStore extends journal.JournalStore {\n  constructor(graph, db) {\n    super(graph);\n    this.db = db;\n    this.transactions = [];\n  }\n\n  genKey(revId) { return `${this.graph.properties.id}_${revId}`; }\n\n  putTransaction(revId, entries) {\n    super.putTransaction(revId, entries);\n\n    const trans = this.db.transaction(['journals'], 'readwrite');\n    const store = trans.objectStore('journals');\n\n    // We're using add for writing, which will correctly fail if revId alreadyn exists\n    // for the graph\n    store.add({\n      id: this.genKey(revId),\n      graph: this.graph.properties.id,\n      revId,\n      entries,\n    });\n\n    this.transactions[revId] = entries;\n    return super.putTransaction(revId, entries);\n  }\n\n  fetchTransaction(revId) {\n    return this.transactions[revId];\n  }\n\n  init(cb) {\n    const trans = this.db.transaction(['journals']);\n    const store = trans.objectStore('journals');\n    const idx = store.index('graph');\n    idx.openCursor().onsuccess = (event) => {\n      const cursor = event.target.result;\n      if (!cursor) { return cb(); }\n      this.transactions[cursor.value.revId] = cursor.value.entries;\n      if (cursor.value.revId > this.lastRevision) { this.lastRevision = cursor.value.revId; }\n      return (cursor.continue)();\n    };\n  }\n}\n\nexports.IDBJournalStore = IDBJournalStore;\n","const msgflo = require('./msgflo.yaml');\nconst sndflo = require('./sndflo.yaml');\nconst imgflo = require('./imgflo.yaml');\nconst noflo = require('./noflo.yaml');\nconst javafbp = require('./javafbp.yaml');\nconst microflo = require('./microflo.yaml');\n\nconst info = {\n  msgflo,\n  sndflo,\n  imgflo,\n  noflo,\n  javafbp,\n  microflo,\n};\n\ninfo['noflo-browser'] = info.noflo;\ninfo['noflo-gnome'] = info.noflo;\ninfo['noflo-nodejs'] = info.noflo;\n\nmodule.exports = info;\n","export default __webpack_public_path__ + \"fonts/SourceCodePro-Regular.otf.woff\";","export default __webpack_public_path__ + \"fonts/SourceCodePro-Bold.otf.woff\";","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-modal-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--noflo-ui-background-shadow);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: auto;\n      }\n\n      .modal-container {\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        display: block;\n        position: absolute;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        top: 36px;\n        width: calc(72px * 9);\n        left: calc(50% - 72px * 4.5);\n        z-index: 5;\n        padding: 36px;\n        box-sizing: border-box;\n        border-radius: 3px;\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n      }\n      .modal-content {\n        max-height: calc(100vh - 252px);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        overflow-x: hidden;\n        padding-bottom: 18px;\n        box-sizing: border-box;\n      }\n\n      h1 {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n      }\n      label {\n        display: block;\n        font-size: 13px;\n        margin-top: 17px;\n        color: var(--noflo-ui-text);\n        line-height: 17px;\n      }\n      label > span {\n        line-height: 17px;\n      }\n      input,\n      select,\n      textarea {\n        display: block;\n        font-size: 17px;\n        background-color: hsl(190, 100%, 30%);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        color: #fff;\n        border-radius: 3px;\n        padding: 3px;\n        border: none;\n        margin: 0px;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      input::placeholder {\n        color: hsl(0, 0%, 80%);\n      }\n      select {\n        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwNnB4IiBoZWlnaHQ9IjMwNnB4IiB2aWV3Qm94PSIwIDAgMzA2IDMwNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzA2IDMwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9ImV4cGFuZC1tb3JlIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIyNzAuMyw1OC42NSAxNTMsMTc1Ljk1IDM1LjcsNTguNjUgMCw5NC4zNSAxNTMsMjQ3LjM1IDMwNiw5NC4zNSAJCSIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K);\n        background-repeat: no-repeat;\n        background-position: 98% 50%;\n        background-size: 8px;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        padding-right: 1em;\n      }\n      div.CodeMirror {\n        border: 1px solid var(--noflo-ui-text);\n        border-radius: 3px;\n      }\n\n      .toolbar {\n        display: block;\n        line-height: 36px;\n        margin-top: 18px;\n      }\n      .toolbar button {\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        cursor: pointer;\n      }\n      .toolbar button.disabled {\n        opacity: 0.1;\n      }\n      .toolbar a {\n        font-size: 13px;\n        color: hsl(190, 100%, 30%);\n        text-decoration: none;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n\n      html polymer-element{\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","exports.findMainGraph = (project) => {\n  if (!project.graphs.length) { return null; }\n  if (project.main) {\n    // Ensure currently set main graph exists\n    const mainFound = project.graphs.find((graph) => graph.properties.id === project.main);\n    if (mainFound) {\n      return project.main;\n    }\n  }\n  // No 'main' graph sent, see if we can make a smart choice\n  const mainCapable = project.graphs.find((graph) => {\n    if (graph.name === 'main') { return true; }\n    if (graph.properties.main) { return true; }\n    return false;\n  });\n  if (mainCapable) {\n    return mainCapable.properties.id;\n  }\n  // No suitable graph found, use first\n  return project.graphs[0].properties.id;\n};\n\nexports.findGraph = (id, project) => {\n  if (!project.graphs) { return null; }\n  return project.graphs.find((graph) => {\n    if (graph.name === id) { return true; }\n    if (graph.properties.id === id) { return true; }\n    return false;\n  });\n};\n\nexports.findComponent = (name, project) => {\n  if (!project.components) { return null; }\n  return project.components.find((component) => {\n    if (component.name === name) { return true; }\n    return false;\n  });\n};\n\nexports.findByComponent = (componentName, project) => {\n  let [library, name] = componentName.split('/');\n\n  if (!name) {\n    name = library;\n    library = undefined;\n  }\n\n  const graph = exports.findGraph(name, project);\n  if (graph) { return ['graph', graph]; }\n\n  const component = exports.findComponent(name, project);\n  if (component) { return ['component', component]; }\n\n  // Get from runtime\n  return ['runtime', componentName];\n};\n\nexports.findProject = (id, projects) => {\n  if (!projects) { return null; }\n\n  return projects.find((project) => project.id === id);\n};\n\nexports.getProjectHash = (project, callback) => {\n  if (project.runtime) {\n    if (!project.main) {\n      callback(null, [\n        'runtime',\n        project.runtime,\n      ]);\n      return;\n    }\n    callback(null, [\n      'runtime',\n      project.runtime,\n      project.main,\n    ]);\n    return;\n  }\n  if (!project.graphs.length) {\n    if (project.components.length) {\n      // No graphs in this project, but there are components\n      callback(null, [\n        'project',\n        project.id,\n        'component',\n        project.components[0].name,\n      ]);\n      return;\n    }\n    setTimeout(() => {\n      // Wait for graphs to be populated\n      if (!project.graphs.length && !project.components.length) {\n        return callback(new Error(`Project ${project.id} has no graphs or components`));\n      }\n      return exports.getProjectHash(project, callback);\n    },\n    100);\n    return;\n  }\n  // Open main graph, or the first graph\n  const main = project.main || project.graphs[0].properties.id;\n  if (!main) {\n    callback(new Error(`Unable find a main graph for project ${project.id}`));\n    return;\n  }\n  callback(null, [\n    'project',\n    project.id,\n    main,\n  ]);\n};\n\nexports.isReadOnly = (context) => {\n  if (!context.project) {\n    // If there is no project we must be read-only\n    return true;\n  }\n  if (context.graph && context.project.graphs.indexOf(context.graph) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.component && context.project.components.indexOf(context.component) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.graph\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('protocol:graph') === -1);\n  }\n  if (context.component\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('component:setsource') === -1);\n  }\n  return false;\n};\n\nexports.guessLanguage = (code, defaultLanguage = 'javascript') => {\n  if (code.indexOf('topic: ') !== -1 && code.indexOf('cases:') !== -1) {\n    // Reasonable guess is that this is an fbp-spec file.\n    // Should probably try parsing YAML to be sure.\n    return 'yaml';\n  }\n  return defaultLanguage;\n};\n","exports.getComponentHash = (componentName, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      'component',\n      componentName,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    'component',\n    componentName,\n  ];\n};\n\nexports.getGraphHash = (graphId, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      graphId,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    graphId,\n  ];\n};\n\nexports.hashToString = (hash) => `#${hash.map((part) => encodeURIComponent(part)).join('/')}`;\n","module.exports = {\"runtimetypes\":{\"msgflo\":{\"shortname\":\"MsgFlo Message Queuing\",\"icon\":\"cubes\",\"description\":\"Message queue orchestration\",\"helpurl\":\"https://msgflo.org/docs/usage/\"}},\"preferredlanguage\":\"python\",\"componenttemplates\":{\"python\":\"#!/usr/bin/env python\\nimport msgflo\\n\\nclass <%= name %>(msgflo.Participant):\\n  def __init__(self, role):\\n    d = {\\n      'component': '<%= namespace %>/<%= name %>',\\n      'label': '<%= description %>',\\n      'icon': '<%= icon %>',\\n      'inports': [\\n        { 'id': 'in', 'type': 'any' },\\n      ],\\n      'outports': [\\n        { 'id': 'out', 'type': 'any' },\\n      ],\\n    }\\n    msgflo.Participant.__init__(self, d, role)\\n\\n  def process(self, inport, msg):\\n    self.send('out', msg.data)\\n    self.ack(msg)\\n\\nif __name__ == '__main__':\\n  msgflo.main(<%= name %>)\\n\",\"coffeescript\":\"# To work in msgflo-nodejs source tree\\ntry\\n  msgflo = require 'msgflo-nodejs'\\ncatch e\\n  msgflo = require '..'\\n\\n<%= name %> = (client, role) ->\\n\\n  definition =\\n    component: '<%= namespace %>/<%= name %>'\\n    icon: '<%= icon %>'\\n    label: '<%= description %>'\\n    inports: [\\n      id: 'in'\\n      type: 'any'\\n    ]\\n    outports: [\\n      id: 'out'\\n      type: 'any'\\n    ]\\n  process = (inport, indata, callback) ->\\n    return callback 'out', null, indata\\n  return new msgflo.participant.Participant client, definition, process, role\\n\\nmodule.exports = <%= name %>\\n\",\"javascript\":\"try {\\n  var msgflo = require('msgflo-nodejs');\\n} catch (error) {\\n  var e = error;\\n  var msgflo = require('..');\\n}\\n\\nvar <%= name %> = function(client, role) {\\n  var definition = {\\n    component: '<%= namespace %>/<%= name %>',\\n    icon: '<%= icon %>',\\n    label: '<%= description %>',\\n    inports: [\\n      {\\n        id: 'in',\\n        type: 'any'\\n      }\\n    ],\\n    outports: [\\n      {\\n        id: 'out',\\n        type: 'any'\\n      }\\n    ]\\n  };\\n  var process = function(inport, indata, callback) {\\n    return callback('out', null, indata);\\n  };\\n  return new msgflo.participant.Participant(client, definition, process, role);\\n};\\n\\nmodule.exports = <%= name %>;\\n\",\"yaml\":\"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\\ncomponent: '<%= namespace %>/<%= name %>'\\nlabel: '<%= description %>'\\nicon: '<%= icon %>'\\ninports:\\n  open:\\n    queue: /bitraf/door/#ROLE/open\\n    type: object\\noutports: {}\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"sndflo\":{\"shortname\":\"SndFlo Sound Synthesis\",\"icon\":\"music\",\"description\":\"Create sound using SuperCollider\",\"helpurl\":\"https://github.com/jonnor/sndflo#readme\"}},\"componenttemplates\":{\"supercollider\":\"SynthDef(\\\"MyFilter\\\", {\\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\\n},\\n    metadata: (\\n        description: \\\"my filter\\\",\\n        specs: (\\n            freq: ControlSpec(20, 20000, \\\\exp, 0.1, 2200, \\\"Hz\\\")\\n        )\\n    )\\n)\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"imgflo\":{\"shortname\":\"ImgFlo Image Manipulation\",\"icon\":\"picture-o\",\"description\":\"Process images using GEGL\",\"helpurl\":\"https://github.com/jonnor/imgflo#readme\"}},\"componenttemplates\":{\"c\":\"/* This file is an image processing operation for GEGL */\\n\\n#ifdef GEGL_PROPERTIES\\n    // Dummy prop, for testing\\n    property_double (x, \\\"X\\\", 0.0)\\n        ui_range (0.0, 1024.0)\\n        ui_meta (\\\"unit\\\", \\\"pixel-coordinate\\\")\\n#else\\n\\n#define GEGL_OP_POINT_FILTER\\n#include \\\"gegl-op.h\\\"\\n\\n#ifndef IMGFLO_OP_NAME\\n#define IMGFLO_OP_NAME(orig) orig\\n#endif\\n\\nstatic void prepare(GeglOperation *operation)\\n{\\n    const Babl *format = babl_format(\\\"YA float\\\");\\n    gegl_operation_set_format(operation, \\\"input\\\", format);\\n    gegl_operation_set_format(operation, \\\"output\\\", format);\\n}\\n\\ngboolean\\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\\n        const GeglRectangle *roi, gint level)\\n{\\n    float *in = in_buf;\\n    float *out = out_buf;\\n    while (samples--) {\\n        *out++ = *in++;\\n        *out++ = *in++;\\n    }\\n    return TRUE;\\n}\\n\\nstatic void\\ngegl_op_class_init (GeglOpClass *klass)\\n{\\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\\n  point_filter_class->process = process;\\n  operation_class->prepare = prepare;\\n  gegl_operation_class_set_keys (operation_class,\\n      \\\"name\\\",        IMGFLO_OP_NAME(\\\"myop2\\\"),\\n      \\\"title\\\",       \\\"imgflo: Dynamic Flowhub\\\",\\n      \\\"categories\\\" , \\\"dev\\\",\\n      \\\"description\\\", \\\"First GEGL op written in Flowhub 22\\\",\\n  NULL);\\n}\\n\\n#endif\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"noflo-browser\":{\"shortname\":\"NoFlo for Browser\",\"icon\":\"html5\",\"description\":\"Build client-side browser applications\",\"helpurl\":\"https://github.com/noflo/noflo-browser-app#readme\"},\"noflo-nodejs\":{\"shortname\":\"NoFlo for Node.js\",\"icon\":\"cloud\",\"description\":\"Build network applications\",\"helpurl\":\"https://github.com/noflo/noflo-nodejs#readme\"},\"noflo-gnome\":{\"shortname\":\"NoFlo for GNOME\",\"icon\":\"desktop\",\"description\":\"Build GNOME desktop applications\",\"helpurl\":\"https://github.com/noflo/noflo-gnome#readme\"}},\"preferredlanguage\":\"es2015\",\"componenttemplates\":{\"javascript\":\"var noflo = require('noflo');\\n\\nexports.getComponent = function() {\\n  var c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process(function (input, output) {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    var data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"coffeescript\":\"noflo = require 'noflo'\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = '<%= description %>'\\n  c.icon = '<%= icon %>'\\n  c.inPorts.add 'in',\\n    datatype: 'all'\\n    description: 'Packet to forward'\\n  c.outPorts.add 'out',\\n    datatype: 'all'\\n  c.process (input, output) ->\\n    # Check preconditions on input data\\n    return unless input.hasData 'in'\\n    # Read packets we need to process\\n    data = input.getData 'in'\\n    # Process data and send output\\n    output.send\\n      out: data\\n    # Deactivate\\n    output.done()\\n\",\"es2015\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.process((input, output) => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data,\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"typescript\":\"import { Component } from 'noflo';\\n\\nexports.getComponent = (): Component => {\\n  const c = new Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process((input, output): void => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\"},\"examples\":{\"clock\":{\"label\":\"Animated clock\",\"id\":\"86a28c01d66cd8bf672f4e0a3e1ba851\"},\"camtopalette\":{\"label\":\"Cam to palette\",\"id\":\"efd306b5846c236998a63c535ceebed1\",\"ssl\":true},\"canvas\":{\"label\":\"Canvas pattern\",\"id\":\"dc0414ecf989b4b130b119e948653350\"},\"counter\":{\"label\":\"Click counter\",\"id\":\"38471e33458d644e907f4637434f5bbf\"},\"draganddrop\":{\"label\":\"Drag-and-drop physics\",\"id\":\"026a7bc8f1b482f56ad336c9d72dd72f\"},\"delaunaymasks\":{\"label\":\"Delaunay masks\",\"id\":\"d6c1fa7b4b9d437564e954f338d970b9\",\"ssl\":true},\"reacttodo\":{\"label\":\"React TODO list\",\"id\":\"c111454c9fd2f74d37d1e8a4e739adfd\"},\"webaudio\":{\"label\":\"Web Audio\",\"id\":\"6724a6eb8a1aaf351866e7a43c3ecd43\"}}}","module.exports = {\"runtimetypes\":{\"javafbp\":{\"shortname\":\"JavaFBP\",\"icon\":\"android\",\"description\":\"Program Java and Android applications\",\"helpurl\":\"https://github.com/jonnor/javafbp-runtime#readme\"}},\"componenttemplates\":{\"java\":\"// TODO\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"microflo\":{\"shortname\":\"MicroFlo Microcontroller Programming\",\"icon\":\"lightbulb-o\",\"description\":\"Program microcontrollers like Arduino\",\"helpurl\":\"https://github.com/jonnor/microflo#readme\"}},\"componenttemplates\":{\"c++\":\"// TODO\\n\"},\"examples\":{}}","/**\n * Generated from the-graph-dark.css, the-graph-light.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"the-graph-styles\">\n  <template>\n    <style>\n      .the-graph-dark .the-graph-app {\n  background-color: #000;\n  position: relative;\n}\n.the-graph-dark svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-dark .arrow {\n  cursor: default;\n}\n.the-graph-dark .click {\n  cursor: pointer;\n}\n.the-graph-dark .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-dark .node-border {\n  fill: rgba(0,0,0,0.5);\n  stroke: #666;\n  stroke-width: 2px;\n}\n.the-graph-dark .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-dark .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-dark .eventcatcher {\n  fill: #fff;\n  fill-opacity: 0.1;\n}\n.the-graph-dark .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-dark .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .ex-inports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-outports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-inports .node .node-rect,\n.the-graph-dark .ex-outports .node .node-rect,\n.the-graph-dark .ex-inports .node:hover .node-rect,\n.the-graph-dark .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-dark .selection .ex-inports .node .node-border,\n.the-graph-dark .selection .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .ex-inports .node .node-border,\n.the-graph-dark .small .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .node-bg {\n  opacity: 0;\n}\n.the-graph-dark .selection .node .node-rect {\n  fill: rgba(61,66,67,0.94);\n}\n.the-graph-dark .selection .node .node-border {\n  stroke: #232829;\n}\n.the-graph-dark .selection .node .port-arc {\n  fill: #232829;\n}\n.the-graph-dark .selection .node .node-icon {\n  fill: #232829;\n}\n.the-graph-dark .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-dark .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .selection .node.selected .node-icon {\n  fill: #5e6a6e;\n}\n.the-graph-dark .selection .ex-inports .node .node-icon {\n  fill: #512f01;\n}\n.the-graph-dark .selection .ex-outports .node .node-icon {\n  fill: #015115;\n}\n.the-graph-dark .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node .node-border {\n  fill: rgba(61,66,67,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark path {\n  fill: none;\n}\n.the-graph-dark .arrow-bg {\n  stroke: #000;\n  stroke-width: 2px;\n}\n.the-graph-dark .edge-bg {\n  stroke: #000;\n  stroke-width: 5px;\n}\n.the-graph-dark .edge-fg {\n  stroke: #fff;\n  stroke-width: 3px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .edge-touch {\n  stroke-width: 7px;\n  opacity: 0;\n}\n.the-graph-dark .edge:hover .edge-bg,\n.the-graph-dark .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-dark .edge.selected .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 4px;\n}\n.the-graph-dark .edge.selected .edge-bg {\n  stroke-width: 8px;\n  stroke: #e6e6e6;\n}\n.the-graph-dark .small .edge-bg {\n  stroke-width: 8px;\n}\n.the-graph-dark .small .edge-fg {\n  stroke-width: 6px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n.the-graph-dark .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 4px;\n  stroke: #e6e6e6;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n.the-graph-dark .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 6px;\n  stroke: #e6e6e6;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-dark text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #fff;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .text-bg-rect {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .node-label,\n.the-graph-dark .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-dark .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-dark .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-dark .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-dark .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-dark .iip-path {\n  stroke-width: 1px;\n  stroke: #fff;\n}\n.the-graph-dark .iip-info {\n  visibility: hidden;\n}\n.the-graph-dark .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-dark .big .iip-info {\n  visibility: visible;\n}\n.the-graph-dark .context-modal-bg {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .context-node-rect {\n  fill: #121417;\n  stroke: #bfbfbf;\n  stroke-width: 0.5px;\n}\n.the-graph-dark .context-node-icon {\n  font-size: 30px;\n  fill: #fff;\n}\n.the-graph-dark .context-icon {\n  font-size: 20px;\n  fill: #fff;\n}\n.the-graph-dark .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-dark .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-slice.click:hover .context-arc {\n  stroke: rgba(90,102,114,0.95);\n}\n.the-graph-dark .context-circle {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-dark .context-circle-x {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-dark .context-port-bg {\n  fill: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-port-bg.highlight {\n  stroke: #bfbfbf;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(43,48,54,0.95);\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-path {\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-label {\n  fill: #fff;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-dark .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-dark .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-dark .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-dark .tooltip-bg {\n  fill: rgba(0,0,0,0.9);\n  opacity: 0.75;\n}\n.the-graph-dark .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-dark .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .node-icon {\n  font-size: 45px;\n  fill: #5e6a6e;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-dark .small .node-icon {\n  fill: #2f3537;\n  font-size: 66px;\n}\n.the-graph-dark .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-dark .ex-inports .node-icon,\n.the-graph-dark .small .ex-inports .node-icon {\n  fill: #e88802;\n}\n.the-graph-dark .ex-outports .node-icon,\n.the-graph-dark .small .ex-outports .node-icon {\n  fill: #02e83c;\n}\n.the-graph-dark .port-circle-bg {\n  fill: #666;\n  opacity: 0;\n}\n.the-graph-dark .port-arc {\n  fill: #666;\n}\n.the-graph-dark .port-circle-small {\n  fill: none;\n}\n.the-graph-dark .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-dark .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-dark .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-dark .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-dark .big .port-label {\n  visibility: visible;\n}\n.the-graph-dark .big .ex-inports .port-label,\n.the-graph-dark .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-dark .group-box {\n  fill: rgba(191,191,191,0.15);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .group-box:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-dark .group-box.color0 {\n  fill: rgba(191,191,191,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color1 {\n  fill: rgba(255,128,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color2 {\n  fill: rgba(255,202,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color3 {\n  fill: rgba(255,255,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color4 {\n  fill: rgba(128,255,159,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color5 {\n  fill: rgba(128,255,212,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color6 {\n  fill: rgba(128,244,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color7 {\n  fill: rgba(128,191,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color8 {\n  fill: rgba(223,128,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color9 {\n  fill: rgba(255,128,234,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color10 {\n  fill: rgba(255,128,181,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color0:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .group-box.color1:hover {\n  fill: rgba(255,128,128,0.25);\n}\n.the-graph-dark .group-box.color2:hover {\n  fill: rgba(255,202,128,0.25);\n}\n.the-graph-dark .group-box.color3:hover {\n  fill: rgba(255,255,128,0.25);\n}\n.the-graph-dark .group-box.color4:hover {\n  fill: rgba(128,255,159,0.25);\n}\n.the-graph-dark .group-box.color5:hover {\n  fill: rgba(128,255,212,0.25);\n}\n.the-graph-dark .group-box.color6:hover {\n  fill: rgba(128,244,255,0.25);\n}\n.the-graph-dark .group-box.color7:hover {\n  fill: rgba(128,191,255,0.25);\n}\n.the-graph-dark .group-box.color8:hover {\n  fill: rgba(223,128,255,0.25);\n}\n.the-graph-dark .group-box.color9:hover {\n  fill: rgba(255,128,234,0.25);\n}\n.the-graph-dark .group-box.color10:hover {\n  fill: rgba(255,128,181,0.25);\n}\n.the-graph-dark .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.1);\n}\n.the-graph-dark .selection .group-box.color1 {\n  fill: rgba(255,128,128,0.1);\n}\n.the-graph-dark .selection .group-box.color2 {\n  fill: rgba(255,202,128,0.1);\n}\n.the-graph-dark .selection .group-box.color3 {\n  fill: rgba(255,255,128,0.1);\n}\n.the-graph-dark .selection .group-box.color4 {\n  fill: rgba(128,255,159,0.1);\n}\n.the-graph-dark .selection .group-box.color5 {\n  fill: rgba(128,255,212,0.1);\n}\n.the-graph-dark .selection .group-box.color6 {\n  fill: rgba(128,244,255,0.1);\n}\n.the-graph-dark .selection .group-box.color7 {\n  fill: rgba(128,191,255,0.1);\n}\n.the-graph-dark .selection .group-box.color8 {\n  fill: rgba(223,128,255,0.1);\n}\n.the-graph-dark .selection .group-box.color9 {\n  fill: rgba(255,128,234,0.1);\n}\n.the-graph-dark .selection .group-box.color10 {\n  fill: rgba(255,128,181,0.1);\n}\n.the-graph-dark .selection .group-box.selection {\n  fill: rgba(255,255,255,0.15);\n  stroke: #e6e6e6;\n  stroke-width: 1px;\n}\n.the-graph-dark .selection .group-box.selection:hover {\n  fill: rgba(255,255,255,0.25);\n}\n.the-graph-dark .group-label {\n  text-anchor: start;\n  fill: #fff;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .group-description {\n  fill: #fff;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-dark .small .group-description {\n  visibility: hidden;\n}\n.the-graph-dark .stroke,\n.the-graph-dark .stroke.route0,\n.the-graph-dark .selection .selected .stroke,\n.the-graph-dark .selection .selected .stroke.route0 {\n  stroke: #fff;\n}\n.the-graph-dark .stroke.route1,\n.the-graph-dark .selection .selected .stroke.route1 {\n  stroke: #e80202;\n}\n.the-graph-dark .stroke.route2,\n.the-graph-dark .selection .selected .stroke.route2 {\n  stroke: #e88802;\n}\n.the-graph-dark .stroke.route3,\n.the-graph-dark .selection .selected .stroke.route3 {\n  stroke: #e8e802;\n}\n.the-graph-dark .stroke.route4,\n.the-graph-dark .selection .selected .stroke.route4 {\n  stroke: #02e83c;\n}\n.the-graph-dark .stroke.route5,\n.the-graph-dark .selection .selected .stroke.route5 {\n  stroke: #02e89c;\n}\n.the-graph-dark .stroke.route6,\n.the-graph-dark .selection .selected .stroke.route6 {\n  stroke: #02d5e8;\n}\n.the-graph-dark .stroke.route7,\n.the-graph-dark .selection .selected .stroke.route7 {\n  stroke: #0275e8;\n}\n.the-graph-dark .stroke.route8,\n.the-graph-dark .selection .selected .stroke.route8 {\n  stroke: #af02e8;\n}\n.the-graph-dark .stroke.route9,\n.the-graph-dark .selection .selected .stroke.route9 {\n  stroke: #e802c2;\n}\n.the-graph-dark .stroke.route10,\n.the-graph-dark .selection .selected .stroke.route10 {\n  stroke: #e80262;\n}\n.the-graph-dark .selection .stroke,\n.the-graph-dark .selection .stroke.route0 {\n  stroke: #757575;\n}\n.the-graph-dark .selection .stroke.route1 {\n  stroke: #510101;\n}\n.the-graph-dark .selection .stroke.route2 {\n  stroke: #512f01;\n}\n.the-graph-dark .selection .stroke.route3 {\n  stroke: #515101;\n}\n.the-graph-dark .selection .stroke.route4 {\n  stroke: #015115;\n}\n.the-graph-dark .selection .stroke.route5 {\n  stroke: #015136;\n}\n.the-graph-dark .selection .stroke.route6 {\n  stroke: #014a51;\n}\n.the-graph-dark .selection .stroke.route7 {\n  stroke: #012951;\n}\n.the-graph-dark .selection .stroke.route8 {\n  stroke: #3d0151;\n}\n.the-graph-dark .selection .stroke.route9 {\n  stroke: #510143;\n}\n.the-graph-dark .selection .stroke.route10 {\n  stroke: #510122;\n}\n.the-graph-dark .fill,\n.the-graph-dark .fill.route0,\n.the-graph-dark .selection .selected .fill,\n.the-graph-dark .selection .selected .fill.route0 {\n  fill: #fff;\n}\n.the-graph-dark .fill.route1,\n.the-graph-dark .selection .selected .fill.route1 {\n  fill: #e80202;\n}\n.the-graph-dark .fill.route2,\n.the-graph-dark .selection .selected .fill.route2 {\n  fill: #e88802;\n}\n.the-graph-dark .fill.route3,\n.the-graph-dark .selection .selected .fill.route3 {\n  fill: #e8e802;\n}\n.the-graph-dark .fill.route4,\n.the-graph-dark .selection .selected .fill.route4 {\n  fill: #02e83c;\n}\n.the-graph-dark .fill.route5,\n.the-graph-dark .selection .selected .fill.route5 {\n  fill: #02e89c;\n}\n.the-graph-dark .fill.route6,\n.the-graph-dark .selection .selected .fill.route6 {\n  fill: #02d5e8;\n}\n.the-graph-dark .fill.route7,\n.the-graph-dark .selection .selected .fill.route7 {\n  fill: #0275e8;\n}\n.the-graph-dark .fill.route8,\n.the-graph-dark .selection .selected .fill.route8 {\n  fill: #af02e8;\n}\n.the-graph-dark .fill.route9,\n.the-graph-dark .selection .selected .fill.route9 {\n  fill: #e802c2;\n}\n.the-graph-dark .fill.route10,\n.the-graph-dark .selection .selected .fill.route10 {\n  fill: #e80262;\n}\n.the-graph-dark .selection .fill,\n.the-graph-dark .selection .fill.route0 {\n  fill: #757575;\n}\n.the-graph-dark .selection .fill.route1 {\n  fill: #510101;\n}\n.the-graph-dark .selection .fill.route2 {\n  fill: #512f01;\n}\n.the-graph-dark .selection .fill.route3 {\n  fill: #515101;\n}\n.the-graph-dark .selection .fill.route4 {\n  fill: #015115;\n}\n.the-graph-dark .selection .fill.route5 {\n  fill: #015136;\n}\n.the-graph-dark .selection .fill.route6 {\n  fill: #014a51;\n}\n.the-graph-dark .selection .fill.route7 {\n  fill: #012951;\n}\n.the-graph-dark .selection .fill.route8 {\n  fill: #3d0151;\n}\n.the-graph-dark .selection .fill.route9 {\n  fill: #510143;\n}\n.the-graph-dark .selection .fill.route10 {\n  fill: #510122;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n\n.the-graph-light .the-graph-app {\n  background-color: #fff;\n  position: relative;\n}\n.the-graph-light svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-light .arrow {\n  cursor: default;\n}\n.the-graph-light .click {\n  cursor: pointer;\n}\n.the-graph-light .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-light .node-border {\n  fill: rgba(255,255,255,0.5);\n  stroke: #3b4245;\n  stroke-width: 2px;\n}\n.the-graph-light .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-light .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-light .eventcatcher {\n  fill: #000;\n  fill-opacity: 0.1;\n}\n.the-graph-light .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-light .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-light .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-light .ex-inports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-outports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-inports .node .node-rect,\n.the-graph-light .ex-outports .node .node-rect,\n.the-graph-light .ex-inports .node:hover .node-rect,\n.the-graph-light .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-light .selection .ex-inports .node .node-border,\n.the-graph-light .selection .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light .small .ex-inports .node .node-border,\n.the-graph-light .small .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .node-bg {\n  opacity: 0;\n}\n.the-graph-light .selection .node .node-rect {\n  fill: rgba(245,248,249,0.94);\n}\n.the-graph-light .selection .node .node-border {\n  stroke: #d6dadc;\n}\n.the-graph-light .selection .node .port-arc {\n  fill: #d6dadc;\n}\n.the-graph-light .selection .node .node-icon {\n  fill: #bac2c4;\n}\n.the-graph-light .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-light .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-light .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-light .selection .node.selected .node-icon {\n  fill: #2f3537;\n}\n.the-graph-light .selection .ex-inports .node .node-icon {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .ex-outports .node .node-icon {\n  fill: #ccffdb;\n}\n.the-graph-light .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node .node-border {\n  fill: rgba(245,248,249,0.94);\n  stroke: none;\n}\n.the-graph-light .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light path {\n  fill: none;\n}\n.the-graph-light .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 2.5px;\n}\n.the-graph-light .edge-bg {\n  stroke: #e6e6e6;\n  stroke-width: 6px;\n}\n.the-graph-light .edge-fg {\n  stroke: #bfbfbf;\n  stroke-width: 4px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-light .edge-touch {\n  stroke-width: 8px;\n  opacity: 0;\n}\n.the-graph-light .edge:hover .edge-bg,\n.the-graph-light .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-light .edge.selected .arrow-bg {\n  stroke: #808080;\n  stroke-width: 5px;\n}\n.the-graph-light .edge.selected .edge-bg {\n  stroke-width: 10px;\n  stroke: #808080;\n}\n.the-graph-light .small .edge-bg {\n  stroke-width: 10px;\n}\n.the-graph-light .small .edge-fg {\n  stroke-width: 8px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n.the-graph-light .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 5px;\n  stroke: #808080;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n.the-graph-light .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 8px;\n  stroke: #808080;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-light text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #000;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .text-bg-rect {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .node-label,\n.the-graph-light .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-light .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-light .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-light .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-light .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-light .iip-path {\n  stroke-width: 1px;\n  stroke: #bfbfbf;\n}\n.the-graph-light .iip-info {\n  visibility: hidden;\n}\n.the-graph-light .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-light .big .iip-info {\n  visibility: visible;\n}\n.the-graph-light .context-modal-bg {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .context-node-rect {\n  fill: #e0e3e6;\n  stroke: #404040;\n  stroke-width: 0.5px;\n}\n.the-graph-light .context-node-icon {\n  font-size: 30px;\n  fill: #000;\n}\n.the-graph-light .context-icon {\n  font-size: 20px;\n  fill: #000;\n}\n.the-graph-light .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-light .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-slice.click:hover .context-arc {\n  stroke: rgba(195,201,208,0.95);\n}\n.the-graph-light .context-circle {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-light .context-circle-x {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-light .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-light .context-port-bg {\n  fill: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-port-bg.highlight {\n  stroke: #404040;\n  stroke-width: 1px;\n}\n.the-graph-light .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(224,227,230,0.95);\n  stroke: #404040;\n}\n.the-graph-light .context-port-path {\n  stroke: #404040;\n}\n.the-graph-light .context-port-label {\n  fill: #000;\n  dominant-baseline: central;\n}\n.the-graph-light .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-light .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-light .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-light .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-light .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-light .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-light .tooltip-bg {\n  fill: rgba(255,255,255,0.9);\n  opacity: 0.75;\n}\n.the-graph-light .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-light .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .node-icon {\n  font-size: 45px;\n  fill: #3b4245;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-light .small .node-icon {\n  fill: #171b1c;\n  font-size: 66px;\n}\n.the-graph-light .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-light .ex-inports .node-icon,\n.the-graph-light .small .ex-inports .node-icon {\n  fill: #cc6300;\n}\n.the-graph-light .ex-outports .node-icon,\n.the-graph-light .small .ex-outports .node-icon {\n  fill: #00cc3d;\n}\n.the-graph-light .port-circle-bg {\n  fill: #3b4245;\n  opacity: 0;\n}\n.the-graph-light .port-arc {\n  fill: #3b4245;\n}\n.the-graph-light .port-circle-small {\n  fill: none;\n}\n.the-graph-light .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-light .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-light .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-light .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-light .big .port-label {\n  visibility: visible;\n}\n.the-graph-light .big .ex-inports .port-label,\n.the-graph-light .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-light .group-box {\n  fill: rgba(191,191,191,0.05);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-light .group-box:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-light .group-box.color0 {\n  fill: rgba(191,191,191,0.05);\n  stroke: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1 {\n  fill: rgba(204,0,0,0.05);\n  stroke: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2 {\n  fill: rgba(204,99,0,0.05);\n  stroke: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3 {\n  fill: rgba(255,200,0,0.05);\n  stroke: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4 {\n  fill: rgba(0,204,61,0.05);\n  stroke: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5 {\n  fill: rgba(171,242,218,0.05);\n  stroke: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6 {\n  fill: rgba(0,201,204,0.05);\n  stroke: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7 {\n  fill: rgba(0,82,204,0.05);\n  stroke: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8 {\n  fill: rgba(68,0,204,0.05);\n  stroke: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9 {\n  fill: rgba(255,168,186,0.05);\n  stroke: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10 {\n  fill: rgba(204,0,109,0.05);\n  stroke: rgba(204,0,109,0.15);\n}\n.the-graph-light .group-box.color0:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1:hover {\n  fill: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2:hover {\n  fill: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3:hover {\n  fill: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4:hover {\n  fill: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5:hover {\n  fill: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6:hover {\n  fill: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7:hover {\n  fill: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8:hover {\n  fill: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9:hover {\n  fill: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10:hover {\n  fill: rgba(204,0,109,0.15);\n}\n.the-graph-light .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.01);\n}\n.the-graph-light .selection .group-box.color1 {\n  fill: rgba(204,0,0,0.01);\n}\n.the-graph-light .selection .group-box.color2 {\n  fill: rgba(204,99,0,0.01);\n}\n.the-graph-light .selection .group-box.color3 {\n  fill: rgba(255,200,0,0.01);\n}\n.the-graph-light .selection .group-box.color4 {\n  fill: rgba(0,204,61,0.01);\n}\n.the-graph-light .selection .group-box.color5 {\n  fill: rgba(171,242,218,0.01);\n}\n.the-graph-light .selection .group-box.color6 {\n  fill: rgba(0,201,204,0.01);\n}\n.the-graph-light .selection .group-box.color7 {\n  fill: rgba(0,82,204,0.01);\n}\n.the-graph-light .selection .group-box.color8 {\n  fill: rgba(68,0,204,0.01);\n}\n.the-graph-light .selection .group-box.color9 {\n  fill: rgba(255,168,186,0.01);\n}\n.the-graph-light .selection .group-box.color10 {\n  fill: rgba(204,0,109,0.01);\n}\n.the-graph-light .selection .group-box.selection {\n  fill: rgba(128,128,128,0.15);\n  stroke: #808080;\n  stroke-width: 1px;\n}\n.the-graph-light .selection .group-box.selection:hover {\n  fill: rgba(102,102,102,0.25);\n}\n.the-graph-light .group-label {\n  text-anchor: start;\n  fill: #000;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .group-description {\n  fill: #000;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-light .small .group-description {\n  visibility: hidden;\n}\n.the-graph-light .stroke,\n.the-graph-light .stroke.route0,\n.the-graph-light .selection .selected .stroke,\n.the-graph-light .selection .selected .stroke.route0 {\n  stroke: #bfbfbf;\n}\n.the-graph-light .stroke.route1,\n.the-graph-light .selection .selected .stroke.route1 {\n  stroke: #c00;\n}\n.the-graph-light .stroke.route2,\n.the-graph-light .selection .selected .stroke.route2 {\n  stroke: #cc6300;\n}\n.the-graph-light .stroke.route3,\n.the-graph-light .selection .selected .stroke.route3 {\n  stroke: #ffc800;\n}\n.the-graph-light .stroke.route4,\n.the-graph-light .selection .selected .stroke.route4 {\n  stroke: #00cc3d;\n}\n.the-graph-light .stroke.route5,\n.the-graph-light .selection .selected .stroke.route5 {\n  stroke: #abf2da;\n}\n.the-graph-light .stroke.route6,\n.the-graph-light .selection .selected .stroke.route6 {\n  stroke: #00c9cc;\n}\n.the-graph-light .stroke.route7,\n.the-graph-light .selection .selected .stroke.route7 {\n  stroke: #0052cc;\n}\n.the-graph-light .stroke.route8,\n.the-graph-light .selection .selected .stroke.route8 {\n  stroke: #40c;\n}\n.the-graph-light .stroke.route9,\n.the-graph-light .selection .selected .stroke.route9 {\n  stroke: #ffa8ba;\n}\n.the-graph-light .stroke.route10,\n.the-graph-light .selection .selected .stroke.route10 {\n  stroke: #cc006d;\n}\n.the-graph-light .selection .stroke,\n.the-graph-light .selection .stroke.route0 {\n  stroke: #e6e6e6;\n}\n.the-graph-light .selection .stroke.route1 {\n  stroke: #fcc;\n}\n.the-graph-light .selection .stroke.route2 {\n  stroke: #ffe5cc;\n}\n.the-graph-light .selection .stroke.route3 {\n  stroke: #fff4cc;\n}\n.the-graph-light .selection .stroke.route4 {\n  stroke: #ccffdb;\n}\n.the-graph-light .selection .stroke.route5 {\n  stroke: #d3f8ec;\n}\n.the-graph-light .selection .stroke.route6 {\n  stroke: #ccfeff;\n}\n.the-graph-light .selection .stroke.route7 {\n  stroke: #cce0ff;\n}\n.the-graph-light .selection .stroke.route8 {\n  stroke: #dcf;\n}\n.the-graph-light .selection .stroke.route9 {\n  stroke: #ffccd6;\n}\n.the-graph-light .selection .stroke.route10 {\n  stroke: #ffcce7;\n}\n.the-graph-light .fill,\n.the-graph-light .fill.route0,\n.the-graph-light .selection .selected .fill,\n.the-graph-light .selection .selected .fill.route0 {\n  fill: #bfbfbf;\n}\n.the-graph-light .fill.route1,\n.the-graph-light .selection .selected .fill.route1 {\n  fill: #c00;\n}\n.the-graph-light .fill.route2,\n.the-graph-light .selection .selected .fill.route2 {\n  fill: #cc6300;\n}\n.the-graph-light .fill.route3,\n.the-graph-light .selection .selected .fill.route3 {\n  fill: #ffc800;\n}\n.the-graph-light .fill.route4,\n.the-graph-light .selection .selected .fill.route4 {\n  fill: #00cc3d;\n}\n.the-graph-light .fill.route5,\n.the-graph-light .selection .selected .fill.route5 {\n  fill: #abf2da;\n}\n.the-graph-light .fill.route6,\n.the-graph-light .selection .selected .fill.route6 {\n  fill: #00c9cc;\n}\n.the-graph-light .fill.route7,\n.the-graph-light .selection .selected .fill.route7 {\n  fill: #0052cc;\n}\n.the-graph-light .fill.route8,\n.the-graph-light .selection .selected .fill.route8 {\n  fill: #40c;\n}\n.the-graph-light .fill.route9,\n.the-graph-light .selection .selected .fill.route9 {\n  fill: #ffa8ba;\n}\n.the-graph-light .fill.route10,\n.the-graph-light .selection .selected .fill.route10 {\n  fill: #cc006d;\n}\n.the-graph-light .selection .fill,\n.the-graph-light .selection .fill.route0 {\n  fill: #e6e6e6;\n}\n.the-graph-light .selection .fill.route1 {\n  fill: #fcc;\n}\n.the-graph-light .selection .fill.route2 {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .fill.route3 {\n  fill: #fff4cc;\n}\n.the-graph-light .selection .fill.route4 {\n  fill: #ccffdb;\n}\n.the-graph-light .selection .fill.route5 {\n  fill: #d3f8ec;\n}\n.the-graph-light .selection .fill.route6 {\n  fill: #ccfeff;\n}\n.the-graph-light .selection .fill.route7 {\n  fill: #cce0ff;\n}\n.the-graph-light .selection .fill.route8 {\n  fill: #dcf;\n}\n.the-graph-light .selection .fill.route9 {\n  fill: #ffccd6;\n}\n.the-graph-light .selection .fill.route10 {\n  fill: #ffcce7;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","import { PolymerElement } from '@polymer/polymer';\n\nclass NofloPolymer extends PolymerElement {\n  static get properties() {\n    return {\n      element: {\n        type: String,\n      },\n      inports: {\n        type: String,\n      },\n      outports: {\n        type: String,\n      },\n    };\n  }\n}\n\ncustomElements.define('noflo-polymer', NofloPolymer);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #cta {\n        display: inline;\n        width: auto;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Account settings for <span>{{user.flowhub-user.name}}</span></h1>\n      <form>\n        <label>\n          Theme\n          <select name=\"type\" value=\"{{theme::input}}\">\n            <option value=\"dark\" selected\\$=\"[[_isSelectedTheme('dark', theme)]]\">Lazer</option>\n            <option value=\"light\" selected\\$=\"[[_isSelectedTheme('light', theme)]]\">Tube</option>\n          </select>\n        </label>\n        <label>\n          Debug [[env.NOFLO_APP_TITLE]] in Flowhub (requires reload)\n          <select name=\"type\" value=\"{{debug::input}}\">\n            <option value=\"false\" selected\\$=\"[[_isSelectedDebug('false', debug)]]\">Disabled</option>\n            <option value=\"true\" selected\\$=\"[[_isSelectedDebug('true', debug)]]\">Enabled</option>\n          </select>\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">Save</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-account-settings',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    debug: {\n      type: String,\n      value: 'false',\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.fire('updated', {\n      'flowhub-theme': this.theme,\n      'flowhub-debug': this.debug,\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  userChanged() {\n    this.theme = this.user['flowhub-theme'] || 'dark';\n    this.debug = this.user['flowhub-debug'] || 'false';\n  },\n\n  _isSelectedTheme(theme, current) {\n    return theme === current;\n  },\n\n  _isSelectedDebug(value, current) {\n    return value === current;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-account-settings';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        display: block;\n        padding-top: 18px;\n        width: 100%;\n      }\n      nav {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        padding-left: 72px;\n        padding-right: 72px;\n        padding-bottom: 18px;\n      }\n      section.app {\n        display: flex;\n        flex-direction: row;\n      }\n      section.app .logo {\n        margin-right: 18px;\n        width: 72px;\n        height: 72px;\n      }\n      section.app .logo img {\n        width: 72px;\n        height: 72px;\n        display: inline-block;\n      }\n      section.app h1 {\n        font-size: 18px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.app h2 {\n        font-size: 9px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.user {\n        text-align: right;\n      }\n      section.user .avatar {\n        display: inline;\n        line-height: 18px;\n      }\n      section.user .avatar img {\n        width: 18px;\n        height: 18px;\n        display: inline-block;\n      }\n      section.user h1 {\n        display: inline;\n        line-height: 36px;\n      }\n      section.user .toolbar {\n        line-height: 36px;\n        font-size: 9px;\n      }\n      section.user .toolbar a,\n      section.user .toolbar button {\n        padding: 3px;\n        text-shadow: none;\n        text-decoration: none;\n        box-shadow: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 9px;\n        margin-left: 9px;\n        cursor: pointer;\n        border: none;\n        background-color: transparent;\n        color: var(--noflo-ui-text);\n      }\n      section.user .toolbar a.login::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsla(190, 98%, 46%, .8);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n        transition: all 0.3s ease;\n      }\n      section.user .toolbar a.login {\n        position: relative;\n        padding: 9px;\n        font-size: 18px;\n        border: 1px solid hsl(190, 98%, 46%);\n        background: hsla(190, 98%, 46%, .8);\n        line-height: 18px;\n        border-radius: 3px;\n        color: var(--noflo-ui-text);\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        box-sizing: border-box;\n        transition: background-color 0.2s ease-in;\n      }\n      section.user .toolbar a.login:hover,\n      section.user .toolbar a.login:focus,\n      section.user .toolbar a.login:active {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text) !important;\n        outline: 0;\n      }\n      div.banner {\n        background-color: hsla(190, 98%, 46%, .8);\n        padding: 18px;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      div.banner a {\n        color: var(--noflo-ui-text);\n        cursor: pointer;\n      }\n      div.banner div {\n        margin-top: 18px;\n      }\n      div.banner button,\n      div.banner a.cta,\n      div.banner input[type=\"submit\"] {\n        display: inline-block;\n        color: var(--noflo-ui-background);\n        background-color: var(--noflo-ui-text);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        padding-top: 1px;\n        padding-bottom: 1px;\n        line-height: 36px;\n        margin: 0px;\n        cursor: pointer;\n        font-size: 13px;\n        text-decoration: none;\n      }\n      </style>\n    <nav>\n    <section class=\"app\">\n      <div class=\"logo\">\n        <img src=\"app/[[env.NOFLO_THEME]]-72.png\">\n      </div>\n      <div class=\"name\">\n        <h1>\n          [[env.NOFLO_APP_NAME]]\n        </h1>\n        <h2>\n          v[[env.NOFLO_APP_VERSION]]\n        </h2>\n      </div>\n    </section>\n    <section class=\"user\">\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <div>\n        <template is=\"dom-if\" if=\"{{user.flowhub-avatar}}\">\n          <div class=\"avatar\"><img src=\"{{user.flowhub-avatar}}\"></div>\n        </template>\n        <h1>\n          <span>{{user.github-username}}</span>\n        </h1>\n        <div class=\"toolbar\">\n          <a href=\"https://docs.flowhub.io\" target=\"_blank\">Docs</a>\n          <a on-click=\"openSettings\">Settings</a>\n          <button on-click=\"logout\">Logout</button>\n        </div>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!user.flowhub-user}}\">\n      <div class=\"toolbar\">\n        <a id=\"loginbutton\" class=\"login\" on-click=\"login\">Login</a>\n      </div>\n    </template>\n    </section>\n    </nav>\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <template is=\"dom-if\" if=\"{{askForScope.length}}\">\n        <div class=\"banner\">\n          To be able to synchronize your GitHub projects, [[env.NOFLO_APP_TITLE]] needs repository access permissions. <a href=\"https://docs.flowhub.io/github-integration/\" target=\"_blank\">Read more</a>\n          <div>\n            Grant access to:\n            <template is=\"dom-repeat\" items=\"{{askForScope}}\" as=\"scope\">\n              <template is=\"dom-if\" if=\"{{_ifPublicScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public repositories only</button>\n              </template>\n              <template is=\"dom-if\" if=\"{{_ifPrivateScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public and private repositories</button>\n              </template>\n            </template>\n          </div>\n        </div>\n      </template>\n    </template>\n    </template>\n`,\n\n  is: 'noflo-account',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    askForScope: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    help: { value: null },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_THEME: process.env.NOFLO_THEME,\n          NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n          NOFLO_APP_VERSION: process.env.NOFLO_APP_VERSION,\n        };\n      },\n    },\n  },\n\n  login() {\n    this.fire('login', true);\n  },\n\n  logout() {\n    this.fire('logout', true);\n  },\n\n  relogin(event) {\n    event.preventDefault();\n    const scope = event.currentTarget.getAttribute('data-scope');\n    this.fire('relogin', scope);\n  },\n\n  userChanged() {\n    if (!this.user || !this.user['flowhub-user']) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('repo') === -1) {\n      // User hasn't granted repo access\n      this.set('askForScope', ['repo']);\n      if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('public_repo') === -1) {\n        // Allow paid users to limit repo access to only public if they want\n        this.push('askForScope', 'public_repo');\n      }\n    }\n  },\n\n  openSettings() {\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this.user['flowhub-user']) {\n      return;\n    }\n    const dialog = document.createElement('noflo-account-settings');\n    dialog.user = this.user;\n    dialog.theme = this.theme;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (event) => {\n      this.fire('userUpdated', event.detail);\n    });\n  },\n\n  _ifPublicScope(scope) {\n    return scope === 'public_repo';\n  },\n\n  _ifPrivateScope(scope) {\n    return scope === 'repo';\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\n\nclass NoFloIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: inline-block;\n      font: normal normal normal 14px/1 FontAwesomeSVG;\n      font-size: inherit;\n      text-rendering: auto;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n    </style>\n    [[_getIcon(icon, fallback)]]\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon';\n  }\n\n  static get properties() {\n    return {\n      icon: {\n        type: String,\n      },\n      fallback: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = icons;\n  }\n\n  _getIcon(icon, fallback) {\n    const result = this.icons.getIcon(icon, fallback);\n    return result;\n  }\n}\ncustomElements.define(NoFloIcon.is, NoFloIcon);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        top: calc(50% - 220px) !important;\n      }\n      ul.types {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n      }\n      ul.types li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 75%);\n        color: hsl(189, 50%, 80%);\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        transition: background-color 0.3s ease-in-out;\n      }\n      ul.types li.selected,\n      ul.types li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.types li.selected p {\n        color: hsl(0, 0%, 80%);\n      }\n      ul.types li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.types li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n      ul.types li noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n      }\n    </style>\n    <ul class=\"types\">\n      <template is=\"dom-repeat\" items=\"{{available}}\" as=\"availtype\">\n      <li on-click=\"selectType\" data-id\\$=\"{{availtype.id}}\" class\\$=\"{{_computeClass(availtype, type)}}\">\n        <h2>{{availtype.label}}</h2>\n        <noflo-icon icon=\"{{availtype.icon}}\"></noflo-icon>\n        <template is=\"dom-if\" if=\"{{_computeIf(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtime</p>\n        </template>\n        <template is=\"dom-if\" if=\"{{_computeIf2(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtimes</p>\n        </template>\n      </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-type-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'runtimesChanged',\n    },\n    type: {\n      type: String,\n      value: 'noflo-nodejs',\n      notify: true,\n    },\n  },\n\n  runtimesChanged() {\n    this.available = [{\n      id: 'all',\n      label: 'Multi-platform',\n      icon: 'asterisk',\n      runtimes: [],\n    }];\n    if (!this.runtimes) {\n      return;\n    }\n    this.runtimes.forEach((rt) => {\n      if (!rt.type) {\n        return;\n      }\n      const availType = this.getByType(rt.type);\n      availType.runtimes.push(rt);\n    });\n  },\n\n  selectType(event) {\n    this.type = event.currentTarget.getAttribute('data-id');\n  },\n\n  getByType(type) {\n    for (let i = 0; i < this.available.length; i += 1) {\n      if (this.available[i].id === type) {\n        return this.available[i];\n      }\n    }\n    return this.prepareAvailable(type);\n  },\n\n  prepareAvailable(type) {\n    const runtimeTypeInfo = {};\n    Object.keys(runtimeInfo).forEach((name) => {\n      const info = runtimeInfo[name];\n      Object.keys(info.runtimetypes).forEach((runtimeType) => {\n        runtimeTypeInfo[runtimeType] = info.runtimetypes[runtimeType];\n      });\n    });\n    // Also unknown runtimes should show up, synthesize info using defaults\n    const availType = {\n      id: type,\n      label: type,\n      icon: 'cogs',\n      runtimes: [],\n    };\n    const info = runtimeTypeInfo[type];\n    if (info && info.icon) {\n      availType.icon = info.icon;\n    }\n    if (info && info.shortname) {\n      availType.label = info.shortname;\n    }\n    this.push('available', availType);\n    return availType;\n  },\n\n  _computeClass(availtype, type) {\n    return this.tokenList({ selected: type === availtype.id });\n  },\n\n  _computeIf(availtype) {\n    return availtype.runtimes.length === 1;\n  },\n\n  _computeIf2(availtype) {\n    return availtype.runtimes.length > 1;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-type-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new project</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Project label\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          Project namespace\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-project\" autocapitalize=\"off\" autocorrect=\"off\" readonly=\"\">\n        </label>\n        <label>\n          Primary Type\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-project',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    projectId: {\n      type: String,\n      value: '',\n    },\n    projects: { value: null },\n    runtimes: {\n      value: null,\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  produceNamespace(namespace) {\n    return namespace.toLowerCase().replace(/[\\s/._]/g, '-').replace('--', '-').replace(/[^a-z0-9-]/g, '');\n  },\n\n  nameChanged() {\n    this.namespace = this.produceNamespace(this.name);\n    this.projectId = uuid();\n    if (this.name && this.namespace && this.projectId) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name || !this.namespace || !this.projectId) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newProject');\n    }\n    this.fire('new', {\n      id: this.projectId,\n      name: this.name,\n      namespace: this.produceNamespace(this.namespace),\n      type: this.type,\n      graphs: [],\n      components: [],\n      specs: [],\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add a new repository</h1>\n      <div class=\"modal-content\">\n      <form>\n        <label>\n          GitHub repository name\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/repository\" required=\"\">\n        </label>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Add</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-repository',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    repo: {\n      type: String,\n      value: '',\n      observer: 'repoChanged',\n    },\n    runtimes: { notify: true },\n    token: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  repoChanged() {\n    this.canSend = false;\n    if (this.repo && typeof this.repo === 'string') {\n      const matched = this.repo.match(/^(git@github\\.com:|https:\\/\\/github\\.com\\/)?(\\S+\\/\\S+?(?=\\.git|$))(\\.git)?$/);\n      if (!matched || !matched[2]) {\n        return;\n      }\n      if (matched[2] !== this.repo) {\n        // eslint-disable-next-line prefer-destructuring\n        this.repo = matched[2];\n      }\n      this.canSend = true;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.repo) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newRepository');\n    }\n    this.fire('new', this.repo);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      :host {\n        display: block;\n      }\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add new runtime</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Runtime name \n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"New local runtime\" required=\"\">\n        </label>\n        <label>\n          IP address\n          <input type=\"text\" value=\"{{address::input}}\" placeholder=\"127.0.0.1\" required=\"\">\n        </label>\n        <label>\n          Port\n          <input type=\"text\" data-type=\"int\" value=\"{{port::input}}\" placeholder=\"3569\" required=\"\">\n        </label>\n        <label>\n          Type\n          <select id=\"type\" value=\"{{type::input}}\">\n            <template is=\"dom-repeat\" items=\"{{availableTypes}}\" as=\"type\">\n            <option value=\"{{type}}\">{{type}}</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Secret\n          <input type=\"text\" value=\"{{secret::input}}\" placeholder=\"secret-string\" required=\"\">\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"create\" class\\$=\"{{_computeClass(canCreate)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-add-runtime',\n\n  properties: {\n    address: {\n      type: String,\n      value: 'localhost',\n      observer: 'validate',\n    },\n    availableTypes: {\n      type: Array,\n      value() {\n        return [\n          '',\n          'custom',\n          'noflo-nodejs',\n          'microflo',\n          'javafbp',\n          'imgflo',\n          'sndflo',\n          'msgflo',\n        ];\n      },\n    },\n    canCreate: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n    port: {\n      type: String,\n      value: '3569',\n      observer: 'validate',\n    },\n    secret: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n  },\n\n  attached() {\n    // PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    // PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  validate() {\n    if (this.name && this.address && this.port && this.type) {\n      this.canCreate = true;\n    }\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  createUUID() {\n    return uuid();\n  },\n\n  create(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    const runtime = {\n      name: this.name,\n      label: this.name,\n      id: this.createUUID(),\n      type: this.type,\n      seen: new Date().toString(),\n      protocol: 'websocket',\n      address: `ws://${this.address}:${this.port}`,\n      description: '',\n      secret: this.secret,\n      icon: 'cloud',\n    };\n    this.fire('new', runtime);\n    this.close();\n  },\n\n  listeners: { click: 'close' },\n\n  _computeRepeat(availableTypes, t) {\n    return t in availableTypes;\n  },\n\n  _computeClass(canCreate) {\n    return this.tokenList({ disabled: !canCreate });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-add-runtime';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nconst runtimes = [];\n\nconst runtimeTypes = {};\nObject.keys(runtimeInfo).forEach((name) => {\n  const rtInfo = runtimeInfo[name];\n  Object.keys(rtInfo.runtimetypes).forEach((runtimeType) => {\n    const info = rtInfo.runtimetypes[runtimeType];\n    const def = {\n      name: runtimeType,\n      label: info.shortname,\n      icon: info.icon,\n      description: info.description,\n      url: info.helpurl,\n    };\n    if (!runtimeTypes[runtimeType]) {\n      // Avoid duplicates\n      runtimeTypes[runtimeType] = def;\n      runtimes.push(def);\n    }\n  });\n});\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n      ul.runtimes {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -10px;\n        margin-right: -10px;\n        list-style: none;\n      }\n      ul.runtimes li {\n        display: inline-block;\n      }\n      ul.runtimes li a {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        text-decoration: none;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        text-decoration: none;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n        text-decoration: none;\n      }\n      ul.runtimes li a noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        text-decoration: none;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Register new runtime</h1>\n      <div class=\"modal-content\">\n      <p>\n      [[env.NOFLO_APP_TITLE]] supports all flow-based programming runtimes that are compatible with the <a href=\"https://flowbased.github.io/fbp-protocol/\" target=\"_blank\">FBP protocol</a>.\n      [[env.NOFLO_APP_TITLE]] comes with a bundled <a href=\"http://noflojs.org\" target=\"_blank\">NoFlo</a> runtime for the browser.\n      Here are some other popular ones:\n      </p>\n      <ul class=\"runtimes\">\n      <template is=\"dom-repeat\" items=\"{{runtimes}}\" as=\"runtime\">\n      <li class\\$=\"{{runtime.name}}\">\n        <a target=\"_blank\" href\\$=\"{{runtime.url}}\">\n          <noflo-icon icon=\"{{ runtime.icon }}\" fallback=\"cog\"></noflo-icon>\n          <h2>{{runtime.label}}</h2>\n          <p>{{runtime.description}}</p>\n        </a>\n      </li>\n      </template>\n      </ul>\n      <p>\n      Most runtimes provide a link that connects to them in [[env.NOFLO_APP_TITLE]] live mode at start-up. You can also add a runtime manually.\n      </p>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"addRuntime\">Add manually</button>\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-runtime',\n\n  properties: {\n    runtimes: {\n      value() {\n        return runtimes;\n      },\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    if (this.runtimeAdd) {\n      if (PolymerDom(this.runtimeAdd).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeAdd).parentNode).removeChild(this.runtimeAdd);\n      }\n      this.runtimeAdd = null;\n    }\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  addRuntime(event) {\n    event.preventDefault();\n    this.runtimeAdd = document.createElement('noflo-add-runtime');\n    PolymerDom(document.body).appendChild(this.runtimeAdd);\n    this.runtimeAdd.addEventListener('new', (ev) => {\n      this.fire('addRuntime', ev.detail);\n    });\n  },\n\n  listeners: { click: 'close' },\n});\n","/*\n* Renders a fbp-graph instance into a canvas\n* Autoscales the render to fit, and exposes the scale as thumbscale, thumbrectangle, viewrectangle\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\n\nPolymer({\n  _template: html`\n    <canvas id=\"canvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n`,\n\n  is: 'the-graph-thumb',\n\n  properties: {\n    edgeColors: {\n      type: Array,\n      value() {\n        return [\n          'white',\n          'hsl(  0, 100%, 46%)',\n          'hsl( 35, 100%, 46%)',\n          'hsl( 60, 100%, 46%)',\n          'hsl(135, 100%, 46%)',\n          'hsl(160, 100%, 46%)',\n          'hsl(185, 100%, 46%)',\n          'hsl(210, 100%, 46%)',\n          'hsl(285, 100%, 46%)',\n          'hsl(310, 100%, 46%)',\n          'hsl(335, 100%, 46%)',\n        ];\n      },\n    },\n    fillStyle: {\n      type: String,\n      value: 'hsl(184, 8%, 10%)',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    lineWidth: {\n      type: Number,\n      value: 0.75,\n    },\n    listener: { value: null },\n    nodeSize: {\n      type: Number,\n      value: 60,\n    },\n    strokeStyle: {\n      type: String,\n      value: 'hsl(180, 11%, 70%)',\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { notify: true },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.thumbrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.viewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n  },\n\n  attached() {\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n    this.themeChanged();\n  },\n\n  themeChanged() {\n    const style = TheGraph.thumb.styleFromTheme(this.theme);\n    this.edgeColors = style.edgeColors;\n    this.fillStyle = style.fill;\n    this.strokeStyle = style.stroke;\n    // Redraw\n    this.redrawGraph();\n  },\n\n  redrawGraph() {\n    if (!this.graph) {\n      return;\n    }\n    const context = this.$.canvas.getContext('2d');\n    if (!context) {\n      // ???\n      setTimeout(this.redrawGraph.bind(this), 500);\n      return;\n    }\n    const properties = {\n      width: this.width,\n      height: this.height,\n      edgeColors: this.edgeColors,\n      nodeSize: this.nodeSize,\n      strokeStyle: this.strokeStyle,\n      fillStyle: this.fillStyle,\n      lineWidth: this.lineWidth,\n    };\n    const thumb = TheGraph.thumb.render(context, this.graph, properties);\n    this.thumbrectangle = thumb.rectangle;\n    this.thumbscale = thumb.scale;\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (!this.listener) {\n      this.listener = this.redrawGraph.bind(this);\n    }\n    if (oldGraph) {\n      oldGraph.removeListener('endTransaction', this.listener);\n    }\n    if (!this.graph) {\n      return;\n    }\n    this.graph.on('endTransaction', this.listener);\n    this.redrawGraph();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.redrawGraph();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.redrawGraph();\n  },\n\n  toDataURL() {\n    return this.$.canvas.toDataURL();\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\nimport './the-graph-thumb';\n\nclass NoFloProjectCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n    </style>\n    <the-graph-thumb graph=\"[[_getMainGraph(project.main)]]\" width=\"200\" height=\"120\"></the-graph-thumb>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <template is=\"dom-if\" if=\"[[project.gist]]\">\n      <li><button on-click=\"openGithub\">View Gist</button></li>\n      </template>\n      <li><button on-click=\"deleteProject\">Delete project</button></li>\n    </ul>\n    </template>\n    <h2>[[project.name]]</h2>\n    <p><span>[[project.graphs.length]]</span>&nbsp;graphs, <span>[[project.components.length]]</span>&nbsp;components</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-project-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo && !this.project.gist) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n      return;\n    }\n    if (this.project.gist) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGist');\n      }\n      window.location = `https://gist.github.com/${this.project.gist}`;\n    }\n  }\n\n  deleteProject(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.dispatchEvent(new CustomEvent('deleteProject', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _getMainGraph(main) {\n    if (!main) {\n      return null;\n    }\n    const mains = this.project.graphs.filter((graph) => {\n      if (graph.properties.id !== main) {\n        return false;\n      }\n      return true;\n    });\n    if (!mains.length) {\n      return null;\n    }\n    return mains[0];\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloProjectCard.is, NoFloProjectCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRepoCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      #repoicon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        color: hsla(185, 100%, 75%, 0.2);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-icon id=\"repoicon\" icon=\"[[getRepoIcon(project)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <li><button on-click=\"deleteRepo\">Remove from [[env.NOFLO_APP_NAME]]</button></li>\n    </ul>\n    </template>\n    <h2>[[project.repo]]</h2>\n    <template is=\"dom-if\" if=\"[[project.private]]\">\n    <p>Private repository</p>\n      <template is=\"dom-if\" if=\"[[!_isFree(user)]]\">\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!project.private]]\">\n    <p>Public repository</p>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'noflo-repo-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n      env: {\n        type: Object,\n        value() {\n          return {\n            NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          };\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n    }\n  }\n\n  deleteRepo(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteRepo');\n    }\n    this.dispatchEvent(new CustomEvent('deleteRepo', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n\n  getRepoIcon() {\n    return 'github';\n  }\n}\ncustomElements.define(NoFloRepoCard.is, NoFloRepoCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRuntimeCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n    #runtimeicon {\n      font-size: 72px;\n      position: absolute;\n      right: -8px;\n      top: 9px;\n      color: hsla(185, 100%, 75%, 0.2);\n      text-decoration: none;\n    }\n    </style>\n    <noflo-icon id=\"runtimeicon\" icon=\"[[getRuntimeIcon(runtime)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Runtime menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <li><button on-click=\"deleteRuntime\">Delete runtime</button></li>\n    </ul>\n    </template>\n    <h2>[[runtime.label]]</h2>\n    <p><span>[[_produceAddress(runtime)]]</span>. Seen <span>[[runtime.seenHoursAgo]]</span>h ago</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-runtime-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      runtime: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  deleteRuntime(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.dispatchEvent(new CustomEvent('deleteRuntime', {\n      detail: this.runtime,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.type || !runtimeInfo[runtime.type]) {\n      return 'cog';\n    }\n    let icon = 'cog';\n    Object.keys(runtimeInfo).forEach((name) => {\n      Object.keys(runtimeInfo[name].runtimetypes).forEach((runtimeType) => {\n        if (runtimeType !== runtime.type) {\n          return;\n        }\n        icon = runtimeInfo[name].runtimetypes[runtime.type].icon;\n      });\n    });\n    return icon;\n  }\n\n  _produceAddress(runtime) {\n    if (runtime.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.id}`;\n    }\n    return runtime.address;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloRuntimeCard.is, NoFloRuntimeCard);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-account';\nimport './noflo-new-project';\nimport './noflo-new-repository';\nimport './noflo-new-runtime';\nimport './noflo-project-card';\nimport './noflo-repo-card';\nimport './noflo-runtime-card';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: hsl(190, 90%, 45%);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        transition: height 1s ease-in-out;\n        display: block;\n      }\n      section {\n        display: block;\n        position: relative;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      section > h2 {\n        font-size: 17px;\n        line-height: 36px;\n        margin-top: 36px;\n        height: 36px;\n        color: white;\n        text-shadow: 0 1px 0 hsl(190, 100%, 40%);\n        text-transform: none;\n      }\n      section > h2 small {\n        font-size: 10px;\n        text-transform: uppercase;\n        color: hsl(189, 50%, 25%);\n      }\n      ul.tabs {\n        position: absolute;\n        display: inline-block;\n        top: 0px;\n        left: calc(50% - 133px);\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n      ul.projects {\n        padding: 0px;\n        margin-top: 36px;\n        margin-bottom: 36px;\n        margin-left: -18px;\n        margin-right: -18px;\n        list-style: none;\n      }\n      ul.projects li {\n        width: 216px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        border-radius: 3px;\n        margin-right: 18px;\n        margin-left: 18px;\n        margin-bottom: 36px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.projects li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.projects li.remote {\n        cursor: default;\n      }\n      section button,\n      section #cta {\n        background-color: transparent;\n        color: hsl(189, 50%, 25%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        border: none;\n        padding-left: 13px;\n        padding-right: 13px;\n        cursor: pointer;\n      }\n      ul.projects li button,\n      ul.projects li #cta {\n        display: block;\n        border: 1px solid hsl(189, 50%, 25%);\n        position: absolute;\n        right: 18px;\n        top: 36px;\n      }\n      ul.projects li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 150px;\n        text-transform: none;\n        font-size: 12px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.projects li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 150px;\n        text-transform: uppercase;\n        font-size: 10px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 11%, 50%);\n      }\n      ul.projects li a {\n        color: var(--noflo-ui-background);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-account id=\"mainaccount\" user=\"[[user]]\" theme=\"[[theme]]\"></noflo-account>\n      <section id=\"projects\">\n        <h2>Projects\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <small>[[numberOfLocalProjects(projects)]]</small>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <small>[[numberOfRemoteProjects(remoteProjects)]]</small>\n          <button on-click=\"fetchGithub\">\n            <noflo-icon id=\"fetchgithub\" icon=\"refresh\"></noflo-icon>\n          </button>\n          </template>\n        </h2>\n        <ul class=\"tabs\">\n          <li on-click=\"openLocal\" class\\$=\"[[_isSelectedView('local', projectList)]]\">On device</li>\n          <template is=\"dom-if\" if=\"[[_canGithub(user)]]\">\n          <li on-click=\"openGithub\" class\\$=\"[[_isSelectedView('github', projectList)]]\">GitHub</li>\n          </template>\n        </ul>\n        <ul class=\"projects\">\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>New project</h2>\n            <button id=\"newproject\" on-click=\"newProject\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[projects]]\" as=\"project\" filter=\"filterLocalProjects\">\n            <li on-click=\"openProject\" data-id\\$=\"[[project.id]]\">\n              <noflo-project-card project=\"[[project]]\"></noflo-project-card>\n            </li>\n          </template>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>Add a repository</h2>\n            <button id=\"newrepository\" on-click=\"newRepository\">Add</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[remoteProjects]]\" as=\"project\" filter=\"filterRemoteProjects\">\n            <li class=\"remote\" on-click=\"downloadProject\" data-repo\\$=\"[[project.repo]]\">\n              <noflo-repo-card project=\"[[project]]\"></noflo-repo-card>\n            </li>\n          </template>\n          </template>\n        </ul>\n      </section>\n    <section id=\"runtimes\">\n      <h2>\n        Runtimes <small><span>[[numberOfAvailableRuntimes(runtimes)]]</span> / <span>[[runtimes.length]]</span></small>\n        <template is=\"dom-if\" if=\"[[_canFlowhub(user)]]\">\n        <button on-click=\"fetchRuntimes\">\n          <noflo-icon id=\"fetchruntimes\" icon=\"refresh\"></noflo-icon>\n        </button>\n        </template>\n      </h2>\n      <ul class=\"projects\">\n        <li class=\"add\">\n          <h2>New runtime</h2>\n          <button on-click=\"newRuntime\">Register</button>\n        </li>\n\n        <template is=\"dom-repeat\" items=\"[[runtimes]]\" as=\"runtime\" filter=\"filterAvailableRuntimes\">\n          <li on-click=\"openRuntime\" data-id\\$=\"[[runtime.id]]\" data-protocol\\$=\"[[runtime.protocol]]\">\n            <noflo-runtime-card runtime=\"[[runtime]]\"></noflo-runtime-card>\n          </li>\n        </template>\n      </ul>\n    </section>\n    <section id=\"examples\">\n      <h2>\n        Examples\n      </h2>\n      <ul class=\"projects\">\n        <template is=\"dom-repeat\" items=\"[[_getExamples(projects, runtimes)]]\" as=\"example\">\n        <li on-click=\"openExample\" class=\"example\" data-id\\$=\"[[example.id]]\">\n          <h2>[[example.label]]</h2>\n          <p>[[example.address]]</p>\n        </li>\n        </template>\n      </ul>\n    </section>\n`,\n\n  is: 'noflo-main',\n\n  properties: {\n    help: { value: null },\n    open: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'openChanged',\n    },\n    projectList: {\n      type: String,\n      value: 'local',\n    },\n    projects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    remoteProjects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    theme: {\n      type: String,\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.openChanged();\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  openChanged() {\n    if (String(this.open) === 'true') {\n      // Make main visible\n      this.set('style.height', '100%');\n      return;\n    }\n    this.set('style.height', '0px');\n  },\n\n  openLocal(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.projectList = 'local';\n  },\n\n  openGithub(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    event.preventDefault();\n    this.projectList = 'github';\n    if (!this.remoteProjects || this.remoteProjects.length === 0) {\n      setTimeout(() => {\n        this.fetchGithub();\n      }, 1);\n    }\n  },\n\n  downloadProject(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const repo = event.currentTarget.getAttribute('data-repo');\n    const repoParts = repo.split('/');\n    const branch = 'master';\n    this.fire('downloadProject', {\n      org: repoParts[0],\n      repo: repoParts[1],\n      branch,\n    });\n    this.openLocal();\n  },\n\n  fetchGithub(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    this.fire('fetchRemote', true);\n  },\n\n  numberOfRemoteProjects(remoteProjects) {\n    return remoteProjects.filter(this.filterRemoteProjects.bind(this)).length;\n  },\n\n  filterRemoteProjects(remoteProject) {\n    if (!this.projects) {\n      return true;\n    }\n    for (let i = 0; i < this.projects.length; i += 1) {\n      if (this.projects[i].repo === remoteProject.repo) {\n        // We already have this project checked out\n        return false;\n      }\n    }\n    return true;\n  },\n\n  numberOfLocalProjects(projects) {\n    return projects.filter(this.filterLocalProjects.bind(this)).length;\n  },\n\n  filterLocalProjects(project) {\n    if (project.type === 'flowtrace-replay') {\n      return false;\n    }\n    return true;\n  },\n\n  numberOfAvailableRuntimes(runtimes) {\n    return runtimes.filter(this.filterAvailableRuntimes.bind(this)).length;\n  },\n\n  filterAvailableRuntimes(runtime) {\n    if (!runtime) {\n      return false;\n    }\n    if (!runtime.seen) {\n      // Non-persistent runtime, don't show\n      return false;\n    }\n    if (runtime.type === 'flowtrace-replay') {\n      // Flowtrace runtimes don't make sense to show\n      return false;\n    }\n    if (runtime.protocol === 'opener' && !window.opener) {\n      // Can't use opener runtimes if opener is not defined\n      return false;\n    }\n    if (typeof runtime.seen !== 'object') {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = new Date(runtime.seen);\n    }\n    const now = new Date();\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor((now - runtime.seen) / (60 * 60 * 1000));\n    return true;\n  },\n\n  _getExamples(projects, runtimes) {\n    const runtimeTypes = [];\n    // Find examples for current runtime types\n    runtimes.forEach((runtime) => {\n      if (!runtime.type) {\n        return;\n      }\n      if (runtimeTypes.indexOf(runtime.type) === -1) {\n        runtimeTypes.push(runtime.type);\n      }\n    });\n    const examples = [];\n    runtimeTypes.forEach((type) => {\n      if (!runtimeInfo[type]) {\n        return;\n      }\n      const typeExamples = runtimeInfo[type].examples;\n      if (!typeExamples) {\n        return;\n      }\n      Object.keys(typeExamples).forEach((key) => {\n        if (typeExamples[key].ssl && window.location.protocol !== 'https:') {\n          // Skip examples that require SSL when on HTTP\n          return;\n        }\n        examples.push(typeExamples[key]);\n      });\n    });\n    const seen = [];\n    return examples.filter((example) => {\n      if (seen.indexOf(example.id) !== -1) {\n        return false;\n      }\n      seen.push(example.id);\n      const local = projects.filter((project) => {\n        if (project.gist === example.id) {\n          return true;\n        }\n        return false;\n      });\n      if (!local.length) {\n        return true;\n      }\n      return false;\n    });\n  },\n\n  fetchRuntimes() {\n    if (!this._canFlowhub(this.user)) {\n      return;\n    }\n    this.fire('fetchRuntimes', true);\n  },\n\n  openProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    let project = null;\n    this.projects.forEach((p) => {\n      if (p.id === event.currentTarget.getAttribute('data-id')) {\n        project = p;\n      }\n    });\n    if (!project) {\n      return;\n    }\n    if (project.runtime) {\n      const matchingRuntime = this.runtimes.filter(this.filterAvailableRuntimes).filter((rt) => {\n        if (rt.id === project.runtime) {\n          return true;\n        }\n        return false;\n      });\n      if (!matchingRuntime.length) {\n        // Runtime for this project is not available\n        return;\n      }\n    }\n    this.fire('openProject', project);\n  },\n\n  openRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (event.currentTarget.getAttribute('data-protocol') === 'iframe') {\n      return;\n    }\n    this.fire('hash', [\n      'runtime',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  openExample(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.fire('hash', [\n      'gist',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  newProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-project');\n    dialog.projects = this.projects;\n    dialog.runtimes = this.runtimes;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const project = ev.detail;\n      const graph = new Graph('main');\n      const graphId = `${project.id}/main`;\n      graph.setProperties({\n        id: graphId,\n        project: project.id,\n        environment: { type: project.type },\n        main: true,\n      });\n      project.graphs.push(graph);\n      project.main = graphId;\n      this.fire('newgraph', graph);\n      this.fire('newproject', project);\n    });\n  },\n\n  newRepository(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-repository');\n    dialog.addEventListener('new', (ev) => {\n      const repo = ev.detail;\n      const repoParts = repo.split('/');\n      const branch = 'master';\n      this.fire('downloadProject', {\n        org: repoParts[0],\n        repo: repoParts[1],\n        branch,\n      });\n      setTimeout(() => {\n        this.openLocal();\n      }, 1);\n    });\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  newRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-runtime');\n    dialog.addEventListener('addRuntime', (ev) => {\n      this.fire('newruntime', ev.detail);\n    });\n    dialog.user = this.user;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  _isLocalProjects(projectList) {\n    return projectList === 'local';\n  },\n\n  _canGithub(user) {\n    if (user && user['github-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _canFlowhub(user) {\n    if (user && user['flowhub-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _isSelectedView(view, list) {\n    if (list === view) {\n      return 'selected';\n    }\n    return '';\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'hammerjs';\nimport TheGraph from 'the-graph';\nimport { unnamespace } from '../src/collections';\nimport './the-graph-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-graph-styles\">\n    </style>\n    <div id=\"svgcontainer\"></div>\n`,\n\n  is: 'the-graph',\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'iconsChanged',\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'animatedEdgesChanged',\n    },\n    appView: { value: null },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    autolayouter: { value: null },\n    debounceLibraryRefeshTimer: { value: null },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'displaySelectionGroupChanged',\n    },\n    editable: {\n      type: Boolean,\n      value: true,\n    },\n    graphChanges: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'errorNodesChanged',\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'forceSelectionChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    graphView: { value: null },\n    grid: {\n      type: Number,\n      value: 72,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    library: {\n      value: null,\n      notify: true,\n    },\n    maxZoom: {\n      type: Number,\n      value: 15,\n      notify: true,\n    },\n    menus: {\n      value: null,\n      notify: true,\n      observer: 'menusChanged',\n    },\n    minZoom: {\n      type: Number,\n      value: 0.15,\n      notify: true,\n    },\n    offsetX: {\n      value: 0,\n      notify: true,\n    },\n    offsetY: {\n      value: 0,\n      notify: true,\n    },\n    pan: {\n      notify: true,\n      observer: 'panChanged',\n    },\n    readonly: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    scale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedEdgesChanged',\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedNodesChanged',\n    },\n    selectedNodesHash: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'selectedNodesHashChanged',\n    },\n    snap: {\n      type: Number,\n      value: 36,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.library = {};\n    // Default pan\n    this.pan = [\n      0,\n      0,\n    ];\n    // Initializes the autolayouter\n    this.autolayouter = klayNoflo.init({\n      onSuccess: this.applyAutolayout.bind(this),\n      workerScript: 'vendor/klayjs/klay.js',\n    });\n    this.themeChanged();\n  },\n\n  themeChanged(newTheme, previousTheme) {\n    PolymerDom(this.$.svgcontainer).classList.remove(`the-graph-${previousTheme}`);\n    if (newTheme) {\n      PolymerDom(this.$.svgcontainer).classList.add(`the-graph-${newTheme}`);\n    }\n  },\n\n  graphEvents: [\n    'changeProperties',\n    'addNode',\n    'changeNode',\n    'removeNode',\n    'addEdge',\n    'changeEdge',\n    'removeEdge',\n    'addInitial',\n    'removeInitial',\n    'addGroup',\n    'removeGroup',\n    'changeGroup',\n  ],\n\n  graphRenameEvents: [\n    'renameInport',\n    'renameOutport',\n    'renameGroup',\n    'renameNode',\n  ],\n\n  graphPortEvents: [\n    'addInport',\n    'removeInport',\n    'addOutport',\n    'removeOutport',\n  ],\n\n  subscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      this.trackGraphChange = {};\n    }\n    this.graphEvents.forEach((event) => {\n      this.trackGraphChange[event] = (payload) => {\n        this.graphChanges.push({\n          event,\n          payload,\n        });\n        if (this.autolayout) {\n          this.triggerAutolayout();\n        }\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphRenameEvents.forEach((event) => {\n      this.trackGraphChange[event] = (from, to) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            from,\n            to,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphPortEvents.forEach((event) => {\n      this.trackGraphChange[event] = (pub, priv) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            public: pub,\n            node: priv.process,\n            port: priv.port,\n            metadata: priv.metadata,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n\n    // Send changeset at end of transaction\n    this.trackGraphChange.endTransaction = () => {\n      // Send full graph for storage\n      this.fire('changed', graph);\n      // Send and clear graph change log\n      if (this.graphChanges.length) {\n        if (!this.readonly) {\n          this.fire('graphChanges', this.graphChanges);\n        }\n        this.graphChanges = [];\n      }\n    };\n    this.graph.on('endTransaction', this.trackGraphChange.endTransaction);\n  },\n\n  unsubscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      return;\n    }\n    const allEvents = this.graphEvents.concat(this.graphRenameEvents, this.graphPortEvents);\n    allEvents.forEach((event) => {\n      if (!this.trackGraphChange[event]) {\n        return;\n      }\n      graph.removeListener(event, this.trackGraphChange[event]);\n      delete this.trackGraphChange[event];\n    });\n\n    if (this.trackGraphChange.endTransaction) {\n      graph.removeListener('endTransaction', this.trackGraphChange.endTransaction);\n      delete this.trackGraphChange.endTransaction;\n    }\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (oldGraph && oldGraph.removeListener) {\n      this.unsubscribeGraph(oldGraph);\n    }\n\n    if (this.appView) {\n      // Remove previous instance\n      ReactDOM.unmountComponentAtNode(this.$.svgcontainer);\n    }\n\n    if (!this.graph) {\n      return;\n    }\n\n    // Subscribe to graph changes\n    this.subscribeGraph(newGraph);\n\n    // Setup app\n    PolymerDom(this.$.svgcontainer).innerHTML = '';\n    this.appView = ReactDOM.render(TheGraph.App({\n      graph: this.graph,\n      width: this.width,\n      minZoom: this.minZoom,\n      maxZoom: this.maxZoom,\n      height: this.height,\n      library: this.library,\n      menus: this.menus,\n      editable: this.editable,\n      onEdgeSelection: this.onEdgeSelection.bind(this),\n      onNodeSelection: this.onNodeSelection.bind(this),\n      onPanScale: this.onPanScale.bind(this),\n      getMenuDef: this.getMenuDef.bind(this),\n      displaySelectionGroup: this.displaySelectionGroup,\n      forceSelection: this.forceSelection,\n      offsetY: this.offsetY,\n      offsetX: this.offsetX,\n      readonly: this.readonly,\n    }), this.$.svgcontainer);\n    this.graphView = this.appView.refs.graph;\n  },\n\n  onPanScale(x, y, scale) {\n    this.pan = [x, y];\n    this.scale = scale;\n  },\n\n  onEdgeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedEdges.length > 0) {\n        this.selectedEdges = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedEdges.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedEdges.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedEdges = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedEdges = shallowClone;\n      }\n    } else {\n      this.selectedEdges = [item];\n    }\n  },\n\n  onNodeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedNodes.length > 0) {\n        this.selectedNodes = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedNodes.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedNodes.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedNodes = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedNodes = shallowClone;\n      }\n    } else {\n      this.selectedNodes = [item];\n    }\n  },\n\n  selectedNodesChanged() {\n    this.set('selectedNodesHash', {});\n    const selectedNodesHash = {};\n    this.selectedNodes.forEach((item) => {\n      selectedNodesHash[item.id] = true;\n    });\n    this.set('selectedNodesHash', selectedNodesHash);\n    this.fire('nodes', this.selectedNodes);\n  },\n\n  selectedNodesHashChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedNodes(this.selectedNodesHash);\n  },\n\n  errorNodesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setErrorNodes(this.errorNodes);\n  },\n\n  selectedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedEdges(this.selectedEdges);\n    this.fire('edges', this.selectedEdges);\n  },\n\n  animatedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setAnimatedEdges(this.animatedEdges);\n  },\n\n  iconsChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    Object.keys(this.icons).forEach((nodeId) => {\n      this.graphView.updateIcon(nodeId, this.icons[nodeId]);\n    });\n  },\n\n  triggerAutolayout() {\n    const { graph } = this;\n    const portInfo = this.graphView ? this.graphView.portInfo : null;\n    // Calls the autolayouter\n    this.autolayouter.layout({\n      graph,\n      portInfo,\n      direction: 'RIGHT',\n      options: {\n        intCoordinates: true,\n        algorithm: 'de.cau.cs.kieler.klay.layered',\n        layoutHierarchy: true,\n        spacing: 36,\n        borderSpacing: 20,\n        edgeSpacingFactor: 0.2,\n        inLayerSpacingFactor: 2,\n        nodePlace: 'BRANDES_KOEPF',\n        nodeLayering: 'NETWORK_SIMPLEX',\n        edgeRouting: 'POLYLINE',\n        crossMin: 'LAYER_SWEEP',\n        direction: 'RIGHT',\n      },\n    });\n  },\n\n  applyAutolayout(keilerGraph) {\n    this.graph.startTransaction('autolayout');\n    TheGraph.autolayout.applyToGraph(this.graph, keilerGraph, { snap: this.snap });\n    this.graph.endTransaction('autolayout');\n    // Fit to window\n    this.triggerFit();\n  },\n\n  triggerFit() {\n    if (this.appView) {\n      this.appView.triggerFit();\n    }\n  },\n\n  widthChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ width: this.width });\n  },\n\n  heightChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ height: this.height });\n  },\n\n  rerender(options) {\n    // This is throttled with rAF internally\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.markDirty(options);\n  },\n\n  addNode(id, component, metadata) {\n    if (!this.graph) {\n      return;\n    }\n    this.graph.addNode(id, component, metadata);\n  },\n\n  getPan() {\n    if (!this.appView) {\n      return [\n        0,\n        0,\n      ];\n    }\n    return [\n      this.appView.state.x,\n      this.appView.state.y,\n    ];\n  },\n\n  panChanged() {\n    // Send pan back to React\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({\n      x: this.pan[0],\n      y: this.pan[1],\n    });\n  },\n\n  getScale() {\n    if (!this.appView) {\n      return 1;\n    }\n    return this.appView.state.scale;\n  },\n\n  displaySelectionGroupChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ displaySelectionGroup: this.displaySelectionGroup });\n  },\n\n  forceSelectionChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ forceSelection: this.forceSelection });\n  },\n\n  focusNode(node) {\n    this.appView.focusNode(node);\n  },\n\n  menusChanged() {\n    // Only if the object itself changes,\n    // otherwise builds menu from reference every time menu shown\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ menus: this.menus });\n  },\n\n  readonlyChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ readonly: this.readonly });\n  },\n\n  debounceLibraryRefesh() {\n    // Breaking the \"no debounce\" rule, this fixes #76 for subgraphs\n    if (this.debounceLibraryRefeshTimer) {\n      clearTimeout(this.debounceLibraryRefeshTimer);\n    }\n    this.debounceLibraryRefeshTimer = setTimeout(() => {\n      this.rerender({ libraryDirty: true });\n    }, 200);\n  },\n\n  registerComponent(definition, generated) {\n    const component = this.library[definition.name];\n    const def = definition;\n    if (component && generated) {\n      // Don't override real one with generated dummy\n      return;\n    }\n    this.set(`library.${definition.name}`, def);\n    // So changes are rendered\n    this.debounceLibraryRefesh();\n    // Register namespaced components also without their alias\n    if (definition.name.indexOf('/') !== -1) {\n      const unnamespaced = unnamespace(definition.name);\n      this.registerComponent({\n        ...definition,\n        name: unnamespaced,\n        unnamespaced: true,\n      }, false);\n    }\n  },\n\n  getComponent(name) {\n    return this.library[name];\n  },\n\n  toJSON() {\n    if (!this.graph) {\n      return {};\n    }\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph';\n\nPolymer({\n  _template: html`\n    <the-graph id=\"graph\" menus=\"{{menus}}\" width=\"{{width}}\" height=\"{{height}}\" pan=\"{{pan}}\" scale=\"{{scale}}\" autolayout=\"{{autolayout}}\" readonly=\"{{readonly}}\" theme=\"{{theme}}\" selected-nodes=\"{{selectedNodes}}\" error-nodes=\"{{errorNodes}}\" selected-edges=\"{{selectedEdges}}\" animated-edges=\"{{animatedEdges}}\" display-selection-group=\"{{displaySelectionGroup}}\" force-selection=\"{{forceSelection}}\" icons=\"[[icons]]\">\n    </the-graph>\n`,\n\n  is: 'the-graph-editor',\n\n  attached() {\n    this.$.graph.getMenuDef = this.getMenuDef;\n  },\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    copyNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    grid: {\n      type: Number,\n      value: 72,\n      notify: true,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    menus: { value: null },\n    notifyView: { observer: 'notifyViewChanged' },\n    onContextMenu: { notify: true },\n    pan: { observer: 'panChanged' },\n    plugins: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    readonly: { notify: true },\n    scale: {\n      type: Number,\n      value: 1,\n      observer: 'scaleChanged',\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    snap: {\n      type: Number,\n      value: 36,\n      notify: true,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.pan = [\n      0,\n      0,\n    ];\n    this.menus = TheGraph.editor.getDefaultMenus(this);\n  },\n\n  detached() {\n    Object.keys(this.plugins).forEach((name) => {\n      this.plugins[name].unregister(this);\n      delete this.plugins[name];\n    });\n  },\n\n  addPlugin(name, plugin) {\n    this.set(`plugins.${name}`, plugin);\n    plugin.register(this);\n  },\n\n  addMenu(type, options) {\n    // options: icon, label\n    this.set(`menus.${type}`, options);\n  },\n\n  addMenuCallback(type, callback) {\n    if (!this.menus[type]) {\n      return;\n    }\n    this.set(`menus.${type}.callback`, callback);\n  },\n\n  addMenuAction(type, direction, options) {\n    if (!this.menus[type]) {\n      this.set(`menus.${type}`, {});\n    }\n    const menu = this.menus[type];\n    menu[direction] = options;\n  },\n\n  getMenuDef(options) {\n    // Options: type, graph, itemKey, item\n    if (options.type && this.menus[options.type]) {\n      const defaultMenu = this.menus[options.type];\n      if (defaultMenu.callback) {\n        return defaultMenu.callback(defaultMenu, options);\n      }\n      return defaultMenu;\n    }\n    return null;\n  },\n\n  notifyViewChanged() {\n    const view = {\n      scale: this.scale,\n      pan: this.pan,\n      width: this.width,\n      height: this.height,\n    };\n    this.fire('viewchanged', view);\n  },\n\n  panChanged() {\n    this.notifyViewChanged();\n  },\n\n  scaleChanged() {\n    this.notifyViewChanged();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.notifyViewChanged();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.notifyViewChanged();\n  },\n\n  themeChanged() {\n    this.$.graph.theme = this.theme;\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      this.set('$.graph.graph', this.graph);\n      return;\n    }\n    if (typeof this.graph.addNode !== 'function') {\n      throw new Error('.graph property of the-graph-editor must be a fbp-graph instance (since the-graph 0.8)');\n    }\n    this.buildInitialLibrary(this.graph);\n    this.set('$.graph.graph', this.graph);\n  },\n\n  buildInitialLibrary(graph) {\n    /* if (Object.keys(this.$.graph.library).length !== 0) {\n      // We already have a library, skip\n      // TODO what about loading a new graph? Are we making a new editor?\n      return;\n    } */\n    const components = TheGraph.library.componentsFromGraph(graph);\n    components.forEach((component) => {\n      this.registerComponent(component, true);\n    });\n  },\n\n  registerComponent(definition, generated) {\n    this.$.graph.registerComponent(definition, generated);\n  },\n\n  libraryRefresh() {\n    this.$.graph.debounceLibraryRefesh();\n  },\n\n  rerender() {\n    this.$.graph.rerender();\n  },\n\n  triggerAutolayout() {\n    this.$.graph.triggerAutolayout();\n  },\n\n  triggerFit() {\n    this.$.graph.triggerFit();\n  },\n\n  animateEdge(edge) {\n    // Make sure unique\n    const index = this.animatedEdges.indexOf(edge);\n    if (index === -1) {\n      this.push('animatedEdges', edge);\n    }\n  },\n\n  unanimateEdge(edge) {\n    const index = this.animatedEdges.indexOf(edge);\n    if (index >= 0) {\n      this.splice('animatedEdges', index, 1);\n    }\n  },\n\n  addErrorNode(id) {\n    this.set(`errorNodes.${id}`, true);\n    this.updateErrorNodes();\n  },\n\n  removeErrorNode(id) {\n    this.set(`errorNodes.${id}`, false);\n    this.updateErrorNodes();\n  },\n\n  clearErrorNodes() {\n    this.errorNodes = {};\n    this.updateErrorNodes();\n  },\n\n  updateErrorNodes() {\n    this.$.graph.errorNodesChanged();\n  },\n\n  focusNode(node) {\n    this.$.graph.focusNode(node);\n  },\n\n  getComponent(name) {\n    return this.$.graph.getComponent(name);\n  },\n\n  getLibrary() {\n    return this.$.graph.library;\n  },\n\n  toJSON() {\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  is: 'noflo-library',\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n  },\n  addNode(component) {\n    const componentName = component.name;\n    let num = 60466176;\n    // 36^5\n    num = Math.floor(Math.random() * num);\n    const id = `${componentName}_${num.toString(36)}`;\n    // TODO fix with pan\n    const pan = this.editor.$.graph.getPan();\n    const scale = this.editor.$.graph.getScale();\n    const { graph } = this.editor;\n    graph.startTransaction('addnode');\n    const nameParts = componentName.split('/');\n    graph.addNode(id, componentName, {\n      label: nameParts[nameParts.length - 1],\n      x: Math.floor((-pan[0] + 334) / scale),\n      y: Math.floor((-pan[1] + 100) / scale),\n    });\n    // Add IIPs for default values\n    component.inports.forEach((port) => {\n      const value = port.default;\n      if (value !== undefined) {\n        graph.addInitial(value, id, port.name);\n      }\n    });\n    graph.endTransaction('addnode');\n  },\n  searchChanged() {\n    if (typeof this.search !== 'string') {\n      return;\n    }\n    if (!this.editor) {\n      return;\n    }\n    const library = this.editor.getLibrary();\n    if (!library) {\n      return;\n    }\n    const search = this.search.toLowerCase();\n    const components = Object.keys(library).map((name) => this.editor.getComponent(name));\n    const matching = components.filter((component) => {\n      if (component.unnamespaced) {\n        // Skip the non-namespaced variants from results\n        return false;\n      }\n      // First find all components matching the search\n      if (search === '') {\n        // Empty search, all components match\n        return true;\n      }\n      if (component.name.toLowerCase().indexOf(search) !== -1) {\n        // Component name matches\n        return true;\n      }\n      if (typeof component.description === 'string' && component.description.toLowerCase().indexOf(search) !== -1) {\n        // Component description matches\n        return true;\n      }\n      return false;\n    }).filter((component) => {\n      // Then filter out components we're not supposed to use\n      if (!component.subgraph) {\n        // Elementary components can always be used\n        return true;\n      }\n      const nameParts = component.name.split('/');\n      if (nameParts[0] === this.project.id || nameParts[0] === this.project.namespace) {\n        for (let i = 0; i < this.graphs.length; i += 1) {\n          if (this.graphs[i].name === nameParts[1]\n            || this.graphs[i].properties.id === nameParts[1]) {\n            // Prevent circular dependencies\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n    // timeout required because events fired by polymer that are received\n    // by graph router need to clean up before the graph receives another event\n    window.setTimeout(() => {\n      const addNode = this.addNode.bind(this);\n      this.fire('result', matching.map((component) => ({\n        label: component.name,\n        icon: component.icon || 'cog',\n        description: component.description,\n        action() {\n          addNode(component);\n        },\n      })));\n    }, 0);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Published <span>{{direction}}</span> port <span>{{publicport}}</span></h1>\n      <form>\n        <label>\n          Port name\n          <input type=\"text\" value=\"{{name::input}}\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Rename</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-exported-inspector',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    direction: {\n      type: String,\n      value: 'input',\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    privateport: {\n      value: null,\n      notify: true,\n    },\n    publicport: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.publicport;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    if (!this.name) {\n      this.canSend = false;\n      return;\n    }\n    if (this.direction === 'input' && (this.name === 'start' || this.name === 'graph')) {\n      // Reserved port names\n      this.canSend = false;\n      return;\n    }\n    this.canSend = true;\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.direction === 'input') {\n      if (this.name === 'start' || this.name === 'graph') {\n        return;\n      }\n      this.graph.renameInport(this.publicport, this.name);\n    } else {\n      this.graph.renameOutport(this.publicport, this.name);\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\nimport './noflo-icon';\n\nclass NoFloIconSelector extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: block;\n    }\n    ul.icons {\n      padding: 0px;\n      margin: 0px;\n      list-style: none;\n    }\n    ul.icons li {\n      display: inline-block;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-align: center;\n      overflow: hidden;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      transition: background-color 0.3s ease-in-out;\n      border-radius: 2px;\n      margin-right: 2px\n      margin-bottom: 2px;\n    }\n    ul.icons li.selected,\n    ul.icons li:hover {\n      background-color: hsl(190, 100%, 30%);\n      color: white;\n    }\n    </style>\n    <ul class=\"icons\">\n      <template is=\"dom-repeat\" items=\"{{icons}}\" as=\"icon\">\n        <li data-id\\$=\"[[icon]]\" class\\$=\"[[_selectedClass(icon, selected)]]\" on-click=\"selectIcon\">\n          <noflo-icon icon=\"[[icon]]\" title=\"[[icon]]\"></noflo-icon>\n        </li>\n      </template>\n    </ul>\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon-selector';\n  }\n\n  static get properties() {\n    return {\n      icons: {\n        type: Array,\n        value() {\n          return [];\n        },\n      },\n      selected: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = Object.keys(icons.getIcons());\n  }\n\n  selectIcon(event) {\n    this.selected = event.currentTarget.getAttribute('data-id');\n  }\n\n  _selectedClass(icon, selected) {\n    if (icon === selected) {\n      return 'selected';\n    }\n    return '';\n  }\n}\ncustomElements.define(NoFloIconSelector.is, NoFloIconSelector);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport './noflo-type-selector';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new graph</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Graph name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolGraph\" required=\"\">\n        </label>\n        <label>\n          Graph type\n          <select name=\"type\" value=\"{{mainGraph::input}}\">\n            <option value=\"true\" selected\\$=\"[[_isSelectedMainGraph('true', mainGraph)]]\">Main graph</option>\n            <option value=\"false\" selected\\$=\"[[_isSelectedMainGraph('false', mainGraph)]]\">Subgraph</option>\n          </select>\n        </label>\n        <label>\n          Graph description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Runtime\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-graph',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    mainGraph: {\n      type: String,\n      value: 'true',\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.project) {\n      if (!this.project.graphs || !this.project.components) {\n        return;\n      }\n      duplicates = this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newGraph');\n    }\n    const graph = new Graph(this.name);\n    graph.setProperties({\n      description: this.description,\n      project: this.project.id,\n      id: `${this.project.id}/${this.name}`,\n      icon: this.icon,\n      main: (this.mainGraph === 'true'),\n      environment: { type: this.type },\n    });\n    this.fire('new', graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _isSelectedMainGraph(value, current) {\n    return value === current;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>\n        <template is=\"dom-if\" if=\"{{group}}\">\n        <span>{{group}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{!group}}\">\n        New\n        </template>\n        group containing <span>{{nodes.length}}</span> nodes\n      </h1>\n      <form>\n        <label>\n          Group name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"processing\" required=\"\">\n        </label>\n        <label>\n          Group description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"The nodes that process things\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">\n            <template is=\"dom-if\" if=\"{{group}}\">\n            Rename\n            </template>\n            <template is=\"dom-if\" if=\"{{!group}}\">\n            Create\n            </template>\n          </button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-group-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    group: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    groupdescription: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.group;\n    this.description = this.groupdescription;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.group) {\n      if (this.name !== this.group) {\n        this.graph.renameGroup(this.group, this.name);\n      }\n      if (this.description !== this.groupdescription) {\n        this.graph.setGroupMetadata(this.group, { description: this.description });\n      }\n    } else {\n      this.graph.addGroup(this.name, this.nodes, { description: this.description });\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  is: 'the-card-stack',\n  properties: { type: { notify: true } },\n  enteredView() {\n    this.observeChanges();\n  },\n  leftView() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  observeChanges() {\n    this.observer = new MutationObserver(this.updateVisibility.bind(this));\n    this.observer.observe(this, {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n  updateVisibility() {\n    if (this.childElementCount === 0) {\n      PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './the-card-stack';\n\nPolymer({\n  _template: html`\n    <slot name=\"header\"></slot>\n    <slot></slot>\n`,\n\n  is: 'the-card',\n  properties: { type: { notify: true } },\n\n  enteredView() {\n    this.fire('show', this);\n  },\n\n  leftView() {\n    this.fire('hide', this);\n  },\n\n  addTo(parent, prepend) {\n    const stacks = parent.getElementsByTagName('the-card-stack');\n    for (let i = 0; i < stacks.length; i += 1) {\n      if (stacks[i].type === this.type) {\n        PolymerDom(stacks[i]).appendChild(this);\n        return;\n      }\n    }\n    const stack = document.createElement('the-card-stack');\n    stack.type = this.type;\n    PolymerDom(stack).appendChild(this);\n    if (prepend && parent.childElementCount > 0) {\n      PolymerDom(parent).insertBefore(stack, PolymerDom(parent).firstChild);\n      return;\n    }\n    PolymerDom(parent).appendChild(stack);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n        overflow: hidden;\n      }\n    </style>\n    <slot name=\"header\"></slot>\n    <slot></slot>\n    <slot name=\"footer\"></slot>\n`,\n\n  is: 'the-panel',\n\n  properties: {\n    automatic: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'automaticChanged',\n    },\n    edge: {\n      type: String,\n      value: 'left',\n      notify: true,\n      observer: 'edgeChanged',\n    },\n    handle: {\n      type: Number,\n      value: 0,\n      notify: true,\n      observer: 'handleChanged',\n    },\n    open: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'openChanged',\n    },\n    size: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'sizeChanged',\n    },\n  },\n\n  toggleOpen(open) {\n    this.open = open;\n    this.updateVisibility();\n  },\n\n  enteredView() {\n    this.cleanUpLocation();\n    this.automaticChanged();\n    this.updateVisibility();\n  },\n\n  leftView() {\n    this.unobserve();\n  },\n\n  edgeChanged() {\n    this.updateVisibility();\n  },\n\n  sizeChanged() {\n    this.updateVisibility();\n  },\n\n  handleChanged() {\n    this.updateVisibility();\n  },\n\n  openChanged() {\n    this.updateVisibility();\n  },\n\n  automaticChanged() {\n    if (this.automatic) {\n      this.observeChanges();\n    } else {\n      this.unobserve();\n    }\n  },\n\n  getHeader() {\n    return PolymerDom(this).querySelector('header');\n  },\n\n  getMain() {\n    return PolymerDom(this).querySelector('main');\n  },\n\n  getFooter() {\n    return PolymerDom(this).querySelector('footer');\n  },\n\n  handleClicked(event) {\n    if (this.automatic) {\n      return;\n    }\n    if (event.target !== this) {\n      return;\n    }\n    if (this.open) {\n      this.open = false;\n      return;\n    }\n    this.open = true;\n  },\n\n  observeChanges() {\n    this.observer = new MutationObserver(this.handleMutations.bind(this));\n    this.observer.observe(this.getMain(), {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n\n  unobserve() {\n    if (!this.observer) {\n      return;\n    }\n    this.observer.disconnect();\n    this.observer = null;\n  },\n\n  handleMutations() {\n    if (this.getMain().childElementCount === 0) {\n      this.open = false;\n    } else {\n      this.open = true;\n    }\n  },\n\n  getPositionDimension() {\n    return this.edge;\n  },\n\n  getSizeDimensions() {\n    switch (this.edge) {\n      case 'left':\n      case 'right':\n        return [\n          'width',\n          'height',\n        ];\n      case 'top':\n      case 'bottom':\n        return [\n          'height',\n          'width',\n        ];\n      default:\n        throw new Error(`Unknown edge ${this.edge}`);\n    }\n  },\n\n  cleanUpLocation() {\n    this.set('style.left', '');\n    this.set('style.right', '');\n    this.set('style.top', '');\n    this.set('style.bottom', '');\n  },\n\n  updateVisibility() {\n    const sizeDimensions = this.getSizeDimensions();\n    this.set(`style.${sizeDimensions[1]}`, '100%');\n    this.set(`style.${sizeDimensions[0]}`, `${this.size}px`);\n    let outside = 0;\n    if (!this.open) {\n      outside = (this.size - this.handle) * -1;\n    }\n    this.set(`style.${this.getPositionDimension()}`, `${outside}px`);\n  },\n\n  listeners: { click: 'handleClicked' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-exported-inspector';\nimport './noflo-new-graph';\nimport './noflo-group-inspector';\nimport './the-card';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      #contextsection {\n        position: fixed;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        left: 36px;\n        top: 72px;\n        width: calc(72px * 4);\n        max-height: calc(100% - 72px);\n        box-sizing: border-box;\n        display: block;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: visible;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-top: 72px;\n        top: 0px;\n        border-left-width: 1px;\n        height: 100vh;\n        padding-left: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f188';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        left: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: w-resize;\n      }\n      the-panel footer {\n        position: absolute;\n        bottom: 0px;\n        right: 0px;\n      }\n    </style>\n    <section id=\"contextsection\"></section>\n`,\n\n  is: 'noflo-context',\n\n  properties: {\n    component: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'componentChanged',\n    },\n    edge: { notify: true },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: {\n      value: null,\n      observer: 'editorChanged',\n    },\n    errors: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    help: { value: null },\n    node: { notify: true },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    readonly: { notify: true },\n    runtime: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.contextBar = this.$.contextsection;\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    // Workaround for https://github.com/Polymer/PointerEvents/issues/134\n    document.addEventListener('touchstart', () => {\n    });\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n\n  getpanel() {\n    this.fire('contextpanel', this.$.contextsection);\n  },\n\n  editorChanged() {\n    if (!this.editor) {\n      return;\n    }\n    const emptyOnReadOnly = (defaultMenu) => {\n      if (this.readonly) {\n        return {};\n      }\n      return defaultMenu;\n    };\n    this.editor.addMenuCallback('main', emptyOnReadOnly);\n    this.editor.addMenuCallback('edge', emptyOnReadOnly);\n    this.editor.addMenuCallback('node', (defaultMenu, options) => {\n      const localMenu = emptyOnReadOnly(defaultMenu, options);\n      if (!options.item.component) {\n        return localMenu;\n      }\n      if (!this.canGetSource(options.item.component)) {\n        return localMenu;\n      }\n      localMenu.n4 = {\n        icon: 'arrow-circle-o-up',\n        iconLabel: 'open',\n        action: (graph, itemKey, item) => {\n          if (typeof ga === 'function') {\n            ga('send', 'event', 'menu', 'click', 'openNode');\n          }\n          let hash = window.location.href.split('#')[1] || '';\n          if (graph === this.graphs[0] && graph.properties.id) {\n            const currentGraphId = encodeURIComponent(graph.properties.id);\n            if (hash.indexOf(currentGraphId) === -1) {\n              hash += `/${currentGraphId}`;\n            }\n          }\n          window.location.hash = `${hash}/${encodeURIComponent(item.id)}`;\n        },\n      };\n      return localMenu;\n    });\n    this.editor.addMenuCallback('nodeInport', emptyOnReadOnly);\n    this.editor.addMenuCallback('nodeOutport', emptyOnReadOnly);\n    this.editor.addMenuCallback('graphInport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'input';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('graphOutport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'output';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('group', emptyOnReadOnly);\n    this.editor.addMenuCallback('selection', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        e4: {\n          icon: 'sitemap',\n          iconLabel: 'graph',\n          action: this.subgraph.bind(this),\n        },\n        w4: {\n          icon: 'square-o',\n          iconLabel: 'group',\n          action: this.group.bind(this),\n        },\n      };\n    });\n  },\n\n  edgesChanged() {\n    this.fire('edges', this.edges);\n  },\n\n  componentChanged() {\n    if (this.component && typeof this.component === 'object' && !this.component.name) {\n      this.component = null;\n    }\n    if (this.component && typeof ga === 'function') {\n      ga('send', 'event', 'url', 'navigation', 'openComponent');\n    }\n    this.fire('component', this.component);\n  },\n\n  group(graph, itemKey, item) {\n    if (this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createGroup');\n    }\n    // See if the nodes are already part of a group\n    let group = '';\n    let description = '';\n    const selectedNodes = item.nodes;\n    selectedNodes.sort();\n    graph.groups.forEach((grp) => {\n      const grpNodes = JSON.parse(JSON.stringify(grp.nodes));\n      grpNodes.sort();\n      if (grpNodes.join(',') === selectedNodes.join(',')) {\n        group = grp.name;\n        description = grp.metadata.description;\n      }\n    });\n    const dialog = document.createElement('noflo-group-inspector');\n    dialog.group = group;\n    dialog.groupdescription = description;\n    dialog.nodes = selectedNodes;\n    dialog.graph = graph;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  subgraph(currentGraph, itemKey, item) {\n    if (!this.project || this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createSubgraph');\n    }\n    // Ask user to name the new subgraph\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.runtimes = this.runtimes;\n    dialog.type = currentGraph.properties.environment.type;\n    dialog.project = this.project;\n    dialog.mainGraph = 'false';\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (event) => {\n      // Register new subgraph\n      this.fire('newsubgraph', {\n        currentGraph,\n        subgraph: event.detail,\n        nodes: item.nodes,\n        project: this.project,\n      });\n      // Editor deselect, hide node inspectors\n      if (this.editor) {\n        this.editor.selectedNodes = [];\n      }\n    });\n  },\n\n  setHelp() {\n    // If manually triggered, show something relevant\n    if (!this.help) {\n      return;\n    }\n    this.set('help.headline', `${process.env.NOFLO_APP_TITLE} graph editor`);\n    this.set('help.text', 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n  },\n\n  showHelp(graph) {\n    if (!this.help) {\n      return;\n    }\n    this.help.show(`${process.env.NOFLO_APP_TITLE} graph editor`, 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n    graph.once('addNode', () => {\n      this.help.close();\n    });\n  },\n\n  libraryMatch(library, project) {\n    const namespace = project.namespace || project.id;\n    if (library === namespace) {\n      return true;\n    }\n    if (library === namespace.replace('noflo-')) {\n      return true;\n    }\n    return false;\n  },\n\n  canGetSource(component) {\n    const componentParts = component.split('/');\n    if (componentParts.length > 1\n      && this.project\n      && this.libraryMatch(componentParts.shift(), this.project)) {\n      // Local component, see if it is available\n      for (let i = 0; i < this.project.graphs.length; i += 1) {\n        if (this.project.graphs[i].name === componentParts[0]) {\n          return true;\n        }\n        if (this.project.graphs[i].properties.id === componentParts[0]) {\n          return true;\n        }\n      }\n      for (let i = 0; i < this.project.components.length; i += 1) {\n        if (this.project.components[i].name === componentParts[0]) {\n          return true;\n        }\n      }\n    }\n    // Otherwise we check if Runtime can get it for us\n    if (!this.runtime.definition || !this.runtime.definition.capabilities) {\n      return false;\n    }\n    if (this.runtime.definition.capabilities.indexOf('component:getsource') === -1) {\n      return false;\n    }\n    return this.runtime.status.online;\n  },\n});\n","import React from 'react';\n\nfunction TestStatus(props) {\n  const state = {\n    passed: 0,\n    failed: 0,\n    skipped: 0,\n    total: 0,\n  };\n  props.suites.forEach((suite) => {\n    suite.cases.forEach((testCase) => {\n      state.total += 1;\n      if (suite.skip || testCase.skip) {\n        state.skipped += 1;\n        return;\n      }\n      if (testCase.passed === true) {\n        state.passed += 1;\n      }\n      if (testCase.passed === false) {\n        state.failed += 1;\n      }\n    });\n  });\n  return (\n    <ul className=\"test-status\">\n      <li className=\"pass\">{state.passed}</li>\n      <li className=\"fail\">{state.failed}</li>\n      <li className=\"skip\">{state.skipped}</li>\n      <li className=\"total\">{state.total}</li>\n    </ul>\n  );\n}\n\nexport default TestStatus;\n","import React from 'react';\n\nfunction stateToClass(testCase, suite) {\n  if (testCase.skip || suite.skip) {\n    return 'skip';\n  }\n  if (testCase.passed === true) {\n    return 'pass';\n  }\n  if (testCase.passed === false) {\n    return 'fail';\n  }\n  return 'pending';\n}\n\nfunction TestStatusDetailed(props) {\n  return (\n    <ul>\n      {\n        props.suites.map((suite) => (\n          <li className=\"testsuite\">\n            <div className=\"suite-header\">\n              <label className=\"name\">{suite.name}</label>\n              <label className=\"topic\">{suite.topic}</label>\n            </div>\n            <ul>\n              {\n                suite.cases.map((testCase) => (\n                  <li className={stateToClass(testCase, suite)}>\n                    <div className=\"testcase\">\n                      <label className=\"name\">{testCase.name}</label>\n                      <label className=\"assertion\">{testCase.assertion}</label>\n                      <label className=\"error\">{testCase.error || ''}</label>\n                    </div>\n                  </li>\n                ))\n              }\n            </ul>\n          </li>\n        ))\n      }\n    </ul>\n  );\n}\n\nexport default TestStatusDetailed;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Launch noflo-browser device</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"text\" value=\"{{baseApp::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"info\">\n        <div><a id=\"runtimeLink\" href\\$=\"{{runtimeUrl}}\">Launch</a></div>\n        <div><img id=\"qrcode\" src=\"{{qrCodeUrl}}\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-browserdebug',\n\n  properties: {\n    baseApp: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser-app/main.html',\n    },\n    graph: { notify: true },\n    qrCodeUrl: {\n      type: String,\n      value: '',\n    },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const signaller = 'https://api.flowhub.io';\n    const id = uuid();\n    const address = `${signaller}#${id}`;\n    const params = `?fbp_noload=true&fbp_protocol=webrtc&fbp_address=${encodeURIComponent(address)}`;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1931',\n      // FIXME: correct\n      secret: 'my-super-secret',\n      // FIXME: correct\n      label: 'noflo-browser live debug',\n      description: 'On device debugging project',\n      graph: this.graph.properties.id,\n      protocol: 'webrtc',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n    const appDebugUrl = this.baseApp + params;\n    const qrBase = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=';\n    this.qrCodeUrl = qrBase + encodeURIComponent(appDebugUrl);\n    this.runtimeUrl = appDebugUrl;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Open noflo-browser runtime in preview area</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"url\" value=\"{{runtimeUrl::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-customiframe',\n\n  properties: {\n    graph: { notify: true },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser/everything.html',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const id = uuid();\n    // TODO: make a hash of the URL instead??\n    const params = '?fbp_noload=true&fbp_protocol=iframe';\n    const address = this.runtimeUrl + params;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1932',\n      // FIXME: correct\n      label: 'noflo-browser iframe',\n      description: 'running in iframe',\n      graph: this.graph.properties.id,\n      protocol: 'iframe',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimelib from '../src/runtime';\nimport './noflo-runtime-browserdebug';\nimport './noflo-runtime-customiframe';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      ul.runtimes {\n        padding: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n        margin-top: 18px;\n        margin-bottom: 18px;\n      }\n      ul.runtimes li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 60%);\n        color: white;\n        transition: background-color 0.3s ease-in-out;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.runtimes li.selected,\n      ul.runtimes li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Select runtime for <span>{{graph.name}}</span></h1>\n      <template is=\"dom-if\" if=\"{{available.length}}\">\n        <ul class=\"runtimes modal-content\">\n          <template is=\"dom-repeat\" items=\"{{available}}\" as=\"runtime\">\n          <li on-click=\"selectRuntime\" data-id\\$=\"{{runtime.id}}\" class\\$=\"{{runtime.type}}\">\n            <h2>{{runtime.label}}</h2>\n            <p><span>{{runtime.address}}</span>.<br>Seen <span>{{runtime.seenHoursAgo}}</span>h ago</p>\n          </li>\n          </template>\n        </ul>\n      </template>\n      <template is=\"dom-if\" if=\"{{!available.length}}\">\n        <p>No compatible runtimes available.</p>\n      </template>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graph: { notify: true },\n    component: { notify: true },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    let type;\n    if (this.component) {\n      type = runtimelib.getComponentType(this.component);\n    }\n    if (this.graph) {\n      type = runtimelib.getGraphType(this.graph);\n    }\n    if (!type) {\n      type = 'all';\n    }\n    // Insert button to launch new runtime for noflo-browser\n    const launchNewBrowserRuntime = {\n      id: 'new-browser-runtime',\n      label: 'Launch new runtime',\n      address: 'WebRTC',\n    };\n    const customIframeRuntime = {\n      id: 'custom-iframe-address',\n      label: 'Custom iframe URL',\n      address: 'myapp.html',\n    };\n    const launchImgfloHerokuRuntime = {\n      id: 'imgflo-heroku-new',\n      label: 'New imgflo app on Heroku',\n      address: 'myapp.herokuapps.com',\n    };\n    if (type === 'noflo-browser') {\n      this.push('available', launchNewBrowserRuntime);\n      this.push('available', customIframeRuntime);\n    }\n    if (type === 'imgflo') {\n      this.push('available', launchImgfloHerokuRuntime);\n    }\n    this.runtimes.forEach((rt) => {\n      this.push('available', rt);\n    });\n    this.available.forEach(this.checkRuntimeSeen.bind(this));\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  // similiar to in noflo-main.html\n  checkRuntimeSeen(runtime) {\n    if (!runtime.seen) {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = Date.now();\n    }\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor(\n      (Date.now() - new Date(runtime.seen).getTime()) / (60 * 60 * 1000),\n    );\n    if (runtime.seenHoursAgo / 24 > 31) {\n      // We haven't seen this runtime in over a month, don't show it\n      const index = this.available.indexOf(runtime);\n      this.splice('available', index, 1);\n    }\n  },\n\n  selectRuntime(event) {\n    const id = event.currentTarget.getAttribute('data-id');\n    if (id === 'new-browser-runtime') {\n      // Launch new runtime instead of connect to existing\n      this.close();\n      this.debugOnDevice();\n      return;\n    } if (id === 'custom-iframe-address') {\n      // Add new iframe runtime for given address\n      this.close();\n      this.addIframeRuntime();\n      return;\n    } if (id === 'imgflo-heroku-new') {\n      this.close();\n      this.deployHeroku('https://github.com/jonnor/imgflo');\n    }\n    this.runtimes.forEach((runtime) => {\n      if (runtime.id === id) {\n        this.fire('runtime', runtime);\n        this.close();\n      }\n    });\n  },\n\n  debugOnDevice() {\n    this.debugOnDeviceModal = document.createElement('noflo-runtime-browserdebug');\n    this.set('debugOnDeviceModal.graph', this.graph);\n    this.debugOnDeviceModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.debugOnDeviceModal);\n  },\n\n  addIframeRuntime() {\n    this.addIframeModal = document.createElement('noflo-runtime-customiframe');\n    this.set('addIframeModal.graph', this.graph);\n    this.addIframeModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.addIframeModal);\n  },\n\n  deployHeroku(template) {\n    // Send user over to Heroku\n    // The deployed runtime will then have a link which takes them back to Flowhub\n    // TODO: inform the user about this process\n    const baseUrl = 'https://dashboard.heroku.com/new?template=';\n    document.location.href = baseUrl + encodeURIComponent(template);\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatusDetailed from '../src/components/TestStatusDetailed';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #testlisting ul {\n        padding: 0px;\n      }\n      li .suite-header label.topic {\n        font-weight: bold;\n      }\n      li .suite-header label {\n        display: inline !important;\n        padding-right: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      li.testsuite {\n        margin-bottom: 1em;\n      }\n      li {\n        list-style: none;\n      }\n      li.testsuite li {\n        margin-left: 28px;\n      }\n      li label {\n        display: inline;\n        margin-top: 7px !important;\n      }\n      li label.assertion {\n        padding-left: 8px;\n      }\n      li label.error {\n        margin-bottom: 8px;\n        font-style: italic;\n        display: block;\n      }\n      li.pass {\n        color: hsl(135, 98%, 46%);\n        list-style: disc;\n      }\n      li.fail {\n        color: hsl(0, 98%, 46%);\n        list-style: square;\n      }\n      li.skip {\n        color: hsl( 60, 98%, 46%);\n        list-style: disc;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <div class=\"modal-content\">\n        <div id=\"testlisting\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-testdetails',\n\n  properties: {\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    const container = this.shadowRoot.getElementById('testlisting');\n    ReactDOM.render(TestStatusDetailed({ suites: this.suites }), container);\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatus from '../src/components/TestStatus';\nimport './noflo-runtime-selector';\nimport './noflo-runtime-testdetails';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding-left: 18px;\n        box-sizing: border-box;\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n      }\n\n      #runtime_icon {\n        position: absolute;\n        right: 8px;\n        top: 0px;\n        font-size: 72px;\n        color: hsla(185, 100%, 75%, 0.1);\n      }\n\n      #teststatus {\n        position: absolute;\n        right: 0px;\n        z-index: 1;\n        width: 100px;\n      }\n      #teststatus ul {\n        margin: 0px;\n        padding: 0px;\n      }\n      #teststatus ul li {\n        display: inline;\n        padding-left: 8px;\n        line-height: 36px;\n      }\n      #teststatus ul li.pass {\n        color: hsl(135, 98%, 46%);\n      }\n      #teststatus ul li.fail {\n        color: hsl(0, 98%, 46%);\n      }\n      #teststatus ul li.skip {\n        color: hsl( 60, 98%, 46%);\n      }\n\n      h2 {\n        font-size: 14px;\n        width: 216px;\n        font-weight: normal;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n      }\n\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text-highlight);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      #address h2 {\n        position: absolute;\n        left: 54px;\n        width: 180px;\n        top: 0px;\n        color: var(--noflo-ui-text);\n      }\n\n      #address, #address button {\n        color: #e70215;\n      }\n      .online#address, .online#address button {\n        color: #01d159;\n      }\n      #address button.clear {\n        position: absolute;\n        right: 0px;\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #runcontrol h2 {\n        position: absolute;\n        left: 54px;\n        top: 36px;\n      }\n      #runcontrol button {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #select {\n        text-align: center;\n      }\n      #select button.select {\n        width: auto;\n        height: auto;\n        background-color: hsl(190, 90%, 45%);\n        color: hsla(0, 0%, 0%, 0.98);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        margin-top: 18px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{runtime}}\">\n      <noflo-icon id=\"runtime_icon\" icon=\"{{icon}}\"></noflo-icon>\n      <div id=\"address\" class\\$=\"{{_computeOnlineClass(runtime.status.online)}}\">\n        <button title=\"Connect/Disconnect\" on-click=\"reconnect\"><noflo-icon icon=\"refresh\"></noflo-icon></button>\n        <h2>{{_produceAddress(runtime)}}</h2>\n        <button title=\"Change Runtime\" on-click=\"clearRuntime\" class=\"clear\"><noflo-icon icon=\"exchange\"></noflo-icon></button>\n      </div>\n      <div id=\"teststatus\" on-click=\"showTestDetails\"></div>\n      <div id=\"runcontrol\">\n        <template is=\"dom-if\" if=\"{{runtime.status.online}}\">\n          <template is=\"dom-if\" if=\"{{runtime.execution.running}}\">\n            <button title=\"Stop\" class=\"stop\" on-click=\"stop\"><noflo-icon icon=\"pause\"></noflo-icon></button>\n          </template>\n          <template is=\"dom-if\" if=\"{{!runtime.execution.running}}\">\n            <button title=\"Start\" class=\"start\" on-click=\"start\"><noflo-icon icon=\"play\"></noflo-icon></button>\n          </template>\n          <h2>{{runtime.execution.label}}</h2>\n        </template>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!runtime}}\">\n      <div id=\"select\">\n        <button on-click=\"selectRuntime\" class=\"select\">Select runtime</button>\n      </div>\n    </template>\n`,\n\n  is: 'noflo-runtime',\n\n  properties: {\n    icon: {\n      type: String,\n      value: 'asterisk',\n    },\n    graph: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    panel: { value: null },\n    iframe: { value: null },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n  },\n\n  clearRuntime() {\n    // Disassociate old runtime with this project\n    this.runtime.definition.project = null;\n    this.fire('changed', this.runtime.definition);\n    this.set('runtime', null);\n    this.graphChanged();\n  },\n\n  graphChanged() {\n    if (this.runtimeSelector) {\n      if (PolymerDom(this.runtimeSelector).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeSelector).parentNode).removeChild(this.runtimeSelector);\n      }\n      this.runtimeSelector = null;\n    }\n  },\n\n  runtimeChanged() {\n    const runtimeIframe = this.getRuntimeIframe();\n    if (this.iframe && this.iframe !== runtimeIframe) {\n      // Hide old iframe\n      this.hideCard();\n    }\n    this.iframe = runtimeIframe;\n    if (!this.runtime) {\n      return;\n    }\n    this.set('icon', this.getRuntimeIcon(this.runtime));\n    if (!this.runtime.status || !this.runtime.status.online) {\n      this.hideCard();\n    } else if (this.runtime.execution && this.runtime.execution.running) {\n      this.showCard();\n    }\n  },\n\n  start(event) {\n    event.preventDefault();\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.showCard();\n    this.fire('start', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  stop(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.fire('stop', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  reconnect(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    this.fire('reconnect', {\n      runtime: this.runtime.definition.id,\n    });\n  },\n\n  showTests(suites) {\n    this.suites = suites;\n    const container = this.shadowRoot.getElementById('teststatus');\n    ReactDOM.render(TestStatus({ suites: this.suites }), container);\n  },\n\n  showTestDetails() {\n    if (!this.suites || !this.suites.length) {\n      return;\n    }\n    const details = document.createElement('noflo-runtime-testdetails');\n    details.suites = this.suites;\n    PolymerDom(document.body).appendChild(details);\n  },\n\n  showCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'block');\n  },\n\n  hideCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'none');\n  },\n\n  getRuntimeIframe() {\n    if (!this.runtime || !this.runtime.definition) {\n      return null;\n    }\n    if (!this.runtime.definition.querySelector) {\n      return null;\n    }\n    const iframe = document.body.querySelector(this.runtime.definition.querySelector);\n    if (!iframe) {\n      return null;\n    }\n    return iframe;\n  },\n\n  setIframeVisibility(iframe, visibility) {\n    // eslint-disable-next-line no-param-reassign\n    iframe.style.display = visibility;\n  },\n\n  selectRuntime() {\n    if (!this.graph && !this.component) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.runtimeSelector = document.createElement('noflo-runtime-selector');\n    this.set('runtimeSelector.runtimes', this.runtimes);\n    this.set('runtimeSelector.graph', this.graph);\n    this.set('runtimeSelector.component', this.component);\n    this.runtimeSelector.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      if (this.graph) {\n        runtime.project = this.graph.properties.project;\n      }\n      if (this.component) {\n        runtime.project = this.component.project;\n      }\n      this.fire('changed', runtime);\n      setTimeout(() => {\n        this.fire('switchRuntime', runtime.id);\n      }, 10);\n    });\n    PolymerDom(document.body).appendChild(this.runtimeSelector);\n  },\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.definition || !runtime.definition.type) {\n      return 'cog';\n    }\n    switch (runtime.definition.type) {\n      case 'noflo-browser':\n        return 'html5';\n      case 'noflo-nodejs':\n        return 'cloud';\n      case 'noflo-gnome':\n        return 'desktop';\n      case 'microflo':\n        return 'lightbulb-o';\n      case 'javafbp':\n        return 'android';\n      case 'imgflo':\n        return 'picture-o';\n      case 'sndflo':\n        return 'music';\n      case 'flowtrace-replay':\n        return 'pause-circle';\n      default:\n        return 'cog';\n    }\n  },\n\n  _computeOnlineClass(online) {\n    return this.tokenList({ online });\n  },\n\n  _produceAddress(runtime) {\n    if (!runtime.definition) {\n      return '';\n    }\n    if (runtime.definition.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.definition.id}`;\n    }\n    return runtime.definition.address;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","/*\n\n* Wraps the-graph-thumb with a current view bounding box\n* Observes changes from attached instance of the-graph-editor\n\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph-thumb';\n\nPolymer({\n  _template: html`\n    <style>\n      #thumb, \n      #outcanvas {\n        position: absolute;\n        top: 0;\n        left: 0;\n        overflow: visible;\n      }\n      #viewrect {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 200px;\n        height: 150px;\n        border: 1px solid hsla(190, 100%, 80%, 0.4);\n        border-style: dotted;\n      }\n    </style>\n    <the-graph-thumb id=\"thumb\" graph=\"{{graph}}\" thumbrectangle=\"{{thumbrectangle}}\" width=\"{{width}}\" height=\"{{height}}\" thumbscale=\"{{thumbscale}}\" theme=\"{{theme}}\">\n    </the-graph-thumb>\n    <canvas id=\"outcanvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n    <div id=\"viewrect\"></div>\n`,\n\n  is: 'the-graph-nav',\n\n  properties: {\n    backgroundColor: {\n      type: String,\n      value: 'hsla(184, 8%, 75%, 0.9)',\n    },\n    graph: { notify: true },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n    },\n    hide: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'hideChanged',\n    },\n    outsideFill: {\n      type: String,\n      value: 'hsla(0, 0%, 0%, 0.4)',\n    },\n    theme: {\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { observer: 'thumbrectangleChanged' },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      observer: 'thumbscaleChanged',\n    },\n    view: { observer: 'viewChanged' },\n    viewrectangle: { observer: 'viewrectangleChanged' },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n    },\n  },\n\n  ready() {\n    this.viewrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.scaledviewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n    this.theme = 'dark';\n  },\n\n  attached() {\n    this.set('style.overflow', 'hidden');\n    this.set('style.cursor', 'move');\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n  },\n\n  viewChanged(_, view) {\n    if (!view) {\n      return;\n    }\n    const x = view.pan[0];\n    const y = view.pan[1];\n    this.viewrectangle = [-x, -y, view.width, view.height];\n    this.scale = view.scale;\n  },\n\n  themeChanged() {\n    const style = TheGraph.nav.calculateStyleFromTheme(this.theme);\n    this.backgroundColor = style.backgroundColor;\n    this.viewBoxBorder = style.viewBoxBorder;\n    this.viewBoxBorder2 = style.viewBoxBorder2;\n    this.outsideFill = style.outsideFill;\n    this.set('style.backgroundColor', this.backgroundColor);\n    // Redraw rectangle\n    this.viewrectangleChanged();\n  },\n\n  viewrectangleChanged() {\n    if (!this.viewrectangle || !this.viewrectangle.length) {\n      return;\n    }\n    // Canvas to grey out outside view\n    const context = this.$.outcanvas.getContext('2d');\n    const properties = {\n      width: this.width,\n      height: this.height,\n      scale: this.scale,\n      thumbscale: this.thumbscale,\n      thumbrectangle: this.thumbrectangle,\n      viewrectangle: this.viewrectangle,\n      viewBoxBorder: this.viewBoxBorder,\n      viewBoxBorder2: this.viewBoxBorder2,\n      outsideFill: this.outsideFill,\n    };\n    const nav = TheGraph.nav.render(context, this.$.viewrect, properties);\n    this.hide = nav.hide;\n  },\n\n  // this.scaledviewrectangle = [x, y, w, h];\n  hideChanged() {\n    if (this.hide) {\n      this.set('style.display', 'none');\n    } else {\n      this.set('style.display', 'block');\n    }\n  },\n\n  thumbscaleChanged() {\n    this.viewrectangleChanged();\n  },\n\n  thumbrectangleChanged() {\n    // Binding this from the-graph-thumb to know the dimensions rendered\n    const w = this.thumbrectangle[2];\n    const h = this.thumbrectangle[3];\n    this.thumbscale = w > h ? this.width / w : this.height / h;\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { Journal } from 'fbp-graph';\nimport { IDBJournalStore } from '../src/JournalStore';\nimport './the-graph-nav';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      #controls {\n        display: flex;\n        justify-content: space-between;\n        flex-direction: row;\n        position: fixed;\n        right: 0px;\n        bottom: 36px;\n        width: 288px;\n        height: 144px;\n        color: var(--noflo-ui-text-highlight);\n        box-sizing: border-box;\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px -1px;\n        border-top: 1px solid var(--noflo-ui-border);\n      }\n      #controls #buttons {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n      }\n\n      #controls button {\n        line-height: 36px;\n        border: none;\n        background-color: transparent;\n        font-size: 14px;\n        width: 36px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: pointer;\n      }\n      #controls button.disabled {\n        color: rgba(179, 222, 230, 0.2);\n      }\n    </style>\n    <div id=\"controls\">\n      <the-graph-nav id=\"nav\" width=\"252\" height=\"144\" graph=\"{{graph}}\" hide=\"{{hidenav}}\"></the-graph-nav>\n      <div id=\"buttons\">\n      <template is=\"dom-if\" if=\"{{graph}}\">\n        <button title=\"Undo\" on-click=\"undo\" class\\$=\"{{_computeClass(canUndo)}}\">\n          <noflo-icon icon=\"undo\"></noflo-icon>\n        </button>\n        <template is=\"dom-if\" if=\"{{klay}}\">\n          <button title=\"Autolayout\" class=\"autolayout\" on-click=\"autolayout\">\n            <noflo-icon icon=\"magic\"></noflo-icon>\n          </button>\n        </template>\n        <button title=\"Redo\" on-click=\"{{_computeClass2(canRedo)}}\" class\\$=\"{{_computeClass(canRedo)}}\">\n          <noflo-icon icon=\"repeat\"></noflo-icon>\n        </button>\n      </template>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-journal',\n\n  properties: {\n    canRedo: {\n      type: Boolean,\n      value: false,\n    },\n    canUndo: {\n      type: Boolean,\n      value: false,\n    },\n    db: {\n      value: null,\n      notify: true,\n      observer: 'dbChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n      observer: 'editorChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    hidenav: {\n      type: Boolean,\n      value: false,\n      observer: 'hidenavChanged',\n    },\n    klay: {\n      type: Boolean,\n      value: false,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    panel: { notify: true },\n    returnTo: { value: null },\n  },\n\n  attached() {\n    this.klay = true;\n  },\n\n  editorChanged(newEditor) {\n    if (!newEditor) {\n      return;\n    }\n    // Connect nav and editor together\n    const { nav } = this.$;\n    const editor = newEditor;\n    editor.addEventListener('viewchanged', (e) => {\n      nav.view = e.detail;\n    });\n    nav.addEventListener('panto', (e) => {\n      const pan = e.detail;\n      if (pan.x !== editor.pan[0] || pan.y !== editor.pan[1]) {\n        editor.pan[0] = pan.x;\n        editor.pan[1] = pan.y;\n      }\n    });\n    nav.addEventListener('tap', () => {\n      editor.triggerFit();\n    });\n  },\n\n  graphChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  dbChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  componentChanged() {\n    if (this.component && this.component.name) {\n      this.hidenav = true;\n    } else {\n      this.hidenav = false;\n    }\n  },\n\n  connectJournal() {\n    if (!this.graph || !this.graph.on || !this.db) {\n      return;\n    }\n    const positionedNodes = this.graph.nodes.filter((node) => {\n      if (!node.metadata) {\n        return false;\n      }\n      if (!node.metadata.x || !node.metadata.y) {\n        return false;\n      }\n      return true;\n    });\n    if (this.graph.nodes.length && !positionedNodes.length) {\n      setTimeout(() => {\n        this.autolayout();\n      }, 10);\n    }\n    if (!this.graph.properties.project || this.graph.journal || !this.db) {\n      return;\n    }\n    // Initialize persistent journal whenever needed\n    const store = new IDBJournalStore(this.graph, this.db);\n    store.init(() => {\n      this.graph.journal = new Journal(this.graph, undefined, store);\n      this.checkState();\n      this.graph.journal.store.on('transaction', () => {\n        this.checkState();\n      });\n    });\n  },\n\n  checkState() {\n    if (!this.graph || !this.graph.journal) {\n      this.canUndo = false;\n      this.canRedo = false;\n      return;\n    }\n    this.canUndo = this.graph.journal.canUndo();\n    this.canRedo = this.graph.journal.canRedo();\n  },\n\n  undo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.undo();\n    this.checkState();\n  },\n\n  redo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.redo();\n    this.checkState();\n  },\n\n  autolayout(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.klay) {\n      return;\n    }\n    this.editor.triggerAutolayout();\n  },\n\n  themeChanged(newTheme) {\n    this.$.nav.theme = newTheme;\n  },\n\n  hidenavChanged() {\n    if (this.hidenav) {\n      this.set('$.controls.style.width', '36px');\n    } else {\n      this.set('$.controls.style.width', '288px');\n    }\n  },\n\n  _computeClass(canUndo) {\n    return `undo ${this.tokenList({ disabled: !canUndo })}`;\n  },\n\n  _computeClass2(canRedo) {\n    return `redo ${this.tokenList({ disabled: !canRedo })}`;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"codemirror-styles\">\n      :host {\n        background-color: var(--noflo-ui-background);\n        overflow: hidden;\n      }\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      #code,\n      #tests {\n        display: block;\n        width: 50%;\n        height: 100%;\n        position: absolute;\n        left: 0px;\n        top: 36px;\n      }\n      #tests {\n        left: auto;\n        right: 0px;\n      }\n      #code h1,\n      #tests h1 {\n        margin: 0;\n        line-height: 36px;\n        padding-left: 36px;\n        font-size: 14px;\n        text-transform: uppercase;\n        color: var(--noflo-ui-text);\n      }\n      #code h1 {\n        text-align: right;\n      }\n    </style>\n    <section id=\"code\">\n      <h1>Implementation</h1>\n      <div id=\"code_editor\"></div>\n    </section>\n    <section id=\"tests\">\n      <h1>Tests</h1>\n      <div id=\"tests_editor\"></div>\n    </section>\n`,\n\n  is: 'noflo-component-editor',\n\n  properties: {\n    codeEditor: { value: null },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    height: {\n      value: null,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    project: { value: null },\n    runtime: { value: null },\n    spec: {\n      value: null,\n      observer: 'specChanged',\n    },\n    testsEditor: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    width: {\n      value: null,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.componentChanged();\n    const self = this;\n    this.debouncedComponentChange = _.debounce(() => {\n      if (!self.component) {\n        return;\n      }\n      self.fire('changed', self.component);\n    }, 1500);\n    this.debouncedSpecChange = _.debounce(() => {\n      if (!self.spec) {\n        return;\n      }\n      self.fire('specschanged', self.spec);\n    }, 1500);\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      this.set('style.display', 'none');\n      return;\n    }\n    this.set('spec', null);\n    if (this.project) {\n      this.project.specs.forEach((spec) => {\n        if (spec.name === this.component.name) {\n          this.set('spec', spec);\n        }\n      });\n      if (!this.spec) {\n        this.set('spec', {\n          name: this.component.name,\n          changed: false,\n          code: this.component.tests || '',\n          language: 'yaml',\n          project: this.component.project,\n          type: 'spec',\n        });\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.set('style.display', 'block');\n    PolymerDom(this.$.code_editor).innerHTML = '';\n    if (!this.component.code) {\n      this.set('component.code', this.getExampleCode());\n    }\n    const codeOptions = this.getMirrorOptions(this.component, this.component.code);\n    this.codeEditor = CodeMirror(this.$.code_editor, codeOptions);\n    this.codeEditor.on('change', () => {\n      this.set('component.code', this.codeEditor.getValue());\n      this.set('component.changed', true);\n      this.debouncedComponentChange();\n    });\n    this.setSize();\n  },\n\n  specChanged() {\n    PolymerDom(this.$.tests_editor).innerHTML = '';\n    if (!this.spec) {\n      return;\n    }\n    const testOptions = this.getMirrorOptions(this.spec, this.spec.code);\n    this.testsEditor = CodeMirror(this.$.tests_editor, testOptions);\n    this.testsEditor.on('change', () => {\n      this.set('spec.code', this.testsEditor.getValue());\n      this.set('spec.changed', true);\n      this.debouncedSpecChange();\n    });\n    this.setSize();\n  },\n\n  widthChanged() {\n    this.setSize();\n  },\n\n  heightChanged() {\n    this.setSize();\n  },\n\n  getMirrorOptions(component, value) {\n    const options = {\n      lineNumbers: true,\n      value: value || '',\n      mode: this.getMirrorMode(component.language),\n      theme: this.getMirrorTheme(),\n      readOnly: component.project ? false : 'nocursor',\n    };\n    const canLint = () => false;\n    if (canLint(component.language) && !options.readOnly) {\n      options.gutters = ['CodeMirror-lint-markers'];\n      options.lint = true;\n    }\n    return options;\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript') {\n      return language;\n    } if (language === 'typescript') {\n      return 'text/typescript';\n    } if (language === 'yaml') {\n      return 'text/x-yaml';\n    } if (language === 'python') {\n      return 'text/x-python';\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  getExampleCode() {\n    let runtimeType = null;\n    if (this.runtime && this.runtime && this.runtime.definition && this.runtime.definition.type) {\n      runtimeType = this.runtime.definition.type;\n    }\n    if (!runtimeType && this.project) {\n      runtimeType = this.project.type;\n    }\n    if (!runtimeType) {\n      return '';\n    }\n    const info = runtimeInfo[runtimeType];\n    let { language } = this.component;\n    if (language === 'es6') {\n      language = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[this.component.language]) {\n      template = info.componenttemplates[this.component.language];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.component.name,\n        description: this.component.description,\n        icon: this.component.icon,\n      });\n    }\n    return template;\n  },\n\n  themeChanged() {\n    if (!this.codeEditor || !this.testsEditor) {\n      return;\n    }\n    this.codeEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  setSize() {\n    if (!this.width || !this.height) {\n      return;\n    }\n    const width = (this.width - 90) / 2;\n    const height = this.height - 102;\n    if (this.codeEditor) {\n      this.codeEditor.setSize(width, height);\n      this.codeEditor.refresh();\n    }\n    if (this.testsEditor) {\n      this.testsEditor.setSize(width, height);\n      this.testsEditor.refresh();\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <ul class=\"toolbar2right\">\n      <template is=\"dom-repeat\" items=\"{{buttons}}\" as=\"button\">\n        <li>\n          <button on-click=\"clicked\" id=\"{{button.id}}\">\n            <noflo-icon icon=\"{{button.icon}}\" fallback=\"\"></noflo-icon>\n            <span>{{button.label}}</span>\n          </button>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-menu',\n\n  properties: {\n    buttons: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  clicked(event, detail, sender) {\n    event.preventDefault();\n    this.buttons.forEach((button) => {\n      if (button.id !== sender.getAttribute('id')) {\n        return;\n      }\n      this.fire('click', button.id);\n      if (button.search) {\n        this.fire('search', button.search);\n        return;\n      }\n      button.action();\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i class=\"fa fa-cog\"></i>\n          <h2>{{result.metadata.label}}</h2>\n          <p>{{result.component}}</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-graph-results',\n\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'resultsChanged',\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  detached() {\n    this.editor = null;\n  },\n\n  resultsChanged() {\n    if (!this.editor) return;\n    if (!this.search || this.search.length < 1) {\n      this.set('editor.displaySelectionGroup', true);\n      this.set('editor.selectedNodes', []);\n    } else if (this.results) {\n      this.set('editor.displaySelectionGroup', !(this.results.length > 0));\n      this.set('editor.selectedNodes', this.results);\n    }\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result) {\n      return;\n    }\n    this.set('editor.displaySelectionGroup', true);\n    this.set('editor.selectedNodes', [result]);\n    this.editor.focusNode(result);\n    this.fire('resultclick', result);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n        font: normal normal normal 14px/1 FontAwesomeSVG;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i><noflo-icon icon=\"[[result.icon]]\" fallback=\"cog\"></noflo-icon></i>\n          <h2>[[result.label]]</h2>\n          <p>[[result.description]]</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-library-results',\n\n  properties: {\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result || !result.action) {\n      return;\n    }\n    this.fire('resultclick', result);\n    result.action();\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\n\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport runtime from '../src/runtime';\nimport './noflo-type-selector';\nimport './noflo-icon';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles codemirror-styles\">\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      textarea {\n        height: 144px;\n      }\n      .editable-title {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n      }\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      div.hidden {\n        display: none;\n      }\n      a#download {\n        position: absolute;\n        right: 36px;\n        top: 36px;\n        width: 36px;\n        display: block;\n        height: 36px;\n        line-height: 36px;\n        background-color: rgb(0, 127, 153);\n        text-align: center;\n        border-radius: 6px;\n        color: white;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n      ul.tabs {\n        display: block;\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n        text-align: center;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <input type=\"text\" on-keydown=\"checkUpdateName\" on-blur=\"updateName\" class=\"editable-title\" value=\"{{getName(graph)}}\">\n      <template is=\"dom-if\" if=\"{{downloadUrl}}\">\n        <a id=\"download\" download=\"{{_computeDownload(graph)}}\" href\\$=\"{{downloadUrl}}\">\n          <noflo-icon icon=\"download\"></noflo-icon>\n        </a>\n      </template>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{isMain}}\">\n      <p>Main graph in project <span>{{project.name}}</span>.</p>\n      </template>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as subgraph in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <ul class=\"tabs\">\n        <li id=\"properties\" on-click=\"setView\" class\\$=\"{{_computeClass(view)}}\">Properties</li>\n        <template is=\"dom-if\" if=\"{{_computeIf(type)}}\">\n        <li id=\"html\" on-click=\"setView\" class\\$=\"{{_computeClass5(view)}}\">HTML</li>\n        </template>\n        <template is=\"dom-if\" if=\"{{spec}}\">\n        <li id=\"tests\" on-click=\"setView\" class\\$=\"{{_computeClass6(view)}}\">Tests</li>\n        </template>\n      </ul>\n      <div class\\$=\"{{_computeClass2(view)}}\">\n      <label>\n        <span>Description</span>\n        <input type=\"text\" value=\"{{description::input}}\">\n      </label>\n      <label>\n        Icon\n        <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n      </label>\n      <label>\n        <span>Type</span>\n        <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass3(view)}}\">\n      <label id=\"html_editor\">\n        <span>Preview contents</span>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass4(view)}}\">\n      <label id=\"tests_editor\">\n        <span>Tests</span>\n      </label>\n      </div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"save\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-graph-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    downloadUrl: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    icon: {\n      type: String,\n      value: '',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    isMain: {\n      type: Boolean,\n      value: false,\n    },\n    preview: {\n      type: String,\n      value: '',\n    },\n    project: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    spec: {\n      value: null,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    type: {\n      type: String,\n      value: '',\n    },\n    view: {\n      type: String,\n      value: 'properties',\n      observer: 'viewChanged',\n    },\n  },\n\n  checkUpdateName(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateName(event);\n    }\n  },\n\n  updateName(event) {\n    this.set('graph.name', event.currentTarget.value);\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    if (!this.graph) {\n      return;\n    }\n    this.description = this.graph.properties.description;\n    this.icon = this.graph.properties.icon || 'cog';\n    this.type = runtime.getGraphType(this.graph);\n    this.view = 'properties';\n    this.inGraph = [];\n    this.isMain = false;\n\n    if (this.project) {\n      if (this.graph.properties.main) {\n        this.isMain = true;\n      } else {\n        this.project.graphs.forEach((graph) => {\n          graph.nodes.forEach((node) => {\n            if (node.component === collections.unnamespace(this.graph.name)\n            || node.component === collections.namespace(this.graph.name, this.project.namespace)) {\n              this.push('inGraph', graph);\n            }\n          });\n        });\n      }\n      this.project.specs.forEach((spec) => {\n        if (collections.unnamespace(spec.name) === collections.unnamespace(this.graph.name)) {\n          this.spec = spec;\n        }\n      });\n      if (!this.spec) {\n        this.spec = {\n          name: collections.unnamespace(this.graph.name),\n          changed: false,\n          code: '',\n          language: 'yaml',\n          project: this.project.id,\n          type: 'spec',\n        };\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.prepareHtmlEditor();\n    this.prepareTestsEditor();\n    this.prepareDownload();\n  },\n\n  prepareDownload() {\n    if (!window.Blob || !window.URL) {\n      return;\n    }\n    const graph = JSON.parse(JSON.stringify(this.graph));\n    if (graph.properties) {\n      delete graph.properties.sha;\n      delete graph.properties.changed;\n      delete graph.properties.project;\n      delete graph.properties.id;\n    }\n    const blob = new Blob([JSON.stringify(graph, null, 4)], { type: 'application/json' });\n    try {\n      this.downloadUrl = URL.createObjectURL(blob);\n    } catch (e) {\n      // Ignore URL failure\n    }\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  viewChanged() {\n    if (this.view === 'html' && this.htmlEditor) {\n      setTimeout(() => {\n        this.htmlEditor.setSize(576 - 4, 288);\n        this.htmlEditor.refresh();\n        this.htmlEditor.focus();\n      }, 1);\n    }\n    if (this.view === 'tests' && this.testsEditor) {\n      setTimeout(() => {\n        this.testsEditor.setSize(576 - 4, 288);\n        this.testsEditor.refresh();\n        this.testsEditor.focus();\n      }, 1);\n    }\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  themeChanged() {\n    if (!this.htmlEditor || !this.testsEditor) {\n      return;\n    }\n    this.htmlEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  prepareHtmlEditor() {\n    if (this.type !== 'noflo-browser') {\n      return;\n    }\n    this.htmlEditor = CodeMirror(this.$.html_editor, {\n      lineNumbers: true,\n      value: this.graph.properties.environment.content || '',\n      language: 'htmlmixed',\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  prepareTestsEditor() {\n    if (!this.spec) {\n      return;\n    }\n    this.testsEditor = CodeMirror(this.$.tests_editor, {\n      lineNumbers: true,\n      value: this.spec.code || '',\n      mode: this.getMirrorMode(this.spec.language),\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript' || language === 'yaml') {\n      return language;\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  save() {\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveGraphProperties');\n    }\n    const env = JSON.parse(JSON.stringify(this.graph.properties.environment));\n    if (this.htmlEditor) {\n      this.preview = this.htmlEditor.getValue();\n      env.content = this.preview;\n    }\n    if (this.testsEditor && this.spec) {\n      const specCode = this.testsEditor.getValue();\n      if (specCode !== this.spec.code) {\n        this.set('spec.code', specCode);\n        this.set('spec.changed', true);\n        this.fire('specschanged', this.spec);\n      }\n    }\n    env.type = this.type;\n    this.graph.setProperties({\n      environment: env,\n      description: this.description,\n      icon: this.icon,\n    });\n    this.close();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteGraph');\n    }\n    this.fire('delete', this.graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  setView(event) {\n    this.view = event.currentTarget.id;\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(view) {\n    return this.tokenList({ selected: view === 'properties' });\n  },\n\n  _computeIf(type) {\n    return type === 'noflo-browser';\n  },\n\n  _computeClass2(view) {\n    return this.tokenList({ hidden: view !== 'properties' });\n  },\n\n  _computeClass3(view) {\n    return this.tokenList({ hidden: view !== 'html' });\n  },\n\n  _computeClass4(view) {\n    return this.tokenList({ hidden: view !== 'tests' });\n  },\n\n  _computeDownload(graph) {\n    return `${collections.unnamespace(graph.name)}.json`;\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  _computeClass5(view) {\n    return this.tokenList({ selected: view === 'html' });\n  },\n\n  _computeClass6(view) {\n    return this.tokenList({ selected: view === 'tests' });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{getName(component)}}</span></h1>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as component in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <div class=\"toolbar\">\n          <!-- <button on-click=\"{{send}}\">Save</button> -->\n          <a on-click=\"close\">Cancel</a>\n          <button class=\"delete\" on-click=\"delete\">Delete</button>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-component-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      observer: 'componentChanged',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    errorText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    Polymer.dom(document.getElementById('container')).classList.add('blur');\n    Polymer.dom(this).classList.add('modal-content');\n    this.inGraph = [];\n    if (this.project) {\n      this.project.graphs.forEach((graph) => {\n        graph.nodes.forEach((node) => {\n          if (node.component === collections.unnamespace(this.component.name)\n            || node.component === collections.namespace(\n              this.component.name,\n              this.project.namespace,\n            )) {\n            this.push('inGraph', graph);\n          }\n        });\n      });\n    }\n  },\n\n  detached() {\n    Polymer.dom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  componentChanged() {\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteComponent');\n    }\n    this.fire('delete', this.component);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!Polymer.dom(this).parentNode) {\n      return;\n    }\n    Polymer.dom(Polymer.dom(this).parentNode).removeChild(this);\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  listeners: { click: 'close' },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport './noflo-menu';\nimport './noflo-search-graph-results';\nimport './noflo-search-library-results';\nimport './noflo-graph-inspector';\nimport './noflo-component-inspector';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        color: var(--noflo-ui-text);\n        font-size: 10px;\n        white-space: nowrap;\n      }\n      input {\n        background-color: var(--noflo-ui-background);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        border: none;\n        padding: 0px;\n        padding-right: 10px;\n        padding-left: 10px;\n        color: var(--noflo-ui-text);\n        width: 245px;\n        height: 36px;\n        display: inline;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        margin: 0px;\n        margin-left: -5px;\n        padding: 0px;\n        display: inline;\n        display: inline;\n\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      :host(.overlay) #breadcrumb {\n        width: calc(72px * 4);\n        display: block;\n      }\n      #breadcrumb {\n        position: relative;\n        overflow: hidden;\n        width: 0px;\n        height: 71px;\n        left: 0px;\n        top: 0px;\n        z-index: 1;\n\n        /*transition: width 0.3s ease-in-out;*/\n        display: none;\n        /*box-sizing: border-box;*/\n\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n\n      }\n      #breadcrumb noflo-icon.fa-search {\n        position: absolute;\n        line-height: 72px;\n        right: 54px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: text;\n      }\n      #breadcrumb #parentlink {\n        line-height: 72px;\n        display: inline-block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear,\n      #breadcrumb #graphinspector,\n      #breadcrumb #componentinspector,\n      #breadcrumb #readonly-lock {\n        position: absolute;\n        right: 9px;\n        top: 0px;\n        line-height: 72px;\n        display: block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear {\n        color: var(--noflo-ui-border-highlight);\n      }\n      #breadcrumb h1 {\n        display: inline-block;\n        line-height: 72px;\n        font-size: 15px;\n        margin: 0px;\n        padding: 0px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        width: 156px;\n        font-weight: normal;\n        padding-left: 18px;\n        cursor: pointer;\n      }\n      :host(.overlay) #searchinput {\n        display: none;\n      }\n      #searchinput {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        display: block;\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        border: none;\n        padding: 0px;\n        padding-right: 54px;\n        padding-left: 18px;\n        width: calc(72px * 3 - 1px);\n        height: 71px;\n        font-size: 12px;\n        display: inline;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        border-radius: none;\n      }\n      #searchinput #speech {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #searchinput.components {\n        background-color: var(--noflo-ui-text);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.components::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n        color: var(--noflo-ui-text-highlight);\n      }\n      #searchinput.processes {\n        background-color: hsl(161, 79%, 68%);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.processes::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n      }\n    </style>\n    <div id=\"breadcrumb\" on-click=\"focus\">\n      <template is=\"dom-if\" if=\"{{_canSearch(component, readonly)}}\">\n      <noflo-icon class=\"fa-search\" icon=\"search\"></noflo-icon>\n      </template>\n      <h1 title=\"Search\">\n        <template is=\"dom-if\" if=\"{{_canGoBack(project, graphs, component)}}\">\n        <button id=\"parentlink\" title=\"Back\" on-click=\"goBack\">\n          <noflo-icon icon=\"angle-left\"></noflo-icon>\n        </button>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isGraph(component, graph)}}\">\n        <span>{{getName(graph)}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isComponent(component)}}\">\n        <span>{{getName(component)}}</span>\n        </template>\n      </h1>\n      <template is=\"dom-if\" if=\"{{_canInspectGraph(component, graph, readonly)}}\">\n      <button on-click=\"showGraphInspector\" id=\"graphinspector\" title=\"Graph properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_canInspectComponent(component, graph, readonly)}}\">\n      <button on-click=\"showComponentInspector\" id=\"componentinspector\" title=\"Component properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_isReadOnly(component, graph, readonly)}}\">\n      <button title=\"Read-only\" id=\"readonly-lock\">\n        <noflo-icon icon=\"lock\"></noflo-icon>\n      </button>\n      </template>\n    </div>\n    <input id=\"searchinput\" placeholder=\"Search components\" on-keydown=\"switchSearch\" value=\"{{search::input}}\" type=\"text\" autocapitalize=\"off\" autocorrect=\"off\" x-webkit-speech=\"\">\n    <button id=\"clear\" on-click=\"clearSearch\" title=\"Clear search\">\n      <noflo-icon icon=\"times\"></noflo-icon>\n    </button>\n`,\n\n  is: 'noflo-search',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graph: { value: null },\n    graphInspector: { value: null },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'graphsChanged',\n    },\n    menuCard: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n    },\n    panel: { value: null },\n    parentPath: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    readonly: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    results: { notify: true },\n    resultsCard: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n    searchGraphResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchGraphResultsChanged',\n    },\n    searchLibrary: {\n      type: Boolean,\n      value: true,\n    },\n    searchLibraryResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchLibraryResultsChanged',\n    },\n  },\n\n  readonlyChanged() {\n    if (this.readonly) {\n      this.blur();\n    }\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      // Component nullified, ensure we recount graphs\n      this.graphsChanged();\n      return;\n    }\n    this.closeInspectors();\n  },\n\n  graphsChanged() {\n    this.closeInspectors();\n    this.blur();\n  },\n\n  closeInspectors() {\n    if (this.graphInspector) {\n      if (PolymerDom(this.graphInspector).parentNode) {\n        PolymerDom(PolymerDom(this.graphInspector).parentNode)\n          .removeChild(this.graphInspector);\n      }\n      this.graphInspector = null;\n    }\n    if (this.componentInspector) {\n      if (PolymerDom(this.componentInspector).parentNode) {\n        PolymerDom(PolymerDom(this.componentInspector).parentNode)\n          .removeChild(this.componentInspector);\n      }\n      this.componentInspector = null;\n    }\n  },\n\n  getParentPath(graphs, component) {\n    const parentPath = [];\n    if (!this.project) {\n      return parentPath;\n    }\n    const findNode = (comp, graph) => {\n      const matching = graph.nodes.filter((node) => {\n        if (node.id === comp) {\n          return true;\n        }\n        if (node.component === comp) {\n          // Direct match\n          return true;\n        }\n        if (!this.project) {\n          return false;\n        }\n        if (node.component === `${this.project.namespace}/${comp}`) {\n          return true;\n        }\n        if (node.component === `${this.project.id}/${comp}`) {\n          return true;\n        }\n        return false;\n      });\n      return matching[0];\n    };\n    graphs.forEach((graph, idx) => {\n      if (!component && idx >= graphs.length - 1) {\n        return;\n      }\n      if (idx === 0) {\n        parentPath.push(graph.properties.id);\n        return;\n      }\n      const previous = graphs[idx - 1];\n      const node = findNode(graph.name, previous);\n      if (!node) {\n        return;\n      }\n      parentPath.push(node.id);\n    });\n    return parentPath;\n  },\n\n  libraryResults(results) {\n    this.set('searchLibraryResults', []);\n    this.set('searchLibraryResults', results);\n  },\n\n  graphResults(result) {\n    this.push('searchGraphResults', result);\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n    this.blur();\n  },\n\n  focus() {\n    if (this.readonly) {\n      return;\n    }\n    if (this.component && this.component.name) {\n      return;\n    }\n    PolymerDom(this).classList.remove('overlay');\n    this.$.searchinput.focus();\n    if (this.search === null) {\n      // Show all\n      this.search = '';\n    }\n  },\n\n  blur() {\n    this.clearResults();\n    PolymerDom(this).classList.add('overlay');\n  },\n\n  toggle() {\n    if (PolymerDom(this).classList.contains('overlay')) {\n      this.focus();\n      return;\n    }\n    this.blur();\n  },\n\n  clearResults() {\n    this.set('searchGraphResults', []);\n    this.set('searchLibraryResults', []);\n  },\n\n  clearSearch() {\n    if (this.resultsCard) {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    this.search = null;\n    this.blur();\n  },\n\n  switchSearch(event) {\n    if (event.keyIdentifier === 'U+0009') {\n      event.preventDefault();\n      this.searchLibrary = !this.searchLibrary;\n      if (this.searchLibrary) {\n        PolymerDom(this.$.searchinput).classList.add('components');\n        PolymerDom(this.$.searchinput).classList.remove('processes');\n        this.set('$.searchinput.placeholder', 'Search components');\n      } else {\n        PolymerDom(this.$.searchinput).classList.add('processes');\n        PolymerDom(this.$.searchinput).classList.remove('components');\n        this.set('$.searchinput.placeholder', 'Search processes');\n      }\n      this.searchChanged();\n    }\n    event.stopPropagation();\n  },\n\n  searchChanged() {\n    this.clearResults();\n    if (this.search && typeof ga === 'function') {\n      ga('send', 'event', 'search', 'input', 'newSearch');\n    }\n    if (this.resultsCard) {\n      this.set('resultsCard.children.0.search', this.search);\n      this.set('resultsCard.search', this.search);\n    }\n    const event = this.searchLibrary ? 'search:library' : 'search:graph';\n    this.fire(event, { search: this.search });\n  },\n\n  searchLibraryResultsChanged() {\n    if (!this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-library-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchLibraryResults);\n      return;\n    }\n    if (this.searchLibraryResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-library-results');\n    results.id = 'results';\n    results.search = this.search;\n    results.results = this.searchLibraryResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-library-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  searchGraphResultsChanged() {\n    if (this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-graph-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchGraphResults);\n      return;\n    }\n    if (this.searchGraphResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-graph-results');\n    results.id = 'results';\n    results.editor = this.editor;\n    results.search = this.search;\n    results.results = this.searchGraphResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-graph-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  goBack(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    const path = this.getParentPath(this.graphs, this.component);\n    if (this.project.runtime) {\n      path.unshift(this.project.runtime);\n      path.unshift('runtime');\n      this.fire('hash', path);\n      return;\n    }\n    path.unshift(this.project.id);\n    path.unshift('project');\n    this.fire('hash', path);\n  },\n\n  showGraphInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (this.graphs.length === 0) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'graphProperties');\n    }\n    this.graphInspector = document.createElement('noflo-graph-inspector');\n    this.set('graphInspector.graph', this.graph);\n    this.set('graphInspector.project', this.project);\n    this.set('graphInspector.runtimes', this.runtimes);\n    this.set('graphInspector.theme', this.theme);\n    this.graphInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteGraph', ev.detail);\n    });\n    this.graphInspector.addEventListener('specschanged', (ev) => {\n      this.fire('specschanged', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.graphInspector);\n  },\n\n  showComponentInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'componentProperties');\n    }\n    this.componentInspector = document.createElement('noflo-component-inspector');\n    this.set('componentInspector.component', this.component);\n    this.set('componentInspector.project', this.project);\n    this.componentInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteComponent', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.componentInspector);\n  },\n\n  _canSearch(component, readonly) {\n    return !readonly && (!component || !component.name);\n  },\n\n  _canGoBack(project, graphs, component) {\n    if (!project) {\n      return false;\n    }\n    if (graphs.length > 1 || (graphs.length && component)) {\n      return true;\n    }\n    return false;\n  },\n\n  _isGraph(component, graph) {\n    return graph && (!component || !component.name);\n  },\n\n  _isComponent(component) {\n    return component && component.name;\n  },\n\n  _canInspectGraph(component, graph, readonly) {\n    return !readonly && graph && (!component || !component.name);\n  },\n\n  _canInspectComponent(component, graph, readonly) {\n    return !readonly && !graph && component && component.name;\n  },\n\n  _isReadOnly(component, graph, readonly) {\n    return readonly || (component && component.readonly) || (graph && graph.properties.readonly);\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new component</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Component name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolComponent\" required=\"\">\n        </label>\n        <label>\n          Component description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Language\n          <select name=\"type\" value=\"{{language::input}}\">\n            <template is=\"dom-repeat\" items=\"{{languages}}\" as=\"lang\">\n            <option value=\"[[lang.id]]\" selected\\$=\"[[_languageSelected(lang, language)]]\">[[lang.label]]</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-new-component',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    language: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'typeChanged',\n    },\n    languages: {\n      type: Array,\n      value() {\n        return [\n          {\n            id: 'c',\n            label: 'C',\n          },\n          {\n            id: 'c++',\n            label: 'C++',\n          },\n          {\n            id: 'coffeescript',\n            label: 'CoffeeScript',\n          },\n          {\n            id: 'es2015',\n            label: 'JavaScript (modern ES2015)',\n          },\n          {\n            id: 'javascript',\n            label: 'JavaScript',\n          },\n          {\n            id: 'typescript',\n            label: 'TypeScript',\n          },\n          {\n            id: 'python',\n            label: 'Python',\n          },\n          {\n            id: 'supercollider',\n            label: 'SuperCollider',\n          },\n          {\n            id: 'yaml',\n            label: 'YAML',\n          },\n        ];\n      },\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  typeChanged() {\n    if (!this.type) {\n      // No type defined, keep full list\n      return;\n    }\n    const runtimeI = runtimeInfo[this.type];\n    if (!runtimeI || !runtimeI.componenttemplates) {\n      // We don't know what languages the runtime supports, so keep full list\n      return;\n    }\n\n    // Filter list of languages to the ones supported by the runtime\n    const allLanguages = this.languages;\n    this.languages = allLanguages.filter((lang) => {\n      if (!runtimeI.componenttemplates[lang.id]) {\n        return false;\n      }\n      return true;\n    });\n    if (!this.languages.length) {\n      // Default back to all\n      this.languages = allLanguages;\n    }\n    // Default to first language if runtime has no preference\n    this.language = runtimeI.preferredlanguage || this.languages[0].id;\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.name) {\n      // Same regexp as used by the FBP language parser\n      this.name = this.name.replace(/[^a-zA-Z0-9]+/g, '_');\n    }\n    if (this.project) {\n      duplicates = this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newComponent');\n    }\n    this.fire('new', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      description: this.description,\n      language: this.language,\n      icon: this.icon,\n      project: this.project.id,\n      code: this.getExampleCode(this.language),\n      tests: '',\n    });\n    this.fire('newSpec', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      code: this.getExampleSpec(),\n      language: 'yaml',\n      project: this.project.id,\n      type: 'spec',\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _languageSelected(lang, selected) {\n    if (lang.id === selected) {\n      return true;\n    }\n    return false;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getExampleCode(language) {\n    if (!this.type) {\n      return '';\n    }\n    const info = runtimeInfo[this.type];\n    let lang = language;\n    if (lang === 'es6') {\n      lang = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[lang]) {\n      template = info.componenttemplates[lang];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.name,\n        description: this.description,\n        icon: this.icon,\n      });\n    }\n    return template;\n  },\n\n  getExampleSpec() {\n    let fbpSpec = '';\n    fbpSpec += `name: ${this.name} component\\n`;\n    fbpSpec += `topic: ${this.project.namespace || this.project.id}/${this.name}\\n`;\n    fbpSpec += 'cases:\\n';\n    fbpSpec += '  -\\n';\n    fbpSpec += '    name: with an input packet\\n';\n    fbpSpec += '    assertion: should send the same packet out\\n';\n    fbpSpec += '    inputs:\\n';\n    fbpSpec += '      in: true\\n';\n    fbpSpec += '    expect:\\n';\n    fbpSpec += '      out:\\n';\n    fbpSpec += '        equals: true\\n';\n    return fbpSpec;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{project.name}}</span> settings</h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <label>\n          <span>GitHub repository</span>\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/my-project\" autocapitalize=\"off\" autocorrect=\"off\" required=\"\">\n        </label>\n        <label>\n          <span>Project label</span>\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          <span>Project namespace</span>\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-cool-project\" required=\"\">\n        </label>\n        <label>\n          <span>Main graph</span>\n          <select name=\"type\" value=\"{{main::input}}\">\n            <template is=\"dom-repeat\" items=\"[[_getMainGraphs(project.graphs)]]\" as=\"graph\">\n              <option value=\"{{graph.properties.id}}\" selected\\$=\"[[_mainSelected(graph.properties.id, main)]]\">{{graph.name}}</option>\n            </template>\n          </select>\n        </label>\n        </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <a href=\"https://github.com/new\" target=\"_blank\">New Repository</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n      </div>\n`,\n\n  is: 'noflo-project-inspector',\n\n  properties: {\n    errorText: {\n      type: String,\n      value: '',\n    },\n    main: {\n      type: String,\n      value: '',\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    originalRepo: {\n      type: String,\n      value: '',\n    },\n    project: { observer: 'projectChanged' },\n    repo: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  projectChanged() {\n    this.originalRepo = this.project.repo;\n    this.repo = this.project.repo;\n    this.name = this.project.name;\n    this.namespace = this.project.namespace || this.project.id;\n    this.main = this.project.main;\n  },\n\n  updateProject() {\n    this.fire('updated', {\n      id: this.project.id,\n      name: this.name,\n      namespace: this.namespace,\n      main: this.main,\n      type: this.project.type,\n      repo: this.repo,\n    });\n    this.close();\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveProjectProperties');\n    }\n    this.updateProject();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.fire('delete', this.project);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _mainSelected(graphId, main) {\n    if (graphId === main) {\n      return true;\n    }\n    return false;\n  },\n\n  _getMainGraphs(graphs) {\n    return graphs.filter((graph) => graph.properties.main);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      table th {\n        text-align: left;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Synchronize with <noflo-icon icon=\"github\"></noflo-icon> <span>{{operation.repo}}</span></h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{statusText}}\">\n        <div>{{statusText}}</div>\n      </template>\n      <form>\n        <table>\n          <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n          <tr>\n            <th>{{file.path}}</th>\n            <td>\n              <select name=\"{{file.path}}\" on-change=\"choose\">\n                <template is=\"dom-repeat\" items=\"{{file.operations}}\" as=\"op\">\n                <option value=\"[[op]]\" selected\\$=\"[[_isSelectedOp(file, op)]]\">[[_getOperationLabel(op)]]</option>\n                </template>\n              </select>\n            </td>\n          </tr>\n          </template>\n        </table>\n        <template is=\"dom-if\" if=\"{{hasPush}}\">\n          <label>\n            <span>Commit message</span>\n            <input type=\"text\" value=\"{{message::input}}\" required=\"\">\n          </label>\n        </template>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(hasOp)}}\">Synchronize</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-project-sync',\n\n  properties: {\n    files: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'filesChanged',\n    },\n    hasOp: {\n      type: Boolean,\n      value: true,\n    },\n    hasPush: {\n      type: Boolean,\n      value: false,\n    },\n    message: {\n      type: String,\n      value: '',\n    },\n    operation: {\n      type: Object,\n      value() {\n        return {\n          repo: '',\n          push: [],\n          pull: [],\n          conflict: [],\n          noop: [],\n        };\n      },\n      observer: 'operationChanged',\n    },\n    statusText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  operationChanged() {\n    if (!this.operation.push.length\n      && !this.operation.pull.length\n      && !this.operation.conflict.length) {\n      this.statusText = 'All changes have been synchronized';\n      this.hasOp = false;\n    }\n    this.hasPush = false;\n    this.operation.conflict.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'pull', 'noop'],\n      });\n    });\n    this.operation.push.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'noop'],\n      });\n    });\n    this.operation.pull.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'pull',\n        operations: ['pull', 'noop'],\n      });\n    });\n    this.filesChanged();\n  },\n\n  filesChanged() {\n    let pushes = false;\n    let ops = false;\n    this.files.forEach((file) => {\n      if (file.operation === 'push') {\n        pushes = true;\n        ops = true;\n      }\n      if (file.operation === 'pull') {\n        ops = true;\n      }\n    });\n    this.hasPush = pushes;\n    this.hasOp = ops;\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (this.hasPush && !this.message) {\n      return;\n    }\n    const originalConflicts = this.operation.conflict;\n    const originalPushes = this.operation.push;\n    const originalPulls = this.operation.pull;\n    this.set('operation.conflict', []);\n    this.set('operation.pull', []);\n    this.set('operation.push', []);\n    const checkOps = (entry) => {\n      this.files.forEach((file) => {\n        if (file.path !== entry.path) {\n          return;\n        }\n        if (file.operation === 'push') {\n          this.push('operation.push', entry);\n        }\n        if (file.operation === 'pull') {\n          this.push('operation.pull', entry);\n        }\n      });\n    };\n    originalConflicts.forEach(checkOps);\n    originalPushes.forEach(checkOps);\n    originalPulls.forEach(checkOps);\n    this.set('operation.message', this.message);\n    this.fire('sync', this.operation);\n    this.close();\n  },\n\n  choose(event) {\n    let index = null;\n    let f = null;\n    this.files.forEach((file, idx) => {\n      if (file.path === event.currentTarget.name) {\n        index = idx;\n        f = file;\n      }\n    });\n    if (index === null) {\n      return;\n    }\n    this.splice('files', index, 1, {\n      id: event.currentTarget.name,\n      path: f.path,\n      operation: event.currentTarget.value,\n      operations: f.operations,\n    });\n    this.filesChanged();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(hasOp) {\n    return this.tokenList({ disabled: !hasOp });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  _getOperationLabel(op) {\n    if (op === 'push') {\n      return 'Push';\n    }\n    if (op === 'pull') {\n      return 'Pull';\n    }\n    if (op === 'noop') {\n      return 'Ignore';\n    }\n    return op;\n  },\n\n  _isSelectedOp(file, op) {\n    if (op === file.operation) {\n      return true;\n    }\n    return false;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './the-panel';\nimport './the-graph-thumb';\nimport './noflo-new-graph';\nimport './noflo-new-component';\nimport './noflo-project-inspector';\nimport './noflo-project-sync';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      h2 {\n        font-size: 16px;\n        line-height: 36px;\n        text-transform: none;\n        font-weight: normal;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.graphs {\n        margin-bottom: 144px;\n      }\n      ul.graphs li {\n        width: 245px;\n        height: 70px;\n        overflow: hidden;\n        float: left;\n        text-align: center;\n        background-color: hsl(190, 90%, 45%);\n        color: black;\n        border-radius: 3px;\n        margin-right: 0px;\n        margin-left: 0px;\n        margin-bottom: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.graphs li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.graphs li the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n      ul.graphs li noflo-icon {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        font-size: 36px;\n        color: black;\n      }\n      ul.graphs li button {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 13px;\n        padding-right: 13px;\n      }\n      ul.graphs li h2 {\n        position: absolute;\n        top: 18px;\n        left: 17px;\n        width: 75px;\n        text-transform: none;\n        font-size: 13px;\n        text-align: left;\n        white-space: nowrap;\n      }\n      header h1 {\n        text-align: center;\n        height: 36px;\n        line-height: 36px;\n        font-size: 17px;\n        white-space: nowrap;\n        max-width: 100%;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        padding-left: 36px;\n        box-sizing: border-box;\n      }\n      main ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      main ul li {\n        line-height: 36px;\n        min-height: 36px;\n      }\n      main ul li a {\n        color: var(--noflo-ui-text);\n        text-decoration: none;\n        display: block;\n        cursor: pointer;\n      }\n      main ul li a i {\n        float: right;\n        line-height: 36px;\n        color: var(--noflo-ui-border);\n        margin-right: 4px;\n      }\n      main {\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        max-height: calc(100% - 72px - 43px);\n        padding-left: 36px;\n      }\n      main.repo {\n        max-height: calc(100% - 72px * 2 - 43px);\n      }\n      main::-webkit-scrollbar {\n        display: none;\n      }\n      footer {\n        background-color: transparent;\n        display: block;\n        position: absolute;\n        bottom: 43px;\n        left: 0px;\n        padding-left: 36px;\n        width: 325px;\n        padding-right: 36px;\n        box-sizing: border-box;\n        overflow: hidden;\n        height: 72;\n        transition: background-color 0.3s ease-in-out;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        top: 0px;\n        border-right-width: 1px;\n        height: 100vh;\n        padding-right: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f03a';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        right: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        cursor: e-resize;\n        opacity: 1;\n      }\n      #account[open] footer {\n        background-color: hsl(190, 90%, 45%);\n      }\n      footer h1 {\n        font-size: 17px;\n        line-height: 36px;\n        text-align: center;\n        margin: 0;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      footer button {\n        background-color: white;\n        color: hsl(190, 90%, 45%);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 17px;\n        padding-right: 17px;\n        line-height: 36px;\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        cursor: pointer;\n      }\n      footer button:disabled {\n        opacity: 0.5;\n      }\n    </style>\n    <the-panel id=\"account\" edge=\"left\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <h1>{{project.name}}</h1>\n        </template>\n        <template is=\"dom-if\" if=\"{{!project}}\">\n        <h1>Live mode</h1>\n        </template>\n      </header>\n      <main class\\$=\"{{_computeClass(project)}}\">\n        <ul>\n          <li>\n            <a on-click=\"openHome\">\n              <noflo-icon icon=\"home\"></noflo-icon>\n              Home\n            </a>\n          </li>\n          <template is=\"dom-if\" if=\"{{project}}\">\n          <li>\n            <a on-click=\"openSettings\">\n              <noflo-icon icon=\"cog\"></noflo-icon>\n              Settings\n            </a>\n          </li>\n          </template>\n        </ul>\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <template is=\"dom-if\" if=\"{{_canGraph(project, runtime)}}\">\n        <h2>Graphs</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New graph</h2>\n            <button on-click=\"newGraph\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.graphs}}\" as=\"graph\">\n          <li on-click=\"openGraph\" data-id\\$=\"{{graph.properties.id}}\">\n            <the-graph-thumb graph=\"{{graph}}\" width=\"200\" height=\"120\"></the-graph-thumb>\n            <h2>{{getName(graph)}}</h2>\n          </li>\n          </template>\n        </ul>\n        </template>\n        <template is=\"dom-if\" if=\"{{_canComponent(project, runtime)}}\">\n        <h2>Components</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New component</h2>\n            <button on-click=\"newComponent\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.components}}\" as=\"component\">\n          <li on-click=\"openComponent\" data-id\\$=\"{{component.name}}\">\n            <h2>{{getName(component)}}</h2>\n            <template is=\"dom-if\" if=\"{{_computeIf(component)}}\">\n            <noflo-icon icon=\"coffee\"></noflo-icon>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf2(component)}}\">\n            <noflo-icon icon=\"code\"></noflo-icon>\n            </template>\n          </li>\n          </template>\n        </ul>\n        </template>\n        </template>\n      </main>\n      <template is=\"dom-if\" if=\"{{project.repo}}\">\n      <footer slot=\"footer\">\n        <h1 title=\"{{project.repo}}\">\n          <noflo-icon icon=\"github\"></noflo-icon>\n          <span>{{project.repo}}</span>\n        </h1>\n        <button on-click=\"synchronize\">\n          <noflo-icon icon=\"cloud-upload\"></noflo-icon>\n          <span>Synchronize</span>\n        </button>\n      </footer>\n      </template>\n    </the-panel>\n`,\n\n  is: 'noflo-project',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  runtimeChanged() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      this.canComponent = this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n  },\n\n  newGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.project = this.project;\n    dialog.runtimes = this.runtimes;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const graph = ev.detail;\n      this.push('project.graphs', graph);\n      this.fire('newgraph', graph);\n      this.gotoGraph(graph.properties.id);\n    });\n  },\n\n  newComponent(event) {\n    if (!this.canComponent) {\n      return;\n    }\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-component');\n    dialog.project = this.project;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const component = ev.detail;\n      this.push('project.components', component);\n      this.fire('newcomponent', component);\n      // TODO: Add node to graph\n      this.gotoComponent(component.name);\n    });\n    dialog.addEventListener('newSpec', (ev) => {\n      const spec = ev.detail;\n      this.push('project.specs', spec);\n      this.fire('newspec', spec);\n    });\n  },\n\n  openHome(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.$.account.toggleOpen(false);\n    this.fire('hash', []);\n  },\n\n  openSettings(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'projectProperties');\n    }\n    const dialog = document.createElement('noflo-project-inspector');\n    dialog.project = this.project;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (ev) => {\n      Object.keys(ev.detail).forEach((property) => {\n        this.set(`project.${property}`, ev.detail[property]);\n      });\n      if (this.project.repo) {\n        this.set('project.gist', null);\n        if (!this.project.branch) {\n          this.set('project.branch', 'master');\n        }\n      }\n      this.project.graphs.forEach((graph) => {\n        if (graph.properties.id === this.project.main) {\n          const { type } = graph.properties.environment;\n          this.set('project.mainGraph', graph);\n          this.set('project.type', type);\n        }\n      });\n      // Send only the data we actually want to store\n      this.fire('changed', this.project);\n    });\n    dialog.addEventListener('delete', (ev) => {\n      this.$.account.toggleOpen(false);\n      this.fire('deleteProject', ev.detail);\n    });\n  },\n\n  gotoGraph(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getGraphHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  gotoComponent(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getComponentHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  openGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openGraph');\n    }\n    this.gotoGraph(event.currentTarget.getAttribute('data-id'));\n  },\n\n  openComponent(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openComponent');\n    }\n    this.gotoComponent(event.currentTarget.getAttribute('data-id'));\n  },\n\n  synchronize(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'syncGithub');\n    }\n    this.fire('sync', {\n      repo: this.project.repo,\n      project: this.project,\n    });\n    this.$.account.toggleOpen(false);\n  },\n\n  confirm(operation) {\n    const dialog = document.createElement('noflo-project-sync');\n    dialog.operation = operation;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('sync', (event) => {\n      if (typeof ga === 'function') {\n        if (event.detail.push.length) {\n          ga('send', 'event', 'button', 'click', 'pushGithub');\n        }\n        if (event.detail.pull.length) {\n          ga('send', 'event', 'button', 'click', 'pullGithub');\n        }\n      }\n      this.fire('syncDecision', event.detail);\n    });\n  },\n\n  _computeClass(project) {\n    return project && project.repo ? 'repo' : 'norepo';\n  },\n\n  _computeIf(component) {\n    return component.language === 'coffeescript';\n  },\n\n  _computeIf2(component) {\n    return component.language !== 'coffeescript';\n  },\n\n  _canGraph() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('protocol:graph') !== -1;\n    }\n    return true;\n  },\n\n  _canComponent() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n    return true;\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import React from 'react';\nimport { unnamespace } from '../collections';\n\nfunction nodeLabel(node) {\n  return unnamespace(node).split('_')[0];\n}\n\nfunction EdgeId({ row }) {\n  let subgraph;\n  let src;\n  let connection;\n  let tgt;\n  if (row.subgraph) {\n    subgraph = <span className=\"subgraph\">{row.subgraph.map((s) => nodeLabel(s)).join(' / ')}</span>;\n  }\n  if (row.src) {\n    src = (\n      <span className=\"source\">\n        <span className=\"node-id\">{nodeLabel(row.src.node)}</span>\n      </span>\n    );\n  }\n  if (row.tgt) {\n    tgt = (\n      <span className=\"target\">\n        <span className=\"node-id\">{nodeLabel(row.tgt.node)}</span>\n      </span>\n    );\n  }\n  let routeClass = 'connection';\n  if (row.edge && row.edge.metadata && typeof row.edge.metadata.route !== 'undefined') {\n    routeClass = `connection route${row.edge.metadata.route}`;\n  }\n  connection = <span className={routeClass}></span>;\n  if (row.src && row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  } else if (row.src) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\"></span>\n      </span>\n    );\n  } else if (row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span class=\"arrow\"></span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  }\n  return (\n    <div className=\"edge\">\n      {subgraph}\n      {src}\n      {connection}\n      {tgt}\n    </div>\n  );\n}\n\nexport default EdgeId;\n","import React, { useState } from 'react';\nimport { Table } from 'react-fluid-table';\nimport EdgeId from './EdgeId';\n\nfunction PacketData({ row, multiLine = false }) {\n  if (row.type === 'openBracket' || row.type === 'closeBracket') {\n    return (\n      <span\n        className={row.type}\n        title={row.type}\n      >\n        {row.group}\n      </span>\n    );\n  }\n  switch (typeof row.data) {\n    case 'number':\n    case 'string': {\n      return row.data;\n    }\n    default: {\n      if (multiLine) {\n        return JSON.stringify(row.data, null, 2);\n      }\n      return JSON.stringify(row.data);\n    }\n  }\n}\n\nfunction PacketDetails({ row, index, isExpanded, clearSizeCache }) {\n  return (\n    <div className=\"packet-details\">\n      <dl>\n        <dt>Payload</dt>\n        <dd className=\"packet-data\">\n          <PacketData row={row} multiLine={true} />\n        </dd>\n      </dl>\n    </div>\n  );\n}\n\nfunction RuntimeEvents({ packets, width }) {\n  const idWidth = Math.min(width / 4, 238);\n  const dataWidth = width - idWidth - 36;\n  const columns = [\n    {\n      key: 'id',\n      header: 'Edge',\n      width: idWidth,\n      content: EdgeId,\n    },\n    {\n      key: 'data',\n      header: 'Data',\n      width: dataWidth,\n      content: PacketData,\n    },\n    {\n      key: '',\n      width: 36,\n      expander: true,\n    },\n  ];\n  return (\n    <Table\n      data={packets}\n      columns={columns}\n      subComponent={PacketDetails}\n      tableHeight={288}\n    />\n  );\n}\n\nexport default RuntimeEvents;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        -webkit-user-select: none;      /* disable cut copy paste */\n        -webkit-touch-callout: none;    /* disable callout, image save panel */\n        user-select: none;\n        touch-callout: none;\n\n        cursor: ew-resize;\n\n        display: inline-block;\n        text-align: center;      \n      }\n    </style>\n`,\n\n  is: 'number-scrubber',\n\n  properties: {\n    distance: {\n      type: Number,\n      value: 5,\n      notify: true,\n    },\n    max: {\n      value() {\n        return Infinity;\n      },\n      notify: true,\n    },\n    min: {\n      value() {\n        return -Infinity;\n      },\n      notify: true,\n    },\n    mod: {\n      type: Number,\n      value: 0,\n      notify: true,\n    },\n    precision: {\n      type: Number,\n      value: 1000000,\n    },\n    scrubend: { value: null },\n    scrubstart: { value: null },\n    startValue: {\n      type: Number,\n      value: 0,\n    },\n    step: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    value: {\n      value() {\n        return undefined;\n      },\n      notify: true,\n    },\n  },\n\n  onTrackStart() {\n    // Don't select\n    document.body.style.webkitUserSelect = 'none';\n    document.body.style.MozUserSelect = 'none';\n    document.body.style.msUserSelect = 'none';\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'ew-resize';\n    this.fire('scrubstart');\n    if (this.value === undefined) {\n      return;\n    }\n    this.value = parseFloat(this.value);\n    this.startValue = this.value;\n  },\n\n  onTrack(event) {\n    if (this.value === undefined) {\n      return;\n    }\n    let delta = event.dx;\n    if (this.distance > 1) {\n      delta = Math.round(delta / this.distance);\n    }\n    if (this.step !== 1) {\n      if (this.step > 1) {\n        delta = Math.round(delta / this.step) * this.step;\n      } else if (this.step > 0) {\n        delta *= this.step;\n      }\n    }\n    let newValue = this.startValue + delta;\n    if (this.mod !== 0) {\n      newValue %= this.mod;\n    }\n    if (Number.isFinite(this.min)) {\n      newValue = Math.max(newValue, this.min);\n    }\n    if (Number.isFinite(this.max)) {\n      newValue = Math.min(newValue, this.max);\n    }\n    // Stupid JS numbers\n    if (this.precision > 1) {\n      newValue = Math.round(newValue * this.precision) / this.precision;\n    }\n    if (this.value !== newValue) {\n      this.value = newValue;\n      this.fire('scrub', this.value);\n    }\n  },\n\n  onTrackEnd() {\n    // Reset select\n    document.body.style.webkitUserSelect = 'auto';\n    document.body.style.MozUserSelect = 'auto';\n    document.body.style.msUserSelect = 'auto';\n    document.body.style.userSelect = 'auto';\n    document.body.style.cursor = 'auto';\n    this.fire('scrubend');\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n\n  listeners: {\n    trackstart: 'onTrackStart',\n    track: 'onTrack',\n    trackend: 'onTrackEnd',\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './number-scrubber';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      .editable-title {\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n        border: 0px;\n        display: block;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 12px;\n        font-weight: 700;\n      }\n      .ports {\n        margin-bottom: 8px;\n      }\n      ul.ports li {\n        display: block;\n        position: relative;\n        clear: left;\n      }\n      ul.ports li label span {\n        float: left;\n        clear: left;\n        font-size: 12px;\n        padding-top: 0;\n        width: 87px;\n        line-height: 36px;\n        overflow: hidden;\n      }\n\n      ul.ports li p {\n        margin: 0px;\n        padding: 0px;\n        font-size: 10px;\n        margin-left: 87px;\n        margin-bottom: 3px;\n        line-height: 13px;\n        max-height: 26px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n\n      /* Hide spinners */\n      input[type=number]::-webkit-inner-spin-button, \n      input[type=number]::-webkit-outer-spin-button {\n        -webkit-appearance: none; \n        margin: 0; \n      }\n      input[type=number] {\n        -moz-appearance:textfield;\n      }\n\n      ul.ports li button {\n        padding: 8px;\n        height: 19px;\n        width: 19px;\n      }\n      ul.ports li label button {\n        background-color: hsl(184, 50%, 11%);\n        color: hsl(184, 40%, 89%);\n        display: block;\n        padding: 8px;\n        height: 36px;\n        width: 36px;\n      }\n      ul.ports li label button:active {\n        color: white;\n      }\n      ul.ports li label i {\n        margin:0;\n      }\n      ul.ports li span.route {\n        /* TODO: route colors */\n        background-color: white;\n        float: none;\n        display: inline-block;\n        width: 125px;\n        height: 1px;\n        padding: 0;\n      }\n      ul.ports .remove-value {\n        background-color: transparent !important;\n        opacity: .3;\n        border: none !important;\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        line-height: 36px;\n        height: 36px;\n        width: 36px;\n        text-align: center;\n        padding: 0px;\n        font-size: 12px;\n      }\n      ul.ports li span.route0  { background-color: hsl(  0,100%,100%); }\n      ul.ports li span.route1  { background-color: hsl(  0, 98%, 46%); }\n      ul.ports li span.route2  { background-color: hsl( 35, 98%, 46%); }\n      ul.ports li span.route3  { background-color: hsl( 60, 98%, 46%); }\n      ul.ports li span.route4  { background-color: hsl(135, 98%, 46%); }\n      ul.ports li span.route5  { background-color: hsl(160, 98%, 46%); }\n      ul.ports li span.route6  { background-color: hsl(185, 98%, 46%); }\n      ul.ports li span.route7  { background-color: hsl(210, 98%, 46%); }\n      ul.ports li span.route8  { background-color: hsl(285, 98%, 46%); }\n      ul.ports li span.route9  { background-color: hsl(310, 98%, 46%); }\n      ul.ports li span.route10 { background-color: hsl(335, 98%, 46%); }\n      \n      \n      ul.ports li input {\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        width: 178px;\n        height: 36px;\n        border: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 10px;\n        padding: 9px 26px 9px 36px;\n        margin: 0px;\n      }\n      ul.ports li input[type=\"checkbox\"] {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        width: 18px;\n      }\n      ul.ports li input[type=\"checkbox\"]:before {\n        display: block;\n        content: '';\n        width: 177px;\n        height: 36px;\n        margin-top: -9px;\n        margin-left: -36px;\n        background-color: hsla( 0, 0%, 20%, .2);\n        color: hsl( 0, 0%, 75%);\n        border-left: 1px solid hsla( 0, 0%, 75%, 0.1);\n      }\n\n      ul.ports li select {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        max-width: 110px;\n      }\n\n      ul.ports li  input, \n      ul.ports li  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n        color:             hsl(  0,  0%, 90%);\n      }\n      \n      ul.ports li:nth-child(even) input, \n      ul.ports li:nth-child(even) button {\n        background-color: hsla(210, 100%, 20%, .1);\n      }\n      ul.ports li:nth-child(odd) input, \n      ul.ports li:nth-child(odd) button {\n        background-color: hsla(190, 100%, 20%, .1);\n      }\n\n      ul.ports li.route0  input, \n      ul.ports li.route0  button  { \n        background-color: hsla(  0,  0%, 30%, 0.35); \n      }\n      ul.ports li.route1  input, \n      ul.ports li.route1  button  { \n        background-color: hsla(  0, 98%, 20%, 0.35); \n      }\n      ul.ports li.route2  input, \n      ul.ports li.route2  button  { \n        background-color: hsla( 35, 98%, 20%, 0.35); \n      }\n      ul.ports li.route3  input, \n      ul.ports li.route3  button  { \n        background-color: hsla( 60, 98%, 20%, 0.35); \n      }\n      ul.ports li.route4  input, \n      ul.ports li.route4  button  { \n        background-color: hsla(135, 98%, 20%, 0.35); \n      }\n      ul.ports li.route5  input, \n      ul.ports li.route5  button  { \n        background-color: hsla(160, 98%, 20%, 0.35); \n      }\n      ul.ports li.route6  input, \n      ul.ports li.route6  button  { \n        background-color: hsla(185, 98%, 20%, 0.35); \n      }\n      ul.ports li.route7  input, \n      ul.ports li.route7  button  { \n        background-color: hsla(210, 98%, 20%, 0.35); \n      }\n      ul.ports li.route8  input, \n      ul.ports li.route8  button  { \n        background-color: hsla(285, 98%, 20%, 0.35); \n      }\n      ul.ports li.route9  input, \n      ul.ports li.route9  button  { \n        background-color: hsla(310, 98%, 20%, 0.35); \n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button  { \n        background-color: hsla(335, 98%, 20%, 0.35); \n      }\n\n\n      ul.ports li.error input {\n        background-color: rgb(121, 18, 18);\n        border: 1px solid red;\n      }\n      \n      \n      ul.ports li         label > span { color: hsl(  0,  0%, 75%);}  \n      ul.ports li.route0  label > span { color: hsl(  0,  0%,100%);}  \n      ul.ports li.route1  label > span { color: hsl(  0, 98%, 46%);}\n      ul.ports li.route2  label > span { color: hsl( 35, 98%, 46%);}\n      ul.ports li.route3  label > span { color: hsl( 60, 98%, 46%);}\n      ul.ports li.route4  label > span { color: hsl(135, 98%, 46%);}\n      ul.ports li.route5  label > span { color: hsl(160, 98%, 46%);}\n      ul.ports li.route6  label > span { color: hsl(185, 98%, 46%);}\n      ul.ports li.route7  label > span { color: hsl(210, 98%, 46%);}\n      ul.ports li.route8  label > span { color: hsl(285, 98%, 46%);}\n      ul.ports li.route9  label > span { color: hsl(310, 98%, 46%);}\n      ul.ports li.route10 label > span { color: hsl(335, 98%, 46%);}\n      \n      \n\n      ul.ports  li        input, \n      ul.ports  li        button {\n        border-left: 1px solid hsla(  0,  0%, 75%, 0.5); \n      }\n      ul.ports  li.route0 input, \n      ul.ports  li.route0 button {\n        border-left: 1px solid hsla(  0,  0%,100%, 0.5); \n      }\n      ul.ports  li.route1 input, \n      ul.ports  li.route1 button {\n        border-left: 1px solid hsla(  0, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route2 input, \n      ul.ports  li.route2 button {\n        border-left: 1px solid hsla( 35, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route3 input, \n      ul.ports  li.route3 button {\n        border-left: 1px solid hsla( 60, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route4 input, \n      ul.ports  li.route4 button {\n        border-left: 1px solid hsla(135, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route5 input, \n      ul.ports  li.route5 button {\n        border-left: 1px solid hsla(160, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route6 input, \n      ul.ports  li.route6 button {\n        border-left: 1px solid hsla(185, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route7 input, \n      ul.ports  li.route7 button {\n        border-left: 1px solid hsla(210, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route8 input, \n      ul.ports  li.route8 button {\n        border-left: 1px solid hsla(285, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route9 input, \n      ul.ports  li.route9 button {\n        border-left: 1px solid hsla(310, 98%, 46%, 0.5);\n      }\n      ul.ports li.route10 input, \n      ul.ports li.route10 button {\n        border-left: 1px solid hsla(335, 98%, 46%, 0.5);\n      }\n      \n      number-scrubber,\n      ul.ports li label span:before {\n        display: inline;\n        line-height: 36px;\n        font-size: 10px;\n        float: right;\n        position: absolute;\n        left: 86px;\n        text-transform: uppercase;\n        opacity: 0.5;\n        width: 36px;\n        text-align: center;      \n      }\n\n      number-scrubber {\n        z-index: 5;\n        height: 36px;\n      }\n      \n      ul.ports li.port-type-color label span:before,\n      ul.ports li.port-type-int label span:before,\n      ul.ports li.port-type-number label span:before {\n        content: '#';\n      }\n      ul.ports li.port-type-array label span:before {\n        content: '[]';\n      }\n      ul.ports li.port-type-object label span:before {\n        content: '{}';\n      }\n      ul.ports li.port-type-string label span:before {\n        content: '\"';\n      }\n      ul.ports li.port-type-all label span:before {\n        content: '*';\n      }\n\n      section.errors header {\n        display: flex;\n        justify-content: space-between;\n      }\n      section.errors header h2 {\n        font-size: 10px;\n        font-weight: normal;\n        line-height: 36px;\n        margin-bottom: 0px;\n        padding-bottom: 0px;\n        position: static;\n        text-align: left;\n        color: var(--noflo-ui-text);\n      }\n      section.errors ul.toolbar {\n        display: inline-block;\n      }\n\n      ul#errorEvents {\n        max-height: 140px;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        clear: left;\n      }\n      ul#errorEvents li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-bottom: 0px;\n        color: hsl(185,100%,75%);\n        max-height: 56px;\n        overflow: hidden;\n        margin-bottom: 2px;\n        padding-bottom: 2px;\n        border-bottom: 1px solid hsla(190, 30%, 2%, 0.4);\n      }\n    </style>\n    <header>\n      <input type=\"text\" on-keydown=\"checkUpdateLabel\" on-blur=\"updateLabel\" class=\"editable-title\" value=\"{{label}}\">\n      <template is=\"dom-if\" if=\"{{_computeIf(node)}}\">\n        <h2>{{node.component}}</h2>\n      </template>\n    </header>\n    <ul class=\"ports\">\n      <template is=\"dom-repeat\" items=\"{{inports}}\" as=\"port\">\n        <li class\\$=\"{{_computeClass(port)}}\">\n          <label><span title=\"{{port.name}}\">{{port.label}}</span>\n\n            <template is=\"dom-if\" if=\"{{_computeIf2(port)}}\">\n              <button data-name\\$=\"{{port.name}}\" on-click=\"sendBang\">\n                <noflo-icon icon=\"bolt\"></noflo-icon>\n              </button>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf3(port)}}\">\n              <input type=\"checkbox\" data-name\\$=\"{{port.name}}\" checked=\"{{port.value}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{port.values}}\">\n              <select data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" value=\"{{port.value::input}}\" data-type\\$=\"{{port.type}}\">\n                <option></option>\n                <template is=\"dom-repeat\" items=\"{{port.values}}\" as=\"value\">\n                  <option value=\"[[value]]\" selected\\$=\"{{_computeSelected(port, value)}}\">{{value}}</option>\n                </template>\n              </select>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf4(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"1\" data-type=\"int\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"int\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf5(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"0.01\" data-type=\"number\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"number\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf6(port)}}\">\n              <input type=\"{{port.inputType}}\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" autocapitalize=\"off\" autocorrect=\"off\" on-keydown=\"checkEnter\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf7(port)}}\">\n              <input type=\"text\" data-name\\$=\"{{port.name}}\" data-type=\"string\" on-change=\"updateValue\">\n              <input type=\"file\" data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf8(port)}}\">\n              <button class=\"remove-value\" on-click=\"removeValue\" data-port\\$=\"{{port.name}}\" title=\"Clear data\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n            </template>\n\n          </label>\n          <template is=\"dom-if\" if=\"{{port.description}}\">\n          <p>{{port.description}}</p>\n          </template>\n        </li>\n      </template>\n    </ul>\n    <template is=\"dom-if\" if=\"[[errorLog.length]]\">\n    <section class=\"errors\">\n      <header>\n        <h2>Errors</h2>\n        <ul class=\"toolbar\">\n          <li>\n            <button id=\"clear\" on-click=\"clearErrors\" class=\"blue-button\" title=\"Clear Error Log\">\n              <noflo-icon icon=\"ban\"></noflo-icon>\n            </button>\n           </li>\n        </ul>\n      </header>\n      <ul id=\"errorEvents\">\n        <template is=\"dom-repeat\" items=\"[[errorLog]]\" as=\"event\">\n          <li>{{ event.payload.error }}</li>\n        </template>\n      </ul>\n    </section></template>\n`,\n\n  is: 'noflo-node-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    errorLog: {\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    inports: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    label: {\n      type: String,\n      value: '',\n    },\n    lastErrorLog: {\n      type: Number,\n      value: 0,\n    },\n    node: {\n      value: null,\n      notify: true,\n      observer: 'nodeChanged',\n    },\n    scrubbing: {\n      type: Boolean,\n      value: false,\n    },\n    showErrorLogs: {\n      type: Number,\n      value: 20,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n  },\n\n  nodeChanged() {\n    if (!this.node) {\n      return;\n    }\n    this.updatePorts();\n    this.label = this.node.metadata.label;\n  },\n\n  componentChanged() {\n    if (!this.component) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  checkUpdateLabel(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateLabel(event);\n    }\n  },\n\n  updateLabel(event) {\n    // Check if we need to make change\n    const label = event.currentTarget.value;\n    if (label === this.node.metadata.label) {\n      return;\n    }\n    this.graph.startTransaction('rename');\n    // Change id\n    let id = label;\n    if (id !== this.node.id) {\n      // Ensure unique\n      while (this.graph.getNode(id)) {\n        let num = 60466176;\n        // 36^5\n        num = Math.floor(Math.random() * num);\n        id = `${label}_${num.toString(36)}`;\n      }\n      this.graph.renameNode(this.node.id, id);\n    }\n    // Change label\n    this.graph.setNodeMetadata(id, { label });\n    this.graph.endTransaction('rename');\n  },\n\n  getPortValue(port) {\n    let value;\n    this.graph.initializers.forEach((iip) => {\n      if (iip.to.node === this.node.id && iip.to.port === port) {\n        value = iip.from.data;\n      }\n    });\n    return value;\n  },\n\n  getPortConnection(port) {\n    let connected = false;\n    let route = 'X';\n    Object.keys(this.graph.inports).forEach((name) => {\n      const inport = this.graph.inports[name];\n      if (inport.process === this.node.id && inport.port === port) {\n        connected = true;\n        route = 2;\n      }\n    });\n    this.graph.edges.forEach((edge) => {\n      if (edge.to.node === this.node.id && edge.to.port === port) {\n        connected = true;\n        route = edge.metadata.route || 0;\n      }\n    });\n    return {\n      connected,\n      route,\n    };\n  },\n\n  portToInput(port) {\n    const value = this.getPortValue(port.name);\n    const connection = this.getPortConnection(port.name);\n    const portDef = {\n      name: port.name,\n      label: port.name.replace(/(.*)\\/(.*)(_.*)\\.(.*)/, '$2.$4'),\n      class: '',\n      type: port.type,\n      description: port.description,\n      inputType: port.type,\n      value,\n      values: port.values,\n      route: connection.route,\n    };\n    switch (port.type) {\n      case 'object':\n      case 'array':\n        portDef.value = JSON.stringify(value);\n        portDef.inputType = 'text';\n        break;\n      case 'int':\n        portDef.inputType = 'number';\n        break;\n      case 'all':\n      default:\n        portDef.inputType = 'text';\n        break;\n    }\n    return portDef;\n  },\n\n  inputToPort(input) {\n    const dataType = input.getAttribute('data-type');\n    switch (dataType) {\n      case 'object':\n      case 'array':\n        try {\n          return JSON.parse(input.value);\n        } catch (e) {\n          return input.value;\n        }\n      case 'boolean':\n        return input.checked;\n      case 'number':\n        return parseFloat(input.value);\n      case 'int':\n        return parseInt(input.value, 10);\n      case 'date':\n        return new Date(input.value);\n      case 'uri':\n        return (callback) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            callback(reader.result);\n          };\n          reader.readAsDataURL(input.files[0]);\n        };\n      default:\n        return input.value;\n    }\n  },\n\n  updatePorts() {\n    this.set('inports', []);\n    if (!this.component || !this.graph) {\n      return;\n    }\n    this.component.inports.forEach((port) => {\n      const portDef = this.portToInput(port);\n      this.push('inports', portDef);\n    });\n  },\n\n  checkEnter(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      this.updateValue(event);\n    }\n  },\n\n  updateValue(event) {\n    event.preventDefault();\n    const value = this.inputToPort(event.currentTarget);\n    const name = event.currentTarget.getAttribute('data-name');\n    let port;\n    this.inports.forEach((p) => {\n      if (p.name === name) {\n        port = p;\n      }\n    });\n    if (port.type !== 'string' && event.currentTarget.value === '') {\n      // Empty string should remove number, object, array IIPs\n      this.removeValue(event);\n      return;\n    }\n    const validatePortValue = (type, val) => {\n      switch (type) {\n        case 'number':\n        case 'int':\n          return val !== '' && !Number.isNaN(val);\n        case 'object':\n          return val instanceof Object;\n        case 'array':\n          return val instanceof Array;\n        case 'date':\n          return val instanceof Date;\n        default:\n          return true;\n      }\n    };\n    const setPortValue = () => {\n      if (!this.scrubbing) {\n        this.graph.startTransaction('iipchange');\n      }\n      this.graph.removeInitial(this.node.id, name);\n      this.graph.addInitial(value, this.node.id, name);\n      if (!this.scrubbing) {\n        this.graph.endTransaction('iipchange');\n        // Force Polymer to update view\n        this.updatePorts();\n      }\n    };\n    if (validatePortValue(port.type, value)) {\n      if (typeof value === 'function') {\n        // async callback\n        value(setPortValue);\n      } else {\n        setPortValue(value);\n      }\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    } else {\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.add('error');\n    }\n  },\n\n  scrubStart(event) {\n    if (event.currentTarget.value === null) {\n      // eslint-disable-next-line no-param-reassign\n      event.currentTarget.value = 0;\n    }\n  },\n\n  // This need to work with the journal\n  // this.scrubbing = true;\n  // this.graph.startTransaction('iipscrub');\n  scrubEnd() {\n  },\n\n  // this.graph.endTransaction('iipscrub');\n  // this.scrubbing = false;\n  removeValue(event) {\n    event.preventDefault();\n    let name = event.currentTarget.getAttribute('data-port');\n    if (!name) {\n      name = event.currentTarget.getAttribute('data-name');\n    }\n    this.graph.removeInitial(this.node.id, name);\n    PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    this.updatePorts();\n  },\n\n  sendBang(event) {\n    event.preventDefault();\n    const name = event.currentTarget.getAttribute('data-name');\n    this.graph.startTransaction('bang');\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.addInitial(true, this.node.id, name);\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.endTransaction('bang');\n  },\n\n  clearErrors() {\n    this.fire('clear:runtimeevents', {\n      id: this.node.id,\n      type: 'processerror',\n    });\n  },\n\n  _computeIf(node) {\n    if (!node) {\n      return true;\n    }\n    return node.label !== node.component;\n  },\n\n  _computeClass(port) {\n    return `route route${port.route} ${port.class} port-type-${port.type}`;\n  },\n\n  _computeIf2(port) {\n    return port.type === 'bang';\n  },\n\n  _computeIf3(port) {\n    return port.type === 'boolean';\n  },\n\n  _computeIf4(port) {\n    return port.type === 'int' && !port.values;\n  },\n\n  _computeIf5(port) {\n    return port.type === 'number' && !port.values;\n  },\n\n  _computeIf6(port) {\n    return port.type !== 'bang' && port.type !== 'boolean' && port.type !== 'int' && port.type !== 'number' && port.type !== 'uri' && !port.values;\n  },\n\n  _computeIf7(port) {\n    return port.type === 'uri';\n  },\n\n  _computeIf8(port) {\n    return port.type !== 'bang' && port.value !== undefined;\n  },\n\n  _computeSelected(port, value) {\n    return port.value === value;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      :host {\n        display: block;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, hsla(0, 0%, 0%, 0) 1px);\n        background-size: calc(100% - 1px) 100%;\n        background-position: 0px;\n      }\n      h1 {\n        font-size:15px;\n      }\n      ul.toolbar2right {\n        right: 0px !important;\n      }\n      ul.routes {\n        margin: 0;\n        margin-left: 0px;\n        margin-right: 0px;\n        padding-top: 10px;\n      }\n      ul.routes li {\n        display: inline-block;\n        position: relative;\n        float: left;\n        margin: 0px;\n        height: 26px;\n      }\n      ul.routes li button:hover {\n        opacity: 1;\n      }\n      ul.routes li button {\n        opacity: 0.7;\n        display: block;\n        padding: 0px;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n        -webkit-box-sizing: border-box;\n           -mox-box-sizing: border-box;\n                box-sizing: border-box;\n        border: none;\n      }\n\n      .routes button {\n        width: 25px !important;\n        height: 20px !important;\n        background-color: hsla(  0, 98%, 100%, .8); \n        border: 1px solid hsl(  0, 98%, 46%);\n      }\n      .routes button.route0  { \n        background-color: hsla(  0, 98%, 100%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route1  { \n        background-color: hsla(  0, 98%, 46%, .8); \n        border-color:      hsl(  0, 98%, 46%); \n      }\n      .routes button.route2  { \n        background-color: hsla( 35, 98%, 46%, .8); \n        border-color:      hsl( 35, 98%, 46%); \n      }\n      .routes button.route3  { \n        background-color: hsla( 60, 98%, 46%, .8); \n        border-color:      hsl( 60, 98%, 46%); \n      }\n      .routes button.route4  { \n        background-color: hsla(135, 98%, 46%, .8); \n        border-color:      hsl(135, 98%, 46%); \n      }\n      .routes button.route5  { \n        background-color: hsla(160, 98%, 46%, .8); \n        border-color:      hsl(160, 98%, 46%);\n      }\n      .routes button.route6  { \n        background-color: hsla(185, 98%, 46%, .8); \n        border-color:      hsl(185, 98%, 46%);\n      }\n      .routes button.route7  { \n        background-color: hsla(210, 98%, 46%, .8); \n        border-color:      hsl(210, 98%, 46%);\n      }\n      .routes button.route8  { \n        background-color: hsla(285, 98%, 46%, .8); \n        border-color:      hsl(285, 98%, 46%);\n      }\n      .routes button.route9  { \n        background-color: hsla(310, 98%, 46%, .8); \n        border-color:      hsl(310, 98%, 46%);\n      }\n      .routes button.route10 { \n        background-color: hsla(335, 98%, 46%, .8); \n        border-color:      hsl(335, 98%, 46%);\n      }\n      \n      .routes  button.route0:hover  { background-color: hsla(  0, 98%, 100%, 1); }\n      .routes  button.route1:hover  { background-color: hsla(  0, 98%, 46%, 1); }\n      .routes  button.route2:hover  { background-color: hsla( 35, 98%, 46%, 1); }\n      .routes  button.route3:hover  { background-color: hsla( 60, 98%, 46%, 1); }\n      .routes  button.route4:hover  { background-color: hsla(135, 98%, 46%, 1); }\n      .routes  button.route5:hover  { background-color: hsla(160, 98%, 46%, 1); }\n      .routes  button.route6:hover  { background-color: hsla(185, 98%, 46%, 1); }\n      .routes  button.route7:hover  { background-color: hsla(210, 98%, 46%, 1); }\n      .routes  button.route8:hover  { background-color: hsla(285, 98%, 46%, 1); }\n      .routes  button.route9:hover  { background-color: hsla(310, 98%, 46%, 1); }\n      .routes button.route10:hover  { background-color: hsla(335, 98%, 46%, 1); }\n    </style>\n    <header>\n      <h1 slot=\"header\" class=\"clear\" on-click=\"clear\"><span>{{ edges.length}}</span> <template is=\"dom-if\" if=\"{{_computeIf(edges)}}\">Edges</template><template is=\"dom-if\" if=\"{{_computeIf2(edges)}}\">Edge</template></h1>\n    </header>\n    <ul class=\"toolbar toolbar2right\">\n      <template is=\"dom-if\" if=\"{{secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setUnsecure\" title=\"Set as visible\">\n            <noflo-icon icon=\"lock\"></noflo-icon>&nbsp;Secure\n          </button>\n        </li>\n      </template>\n      <template is=\"dom-if\" if=\"{{!secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setSecure\" title=\"Set as hidden\">\n            <noflo-icon icon=\"unlock\"></noflo-icon>&nbsp;Visible\n          </button>\n        </li>\n      </template>\n    </ul>\n    <ul class=\"routes\">\n      <template is=\"dom-repeat\" items=\"{{routes}}\" as=\"route\">\n        <li><button name=\"{{route}}\" on-click=\"setRoute\" class\\$=\"{{_computeClass(route)}}\"></button></li>\n      </template>\n    </ul>    \n`,\n\n  is: 'noflo-edge-menu',\n\n  properties: {\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'edgesChanged',\n    },\n    graph: { value: null },\n    routes: {\n      type: Array,\n      value() {\n        return [\n          0,\n          1,\n          2,\n          3,\n          4,\n          5,\n          6,\n          7,\n          9,\n          10,\n        ];\n      },\n    },\n    secure: {\n      type: Boolean,\n      value: false,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n    PolymerDom(this).classList.add('sticky-head');\n  },\n\n  edgesChanged() {\n    if (!this.edges.length) {\n      return;\n    }\n    this.secure = true;\n    for (let i = 0; i < this.edges.length; i += 1) {\n      if (!this.edges[i].metadata.secure) {\n        this.secure = false;\n        return;\n      }\n    }\n  },\n\n  clear(event) {\n    event.preventDefault();\n    let edge;\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n  },\n\n  remove(event) {\n    event.preventDefault();\n    while (this.edges.length) {\n      const edge = this.pop('edges');\n      if (PolymerDom(edge).parentNode) {\n        PolymerDom(PolymerDom(edge).parentNode).removeChild(edge);\n      }\n    }\n  },\n\n  setRoute(event) {\n    event.preventDefault();\n    const route = parseInt(event.currentTarget.getAttribute('name'), 10);\n    this.graph.startTransaction('changeroute');\n    this.edges.forEach((edge) => {\n      this.graph.setEdgeMetadata(\n        edge.from.node,\n        edge.from.port,\n        edge.to.node,\n        edge.to.port,\n        {\n          route,\n        },\n      );\n    });\n    this.graph.endTransaction('changeroute');\n  },\n\n  setSecure(event) {\n    event.preventDefault();\n    this.toggleSecure(true);\n  },\n\n  setUnsecure(event) {\n    event.preventDefault();\n    this.toggleSecure(false);\n  },\n\n  toggleSecure(secure) {\n    this.graph.startTransaction('changesecure');\n    this.edges.forEach((edge) => {\n      const meta = edge.metadata;\n      meta.secure = secure;\n      this.graph.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, meta);\n    });\n    this.graph.endTransaction('changesecure');\n    this.secure = secure;\n  },\n\n  _computeIf(edges) {\n    return edges.length > 1;\n  },\n\n  _computeIf2(edges) {\n    return edges.length === 1;\n  },\n\n  _computeClass(route) {\n    return `route${route}`;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport RuntimeEvents from '../src/components/RuntimeEvents';\nimport './noflo-node-inspector';\nimport './noflo-edge-menu';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-left: 7px;\n        padding-right: 7px;\n        bottom: 0px;\n        border-top-width: 1px;\n        height: 100vh;\n        padding-top: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f16c';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        top: 0px;\n        height: 36px;\n        line-height: 36px;\n        left: 50%;\n        left: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: n-resize;\n      }\n      the-panel#fixed main {\n        height: 288px;\n      }\n      the-panel#fixed main .react-fluid-table .cell {\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .react-fluid-table .cell,\n      the-panel#fixed main .react-fluid-table .header-cell {\n        box-sizing: border-box;\n        display: flex;\n        padding: 7px;\n      }\n      the-panel#fixed main .react-fluid-table-container {\n        will-change: height;\n      }\n      the-panel#fixed main .sticky-header {\n        position: sticky;\n        top: 0;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n      }\n      the-panel#fixed main .row-wrapper {\n        display: nline-block;\n      }\n      the-panel#fixed main .react-fluid-table-header {\n        display: flex;\n        border-bottom: 1px solid var(--noflo-ui-border);\n        background-color: var(--noflo-ui-background);\n        z-index: 2;\n      }\n      the-panel#fixed main .header-cell {\n        align-items: baseline;\n      }\n      the-panel#fixed main .header-cell-text {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 10px;\n        font-weight: bold;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .header-cell-arrow {\n        width: 0;\n        height: 0;\n        margin-left: 4px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n      }\n      the-panel#fixed main .header-cell-arrow.asc {\n      }\n      the-panel#fixed main .header-cell-arrow.desc {\n      }\n      the-panel#fixed main .react-fluid-table-row {\n      }\n      the-panel#fixed main .react-fluid-table-row .hidden {\n        display: none;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details {\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background);\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        /* This is a workaround for react-fluid-table not recalculating on expand, most likely due to Shadow DOM */\n        position: absolute;\n        z-index: 1;\n        right: 7px;\n        width: max(60%, 288px);\n        height: 144px;\n        overflow-y: auto;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dl {\n        margin: 0px;\n        padding: 7px;\n        font-size: 10px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dt {\n        font-weight: bold;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd {\n        margin: 0px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd.packet-data {\n        white-space: pre-wrap;\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .row-container {\n        display: flex;\n      }\n      the-panel#fixed main .cell {\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text);\n      }\n      the-panel#fixed main .cell .openBracket {\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .openBracket:before {\n        display: inline;\n        content: '<';\n      }\n      the-panel#fixed main .cell .openBracket:after {\n        display: inline;\n        content: '>';\n      }\n      the-panel#fixed main .cell .closeBracket {\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .closeBracket:before {\n        display: inline;\n        content: '</';\n      }\n      the-panel#fixed main .cell .closeBracket:after {\n        display: inline;\n        content: '>';\n      }\n      the-panel#fixed main .cell .expander {\n        cursor: pointer;\n        height: 1em;\n        width: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge {\n        font-weight: bold;\n      }\n      the-panel#fixed main .cell .edge .subgraph {\n        margin-right: 7px;\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .edge .source span {\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .target span {\n        margin-left: 7px;\n      }\n      the-panel#fixed main .cell .edge .port-id {\n        text-transform: uppercase;\n      }\n      the-panel#fixed main .cell .edge .arrow {\n        margin-left: 7px;\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .connection {\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge .route0 { color: #fff; }\n      the-panel#fixed main .cell .edge .route1 { color: hsl(  0,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route2 { color: hsl( 35,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route3 { color: hsl( 60,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route4 { color: hsl(135,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route5 { color: hsl(160,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route6 { color: hsl(185,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route7 { color: hsl(210,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route8 { color: hsl(285,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route9 { color: hsl(310,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route10 { color: hsl(335,  98%, 46%); }\n    </style>\n    <the-panel id=\"fixed\" edge=\"bottom\" size=\"324\" handle=\"36\" open={{showPackets}}>\n      <main id=\"fixedmain\">\n      </main>\n    </the-panel>\n  `,\n  is: 'noflo-packets',\n  properties: {\n    currentgraph: { value: null },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: { value: null },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    packets: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'packetsChanged',\n    },\n    nodeInspectors: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'nodesChanged',\n    },\n    panel: { value: null },\n    showPackets: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n    readonly: { notify: true },\n  },\n  attached() {\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    this.frameRequest = null;\n  },\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n  edgesChanged(newEdges, oldEdges) {\n    if (this.edges.length) {\n      this.showEdgeCards();\n    } else {\n      this.hideEdgeCards();\n    }\n    this.updatePacketInspector();\n    if (newEdges.length && !oldEdges.length && this.packets.length) {\n      // Show packet inspector when selecting an edge\n      this.showPackets = true;\n    }\n  },\n  widthChanged() {\n    this.updatePacketInspector();\n  },\n  eventsChanged() {\n    // Clear previous state\n    if (this.editor) {\n      this.editor.clearErrorNodes();\n    }\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      this.nodeInspectors[id].inspector.errorLog = [];\n    });\n\n    if (!this.events) {\n      return;\n    }\n    this.events.forEach((event) => {\n      if (event.type !== 'processerror' || !event.payload.id) {\n        return;\n      }\n      // TODO: Check that process is in current graph\n      if (this.editor) {\n        this.editor.addErrorNode(event.payload.id);\n      }\n      if (this.nodeInspectors[event.payload.id]) {\n        this.nodeInspectors[event.payload.id].inspector.push('errorLog', event);\n      }\n    });\n  },\n  genId(source, target) {\n    let fromStr;\n    if (source) {\n      fromStr = `${source.node} ${source.port.toUpperCase()}`;\n    } else {\n      fromStr = 'DATA';\n    }\n    const toStr = `${target.port.toUpperCase()} ${target.node}`;\n    return `${fromStr} -> ${toStr}`;\n  },\n  genEdgeId(edge) {\n    return this.genId(edge.from, edge.to);\n  },\n  showEdgeCards() {\n    if (this.edgeMenu) {\n      if (this.readonly) {\n        PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n        this.edgeMenu = null;\n      } else {\n        this.set('edgeMenu.dialog.edges', this.edges);\n      }\n    } else if (!this.readonly) {\n      const menu = document.createElement('noflo-edge-menu');\n      menu.edges = this.edges;\n      menu.graph = this.currentgraph;\n      this.edgeMenu = document.createElement('the-card');\n      this.set('edgeMenu.type', 'edge-menu');\n      this.set('edgeMenu.dialog', menu);\n      PolymerDom(this.edgeMenu).appendChild(menu);\n      this.edgeMenu.addTo(this.panel);\n    }\n  },\n  packetsChanged(newPackets, oldPackets) {\n    this.updatePacketInspector();\n    if (newPackets && newPackets.length && (!oldPackets || !oldPackets.length)) {\n      // Show packet inspector when first packets arrive\n      this.showPackets = true;\n    }\n    if ((!newPackets || !newPackets.length) && oldPackets && oldPackets.length) {\n      this.showPackets = false;\n    }\n  },\n  updatePacketInspector() {\n    if (this.frameRequest) {\n      return;\n    }\n    this.frameRequest = requestAnimationFrame(() => {\n      this.frameRequest = null;\n      const edgeIds = this.currentgraph\n        ? this.currentgraph.edges.map((e) => this.genEdgeId(e)) : [];\n      const selectedEdgeIds = this.edges.map((e) => this.genEdgeId(e));\n      const packets = this.packets\n        .map((p, idx) => {\n          const packetId = this.genId(p.src, p.tgt);\n          let packetEdge;\n          if (this.currentgraph && edgeIds.indexOf(packetId) !== -1) {\n            packetEdge = this.currentgraph.edges[edgeIds.indexOf(packetId)];\n          }\n          return {\n            ...p,\n            rowId: `${idx + 1}`,\n            id: packetId,\n            edge: packetEdge,\n          };\n        })\n        .filter((p) => {\n          if (!selectedEdgeIds.length) {\n            // Show all packets when no edges are selected\n            return true;\n          }\n          return (selectedEdgeIds.indexOf(p.id) !== -1);\n        });\n      const container = this.shadowRoot.getElementById('fixedmain');\n      ReactDOM.render(RuntimeEvents({\n        packets,\n        width: container.offsetWidth, // TODO: Update on resize\n      }), container);\n    });\n  },\n  hideEdgeCards() {\n    if (this.edgeMenu) {\n      PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n      this.edgeMenu = null;\n    }\n  },\n  nodesChanged() {\n    if (this.nodes.length) {\n      this.showNodeCards();\n    } else {\n      this.hideNodeCards();\n    }\n  },\n  showNodeCards() {\n    this.nodes.forEach((node) => {\n      const { id } = node;\n      if (this.nodeInspectors[id]) {\n        return;\n      }\n      if (this.readonly) {\n        return;\n      }\n      const inspector = document.createElement('noflo-node-inspector');\n      inspector.node = node;\n      inspector.component = this.editor.getComponent(node.component);\n      inspector.graph = this.currentgraph;\n      if (this.events) {\n        inspector.errorLog = this.events.filter((event) => {\n          if (event.type !== 'processerror') {\n            return false;\n          }\n          if (event.payload.id !== id) {\n            return false;\n          }\n          return true;\n        });\n      }\n      this.nodeInspectors[id] = document.createElement('the-card');\n      this.nodeInspectors[id].type = 'node-inspector';\n      this.nodeInspectors[id].inspector = inspector;\n      PolymerDom(this.nodeInspectors[id]).appendChild(inspector);\n      this.nodeInspectors[id].addTo(this.panel);\n    });\n    let found;\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      found = false;\n      this.nodes.forEach((node) => {\n        if (node.id === id) {\n          found = true;\n        }\n      });\n      if (!found) {\n        PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n          .removeChild(this.nodeInspectors[id]);\n        delete this.nodeInspectors[id];\n      }\n    });\n  },\n  hideNodeCards() {\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n        .removeChild(this.nodeInspectors[id]);\n      delete this.nodeInspectors[id];\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        text-align: center;\n        background-color: hsl(35, 98%, 46%);\n        color: white;\n        border-bottom: 1px black solid;\n        padding: 18px;\n      }\n      :host(.error) {\n        background-color: hsl(0, 98%, 46%);\n      }\n      a {\n        color: hsl(0, 98%, 46%);\n        background-color: white;\n        display: inline-block;\n        padding: 9px;\n        text-decoration: none;\n        font-size: 12px;\n        border-radius: 3px;\n      }\n\n      /* /deep/ animations don't work: https://github.com/Polymer/polymer/issues/141#issuecomment-31887427 */\n      /* only animate when on-screen */\n      .fa-spin {\n        -webkit-animation: none !important;\n        animation: none !important;\n      }\n      :host(.show) .fa-spin {\n        -webkit-animation: fa-spin 2s infinite linear !important;\n        animation: fa-spin 2s infinite linear !important;\n      }\n      @-webkit-keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n      @keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <noflo-icon icon=\"warning\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{_computeIf(isError, offerHTTPS)}}\">\n      <noflo-icon icon=\"spinner\" class=\"fa-spin\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{offerHTTPS}}\">\n      <noflo-icon icon=\"lock\"></noflo-icon>\n      This app is available securely at <a href=\"https://app.flowhub.io/\">https://app.flowhub.io/</a> - <a href=\"https://docs.flowhub.io/article/75-security-with-https-and-wss\">about</a>\n    </template>\n    <slot>\n    <span>{{message}}</span>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <a href=\"#\" class=\"button\">go home</a>\n    </template>\n  </slot>\n`,\n\n  is: 'noflo-alert',\n\n  properties: {\n    isError: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'isErrorChanged',\n    },\n    message: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    offerHTTPS: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n  },\n\n  isErrorChanged() {\n    if (this.isError) {\n      PolymerDom(this).classList.add('error');\n    } else {\n      PolymerDom(this).classList.remove('error');\n    }\n  },\n\n  _computeIf(isError, offerHTTPS) {\n    return !isError && !offerHTTPS;\n  },\n});\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!./noflo-ui.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport projects from '../src/projects';\nimport './noflo-polymer';\nimport './noflo-main';\nimport './the-graph-editor';\nimport './noflo-library';\nimport './noflo-context';\nimport './noflo-runtime';\nimport './noflo-journal';\nimport './noflo-component-editor';\nimport './noflo-search';\nimport './noflo-project';\nimport './noflo-packets';\nimport './noflo-alert';\nimport '../css/noflo-ui.css';\n\nPolymer({\n  _template: html`\n    <style>\n      /*\n       * z-indexes:\n       *\n       * Modal dialogs: 5\n       * Main screen: 4\n       * Panels: 3\n       * Context cards & runtime controls: 2\n       * Workspace chrome: 1\n       * Workspace: 0\n       */\n      :host {\n        display: block;\n      }\n\n      noflo-main {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        z-index: 4;\n      }\n      the-graph-editor {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n      }\n      noflo-component-editor {\n        position: fixed;\n        top: 0;\n        left: 36px;\n        height: 100vh;\n        right: 36px;\n        z-index: 0;\n      }\n      noflo-search {\n        position: fixed;\n        top: 0px;\n        left: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 2;\n      }\n      noflo-runtime {\n        position: fixed;\n        top: 0px;\n        right: 0px;\n        width: 288px;\n        height: 72px;\n        z-index: 3;\n      }\n      noflo-journal {\n        position: fixed;\n        bottom: 0px;\n        right: 36px;\n        width: 288px;\n        z-index: 3;\n      }\n\n      #alert {\n        box-sizing: border-box;\n        position: fixed;\n        top: -144px;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        max-height: 144px;\n        overflow: hidden;\n        transition: top 0.3s ease-in-out;\n      }\n      #alert.show {\n        top: 0;\n      }\n      #asproject::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsl(185, 98%, 46%);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n      }\n      #asproject:hover {\n        background-color: black;\n        color: hsl(185, 98%, 46%);\n      }\n      #asproject {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        position: fixed;\n        box-sizing: border-box;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 9;\n        background-color: hsla(185, 98%, 46%, .8);\n        border: 1px solid hsl(185, 98%, 46%);\n        color: black;\n        top: 36px;\n        height: 36px;\n        border-radius: 3px;\n        padding: 8px;\n        cursor: pointer;\n        transition: color 0.3s ease, background-color 0.3s ease, opacity 5.0s ease-in;\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <noflo-main id=\"main\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" projects=\"{{ctx.projects}}\" user=\"{{ctx.user}}\" remote-projects=\"{{ctx.remoteProjects}}\"></noflo-main>\n    <the-graph-editor id=\"grapheditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" graph=\"{{ctx.graph}}\" icons=\"[[ctx.icons]]\"></the-graph-editor>\n    <noflo-library id=\"library\" search=\"{{ctx.search}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\"></noflo-library>\n    <noflo-context id=\"context\" nodes=\"{{ctx.nodes}}\" edges=\"{{ctx.edges}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\" runtimes=\"{{ctx.runtimes}}\" events=\"[[ctx.events]]\"></noflo-context>\n    <noflo-runtime id=\"runtime\" runtime=\"{{ctx.runtime}}\" runtimes=\"{{ctx.compatible}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-runtime>\n    <noflo-journal id=\"journal\" db=\"{{ctx.db}}\" theme=\"[[theme]]\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-journal>\n    <noflo-component-editor id=\"componenteditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\"></noflo-component-editor>\n    <noflo-search id=\"search\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" project=\"{{ctx.project}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\" graphs=\"{{ctx.graphs}}\"></noflo-search>\n    <noflo-project id=\"project\" runtimes=\"{{ctx.runtimes}}\" graph=\"{{ctx.graph}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\" runtime=\"{{ctx.runtime}}\"></noflo-project>\n    <noflo-packets id=\"packets\" edges=\"[[ctx.edges]]\" nodes=\"[[ctx.nodes]]\" currentgraph=\"[[ctx.graph]]\" packets=\"[[ctx.packets]]\" events=\"[[ctx.events]]\" width=\"[[width]]\"></noflo-packets>\n    <noflo-alert id=\"alert\" on-click=\"hideAlert\"></noflo-alert>\n`,\n\n  is: 'noflo-ui',\n\n  properties: {\n    ctx: {\n      type: Object,\n      value() {\n        return {\n          db: null,\n          search: null,\n          graph: null,\n          component: null,\n          graphs: [],\n          project: null,\n          projects: [],\n          runtime: null,\n          runtimes: [],\n          compatibleRuntimes: [],\n          packets: [],\n          edges: [],\n          nodes: [],\n        };\n      },\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    dontAutoHideAlert: {\n      type: Boolean,\n      value: false,\n    },\n    height: {\n      value() {\n        return window.innerHeight;\n      },\n      notify: true,\n    },\n    width: {\n      value() {\n        return window.innerWidth;\n      },\n      notify: true,\n    },\n  },\n\n  clearContextFirst: [\n    'graphs',\n    'runtimes',\n    'projects',\n    'edges',\n    'nodes',\n    'compatibleRuntimes',\n    'remoteProjects',\n  ],\n\n  emitEvent(event, payload) {\n    this.fire(event, payload);\n  },\n\n  ready() {\n    this.$.main.addEventListener('userUpdated', (event) => {\n      this.emitEvent('user:update', event.detail);\n    });\n    this.$.main.addEventListener('logout', () => {\n      this.emitEvent('user:logout', true);\n    });\n    this.$.main.addEventListener('login', () => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [],\n      });\n    });\n    this.$.main.addEventListener('relogin', (event) => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [event.detail],\n      });\n    });\n    this.$.main.addEventListener('fetchRemote', (event) => {\n      this.emitEvent('flowhub:projects:fetch', event.detail);\n    });\n    this.$.main.addEventListener('downloadProject', (event) => {\n      this.emitEvent('application:sethash', [\n        'github',\n        event.detail.org,\n        event.detail.repo,\n        'tree',\n        event.detail.branch,\n      ]);\n    });\n    this.$.main.addEventListener('fetchRuntimes', (event) => {\n      this.emitEvent('flowhub:runtimes:fetch', event.detail);\n    });\n    this.$.main.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.main.addEventListener('newruntime', (event) => {\n      this.emitEvent('flowhub:runtimes:register', event.detail);\n    });\n    this.$.main.addEventListener('newproject', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.main.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('openProject', (event) => {\n      this.openProject(event.detail);\n    });\n    this.$.context.addEventListener('newsubgraph', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendSubgraph', {\n        ...event.detail,\n        runtime: this.ctx.runtime.definition.id,\n      });\n    });\n    this.$.context.addEventListener('clear:runtimeevents', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph && !clear.all) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      delete clear.all;\n      this.emitEvent('runtime:clearevents', clear);\n    });\n    this.$.context.addEventListener('clear:runtimepackets', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      this.emitEvent('runtime:clearpackets', clear);\n    });\n    this.$.runtime.addEventListener('switchRuntime', (event) => {\n      this.emitEvent('application:recreatestate', event.detail);\n    });\n    this.$.runtime.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:runtime', event.detail);\n    });\n    this.$.runtime.addEventListener('start', (event) => {\n      this.emitEvent('runtime:start', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('stop', (event) => {\n      this.emitEvent('runtime:stop', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('reconnect', (event) => {\n      this.emitEvent('runtime:reconnect', event.detail);\n    });\n    this.$.grapheditor.addEventListener('edges', (event) => {\n      this.emitEvent('context:edges', event.detail);\n    });\n    this.$.grapheditor.addEventListener('nodes', (event) => {\n      this.emitEvent('context:nodes', event.detail);\n    });\n    this.$.grapheditor.addEventListener('changed', (event) => {\n      const ev = event;\n      ev.detail.properties.changed = true;\n      this.emitEvent('storage:save:graph', ev.detail);\n    });\n    this.$.grapheditor.addEventListener('graphChanges', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraphChanges', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: this.ctx.graph,\n        changes: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.project.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.project.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.project.addEventListener('newcomponent', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n    });\n    this.$.project.addEventListener('newspec', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n    });\n    this.$.project.addEventListener('sync', (event) => {\n      this.emitEvent('github:sync:prepare', event.detail);\n    });\n    this.$.project.addEventListener('syncDecision', (event) => {\n      this.emitEvent('github:sync:synchronize', event.detail);\n    });\n    this.$.project.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.project.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.main.addEventListener('deleteRuntime', (event) => {\n      this.emitEvent('flowhub:runtimes:remove', event.detail);\n    });\n    this.$.main.addEventListener('deleteRepo', (event) => {\n      this.emitEvent('flowhub:projects:remove', event.detail);\n      if (this.ctx.remoteProjects) {\n        // Since remote projects are not updated via normal flow, we can\n        // directly remove it from view\n        this.splice('ctx.remoteProjects', this.ctx.remoteProjects.indexOf(event.detail), 1);\n      }\n    });\n    this.$.componenteditor.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.componenteditor.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: this.ctx.component,\n      });\n      this.triggerTests();\n    });\n    this.$.search.addEventListener('search:library', (event) => {\n      this.emitEvent('context:search_library', event.detail);\n    });\n    this.$.search.addEventListener('search:graph', (event) => {\n      this.emitEvent('context:search_graph', event.detail);\n    });\n    this.$.search.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.library.addEventListener('result', (event) => {\n      this.emitEvent('context:search_library_result', { searchLibraryResult: event.detail });\n    });\n    this.$.search.addEventListener('deleteGraph', (event) => {\n      const { project } = this.ctx;\n      this.emitEvent('storage:delete:graph', event.detail);\n      if (project && project.graphs.indexOf(event.detail) !== -1) {\n        this.splice('ctx.project.graphs', project.graphs.indexOf(event.detail), 1);\n      }\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('deleteComponent', (event) => {\n      const { project } = this.ctx;\n      if (!project || !project.components) {\n        return;\n      }\n      const component = event.detail;\n      const index = project.components.indexOf(component);\n      if (index !== -1) {\n        this.splice('ctx.project.components', index, 1);\n      }\n      this.emitEvent('storage:delete:component', component);\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.triggerTests();\n    });\n    this.set('$.library.editor', this.$.grapheditor);\n    this.set('$.journal.editor', this.$.grapheditor);\n    this.set('$.context.editor', this.$.grapheditor);\n    this.set('$.packets.editor', this.$.grapheditor);\n    this.set('$.search.editor', this.$.grapheditor);\n    this.set('$.runtime.panel', this.$.context.$.fixed);\n    this.set('$.packets.panel', this.$.context.$.contextsection);\n    this.set('$.search.panel', this.$.context.$.contextsection);\n  },\n\n  updated(context) {\n    if (context.state) {\n      switch (context.state) {\n        case 'error': {\n          this.showError(context);\n          break;\n        }\n        case 'ok': {\n          this.hideAlertSoon();\n          break;\n        }\n        case 'loading': {\n          this.showProgress(context);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n\n    // Update local state with incoming data\n    Object.keys(context).forEach((key) => {\n      if (this.clearContextFirst.indexOf(key) !== -1) {\n        // Clear arrays first so Polymer knows there are changes\n        this.set(`ctx.${key}`, context[key].slice(0));\n        if (key === 'projects') {\n          // Projects are complex objects that need a full notify\n          for (let i = 0; i < this.ctx.projects.length; i += 1) {\n            const project = this.ctx.projects[i];\n            this.set(`ctx.projects.${i}`, {});\n            this.set(`ctx.projects.${i}`, project);\n            if (this.ctx.project && this.ctx.project.id === project.id) {\n              this.set('ctx.project', {});\n              this.set('ctx.project', project);\n            }\n          }\n        }\n        return;\n      }\n      this.set(`ctx.${key}`, context[key]);\n    });\n    if (context.user && context.user['flowhub-theme']) {\n      this.theme = context.user['flowhub-theme'];\n    }\n    if (context.searchLibraryResult) {\n      this.$.search.libraryResults(this.ctx.searchLibraryResult);\n    }\n    if (context.searchGraphResult) {\n      this.$.search.graphResults(this.ctx.searchGraphResult);\n    }\n    if (context.syncOperation !== undefined) {\n      this.$.project.confirm(context.syncOperation);\n      return;\n    }\n    if (context.componentLibrary) {\n      Object.keys(this.$.grapheditor.$.graph.library).forEach((libKey) => {\n        delete this.$.grapheditor.$.graph.library[libKey];\n      });\n      context.componentLibrary.forEach((def) => {\n        this.$.grapheditor.registerComponent(def);\n      });\n      this.set('ctx.componentLibrary', null);\n    }\n    if (this.ctx.suites) {\n      this.$.runtime.showTests(this.ctx.suites);\n    }\n    if (this.ctx.state === 'loading') {\n      return;\n    }\n    if (this.ctx.state === 'error') {\n      this.showError(this.ctx);\n      return;\n    }\n    if (context.graphs) {\n      if (context.graphs.length) {\n        const oldGraph = this.ctx.graph;\n        this.set('ctx.graph', context.graphs[context.graphs.length - 1]);\n        if (oldGraph !== this.ctx.graph) {\n          setTimeout(() => {\n            this.emitEvent('context:graph', { graph: this.ctx.graph });\n          }, 1);\n        }\n      } else {\n        this.set('ctx.graph', null);\n      }\n    }\n    if (this.ctx.graph || this.ctx.component) {\n      this.set('$.main.open', false);\n      const isReadOnly = projects.isReadOnly(this.ctx);\n      this.set('$.search.readonly', isReadOnly);\n      this.set('$.grapheditor.readonly', isReadOnly);\n      this.set('$.context.readonly', isReadOnly);\n      this.set('$.packets.readonly', isReadOnly);\n    } else {\n      this.set('$.main.open', true);\n    }\n  },\n\n  showError(context) {\n    if (context.error && context.error.message) {\n      this.set('$.alert.message', context.error.message);\n      this.set('$.alert.isError', true);\n      this.set('$.alert.offerHTTPS', false);\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  showProgress(context) {\n    if (context.state || context.offerHTTPS) {\n      this.set('$.alert.message', context.state || '');\n      this.set('$.alert.isError', false);\n      this.set('$.alert.offerHTTPS', context.offerHTTPS || false);\n      this.dontAutoHideAlert = context.dontAutoHideAlert || false;\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  triggerTests() {\n    if (!this.ctx.runtime) {\n      return;\n    }\n    this.emitEvent('runtime:runTests', {\n      project: this.ctx.project,\n      runtime: this.ctx.runtime.definition,\n    });\n  },\n\n  hideAlert() {\n    PolymerDom(this.$.alert).classList.remove('show');\n  },\n\n  hideAlertSoon() {\n    if (this.dontAutoHideAlert) {\n      return;\n    }\n    if (!PolymerDom(this.$.alert).classList.contains('show')) {\n      return;\n    }\n    window.setTimeout(() => {\n      this.hideAlert();\n    }, 1300);\n  },\n\n  openProject(project) {\n    projects.getProjectHash(project, (err, hash) => {\n      if (err) {\n        return;\n      }\n      this.emitEvent('application:sethash', hash);\n    });\n  },\n\n  themeChanged(newTheme, oldTheme) {\n    if (oldTheme) {\n      PolymerDom(document.body).classList.remove(oldTheme);\n    }\n    PolymerDom(document.body).classList.add(this.theme);\n  },\n});\n","const TheGraph = require('the-graph');\n\nexports.getIcon = (iconName, fallback = '') => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return iconName;\n  }\n  if (!iconMap[iconName]) {\n    if (!fallback) { return fallback; }\n    return iconMap[fallback];\n  }\n  return iconMap[iconName];\n};\n\nexports.getIcons = () => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return {};\n  }\n  return iconMap;\n};\n","const { basename } = require('path');\n\nexports.sortByName = (a, b) => {\n  const aName = exports.unnamespace(exports.getName(a));\n  const bName = exports.unnamespace(exports.getName(b));\n  return aName.localeCompare(bName);\n};\n\nexports.getName = (obj, allowUnknown = true) => {\n  if (!obj) {\n    if (allowUnknown) {\n      return 'Unknown';\n    }\n    return null;\n  }\n  const name = (obj.properties != null ? obj.properties.name : undefined) || obj.name || obj.id;\n  if (!name && allowUnknown) {\n    return 'Unknown';\n  }\n  return name;\n};\n\nexports.unnamespace = (name) => {\n  if (name.indexOf('/') === -1) {\n    return name;\n  }\n  return basename(name);\n};\n\nexports.namespace = (name, namespace) => {\n  if (name.indexOf('/') !== -1) {\n    return name;\n  }\n  return `${namespace}/${name}`;\n};\n\nexports.sortBySeen = (ain, bin) => {\n  const a = ain;\n  const b = bin;\n  if (!a.seen) {\n    return 1;\n  }\n  if (!b.seen) {\n    return -1;\n  }\n  a.seen = typeof a.seen === 'object' ? a.seen : new Date(a.seen);\n  b.seen = typeof b.seen === 'object' ? b.seen : new Date(b.seen);\n  if (a.seen > b.seen) {\n    return -1;\n  }\n  if (b.seen > a.seen) {\n    return 1;\n  }\n  return 0;\n};\n\nexports.addToList = (list, entity, sort = exports.sortByName) => {\n  let found = false;\n  list.forEach((existing) => {\n    if (existing === entity) {\n      // Entity is already in list as-is, skip\n      found = true;\n      return;\n    }\n    const existingId = exports.unnamespace(exports.getName(existing, false));\n    const entityId = exports.unnamespace(exports.getName(entity, false));\n    if (existingId === entityId) {\n      // id match, replace\n      const exists = existing;\n      Object.keys(entity).forEach((key) => {\n        exists[key] = entity[key];\n      });\n      found = true;\n    }\n  });\n  if (found) { return; }\n  list.push(entity);\n  // Sort the list on desired criteria\n  list.sort(sort);\n};\n\nexports.removeFromList = (list, entity) => {\n  const matched = list.find((existing) => {\n    if (existing === entity) {\n      return true;\n    }\n    const existingId = existing.properties ? existing.properties.id : existing.id;\n    const entityId = entity.properties ? entity.properties.id : entity.id;\n    return (existingId === entityId);\n  });\n  if (!matched) {\n    return;\n  }\n  list.splice(list.indexOf(matched), 1);\n};\n"],"sourceRoot":""}