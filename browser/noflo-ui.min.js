!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=134)}([function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;o=r(35),t.graph=o.graph,t.Graph=o.Graph,t.journal=o.journal,t.Journal=o.Journal,t.Network=r(74).Network,t.isBrowser=r(37).isBrowser,t.ComponentLoader=r(53).ComponentLoader,t.Component=r(114).Component,t.helpers=r(423),i=r(115),t.InPorts=i.InPorts,t.OutPorts=i.OutPorts,t.InPort=r(116),t.OutPort=r(118),t.internalSocket=r(36),t.IP=r(16),t.createNetwork=function(e,r,o){var i,s;return"object"!==n(o)&&(o={delay:o}),"function"!=typeof r&&(r=function(e){if(e)throw e}),i=new t.Network(e,o),s=function(e){return e.start((function(t){return t?r(t):r(null,e)}))},i.loader.listComponents((function(t){return t?r(t):0===e.nodes.length?s(i):o.delay?void r(null,i):i.connect((function(e){return e?r(e):s(i)}))})),i},t.loadFile=function(e,r,o){return o||(o=r,null),o&&"object"!==n(r)&&(r={baseDir:r}),t.graph.loadFile(e,(function(e,n){return e?o(e):(r.baseDir&&(n.baseDir=r.baseDir),t.createNetwork(n,o,r))}))},t.saveFile=function(e,t,r){return e.save(t,r)},t.asCallback=r(424).asCallback,t.asComponent=r(425).asComponent},function(e,t,r){"use strict";(function(e){r.d(t,"e",(function(){return n})),r.d(t,"p",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"o",(function(){return c})),r.d(t,"q",(function(){return u})),r.d(t,"s",(function(){return p})),r.d(t,"i",(function(){return l})),r.d(t,"r",(function(){return d})),r.d(t,"k",(function(){return h})),r.d(t,"m",(function(){return f})),r.d(t,"j",(function(){return m})),r.d(t,"l",(function(){return g})),r.d(t,"g",(function(){return y})),r.d(t,"f",(function(){return v})),r.d(t,"h",(function(){return b})),r.d(t,"n",(function(){return w})),r.d(t,"b",(function(){return E}));var n="1.11.0",o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||Function("return this")()||{},i=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=i.push,u=i.slice,p=s.toString,l=s.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,h=Array.isArray,f=Object.keys,m=Object.create,g=d&&ArrayBuffer.isView,y=isNaN,v=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=Math.pow(2,53)-1}).call(this,r(9))},function(e,t,r){"use strict";e.exports=r(436)},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],p=!1,l=-1;function d(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!p){var e=a(d);p=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||p||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){(function(n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(199)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(3))},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==i&&e.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==t&&(i=function(r){e.removeListener(t,o),n(r)},e.once("error",i)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var o,i,s,a;if(u(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=p(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function f(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):g(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,p=g(c,u);for(r=0;r<u;++r)i(p[r],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){},function(e,t,r){"use strict";var n=r(32),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],i=["scalar","sequence","mapping"];e.exports=function(e,t){var r,s;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===o.indexOf(t))throw new n('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,s={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){s[String(t)]=e}))})),s),-1===i.indexOf(this.kind))throw new n('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,r){"use strict";var n=r(2),o=r(437);if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return(o?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===o(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),i=n(r.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(o=!1,n=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(3))},function(e,t,r){const n=r(322),{findByComponent:o}=r(17),{getName:i,namespace:s}=r(21);t.graphRuntimeIdentifier=(e,t=null)=>{if(e&&e.properties&&e.properties.runtimeName)return e.properties.runtimeName;const r=i(e);return t?s(r,t):r};const a=e=>({name:e.id,type:e.type,description:e.type,addressable:e.addressable,schema:e.schema});t.componentForLibrary=e=>({name:e.name,icon:e.icon||"cog",description:e.description||"",subgraph:e.subgraph,inports:e.inPorts.map(a),outports:e.outPorts.map(a)}),t.getGraphType=e=>{const t=e;return(null!=t.properties.environment?t.properties.environment.type:void 0)||"html"!==(null!=t.properties.environment?t.properties.environment.runtime:void 0)||(t.properties.environment.type="noflo-browser"),(null!=t.properties.environment?t.properties.environment.type:void 0)?t.properties.environment.type:null},t.getComponentType=e=>{const t=e.code.match(/@runtime ([a-z-]+)/);return t?t[1]:null},t.getSource=(e,t)=>e.protocol.component.getsource({name:t}).catch(r=>-1!==t.indexOf("/")?Promise.reject(r):e.definition.namespace?e.protocol.component.getsource({name:`${e.definition.namespace}/${t}`}):Promise.reject(r)),t.getRemoteNodes=(e,r)=>{const n=r;return n.remote.reduce((r,i)=>r.then(r=>{if(!(null!=r.nodes?r.nodes.length:void 0))return Promise.reject(new Error(`Node ${r.name} doesn't contain child nodes`));const[s]=r.nodes.filter(e=>e.id===i);if(!s)return Promise.reject(new Error(`Node ${i} not found in graph ${r.name||r.properties.id}`));const[a,c]=o(s.component,n.project);return"graph"===a?(n.graphs.push(c),Promise.resolve(c)):"component"===a?(n.component=c,Promise.resolve(c)):t.getSource(e,s.component).then(e=>["json","fbp"].includes(e.language)?t.loadGraph(e).then(e=>(n.graphs.push(e),Promise.resolve(e))):(n.component=e,Promise.resolve(e)))}),Promise.resolve(n.graphs[n.graphs.length-1])).then(()=>(n.remote=[],n))},t.loadGraph=e=>new Promise((t,r)=>{let o;switch(e.language){case"json":o="loadJSON";break;case"fbp":o="loadFBP";break;default:return r(new Error(`Unknown format ${e.language} for graph ${e.name}`))}return o="json"===e.language?"loadJSON":"loadFBP",n.graph[o](e.code,(n,o)=>{if(n)return r(n);const i=o;return i.name=e.name,t(i)})}),t.isDefaultRuntime=e=>"iframe"===e.protocol&&"https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe"===e.address,t.ensureIframe=(e,t)=>{const r=e;if("iframe"!==r.definition.protocol)return Promise.resolve();r.definition.querySelector=`iframe[data-runtime='${r.definition.id}']`;let n=document.body.querySelector(r.definition.querySelector);return n||(n=document.createElement("iframe"),n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("data-runtime",r.definition.id),n.setAttribute("data-project",t.id),n.className="iframe-runtime",document.body.appendChild(n)),r.transport.iframe?r.transport.iframe===n?Promise.resolve():r.disconnect().then(()=>(r.transport.iframe=n,Promise.resolve())):(r.transport.iframe=n,Promise.resolve())}},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=r(439)},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=r}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(136),o=r(137),i=r(138);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(p(t),e=a(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var p=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var l=!0,d=0;d<c;d++)if(u(e,i+d)!==u(t,d)){l=!1;break}if(l)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return q(B(t,e.length-r),e,r,n)}function E(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return E(e,t,r,n)}function S(e,t,r,n){return q(U(t),e,r,n)}function k(e,t,r,n){return q(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,c,u=e[o],p=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(p=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return p(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),p=e.slice(t,r),l=0;l<a;++l)if(u[l]!==p[l]){i=u[l],s=p[l];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=G(e[i]);return o}function D(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function j(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,i){return i||j(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return i||j(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=c.isBuffer(e)?e:B(new c(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function U(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(9))},function(e,t,r){(function(t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var r,n,o;try{r=Map}catch(e){r=function(){}}try{n=Set}catch(e){n=function(){}}try{o=Promise}catch(e){o=function(){}}function i(s,c,u,p,l){"object"==typeof c&&(u=c.depth,p=c.prototype,l=c.includeNonEnumerable,c=c.circular);var d=[],h=[],f=void 0!==t;return void 0===c&&(c=!0),void 0===u&&(u=1/0),function s(u,m){if(null===u)return null;if(0===m)return u;var g,y;if("object"!=typeof u)return u;if(e(u,r))g=new r;else if(e(u,n))g=new n;else if(e(u,o))g=new o((function(e,t){u.then((function(t){e(s(t,m-1))}),(function(e){t(s(e,m-1))}))}));else if(i.__isArray(u))g=[];else if(i.__isRegExp(u))g=new RegExp(u.source,a(u)),u.lastIndex&&(g.lastIndex=u.lastIndex);else if(i.__isDate(u))g=new Date(u.getTime());else{if(f&&t.isBuffer(u))return g=t.allocUnsafe?t.allocUnsafe(u.length):new t(u.length),u.copy(g),g;e(u,Error)?g=Object.create(u):void 0===p?(y=Object.getPrototypeOf(u),g=Object.create(y)):(g=Object.create(p),y=p)}if(c){var v=d.indexOf(u);if(-1!=v)return h[v];d.push(u),h.push(g)}for(var b in e(u,r)&&u.forEach((function(e,t){var r=s(t,m-1),n=s(e,m-1);g.set(r,n)})),e(u,n)&&u.forEach((function(e){var t=s(e,m-1);g.add(t)})),u){var w;y&&(w=Object.getOwnPropertyDescriptor(y,b)),w&&null==w.set||(g[b]=s(u[b],m-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(u);for(b=0;b<E.length;b++){var x=E[b];(!(k=Object.getOwnPropertyDescriptor(u,x))||k.enumerable||l)&&(g[x]=s(u[x],m-1),k.enumerable||Object.defineProperty(g,x,{enumerable:!1}))}}if(l){var S=Object.getOwnPropertyNames(u);for(b=0;b<S.length;b++){var k,_=S[b];(k=Object.getOwnPropertyDescriptor(u,_))&&k.enumerable||(g[_]=s(u[_],m-1),Object.defineProperty(g,_,{enumerable:!1}))}}return g}(s,u)}function s(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=s,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},i.__getRegExpFlags=a,i}();e.exports&&(e.exports=r)}).call(this,r(14).Buffer)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}e.exports=function(){var e=function(){function e(){var t,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(t in n(this,e),this.type=o,this.data=i,this._isIP=!0,this.scope=null,this.owner=null,this.clonable=!1,this.index=null,this.schema=null,this.datatype="all",s)r=s[t],this[t]=r}return i(e,null,[{key:"isIP",value:function(e){return e&&"object"===r(e)&&!0===e._isIP}}]),i(e,[{key:"clone",value:function(){var t,n,o;for(n in t=new e(this.type),this,this)o=this[n],-1===["owner"].indexOf(n)&&null!==o&&("object"===r(o)?t[n]=JSON.parse(JSON.stringify(o)):t[n]=o);return t}},{key:"move",value:function(e){this.owner=e}},{key:"drop",value:function(){var e,t;for(e in this,t=[],this)this[e],t.push(delete this[e]);return t}}]),e}();return e.types=["data","openBracket","closeBracket"],e}.call(this)},function(e,t){t.findMainGraph=e=>{if(!e.graphs.length)return null;if(e.main){if(e.graphs.find(t=>t.properties.id===e.main))return e.main}const t=e.graphs.find(e=>"main"===e.name||!!e.properties.main);return t?t.properties.id:e.graphs[0].properties.id},t.findGraph=(e,t)=>t.graphs?t.graphs.find(t=>t.name===e||t.properties.id===e):null,t.findComponent=(e,t)=>t.components?t.components.find(t=>t.name===e):null,t.findByComponent=(e,r)=>{let[n,o]=e.split("/");o||(o=n,n=void 0);const i=t.findGraph(o,r);if(i)return["graph",i];const s=t.findComponent(o,r);return s?["component",s]:["runtime",e]},t.findProject=(e,t)=>t?t.find(t=>t.id===e):null,t.getProjectHash=(e,r)=>{if(e.runtime)return e.main?void r(null,["runtime",e.runtime,e.main]):void r(null,["runtime",e.runtime]);if(!e.graphs.length)return e.components.length?void r(null,["project",e.id,"component",e.components[0].name]):void setTimeout(()=>e.graphs.length||e.components.length?t.getProjectHash(e,r):r(new Error(`Project ${e.id} has no graphs or components`)),100);const n=e.main||e.graphs[0].properties.id;n?r(null,["project",e.id,n]):r(new Error("Unable find a main graph for project "+e.id))},t.isReadOnly=e=>!e.project||(!(!e.graph||-1!==e.project.graphs.indexOf(e.graph))||!(!e.component||-1!==e.project.components.indexOf(e.component))),t.guessLanguage=(e,t="javascript")=>-1!==e.indexOf("topic: ")&&-1!==e.indexOf("cases:")?"yaml":t},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=r(103);
/*!
 * Utils for plugins (not exported)
 */
var o=r(294);t.use=function(e){return~n.indexOf(e)||(e(t,o),n.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var i=r(28);t.config=i;
/*!
 * Primary `Assertion` prototype
 */
var s=r(311);t.use(s);
/*!
 * Core Assertions
 */
var a=r(312);t.use(a);
/*!
 * Expect interface
 */
var c=r(313);t.use(c);
/*!
 * Should interface
 */
var u=r(314);t.use(u);
/*!
 * Assert interface
 */
var p=r(315);t.use(p)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),r=3!==arguments.length||r,n)(r||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=n[o])}},function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return m})),r.d(t,"v3",(function(){return _})),r.d(t,"v4",(function(){return P})),r.d(t,"v5",(function(){return T})),r.d(t,"NIL",(function(){return D})),r.d(t,"version",(function(){return O})),r.d(t,"validate",(function(){return a})),r.d(t,"stringify",(function(){return d})),r.d(t,"parse",(function(){return g}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function i(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"==typeof e&&s.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var p,l,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r},h=0,f=0;var m=function(e,t,r){var n=t&&r||0,o=t||new Array(16),s=(e=e||{}).node||p,a=void 0!==e.clockseq?e.clockseq:l;if(null==s||null==a){var c=e.random||(e.rng||i)();null==s&&(s=p=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=l=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:f+1,g=u-h+(m-f)/1e4;if(g<0&&void 0===e.clockseq&&(a=a+1&16383),(g<0||u>h)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,f=m,l=a;var y=(1e4*(268435455&(u+=122192928e5))+m)%4294967296;o[n++]=y>>>24&255,o[n++]=y>>>16&255,o[n++]=y>>>8&255,o[n++]=255&y;var v=u/4294967296*1e4&268435455;o[n++]=v>>>8&255,o[n++]=255&v,o[n++]=v>>>24&15|16,o[n++]=v>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(var b=0;b<6;++b)o[n+b]=s[b];return t||d(o)};var g=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var y=function(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(var a=0;a<16;++a)o[i+a]=s[a];return o}return d(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function v(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function w(e,t,r,n,o,i){return b((s=b(b(t,e),b(n,i)))<<(a=o)|s>>>32-a,r);var s,a}function E(e,t,r,n,o,i,s){return w(t&r|~t&n,e,t,o,i,s)}function x(e,t,r,n,o,i,s){return w(t&n|r&~n,e,t,o,i,s)}function S(e,t,r,n,o,i,s){return w(t^r^n,e,t,o,i,s)}function k(e,t,r,n,o,i,s){return w(r^(t|~n),e,t,o,i,s)}var _=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,i=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var a=r,c=n,u=o,p=i;r=E(r,n,o,i,e[s],7,-680876936),i=E(i,r,n,o,e[s+1],12,-389564586),o=E(o,i,r,n,e[s+2],17,606105819),n=E(n,o,i,r,e[s+3],22,-1044525330),r=E(r,n,o,i,e[s+4],7,-176418897),i=E(i,r,n,o,e[s+5],12,1200080426),o=E(o,i,r,n,e[s+6],17,-1473231341),n=E(n,o,i,r,e[s+7],22,-45705983),r=E(r,n,o,i,e[s+8],7,1770035416),i=E(i,r,n,o,e[s+9],12,-1958414417),o=E(o,i,r,n,e[s+10],17,-42063),n=E(n,o,i,r,e[s+11],22,-1990404162),r=E(r,n,o,i,e[s+12],7,1804603682),i=E(i,r,n,o,e[s+13],12,-40341101),o=E(o,i,r,n,e[s+14],17,-1502002290),n=E(n,o,i,r,e[s+15],22,1236535329),r=x(r,n,o,i,e[s+1],5,-165796510),i=x(i,r,n,o,e[s+6],9,-1069501632),o=x(o,i,r,n,e[s+11],14,643717713),n=x(n,o,i,r,e[s],20,-373897302),r=x(r,n,o,i,e[s+5],5,-701558691),i=x(i,r,n,o,e[s+10],9,38016083),o=x(o,i,r,n,e[s+15],14,-660478335),n=x(n,o,i,r,e[s+4],20,-405537848),r=x(r,n,o,i,e[s+9],5,568446438),i=x(i,r,n,o,e[s+14],9,-1019803690),o=x(o,i,r,n,e[s+3],14,-187363961),n=x(n,o,i,r,e[s+8],20,1163531501),r=x(r,n,o,i,e[s+13],5,-1444681467),i=x(i,r,n,o,e[s+2],9,-51403784),o=x(o,i,r,n,e[s+7],14,1735328473),n=x(n,o,i,r,e[s+12],20,-1926607734),r=S(r,n,o,i,e[s+5],4,-378558),i=S(i,r,n,o,e[s+8],11,-2022574463),o=S(o,i,r,n,e[s+11],16,1839030562),n=S(n,o,i,r,e[s+14],23,-35309556),r=S(r,n,o,i,e[s+1],4,-1530992060),i=S(i,r,n,o,e[s+4],11,1272893353),o=S(o,i,r,n,e[s+7],16,-155497632),n=S(n,o,i,r,e[s+10],23,-1094730640),r=S(r,n,o,i,e[s+13],4,681279174),i=S(i,r,n,o,e[s],11,-358537222),o=S(o,i,r,n,e[s+3],16,-722521979),n=S(n,o,i,r,e[s+6],23,76029189),r=S(r,n,o,i,e[s+9],4,-640364487),i=S(i,r,n,o,e[s+12],11,-421815835),o=S(o,i,r,n,e[s+15],16,530742520),n=S(n,o,i,r,e[s+2],23,-995338651),r=k(r,n,o,i,e[s],6,-198630844),i=k(i,r,n,o,e[s+7],10,1126891415),o=k(o,i,r,n,e[s+14],15,-1416354905),n=k(n,o,i,r,e[s+5],21,-57434055),r=k(r,n,o,i,e[s+12],6,1700485571),i=k(i,r,n,o,e[s+3],10,-1894986606),o=k(o,i,r,n,e[s+10],15,-1051523),n=k(n,o,i,r,e[s+1],21,-2054922799),r=k(r,n,o,i,e[s+8],6,1873313359),i=k(i,r,n,o,e[s+15],10,-30611744),o=k(o,i,r,n,e[s+6],15,-1560198380),n=k(n,o,i,r,e[s+13],21,1309151649),r=k(r,n,o,i,e[s+4],6,-145523070),i=k(i,r,n,o,e[s+11],10,-1120210379),o=k(o,i,r,n,e[s+2],15,718787259),n=k(n,o,i,r,e[s+9],21,-343485551),r=b(r,a),n=b(n,c),o=b(o,u),i=b(i,p)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(v(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var P=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return d(n)};function C(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function A(e,t){return e<<t|e>>>32-t}var T=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),p=0;p<16;++p)u[p]=e[64*c+4*p]<<24|e[64*c+4*p+1]<<16|e[64*c+4*p+2]<<8|e[64*c+4*p+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<s;++l){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=a[l][h];for(var f=16;f<80;++f)d[f]=A(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var m=r[0],g=r[1],y=r[2],v=r[3],b=r[4],w=0;w<80;++w){var E=Math.floor(w/20),x=A(m,5)+C(E,g,y,v)+b+t[E]+d[w]>>>0;b=v,v=y,y=A(g,30)>>>0,g=m,m=x}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),D="00000000-0000-0000-0000-000000000000";var O=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,r){const{basename:n}=r(10);t.sortByName=(e,r)=>{const n=t.unnamespace(t.getName(e)),o=t.unnamespace(t.getName(r));return n.localeCompare(o)},t.getName=(e,t=!0)=>{if(!e)return t?"Unknown":null;const r=(null!=e.properties?e.properties.name:void 0)||e.name||e.id;return!r&&t?"Unknown":r},t.unnamespace=e=>-1===e.indexOf("/")?e:n(e),t.namespace=(e,t)=>-1!==e.indexOf("/")?e:`${t}/${e}`,t.sortBySeen=(e,t)=>{const r=e,n=t;return r.seen?n.seen?(r.seen="object"==typeof r.seen?r.seen:new Date(r.seen),n.seen="object"==typeof n.seen?n.seen:new Date(n.seen),r.seen>n.seen?-1:n.seen>r.seen?1:0):-1:1},t.addToList=(e,r,n=t.sortByName)=>{let o=!1;e.forEach(e=>{if(e===r)return void(o=!0);if(t.unnamespace(t.getName(e,!1))===t.unnamespace(t.getName(r,!1))){const t=e;Object.keys(r).forEach(e=>{t[e]=r[e]}),o=!0}}),o||(e.push(r),e.sort(n))},t.removeFromList=(e,t)=>{const r=e.find(e=>{if(e===t)return!0;return(e.properties?e.properties.id:e.id)===(t.properties?t.properties.id:t.id)});r&&e.splice(e.indexOf(r),1)}},function(e,t,r){"use strict";var n={};function o(e,t,r){r||(r=Error);var o=function(e){var r,n;function o(r,n,o){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,o))||this}return n=e,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(r);o.prototype.name=r.name,o.prototype.code=e,n[e]=o}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var o=r(82),i=r(86);r(23)(u,o);for(var s=n(i.prototype),a=0;a<s.length;a++){var c=s[a];u.prototype[c]||(u.prototype[c]=i.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||t.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(3))},function(e,t,r){"use strict";function n(e,t,r,n){var o=n?" !== ":" === ",i=n?" || ":" && ",s=n?"!":"",a=n?"":"!";switch(e){case"null":return t+o+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+i+"typeof "+t+o+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+o+'"number"'+i+a+"("+t+" % 1)"+i+t+o+t+(r?i+s+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+o+'"'+e+'"'+(r?i+s+"isFinite("+t+")":"")+")";default:return"typeof "+t+o+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var o="",s=i(e);for(var a in s.array&&s.object&&(o=s.null?"(":"(!"+t+" || ",o+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)o+=(o?" && ":"")+n(a,t,r,!0);return o}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(o[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:u,equal:r(59),ucs2length:r(222),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:p,getPathExpr:function(e,t,r,n){return h(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=p(r?"/"+f(t):c(t));return h(e,n)},getData:function(e,t,r){var n,o,i,s;if(""===e)return"rootData";if("/"==e[0]){if(!l.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i="rootData"}else{if(!(s=e.match(d)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(o=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!o)return i}for(var a=i,u=o.split("/"),p=0;p<u.length;p++){var h=u[p];h&&(i+=c(m(h)),a+=" && "+i)}return a},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var o=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+u(e)+"']"}function u(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function p(e){return"'"+u(e)+"'"}var l=/^\/(?:[^~]|~0|~1)*$/,d=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";function n(e){return null==e}e.exports.isNothing=n,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:n(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,o,i;if(t)for(r=0,n=(i=Object.keys(t)).length;r<n;r+=1)e[o=i[r]]=t[o];return e}},function(e,t,r){"use strict";var n=r(26),o=r(32),i=r(7);function s(e,t,r){var n=[];return e.include.forEach((function(e){r=s(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function a(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}a.DEFAULT=null,a.create=function(){var e,t;switch(arguments.length){case 1:e=a.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(e=n.toArray(e),t=n.toArray(t),!e.every((function(e){return e instanceof a})))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof i})))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new a({include:e,explicit:t})},e.exports=a},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,r){var n=r(140),o=r(142);e.exports={SyntaxError:n.SyntaxError,parse:n.parse,serialize:o}},function(e,t,r){"use strict";var n=r(154),o=r(156);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(u),l=["%","/","?",";","#"].concat(p),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(39);function b(e,t,r){if(e&&o.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,r),n}i.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(a);if(b=b.trim(),!r&&1===e.split("#").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=s.exec(b);if(E){var x=(E=E[0]).toLowerCase();this.protocol=x,b=b.substr(E.length)}if(r||E||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||E&&g[E]||(b=b.substr(2),this.slashes=!0)}if(!g[E]&&(S||E&&!y[E])){for(var k,_,P=-1,C=0;C<d.length;C++){-1!==(A=b.indexOf(d[C]))&&(-1===P||A<P)&&(P=A)}-1!==(_=-1===P?b.lastIndexOf("@"):b.lastIndexOf("@",P))&&(k=b.slice(0,_),b=b.slice(_+1),this.auth=decodeURIComponent(k)),P=-1;for(C=0;C<l.length;C++){var A;-1!==(A=b.indexOf(l[C]))&&(-1===P||A<P)&&(P=A)}-1===P&&(P=b.length),this.host=b.slice(0,P),b=b.slice(P),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var D=this.hostname.split(/\./),O=(C=0,D.length);C<O;C++){var R=D[C];if(R&&!R.match(h)){for(var N="",I=0,j=R.length;I<j;I++)R.charCodeAt(I)>127?N+="x":N+=R[I];if(!N.match(h)){var F=D.slice(0,C),M=D.slice(C+1),L=R.match(f);L&&(F.push(L[1]),M.unshift(L[2])),M.length&&(b="/"+M.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[x])for(C=0,O=p.length;C<O;C++){var U=p[C];if(-1!==b.indexOf(U)){var q=encodeURIComponent(U);q===U&&(q=escape(U)),b=b.split(U).join(q)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var $=b.indexOf("?");if(-1!==$?(this.search=b.substr($),this.query=b.substr($+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,$)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var p=c[u];"protocol"!==p&&(r[p]=e[p])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var h=l[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=w||b||r.host&&e.pathname,x=E,S=r.pathname&&r.pathname.split("/")||[],k=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(k&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),E=E&&(""===f[0]||""===S[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(k)r.hostname=r.host=S.shift(),(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=S.slice(-1)[0],P=(r.host||e.host||S.length>1)&&("."===_||".."===_)||""===_,C=0,A=S.length;A>=0;A--)"."===(_=S[A])?S.splice(A,1):".."===_?(S.splice(A,1),C++):C&&(S.splice(A,1),C--);if(!E&&!x)for(;C--;C)S.unshift("..");!E||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),P&&"/"!==S.join("/").substr(-1)&&S.push("");var T,D=""===S[0]||S[0]&&"/"===S[0].charAt(0);k&&(r.hostname=r.host=D?"":S.length?S.shift():"",(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(E=E||r.host&&S.length)&&!D&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){const n=r(40);class o extends n.EventEmitter{constructor(e){super(),this.definition=e,this.definition.capabilities||(this.definition.capabilities=[]),this.graph=null}setMain(e){this.graph=e}getType(){return this.definition.protocol}getAddress(){return this.definition.address}canDo(e){return-1!==this.definition.capabilities.indexOf(e)}isConnected(){return!1}connect(){}disconnect(){}reconnect(){return this.disconnect(),this.connect()}start(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("start",{graph:this.graph.name||this.graph.properties.id})}stop(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("stop",{graph:this.graph.name||this.graph.properties.id})}setParentElement(){}getElement(){}recvMessage(e){switch(this.emit("message",e),e.protocol){case"runtime":return this.recvRuntime(e.command,e.payload);case"graph":return this.recvGraph(e.command,e.payload);case"network":return this.recvNetwork(e.command,e.payload);case"component":return this.recvComponent(e.command,e.payload);case"trace":return this.recvTrace(e.command,e.payload);default:return null}}recvRuntime(e,t){"runtime"===e&&(Object.keys(t).forEach(e=>{const r=t[e];this.definition[e]=r}),this.emit("capabilities",t.capabilities||[])),this.emit("runtime",{command:e,payload:t})}recvComponent(e,t){switch(e){case"error":return void this.emit("network",{command:e,payload:t});default:this.emit("component",{command:e,payload:t})}}recvGraph(e,t){this.emit("graph",{command:e,payload:t})}recvNetwork(e,t){switch(e){case"started":return void this.emit("execution",{running:null==t||null==t.running||t.running,started:null==t||!t.started||t.started});case"stopped":return void this.emit("execution",{running:null!=t&&null!=t.running&&t.running,started:!(null==t||!t.started)&&t.started});case"status":return void this.emit("execution",{running:t.running,started:t.started});case"icon":return void this.emit("icon",t);default:this.emit("network",{command:e,payload:t})}}recvTrace(e,t){this.emit("trace",{command:e,payload:t})}sendRuntime(e,t={}){return this.send("runtime",e,{...t,secret:this.definition.secret})}sendGraph(e,t={}){return this.send("graph",e,{...t,secret:this.definition.secret})}sendNetwork(e,t={}){return this.send("network",e,{...t,secret:this.definition.secret})}sendComponent(e,t={}){return this.send("component",e,{...t,secret:this.definition.secret})}sendTrace(e,t={}){return this.send("trace",e,{...t,secret:this.definition.secret})}send(){}}e.exports=o},function(e,t,r){"use strict";function n(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=n},function(e,t,r){"use strict";var n=r(27);e.exports=new n({include:[r(100)],implicit:[r(282),r(283)],explicit:[r(284),r(285),r(286),r(287)]})},function(e,t,r){e.exports=r(395)},function(e,t,r){t.graph=r(135),t.Graph=t.graph.Graph,t.journal=r(143),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,d,h;l=r(5).EventEmitter,d=r(16),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,e);var t=c(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this)).metadata=n,e.brackets=[],e.connected=!1,e.dataDelegate=null,e.debug=!1,e.emitEvent=e.regularEmitEvent,e}return s(r,[{key:"regularEmitEvent",value:function(e,t){return this.emit(e,t)}},{key:"debugEmitEvent",value:function(e,t){var r;try{return this.emit(e,t)}catch(e){if((r=e).id&&r.metadata&&r.error){if(0===this.listeners("error").length)throw r.error;return void this.emit("error",r)}if(0===this.listeners("error").length)throw r;return this.emit("error",{id:this.to.process.id,error:r,metadata:this.metadata})}}}]),s(r,[{key:"connect",value:function(){if(!this.connected)return this.connected=!0,this.emitEvent("connect",null)}},{key:"disconnect",value:function(){if(this.connected)return this.connected=!1,this.emitEvent("disconnect",null)}},{key:"isConnected",value:function(){return this.connected}},{key:"send",value:function(e){return void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.handleSocketEvent("data",e)}},{key:"post",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.isConnected()||0!==this.brackets.length||this.connect(),this.handleSocketEvent("ip",e,!1),t&&this.isConnected()&&0===this.brackets.length)return this.disconnect()}},{key:"beginGroup",value:function(e){return this.handleSocketEvent("begingroup",e)}},{key:"endGroup",value:function(){return this.handleSocketEvent("endgroup")}},{key:"setDataDelegate",value:function(e){if("function"!=typeof e)throw Error("A data delegate must be a function.");return this.dataDelegate=e}},{key:"setDebug",value:function(e){return this.debug=e,this.emitEvent=this.debug?this.debugEmitEvent:this.regularEmitEvent}},{key:"getId",value:function(){var e,t;return e=function(e){return"".concat(e.process.id,"() ").concat(e.port.toUpperCase())},t=function(e){return"".concat(e.port.toUpperCase()," ").concat(e.process.id,"()")},this.from||this.to?this.from&&!this.to?"".concat(e(this.from)," -> ANON"):this.from?"".concat(e(this.from)," -> ").concat(t(this.to)):"DATA -> ".concat(t(this.to)):"UNDEFINED"}},{key:"legacyToIp",value:function(e,t){if(d.isIP(t))return t;switch(e){case"begingroup":return new d("openBracket",t);case"endgroup":return new d("closeBracket");case"data":return new d("data",t);default:return null}}},{key:"ipToLegacy",value:function(e){switch(e.type){case"openBracket":return{event:"begingroup",payload:e.data};case"data":return{event:"data",payload:e.data};case"closeBracket":return{event:"endgroup",payload:e.data}}}},{key:"handleSocketEvent",value:function(e,t){var r,n,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r=(n="ip"===e&&d.isIP(t))?t:this.legacyToIp(e,t)){if(!this.isConnected()&&i&&0===this.brackets.length&&this.connect(),"begingroup"===e&&this.brackets.push(t),n&&"openBracket"===r.type&&this.brackets.push(r.data),"endgroup"===e){if(0===this.brackets.length)return;r.data=this.brackets.pop(),t=r.data}if(n&&"closeBracket"===t.type){if(0===this.brackets.length)return;this.brackets.pop()}if(this.emitEvent("ip",r),r&&r.type)return n&&(e=(o=this.ipToLegacy(r)).event,t=o.payload),"connect"===e&&(this.connected=!0),"disconnect"===e&&(this.connected=!1),this.emitEvent(e,t)}}}]),r}(l),t.InternalSocket=h,t.createSocket=function(){return new h}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(3))},function(e,t,r){e.exports=r(150)},function(e,t,r){"use strict";t.decode=t.parse=r(157),t.encode=t.stringify=r(158)},function(e,t,r){(function(t){const{EventEmitter:n}=r(5),o=()=>!(void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node"));e.exports={isBrowser:o,EventEmitter:n,WebSocket:o()?window.WebSocket:r(192).w3cwebsocket}}).call(this,r(3))},function(e,t,r){(function(e){const n=r(61);t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.randomString=function(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0,o=e,i=o>=0;i?n<o:n>o;i?n+=1:n-=1){const e=Math.floor(Math.random()*r.length);t+=r.charAt(e)}return t},t.asyncSeries=function(e,t,r){const n=e.slice(0),o=[];!function e(){if(0===n.length)return void r(null,o);const i=n.shift();t(i,(t,n)=>{t?r(t):(o.push(n),e())})}()},t.isArray=Array.isArray||(e=>"[object Array]"==={}.toString.call(e)),t.startsWith=(e,t)=>0===e.indexOf(t);const o=function(e){return t=>new n((r,n)=>setTimeout(n.bind(null,t),e))};t.retryUntil=function(e,t,r=500,i=5){let s=n.reject(new Error("retry starter"));for(let n=0,a=i,c=a>=0;c?n<=a:n>=a;c?n+=1:n-=1)s=s.catch(e).then(t).catch(o(r));return s}}).call(this,r(3))},function(e,t,r){"use strict";var n=r(27);e.exports=n.DEFAULT=new n({include:[r(33)],explicit:[r(288),r(289),r(290)]})},function(e,t,r){var n=r(28);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return n.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var r=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,n){return r.configurable?(Object.defineProperty(e,"length",{get:function(){if(n)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,r){var n=r(28),o=r(13),i=r(107),s=r(43),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return s()?new Proxy(e,{get:function e(r,s){if("string"==typeof s&&-1===n.proxyExcludedKeys.indexOf(s)&&!Reflect.has(r,s)){if(t)throw Error("Invalid Chai property: "+t+"."+s+'. See docs for proper usage of "'+t+'".');var c=null,u=4;throw i(r).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,r){if(Math.abs(e.length-t.length)>=r)return r;for(var n=[],o=0;o<=e.length;o++)n[o]=Array(t.length+1).fill(0),n[o][0]=o;for(var i=0;i<t.length;i++)n[0][i]=i;for(o=1;o<=e.length;o++){var s=e.charCodeAt(o-1);for(i=1;i<=t.length;i++)Math.abs(o-i)>=r?n[o][i]=r:n[o][i]=Math.min(n[o-1][i]+1,n[o][i-1]+1,n[o-1][i-1]+(s===t.charCodeAt(i-1)?0:1))}return n[e.length][t.length]}(s,e,u);t<u&&(c=e,u=t)}})),null!==c?Error("Invalid Chai property: "+s+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+s)}return-1!==a.indexOf(s)||o(r,"lockSsfi")||o(r,"ssfi",e),Reflect.get(r,s)}}):e}},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,s={};function a(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function u(e,t){return e}function p(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return y(o)||(o=p(e,o,n)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),x(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(S(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return e.stylize(Date.prototype.toString.call(r),"date");if(x(r))return l(r)}var u,w="",k=!1,_=["{","}"];(h(r)&&(k=!0,_=["[","]"]),S(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),E(r)&&(w=" "+Date.prototype.toUTCString.call(r)),x(r)&&(w=" "+l(r)),0!==s.length||k&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=k?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)A(t,String(s))?i.push(d(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return d(e,r,n,a,t,k)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,w,_)):_[0]+w+_[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),A(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===k(e)}function x(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=E,t.isError=x,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(387);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=r(388),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(D,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(3))},function(e,t,r){"use strict";(function(n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(422)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(3))},function(e,t,r){var n=r(2),o=r(120);t.createGroup=function(e,t){var r=["g",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)},t.createRect=function(e){return n.createElement("rect",e)},t.createText=function(e){return n.createElement("text",e)},t.createCircle=function(e){return n.createElement("circle",e)},t.createPath=function(e){return n.createElement("path",e)},t.createPolygon=function(e){return n.createElement("polygon",e)},t.createImg=function(e){return o(e)},t.createCanvas=function(e){return n.createElement("canvas",e)},t.createSvg=function(e,t){var r=["svg",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=s(e),u=1;u<arguments.length;u++){for(var p in r=Object(arguments[u]))o.call(r,p)&&(c[p]=r[p]);if(n){a=n(r);for(var l=0;l<a.length;l++)i.call(r,a[l])&&(c[a[l]]=r[a[l]])}}return c}},function(e,t){e.exports=function(e,t,r){if(Array.isArray(e)||Array.isArray(t)||"object"!=typeof e||"object"!=typeof t)return t;for(var n in r=r||!1,e)"function"==typeof e[n]||t[n]&&!r||(t[n]=e[n]);return t}},function(e,t){var r=function(e,t){var r,n;if(void 0===t&&(t=e.nodes.map((function(e){return e.id})),r=e.inports,n=e.outports),!(t.length<1)){for(var o,i,s=1/0,a=1/0,c=-1/0,u=-1/0,p=t.length,l=0;l<p;l++){var d=t[l],h=e.getNode(d);if(h&&h.metadata){h.metadata.x<s&&(s=h.metadata.x),h.metadata.y<a&&(a=h.metadata.y);var f=h.metadata.x+h.metadata.width,m=h.metadata.y+h.metadata.height;f>c&&(c=f),m>u&&(u=m)}}if(r)for(p=(o=Object.keys(r)).length,l=0;l<p;l++)(i=r[o[l]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>u&&(u=i.metadata.y));if(n)for(p=(o=Object.keys(n)).length,l=0;l<p;l++)(i=n[o[l]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>u&&(u=i.metadata.y));return isFinite(s)&&isFinite(a)&&isFinite(c)&&isFinite(u)?{minX:s,minY:a,maxX:c,maxY:u}:null}};e.exports={findMinMax:r,findNodeFit:function(e,t,r,n){var o,i,s,a=e.metadata.x-n,c=e.metadata.y-n,u=e.metadata.x+2*n-a,p=e.metadata.y+2*n-c,l=t/u,d=r/p;return l<d?(i=0-a*(o=l),s=0-c*o+(r-p*o)/2):(i=0-a*(o=d)+(t-u*o)/2,s=0-c*o),{x:i,y:s,scale:o}},findFit:function(e,t,n,o){var i=r(e);if(!i)return{x:0,y:0,scale:1};i.minX-=o,i.minY-=o,i.maxX+=2*o,i.maxY+=2*o;var s,a,c,u=i.maxX-i.minX,p=i.maxY-i.minY,l=t/u,d=n/p;return l<d?(s=l,a=0-i.minX*s,c=0-i.minY*s+(n-p*s)/2):(s=d,a=0-i.minX*s+(t-u*s)/2,c=0-i.minY*s),{x:a,y:c,scale:s,graphWidth:u,graphHeight:p}}}},function(e,t,r){var n=r(12),o={showTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip",{detail:{tooltip:this.props.label,x:e.clientX,y:e.clientY},bubbles:!0});n.findDOMNode(this).dispatchEvent(t)}},hideTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip-hide",{bubbles:!0});this.mounted&&n.findDOMNode(this).dispatchEvent(t)}},componentDidMount:function(){if(this.mounted=!0,!navigator||-1===navigator.userAgent.indexOf("Firefox")){var e=this.getTooltipTrigger();e.addEventListener("tap",this.showTooltip),e.addEventListener("mouseenter",this.showTooltip),e.addEventListener("mouseleave",this.hideTooltip)}},componentWillUnmount:function(){this.mounted=!1}};e.exports={Tooltip:o}},function(e,t,r){(function(e){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m,g;f=r(35),h=r(5).EventEmitter,g=r(144),m=r(37),d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,t);var r,o,p,l=u(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,d),(t=l.call(this)).baseDir=e,t.options=r,t.components=null,t.libraryIcons={},t.processing=!1,t.ready=!1,t.setMaxListeners(0),t}return r=d,(o=[{key:"getModulePrefix",value:function(e){return e?"noflo"===e?"":("@"===e[0]&&(e=e.replace(/\@[a-z\-]+\//,"")),e.replace(/^noflo-/,"")):""}},{key:"listComponents",value:function(e){var t=this;if(this.processing)this.once("ready",(function(){return e(null,t.components)}));else{if(this.components)return e(null,this.components);this.ready=!1,this.processing=!0,this.components={},g.register(this,(function(r){if(r){if(e)return e(r);throw r}if(t.processing=!1,t.ready=!0,t.emit("ready",!0),e)return e(null,t.components)}))}}},{key:"load",value:function(t,r,n){var o,i,s=this;if(this.ready){if(!(o=this.components[t])){for(i in this.components)if(i.split("/")[1]===t){o=this.components[i];break}if(!o)return void r(new Error("Component ".concat(t," not available with base ").concat(this.baseDir)))}if(!this.isGraph(o))return this.createComponent(t,o,n,(function(e,n){return e?r(e):n?("Graph"===t&&(n.baseDir=s.baseDir),"string"==typeof t&&(n.componentName=t),n.isLegacy()&&m.deprecated("Component ".concat(t," uses legacy NoFlo APIs. Please port to Process API")),s.setIcon(t,n),r(null,n)):void r(new Error("Component ".concat(t," could not be loaded.")))}));m.isBrowser()?setTimeout((function(){return s.loadGraph(t,o,r,n)}),0):e.nextTick((function(){return s.loadGraph(t,o,r,n)}))}else this.listComponents((function(e){return e?r(e):s.load(t,r,n)}))}},{key:"createComponent",value:function(e,t,r,n){var o,s;if(!(o=t))return n(new Error("Component ".concat(e," not available")));if("string"==typeof o)return"function"==typeof g.dynamicLoad?void g.dynamicLoad(e,o,r,n):n(Error("Dynamic loading of ".concat(o," for component ").concat(e," not available on this platform.")));if("function"==typeof o.getComponent)try{s=o.getComponent(r)}catch(e){return n(e)}else{if("function"!=typeof o)return void n(new Error("Invalid type ".concat(i(o)," for component ").concat(e,".")));try{s=o(r)}catch(e){return n(e)}}return n(null,s)}},{key:"isGraph",value:function(e){return"object"===i(e)&&e instanceof f.Graph||!("object"!==i(e)||!e.processes||!e.connections)||"string"==typeof e&&(-1!==e.indexOf(".fbp")||-1!==e.indexOf(".json"))}},{key:"loadGraph",value:function(e,t,r,n){var o=this;this.createComponent(e,this.components.Graph,n,(function(n,i){if(n)return r(n);i.loader=o,i.baseDir=o.baseDir,i.inPorts.remove("graph"),i.setGraph(t,(function(t){return t?r(t):(o.setIcon(e,i),r(null,i))}))}))}},{key:"setIcon",value:function(e,t){var r;if(t.getIcon&&!t.getIcon()){var o=n(e.split("/"),2);r=o[0],o[1]&&this.getLibraryIcon(r)?t.setIcon(this.getLibraryIcon(r)):t.isSubgraph()?t.setIcon("sitemap"):t.setIcon("gear")}}},{key:"getLibraryIcon",value:function(e){return this.libraryIcons[e]?this.libraryIcons[e]:null}},{key:"setLibraryIcon",value:function(e,t){return this.libraryIcons[e]=t}},{key:"normalizeName",value:function(e,t){var r,n;return n=this.getModulePrefix(e),r="".concat(n,"/").concat(t),e||(r=t),r}},{key:"registerComponent",value:function(e,t,r,n){var o;if(o=this.normalizeName(e,t),this.components[o]=r,n)return n()}},{key:"registerGraph",value:function(e,t,r,n){return this.registerComponent(e,t,r,n)}},{key:"registerLoader",value:function(e,t){return e(this,t)}},{key:"setSource",value:function(e,t,r,n,o){var i=this;return g.setSource?this.ready?g.setSource(this,e,t,r,n,o):void this.listComponents((function(s){return s?o(s):i.setSource(e,t,r,n,o)})):o(new Error("setSource not allowed"))}},{key:"getSource",value:function(e,t){var r=this;return g.getSource?this.ready?g.getSource(this,e,t):void this.listComponents((function(n){return n?t(n):r.getSource(e,t)})):t(new Error("getSource not allowed"))}},{key:"clear",value:function(){return this.components=null,this.ready=!1,this.processing=!1}}])&&a(r.prototype,o),p&&a(r,p),d}(h),t.ComponentLoader=d}).call(this,r(3))},function(e,t,r){var n=r(176),o={host:"https://api.flowhub.io"};Object.defineProperty(t,"PING_INTERVAL",{value:6e5,enumerable:!0}),t.Runtime=function(e,t){if("object"!=typeof e)throw new Error("Runtime options expected");if(!e.id)throw new Error("Runtime requires an UUID");this.runtime=e,this.options={},Object.keys(o).forEach(function(e){this.options[e]=o[e]}.bind(this)),t&&Object.keys(t).forEach(function(e){this.options[e]=t[e]}.bind(this))},t.Runtime.prototype.register=function(e,t){"function"==typeof e&&(t=e,e=null),this.runtime.user?this.runtime.address?this.runtime.protocol?this.runtime.type?e?n.put(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).send(this.runtime).end(t):n.put(this.options.host+"/runtimes/"+this.runtime.id).send(this.runtime).end(t):t(new Error("Runtime registration requires a type")):t(new Error("Runtime registration requires a protocol")):t(new Error("Runtime registration requires an address URL")):t(new Error("Runtime registration requires a user UUID"))},t.Runtime.prototype.ping=function(e){n.post(this.options.host+"/runtimes/"+this.runtime.id).send({}).end((function(t,r){e&&e(t)}))},t.Runtime.prototype.get=function(e,t){if(!e)return t(new Error("API token required for fetching"));n.get(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).end(function(e,r){e?t(e):200===r.status?(Object.keys(r.body).forEach(function(e){this.runtime[e]="seen"!=e&&"registered"!=e?r.body[e]:new Date(r.body[e])}.bind(this)),t(null,this.runtime)):t(new Error("Request returned "+r.status))}.bind(this))},t.Runtime.prototype.del=function(e,t){if(!e)return t(new Error("API token required for deletion"));n.del(this.options.host+"/runtimes/"+this.runtime.id).set("Authorization","Bearer "+e).end((function(e,r){e&&404===e.status?t():t(e,r)}))},t.list=function(e,r,i){if(!e)return i(new Error("API token required for fetching"));i||(i=r,r={}),Object.keys(o).forEach(function(e){r[e]||(r[e]=o[e])}.bind(this)),n.get(r.host+"/runtimes/").set("Authorization","Bearer "+e).end((function(e,n){if(e)i(e);else if(200===n.status){var o=[];n.body.forEach((function(e){e.registered=new Date(e.registered),e.seen=new Date(e.seen),o.push(new t.Runtime(e,r))})),i(null,o)}else i(new Error("Request returned "+n.status))}))}},function(e,t,r){e.exports=r(189)},function(e,t,r){"use strict";var n=r(22).codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||p()},u=t._writableState&&t._writableState.finished,p=function(){a=!1,u=!0,s||i.call(t)},l=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,l=!0,a||i.call(t)},h=function(e){i.call(t,e)},f=function(){var e;return s&&!l?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},m=function(){t.req.on("finish",p)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",p),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",p),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",p),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",f)}}},function(e,t){e.exports={component:{title:"Component protocol",description:"Protocol for handling the component registry.",output:{error:{id:"output/error",description:"Error response to a command on component protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},component:{id:"output/component",description:"Transmit the metadata about a component instance.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["component"]},payload:{required:["name","subgraph","inPorts","outPorts"],additionalProperties:!1,properties:{name:{type:"string",description:"component name in format that can be used in graphs. Should contain the component library prefix.",example:"my-project/MyComponent"},description:{type:"string",description:"textual description on what the component does"},icon:{type:"string",description:'Visual icon for the component, matching icon names in <a href="http://fortawesome.github.io/Font-Awesome/icons/">Font Awesome</a>'},subgraph:{type:"boolean",description:"boolean telling whether the component is a subgraph"},inPorts:{description:"list of input ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}}}}}}]},componentsready:{id:"output/componentsready",description:"Indication that a component listing has finished",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{enum:["component"],type:"string",description:"type of protocol"},command:{enum:["componentsready"],description:"command to be executed",example:"addnode"},payload:{type:"integer",description:"number of components transmitted in this batch",example:42},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},source:{id:"output/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix",example:"MyComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"components-common"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"unit tests for the component"}}}}}]}},input:{list:{id:"input/list",description:"Request a list of currently available components. Will be responded with a set of `component` messages.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["list"]},payload:{required:[]}}}]},getsource:{id:"input/getsource",description:"Request for the source code of a given component. Will be responded with a `source` message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["getsource"]},payload:{required:["name"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component to for which to get source code. Should contain the library prefix",example:"my-project/SomeComponent"}}}}}]},source:{id:"input/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix.",example:"SomeComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"my-project"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"Unit tests for the component"}}}}}]}}},graph:{$schema:"http://json-schema.org/draft-04/schema#",title:"Graph protocol",description:"This protocol is utilized for communicating about graph changes in both directions.",messages:{error:{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}},clear:{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}},addnode:{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removenode:{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamenode:{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changenode:{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addedge:{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinport:{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameinport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addgroup:{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{error:{id:"output/error",description:"Error response to a command on graph protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},clear:{id:"output/clear",description:"An empty graph was initialized",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"output/addnode",description:"A node was added to a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"output/removenode",description:"A node was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"output/renamenode",description:"A node was renamed in a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"output/changenode",description:"Metadata of a node was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"output/addedge",description:"An edge was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"output/removeedge",description:"An edge was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"output/changeedge",description:"Metadata of an edge was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"output/addinitial",description:"An IIP was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"output/removeinitial",description:"An IIP was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"output/addinport",description:"An exported inport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"output/removeinport",description:"An exported inport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"output/renameinport",description:"An exported inport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"output/addoutport",description:"An exported outport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"output/removeoutport",description:"An exported outport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"output/renameoutport",description:"An exported outport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"output/addgroup",description:"A group was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"output/removegroup",description:"A group was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"output/renamegroup",description:"A group was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"output/changegroup",description:"Metadata of a group was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{clear:{id:"input/clear",description:"Initialize an empty graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"input/addnode",description:"Add node to a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"input/removenode",description:"Remove a node from a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"input/renamenode",description:"Change the ID of a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"input/changenode",description:"Change the metadata associated to a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"input/addedge",description:"Add an edge to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"input/removeedge",description:"Remove an edge from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"input/changeedge",description:"Change an edge's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"input/addinitial",description:"Add an IIP to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"input/removeinitial",description:"Remove an IIP from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"input/addinport",description:"Add an exported inport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"input/removeinport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"input/renameinport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"input/addoutport",description:"Add an exported outport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"input/removeoutport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"input/renameoutport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"input/addgroup",description:"Add a group to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"input/removegroup",description:"Remove a group from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"input/renamegroup",description:"Rename a group in the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"input/changegroup",description:"Change a group's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},network:{$schema:"http://json-schema.org/draft-04/schema#",title:"Network protocol",description:"Protocol for starting and stopping FBP networks, and finding out about their state.",output:{stopped:{id:"output/stopped",description:"Inform that a given network has stopped.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stopped"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was stopped"},uptime:{type:"number",description:"time the network was running, in seconds"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},running:{type:"boolean",description:"whether or not network is currently running"},started:{type:"boolean",description:"whether or not network has been started"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},started:{id:"output/started",description:"Inform that a given network has been started.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["started"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was started"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"whether or not network is currently running"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},status:{id:"output/status",description:"Response to a getstatus message.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["status"]},payload:{required:["running","graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},uptime:{type:"number",description:"time the network has been running, in seconds"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"boolean tells whether the network is running or not"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},output:{id:"output/output",description:"An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["output"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{type:"string",description:"contents of the output line"},type:{type:"string",enum:["message","previewurl"],description:"type of output, either message or previewurl"},url:{type:"string",format:"uri",description:"URL for an image generated by the runtime"}}}}}]},error:{id:"output/error",description:"An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["error"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{description:"contents of the error message",type:"string"},stack:{description:"stack trace",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},processerror:{id:"output/processerror",description:"When in debug mode, a network can signal an error happening inside a process.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["processerror"]},payload:{required:["id","error","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},error:{type:"string",description:"error from the component"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},icon:{id:"output/icon",description:"Icon of a component instance has changed.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["icon"]},payload:{required:["id","icon","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},icon:{type:"string",description:"new icon for the component instance"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},connect:{id:"output/connect",description:"Beginning of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["connect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},begingroup:{id:"output/begingroup",description:"Beginning of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["begingroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,tgt:!0,src:!0,graph:!0,subgraph:!0}}]}}}]},data:{id:"output/data",description:"Data transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["data"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["data"],properties:{data:{description:"actual data being transmitted, encoded in a way that can be carried over the protocol transport"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"}}},{additionalProperties:!1,properties:{data:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},endgroup:{id:"output/endgroup",description:"Ending of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["endgroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},disconnect:{id:"output/disconnect",description:"End of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["disconnect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},edges:{id:"output/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from runtime to UI.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{start:{id:"input/start",description:"Start execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},getstatus:{id:"input/getstatus",description:"Get the current status of the runtime. The runtime should respond with a status message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["getstatus"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},stop:{id:"input/stop",description:"Stop execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},persist:{id:"input/persist",description:"Tells the runtime to persist the current state of graphs and components so that they are available between restarts. Requires the network:persist capability.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["persist"]},payload:{required:[],additionalProperties:!1,properties:null}}}]},debug:{id:"input/debug",description:"Set a network into debug mode",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["debug"]},payload:{additionalProperties:!1,required:["enable","graph"],properties:{enable:{description:"tells whether to put the network in debug mode",type:"boolean"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},edges:{id:"input/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},runtime:{title:"Runtime protocol",description:"When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",input:{getruntime:{id:"input/getruntime",description:"Request the information about the runtime. When receiving this message the runtime should response with a runtime message. If the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["getruntime"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize the client. Provided also in payload for compatibility with older runtimes"}}}}}]},packet:{id:"input/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},output:{error:{id:"output/error",description:"Error response to a command on runtime protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},ports:{id:"output/ports",description:"Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["ports"]},payload:{required:["graph","inPorts","outPorts"],additionalProperties:!1,properties:{inPorts:{description:"list of input ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},runtime:{id:"output/runtime",description:"Response from the runtime to the getruntime request.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["runtime"]},payload:{required:["version","capabilities","type"],additionalProperties:!1,properties:{id:{type:"string",description:"unique runtime ID. Must be a UUID, version 4",example:"f18a4924-9d4f-414d-a37c-cd24b39bba10"},label:{description:"Human-readable description of the runtime",type:"string"},version:{description:"version of the runtime protocol that the runtime supports",type:"string",example:"0.6"},allCapabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do. May include things not permitted for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},capabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},graph:{description:"ID of the currently configured main graph running on the runtime, if any",type:"string",example:"service-main",id:"graph_id"},type:{description:"type of the runtime",type:"string",example:"microflo"},namespace:{description:"Library namespace of the project running on the runtime, if any. Must match that of components belonging to the (top-level) of project.",type:"string",example:"my-project-foo"},repository:{description:"Source-code repository URL of the project running on the runtime, if any",type:"string",example:"https://github.com/flowbased/fbp-protocol.git"},repositoryVersion:{description:"Unique version identifier of the source code of the project, if known. The version should be available in @repository.",type:"string",example:"0.6.3-8-g90edcfc"}}}}}]},packetsent:{id:"output/packetsent",description:"Confirmation that a packet has been sent",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packetsent"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{description:"port name for the input port",id:"port_id",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},packet:{id:"output/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},shared:{$schema:"http://json-schema.org/draft-04/schema#",title:"Shared",description:"Shared schema fragments",graph_id:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},node_id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port_id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},input_message:{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},output_message:{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},metadata_node:{id:"metadata_node",description:"structure of key-value pairs for graph node metadata",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},metadata_edge:{id:"metadata_edge",description:"structure of key-value pairs for graph edge metadata",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},metadata_group:{id:"metadata_group",description:"structure of key-value pairs for graph group metadata",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},port:{id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},port_definition:{id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},iip:{id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},network_event:{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},capabilities:{id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}}},trace:{$schema:"http://json-schema.org/draft-04/schema#",title:"Trace protocol",description:"This protocol is utilized for triggering and transmitting [Flowtrace](https://github.com/flowbased/flowtrace)s",messages:{start:{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}},stop:{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},clear:{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{start:{id:"output/start",description:"Tracing was started",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{id:"output/stop",description:"Tracing was stopped",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},clear:{id:"output/clear",description:"Tracing buffer was cleared",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"output/dump",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type","flowtrace"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"String describing type of trace.",type:"string",enum:["flowtrace.json"]},flowtrace:{description:"A Flowtrace file of `type`",type:"string"}}}}}]},error:{id:"output/error",description:"Error response to a command on trace protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]}},input:{start:{id:"input/start",description:"Enable/start tracing of a network.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{description:"Stop/disable tracing of a network.",id:"input/stop",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"input/dump",description:"Trigger dumping of the current tracing buffer, to return it back to server.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"Type/format of trace to output",type:"string",enum:["flowtrace.json"]}}}}}]},clear:{id:"input/clear",description:"Clear current tracing buffer.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}}}},function(e,t,r){"use strict";var n=r(221),o=r(59),i=r(25),s=r(90),a=r(223);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,i,a,p=u.call(this,t,r);return p&&(o=p.schema,t=p.root,a=p.baseId),o instanceof s?i=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(i=f(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),i}function u(e,t){var r=n.parse(t),o=g(r),i=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==i){var a=v(o),c=this._refs[a];if("string"==typeof c)return p.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==v(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=m(this._getId(e.schema))}return d.call(this,r,i,e.schema,e)}function p(e,t,r){var n=u.call(this,e,t);if(n){var o=n.schema,i=n.baseId;e=n.root;var s=this._getId(o);return s&&(i=b(i,s)),d.call(this,r,i,o,e)}}e.exports=c,c.normalizeId=v,c.fullPath=m,c.url=b,c.ids=function(e){var t=v(this._getId(e)),r={"":t},s={"":m(t,!1)},c={},u=this;return a(e,{allKeys:!0},(function(e,t,a,p,l,d,h){if(""!==t){var f=u._getId(e),m=r[p],g=s[p]+"/"+l;if(void 0!==h&&(g+="/"+("number"==typeof h?h:i.escapeFragment(h))),"string"==typeof f){f=m=v(m?n.resolve(m,f):f);var y=u._refs[f];if("string"==typeof y&&(y=u._refs[y]),y&&y.schema){if(!o(e,y.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=v(g))if("#"==f[0]){if(c[f]&&!o(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else u._refs[f]=g}r[t]=m,s[t]=g}})),c},c.inlineRef=f,c.schema=u;var l=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),s=1;s<o.length;s++){var a=o[s];if(a){if(void 0===(r=r[a=i.unescapeFragment(a)]))break;var c;if(!l[a]&&((c=this._getId(r))&&(t=b(t,c)),r.$ref)){var p=b(t,r.$ref),d=u.call(this,n,p);d&&(r=d.schema,n=d.root,t=d.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var h=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var o in t){if("$ref"==o)return!1;if("object"==typeof(r=t[o])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==typeof(r=t[o])&&(n+=e(r)),n==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(h[i])n++;else if("object"==typeof(r=t[i])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=v(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function v(e){return e?e.replace(y,""):""}function b(e,t){return t=v(t),n.resolve(e,t)}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var n=r(58);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:i(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){(function(t,r,n){var o;o=function(){var e,o,i;return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[s]={exports:{}};t[s][0].call(p.exports,(function(e){var r=t[s][1][e];return o(r||e)}),p,p.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,r,n){"use strict";var o;try{throw new Error}catch(e){o=e}var i=e("./schedule"),s=e("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function c(e){for(;e.length()>0;)u(e)}function u(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,r){r?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()},a.prototype.invoke=function(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()},a.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},a.prototype._drainQueues=function(){c(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,c(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},r.exports=a,r.exports.firstLineError=o},{"./queue":26,"./schedule":29}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=!1,i=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var u=r(i),p=new e(t);p._propagateFrom(this,1);var l=this._target();if(p._setBoundTo(u),u instanceof e){var d={promiseRejectionQueued:!1,promise:p,target:l,bindingPromise:u};l._then(t,s,void 0,p,d),u._then(a,c,void 0,p,d),p._setOnCancel(u)}else p._resolveCallback(l);return p},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;function o(e){return function(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(i)}return o}(e,this.pop()).apply(e,this)}function i(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}r.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(n){var r=(void 0)(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),s=i.tryCatch,a=i.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=s(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),c.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,o=r.tryCatch,i=r.errorObj;return function(e,s,a){return function(c){var u=a._boundValue();e:for(var p=0;p<e.length;++p){var l=e[p];if(l===Error||null!=l&&l.prototype instanceof Error){if(c instanceof l)return o(s).call(u,c)}else if("function"==typeof l){var d=o(l).call(u,c);if(d===i)return d;if(d)return o(s).call(u,c)}else if(r.isObject(c)){for(var h=n(l),f=0;f<h.length;++f){var m=h[f];if(l[m]!=c[m])continue e}return o(s).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(o())}function o(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,i=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=i,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=o,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,r,n){"use strict";r.exports=function(r,n,o,i){var s,a,c,u,p=r._async,l=e("./errors").Warning,d=e("./util"),h=e("./es5"),f=d.canAttachTrace,m=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,b=null,w=!1,E=!(0==d.env("BLUEBIRD_DEBUG")),x=!(0==d.env("BLUEBIRD_WARNINGS")||!E&&!d.env("BLUEBIRD_WARNINGS")),S=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!E&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),k=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(x||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var e=[];function t(){for(var t=0;t<e.length;++t)e[t]._notifyUnhandledRejection();n()}function n(){e.length=0}u=function(r){e.push(r),setTimeout(t,1)},h.defineProperty(r,"_unhandledRejectionCheck",{value:t}),h.defineProperty(r,"_unhandledRejectionClear",{value:n})}(),r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u(this))},r.prototype._notifyUnhandledRejectionIsHandled=function(){J("rejectionHandled",s,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),J("unhandledRejection",a,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return $(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=r._getContext();a=d.contextBind(t,e)},r.onUnhandledRejectionHandled=function(e){var t=r._getContext();s=d.contextBind(t,e)};var _=function(){};r.longStackTraces=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&Y()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,o=r.prototype._dereferenceTrace;re.longStackTraces=!0,_=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=o,n.deactivateLongStackTraces(),re.longStackTraces=!1},r.prototype._captureStackTrace=U,r.prototype._attachExtraTrace=q,r.prototype._dereferenceTrace=z,n.activateLongStackTraces()}},r.hasLongStackTraces=function(){return re.longStackTraces&&Y()};var P={unhandledrejection:{before:function(){var e=d.global.onunhandledrejection;return d.global.onunhandledrejection=null,e},after:function(e){d.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=d.global.onrejectionhandled;return d.global.onrejectionhandled=null,e},after:function(e){d.global.onrejectionhandled=e}}},C=function(){var e=function(e,t){if(!e)return!d.global.dispatchEvent(t);var r;try{return r=e.before(),!d.global.dispatchEvent(t)}finally{e.after(r)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new CustomEvent(t,{detail:r,cancelable:!0});return h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(P[t],n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new Event(t,{cancelable:!0});return n.detail=r,h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(P[t],n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,r),e(P[t],n)})}catch(e){}return function(){return!1}}(),A=d.isNode?function(){return t.emit.apply(t,arguments)}:d.global?function(e){var t="on"+e.toLowerCase(),r=d.global[t];return!!r&&(r.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(e,t){return{promise:t}}var D={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:T},O=function(e){var t=!1;try{t=A.apply(null,arguments)}catch(e){p.throwLater(e),t=!0}var r=!1;try{r=C(e,D[e].apply(null,arguments))}catch(e){p.throwLater(e),r=!0}return r||t};function R(){return!1}function N(e,t,r){var n=this;try{e(t,r,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+d.toString(e));n._attachCancellationCallback(e)}))}catch(e){return e}}function I(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?d.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function j(){return this._onCancelField}function F(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function L(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&_()),"warnings"in e){var t=e.warnings;re.warnings=!!t,k=re.warnings,d.isObject(t)&&"wForgottenReturn"in t&&(k=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(p.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=M,r.prototype._propagateFrom=L,r.prototype._onCancel=j,r.prototype._setOnCancel=F,r.prototype._attachCancellationCallback=I,r.prototype._execute=N,G=L,re.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,r.prototype._fireEvent=O):!e.monitoring&&re.monitoring&&(re.monitoring=!1,r.prototype._fireEvent=R)),"asyncHooks"in e&&d.nodeSupportsAsyncResource){var n=re.asyncHooks,s=!!e.asyncHooks;n!==s&&(re.asyncHooks=s,s?o():i())}return r},r.prototype._fireEvent=R,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var G=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function B(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function U(){this._trace=new ee(this._peekContext())}function q(e,t){if(f(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=V(e);d.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),d.notEnumerableProp(e,"__stackCleaned__",!0)}}}function z(){this._trace=void 0}function $(e,t,n){if(re.warnings){var o,i=new l(e);if(t)n._attachExtraTrace(i);else if(re.longStackTraces&&(o=r._peekContext()))o.attachExtraTrace(i);else{var s=V(i);i.stack=s.message+"\n"+s.stack.join("\n")}O("warning",i)||X(i,"",!0)}}function H(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o="    (No stack trace)"===n||v.test(n),i=o&&K(n);o&&!i&&(w&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function V(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:H(t)}}function X(e,t,r){if("undefined"!=typeof console){var n;if(d.isObject(e)){var o=e.stack;n=t+b(o,e)}else n=t+String(e);"function"==typeof c?c(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function J(e,t,r,n){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){p.throwLater(e)}"unhandledRejection"===e?O(e,r,n)||o||X(r,"Unhandled rejection "):O(e,n)}function W(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():d.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function Y(){return"function"==typeof te}var K=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Z(e){var t=e.match(Q);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function ee(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);te(this,ee),t>32&&this.uncycle()}d.inherits(ee,Error),n.CapturedTrace=ee,ee.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,o=this;void 0!==o;++n)t.push(o),o=o._parent;for(n=(e=this._length=n)-1;n>=0;--n){var i=t[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<e;++n){var s=r[t[n].stack];if(void 0!==s&&s!==n){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var a=n>0?t[n-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,u=n-2;u>=0;--u)t[u]._length=c,c++;return}}}},ee.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=V(e),r=t.message,n=[t.stack],o=this;void 0!==o;)n.push(H(o.stack.split("\n"))),o=o._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],o=t.length-1,i=t[o],s=-1,a=n.length-1;a>=0;--a)if(n[a]===i){s=a;break}for(a=s;a>=0;--a){var c=n[a];if(t[o]!==c)break;t.pop(),o--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),d.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),d.notEnumerableProp(e,"__stackCleaned__",!0)}};var te=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():W(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,b=t;var r=Error.captureStackTrace;return K=function(e){return m.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,b=t,w=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return!("stack"in o)&&n&&"number"==typeof Error.stackTraceLimit?(v=e,b=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(b=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?W(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(c=function(e){console.warn(e)},d.isNode&&t.stderr.isTTY?c=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:d.isNode||"string"!=typeof(new Error).stack||(c=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:x,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return S&&r.longStackTraces(),{asyncHooks:function(){return re.asyncHooks},longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return G},boundValueFunction:function(){return B},checkForgottenReturns:function(e,t,r,n,o){if(void 0===e&&null!==t&&k){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var i="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=H(a),u=c.length-1;u>=0;--u){var p=c[u];if(!g.test(p)){var l=p.match(y);l&&(i="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(c.length>0){var d=c[0];for(u=0;u<a.length;++u)if(a[u]===d){u>0&&(s="\n"+a[u-1]);break}}}var h="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(h,!0,t)}},setBounds:function(e,t){if(Y()){for(var r,n,o=(e.stack||"").split("\n"),i=(t.stack||"").split("\n"),s=-1,a=-1,c=0;c<o.length;++c)if(u=Z(o[c])){r=u.fileName,s=u.line;break}for(c=0;c<i.length;++c){var u;if(u=Z(i[c])){n=u.fileName,a=u.line;break}}s<0||a<0||!r||!n||r!==n||s>=a||(K=function(e){if(m.test(e))return!0;var t=Z(e);return!!(t&&t.fileName===r&&s<=t.line&&t.line<=a)})}},warn:$,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),$(r)},CapturedTrace:ee,fireDomEvent:C,fireGlobalEvent:A}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function o(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,o,i=e("./es5"),s=i.freeze,a=e("./util"),c=a.inherits,u=a.notEnumerableProp;function p(e,t){function r(n){if(!(this instanceof r))return new r(n);u(this,"message","string"==typeof n?n:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var l=p("Warning","warning"),d=p("CancellationError","cancellation error"),h=p("TimeoutError","timeout error"),f=p("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(e){n=p("TypeError","type error"),o=p("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(f.prototype[m[g]]=Array.prototype[m[g]]);i.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var y=0;function v(e){if(!(this instanceof v))return new v(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];t+=(n=o.join("\n"))+"\n"}return y--,t},c(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:d,TimeoutError:h,OperationalError:v,RejectionError:v,AggregateError:f}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:l}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.CancellationError,s=o.errorObj,a=e("./catch_filter")(n);function c(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function p(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function l(){return h.call(this,this.promise._target()._settledValue())}function d(e){if(!p(this,e))return s.e=e,s}function h(e){var o=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(o._boundValue()):a.call(o._boundValue(),e);if(c===n)return c;if(void 0!==c){o._setReturnedNonUndefined();var h=r(c,o);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var f=new i("late cancellation observer");return o._attachExtraTrace(f),s.e=f,s}h.isPending()&&h._attachCancellationCallback(new u(this))}return h._then(l,d,void 0,this,void 0)}}}return o.isRejected()?(p(this),s.e=e,s):(p(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){p(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,h,h)},t.prototype.tap=function(e){return this._passThrough(e,1,h)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,h);var n,i=new Array(r-1),s=0;for(n=0;n<r-1;++n){var c=arguments[n];if(!o.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(c)));i[s++]=c}i.length=s;var u=arguments[n];return this._passThrough(a(i,u,this),1,void 0,h)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./errors").TypeError,c=e("./util"),u=c.errorObj,p=c.tryCatch,l=[];function d(e,r,o,i){if(s.cancellation()){var a=new t(n),c=this._finallyPromise=new t(n);this._promise=a.lastly((function(){return c})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new t(n))._captureStackTrace();this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(l):l,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,i),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var r=this._promise;if(e===u)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var i=o(n,this._promise);if(i instanceof t||null!==(i=function(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var s=p(r[i])(e);if(n._popContext(),s===u){n._pushContext();var a=t.reject(u.e);return n._popContext(),a}var c=o(s,n);if(c instanceof t)return c}return null}(i,this._yieldHandlers,this._promise))){var s=(i=i._target())._bitField;0==(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=d,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new n(void 0,void 0,r,o),s=i.promise();return i._generator=t,i._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+c.classString(e));l.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new d(e,this),o=n.promise();return n._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var o=new r(n).promise();return void 0!==e?o.spread(e):o}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=a.tryCatch,u=a.errorObj,p=t._async;function l(e,r,n,o){this.constructor$(e),this._promise._captureStackTrace();var s=t._getContext();if(this._callback=a.contextBind(s,r),this._preservedValues=o===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0),a.isArray(e))for(var c=0;c<e.length;++c){var u=e[c];u instanceof t&&u.suppressUnhandledRejections()}}function d(e,r,o,i){if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var s=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+a.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(o.concurrency)));s=o.concurrency}return new l(e,r,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,i).promise()}a.inherits(l,r),l.prototype._asyncInit=function(){this._init$(void 0,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),a=this._preservedValues,p=this._limit;if(r<0){if(n[r=-1*r-1]=e,p>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(p>=1&&this._inFlight>=p)return n[r]=e,this._queue.push(r),!1;null!==a&&(a[r]=e);var l=this._promise,d=this._callback,h=l._boundValue();l._pushContext();var f=c(d).call(h,e,r,i),m=l._popContext();if(s.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",l),f===u)return this._reject(f.e),!0;var g=o(f,this._promise);if(g instanceof t){var y=(g=g._target())._bitField;if(0==(50397184&y))return p>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[r]=f}return++this._totalResolved>=i&&(null!==a?this._filter(n,a):this._resolve(n),!0)},l.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},l.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),o=0,i=0;i<r;++i)e[i]&&(n[o++]=t[i]);n.length=o,this._resolve(n)},l.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,r,n){return d(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var o=a(e).apply(this,arguments),s=n._popContext();return i.checkForgottenReturns(o,s,"Promise.method",n),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+s.classString(e));var n,c=new t(r);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],p=arguments[2];n=s.isArray(u)?a(e).apply(p,u):a(e).call(p,u)}else n=a(e)();var l=c._popContext();return i.checkForgottenReturns(n,l,"Promise.try",c),c._resolveFromSyncValue(n),c},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),o=n.maybeWrapAsError,i=e("./errors").OperationalError,s=e("./es5"),a=/^(?:name|message|stack|cause)$/;function c(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new i(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=s.keys(e),o=0;o<r.length;++o){var c=r[o];a.test(c)||(t[c]=e[c])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var i=c(o(r));e._attachExtraTrace(i),e._reject(i)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,o=r.tryCatch,i=r.errorObj;function s(e,t){if(!r.isArray(e))return a.call(this,e,t);var s=o(t).apply(this._boundValue(),[null].concat(e));s===i&&n.throwLater(s.e)}function a(e,t){var r=this._boundValue(),s=void 0===e?o(t).call(r,null):o(t).call(r,null,e);s===i&&n.throwLater(s.e)}function c(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var s=o(t).call(this._boundValue(),e);s===i&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=a;void 0!==t&&Object(t).spread&&(r=s),this._then(r,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,r,n){"use strict";r.exports=function(){var n=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},o=function(){return new N.PromiseInspection(this._target())},i=function(e){return N.reject(new v(e))};function s(){}var a={},c=e("./util");c.setReflectHandler(o);var u=function(){var e=t.domain;return void 0===e?null:e},p=function(){return{domain:u(),async:null}},l=c.isNode&&c.nodeSupportsAsyncResource?e("async_hooks").AsyncResource:null,d=function(){return{domain:u(),async:new l("Bluebird::Promise")}},h=c.isNode?p:function(){return null};c.notEnumerableProp(N,"_getContext",h);var f=e("./es5"),m=e("./async"),g=new m;f.defineProperty(N,"_async",{value:g});var y=e("./errors"),v=N.TypeError=y.TypeError;N.RangeError=y.RangeError;var b=N.CancellationError=y.CancellationError;N.TimeoutError=y.TimeoutError,N.OperationalError=y.OperationalError,N.RejectionError=y.OperationalError,N.AggregateError=y.AggregateError;var w=function(){},E={},x={},S=e("./thenables")(N,w),k=e("./promise_array")(N,w,S,i,s),_=e("./context")(N),P=_.create,C=e("./debuggability")(N,_,(function(){h=d,c.notEnumerableProp(N,"_getContext",d)}),(function(){h=p,c.notEnumerableProp(N,"_getContext",p)})),A=(C.CapturedTrace,e("./finally")(N,S,x)),T=e("./catch_filter")(x),D=e("./nodeback"),O=c.errorObj,R=c.tryCatch;function N(e){e!==w&&function(e,t){if(null==e||e.constructor!==N)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new v("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(e){this.promise._resolveCallback(e)}function j(e){this.promise._rejectCallback(e,!1)}function F(e){var t=new N(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return N.prototype.toString=function(){return"[object Promise]"},N.prototype.caught=N.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),o=0;for(r=0;r<t-1;++r){var s=arguments[r];if(!c.isObject(s))return i("Catch statement predicate: expecting an object but got "+c.classString(s));n[o++]=s}if(n.length=o,"function"!=typeof(e=arguments[r]))throw new v("The last argument to .catch() must be a function, got "+c.toString(e));return this.then(void 0,T(n,e,this))}return this.then(void 0,e)},N.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},N.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(r+=", "+c.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},N.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},N.prototype.spread=function(e){return"function"!=typeof e?i("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,E,void 0)},N.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},N.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},N.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},N.getNewLibraryCopy=r.exports,N.is=function(e){return e instanceof N},N.fromNode=N.fromCallback=function(e){var t=new N(w);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=R(e)(D(t,r));return n===O&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},N.all=function(e){return new k(e).promise()},N.cast=function(e){var t=S(e);return t instanceof N||((t=new N(w))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},N.resolve=N.fulfilled=N.cast,N.reject=N.rejected=function(e){var t=new N(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},N.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+c.classString(e));return g.setScheduler(e)},N.prototype._then=function(e,t,r,n,o){var i=void 0!==o,s=i?o:new N(w),a=this._target(),u=a._bitField;i||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=h();if(0!=(50397184&u)){var l,d,f=a._settlePromiseCtx;0!=(33554432&u)?(d=a._rejectionHandler0,l=e):0!=(16777216&u)?(d=a._fulfillmentHandler0,l=t,a._unsetRejectionIsUnhandled()):(f=a._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),a._attachExtraTrace(d),l=t),g.invoke(f,a,{handler:c.contextBind(p,l),promise:s,receiver:n,value:d})}else a._addCallbacks(e,t,s,n,p);return s},N.prototype._length=function(){return 65535&this._bitField},N.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},N.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},N.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},N.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},N.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},N.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},N.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},N.prototype._isFinal=function(){return(4194304&this._bitField)>0},N.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},N.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},N.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},N.prototype._setAsyncGuaranteed=function(){if(!g.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},N.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},N.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==a)return void 0===t&&this._isBound()?this._boundValue():t},N.prototype._promiseAt=function(e){return this[4*e-4+2]},N.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},N.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},N.prototype._boundValue=function(){},N.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,o=e._receiverAt(0);void 0===o&&(o=a),this._addCallbacks(t,r,n,o,null)},N.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=a),this._addCallbacks(r,n,o,i,null)},N.prototype._addCallbacks=function(e,t,r,n,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=c.contextBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=c.contextBind(o,t));else{var s=4*i-4;this[s+2]=r,this[s+3]=n,"function"==typeof e&&(this[s+0]=c.contextBind(o,e)),"function"==typeof t&&(this[s+1]=c.contextBind(o,t))}return this._setLength(i+1),i},N.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},N.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=S(e,this);if(!(r instanceof N))return this._fulfill(e);t&&this._propagateFrom(r,2);var o=r._target();if(o!==this){var i=o._bitField;if(0==(50397184&i)){var s=this._length();s>0&&o._migrateCallback0(this);for(var a=1;a<s;++a)o._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(o._value());else if(0!=(16777216&i))this._reject(o._reason());else{var c=new b("late cancellation observer");o._attachExtraTrace(c),this._reject(c)}}else this._reject(n())}},N.prototype._rejectCallback=function(e,t,r){var n=c.ensureErrorObject(e),o=n===e;if(!o&&!r&&C.warnings()){var i="a promise was rejected with a non-error: "+c.classString(e);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&o),this._reject(e)},N.prototype._resolveFromExecutor=function(e){if(e!==w){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,r)}));r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},N.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0==(65536&o)){var i;n._pushContext(),t===E?r&&"number"==typeof r.length?i=R(e).apply(this._boundValue(),r):(i=O).e=new v("cannot .spread() a non-array: "+c.classString(r)):i=R(e).call(t,r);var s=n._popContext();0==(65536&(o=n._bitField))&&(i===x?n._reject(r):i===O?n._rejectCallback(i.e,!1):(C.checkForgottenReturns(i,s,"",n,this),n._resolveCallback(i)))}},N.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},N.prototype._followee=function(){return this._rejectionHandler0},N.prototype._setFollowee=function(e){this._rejectionHandler0=e},N.prototype._settlePromise=function(e,t,r,n){var i=e instanceof N,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(i&&e._invokeInternalOnCancel(),r instanceof A&&r.isFinallyHandler()?(r.cancelPromise=e,R(t).call(r,n)===O&&e._reject(O.e)):t===o?e._fulfill(o.call(r)):r instanceof s?r._promiseCancelled(e):i||e instanceof k?e._cancel():r.cancel()):"function"==typeof t?i?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof s?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):i&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(n):e._reject(n))},N.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,o=e.value;"function"==typeof t?r instanceof N?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof N&&r._reject(o)},N.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},N.prototype._settlePromise0=function(e,t,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},N.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},N.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},N.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,c.isNode);(65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},N.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},N.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},N.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},N.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(N.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),N.defer=N.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new N(w),resolve:I,reject:j}},c.notEnumerableProp(N,"_makeSelfResolutionError",n),e("./method")(N,w,S,i,C),e("./bind")(N,w,S,C),e("./cancel")(N,k,i,C),e("./direct_resolve")(N),e("./synchronous_inspection")(N),e("./join")(N,k,S,w,g),N.Promise=N,N.version="3.7.2",e("./call_get.js")(N),e("./generators.js")(N,i,w,S,s,C),e("./map.js")(N,k,i,S,w,C),e("./nodeify.js")(N),e("./promisify.js")(N,w),e("./props.js")(N,k,S,i),e("./race.js")(N,w,S,i),e("./reduce.js")(N,k,i,S,w,C),e("./settle.js")(N,k,C),e("./some.js")(N,k,i),e("./timers.js")(N,w,C),e("./using.js")(N,i,S,P,w,C),e("./any.js")(N),e("./each.js")(N,w),e("./filter.js")(N,w),c.toFastProperties(N),c.toFastProperties(N.prototype),F({a:1}),F({b:2}),F({c:3}),F(1),F((function(){})),F(void 0),F(!1),F(new N(w)),C.setBounds(m.firstLineError,c.lastLineError),N}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util");function a(e){var n=this._promise=new t(r);e instanceof t&&(n._propagateFrom(e,3),e.suppressUnhandledRejections()),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(r,i){var a=n(this._values,this._promise);if(a instanceof t){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,i);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===i?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var u=o("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(u,!1)}},a.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var o=this._promise,i=!1,s=null,a=0;a<r;++a){var c=n(e[a],o);s=c instanceof t?(c=c._target())._bitField:null,i?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):i=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(c,a)}i||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},o=e("./util"),i=e("./nodeback"),s=o.withAppended,a=o.maybeWrapAsError,c=o.canEvaluate,u=e("./errors").TypeError,p={__isPromisified__:!0},l=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function h(e){return!l.test(e)}function f(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=o.getDataPropertyOrDefault(e,t+r,p);return!!n&&f(n)}function g(e,t,r,n){for(var i=o.inheritedDataKeys(e),s=[],a=0;a<i.length;++a){var c=i[a],p=e[c],l=n===d||d(c);"function"!=typeof p||f(p)||m(e,c,t)||!n(c,p,e,l)||s.push(c,p)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o))for(var i=o.replace(r,""),s=0;s<e.length;s+=2)if(e[s]===i)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,r),s}var y=c?void 0:function(e,c,u,p,l,d){var h=function(){return this}(),f=e;function m(){var o=c;c===n&&(o=this);var u=new t(r);u._captureStackTrace();var p="string"==typeof f&&this!==h?this[f]:e,l=i(u,d);try{p.apply(o,s(arguments,l))}catch(e){u._rejectCallback(a(e),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof f&&(e=p),o.notEnumerableProp(m,"__isPromisified__",!0),m};function v(e,t,r,i,s){for(var a=new RegExp(t.replace(/([$])/,"\\$")+"$"),c=g(e,t,a,r),u=0,p=c.length;u<p;u+=2){var l=c[u],d=c[u+1],h=l+t;if(i===y)e[h]=y(l,n,l,d,t,s);else{var f=i(d,(function(){return y(l,n,l,d,t,s)}));o.notEnumerableProp(f,"__isPromisified__",!0),e[h]=f}}return o.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new u("expecting a function but got "+o.classString(e));if(f(e))return e;var r=function(e,t,r){return y(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return o.copyDescriptors(e,r,h),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var i=t.filter;"function"!=typeof i&&(i=d);var s=t.promisifier;if("function"!=typeof s&&(s=y),!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=o.inheritedDataKeys(e),c=0;c<a.length;++c){var p=e[a[c]];"constructor"!==a[c]&&o.isClass(p)&&(v(p.prototype,n,i,s,r),v(p,n,i,s,r))}return v(e,n,i,s,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,s=e("./util"),a=s.isObject,c=e("./es5");"function"==typeof Map&&(i=Map);var u=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var o=new Array(2*n.size);return n.forEach(r,o),o}}();function p(e){var t,r=!1;if(void 0!==i&&e instanceof i)t=u(e),r=!0;else{var n=c.keys(e),o=n.length;t=new Array(2*o);for(var s=0;s<o;++s){var a=n[s];t[s]=e[a],t[s+o]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function l(e){var r,i=n(e);return a(i)?(r=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new p(i).promise(),i instanceof t&&r._propagateFrom(i,2),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(p,r),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new i,r=e.length/2|0,n=0;n<r;++n){var o=e[r+n],s=e[n];t.set(o,s)}return t}(this._values);else{r={};for(var n=this.length(),o=0,s=this.length();o<s;++o)r[this._values[o+n]]=this._values[o]}return this._resolve(r),!0}return!1},p.prototype.shouldCopyValues=function(){return!1},p.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return l(this)},t.props=function(e){return l(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+t],e[i+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util");function s(e,a){var c,u=n(e);if(u instanceof t)return(c=u).then((function(e){return s(e,c)}));if(null===(e=i.asArray(e)))return o("expecting an array or an iterable object but got "+i.classString(e));var p=new t(r);void 0!==a&&p._propagateFrom(a,3);for(var l=p._fulfill,d=p._reject,h=0,f=e.length;h<f;++h){var m=e[h];(void 0!==m||h in e)&&t.cast(m)._then(l,d,void 0,p,null)}return p}t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=a.tryCatch;function u(e,r,n,o){this.constructor$(e);var s=t._getContext();this._fn=a.contextBind(s,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,r,o){return"function"!=typeof t?n("expecting a function but got "+a.classString(t)):new u(e,t,r,o).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=o(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(h,void 0,void 0,this,void 0)):h.call(this,r)}function h(e){var r,n=this.array,o=n._promise,i=c(n._fn);o._pushContext(),(r=void 0!==n._eachValues?i.call(o._boundValue(),e,this.index,this.length):i.call(o._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=o._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",o),r}a.inherits(u,r),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){var r,n;this._values=e;var o=e.length;void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r;for(var i=n;i<o;++i){var s=e[i];s instanceof t&&s.suppressUnhandledRejections()}if(!r.isRejected())for(;n<o;++n){var a={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(d,void 0,void 0,a,void 0),0==(127&n)&&r._setNoAsyncGuarantee()}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(p,p,void 0,r,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,r,n){return l(e,t,r,n)}}},{"./util":36}],29:[function(e,o,i){"use strict";var s,a,c,u,p,l=e("./util"),d=l.getNativePromise();if(l.isNode&&"undefined"==typeof MutationObserver){var h=r.setImmediate,f=t.nextTick;s=l.isRecentNode?function(e){h.call(r,e)}:function(e){f.call(t,e)}}else if("function"==typeof d&&"function"==typeof d.resolve){var m=d.resolve();s=function(e){m.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?void 0!==n?function(e){n(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(a=document.createElement("div"),c={attributes:!0},u=!1,p=document.createElement("div"),new MutationObserver((function(){a.classList.toggle("foo"),u=!1})).observe(p,c),function(e){var t=new MutationObserver((function(){t.disconnect(),e()}));t.observe(a,c),u||(u=!0,p.classList.toggle("foo"))});o.exports=s},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=t.PromiseInspection;function i(e){this.constructor$(e)}e("./util").inherits(i,r),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var r=new o;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},i.prototype._promiseRejected=function(e,t){var r=new o;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=e("./errors").RangeError,s=e("./errors").AggregateError,a=o.isArray,c={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e),o=r.promise();return r.setHowMany(t),r.init(),o}o.inherits(u,r),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return p(e,t)},t.prototype.some=function(e){return p(this,e)},t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),o=n.errorObj,i=n.isObject,s={}.hasOwnProperty;return function(e,a){if(i(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return o.e=e,o}}(e);if(c===o){a&&a._pushContext();var u=t.reject(c.e);return a&&a._popContext(),u}if("function"==typeof c)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(u=new t(r),e._then(u._fulfill,u._reject,void 0,u,null),u):function(e,i,s){var a=new t(r),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var u=n.tryCatch(i).call(e,(function(e){a&&(a._resolveCallback(e),a=null)}),(function(e){a&&(a._rejectCallback(e,!1,!0),a=null)}));return a&&u===o&&(a._rejectCallback(u.e,!0,!0),a=null),c}(e,c,a)}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var i,c;return void 0!==o?(i=t.resolve(o)._then(a,null,null,e,void 0),n.cancellation()&&o instanceof t&&i._setOnCancel(o)):(i=new t(r),c=setTimeout((function(){i._fulfill()}),+e),n.cancellation()&&i._setOnCancel(new s(c)),i._captureStackTrace()),i._setAsyncGuaranteed(),i};function u(e){return clearTimeout(this.handle),e}function p(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){var r,a;e=+e;var c=new s(setTimeout((function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new i("operation timed out"):new i(t),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,a)}),e));return n.cancellation()?(a=this.then(),(r=a._then(u,p,void 0,c,void 0))._setOnCancel(c)):r=this._then(u,p,void 0,c,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=e("./errors").TypeError,u=e("./util").inherits,p=a.errorObj,l=a.tryCatch,d={};function h(e){setTimeout((function(){throw e}),0)}function f(e,r){var o=0,s=e.length,a=new t(i);return function i(){if(o>=s)return a._fulfill();var c=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(e){return h(e)}if(c instanceof t)return c._then(i,h,null,null,null)}i()}(),a}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function g(e,t,r){this.constructor$(e,t,r)}function y(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==d?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},u(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o,i=arguments[e-1];if("function"!=typeof i)return r("expecting a function but got "+a.classString(i));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,c=!1):(o=arguments,e--);for(var u=new v(e),d=0;d<e;++d){var h=o[d];if(m.isDisposer(h)){var g=h;(h=h.promise())._setDisposable(g)}else{var b=n(h);b instanceof t&&(h=b._then(y,null,null,{resources:u,index:d},void 0))}u[d]=h}var w=new Array(u.length);for(d=0;d<w.length;++d)w[d]=t.resolve(u[d]).reflect();var E=t.all(w).then((function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return p.e=r.error(),p;if(!r.isFulfilled())return void E.cancel();e[t]=r.value()}x._pushContext(),i=l(i);var n=c?i.apply(void 0,e):i(e),o=x._popContext();return s.checkForgottenReturns(n,o,"Promise.using",x),n})),x=E.lastly((function(){var e=new t.PromiseInspection(E);return f(u,e)}));return u.promise=x,x._setOnCancel(u),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,n,o){"use strict";var i=e("./es5"),s="undefined"==typeof navigator,a={e:{}},c,u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function p(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function l(e){return c=e,p}var d=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function h(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function f(e){return"function"==typeof e||"object"==typeof e&&null!==e}function m(e){return h(e)?new Error(C(e)):e}function g(e,t){var r,n=e.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o}function y(e,t,r){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(e,t,r){if(h(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return i.defineProperty(e,t,n),e}function b(e){throw e}var w=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(i.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],o=Object.create(null);null!=e&&!t(e);){var s;try{s=r(e)}catch(e){return n}for(var a=0;a<s.length;++a){var c=s[a];if(!o[c]){o[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&n.push(c)}}e=i.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var i in r)if(n.call(r,i))o.push(i);else{for(var s=0;s<e.length;++s)if(n.call(e[s],i))continue e;o.push(i)}return o}}(),E=/this\s*\.\s*\S+\s*=/;function x(e){try{if("function"==typeof e){var t=i.names(e.prototype),r=i.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=E.test(e+"")&&i.names(e).length>0;if(r||n||o)return!0}return!1}catch(e){return!1}}function S(e){function t(){}t.prototype=e;var r=new t;function n(){return typeof r.foo}return n(),n(),e}var k=/^[a-z$_][a-z$_0-9]*$/i;function _(e){return k.test(e)}function P(e,t,r){for(var n=new Array(e),o=0;o<e;++o)n[o]=t+o+r;return n}function C(e){try{return e+""}catch(e){return"[no string representation]"}}function A(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function T(e){try{v(e,"isOperational",!0)}catch(e){}}function D(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function O(e){return A(e)&&i.propertyIsWritable(e,"stack")}var R="stack"in new Error?function(e){return O(e)?e:new Error(C(e))}:function(e){if(O(e))return e;try{throw new Error(C(e))}catch(e){return e}};function N(e){return{}.toString.call(e)}function I(e,t,r){for(var n=i.names(e),o=0;o<n.length;++o){var s=n[o];if(r(s))try{i.defineProperty(t,s,i.getDescriptor(e,s))}catch(e){}}}var j=function(e){return i.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};j=function(e){return i.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var M=void 0!==t&&"[object process]"===N(t).toLowerCase(),L=void 0!==t&&void 0!==t.env,G;function B(e){return L?t.env[e]:void 0}function U(){if("function"==typeof Promise)try{if("[object Promise]"===N(new Promise((function(){}))))return Promise}catch(e){}}function q(e,t){if(null===e||"function"!=typeof t||t===G)return t;null!==e.domain&&(t=e.domain.bind(t));var r=e.async;if(null!==r){var n=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=n,e[1]=this,r.runInAsyncScope.apply(r,e)}}return t}var z={setReflectHandler:function(e){G=e},isClass:x,isIdentifier:_,inheritedDataKeys:w,getDataPropertyOrDefault:y,thrower:b,isArray:i.isArray,asArray:j,notEnumerableProp:v,isPrimitive:h,isObject:f,isError:A,canEvaluate:s,errorObj:a,tryCatch:l,inherits:d,withAppended:g,maybeWrapAsError:m,toFastProperties:S,filledRange:P,toString:C,canAttachTrace:O,ensureErrorObject:R,originatesFromRejection:D,markAsOriginatingFromRejection:T,classString:N,copyDescriptors:I,isNode:M,hasEnvVariables:L,env:B,global:u,getNativePromise:U,contextBind:q},$;z.isRecentNode=z.isNode&&(t.versions&&t.versions.node?$=t.versions.node.split(".").map(Number):t.version&&($=t.version.split(".").map(Number)),0===$[0]&&$[1]>10||$[0]>0),z.nodeSupportsAsyncResource=z.isNode&&function(){var t=!1;try{t="function"==typeof e("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(e){t=!1}return t}(),z.isNode&&z.toFastProperties(t);try{throw new Error}catch(e){z.lastLineError=e}n.exports=z},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},e.exports=o(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(3),r(9),r(257).setImmediate)},function(e,t,r){const n=r(264),o=r(10),i=r(41),s=r(98);function a(e){const t=e;return e.name||(t.name=e.topic),e.cases||(t.cases=[]),e}t.validate=function(e){const t="undefined"!=typeof window&&window.tv4?window.tv4:r(73);if(!t)throw new Error("TV4 not available, unable to validate");t.reset(),Object.keys(s).forEach(e=>{const r=s[e];t.addSchema(r.id,r)});const n=t.validateMultiple(e,"testsfile.json");return n.missing.length&&(n.passed=!1),n},t.create=e=>a(e),t.loadYAML=function(e,t){const n=[];try{("undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(99)).safeLoadAll(e,e=>n.push(a(e)))}catch(e){return void t(e)}t(null,n)},t.loadYAMLSync=function(e){const t="undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(99),n=[];return t.safeLoadAll(e,e=>n.push(a(e))),n},t.getSuitesSync=function(e){if(!i.isArray(e))return t.getSuitesSync([e]);let n=[];return e.forEach(e=>{n=n.concat(function(e){const n=r(6);if(n.statSync(e).isDirectory()){const r=n.readdirSync(e).filter(e=>".yaml"===o.extname(e)).map(t=>o.join(e,t));return t.getSuitesSync(r)}const i=n.readFileSync(e,"utf-8");return t.loadYAMLSync(i)}(e))}),n},t.getSuites=function(e,s){if(!i.isArray(e))return void t.getSuites([e],s);i.asyncSeries(e,(e,s)=>{i.startsWith(e,"http://")?function(e,r){n(e).then(e=>e.text()).then(e=>new Promise((r,n)=>{t.loadYAML(e,(e,t)=>{e?n(e):r(t)})})).then(e=>{r(null,e)},r)}(e,s):function(e,n){const i=r(6);i.stat(e,(r,s)=>{r?n(r):s.isDirectory()?i.readdir(e,(r,i)=>{if(r)return void n(r);const s=i.filter(e=>".yaml"===o.extname(e)).map(t=>o.join(e,t));t.getSuites(s,n)}):i.readFile(e,"utf-8",(e,r)=>{e?n(e):t.loadYAML(r,n)})})}(e,s)},(e,t)=>{if(e)return void s(e);const r=t.reduce((e,t)=>e.concat(t),[]);s(null,r)})}},function(e,t,r){"use strict";var n=r(27);e.exports=new n({explicit:[r(275),r(276),r(277)]})},function(e,t,r){(function(t){var r;r=function(){"use strict";var e="function"==typeof Promise,r="object"==typeof self?self:t,n="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,u=n&&void 0!==Symbol.iterator,p=n&&void 0!==Symbol.toStringTag,l=i&&"function"==typeof Set.prototype.entries,d=o&&"function"==typeof Map.prototype.entries,h=l&&Object.getPrototypeOf((new Set).entries()),f=d&&Object.getPrototypeOf((new Map).entries()),m=u&&"function"==typeof Array.prototype[Symbol.iterator],g=m&&Object.getPrototypeOf([][Symbol.iterator]()),y=u&&"function"==typeof String.prototype[Symbol.iterator],v=y&&Object.getPrototypeOf(""[Symbol.iterator]());return function(t){var n=typeof t;if("object"!==n)return n;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(!1===p||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var u=p&&t[Symbol.toStringTag];if("string"==typeof u)return u;var l=Object.getPrototypeOf(t);return l===RegExp.prototype?"RegExp":l===Date.prototype?"Date":e&&l===Promise.prototype?"Promise":i&&l===Set.prototype?"Set":o&&l===Map.prototype?"Map":a&&l===WeakSet.prototype?"WeakSet":s&&l===WeakMap.prototype?"WeakMap":c&&l===DataView.prototype?"DataView":o&&l===f?"Map Iterator":i&&l===h?"Set Iterator":m&&l===g?"Array Iterator":y&&l===v?"String Iterator":null===l?"Object":Object.prototype.toString.call(t).slice(8,-1)}},e.exports=r()}).call(this,r(9))},function(e,t,r){var n=r(106),o=r(107),i=r(299),s=r(28);e.exports=function(e,t,r,n){return a({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===r?2:r)};function a(e,r,f){if(r&&"function"==typeof r.inspect&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var m=r.inspect(f,e);return"string"!=typeof m&&(m=a(e,m,f)),m}var g,y=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,r);if(y)return y;if(g=r,"object"==typeof HTMLElement?g instanceof HTMLElement:g&&"object"==typeof g&&"nodeType"in g&&1===g.nodeType&&"string"==typeof g.nodeName){if("outerHTML"in r)return r.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(r);var v=document.createElementNS("http://www.w3.org/1999/xhtml","_");v.appendChild(r.cloneNode(!1));var b=v.innerHTML.replace("><",">"+r.innerHTML+"<");return v.innerHTML="",b}catch(e){}}var w,E,x=i(r),S=e.showHidden?o(r):x;if(0===S.length||d(r)&&(1===S.length&&"stack"===S[0]||2===S.length&&"description"===S[0]&&"stack"===S[1])){if("function"==typeof r)return E=(w=n(r))?": "+w:"",e.stylize("[Function"+E+"]","special");if(p(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(l(r))return e.stylize(Date.prototype.toUTCString.call(r),"date");if(d(r))return c(r)}var k,_,P="",C=!1,A=!1,T=["{","}"];if("object"==typeof(k=r)&&/\w+Array]$/.test(h(k))&&(A=!0,T=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===h(e)}(r)&&(C=!0,T=["[","]"]),"function"==typeof r&&(P=" [Function"+(E=(w=n(r))?": "+w:"")+"]"),p(r)&&(P=" "+RegExp.prototype.toString.call(r)),l(r)&&(P=" "+Date.prototype.toUTCString.call(r)),d(r))return c(r);if(0===S.length&&(!C||0==r.length))return T[0]+P+T[1];if(f<0)return p(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");if(e.seen.push(r),C)_=function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)Object.prototype.hasOwnProperty.call(t,String(s))?i.push(u(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(u(e,t,r,n,o,!0))})),i}(e,r,f,x,S);else{if(A)return function(e){for(var t="[ ",r=0;r<e.length;++r){if(t.length>=s.truncateThreshold-7){t+="...";break}t+=e[r]+", "}-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]"));return t}(r);_=S.map((function(t){return u(e,r,f,x,t,C)}))}return e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return e+t.length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(_,P,T)}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,r,n,o,i){var s,c,u=Object.getOwnPropertyDescriptor(t,o);if(u&&(u.get?c=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(c=e.stylize("[Setter]","special"))),n.indexOf(o)<0&&(s="["+o+"]"),c||(e.seen.indexOf(t[o])<0?(c=a(e,t[o],null===r?null:r-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),void 0===s){if(i&&o.match(/^\d+$/))return c;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+c}function p(e){return"object"==typeof e&&"[object RegExp]"===h(e)}function l(e){return"object"==typeof e&&"[object Date]"===h(e)}function d(e){return"object"==typeof e&&"[object Error]"===h(e)}function h(e){return Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){return[":~:",e,":~:"].join("")}},function(e,t,r){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(o,i,s,a){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],p=i.createElement("div"),l=Math.round,d=Math.abs,h=Date.now;function f(e,t,r){return setTimeout(E(e,r),t)}function m(e,t,r){return!!Array.isArray(e)&&(g(e,r[t],r),!0)}function g(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function y(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,n,r),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}:Object.assign;var v=y((function(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;)(!r||r&&void 0===e[n[o]])&&(e[n[o]]=t[n[o]]),o++;return e}),"extend","Use `assign`."),b=y((function(e,t){return v(e,t,!0)}),"merge","Use `assign`.");function w(e,t,r){var n,o=t.prototype;(n=e.prototype=Object.create(o)).constructor=e,n._super=o,r&&c(n,r)}function E(e,t){return function(){return e.apply(t,arguments)}}function x(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function S(e,t){return void 0===e?t:e}function k(e,t,r){g(A(t),(function(t){e.addEventListener(t,r,!1)}))}function _(e,t,r){g(A(t),(function(t){e.removeEventListener(t,r,!1)}))}function P(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function A(e){return e.trim().split(/\s+/g)}function T(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function D(e){return Array.prototype.slice.call(e,0)}function O(e,t,r){for(var n=[],o=[],i=0;i<e.length;){var s=t?e[i][t]:e[i];T(o,s)<0&&n.push(e[i]),o[i]=s,i++}return r&&(n=t?n.sort((function(e,r){return e[t]>r[t]})):n.sort()),n}function R(e,t){for(var r,n,o=t[0].toUpperCase()+t.slice(1),i=0;i<u.length;){if((n=(r=u[i])?r+o:t)in e)return n;i++}}var N=1;function I(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var j="ontouchstart"in o,F=void 0!==R(o,"PointerEvent"),M=j&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),L=["x","y"],G=["clientX","clientY"];function B(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){x(e.options.enable,[e])&&r.handler(t)},this.init()}function U(e,t,r){var n=r.pointers.length,o=r.changedPointers.length,i=1&t&&n-o==0,s=12&t&&n-o==0;r.isFirst=!!i,r.isFinal=!!s,i&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,o=n.length;r.firstInput||(r.firstInput=q(t));o>1&&!r.firstMultiple?r.firstMultiple=q(t):1===o&&(r.firstMultiple=!1);var i=r.firstInput,s=r.firstMultiple,a=s?s.center:i.center,c=t.center=z(n);t.timeStamp=h(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=X(a,c),t.distance=V(a,c),function(e,t){var r=t.center,n=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=o.x+(r.x-n.x),t.deltaY=o.y+(r.y-n.y)}(r,t),t.offsetDirection=H(t.deltaX,t.deltaY);var u=$(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=d(u.x)>d(u.y)?u.x:u.y,t.scale=s?(p=s.pointers,l=n,V(l[0],l[1],G)/V(p[0],p[1],G)):1,t.rotation=s?function(e,t){return X(t[1],t[0],G)+X(e[1],e[0],G)}(s.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,o,i,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(a>25||void 0===s.velocity)){var c=t.deltaX-s.deltaX,u=t.deltaY-s.deltaY,p=$(a,c,u);n=p.x,o=p.y,r=d(p.x)>d(p.y)?p.x:p.y,i=H(c,u),e.lastInterval=t}else r=s.velocity,n=s.velocityX,o=s.velocityY,i=s.direction;t.velocity=r,t.velocityX=n,t.velocityY=o,t.direction=i}(r,t);var p,l;var f=e.element;P(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function q(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:l(e.pointers[r].clientX),clientY:l(e.pointers[r].clientY)},r++;return{timeStamp:h(),pointers:t,center:z(t),deltaX:e.deltaX,deltaY:e.deltaY}}function z(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var r=0,n=0,o=0;o<t;)r+=e[o].clientX,n+=e[o].clientY,o++;return{x:l(r/t),y:l(n/t)}}function $(e,t,r){return{x:t/e||0,y:r/e||0}}function H(e,t){return e===t?1:d(e)>=d(t)?e<0?2:4:t<0?8:16}function V(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return Math.sqrt(n*n+o*o)}function X(e,t,r){r||(r=L);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return 180*Math.atan2(o,n)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(I(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4};function W(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,B.apply(this,arguments)}w(W,B,{handler:function(e){var t=J[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Y={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",Z="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=Z,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(Q="MSPointerDown",Z="MSPointerMove MSPointerUp MSPointerCancel"),w(ee,B,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),o=Y[n],i=K[e.pointerType]||e.pointerType,s="touch"==i,a=T(t,e.pointerId,"pointerId");1&o&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&o&&(r=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),r&&t.splice(a,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function re(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,B.apply(this,arguments)}function ne(e,t){var r=D(e.touches),n=D(e.changedTouches);return 12&t&&(r=O(r.concat(n),"identifier",!0)),[r,n]}w(re,B,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var r=ne.call(this,e,t);12&t&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ie(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},B.apply(this,arguments)}function se(e,t){var r=D(e.touches),n=this.targetIds;if(3&t&&1===r.length)return n[r[0].identifier]=!0,[r,r];var o,i,s=D(e.changedTouches),a=[],c=this.target;if(i=r.filter((function(e){return P(e.target,c)})),1===t)for(o=0;o<i.length;)n[i[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),12&t&&delete n[s[o].identifier],o++;return a.length?[O(i.concat(a),"identifier",!0),a]:void 0}w(ie,B,{handler:function(e){var t=oe[e.type],r=se.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}});function ae(){B.apply(this,arguments);var e=E(this.handler,this);this.touch=new ie(this.manager,e),this.mouse=new W(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ce(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ue.call(this,t)):12&e&&ue.call(this,t)}function ue(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)}),2500)}}function pe(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],i=Math.abs(t-o.x),s=Math.abs(r-o.y);if(i<=25&&s<=25)return!0}return!1}w(ae,B,{handler:function(e,t,r){var n="touch"==r.pointerType,o="mouse"==r.pointerType;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)ce.call(this,t,r);else if(o&&pe.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var le=R(p.style,"touchAction"),de=void 0!==le,he=function(){if(!de)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!t||o.CSS.supports("touch-action",r)})),e}();function fe(e,t){this.manager=e,this.set(t)}fe.prototype={set:function(e){"compute"==e&&(e=this.compute()),de&&this.manager.element.style&&he[e]&&(this.manager.element.style[le]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){x(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,"none"))return"none";var t=C(e,"pan-x"),r=C(e,"pan-y");if(t&&r)return"none";if(t||r)return t?"pan-x":"pan-y";if(C(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,o=C(n,"none")&&!he.none,i=C(n,"pan-y")&&!he["pan-y"],s=C(n,"pan-x")&&!he["pan-x"];if(o){var a=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(a&&c&&u)return}if(!s||!i)return o||i&&6&r||s&&24&r?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function me(e){this.options=c({},this.defaults,e||{}),this.id=N++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ye(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ve(e,t){var r=t.manager;return r?r.get(e):e}function be(){me.apply(this,arguments)}function we(){be.apply(this,arguments),this.pX=null,this.pY=null}function Ee(){be.apply(this,arguments)}function xe(){me.apply(this,arguments),this._timer=null,this._input=null}function Se(){be.apply(this,arguments)}function ke(){be.apply(this,arguments)}function _e(){me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Pe(e,t){return(t=t||{}).recognizers=S(t.recognizers,Pe.defaults.preset),new Ce(e,t)}me.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=ve(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===T(t,e=ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=ve(e,this);var t=T(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<8&&n(t.options.event+ge(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=8&&n(t.options.event+ge(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!x(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(be,me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,o=this.attrTest(e);return n&&(8&r||!o)?16|t:n||o?4&r?8|t:2&t?4|t:2:32}}),w(we,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,o=e.direction,i=e.deltaX,s=e.deltaY;return o&t.direction||(6&t.direction?(o=0===i?1:i<0?2:4,r=i!=this.pX,n=Math.abs(e.deltaX)):(o=0===s?1:s<0?8:16,r=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=o,r&&n>t.threshold&&o&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ye(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Ee,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(xe,me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!n||!r||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),w(Se,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(ke,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return we.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return 30&r?t=e.overallVelocity:6&r?t=e.overallVelocityX:24&r&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ye(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(_e,me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&o&&r){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||V(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Pe.VERSION="2.0.7",Pe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Se,{enable:!1}],[Ee,{enable:!1},["rotate"]],[ke,{direction:6}],[we,{direction:6},["swipe"]],[_e],[_e,{event:"doubletap",taps:2},["tap"]],[xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ce(e,t){var r;this.options=c({},Pe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(F?ee:M?ie:j?ae:W))(r,U),this.touchAction=new fe(this,this.options.touchAction),Ae(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ae(e,t){var r,n=e.element;n.style&&(g(e.options.cssProps,(function(o,i){r=R(n.style,i),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""})),t||(e.oldCssProps={}))}Ce.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],2===t.stopped||o&&r!=o&&!r.canRecognizeWith(o)?r.reset():r.recognize(e),!o&&14&r.state&&(o=t.curRecognizer=r),i++}},get:function(e){if(e instanceof me)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=T(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var r=this.handlers;return g(A(e),(function(e){r[e]=r[e]||[],r[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var r=this.handlers;return g(A(e),(function(e){t?r[e]&&r[e].splice(T(r[e],t),1):delete r[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=i.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&Ae(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Pe,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ce,Input:B,TouchAction:fe,TouchInput:ie,MouseInput:W,PointerEventInput:ee,TouchMouseInput:ae,SingleTouchInput:re,Recognizer:me,AttrRecognizer:be,Tap:_e,Pan:we,Swipe:ke,Pinch:Ee,Rotate:Se,Press:xe,on:k,off:_,each:g,merge:b,extend:v,assign:c,inherit:w,bindFn:E,prefixed:R}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Pe,void 0===(n=function(){return Pe}.call(t,r,t,e))||(e.exports=n)}(window,document)},function(e,t){var r=function(e,t){return t*Math.cos(2*Math.PI*e)},n=function(e,t){return t*Math.sin(2*Math.PI*e)},o=function(e,t,o){return["M",r(e,o),n(e,o),"A",o,o,0,0,0,r(t,o),n(t,o)].join(" ")},i={n4:o(7/8,5/8,36),s4:o(3/8,1/8,36),e4:o(1/8,-1/8,36),w4:o(5/8,3/8,36),inport:o(-1/4,1/4,4),outport:o(1/4,-1/4,4),inportBig:o(-1/4,1/4,6),outportBig:o(1/4,-1/4,6)};e.exports=i},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,n,u=c(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,d);var r=t;return e=u.call(this,r),r.catchExceptions&&(window.onerror=function(e){return this.client&&this.send("network","error",e,{href:this.context?this.context.href:this.client.location.href}),console.error(e),!0}.bind(p(e))),r.defaultPermissions.length||(r.defaultPermissions=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","network:data","network:control","network:status"]),e.client=null,e}return t=d,(r=[{key:"setClient",value:function(e){this.client=e}},{key:"send",value:function(e,t,r,n){if(this.client){var o=r;r instanceof Error&&(o={message:r.message,stack:r.stack});var i=this.context;i||(i=n),this.client.postMessage(JSON.stringify({protocol:e,command:t,payload:o}),i.href),s(l(d.prototype),"send",this).call(this,e,t,r,i)}}},{key:"sendAll",value:function(e,t,r){this.send(e,t,r,this.context)}}])&&i(t.prototype,r),n&&i(t,n),d}(r(126));e.exports=d},function(e,t,r){"use strict";(function(t){var n=r(49);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(46),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function p(e){return Object.prototype.toString.call(e)}function l(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=e.exports=v,h=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(h);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!s.isFunction(e))return s.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,o){throw new d.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function v(e,t){e||y(e,!0,t,"==",d.ok)}function b(e,t,r,n){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&p(e)===p(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return e=c.call(e),t=c.call(t),b(e,t,r);var a,u,p=S(e),l=S(t);if(p.length!==l.length)return!1;for(p.sort(),l.sort(),u=p.length-1;u>=0;u--)if(p[u]!==l[u])return!1;for(u=p.length-1;u>=0;u--)if(a=p[u],!b(e[a],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function E(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&y(o,r,"Missing expected exception"+n);var i="string"==typeof n,a=!e&&o&&!r;if((!e&&s.isError(o)&&i&&E(o,r)||a)&&y(o,r,"Got unwanted exception"+n),e&&o&&r&&!E(o,r)||!e&&o)throw o}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=f(t),i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(d.AssertionError,Error),d.fail=y,d.ok=v,d.equal=function(e,t,r){e!=t&&y(e,t,r,"==",d.equal)},d.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",d.notEqual)},d.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",d.strictEqual)},d.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",d.notStrictEqual)},d.throws=function(e,t,r){x(!0,e,t,r)},d.doesNotThrow=function(e,t,r){x(!1,e,t,r)},d.ifError=function(e){if(e)throw e},d.strict=n((function e(t,r){t||y(t,!0,r,"==",e)}),d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var S=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(9))},function(e,t,r){e.exports=p,p.Minimatch=l;var n={sep:"/"};try{n=r(10)}catch(e){}var o=p.GLOBSTAR=l.GLOBSTAR={},i=r(472),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function u(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function p(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new l(t,r).match(e))}function l(e,t){if(!(this instanceof l))return new l(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function d(e,t){if(t||(t=this instanceof l?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:i(e)}p.filter=function(e,t){return t=t||{},function(r,n,o){return p(r,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,r=function(r,n,o){return t.minimatch(r,n,u(e,o))};return r.Minimatch=function(r,n){return new t.Minimatch(r,u(e,n))},r},l.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:l},l.prototype.debug=function(){},l.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(c)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},l.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var o=0,i=e.length;o<i&&"!"===e.charAt(o);o++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},p.braceExpand=function(e,t){return d(e,t)},l.prototype.braceExpand=d,l.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return o;if(""===e)return"";var n,i="",c=!!r.nocase,u=!1,p=[],l=[],d=!1,f=-1,m=-1,g="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function v(){if(n){switch(n){case"*":i+="[^/]*?",c=!0;break;case"?":i+="[^/]",c=!0;break;default:i+="\\"+n}y.debug("clearStateChar %j %j",n,i),n=!1}}for(var b,w=0,E=e.length;w<E&&(b=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,i,b),u&&a[b])i+="\\"+b,u=!1;else switch(b){case"/":return!1;case"\\":v(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,i,b),d){this.debug("  in class"),"!"===b&&w===m+1&&(b="^"),i+=b;continue}y.debug("call clearStateChar %j",n),v(),n=b,r.noext&&v();continue;case"(":if(d){i+="(";continue}if(!n){i+="\\(";continue}p.push({type:n,start:w-1,reStart:i.length,open:s[n].open,close:s[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(d||!p.length){i+="\\)";continue}v(),c=!0;var x=p.pop();i+=x.close,"!"===x.type&&l.push(x),x.reEnd=i.length;continue;case"|":if(d||!p.length||u){i+="\\|",u=!1;continue}v(),i+="|";continue;case"[":if(v(),d){i+="\\"+b;continue}d=!0,m=w,f=i.length,i+=b;continue;case"]":if(w===m+1||!d){i+="\\"+b,u=!1;continue}if(d){var S=e.substring(m+1,w);try{RegExp("["+S+"]")}catch(e){var k=this.parse(S,h);i=i.substr(0,f)+"\\["+k[0]+"\\]",c=c||k[1],d=!1;continue}}c=!0,d=!1,i+=b;continue;default:v(),u?u=!1:!a[b]||"^"===b&&d||(i+="\\"),i+=b}d&&(S=e.substr(m+1),k=this.parse(S,h),i=i.substr(0,f)+"\\["+k[0],c=c||k[1]);for(x=p.pop();x;x=p.pop()){var _=i.slice(x.reStart+x.open.length);this.debug("setting tail",i,x),_=_.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",_,_,x,i);var P="*"===x.type?"[^/]*?":"?"===x.type?"[^/]":"\\"+x.type;c=!0,i=i.slice(0,x.reStart)+P+"\\("+_}v(),u&&(i+="\\\\");var C=!1;switch(i.charAt(0)){case".":case"[":case"(":C=!0}for(var A=l.length-1;A>-1;A--){var T=l[A],D=i.slice(0,T.reStart),O=i.slice(T.reStart,T.reEnd-8),R=i.slice(T.reEnd-8,T.reEnd),N=i.slice(T.reEnd);R+=N;var I=D.split("(").length-1,j=N;for(w=0;w<I;w++)j=j.replace(/\)[+*?]?/,"");var F="";""===(N=j)&&t!==h&&(F="$"),i=D+O+N+F+R}""!==i&&c&&(i="(?=.)"+i);C&&(i=g+i);if(t===h)return[i,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var M=r.nocase?"i":"";try{var L=new RegExp("^"+i+"$",M)}catch(e){return new RegExp("$.")}return L._glob=e,L._src=i,L};var h={};p.makeRe=function(e,t){return new l(e,t||{}).makeRe()},l.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",i=e.map((function(e){return e.map((function(e){return e===o?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,r){var n=new l(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},l.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var o,i,s=this.set;for(this.debug(this.pattern,"set",s),i=e.length-1;i>=0&&!(o=e[i]);i--);for(i=0;i<s.length;i++){var a=s[i],u=e;if(r.matchBase&&1===a.length&&(u=[o]),this.matchOne(u,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},l.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var u,p=t[s],l=e[i];if(this.debug(t,p,l),!1===p)return!1;if(p===o){this.debug("GLOBSTAR",[t,p,l]);var d=i,h=s+1;if(h===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;d<a;){var f=e[d];if(this.debug("\nglobstar while",e,d,t,h,f),this.matchOne(e.slice(d),t.slice(h),r))return this.debug("globstar found match!",d,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,d,t,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,t,h),d!==a))}if("string"==typeof p?(u=n.nocase?l.toLowerCase()===p.toLowerCase():l===p,this.debug("string match",p,l,u)):(u=l.match(p),this.debug("pattern match",p,l,u)),!u)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}},function(e,t,r){"use strict";(function(t){function r(e){return"/"===e.charAt(0)}function n(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===t.platform?n:r,e.exports.posix=r,e.exports.win32=n}).call(this,r(3))},function(e,t,r){var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){var e,t,r,n;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var s in o)e.call(o,s)&&i.push(s);if(t)for(var a=0;a<n;a++)e.call(o,r[a])&&i.push(r[a]);return i})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var o={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};function s(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,(function(e){return"%"+e.substring(3)}))}function a(e){var t="";o[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var r="",n="",a=!0,c=!1,u=!1;"+"===t?a=!1:"."===t?(n=".",r="."):"/"===t?(n="/",r="/"):"#"===t?(n="#",a=!1):";"===t?(n=";",r=";",c=!0,u=!0):"?"===t?(n="?",r="&",c=!0):"&"===t&&(n="&",r="&",c=!0);for(var p=[],l=e.split(","),d=[],h={},f=0;f<l.length;f++){var m=l[f],g=null;if(-1!==m.indexOf(":")){var y=m.split(":");m=y[0],g=parseInt(y[1],10)}for(var v={};i[m.charAt(m.length-1)];)v[m.charAt(m.length-1)]=!0,m=m.substring(0,m.length-1);var b={truncate:g,name:m,suffices:v};d.push(b),h[m]=b,p.push(m)}var w=function(e){for(var t="",o=0,i=0;i<d.length;i++){var p=d[i],l=e(p.name);if(null==l||Array.isArray(l)&&0===l.length||"object"==typeof l&&0===Object.keys(l).length)o++;else if(t+=i===o?n:r||",",Array.isArray(l)){c&&(t+=p.name+"=");for(var h=0;h<l.length;h++)h>0&&(t+=p.suffices["*"]&&r||",",p.suffices["*"]&&c&&(t+=p.name+"=")),t+=a?encodeURIComponent(l[h]).replace(/!/g,"%21"):s(l[h])}else if("object"==typeof l){c&&!p.suffices["*"]&&(t+=p.name+"=");var f=!0;for(var m in l)f||(t+=p.suffices["*"]&&r||","),f=!1,t+=a?encodeURIComponent(m).replace(/!/g,"%21"):s(m),t+=p.suffices["*"]?"=":",",t+=a?encodeURIComponent(l[m]).replace(/!/g,"%21"):s(l[m])}else c&&(t+=p.name,u&&""===l||(t+="=")),null!=p.truncate&&(l=l.substring(0,p.truncate)),t+=a?encodeURIComponent(l).replace(/!/g,"%21"):s(l)}return t};return w.varNames=p,{prefix:n,substitution:w}}function c(e){if(!(this instanceof c))return new c(e);for(var t=e.split("{"),r=[t.shift()],n=[],o=[],i=[];t.length>0;){var s=t.shift(),u=s.split("}")[0],p=s.substring(u.length+1),l=a(u);o.push(l.substitution),n.push(l.prefix),r.push(p),i=i.concat(l.substitution.varNames)}this.fill=function(e){for(var t=r[0],n=0;n<o.length;n++)t+=(0,o[n])(e),t+=r[n+1];return t},this.varNames=i,this.template=e}c.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill((function(t){return e[t]}))}};var u=function(e,t,r,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||y("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};function p(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1}else{var n;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(!p(e[n],t[n]))return!1}return!0}return!1}u.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},u.prototype.createError=function(e,t,r,n,o,i,s){var a=new x(e,t,r,n,o);return a.message=this.errorReporter(a,i,s),a},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},u.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(v.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),o=this.handleError(n);if(o)return o}return null},u.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},u.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},u.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,o="";if(-1!==e.indexOf("#")&&(o=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){r=this.schemas[n];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(r,t);if("/"!==i.charAt(0))return;for(var s=i.split("/").slice(1),a=0;a<s.length;a++){var c=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[c]){r=void 0;break}r=r[c]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},u.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"==typeof e)for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var o=m(e[n]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}},u.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}e===m(e)+"#"&&(e=m(e)),this.schemas[e]=t,delete this.missingMap[e],g(t,e),this.searchSchemas(t,e)},u.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},u.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},u.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,t,r,n,o){var i;if(!(t=this.resolveRefs(t)))return null;if(t instanceof x)return this.errors.push(t),t;var s,a=this.errors.length,c=null,u=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&-1!==(s=this.scannedFrozen.indexOf(e))){var l=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==l)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][l]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][c]=t,this.scannedFrozenValidationErrors[s][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}u=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][u]=t,e[this.validationErrorsKey][u]=[]}}var d=this.errors.length,h=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(h||d!==this.errors.length)for(;r&&r.length||n&&n.length;){var f=r&&r.length?""+r.pop():null,m=n&&n.length?""+n.pop():null;h&&(h=h.prefixWith(f,m)),this.prefixErrors(d,f,m)}return null!==c?this.scannedFrozenValidationErrors[s][c]=this.errors.slice(a):null!==u&&(e[this.validationErrorsKey][u]=this.errors.slice(a)),this.handleError(h)},u.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},u.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if(void 0!==t[n])for(var o=this.definedKeywords[n],i=0;i<o.length;i++){var s=(0,o[i])(e,t[n],t,r);if("string"==typeof s||"number"==typeof s)return this.createError(v.KEYWORD_CUSTOM,{key:n,message:s},"","",null,e,t).prefixWith(null,n);if(s&&"object"==typeof s){var a=s.code;if("string"==typeof a){if(!v[a])throw new Error("Undefined error code (use defineError): "+a);a=v[a]}else"number"!=typeof a&&(a=v.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},u=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(a,c,s.dataPath||null,u,null,e,t)}}return null},u.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))||(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},u.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o];if(i===r||"integer"===i&&"number"===r&&e%1==0)return null}return this.createError(v.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},u.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++)if(p(e,t.enum[r]))return null;return this.createError(v.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},u.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var l=Math.pow(2,-51),d=1-l;function h(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function f(e,t){return t=h(t||""),e=h(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(r=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,n=[],r.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,(function(e){"/.."===e?n.pop():n.push(e)})),n.join("").replace(/^\//,"/"===r.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var r,n}function m(e){return e.split("#")[0]}function g(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=f(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)g(e[r],t);else for(var n in"string"==typeof e.$ref&&(e.$ref=f(t,e.$ref)),e)"enum"!==n&&g(e[n],t)}function y(e){var t=S[e=e||"en"];return function(e){var r=t[e.code]||E[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,(function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e}))}}u.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=l&&n<d)return this.createError(v.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},u.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(v.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},u.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(v.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},u.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},u.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},u.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(n=i[1],o=i[2]):n=t.pattern,r=new RegExp(n,o)}return r.test(e)?null:this.createError(v.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},u.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},u.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(v.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))||void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(v.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},u.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(p(e[r],e[n])){var o=this.createError(v.ARRAY_UNIQUE,{match1:r,match2:n},"","/uniqueItems",null,e,t);if(this.handleError(o))return o}return null},u.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(n=this.validateAll(e[o],t.items[o],[o],["items",o],r+"/"+o))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],r+"/"+o))return n}else for(o=0;o<e.length;o++)if(n=this.validateAll(e[o],t.items,[o],["items"],r+"/"+o))return n;return null},u.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},u.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))||void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},u.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var o=this.createError(v.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(o))return o}}return null},u.prototype.validateObjectProperties=function(e,t,r){var n;for(var o in e){var i=r+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(s=!0,n=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return n;if(void 0!==t.patternProperties)for(var a in t.patternProperties)if(new RegExp(a).test(o)&&(s=!0,n=this.validateAll(e[o],t.patternProperties[a],[o],["patternProperties",a],i)))return n;if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},u.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s];if(void 0===e[a]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:a},"","/"+s,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,i,[],["dependencies",o],r))return n}return null},u.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},u.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(n=this.validateAll(e,i,[],["allOf",o],r))return n}return null},u.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,o,i=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var a=!0,c=0;c<t.anyOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["anyOf",c],r);if(null===l&&p===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0);a=!1;continue}return null}l&&i.push(l.prefixWith(null,""+c).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),a?(i=i.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},u.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,o,i=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var c=0;c<t.oneOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[c],p=this.errors.length,l=this.validateAll(e,u,[],["oneOf",c],r);if(null===l&&p===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MULTIPLE,{index1:i,index2:c},"","/oneOf",null,e,t);if(i=c,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0)}}else l&&s.push(l)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===i?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",s,e,t)):(this.errors=this.errors.slice(0,a),null)},u.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,o,i=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,r),a=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===s&&0===a.length?this.createError(v.NOT_PASSED,{},"","/not",null,e,t):null},u.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var n,o=0;o<t.links.length;o++){var i=t.links[o];if("describedby"===i.rel){for(var s=new c(i.href),a=!0,u=0;u<s.varNames.length;u++)if(!(s.varNames[u]in e)){a=!1;break}if(a){var p={$ref:s.fillFromObject(e)};if(n=this.validateAll(e,p,[],["links",o],r))return n}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},b={};for(var w in v)b[v[w]]=w;var E={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function x(e,t,r,n,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,x.prototype.name="ValidationError",x.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var S={},k=function e(t){var r,n,o=new u,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){o.addFormat.apply(o,arguments)},language:function(e){return e?(S[e]||(e=e.split("-")[0]),!!S[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in v)t[r]&&!t[v[r]]&&(t[v[r]]=t[r]);var n=e.split("-")[0];if(S[n])for(r in S[e]=Object.create(S[n]),t)void 0===S[n][r]&&(S[n][r]=t[r]),S[e][r]=t[r];else S[e]=t,S[n]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,i,s){var a=y(r),c=new u(o,!1,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t);var p=c.validateAll(e,t,null,null,"");return!p&&s&&(p=c.banUnknownProperties(e,t)),this.error=p,this.missing=c.missing,this.valid=null===p,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,i,s){var a=y(r),c=new u(o,!0,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t),c.validateAll(e,t,null,null,""),s&&c.banUnknownProperties(e,t);var p={toString:function(){return this.valid?"valid":this.error.message}};return p.errors=c.errors,p.missing=c.missing,p.valid=0===p.errors.length,p},addSchema:function(){return o.addSchema.apply(o,arguments)},getSchema:function(){return o.getSchema.apply(o,arguments)},getSchemaMap:function(){return o.getSchemaMap.apply(o,arguments)},getSchemaUris:function(){return o.getSchemaUris.apply(o,arguments)},getMissingUris:function(){return o.getMissingUris.apply(o,arguments)},dropSchemas:function(){o.dropSchemas.apply(o,arguments)},defineKeyword:function(){o.defineKeyword.apply(o,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==v[e])throw new Error("Error already defined: "+e+" as "+v[e]);if(void 0!==b[t])throw new Error("Error code already used: "+b[t]+" as "+t);for(var n in v[e]=t,b[t]=e,E[e]=E[t]=r,S){var o=S[n];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){o.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:g,resolveUrl:f,getDocumentUri:m,errorCodes:v};return i.language(t||"en"),i}();return k.addLanguage("en-gb",E),k.tv4=k,k})?n.apply(t,o):n)||(e.exports=i)},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,l,d,h,f,m,g;f=r(36),r(35);var y=r(5);p=y.EventEmitter,m=r(37),h=r(53),g=r(113),l=r(16),d=function(){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,t);var r,n,c,u=a(p);function p(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(r=u.call(this)).options=n,r.processes={},r.connections=[],r.initials=[],r.nextInitials=[],r.defaults=[],r.graph=t,r.started=!1,r.stopped=!0,r.debug=!0,r.eventBuffer=[],m.isBrowser()?r.baseDir=t.baseDir||"/":r.baseDir=t.baseDir||e.cwd(),r.startupDate=null,t.componentLoader?r.loader=t.componentLoader:r.loader=new h.ComponentLoader(r.baseDir,r.options),r}return r=p,(n=[{key:"uptime",value:function(){return this.startupDate?new Date-this.startupDate:0}},{key:"getActiveProcesses",value:function(){var e,t,r,n;if(e=[],!this.started)return e;for(t in n=this.processes)(r=n[t]).component.load>0&&e.push(t),r.component.__openConnections>0&&e.push(t);return e}},{key:"bufferedEmit",value:function(e,t){var r,n,o,i;if("icon"!==e&&"error"!==e&&"process-error"!==e&&"end"!==e)if(this.isStarted()||"end"===e){if(this.emit(e,t),"start"===e){for(n=0,o=(i=this.eventBuffer).length;n<o;n++)r=i[n],this.emit(r.type,r.payload);this.eventBuffer=[]}if("ip"===e)switch(t.type){case"openBracket":this.bufferedEmit("begingroup",t);break;case"closeBracket":this.bufferedEmit("endgroup",t);break;case"data":this.bufferedEmit("data",t)}}else this.eventBuffer.push({type:e,payload:t});else this.emit(e,t)}},{key:"load",value:function(e,t,r){return this.loader.load(e,r,t)}},{key:"addNode",value:function(e,t){var r,n=this;if(!this.processes[e.id])return r={id:e.id},e.component?this.load(e.component,e.metadata,(function(o,i){var s,a,c,u;if(o)return t(o);for(a in i.nodeId=e.id,r.component=i,r.componentName=e.component,s=r.component.inPorts.ports,c=r.component.outPorts.ports,s)(u=s[a]).node=e.id,u.nodeInstance=i,u.name=a;for(a in c)(u=c[a]).node=e.id,u.nodeInstance=i,u.name=a;return i.isSubgraph()&&n.subscribeSubgraph(r),n.subscribeNode(r),n.processes[r.id]=r,t(null,r)})):(this.processes[r.id]=r,void t(null,r));t(null,this.processes[e.id])}},{key:"removeNode",value:function(e,t){var r,n=this;return(r=this.getNode(e.id))?r.component.shutdown((function(r){return r?t(r):(delete n.processes[e.id],t(null))})):t(new Error("Node ".concat(e.id," not found")))}},{key:"renameNode",value:function(e,t,r){var n,o,i,s,a;if(!(a=this.getNode(e)))return r(new Error("Process ".concat(e," not found")));for(o in a.id=t,n=a.component.inPorts.ports,i=a.component.outPorts.ports,n)(s=n[o])&&(s.node=t);for(o in i)(s=i[o])&&(s.node=t);return this.processes[t]=a,delete this.processes[e],r(null)}},{key:"getNode",value:function(e){return this.processes[e]}},{key:"connect",value:function(){var e,t,r,n,o,i,s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return e=0,n=function(t,r){return function(n){return s["add".concat(n)](r,(function(r){return r?a(r):++e%100!=0?t(n):void setTimeout((function(){return t(n)}),0)}))}},i=function(){return s.subscribeGraph(),a()},o=g.reduceRight(this.graph.nodes,n,i),r=g.reduceRight(this.graph.initializers,n,(function(){return o("Defaults")})),t=g.reduceRight(this.graph.edges,n,(function(){return r("Initial")})),g.reduceRight(this.graph.nodes,n,(function(){return t("Edge")}))("Node")}},{key:"connectPort",value:function(e,t,r,n,o,i){if(o)return e.to={process:t,port:r,index:n},t.component.inPorts&&t.component.inPorts[r]?t.component.inPorts[r].isAddressable()?(t.component.inPorts[r].attach(e,n),void i()):(t.component.inPorts[r].attach(e),void i()):void i(new Error("No inport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")));if(e.from={process:t,port:r,index:n},t.component.outPorts&&t.component.outPorts[r]){if(t.component.outPorts[r].isAddressable())return t.component.outPorts[r].attach(e,n),void i();t.component.outPorts[r].attach(e),i()}else i(new Error("No outport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")))}},{key:"subscribeGraph",value:function(){var e,t,r,n,o=this;return e=[],r=!1,n=function(t,r){return e.push({op:t,details:r})},t=function(n){var i,s;if(n){if(0===o.listeners("process-error").length)throw n;o.bufferedEmit("process-error",n)}if(e.length)switch(r=!0,s=e.shift(),i=t,s.op){case"renameNode":return o.renameNode(s.details.from,s.details.to,i);default:return o[s.op](s.details,i)}else r=!1},this.graph.on("addNode",(function(e){if(n("addNode",e),!r)return t()})),this.graph.on("removeNode",(function(e){if(n("removeNode",e),!r)return t()})),this.graph.on("renameNode",(function(e,o){if(n("renameNode",{from:e,to:o}),!r)return t()})),this.graph.on("addEdge",(function(e){if(n("addEdge",e),!r)return t()})),this.graph.on("removeEdge",(function(e){if(n("removeEdge",e),!r)return t()})),this.graph.on("addInitial",(function(e){if(n("addInitial",e),!r)return t()})),this.graph.on("removeInitial",(function(e){if(n("removeInitial",e),!r)return t()}))}},{key:"subscribeSubgraph",value:function(e){var t,r=this;if(e.component.isReady()){if(e.component.network)return e.component.network.setDebug(this.debug),t=function(t,n){if("process-error"===t&&0===r.listeners("process-error").length){if(n.id&&n.metadata&&n.error)throw n.error;throw n}return n||(n={}),n.subgraph?(n.subgraph.unshift||(n.subgraph=[n.subgraph]),n.subgraph.unshift(e.id)):n.subgraph=[e.id],r.bufferedEmit(t,n)},e.component.network.on("ip",(function(e){return t("ip",e)})),e.component.network.on("process-error",(function(e){return t("process-error",e)}))}else e.component.once("ready",(function(){return r.subscribeSubgraph(e)}))}},{key:"subscribeSocket",value:function(e,t){var r,n=this;if(e.on("ip",(function(t){return n.bufferedEmit("ip",{id:e.getId(),type:t.type,socket:e,data:t.data,metadata:e.metadata})})),e.on("error",(function(e){if(0===n.listeners("process-error").length){if(e.id&&e.metadata&&e.error)throw e.error;throw e}return n.bufferedEmit("process-error",e)})),null!=t&&null!=(r=t.component)?r.isLegacy():void 0)return e.on("connect",(function(){return t.component.__openConnections||(t.component.__openConnections=0),t.component.__openConnections++})),e.on("disconnect",(function(){if(t.component.__openConnections--,t.component.__openConnections<0&&(t.component.__openConnections=0),0===t.component.__openConnections)return n.checkIfFinished()}))}},{key:"subscribeNode",value:function(e){var t=this;if(e.component.on("activate",(function(e){if(t.debouncedEnd)return t.abortDebounce=!0})),e.component.on("deactivate",(function(e){if(!(e>0))return t.checkIfFinished()})),e.component.getIcon)return e.component.on("icon",(function(){return t.bufferedEmit("icon",{id:e.id,icon:e.component.getIcon()})}))}},{key:"addEdge",value:function(e,t){var r,n,o,i=this;if((n=f.createSocket(e.metadata)).setDebug(this.debug),!(r=this.getNode(e.from.node)))return t(new Error("No process defined for outbound node ".concat(e.from.node)));if(!r.component)return t(new Error("No component defined for outbound node ".concat(e.from.node)));if(r.component.isReady()){if(!(o=this.getNode(e.to.node)))return t(new Error("No process defined for inbound node ".concat(e.to.node)));if(!o.component)return t(new Error("No component defined for inbound node ".concat(e.to.node)));if(o.component.isReady())return this.subscribeSocket(n,r),this.connectPort(n,o,e.to.port,e.to.index,!0,(function(o){return o?t(o):i.connectPort(n,r,e.from.port,e.from.index,!1,(function(e){return e?t(e):(i.connections.push(n),t())}))}));o.component.once("ready",(function(){return i.addEdge(e,t)}))}else r.component.once("ready",(function(){return i.addEdge(e,t)}))}},{key:"removeEdge",value:function(e,t){var r,n,o,i,s;for(s=[],n=0,o=(i=this.connections).length;n<o;n++)(r=i[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port&&(r.to.process.component.inPorts[r.to.port].detach(r),e.from.node&&r.from&&e.from.node===r.from.process.id&&e.from.port===r.from.port&&r.from.process.component.outPorts[r.from.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),s.push(t()));return s}},{key:"addDefaults",value:function(e,t){var r,n,o,i,s,a=this;if(!(o=this.getNode(e.id)))return t(new Error("Process ".concat(e.id," not defined")));if(!o.component)return t(new Error("No component defined for node ".concat(e.id)));if(!o.component.isReady())return o.component.setMaxListeners(0),void o.component.once("ready",(function(){return a.addDefaults(o,t)}));for(r in i=o.component.inPorts.ports)(n=i[r]).hasDefault()&&!n.isAttached()&&((s=f.createSocket()).setDebug(this.debug),this.subscribeSocket(s),this.connectPort(s,o,r,void 0,!0,(function(){})),this.connections.push(s),this.defaults.push(s));return t()}},{key:"addInitial",value:function(e,t){var r,n,o=this;return(r=f.createSocket(e.metadata)).setDebug(this.debug),this.subscribeSocket(r),(n=this.getNode(e.to.node))?n.component?n.component.isReady()||n.component.inPorts[e.to.port]?this.connectPort(r,n,e.to.port,e.to.index,!0,(function(n){var i;return n?t(n):(o.connections.push(r),i={socket:r,data:e.from.data},o.initials.push(i),o.nextInitials.push(i),o.isRunning()?o.sendInitials():o.isStopped()||(o.setStarted(!0),o.sendInitials()),t())})):(n.component.setMaxListeners(0),void n.component.once("ready",(function(){return o.addInitial(e,t)}))):t(new Error("No component defined for inbound node ".concat(e.to.node))):t(new Error("No process defined for inbound node ".concat(e.to.node)))}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,d;for(n=0,a=(p=this.connections).length;n<a;n++)if((r=p[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port){for(r.to.process.component.inPorts[r.to.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),i=0,c=(l=this.initials).length;i<c;i++)(o=l[i])&&o.socket===r&&this.initials.splice(this.initials.indexOf(o),1);for(s=0,u=(d=this.nextInitials).length;s<u;s++)(o=d[s])&&o.socket===r&&this.nextInitials.splice(this.nextInitials.indexOf(o),1)}return t()}},{key:"sendInitial",value:function(e){return e.socket.post(new l("data",e.data,{initial:!0}))}},{key:"sendInitials",value:function(t){var r,n=this;return t||(t=function(){}),r=function(){var e,r,o,i;for(e=0,o=(i=n.initials).length;e<o;e++)r=i[e],n.sendInitial(r);return n.initials=[],t()},void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick(r):setTimeout(r,0)}},{key:"isStarted",value:function(){return this.started}},{key:"isStopped",value:function(){return this.stopped}},{key:"isRunning",value:function(){return this.getActiveProcesses().length>0}},{key:"startComponents",value:function(e){var t,r,n,o,i,s,a;if(e||(e=function(){}),t=0,n=this.processes?Object.keys(this.processes).length:0,o=function(r){return r?e(r):++t===n?e():void 0},!this.processes||!Object.keys(this.processes).length)return e();for(r in a=[],s=this.processes)(i=s[r]).component.isStarted()?o():0!==i.component.start.length?a.push(i.component.start(o)):(m.deprecated("component.start method without callback is deprecated"),i.component.start(),o());return a}},{key:"sendDefaults",value:function(e){var t,r,n,o;if(e||(e=function(){}),!this.defaults.length)return e();for(t=0,r=(n=this.defaults).length;t<r;t++)1===(o=n[t]).to.process.component.inPorts[o.to.port].sockets.length&&(o.connect(),o.send(),o.disconnect());return e()}},{key:"start",value:function(e){var t=this;e||(m.deprecated("Calling network.start() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),this.started?this.stop((function(r){return r?e(r):t.start(e)})):(this.initials=this.nextInitials.slice(0),this.eventBuffer=[],this.startComponents((function(r){if(r)return e(r);t.sendInitials((function(r){if(r)return e(r);t.sendDefaults((function(r){if(r)return e(r);t.setStarted(!0),e(null)}))}))})))}},{key:"stop",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d=this;if(e||(m.deprecated("Calling network.stop() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),!this.started)return this.stopped=!0,e(null);for(n=0,i=(u=this.connections).length;n<i;n++)(t=u[n]).isConnected()&&t.disconnect();if(r=0,s=this.processes?Object.keys(this.processes).length:0,a=function(t){return t?e(t):++r===s?(d.setStarted(!1),d.stopped=!0,e()):void 0},!this.processes||!Object.keys(this.processes).length)return this.setStarted(!1),this.stopped=!0,e();for(o in l=[],p=this.processes)(c=p[o]).component.isStarted()?0!==c.component.shutdown.length?l.push(c.component.shutdown(a)):(m.deprecated("component.shutdown method without callback is deprecated"),c.component.shutdown(),a()):a();return l}},{key:"setStarted",value:function(e){if(this.started!==e)return e?(this.startupDate||(this.startupDate=new Date),this.started=!0,this.stopped=!1,this.bufferedEmit("start",{start:this.startupDate})):(this.started=!1,void this.bufferedEmit("end",{start:this.startupDate,end:new Date,uptime:this.uptime()}))}},{key:"checkIfFinished",value:function(){var e=this;if(!this.isRunning())return delete this.abortDebounce,this.debouncedEnd||(this.debouncedEnd=g.debounce((function(){if(!e.abortDebounce&&!e.isRunning())return e.setStarted(!1)}),50)),this.debouncedEnd()}},{key:"getDebug",value:function(){return this.debug}},{key:"setDebug",value:function(e){var t,r,n,o,i,s,a;if(e!==this.debug){for(this.debug=e,t=0,n=(i=this.connections).length;t<n;t++)i[t].setDebug(e);for(o in a=[],s=this.processes)(r=s[o].component).isSubgraph()?a.push(r.network.setDebug(e)):a.push(void 0);return a}}}])&&i(r.prototype,n),c&&i(r,c),p}(p);return t.prototype.processes={},t.prototype.connections=[],t.prototype.initials=[],t.prototype.defaults=[],t.prototype.graph=null,t.prototype.startupDate=null,t}.call(this),t.Network=d}).call(this,r(3))},function(e,t){e.exports=function(e,t,r){for(var n=0,o=e.length,i=3==arguments.length?r:e[n++];n<o;)i=t.call(null,i,e[n],++n,e);return i}},function(e,t,r){(function(t){!function(){"use strict";e.exports=function(e){return(e instanceof t?e:new t(e.toString(),"binary")).toString("base64")}}()}).call(this,r(14).Buffer)},function(e,t,r){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,r){const n=r(29),o=r(79),i=r(4)("fbp-spec:runner"),s=r(4)("fbp-spec:runner:received"),a=r(61),c=r(41),u=r(259),p=r(62),l=r(102);function d(e,t,r){var o,s;o=o=>{if(o)r(o);else if(t.fixture)if("json"!==t.fixture.type){if("fbp"===t.fixture.type){let e;try{e=n.parse(t.fixture.data)}catch(e){return void r(e)}return e.properties||(e.properties={}),void r(null,e)}r(new Error("Unknown fixture type "+t.fixture.type))}else{let e;try{e=JSON.parse(t.fixture.data)}catch(e){return void r(e)}r(null,e)}else!function(e,t,r){i("synthesizing fixture",e);const n=t[e];if(!n)return void r(new Error("Could not find component for topic: "+e));const o={properties:{},inports:{},outports:{},processes:{},connections:[]};o.processes.testee={component:e},n.inPorts.forEach(e=>{const t=e.id;o.inports[t]={process:"testee",port:t}}),n.outPorts.forEach(e=>{const t=e.id;o.outports[t]={process:"testee",port:t}}),Object.keys(o.outports).length<1?r(new Error(`Component '${e}' used as fixture has no outports`)):Object.keys(o.inports).length<1?r(new Error(`Component '${e}' used as fixture has no inports`)):r(null,o)}(t.topic,e.components,r)},null!=(s=e).components&&"object"==typeof s.components&&Object.keys(s.components).length?o(null):u.getComponents(e.client,(t,r)=>{t?o(t):(e.components=r,o(null))})}function h(e){return e.cases.filter(e=>!e.skip).length>0}function f(e,t,r){if(t.skip)return void r(null,{passed:!0});const n=c.isArray(t.inputs)?t.inputs:[t.inputs],o=c.isArray(t.expect)?t.expect:[t.expect];n.length===o.length?e.runTest(t,(e,t)=>{let n;if(e)return n={passed:!1,error:e},void r(null,n);n=function(e){let t;const r=e.filter(e=>null!=e.actual),n=e.filter(e=>null!=e.expect);if(r.length<n.length)return t={passed:!1,error:new Error(`Only got ${r.length} output messages out of ${n.length}`)},t;const o=e.map(e=>{e.error=null;try{l.expect(e.expect,e.actual)}catch(t){e.error=t}return e}),i=o.filter(e=>e.error);if(0===i.length)t={passed:!0};else if(1===n.length)t={error:i[0].error};else if(n.length>1&&1===i.length){const e=o.findIndex(e=>e.error),r=o[e];t={error:new Error(`Expectation ${e} of sequence failed: ${r.error.message}`)}}else{const e=o.map(e=>(null!=e.error?e.error.message:void 0)||"");t={error:new Error("Multiple failures in sequence: "+e)}}return t}(t),n.error&&(n.passed=!1),r(null,n)}):r(null,{passed:!1,error:new Error(`Test sequence length mismatch. Got ${n.length} inputs and ${o.length} expectations`)})}t.getComponentSuites=function(e,t){u.getCapabilities(e.client,(r,n)=>{r?t(r):-1!==n.indexOf("component:getsource")?u.getComponentTests(e.client,(e,r)=>{e?t(e):function(e,t){const r=Object.keys(e).map(t=>e[t]);c.asyncSeries(r,(function(e,t){p.loadYAML(e,(e,r)=>{t(null,e?null:r)})}),(e,r)=>{e?t(e):t(null,r.filter(e=>null!==e).reduce((e,t)=>e.concat(t),[]))})}(r,(e,n)=>{e?t(e):(i("get component suites",r.length,n.length),t(null,n))})}):t(null,[])})},t.Runner=class{constructor(e,t={}){this.client=e,this.currentGraphId=null,this.components={},this.parentElement=null,this.options=t,null==this.options.connectTimeout&&(this.options.connectTimeout=5e3),null==this.options.commandTimeout&&(this.options.commandTimeout=3e3)}prepareClient(e){null==this.client.protocol||null==this.client.address?e(null,this.client):a.resolve().then(()=>o(this.client,{commandTimeout:this.options.commandTimeout})).then(e=>(this.client=e,this.parentElement&&"iframe"===e.definition.protocol&&e.transport.setParentElement(this.parentElement),e)).nodeify(e)}connect(e){i("connect"),this.prepareClient(t=>{if(t)return void e(t);this.client.on("signal",({proto:e,command:t,payload:r})=>s(e,t,r)),this.client.on("network",({command:e,payload:t})=>{"output"===e&&t.message&&console.log(t.message)});const r=Math.floor(this.options.connectTimeout/500);c.retryUntil(()=>(i("trying to connect"),this.client.connect()),()=>this.client.isConnected()?a.resolve():a.reject(new Error("Not connected to runtime")),500,r).then(()=>this.checkCapabilities(["protocol:graph","protocol:network","protocol:runtime"])).nodeify(e)})}disconnect(e){i("disconnect"),(null!=this.client?this.client.isConnected():void 0)?a.resolve().then(()=>this.client.disconnect()).nodeify(e):e()}checkCapabilities(e){if(!this.client.isConnected())return a.reject(new Error("Not connected to runtime"));if(!this.client.definition||!this.client.definition.capabilities||!this.client.definition.capabilities.length)return a.reject(new Error("Runtime provides no capabilities"));for(let t=0;t<e.length;t+=1){const r=e[t];if(-1===this.client.definition.capabilities.indexOf(r))return a.reject(new Error("Runtime doesn't provide "+r))}return a.resolve()}setupSuite(e,t){i(`setup suite "${e.name}"`),h(e)?this.client.isConnected()?d(this,e,(e,r)=>{e?t(e):u.sendGraph(this.client,r,(e,r)=>{e?t(e):(this.currentGraphId=r,u.startNetwork(this.client,r,t))})}):t(new Error("Disconnected from runtime")):t(null)}teardownSuite(e,t){i(`teardown suite "${e.name}"`),h(e)?this.client.isConnected()?this.currentGraphId?u.stopNetwork(this.client,this.currentGraphId,t):t():t(new Error("Disconnected from runtime")):t(null)}runTest(e,t){if(i(`runtest "${e.name}"`),!this.client.isConnected())return void t(new Error("Disconnected from runtime"));const r=c.isArray(e.inputs)?e.inputs:[e.inputs],n=c.isArray(e.expect)?e.expect:[e.expect],o=[];for(let e=0,t=r.length,i=t>=0;i?e<t:e>t;i?e+=1:e-=1)o.push({inputs:r[e],expect:n[e]});c.asyncSeries(o,(e,t)=>function(e,t,r,n,o){const i=e.observe(e=>"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t);function s(e){const t={};return e.forEach(e=>{t[e.payload.port]=e.payload.payload}),t}function c(e){if("runtime"!==e.protocol||"packet"!==e.command)return!1;if(e.payload.graph!==t)return!1;if("data"!==e.payload.event)return!1;const r=s(i.signals.slice(0,i.signals.indexOf(e)+1));return Object.keys(r).length===Object.keys(n).length}function p(e){return"network"===e.protocol&&"error"===e.command||"network"===e.protocol&&"processerror"===e.command?!e.payload.graph||e.payload.graph===t:"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&("error"===e.payload.port&&void 0===n.error)))}const l=a.promisify(u.sendPackets);a.resolve().then(()=>l(e,t,r)).then(()=>i.until(c,p)).then(e=>s(e)).nodeify(o)}(this.client,this.currentGraphId,e.inputs,e.expect,t),(e,r)=>{e?t(e):(r.forEach((e,t)=>{o[t].actual=e}),t(null,o))})}},t.runAll=function(e,t,r,n){function o(n,o){f(e,n,(e,s)=>{const a=n;var c;Object.keys(s).forEach(e=>{const t=s[e];a[e]=t}),n.error&&(a.error=n.error.message),i(`ran test "${n.name}"`,n.passed,e),c=null,r(t),o(c)})}i("running suites",t.map(e=>e.name)),c.asyncSeries(t,(t,r)=>function(e,t,r,n){t.skip?n(null,t):e.setupSuite(t,o=>{i("setup suite",o),o?n(o,t):c.asyncSeries(t.cases,r,r=>{i("testrun complete",r),r?e.teardownSuite(t,e=>{i("teardown suite",e),n(r,t)}):e.teardownSuite(t,e=>{i("teardown suite",e),n(e,t)})})})}(e,t,o,r),e=>n(e))},t.runTestAndCheck=f},function(e,t,r){const n=r(190),{EventEmitter:o}=r(5),i=r(57),{timedPromise:s,addressToProtocol:a}=r(216),{canSend:c,canReceive:u}=r(217),p=r(218)(),l=r(255),d=r(256);class h extends o{constructor(e,t){super(),this.definition=e;const r=n.getTransport(e.protocol);this.transport=new r(this.definition),this.options=t,this.options.connectionTimeout||(this.options.connectionTimeout=1e3),this.options.commandTimeout||(this.options.commandTimeout=1e3),this.options.skipPermissions||(this.options.skipPermissions=!1),this.options.skipValidation||(this.options.skipValidation=!1),this.prepareCommands()}validate(e,t){return p(e,t).catch(e=>this.options.skipValidation?(this.protocolError(e),Promise.resolve(t)):Promise.reject(e))}isConnected(){return this.transport.isConnected()}connect(){return s((e,t)=>{if(this.isConnected())return void e(this.definition);let r=null;const n=o=>{"runtime"===o.command?(this.transport.removeListener("error",r),this.validate("/runtime/output/runtime",o).then(()=>{this.prepareAdapter(o.payload.version),e(this.definition),this.emit("connected",this.definition),this.transport.once("disconnected",()=>{this.emit("disconnected",this.definition)})},e=>{this.transport.disconnect(),t(e)})):this.transport.once("runtime",n)};r=e=>{let r=e;e instanceof Error||(r=new Error(`Connection to ${this.definition.address} failed`)),this.transport.removeListener("runtime",n),this.transport.disconnect(),t(r)},this.transport.once("runtime",n),this.transport.once("error",r),this.transport.connect()},this.options.connectionTimeout,`Connection to ${this.definition.address} timed out`)}disconnect(){return new Promise(e=>{this.isConnected()?(this.transport.once("disconnected",()=>{e(null)}),this.transport.disconnect()):e(null)})}observe(e){return l(this,e)}signal(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}protocolError(e){this.emit("protocolError",e)}canSend(e,t){return new Promise((r,n)=>{this.options.skipPermissions||c(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to send ${e}:${t} messages`))})}canReceive(e,t){return new Promise((r,n)=>{this.options.skipPermissions||u(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to receive ${e}:${t} messages`))})}prepareCommands(){this.protocol={},Object.keys(i).forEach(e=>{if(!i[e].input)return;const t={};Object.keys(i[e].input).forEach(r=>{t[r]=(t={})=>{const n={...t,secret:this.definition.secret};return this.validate(`/${e}/${i[e].input[r].id}`,{protocol:e,command:r,payload:t}).then(()=>new Promise((e,t)=>{this.adapter||t(new Error("FBP client must be connected to the runtime before sending commands")),e(null)})).then(()=>this.canSend(e,r)).then(()=>this.adapter.send(e,r,n))}}),this.protocol[e]=t}),this.protocol.graph.send=(e,t=!1)=>{const r=e.name||e.properties.id,{properties:n,nodes:o,edges:i,initializers:s,inports:a,outports:c}=e;return this.protocol.graph.clear({id:r,name:e.name,main:t,library:n.library||this.definition.namespace,icon:n.icon||"",description:n.description||""}).then(()=>Promise.all(o.map(e=>this.protocol.graph.addnode({id:e.id,component:e.component,metadata:e.metadata,graph:r})))).then(()=>Promise.all(i.map(e=>this.protocol.graph.addedge({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(s.map(e=>this.protocol.graph.addinitial({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(Object.keys(a).map(e=>this.protocol.graph.addinport({public:e,node:a[e].process,port:a[e].port,graph:r})))).then(()=>Promise.all(Object.keys(c).map(e=>this.protocol.graph.addoutport({public:e,node:c[e].process,port:c[e].port,graph:r})))).then(()=>e)}}prepareAdapter(e){if(this.adapter)return;const t=Number.parseFloat(e);if(!(t<=.9))throw new Error("Unsupported FBP protocol version "+e);this.adapter=d(this,t)}}e.exports=(e,t={})=>new Promise((r,o)=>{p("/definition/",e).then(()=>{const i=e;i.protocol=i.protocol||a(i.address),i.protocol?n.transports[i.protocol]?r(new h(i,t)):o(new Error("Unsupported FBP transport "+i.protocol)):o(new Error("Runtime connection protocol is required"))},o)})},function(e,t){var r=1e3,n=6e4,o=60*n,i=24*o;function s(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return s(e,t,i,"day");if(t>=o)return s(e,t,o,"hour");if(t>=n)return s(e,t,n,"minute");if(t>=r)return s(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(14),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n){var o;e.exports=_,_.ReadableState=k;r(5).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=r(83),a=r(14).Buffer,c=t.Uint8Array||function(){};var u,p=r(204);u=p&&p.debuglog?p.debuglog("stream"):function(){};var l,d,h,f=r(205),m=r(84),g=r(85).getHighWaterMark,y=r(22).codes,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,E=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(23)(_,s);var x=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(e,t,n){o=o||r(24),e=e||{},"boolean"!=typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=r(87).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function _(e){if(o=o||r(24),!(this instanceof _))return new _(e);var t=this instanceof o;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function P(e,t,r,n,o){u("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}(e,s);else if(o||(i=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),i)x(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?x(e,new E):C(e,s,t,!0);else if(s.ended)x(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):O(e,s)):C(e,s,t,!1)}else n||(s.reading=!1,O(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),O(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),P(this,e,t,!1,r)},_.prototype.unshift=function(e){return P(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){l||(l=r(87).StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(D,e))}function D(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,F(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){u("readable nexttick read 0"),e.read(0)}function j(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function L(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function B(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):T(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&L(this),null;var n,o=t.needReadable;return u("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",o=!0),t.ended||t.reading?u("reading or ended",o=!1):o&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){x(this,new w("_read()"))},_.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function a(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",p),e.removeListener("error",h),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",d),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function c(){u("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var p=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,F(e))}}(r);e.on("drain",p);var l=!1;function d(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!l&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function h(t){u("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&x(e,t)}function f(){e.removeListener("finish",m),g()}function m(){u("onfinish"),e.removeListener("close",f),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",m),e.emit("pipe",r),o.flowing||(u("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,u("on readable",o.length,o.reading),o.length?T(this):o.reading||n.nextTick(I,this))),r},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(N,this),r},_.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(N,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(u("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<S.length;i++)e.on(S[i],this.emit.bind(this,S[i]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(208)),d(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=M,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return void 0===h&&(h=r(209)),h(_,e,t)})}).call(this,r(9),r(3))},function(e,t,r){e.exports=r(5).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(o,this,e)):t.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(n,s):(s._writableState.errorEmitted=!0,t.nextTick(r,s,e)):t.nextTick(r,s,e):i?(t.nextTick(n,s),i(e)):t.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(3))},function(e,t,r){"use strict";var n=r(22).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=_,_.WritableState=k;var s={deprecate:r(207)},a=r(83),c=r(14).Buffer,u=t.Uint8Array||function(){};var p,l=r(84),d=r(85).getHighWaterMark,h=r(22).codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,y=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,E=h.ERR_UNKNOWN_ENCODING,x=l.errorOrDestroy;function S(){}function k(e,t,s){i=i||r(24),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,o=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,o,i){--t.pendingcb,r?(n.nextTick(i,o),n.nextTick(O,e,t),e._writableState.errorEmitted=!0,x(e,o)):(i(o),e._writableState.errorEmitted=!0,x(e,o),O(e,t))}(e,r,o,t,i);else{var s=T(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),o?n.nextTick(C,e,r,s,i):C(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(e){var t=this instanceof(i=i||r(24));if(!t&&!p.call(_,this))return new _(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function P(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,P(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,p=r.encoding,l=r.callback;if(P(e,t,!1,t.objectMode?1:u.length,u,p,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function D(e,t){e._final((function(r){t.pendingcb--,r&&x(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=T(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(D,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return r}r(23)(_,a),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===_&&(e&&e._writableState instanceof k)}})):p=function(e){return e instanceof this},_.prototype.pipe=function(){x(this,new y)},_.prototype.write=function(e,t,r){var o,i=this._writableState,s=!1,a=!i.objectMode&&(o=e,c.isBuffer(o)||o instanceof u);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=S),i.ending?function(e,t){var r=new w;x(e,r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,o){var i;return null===r?i=new b:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(x(e,i),n.nextTick(o,i),!1)}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,a,n,o,i);return u}(this,i,a,e,t,r)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new m("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var o=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,o,r),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(e,t){t(e)}}).call(this,r(9),r(3))},function(e,t,r){"use strict";var n=r(81).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=p,this.end=l,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function p(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=s(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=p;var n=r(22).codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(24);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function p(e){if(!(this instanceof p))return new p(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(23)(p,c),p.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},p.prototype._transform=function(e,t,r){r(new o("_transform()"))},p.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},p.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},p.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){const n=r(4)("fbp-protocol-client:signaller"),{WebSocket:o,EventEmitter:i}=r(40);e.exports=class extends i{constructor(e,t="client",r="wss://api.flowhub.io"){super(),this.signaller=r,this.role=t,this.id=e,this.connection=null,this.connecting=!1,this.buffer=[]}isConnected(){return!(!this.connection||this.connection.readyState!==this.connection.OPEN)}connect(){if(this.isConnected()||this.connecting)return;n(`${this.id} ${this.role} connecting`);const e=new o(this.signaller);this.connecting=!0,e.addEventListener("open",()=>{n(`${this.id} ${this.role} connected to ${this.signaller}`),this.connection=e,this.connecting=!1,this.emit("connected"),this.flush()}),e.addEventListener("message",e=>{this.handleMessage(e)}),e.addEventListener("close",()=>{this.connection=null,this.connecting=!1,this.emit("disconnected"),n(`${this.id} ${this.role} disconnected`)}),e.addEventListener("error",e=>{this.connection=null,this.connecting=!1,this.emit("error",e),n(`${this.id} ${this.role} error`,e)})}signal(e,t={}){const r={id:this.id};this.send(`/to|${e}|/signal|${JSON.stringify(r)}|${JSON.stringify(t)}`)}join(e){const t={id:this.id},r={room:e,id:this.id};this.send(`/announce|${JSON.stringify(t)}|${JSON.stringify(r)}`)}joinReply(e,t){const r={id:this.id},n={room:t,id:this.id};this.send(`/to|${e}|/announce|${JSON.stringify(r)}|${JSON.stringify(n)}`)}send(e){if(!this.isConnected())return n(`${this.id} ${this.role} push buffer`),void this.buffer.push(e);const[t]=e.split("|");n(`${this.id} ${this.role} send ${t}`),this.connection.send(e)}disconnect(){this.isConnected()&&(n(`${this.id} ${this.role} disconnecting`),this.connection.close())}handleMessage(e){const[t,r,o,...i]=e.data.split("|");if("/to"===t){if(r!==this.id)return void n(`${this.id} ${this.role} wrongly-addressed DM, was sent to ${r}`);const t=`${o}|${i.join("|")}`;return void this.handleMessage({...e,data:t})}n(`${this.id} ${this.role} recv ${t}`);let s=null;switch(s=o?JSON.parse(o):JSON.parse(r),t){case"/announce":this.emit("join",s,JSON.parse(r));break;case"/signal":this.emit("signal",s,JSON.parse(r));break;case"/roominfo":break;default:n(`${this.id} ${this.role} unhandled command ${t}`,s)}}flush(){this.buffer.length&&(n(`${this.id} ${this.role} flush buffer`,this.buffer.length),this.buffer.forEach(e=>{this.send(e)}),this.buffer=[])}}},function(e,t,r){"use strict";var n=r(25);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var o={key:t,value:e[t]},i={key:n,value:e[n]};return r(o,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,s;if(Array.isArray(t)){for(s="[",r=0;r<t.length;r++)r&&(s+=","),s+=e(t[r])||"null";return s+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=i.push(t)-1,c=Object.keys(t).sort(o&&o(t));for(s="",r=0;r<c.length;r++){var u=c[r],p=e(t[u]);p&&(s&&(s+=","),s+=JSON.stringify(u)+":"+p)}return i.splice(a,1),"{"+s+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",o=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",o&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var u=e.level,p=e.dataLevel,l=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(p||""),g="valid"+u;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;u=e.level=0,p=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{u=e.level,m="data"+((p=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+u+" = errors;"}g="valid"+u,f=!e.opts.allErrors;var w="",E="",x=e.schema.type,S=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(S?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],S=!0)),S&&1==x.length&&(x=x[0],S=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var k=e.util.coerceToTypes(e.opts.coerceTypes,x);var _=e.RULES.types[x];if(k||S||!0===_||_&&!K(_)){d=e.schemaPath+".type",h=e.errSchemaPath+"/type",d=e.schemaPath+".type",h=e.errSchemaPath+"/type";var P=S?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[P](x,m,e.opts.strictNumbers,!0)+") { ",k){var C="dataType"+u,A="coerced"+u;n+=" var "+C+" = typeof "+m+"; var "+A+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+C+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+C+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+A+" = "+m+"; } "),n+=" if ("+A+" !== undefined) ; ";var T=k;if(T)for(var D,O=-1,R=T.length-1;O<R;)"string"==(D=T[O+=1])?n+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+A+" = '' + "+m+"; else if ("+m+" === null) "+A+" = ''; ":"number"==D||"integer"==D?(n+=" else if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==D&&(n+=" && !("+m+" % 1)"),n+=")) "+A+" = +"+m+"; "):"boolean"==D?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+A+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+A+" = true; ":"null"==D?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==D&&(n+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+A+" = ["+m+"]; ");n+=" else {   ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+A+" !== undefined) {  ";var N=p?"data"+(p-1||""):"parentData";n+=" "+m+" = "+A+"; ",p||(n+="if ("+N+" !== undefined)"),n+=" "+N+"["+(p?e.dataPathArr[p]:"parentDataProperty")+"] = "+A+"; } "}else{(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!i)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",E+="}");else{var I=e.RULES;if(I)for(var j=-1,F=I.length-1;j<F;)if(K(_=I[j+=1])){if(_.type&&(n+=" if ("+e.util.checkDataType(_.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==_.type&&e.schema.properties){l=e.schema.properties;var M=Object.keys(l);if(M)for(var L,G=-1,B=M.length-1;G<B;){if(void 0!==(z=l[L=M[G+=1]]).default){var U=m+e.util.getProperty(L);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(z.default)+" ":n+=" "+JSON.stringify(z.default)+" ",n+="; "}}}else if("array"==_.type&&Array.isArray(e.schema.items)){var q=e.schema.items;if(q){O=-1;for(var z,$=q.length-1;O<$;)if(void 0!==(z=q[O+=1]).default){U=m+"["+O+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(z.default)+" ":n+=" "+JSON.stringify(z.default)+" ",n+="; "}}}var H=_.rules;if(H)for(var V,X=-1,J=H.length-1;X<J;)if(Q(V=H[X+=1])){var W=V.code(e,V.keyword,_.type);W&&(n+=" "+W+" ",f&&(w+="}"))}if(f&&(n+=" "+w+" ",w=""),_.type&&(n+=" } ",x&&x===_.type&&!k)){n+=" else { ";var Y;d=e.schemaPath+".type",h=e.errSchemaPath+"/type";(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+u,n+=") { ",E+="}")}}function K(e){for(var t=e.rules,r=0;r<t.length;r++)if(Q(t[r]))return!0}function Q(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+E+" "),v?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+u+";",n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(!d&&"number"!=typeof a&&void 0!==a)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(g){var w=e.util.getData(m.$data,s,e.dataPathArr),E="exclusive"+i,x="exclType"+i,S="exclIsNumber"+i,k="' + "+(C="op"+i)+" + '";o+=" var schemaExcl"+i+" = "+w+"; ",o+=" var "+E+"; var "+x+" = typeof "+(w="schemaExcl"+i)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var _;b=f;(_=_||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var P=o;o=_.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+P+"]); ":o+=" validate.errors = ["+P+"]; return false; ":o+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+x+" == 'number' ? ( ("+E+" = "+n+" === undefined || "+w+" "+y+"= "+n+") ? "+l+" "+v+"= "+w+" : "+l+" "+v+" "+n+" ) : ( ("+E+" = "+w+" === true) ? "+l+" "+v+"= "+n+" : "+l+" "+v+" "+n+" ) || "+l+" !== "+l+") { var op"+i+" = "+E+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(b=f,u=e.errSchemaPath+"/"+f,n=w,d=g)}else{k=y;if((S="number"==typeof m)&&d){var C="'"+k+"'";o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+m+" "+y+"= "+n+" ? "+l+" "+v+"= "+m+" : "+l+" "+v+" "+n+" ) || "+l+" !== "+l+") { "}else{S&&void 0===a?(E=!0,b=f,u=e.errSchemaPath+"/"+f,n=m,v+="="):(S&&(n=Math[h?"min":"max"](m,a)),m===(!S||n)?(E=!0,b=f,u=e.errSchemaPath+"/"+f,v+="="):(E=!1,k+="="));C="'"+k+"'";o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+" "+v+" "+n+" || "+l+" !== "+l+") { "}}b=b||t,(_=_||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+C+", limit: "+n+", exclusive: "+E+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+k+" ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";P=o;return o=_.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+P+"]); ":o+=" validate.errors = ["+P+"]; return false; ":o+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+l+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+l+".length ":o+=" ucs2length("+l+") ",o+=" "+h+" "+n+") { ";var f=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var g=o;return o=m.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+l+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,r){try{e.exports={base:r(266),testcase:r(267),testsuite:r(268),testsuites:r(269),expectations:r(270),testsfile:r(271)}}catch(e){console.log("fbp-spec: Failed to load schemas",e)}},function(e,t,r){"use strict";var n=r(272);e.exports=n},function(e,t,r){"use strict";var n=r(27);e.exports=new n({include:[r(101)]})},function(e,t,r){"use strict";var n=r(27);e.exports=new n({include:[r(63)],implicit:[r(278),r(279),r(280),r(281)]})},function(e,t,r){const n=r(4)("fbp-spec:expectation"),o=r(293),i=r(316),s=r(41),a={type:(e,t)=>o.expect(e).to.be.a(t),equals:(e,t)=>o.expect(e).to.eql(t),above:(e,t)=>o.expect(e).to.be.above(t),below:(e,t)=>o.expect(e).to.be.below(t),haveKeys:(e,t)=>o.expect(e).to.have.keys(t),includeKeys:(e,t)=>o.expect(e).to.include.keys(t),contains:(e,t)=>o.expect(e).to.contain(t),noterror(e){if(null!=e?e.message:void 0)throw e}};t.expect=function e(t,r){s.isArray(t)?t.forEach(e=>{Object.keys(e).forEach(t=>{(s.isArray(e[t])?e[t]:[e[t]]).forEach(e=>{n("checking port for expectation",t,e);const o=r[t];if(void 0===o)throw new Error("No data received on port "+t);const s=function(e){const t=Object.keys(e);for(let r=0;r<t.length;r+=1){const n=t[r],o=e[n];if("path"!==n){const e=a[n];if(e){const t=t=>e(t,o);return t.toString=()=>`${n} ${o}`,t}}}throw new Error(`fbp-spec: No operator matching ${Object.keys(e)}. Available: ${Object.keys(a)}`)}(e);(function(e,t){let r;if(e.path){if(n("extracting JSONPath from",e.path,t),r=i.query(t,e.path),!r.length)throw new Error(`expected JSONPath '${e.path}' to match data in ${JSON.stringify(t)}`)}else r=[t];return n("matching against",r),r})(e,o).forEach(e=>{n("checking against predicate",e,s.toString()),s(e)})})})}):e([t],r)},t.noError=e=>o.expect(e).to.not.exist},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function r(){var e=[].slice.call(arguments);function t(t,r){Object.keys(r).forEach((function(n){~e.indexOf(n)||(t[n]=r[n])}))}return function(){for(var e=[].slice.call(arguments),r=0,n={};r<e.length;r++)t(n,e[r]);return n}}function n(e,t,o){var i=r("name","message","stack","constructor","toJSON")(t||{});for(var s in this.message=e||"Unspecified AssertionError",this.showDiff=!1,i)this[s]=i[s];if(o=o||n,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */
e.exports=n,n.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
n.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
n.prototype.constructor=n,n.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,r){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(65),o=r(28);e.exports=function(e){var t=n(e),r=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===r)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===r)return"[ Array("+e.length+") ]";if("[object Object]"===r){var i=Object.keys(e);return"{ Object ("+(i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", "))+") }"}return t}return t}},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var r=n.call(e).match(o);r&&(t=r[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function r(e){-1===t.indexOf(e)&&t.push(e)}for(var n=Object.getPrototypeOf(e);null!==n;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,r){const n=r(4)("fbp-spec:subprocess");t.start=function(e,t,o){let i;try{i=r(6)}catch(e){return o(e),null}if(null==t.timeout){t.timeout=300}let s=!1,a="";const c=["-c",e],u=i.spawn("sh",c);return n("spawned",`'sh ${c.join(" ")}'`),n("waiting for output"),u.on("error",e=>o(e)),u.stdout.on("data",e=>{const t=e.toString();n("sub stdout",t),s||(n("got output, transitioning to started"),s=!0,setTimeout(o,100))}),u.stderr.on("data",e=>{const t=e.toString();a+=t,n("sub stderr",t),s||(n("got stderr, failing"),s=!0,o(new Error(`Subprocess wrote on stderr: '${a}'`)))}),setTimeout(()=>{s||(n("timeout waiting for output, assuming started"),s=!0,o(null))},t.timeout),u}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).graph=e,t.lastRevision=0,t}return t=c,(r=[{key:"countTransactions",value:function(){return 0}},{key:"putTransaction",value:function(e,t){e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e,t)}},{key:"fetchTransaction",value:function(e){return[]}}])&&o(t.prototype,r),n&&o(t,n),c}(r(5).EventEmitter);t.default=u},function(e,t){t.getComponentHash=(e,t)=>t.runtime?["runtime",t.runtime,"component",e]:["project",t.id,"component",e],t.getGraphHash=(e,t)=>t.runtime?["runtime",t.runtime,e]:["project",t.id,e],t.hashToString=e=>"#"+e.map(e=>encodeURIComponent(e)).join("/")},function(e,t){e.exports={inports:{},outports:{},groups:[],processes:{AppView:{component:"polymer/noflo-ui"},StoreDispatch:{component:"ui/Store"},State:{component:"ui/State"},MapStateToProps:{component:"ui/MapStateToProps"},Logger:{component:"ui/LoggingMiddleware"},UrlMiddleware:{component:"ui/UrlMiddleware"},StorageMiddleware:{component:"ui/StorageMiddleware"},UserMiddleware:{component:"ui/UserMiddleware"},RegistryMiddleware:{component:"ui/RegistryMiddleware"},GithubMiddleware:{component:"ui/GithubMiddleware"},RuntimeMiddleware:{component:"ui/RuntimeMiddleware"},Dispatch:{component:"ui/DispatchAction"},UserReducer:{component:"ui/UserReducer"},MainContext:{component:"ui/CreateContext"},StorageReducer:{component:"ui/StorageReducer"},GithubReducer:{component:"ui/GithubReducer"},RegistryReducer:{component:"ui/RegistryReducer"},RuntimeReducer:{component:"ui/RuntimeReducer"},ContextReducer:{component:"ui/ContextReducer"},ShowErrors:{component:"core/Output"},ListenWindow:{component:"interaction/ListenResize"}},connections:[{src:{process:"AppView",port:"event"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"State",port:"state"},tgt:{process:"StoreDispatch",port:"state"}},{src:{process:"State",port:"state"},tgt:{process:"MapStateToProps",port:"state"}},{src:{process:"State",port:"updated"},tgt:{process:"MapStateToProps",port:"updated"}},{src:{process:"MapStateToProps",port:"props"},tgt:{process:"AppView",port:"updated"}},{src:{process:"StoreDispatch",port:"pass"},tgt:{process:"Logger",port:"in"}},{src:{process:"Logger",port:"pass"},tgt:{process:"UrlMiddleware",port:"in"}},{src:{process:"UrlMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UrlMiddleware",port:"pass"},tgt:{process:"StorageMiddleware",port:"in"}},{src:{process:"StorageMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"StorageMiddleware",port:"pass"},tgt:{process:"UserMiddleware",port:"in"}},{src:{process:"UserMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UserMiddleware",port:"pass"},tgt:{process:"RegistryMiddleware",port:"in"}},{src:{process:"RegistryMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RegistryMiddleware",port:"pass"},tgt:{process:"GithubMiddleware",port:"in"}},{src:{process:"GithubMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"GithubMiddleware",port:"pass"},tgt:{process:"RuntimeMiddleware",port:"in"}},{src:{process:"RuntimeMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RuntimeMiddleware",port:"pass"},tgt:{process:"Dispatch",port:"in"}},{data:"user:*,main:*,storage:*,storage:*:*,github:*,flowhub:*,runtime:*,context:*",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"UserReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"MainContext",port:"start"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GithubReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"RegistryReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"RuntimeReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"ContextReducer",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"ShowErrors",port:"in"}},{src:{process:"UserReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"GithubReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RegistryReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RuntimeReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"StorageReducer",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"MainContext",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"ContextReducer",port:"context"},tgt:{process:"State",port:"in"}},{data:"noflo-ui",tgt:{process:"AppView",port:"selector"}},{data:"",tgt:{process:"ListenWindow",port:"start"}},{src:{process:"ListenWindow",port:"width"},tgt:{process:"AppView",port:"width"}},{src:{process:"ListenWindow",port:"height"},tgt:{process:"AppView",port:"height"}}],properties:{environment:{type:"noflo-browser"},icon:"code"},caseSensitive:!1}},function(e,t){var r,n,o,i,s;n=function(e){return/.*\.coffee$/.test(e)?"coffeescript":"javascript"},o=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(arg)},i=function(e,t,r){if(void 0===t)return e;switch(null===r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}},s=function(e){var t;return t=function(t,r,n,o,i,s){for(var a;i>=0&&i<s;)n=r(n,t[a=o?o[i]:i],a,t),i+=e;return n},function(r,n,o,s){var a,c,u;return n=i(n,s,4),u=((c=Object.keys(r))||r).length,a=e>0?0:u-1,arguments.length<3&&(o=r[c?c[a]:a],a+=e),t(r,n,o,c,a,u)}}(-1),r=function(e,t,r){var n,o,i,s,a,c;return a=void 0,n=void 0,o=void 0,c=void 0,s=void 0,i=function(){var u;(u=Date.now-c)<t&&u>=0?a=setTimeout(i,t-u):(a=null,r||(s=e.apply(o,n),a||(o=n=null)))},function(){var u;return o=this,n=arguments,c=Date.now,u=r&&!a,a||(a=setTimeout(i,t)),u&&(s=e.apply(o,n),o=n=null),s}},t.guessLanguageFromFilename=n,t.reduceRight=s,t.debounce=r,t.isArray=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,E,x,S,k=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},_=r(5);m=_.EventEmitter,S=r(115),g=r(16),w=r(47)("noflo:component"),E=r(47)("noflo:component:brackets"),x=r(47)("noflo:component:send"),f=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(r,e);var t=p(r);function r(e){var n,o,i,a;return s(this,r),(n=t.call(this)).error=n.error.bind(d(n)),e||(e={}),e.inPorts||(e.inPorts={}),e.inPorts instanceof S.InPorts?n.inPorts=e.inPorts:n.inPorts=new S.InPorts(e.inPorts),e.outPorts||(e.outPorts={}),e.outPorts instanceof S.OutPorts?n.outPorts=e.outPorts:n.outPorts=new S.OutPorts(e.outPorts),e.icon&&(n.icon=e.icon),e.description&&(n.description=e.description),n.started=!1,n.load=0,n.ordered=null!=(o=e.ordered)&&o,n.autoOrdering=null!=(i=e.autoOrdering)?i:null,n.outputQ=[],n.bracketContext={in:{},out:{}},n.activateOnInput=null==(a=e.activateOnInput)||a,n.forwardBrackets={in:["out","error"]},"forwardBrackets"in e&&(n.forwardBrackets=e.forwardBrackets),"function"==typeof e.process&&n.process(e.process),n}return c(r,[{key:"getDescription",value:function(){return this.description}},{key:"isReady",value:function(){return!0}},{key:"isSubgraph",value:function(){return!1}},{key:"setIcon",value:function(e){return this.icon=e,this.emit("icon",this.icon)}},{key:"getIcon",value:function(){return this.icon}},{key:"error",value:function(e){var t,n,o,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(k(this,r),!this.outPorts[c]||!this.outPorts[c].isAttached()&&this.outPorts[c].isRequired())throw e;for(n=0,i=a.length;n<i;n++)t=a[n],this.outPorts[c].openBracket(t,{scope:u});for(this.outPorts[c].data(e,{scope:u}),o=0,s=a.length;o<s;o++)t=a[o],this.outPorts[c].closeBracket(t,{scope:u})}},{key:"setUp",value:function(e){e()}},{key:"tearDown",value:function(e){e()}},{key:"start",value:function(e){var t=this;if(this.isStarted())return e();this.setUp((function(r){if(r)return e(r);t.started=!0,t.emit("start"),e(null)}))}},{key:"shutdown",value:function(e){var t,r=this;t=function(){var t,n,o;for(o in n=r.inPorts.ports||r.inPorts)"function"==typeof(t=n[o]).clear&&t.clear();if(r.bracketContext={in:{},out:{}},!r.isStarted())return e();r.started=!1,r.emit("end"),e()},this.tearDown((function(n){var o;return n?e(n):r.load>0?(o=function(e){e>0||(this.removeListener("deactivate",o),t())},void r.on("deactivate",o)):void t()}))}},{key:"isStarted",value:function(){return this.started}},{key:"prepareForwarding",value:function(){var e,t,r,n,o,i,s,a;for(t in s=[],i=this.forwardBrackets)if(o=i[t],t in this.inPorts.ports){for(a=[],e=0,r=o.length;e<r;e++)(n=o[e])in this.outPorts.ports&&a.push(n);0===a.length?s.push(delete this.forwardBrackets[t]):s.push(this.forwardBrackets[t]=a)}else delete this.forwardBrackets[t];return s}},{key:"isLegacy",value:function(){return!this.handle}},{key:"process",value:function(e){var t,r,n=this;if("function"!=typeof e)throw new Error("Process handler must be a function");if(!this.inPorts)throw new Error("Component ports must be defined before process function");for(t in this.prepareForwarding(),this.handle=e,r=this.inPorts.ports)!function(e,t){t.name||(t.name=e),t.on("ip",(function(e){return n.handleIP(e,t)}))}(t,r[t]);return this}},{key:"isForwardingInport",value:function(e){return("string"==typeof e?e:e.name)in this.forwardBrackets}},{key:"isForwardingOutport",value:function(e,t){var r,n;return r="string"==typeof e?e:e.name,n="string"==typeof t?t:t.name,!!this.forwardBrackets[r]&&-1!==this.forwardBrackets[r].indexOf(n)}},{key:"isOrdered",value:function(){return!!this.ordered||!!this.autoOrdering}},{key:"handleIP",value:function(e,t){var r,n,o,i,s,a,c;if(t.options.triggering){if("openBracket"!==e.type||null!==this.autoOrdering||this.ordered||(w("".concat(this.nodeId," port '").concat(t.name,"' entered auto-ordering mode")),this.autoOrdering=!0),c={},this.isForwardingInport(t)){if("openBracket"===e.type)return;if("closeBracket"===e.type){if(o=(r=t.getBuffer(e.scope,e.index)).filter((function(e){return"data"===e.type})),this.outputQ.length>=this.load&&0===o.length){if(r[0]!==e)return;t.get(e.scope,e.index),(n=this.getBracketContext("in",t.name,e.scope,e.index).pop()).closeIp=e,E("".concat(this.nodeId," closeBracket-C from '").concat(n.source,"' to ").concat(n.ports,": '").concat(e.data,"'")),c={__resolved:!0,__bracketClosingAfter:[n]},this.outputQ.push(c),this.processOutputQueue()}if(!o.length)return}}n=new y(e,this,t,c),s=new v(this.inPorts,n),a=new b(this.outPorts,n);try{this.handle(s,a,n)}catch(e){i=e,this.deactivate(n),a.sendDone(i)}n.activated||(t.isAddressable()?w("".concat(this.nodeId," packet on '").concat(t.name,"[").concat(e.index,"]' didn't match preconditions: ").concat(e.type)):w("".concat(this.nodeId," packet on '").concat(t.name,"' didn't match preconditions: ").concat(e.type)))}}},{key:"getBracketContext",value:function(e,t,r,n){var o,i,s=S.normalizePortName(t);return i=s.name,o=s.index,null!=n&&(o=n),("in"===e?this.inPorts:this.outPorts)[i].isAddressable()&&(t="".concat(i,"[").concat(o,"]")),this.bracketContext[e][t]||(this.bracketContext[e][t]={}),this.bracketContext[e][t][r]||(this.bracketContext[e][t][r]=[]),this.bracketContext[e][t][r]}},{key:"addToResult",value:function(e,t,r){var n,o,i,s,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=S.normalizePortName(t);return s=c.name,o=c.index,i=a?"unshift":"push",this.outPorts[s].isAddressable()?(n=o?parseInt(o):r.index,e[s]||(e[s]={}),e[s][n]||(e[s][n]=[]),r.index=n,void e[s][n][i](r)):(e[s]||(e[s]=[]),e[s][i](r))}},{key:"getForwardableContexts",value:function(e,t,r){var n,o,i,s=this,a=S.normalizePortName(t);return i=a.name,o=a.index,n=[],r.forEach((function(r,a){var c;if(s.isForwardingOutport(e,i)&&-1===r.ports.indexOf(t)&&(!(c=s.getBracketContext("out",i,r.ip.scope,o)[a])||c.ip.data!==r.ip.data||-1===c.ports.indexOf(t)))return n.push(r)})),n}},{key:"addBracketForwards",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v=this;if(null!=(d=e.__bracketClosingBefore)?d.length:void 0)for(r=0,a=(h=e.__bracketClosingBefore).length;r<a;r++)if(t=h[r],E("".concat(this.nodeId," closeBracket-A from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(o=0,c=(f=t.ports).length;o<c;o++)l=f[o],n=t.closeIp.clone(),this.addToResult(e,l,n,!0),this.getBracketContext("out",l,n.scope).pop();if(e.__bracketContext&&Object.keys(e.__bracketContext).reverse().forEach((function(r){var o,i,s,a,c,u,p,l,d,h,f,m,g,y,b;if((t=e.__bracketContext[r]).length){for(m in y=[],e)if(c=e[m],0!==m.indexOf("__"))if(v.outPorts[m].isAddressable()){for(s in c)if(c[s].filter((function(e){return"data"===e.type})).length&&(g="".concat(m,"[").concat(s,"]"),(b=v.getForwardableContexts(r,g,t)).length)){for(i=[],u=0,l=b.length;u<l;u++)o=b[u],E("".concat(v.nodeId," openBracket from '").concat(r,"' to '").concat(g,"': '").concat(o.ip.data,"'")),(n=o.ip.clone()).index=parseInt(s),i.push(n),o.ports.push(g),v.getBracketContext("out",m,o.ip.scope,s).push(o);for(i.reverse(),p=0,d=i.length;p<d;p++)a=i[p],v.addToResult(e,m,a,!0)}}else if(c.filter((function(e){return"data"===e.type})).length&&(b=v.getForwardableContexts(r,m,t)).length){for(i=[],f=0,h=b.length;f<h;f++)o=b[f],E("".concat(v.nodeId," openBracket from '").concat(r,"' to '").concat(m,"': '").concat(o.ip.data,"'")),i.push(o.ip.clone()),o.ports.push(m),v.getBracketContext("out",m,o.ip.scope).push(o);i.reverse(),y.push(function(){var t,r,n;for(n=[],r=0,t=i.length;r<t;r++)a=i[r],n.push(this.addToResult(e,m,a,!0));return n}.call(v))}return y}})),null!=(m=e.__bracketClosingAfter)?m.length:void 0)for(i=0,u=(g=e.__bracketClosingAfter).length;i<u;i++)if(t=g[i],E("".concat(this.nodeId," closeBracket-B from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(s=0,p=(y=t.ports).length;s<p;s++)l=y[s],n=t.closeIp.clone(),this.addToResult(e,l,n,!1),this.getBracketContext("out",l,n.scope).pop();return delete e.__bracketClosingBefore,delete e.__bracketContext,delete e.__bracketClosingAfter}},{key:"processOutputQueue",value:function(){var e,t,r,n,o,i,s,a;for(a=[];this.outputQ.length>0&&this.outputQ[0].__resolved;)s=this.outputQ.shift(),this.addBracketForwards(s),a.push(function(){var a,c,u;for(o in u=[],s)if(n=s[o],0!==o.indexOf("__"))if(this.outPorts.ports[o].isAddressable()){for(e in n)if(t=n[e],e=parseInt(e),this.outPorts.ports[o].isAttached(e))for(a=0,c=t.length;a<c;a++)r=t[a],i="".concat(o,"[").concat(r.index,"]"),"openBracket"===r.type?x("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?x("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):x("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),this.outPorts[o].sendIP(r)}else this.outPorts.ports[o].isAttached()&&u.push(function(){var e,t,s;for(s=[],e=0,t=n.length;e<t;e++)r=n[e],i=o,"openBracket"===r.type?x("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?x("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):x("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),s.push(this.outPorts[o].sendIP(r));return s}.call(this));return u}.call(this));return a}},{key:"activate",value:function(e){if(!e.activated)return e.activated=!0,e.deactivated=!1,this.load++,this.emit("activate",this.load),this.ordered||this.autoOrdering?this.outputQ.push(e.result):void 0}},{key:"deactivate",value:function(e){if(!e.deactivated)return e.deactivated=!0,e.activated=!1,this.isOrdered()&&this.processOutputQueue(),this.load--,this.emit("deactivate",this.load)}}]),r}(m);return e.prototype.description="",e.prototype.icon=null,e}.call(this),y=function(){function e(t,r,n,o){s(this,e),this.ip=t,this.nodeInstance=r,this.port=n,this.result=o,this.scope=this.ip.scope,this.activated=!1,this.deactivated=!1}return c(e,[{key:"activate",value:function(){return(this.result.__resolved||-1===this.nodeInstance.outputQ.indexOf(this.result))&&(this.result={}),this.nodeInstance.activate(this)}},{key:"deactivate",value:function(){return this.result.__resolved||(this.result.__resolved=!0),this.nodeInstance.deactivate(this)}}]),e}(),v=function(){function e(t,r){s(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.port=this.context.port,this.result=this.context.result,this.scope=this.context.scope}return c(e,[{key:"activate",value:function(){if(!this.context.activated)return this.nodeInstance.isOrdered()&&(this.result.__resolved=!1),this.nodeInstance.activate(this.context),this.port.isAddressable()?w("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"[").concat(this.ip.index,"]' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type)):w("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type))}},{key:"attached",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s=[],n=0,o=t.length;n<o;n++){if(i=t[n],!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));s.push(this.ports[i].listAttached())}return 1===t.length?s.pop():s}},{key:"has",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s="function"==typeof t[t.length-1]?t.pop():function(){return!0},n=0,o=t.length;n<o;n++)if(i=t[n],Array.isArray(i)){if(!this.ports[i[0]])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i[0],"'"));if(!this.ports[i[0]].isAddressable())throw new Error("Non-addressable ports, access must be with string ".concat(i[0]));if(!this.ports[i[0]].has(this.scope,i[1],s))return!1}else{if(!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));if(this.ports[i].isAddressable())throw new Error("For addressable ports, access must be with array [".concat(i,", idx]"));if(!this.ports[i].has(this.scope,s))return!1}return!0}},{key:"hasData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length||(t=["in"]),t.push((function(e){return"data"===e.type})),this.has.apply(this,t)}},{key:"hasStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,u;for(t.length||(t=["in"]),u="function"==typeof t[t.length-1]?t.pop():function(){return!0},o=0,i=t.length;o<i;o++)if(s=t[o],a=[],[],n=!1,c=function(e){return"openBracket"===e.type?(a.push(e.data),!1):"data"===e.type?(n=u(e,a),!a.length&&n):"closeBracket"===e.type?(a.pop(),!a.length&&!!n):void 0},!this.has(s,c))return!1;return!0}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,s,a,c,u,p;for(this.activate(),t.length||(t=["in"]),p=[],n=0,a=t.length;n<a;n++){if(c=t[n],Array.isArray(c)){var l=c,d=o(l,2);if(u=d[0],i=d[1],!this.ports[u].isAddressable())throw new Error("Non-addressable ports, access must be with string portname")}else if(u=c,this.ports[u].isAddressable())throw new Error("For addressable ports, access must be with array [portname, idx]");this.nodeInstance.isForwardingInport(u)?(s=this.__getForForwarding(u,i),p.push(s)):(s=this.ports[u].get(this.scope,i),p.push(s))}return 1===t.length?p[0]:p}},{key:"__getForForwarding",value:function(e,t){var r,n,o,i,s,a;for(a=[],n=null;i=this.ports[e].get(this.scope,t);){if("data"===i.type){n=i;break}a.push(i)}for(o=0,s=a.length;o<s;o++)"closeBracket"!==(i=a[o]).type?"openBracket"!==i.type||this.nodeInstance.getBracketContext("in",e,this.scope,t).push({ip:i,ports:[],source:e}):(this.result.__bracketClosingBefore||(this.result.__bracketClosingBefore=[]),(r=this.nodeInstance.getBracketContext("in",e,this.scope,t).pop()).closeIp=i,this.result.__bracketClosingBefore.push(r));return this.result.__bracketContext||(this.result.__bracketContext={}),this.result.__bracketContext[e]=this.nodeInstance.getBracketContext("in",e,this.scope,t).slice(0),n}},{key:"getData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a;for(t.length||(t=["in"]),n=[],o=0,i=t.length;o<i;o++)if(a=t[o],null!=(s=this.get(a))){for(;"data"!==s.type&&(s=this.get(a)););n.push(s.data)}else n.push(s);return 1===t.length?n.pop():n}},{key:"getStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,u,p;for(t.length||(t=["in"]),n=[],i=0,a=t.length;i<a;i++){for(c=t[i],u=[],p=[],o=!1,(s=this.get(c))||n.push(void 0);s&&("openBracket"===s.type&&(u.length||(p=[],o=!1),u.push(s.data),p.push(s)),"data"!==s.type||(p.push(s),o=!0,u.length))&&("closeBracket"!==s.type||(p.push(s),u.pop(),!o||u.length));)s=this.get(c);n.push(p)}return 1===t.length?n.pop():n}}]),e}(),b=function(){function e(t,r){s(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.result=this.context.result,this.scope=this.context.scope}return c(e,[{key:"isError",value:function(e){return e instanceof Error||Array.isArray(e)&&e.length>0&&e[0]instanceof Error}},{key:"error",value:function(e){var t,r,n,o,i,s,a;if((s=Array.isArray(e))||(e=[e]),!("error"in this.ports)||!this.ports.error.isAttached()&&this.ports.error.isRequired()){for(a=[],n=0,i=e.length;n<i;n++)throw t=e[n];return a}for(s&&this.sendIP("error",new g("openBracket")),r=0,o=e.length;r<o;r++)t=e[r],this.sendIP("error",t);if(s)return this.sendIP("error",new g("closeBracket"))}},{key:"sendIP",value:function(e,t){var r;if(r=g.isIP(t)?t:new g("data",t),null!==this.scope&&null===r.scope&&(r.scope=this.scope),this.nodeInstance.outPorts[e].isAddressable()&&null===r.index)throw new Error("Sending packets to addressable ports requires specifying index");if(!this.nodeInstance.isOrdered())return this.nodeInstance.outPorts[e].options.scoped||(r.scope=null),this.nodeInstance.outPorts[e].sendIP(r);this.nodeInstance.addToResult(this.result,e,r)}},{key:"send",value:function(e){var t,r,o,i,s,a,c,u;if(this.isError(e))return this.error(e);for(t=[],i=!1,r=0,o=(c=Object.keys(this.ports.ports)).length;r<o;r++)"error"!==(a=c[r])&&"ports"!==a&&"_callbacks"!==a&&t.push(a),i||null==e||"object"!==n(e)||-1===Object.keys(e).indexOf(a)||(i=!0);if(1!==t.length||i){if(t.length>1&&!i)throw new Error("Port must be specified for sending output");for(a in u=[],e)s=e[a],u.push(this.sendIP(a,s));return u}this.sendIP(t[0],e)}},{key:"sendDone",value:function(e){return this.send(e),this.done()}},{key:"pass",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("out"in this.ports))throw new Error('output.pass() requires port "out" to be present');for(t in n)r=n[t],this.ip[t]=r;return this.ip.data=e,this.sendIP("out",this.ip),this.done()}},{key:"done",value:function(e){var t,r,n,o,i,s,a,c,u,p=this;if(this.result.__resolved=!0,this.nodeInstance.activate(this.context),e&&this.error(e),s=function(){var e,t,r,n;return r=(n=p.nodeInstance.outputQ.filter((function(e){return!e.__resolved||(2!==Object.keys(e).length||!e.__bracketClosingAfter)}))).indexOf(p.result),e=n.length,t=p.nodeInstance.load,r===e-1||(-1===r&&t===e+1||e<=1&&1===t)},this.nodeInstance.isOrdered()&&s())for(c in u=this.nodeInstance.bracketContext.in)if((n=u[c])[this.scope]&&(a=n[this.scope]).length)for(r=a[a.length-1],t=this.nodeInstance.inPorts[r.source].getBuffer(r.ip.scope,r.ip.index);t.length&&"closeBracket"===t[0].type;)i=this.nodeInstance.inPorts[r.source].get(r.ip.scope,r.ip.index),(o=a.pop()).closeIp=i,this.result.__bracketClosingAfter||(this.result.__bracketClosingAfter=[]),this.result.__bracketClosingAfter.push(o);return w("".concat(this.nodeInstance.nodeId," finished processing ").concat(this.nodeInstance.load)),this.nodeInstance.deactivate(this.context)}}]),e}(),t.Component=f},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m,g=r(5);d=g.EventEmitter,h=r(116),f=r(118),m=function(){var e=function(e){a(r,e);var t=u(r);function r(e){var n,i,s;if(o(this,r),(n=t.call(this)).ports={},!e)return p(n);for(i in e)s=e[i],n.add(i,s);return n}return s(r,[{key:"add",value:function(e,t,r){if("add"===e||"remove"===e)throw new Error("Add and remove are restricted port names");if(!e.match(/^[a-z0-9_\.\/]+$/))throw new Error("Port names can only contain lowercase alphanumeric characters and underscores. '".concat(e,"' not allowed"));return this.ports[e]&&this.remove(e),"object"===n(t)&&t.canAttach?this.ports[e]=t:this.ports[e]=new this.model(t,r),this[e]=this.ports[e],this.emit("add",e),this}},{key:"remove",value:function(e){if(!this.ports[e])throw new Error("Port ".concat(e," not defined"));return delete this.ports[e],delete this[e],this.emit("remove",e),this}}]),r}(d);return e.prototype.model=h,e}.call(this),t.InPorts=function(e){a(r,e);var t=u(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"on",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].on(t,r)}},{key:"once",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].once(t,r)}}]),r}(m),t.OutPorts=function(){var e=function(e){a(r,e);var t=u(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"connect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].connect(t)}},{key:"beginGroup",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].beginGroup(t,r)}},{key:"send",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].send(t,r)}},{key:"endGroup",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].endGroup(t)}},{key:"disconnect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].disconnect(t)}}]),r}(m);return e.prototype.model=f,e}.call(this),t.normalizePortName=function(e){var t,r;return r={name:e},-1===e.indexOf("[")?r:(null!=(t=e.match(/(.*)\[([0-9]+)\]/))?t.length:void 0)?(r.name=t[1],r.index=t[2],r):e}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,l;p=r(117),r(16),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,r,n,c=a(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,u),null==t.control&&(t.control=!1),null==t.scoped&&(t.scoped=!0),null==t.triggering&&(t.triggering=!0),t.process)throw new Error("InPort process callback is deprecated. Please use Process API");if(t.handle)throw new Error("InPort handle callback is deprecated. Please use Process API");return(e=c.call(this,t)).prepareBuffer(),e}return t=u,(r=[{key:"attachSocket",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.hasDefault()&&e.setDataDelegate((function(){return t.options.default})),e.on("connect",(function(){return t.handleSocketEvent("connect",e,r)})),e.on("begingroup",(function(e){return t.handleSocketEvent("begingroup",e,r)})),e.on("data",(function(e){return t.validateData(e),t.handleSocketEvent("data",e,r)})),e.on("endgroup",(function(e){return t.handleSocketEvent("endgroup",e,r)})),e.on("disconnect",(function(){return t.handleSocketEvent("disconnect",e,r)})),e.on("ip",(function(e){return t.handleIP(e,r)}))}},{key:"handleIP",value:function(e,t){var r;if(!this.options.control||"data"===e.type)return e.owner=this.nodeInstance,this.isAddressable()&&(e.index=t),"all"===e.datatype&&(e.datatype=this.getDataType()),this.getSchema()&&!e.schema&&(e.schema=this.getSchema()),(r=this.prepareBufferForIP(e)).push(e),this.options.control&&r.length>1&&r.shift(),this.emit("ip",e,t)}},{key:"handleSocketEvent",value:function(e,t,r){return this.isAddressable()?this.emit(e,t,r):this.emit(e,t)}},{key:"hasDefault",value:function(){return void 0!==this.options.default}},{key:"prepareBuffer",value:function(){if(this.isAddressable())return this.options.scoped&&(this.scopedBuffer={}),this.indexedBuffer={},void(this.iipBuffer={});this.options.scoped&&(this.scopedBuffer={}),this.iipBuffer=[],this.buffer=[]}},{key:"prepareBufferForIP",value:function(e){return this.isAddressable()?null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),e.index in this.scopedBuffer[e.scope]||(this.scopedBuffer[e.scope][e.index]=[]),this.scopedBuffer[e.scope][e.index]):e.initial?(e.index in this.iipBuffer||(this.iipBuffer[e.index]=[]),this.iipBuffer[e.index]):(e.index in this.indexedBuffer||(this.indexedBuffer[e.index]=[]),this.indexedBuffer[e.index]):null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),this.scopedBuffer[e.scope]):e.initial?this.iipBuffer:this.buffer}},{key:"validateData",value:function(e){if(this.options.values&&-1===this.options.values.indexOf(e))throw new Error("Invalid data='".concat(e,"' received, not in [").concat(this.options.values,"]"))}},{key:"getBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAddressable()){if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;if(!(t in this.scopedBuffer[e]))return;return this.scopedBuffer[e][t]}if(r){if(!(t in this.iipBuffer))return;return this.iipBuffer[t]}if(!(t in this.indexedBuffer))return;return this.indexedBuffer[t]}if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;return this.scopedBuffer[e]}return r?this.iipBuffer:this.buffer}},{key:"getFromBuffer",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=(r=this.getBuffer(e,t,n))?r.length:void 0)return this.options.control?r[r.length-1]:r.shift()}},{key:"get",value:function(e,t){var r;return void 0!==(r=this.getFromBuffer(e,t))?r:this.getFromBuffer(null,t,!0)}},{key:"hasIPinBuffer",value:function(e,t,r){var n,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(null!=(n=this.getBuffer(e,t,s))?n.length:void 0))return!1;for(o=0,i=n.length;o<i;o++)if(r(n[o]))return!0;return!1}},{key:"hasIIP",value:function(e,t){return this.hasIPinBuffer(null,e,t,!0)}},{key:"has",value:function(e,t,r){return this.isAddressable()||(r=t,t=null),!!this.hasIPinBuffer(e,t,r)||!!this.hasIIP(t,r)}},{key:"length",value:function(e,t){var r;return(r=this.getBuffer(e,t))?r.length:0}},{key:"ready",value:function(e,t){return this.length(e)>0}},{key:"clear",value:function(){return this.prepareBuffer()}}])&&i(t.prototype,r),n&&i(t,n),u}(p),e.exports=l},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,l;p=r(5).EventEmitter,l=["all","string","number","int","object","array","boolean","color","date","bang","function","buffer","stream"],u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).options=t.handleOptions(e),t.sockets=[],t.node=null,t.name=null,t}return t=c,(r=[{key:"handleOptions",value:function(e){if(e||(e={}),e.datatype||(e.datatype="all"),void 0===e.required&&(e.required=!1),"integer"===e.datatype&&(e.datatype="int"),-1===l.indexOf(e.datatype))throw new Error("Invalid port datatype '".concat(e.datatype,"' specified, valid are ").concat(l.join(", ")));if(e.type&&!e.schema&&(e.schema=e.type,delete e.type),e.schema&&-1===e.schema.indexOf("/"))throw new Error("Invalid port schema '".concat(e.schema,"' specified. Should be URL or MIME type"));return e}},{key:"getId",value:function(){return this.node&&this.name?"".concat(this.node," ").concat(this.name.toUpperCase()):"Port"}},{key:"getDataType",value:function(){return this.options.datatype}},{key:"getSchema",value:function(){return this.options.schema||null}},{key:"getDescription",value:function(){return this.options.description}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isAddressable()&&null!==t||(t=this.sockets.length),this.sockets[t]=e,this.attachSocket(e,t),!this.isAddressable())return this.emit("attach",e);this.emit("attach",e,t)}},{key:"attachSocket",value:function(){}},{key:"detach",value:function(e){var t;if(-1!==(t=this.sockets.indexOf(e))){if(this.sockets[t]=void 0,!this.isAddressable())return this.emit("detach",e);this.emit("detach",e,t)}}},{key:"isAddressable",value:function(){return!!this.options.addressable}},{key:"isBuffered",value:function(){return!!this.options.buffered}},{key:"isRequired",value:function(){return!!this.options.required}},{key:"isAttached",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isAddressable()&&null!==e?!!this.sockets[e]:!!this.sockets.length}},{key:"listAttached",value:function(){var e,t,r,n,o;for(e=[],r=t=0,n=(o=this.sockets).length;t<n;r=++t)o[r]&&e.push(r);return e}},{key:"isConnected",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isAddressable()){if(null===t)throw new Error("".concat(this.getId(),": Socket ID required"));if(!this.sockets[t])throw new Error("".concat(this.getId(),": Socket ").concat(t," not available"));return this.sockets[t].isConnected()}return e=!1,this.sockets.forEach((function(t){if(t)return t.isConnected()?e=!0:void 0})),e}},{key:"canAttach",value:function(){return!0}}])&&o(t.prototype,r),n&&o(t,n),c}(p),e.exports=u},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,d,h;l=r(117),d=r(16),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,r,n,u=c(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,l),null==t.scoped&&(t.scoped=!0),(e=u.call(this,t)).cache={},e}return t=l,(r=[{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s(p(l.prototype),"attach",this).call(this,e,t),this.isCaching()&&null!=this.cache[t])return this.send(this.cache[t],t)}},{key:"connect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.connect());return r}},{key:"beginGroup",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),t.forEach((function(t){if(t)return t.beginGroup(e)}))}},{key:"send",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),this.isCaching()&&e!==this.cache[r]&&(this.cache[r]=e),t.forEach((function(t){if(t)return t.send(e)}))}},{key:"endGroup",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.endGroup());return r}},{key:"disconnect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.disconnect());return r}},{key:"sendIP",value:function(e,t,r,n){var o,i,s,a,c,u,p,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];for(d.isIP(e)?n=(i=e).index:i=new d(e,t,r),p=this.getSockets(n),this.checkRequired(p),"all"===i.datatype&&(i.datatype=this.getDataType()),this.getSchema()&&!i.schema&&(i.schema=this.getSchema()),this.isCaching()&&t!==(null!=(c=this.cache[n])?c.data:void 0)&&(this.cache[n]=i),a=!0,o=0,s=p.length;o<s;o++)(u=p[o])&&(a?(u.post(i,l),a=!1):(i.clonable&&(i=i.clone()),u.post(i,l)));return this}},{key:"openBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("openBracket",e,t,r)}},{key:"data",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("data",e,t,r)}},{key:"closeBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("closeBracket",e,t,r)}},{key:"checkRequired",value:function(e){if(0===e.length&&this.isRequired())throw new Error("".concat(this.getId(),": No connections available"))}},{key:"getSockets",value:function(e){if(this.isAddressable()){if(null===e)throw new Error("".concat(this.getId()," Socket ID required"));return this.sockets[e]?[this.sockets[e]]:[]}return this.sockets}},{key:"isCaching",value:function(){return!!this.options.caching}}])&&i(t.prototype,r),n&&i(t,n),l}(l),e.exports=h},function(e,t){e.exports={stringPatterns:[/'[^]*?'/g,/"[^]*?"/g,/`[^]*?`/g],prePatterns:[/\[[^]*?\]/,/{[^]*?}/,/=>\s*?\([^]*?\)/,/=\s*?function\s*?\([^]*(?=[^]*\))/,/=\s*?\([^]*(?=[^]*\))/,/\s*?=[^>][^,\)]*/],postPatterns:[/\([^]*?\)/]}},function(e,t,r){var n=r(2),o=r(8),i=n.createFactory(o({displayName:"TheGraphSVGImage",render:function(){var e="<image ";return e=(e=(e=(e=(e=e+'xlink:href="'+this.props.src+'"')+'x="'+this.props.x+'"')+'y="'+this.props.y+'"')+'width="'+this.props.width+'"')+'height="'+this.props.height+'"',e+="/>",n.createElement("g",{className:this.props.className,dangerouslySetInnerHTML:{__html:e}})}}));e.exports=i},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(48),a=r(50),c={container:{},rect:{ref:"rect",className:"context-modal-bg"}},u={createModalBackgroundGroup:s.createGroup,createModalBackgroundRect:s.createRect},p=n.createFactory(i({displayName:"TheGraphModalBG",componentDidMount:function(){var e=o.findDOMNode(this),t=this.refs.rect;e.addEventListener("mousedown",function(e){e&&e.target===t&&this.hideModal()}.bind(this))},hideModal:function(e){this.props.triggerHideContext()},render:function(){var e={width:this.props.width,height:this.props.height};e=a(c.rect,e);var t=[u.createModalBackgroundRect.call(this,e),this.props.children],r=a(c.container,{});return u.createModalBackgroundGroup.call(this,r,t)}}));e.exports={ModalBG:p,config:c,factories:u}},function(e,t,r){var n=r(2),o=r(8),i=n.createFactory(o({displayName:"TheGraphTextBG",render:function(){var e=this.props.text;e||(e="");var t=this.props.height,r=e.length*this.props.height*2/3,o=this.props.height/2,i=this.props.x,s=this.props.y-t/2;return"center"===this.props.halign&&(i-=r/2,"middle"),"right"===this.props.halign&&(i-=r,"end"),n.createElement("g",{className:this.props.className?this.props.className:"text-bg"},n.createElement("rect",{className:"text-bg-rect",x:i,y:s,rx:o,ry:o,height:1.1*t,width:r}),n.createElement("text",{className:this.props.textClassName?this.props.textClassName:"text-bg-text",x:this.props.x,y:this.props.y,children:e}))}}));e.exports=i},function(e,t){FONT_AWESOME={"500px":"","address-book":"","address-book-o":"","address-card":"","address-card-o":"",adjust:"",adn:"","align-center":"","align-justify":"","align-left":"","align-right":"",amazon:"",ambulance:"","american-sign-language-interpreting":"",anchor:"",android:"",angellist:"","angle-double-down":"","angle-double-left":"","angle-double-right":"","angle-double-up":"","angle-down":"","angle-left":"","angle-right":"","angle-up":"",apple:"",archive:"","area-chart":"","arrow-circle-down":"","arrow-circle-left":"","arrow-circle-o-down":"","arrow-circle-o-left":"","arrow-circle-o-right":"","arrow-circle-o-up":"","arrow-circle-right":"","arrow-circle-up":"","arrow-down":"","arrow-left":"","arrow-right":"","arrow-up":"",arrows:"","arrows-alt":"","arrows-h":"","arrows-v":"","asl-interpreting":"","assistive-listening-systems":"",asterisk:"",at:"","audio-description":"",automobile:"",backward:"","balance-scale":"",ban:"",bandcamp:"",bank:"","bar-chart":"","bar-chart-o":"",barcode:"",bars:"",bath:"",bathtub:"",battery:"","battery-0":"","battery-1":"","battery-2":"","battery-3":"","battery-4":"","battery-empty":"","battery-full":"","battery-half":"","battery-quarter":"","battery-three-quarters":"",bed:"",beer:"",behance:"","behance-square":"",bell:"","bell-o":"","bell-slash":"","bell-slash-o":"",bicycle:"",binoculars:"","birthday-cake":"",bitbucket:"","bitbucket-square":"",bitcoin:"","black-tie":"",blind:"",bluetooth:"","bluetooth-b":"",bold:"",bolt:"",bomb:"",book:"",bookmark:"","bookmark-o":"",braille:"",briefcase:"",btc:"",bug:"",building:"","building-o":"",bullhorn:"",bullseye:"",bus:"",buysellads:"",cab:"",calculator:"",calendar:"","calendar-check-o":"","calendar-minus-o":"","calendar-o":"","calendar-plus-o":"","calendar-times-o":"",camera:"","camera-retro":"",car:"","caret-down":"","caret-left":"","caret-right":"","caret-square-o-down":"","caret-square-o-left":"","caret-square-o-right":"","caret-square-o-up":"","caret-up":"","cart-arrow-down":"","cart-plus":"",cc:"","cc-amex":"","cc-diners-club":"","cc-discover":"","cc-jcb":"","cc-mastercard":"","cc-paypal":"","cc-stripe":"","cc-visa":"",certificate:"",chain:"","chain-broken":"",check:"","check-circle":"","check-circle-o":"","check-square":"","check-square-o":"","chevron-circle-down":"","chevron-circle-left":"","chevron-circle-right":"","chevron-circle-up":"","chevron-down":"","chevron-left":"","chevron-right":"","chevron-up":"",child:"",chrome:"",circle:"","circle-o":"","circle-o-notch":"","circle-thin":"",clipboard:"","clock-o":"",clone:"",close:"",cloud:"","cloud-download":"","cloud-upload":"",cny:"",code:"","code-fork":"",codepen:"",codiepie:"",coffee:"",cog:"",cogs:"",columns:"",comment:"","comment-o":"",commenting:"","commenting-o":"",comments:"","comments-o":"",compass:"",compress:"",connectdevelop:"",contao:"",copy:"",copyright:"","creative-commons":"","credit-card":"","credit-card-alt":"",crop:"",crosshairs:"",css3:"",cube:"",cubes:"",cut:"",cutlery:"",dashboard:"",dashcube:"",database:"",deaf:"",deafness:"",dedent:"",delicious:"",desktop:"",deviantart:"",diamond:"",digg:"",dollar:"","dot-circle-o":"",download:"",dribbble:"","drivers-license":"","drivers-license-o":"",dropbox:"",drupal:"",edge:"",edit:"",eercast:"",eject:"","ellipsis-h":"","ellipsis-v":"",empire:"",envelope:"","envelope-o":"","envelope-open":"","envelope-open-o":"","envelope-square":"",envira:"",eraser:"",etsy:"",eur:"",euro:"",exchange:"",exclamation:"","exclamation-circle":"","exclamation-triangle":"",expand:"",expeditedssl:"","external-link":"","external-link-square":"",eye:"","eye-slash":"",eyedropper:"",fa:"",facebook:"","facebook-f":"","facebook-official":"","facebook-square":"","fast-backward":"","fast-forward":"",fax:"",feed:"",female:"","fighter-jet":"",file:"","file-archive-o":"","file-audio-o":"","file-code-o":"","file-excel-o":"","file-image-o":"","file-movie-o":"","file-o":"","file-pdf-o":"","file-photo-o":"","file-picture-o":"","file-powerpoint-o":"","file-sound-o":"","file-text":"","file-text-o":"","file-video-o":"","file-word-o":"","file-zip-o":"","files-o":"",film:"",filter:"",fire:"","fire-extinguisher":"",firefox:"","first-order":"",flag:"","flag-checkered":"","flag-o":"",flash:"",flask:"",flickr:"","floppy-o":"",folder:"","folder-o":"","folder-open":"","folder-open-o":"",font:"","font-awesome":"",fonticons:"","fort-awesome":"",forumbee:"",forward:"",foursquare:"","free-code-camp":"","frown-o":"","futbol-o":"",gamepad:"",gavel:"",gbp:"",ge:"",gear:"",gears:"",genderless:"","get-pocket":"",gg:"","gg-circle":"",gift:"",git:"","git-square":"",github:"","github-alt":"","github-square":"",gitlab:"",gittip:"",glass:"",glide:"","glide-g":"",globe:"",google:"","google-plus":"","google-plus-circle":"","google-plus-official":"","google-plus-square":"","google-wallet":"","graduation-cap":"",gratipay:"",grav:"",group:"","h-square":"","hacker-news":"","hand-grab-o":"","hand-lizard-o":"","hand-o-down":"","hand-o-left":"","hand-o-right":"","hand-o-up":"","hand-paper-o":"","hand-peace-o":"","hand-pointer-o":"","hand-rock-o":"","hand-scissors-o":"","hand-spock-o":"","hand-stop-o":"","handshake-o":"","hard-of-hearing":"",hashtag:"","hdd-o":"",header:"",headphones:"",heart:"","heart-o":"",heartbeat:"",history:"",home:"","hospital-o":"",hotel:"",hourglass:"","hourglass-1":"","hourglass-2":"","hourglass-3":"","hourglass-end":"","hourglass-half":"","hourglass-o":"","hourglass-start":"",houzz:"",html5:"","i-cursor":"","id-badge":"","id-card":"","id-card-o":"",ils:"",image:"",imdb:"",inbox:"",indent:"",industry:"",info:"","info-circle":"",inr:"",instagram:"",institution:"","internet-explorer":"",intersex:"",ioxhost:"",italic:"",joomla:"",jpy:"",jsfiddle:"",key:"","keyboard-o":"",krw:"",language:"",laptop:"",lastfm:"","lastfm-square":"",leaf:"",leanpub:"",legal:"","lemon-o":"","level-down":"","level-up":"","life-bouy":"","life-buoy":"","life-ring":"","life-saver":"","lightbulb-o":"","line-chart":"",link:"",linkedin:"","linkedin-square":"",linode:"",linux:"",list:"","list-alt":"","list-ol":"","list-ul":"","location-arrow":"",lock:"","long-arrow-down":"","long-arrow-left":"","long-arrow-right":"","long-arrow-up":"","low-vision":"",magic:"",magnet:"","mail-forward":"","mail-reply":"","mail-reply-all":"",male:"",map:"","map-marker":"","map-o":"","map-pin":"","map-signs":"",mars:"","mars-double":"","mars-stroke":"","mars-stroke-h":"","mars-stroke-v":"",maxcdn:"",meanpath:"",medium:"",medkit:"",meetup:"","meh-o":"",mercury:"",microchip:"",microphone:"","microphone-slash":"",minus:"","minus-circle":"","minus-square":"","minus-square-o":"",mixcloud:"",mobile:"","mobile-phone":"",modx:"",money:"","moon-o":"","mortar-board":"",motorcycle:"","mouse-pointer":"",music:"",navicon:"",neuter:"","newspaper-o":"","object-group":"","object-ungroup":"",odnoklassniki:"","odnoklassniki-square":"",opencart:"",openid:"",opera:"","optin-monster":"",outdent:"",pagelines:"","paint-brush":"","paper-plane":"","paper-plane-o":"",paperclip:"",paragraph:"",paste:"",pause:"","pause-circle":"","pause-circle-o":"",paw:"",paypal:"",pencil:"","pencil-square":"","pencil-square-o":"",percent:"",phone:"","phone-square":"",photo:"","picture-o":"","pie-chart":"","pied-piper":"","pied-piper-alt":"","pied-piper-pp":"",pinterest:"","pinterest-p":"","pinterest-square":"",plane:"",play:"","play-circle":"","play-circle-o":"",plug:"",plus:"","plus-circle":"","plus-square":"","plus-square-o":"",podcast:"","power-off":"",print:"","product-hunt":"","puzzle-piece":"",qq:"",qrcode:"",question:"","question-circle":"","question-circle-o":"",quora:"","quote-left":"","quote-right":"",ra:"",random:"",ravelry:"",rebel:"",recycle:"",reddit:"","reddit-alien":"","reddit-square":"",refresh:"",registered:"",remove:"",renren:"",reorder:"",repeat:"",reply:"","reply-all":"",resistance:"",retweet:"",rmb:"",road:"",rocket:"","rotate-left":"","rotate-right":"",rouble:"",rss:"","rss-square":"",rub:"",ruble:"",rupee:"",s15:"",safari:"",save:"",scissors:"",scribd:"",search:"","search-minus":"","search-plus":"",sellsy:"",send:"","send-o":"",server:"",share:"","share-alt":"","share-alt-square":"","share-square":"","share-square-o":"",shekel:"",sheqel:"",shield:"",ship:"",shirtsinbulk:"","shopping-bag":"","shopping-basket":"","shopping-cart":"",shower:"","sign-in":"","sign-language":"","sign-out":"",signal:"",signing:"",simplybuilt:"",sitemap:"",skyatlas:"",skype:"",slack:"",sliders:"",slideshare:"","smile-o":"",snapchat:"","snapchat-ghost":"","snapchat-square":"","snowflake-o":"","soccer-ball-o":"",sort:"","sort-alpha-asc":"","sort-alpha-desc":"","sort-amount-asc":"","sort-amount-desc":"","sort-asc":"","sort-desc":"","sort-down":"","sort-numeric-asc":"","sort-numeric-desc":"","sort-up":"",soundcloud:"","space-shuttle":"",spinner:"",spoon:"",spotify:"",square:"","square-o":"","stack-exchange":"","stack-overflow":"",star:"","star-half":"","star-half-empty":"","star-half-full":"","star-half-o":"","star-o":"",steam:"","steam-square":"","step-backward":"","step-forward":"",stethoscope:"","sticky-note":"","sticky-note-o":"",stop:"","stop-circle":"","stop-circle-o":"","street-view":"",strikethrough:"",stumbleupon:"","stumbleupon-circle":"",subscript:"",subway:"",suitcase:"","sun-o":"",superpowers:"",superscript:"",support:"",table:"",tablet:"",tachometer:"",tag:"",tags:"",tasks:"",taxi:"",telegram:"",television:"","tencent-weibo":"",terminal:"","text-height":"","text-width":"",th:"","th-large":"","th-list":"",themeisle:"",thermometer:"","thermometer-0":"","thermometer-1":"","thermometer-2":"","thermometer-3":"","thermometer-4":"","thermometer-empty":"","thermometer-full":"","thermometer-half":"","thermometer-quarter":"","thermometer-three-quarters":"","thumb-tack":"","thumbs-down":"","thumbs-o-down":"","thumbs-o-up":"","thumbs-up":"",ticket:"",times:"","times-circle":"","times-circle-o":"","times-rectangle":"","times-rectangle-o":"",tint:"","toggle-down":"","toggle-left":"","toggle-off":"","toggle-on":"","toggle-right":"","toggle-up":"",trademark:"",train:"",transgender:"","transgender-alt":"",trash:"","trash-o":"",tree:"",trello:"",tripadvisor:"",trophy:"",truck:"",try:"",tty:"",tumblr:"","tumblr-square":"","turkish-lira":"",tv:"",twitch:"",twitter:"","twitter-square":"",umbrella:"",underline:"",undo:"","universal-access":"",university:"",unlink:"",unlock:"","unlock-alt":"",unsorted:"",upload:"",usb:"",usd:"",user:"","user-circle":"","user-circle-o":"","user-md":"","user-o":"","user-plus":"","user-secret":"","user-times":"",users:"",vcard:"","vcard-o":"",venus:"","venus-double":"","venus-mars":"",viacoin:"",viadeo:"","viadeo-square":"","video-camera":"",vimeo:"","vimeo-square":"",vine:"",vk:"","volume-control-phone":"","volume-down":"","volume-off":"","volume-up":"",warning:"",wechat:"",weibo:"",weixin:"",whatsapp:"",wheelchair:"","wheelchair-alt":"",wifi:"","wikipedia-w":"","window-close":"","window-close-o":"","window-maximize":"","window-minimize":"","window-restore":"",windows:"",won:"",wordpress:"",wpbeginner:"",wpexplorer:"",wpforms:"",wrench:"",xing:"","xing-square":"","y-combinator":"","y-combinator-square":"",yahoo:"",yc:"","yc-square":"",yelp:"",yen:"",yoast:"",youtube:"","youtube-play":"","youtube-square":""},e.exports=FONT_AWESOME},function(e,t){function r(e,t,r,n,o,i){try{e.strokeStyle=i.edgeColors[0],o&&(e.strokeStyle=i.edgeColors[o]);var s=Math.round(r.metadata.x*t)-.5,a=Math.round(r.metadata.y*t)-.5,c=Math.round(n.metadata.x*t)-.5,u=Math.round(n.metadata.y*t)-.5;e.beginPath(),e.moveTo(s,a),e.lineTo(c,u),e.stroke()}catch(e){}}e.exports={render:function(e,t,n){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),e.lineWidth=n.lineWidth;var o=[],i=1/0,s=1/0,a=-1/0,c=-1/0,u={};if(t.nodes.forEach(function(e){!e.metadata||isNaN(e.metadata.x)||isNaN(e.metadata.y)||(o.push(e),u[e.id]=e,i=Math.min(i,e.metadata.x),s=Math.min(s,e.metadata.y),a=Math.max(a,e.metadata.x),c=Math.max(c,e.metadata.y))}.bind(this)),t.inports&&Object.keys(t.inports).forEach(function(e){var r=t.inports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(e){var r=t.outports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),0===o.length)return{scale:1,rectangle:[0,0,0,0]};if(!(isFinite(i)&&isFinite(s)&&isFinite(a)&&isFinite(c)))throw new Error("the-graph-thumb: Invalid space spanned");i-=n.nodeSize,s-=n.nodeSize,a+=2*n.nodeSize,c+=2*n.nodeSize;var p=a-i,l=c-s,d=[];d[0]=i,d[1]=s,d[2]=p,d[3]=l;var h=p>l?n.width/p:n.height/l,f=h,m=Math.round(n.nodeSize*h)/2;return e.setTransform(1,0,0,1,0-i*h,0-s*h),t.inports&&Object.keys(t.inports).forEach(function(o){var i=t.inports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=u[i.process];if(!s)return;r(e,h,i,s,2,n)}}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(o){var i=t.outports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=u[i.process];if(!s)return;r(e,h,s,i,5,n)}}.bind(this)),t.edges.forEach(function(t){var o=u[t.from.node],i=u[t.to.node];o&&i&&r(e,h,o,i,t.metadata.route,n)}.bind(this)),o.forEach(function(t){var r=Math.round(t.metadata.x*h),o=Math.round(t.metadata.y*h);e.strokeStyle=n.strokeStyle,e.fillStyle=n.fillStyle,e.beginPath(),t.process&&!t.component?e.arc(r,o,m/2,0,2*Math.PI,!1):e.arc(r,o,m,0,2*Math.PI,!1),e.fill(),e.stroke(),e.beginPath();var i=Math.max(m-1.5,1);t.process&&!t.component?e.arc(r,o,i/2,0,2*Math.PI,!1):e.arc(r,o,i,0,2*Math.PI,!1),e.fill()}.bind(this)),{rectangle:d,scale:f}},styleFromTheme:function(e){var t={};return"dark"===e?(t.fill="hsl(184, 8%, 10%)",t.stroke="hsl(180, 11%, 70%)",t.edgeColors=["white","hsl(  0, 100%, 46%)","hsl( 35, 100%, 46%)","hsl( 60, 100%, 46%)","hsl(135, 100%, 46%)","hsl(160, 100%, 46%)","hsl(185, 100%, 46%)","hsl(210, 100%, 46%)","hsl(285, 100%, 46%)","hsl(310, 100%, 46%)","hsl(335, 100%, 46%)"]):(t.fill="hsl(184, 8%, 75%)",t.stroke="hsl(180, 11%, 20%)",t.edgeColors=["hsl(  0,   0%, 50%)","hsl(  0, 100%, 40%)","hsl( 29, 100%, 40%)","hsl( 47, 100%, 40%)","hsl(138, 100%, 40%)","hsl(160,  73%, 50%)","hsl(181, 100%, 40%)","hsl(216, 100%, 40%)","hsl(260, 100%, 40%)","hsl(348, 100%, 50%)","hsl(328, 100%, 40%)"]),t}}},function(e,t){var r={};function n(e){return JSON.parse(JSON.stringify(e))}function o(e){var t=60466176;return e+"_"+(t=Math.floor(Math.random()*t)).toString(36)}e.exports={copy:function(e,t){r={nodes:[],edges:[]};var i,s,a={};for(i=0,s=t.length;i<s;i++){var c=e.getNode(t[i]),u=n(c);u.id=o(c.component),r.nodes.push(u),a[c.id]=u.id}for(i=0,s=e.edges.length;i<s;i++){var p=e.edges[i],l=p.from.node,d=p.to.node;if(a.hasOwnProperty(l)&&a.hasOwnProperty(d)){var h=n(p);h.from.node=a[l],h.to.node=a[d],r.edges.push(h)}}},paste:function(e){var t,i,s={},a={nodes:[],edges:[]};for(t=0,i=r.nodes.length;t<i;t++){var c=r.nodes[t],u=n(c.metadata);u.x+=36,u.y+=36;var p=e.addNode(o(c.component),c.component,u);s[c.id]=p.id,a.nodes.push(p)}for(t=0,i=r.edges.length;t<i;t++){var l,d=r.edges[t],h=n(d.metadata);if(d.from.hasOwnProperty("index")||d.to.hasOwnProperty("index")){var f=d.from.index||null,m=d.to.index||null;l=e.addEdgeIndex(s[d.from.node],d.from.port,f,s[d.to.node],d.to.port,m,h)}else l=e.addEdge(s[d.from.node],d.from.port,s[d.to.node],d.to.port,h);a.edges.push(l)}return a}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,i,s,a,c,u,p=[].indexOf;u={Runtime:r(460),Graph:r(461),Network:r(462),Component:r(463)},i=r(4)("noflo-runtime-base:messaging:receive"),s=r(4)("noflo-runtime-base:messaging:receive:payload"),a=r(4)("noflo-runtime-base:messaging:send"),c=r(4)("noflo-runtime-base:messaging:send:payload"),o=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.options||(this.options={}),this.version="0.7",this.component=new u.Component(this),this.graph=new u.Graph(this),this.network=new u.Network(this),this.runtime=new u.Runtime(this),this.context=null,null!=this.options.defaultGraph&&(this.options.defaultGraph.baseDir=this.options.baseDir,r=this._getGraphName(this.options.defaultGraph),this.context="none",this.graph.registerGraph(r,this.options.defaultGraph),this.runtime.setMainGraph(r,this.options.defaultGraph),this.network._startNetwork(this.options.defaultGraph,r,this.context,(function(e){if(e)throw e}))),null!=this.options.captureOutput&&this.options.captureOutput&&this.startCapture(),this.options.capabilities||(this.options.capabilities=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","graph:readonly","network:data","network:control","network:status"]),this.options.defaultPermissions||(this.options.defaultPermissions=[]),this.options.permissions||(this.options.permissions={})}var t,r,o;return t=e,(r=[{key:"_getGraphName",value:function(e){var t,r;return r=this.options.namespace||"default",t=e.name||"main","".concat(r,"/").concat(t)}},{key:"canDo",value:function(e,t){var r,n;return r="string"==typeof e?[e]:e,n=this.getPermitted(t),r.filter((function(e){return p.call(n,e)>=0})).length>0}},{key:"canInput",value:function(e,t,r){if("graph"===e)return this.canDo(["protocol:graph"],r);switch("".concat(e,":").concat(t)){case"component:list":return this.canDo(["protocol:component"],r);case"component:getsource":return this.canDo(["component:getsource"],r);case"component:source":return this.canDo(["component:setsource"],r);case"network:edges":return this.canDo(["network:data","protocol:network"],r);case"network:start":case"network:stop":case"network:debug":return this.canDo(["network:control","protocol:network"],r);case"network:getstatus":return this.canDo(["network:status","network:control","protocol:network"],r);case"runtime:getruntime":return!0;case"runtime:packet":return this.canDo(["protocol:runtime"],r)}return!1}},{key:"getPermitted",value:function(e){return e?this.options.permissions[e]?this.options.permissions[e]:[]:this.options.defaultPermissions}},{key:"send",value:function(e,t,r,n){return a("".concat(e," ").concat(t)),c(r)}},{key:"sendAll",value:function(e,t,r,n){}},{key:"receive",value:function(e,t,r,n){if(r||(r={}),i("".concat(e," ").concat(t)),s(r),this.canInput(e,t,r.secret))switch(this.context=n,e){case"runtime":return this.runtime.receive(t,r,n);case"graph":return this.graph.receive(t,r,n);case"network":return this.network.receive(t,r,n);case"component":return this.component.receive(t,r,n);default:return this.send(e,"error",new Error("Protocol ".concat(e," is not supported")),n)}else this.send(e,"error",new Error("".concat(e,":").concat(t," is not permitted")),n)}}])&&n(t.prototype,r),o&&n(t,o),e}(),e.exports=o,e.exports.trace=r(466),e.exports.direct=r(478)},function(e,t,r){(function(t){e.exports=b;var n=r(6),o=r(128),i=r(71),s=(i.Minimatch,r(23)),a=r(5).EventEmitter,c=r(10),u=r(70),p=r(72),l=r(475),d=r(129),h=(d.alphasort,d.alphasorti,d.setopts),f=d.ownProp,m=r(476),g=(r(46),d.childrenIgnored),y=d.isIgnored,v=r(131);function b(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return l(e,t)}return new E(e,t,r)}b.sync=l;var w=b.GlobSync=l.GlobSync;function E(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new w(e,t)}if(!(this instanceof E))return new E(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=v(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return s();for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1,s);function s(){--o._processing,o._processing<=0&&o._finish()}}b.glob=b,b.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new E(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},b.Glob=E,s(E,a),E.prototype._finish=function(){if(u(this instanceof E),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},E.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},E.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=i._makeAbs(r),o.realpath(r,i.realpathCache,(function(n,o){n?"stat"===n.syscall?a[r]=!0:i.emit("error",n):a[o]=!0,0==--s&&(i.matches[e]=a,t())}))}))},E.prototype._mark=function(e){return d.mark(this,e)},E.prototype._makeAbs=function(e){return d.makeAbs(this,e)},E.prototype.abort=function(){this.aborted=!0,this.emit("abort")},E.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},E.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},E.prototype._process=function(e,t,r,n){if(u(this instanceof E),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,c=e.slice(s);null===o?a=".":p(o)||p(e.join("/"))?(o&&p(o)||(o="/"+o),a=o):a=o;var l=this._makeAbs(a);if(g(this,a))return n();c[0]===i.GLOBSTAR?this._processGlobStar(o,a,l,c,t,r,n):this._processReaddir(o,a,l,c,t,r,n)}},E.prototype._processReaddir=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,u){return a._processReaddir2(e,t,r,n,o,i,u,s)}))},E.prototype._processReaddir2=function(e,t,r,n,o,i,s,a){if(!s)return a();for(var u=n[0],p=!!this.minimatch.negate,l=u._glob,d=this.dot||"."===l.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(g=s[f]).charAt(0)||d)(p&&!e?!g.match(u):g.match(u))&&h.push(g)}var m=h.length;if(0===m)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<m;f++){var g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(o,g)}return a()}n.shift();for(f=0;f<m;f++){g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(n),o,i,a)}a()},E.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=p(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},E.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,o=m("lstat\0"+e,(function(n,o){if(n&&"ENOENT"===n.code)return t();var i=o&&o.isSymbolicLink();r.symlinks[e]=i,i||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));o&&n.lstat(e,o)}},E.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=m("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var o=this.cache[e];if(!o||"FILE"===o)return r();if(Array.isArray(o))return r(null,o)}n.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},E.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},E.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},E.prototype._processGlobStar=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,u){a._processGlobStar2(e,t,r,n,o,i,u,s)}))},E.prototype._processGlobStar2=function(e,t,r,n,o,i,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],p=u.concat(c);this._process(p,o,!1,a);var l=this.symlinks[r],d=s.length;if(l&&i)return a();for(var h=0;h<d;h++){if("."!==s[h].charAt(0)||this.dot){var f=u.concat(s[h],c);this._process(f,o,!0,a);var m=u.concat(s[h],n);this._process(m,o,!0,a)}}a()},E.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(o,i){n._processSimple2(e,t,o,i,r)}))},E.prototype._processSimple2=function(e,r,n,o,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!o)return i();if(e&&p(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),s&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()},E.prototype._stat=function(e,t){var r=this._makeAbs(e),o="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!o||"DIR"===i)return t(null,i);if(o&&"FILE"===i)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return o&&"FILE"===a?t():t(null,a,s)}var c=this,u=m("stat\0"+r,(function(o,i){if(i&&i.isSymbolicLink())return n.stat(r,(function(n,o){n?c._stat2(e,r,null,i,t):c._stat2(e,r,n,o,t)}));c._stat2(e,r,o,i,t)}));u&&n.lstat(r,u)},E.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var i="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,i&&"FILE"===s?o():o(null,s,n)}}).call(this,r(3))},function(e,t,r){(function(t){e.exports=p,p.realpath=p,p.sync=l,p.realpathSync=l,p.monkeypatch=function(){n.realpath=p,n.realpathSync=l},p.unmonkeypatch=function(){n.realpath=o,n.realpathSync=i};var n=r(6),o=n.realpath,i=n.realpathSync,s=t.version,a=/^v[0-5]\./.test(s),c=r(471);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function p(e,t,r){if(a)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,(function(n,o){u(n)?c.realpath(e,t,r):r(n,o)}))}function l(e,t){if(a)return i(e,t);try{return i(e,t)}catch(r){if(u(r))return c.realpathSync(e,t);throw r}}}).call(this,r(3))},function(e,t,r){(function(e){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(t,r,i){i||(i={});if(i.matchBase&&-1===r.indexOf("/")){if(i.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}t.silent=!!i.silent,t.pattern=r,t.strict=!1!==i.strict,t.realpath=!!i.realpath,t.realpathCache=i.realpathCache||Object.create(null),t.follow=!!i.follow,t.dot=!!i.dot,t.mark=!!i.mark,t.nodir=!!i.nodir,t.nodir&&(t.mark=!0);t.sync=!!i.sync,t.nounique=!!i.nounique,t.nonull=!!i.nonull,t.nosort=!!i.nosort,t.nocase=!!i.nocase,t.stat=!!i.stat,t.noprocess=!!i.noprocess,t.absolute=!!i.absolute,t.maxLength=i.maxLength||1/0,t.cache=i.cache||Object.create(null),t.statCache=i.statCache||Object.create(null),t.symlinks=i.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(p))}(t,i),t.changedCwd=!1;var c=e.cwd();n(i,"cwd")?(t.cwd=o.resolve(i.cwd),t.changedCwd=t.cwd!==c):t.cwd=c;t.root=i.root||o.resolve(t.cwd,"/"),t.root=o.resolve(t.root),"win32"===e.platform&&(t.root=t.root.replace(/\\/g,"/"));t.cwdAbs=s(t.cwd)?t.cwd:l(t,t.cwd),"win32"===e.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/"));t.nomount=!!i.nomount,i.nonegate=!0,i.nocomment=!0,t.minimatch=new a(r,i),t.options=t.minimatch.options},t.ownProp=n,t.makeAbs=l,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var i=e.matches[n];if(i&&0!==Object.keys(i).length){var s=Object.keys(i);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:u));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[l(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!d(e,t)})));e.found=r},t.mark=function(e,t){var r=l(e,t),n=e.cache[r],o=t;if(n){var i="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(i&&!s?o+="/":!i&&s&&(o=o.slice(0,-1)),o!==t){var a=l(e,o);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return o},t.isIgnored=d,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var o=r(10),i=r(71),s=r(72),a=i.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function p(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function l(t,r){var n=r;return n="/"===r.charAt(0)?o.join(t.root,r):s(r)||""===r?r:t.changedCwd?o.resolve(t.cwd,r):o.resolve(r),"win32"===e.platform&&(n=n.replace(/\\/g,"/")),n}function d(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}}).call(this,r(3))},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},function(e,t,r){var n=r(130);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(i),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t){t.normalizeOptions=function(e){var t=e;return void 0===e.catchExceptions&&(t.catchExceptions=!0,window.location.search&&"debug"===window.location.search.substring(1)&&(t.catchExceptions=!1)),t},t.subscribe=function(e,t){e.addEventListener("message",(function(e){var r=e.data;"string"==typeof e.data&&(r=JSON.parse(e.data)),r.protocol&&r.command&&t(r,e)}))}},function(e,t,r){const n=r(0),o=r(492),{v4:i}=r(20),s=r(55),a=r(430),c=r(459),u=r(481),p=r(482),l=r(21),d=r(17),h=r(11),f=r(489),m=r(111),{default:g}=r(490),{default:y}=r(491),v=r(112),b={noflo:n,underscore:o,uuid:i,"fbp-spec":s,"the-graph":a,"noflo-ui/src/JournalStore":u,"noflo-ui/runtimeinfo":p,"noflo-ui/collections":l,"noflo-ui/projects":d,"noflo-ui/runtime":h,"noflo-ui/icons":f,"noflo-ui/urls":m,"noflo-ui/components/TestStatus":g,"noflo-ui/components/TestStatusDetailed":y};window.React=r(2),window.ReactDOM=r(12),window.TheGraph=b["the-graph"],window.require=function(e){if(void 0!==b[e])return b[e];throw new Error(`Module ${e} not available`)},window.addEventListener("WebComponentsReady",()=>{const e=function(e){const t=Math.random().toString(36).substring(7);n.graph.loadJSON(v,(r,n)=>{if(r)return void e(r);const o={defaultGraph:n,baseDir:n.baseDir,permissions:{}};o.permissions[t]=["protocol:component","protocol:runtime","protocol:graph","protocol:network","component:getsource","component:setsource"],o.label="NoFlo Development Environment",o.id="2b487ea3-287b-43f7-b7eb-806f02b402f9",o.namespace="ui",o.repository="git+https://github.com/noflo/noflo-ui.git";const i=document.createElement("button");i.id="flowhub_debug_url",i.innerText="Debug in Flowhub";const s="https://app.flowhub.io#runtime/endpoint?"+encodeURIComponent(`protocol=opener&address=${window.location.href}&id=${o.id}`);i.setAttribute("href",s),document.body.appendChild(i),c.opener(o,i),e()})};window.nofloStarted=!1;let t=function(e){n.graph.loadJSON(v,(t,r)=>{t?e(t):n.createNetwork(r,(t,r)=>{t?e(t):(r.on("process-error",e=>{"function"==typeof console.error?console.error(e.error):console.log(e.error)}),e())})})};"true"===String(localStorage.getItem("flowhub-debug"))&&(t=e),t(e=>{if(e)throw e;document.body.classList.remove("loading"),window.nofloStarted=!0,setTimeout(()=>{const e=document.getElementById("loading");document.body.removeChild(e)},400)})})},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,l,d,h,f,m,g=r(5);p=g.EventEmitter,d=r(15),f=r(139),l=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,u=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=u.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_,P;if(v=this.getNode(e)){for(this.checkTransactionStart(),P=[],n=0,u=(E=this.edges).length;n<u;n++)(t=E[n]).from.node!==v.id&&t.to.node!==v.id||P.push(t);for(s=0,p=P.length;s<p;s++)t=P[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(P=[],a=0,l=(x=this.initializers).length;a<l;a++)(i=x[a]).to.node===v.id&&P.push(i);for(c=0,d=P.length;c<d;c++)i=P[c],this.removeInitial(i.to.node,i.to.port);for(w in P=[],S=this.inports)S[w].process===e&&P.push(w);for(g=0,h=P.length;g<h;g++)w=P[g],this.removeInport(w);for(w in P=[],k=this.outports)k[w].process===e&&P.push(w);for(y=0,f=P.length;y<f;y++)w=P[y],this.removeOutport(w);for(b=0,m=(_=this.groups).length;b<m;b++)(r=_[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,u=(m=this.edges).length;o<u;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,l=(b=this.groups).length;c<l;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,u,p,l,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,u=(d=this.edges).length;i<u;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,l=(m=this.initializers).length;c<l;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(u=0,d=(g=this.edges).length;u<d;u++)o=g[u],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)_=v[g],a.properties[g]=_;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(E=this.groups).length;o<p;o++)n={name:(r=E[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,l=(x=this.nodes).length;s<l;s++)f=x[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(S=this.edges).length;c<d;c++)e={src:{process:(t=S[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(u=0,h=(k=this.initializers).length;u<h;u++)i=k[u],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(6).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=l,t.createGraph=function(e,t){return new l(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,u,p,d,h,f,m,g,y,v,b,w,E,x,S,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(m in"string"==typeof e&&(e=JSON.parse(e)),e.properties||(e.properties={}),e.processes||(e.processes={}),e.connections||(e.connections=[]),r=e.caseSensitive||!1,(i=new l(e.properties.name,{caseSensitive:r})).startTransaction("loadJSON",k),f={},y=e.properties)S=y[m],"name"!==m&&(f[m]=S);for(c in i.setProperties(f),v=e.processes)(o=v[c]).metadata||(o.metadata={}),i.addNode(c,o.component,o.metadata);for(a=0,p=(b=e.connections).length;a<p;a++)k=(n=b[a]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?i.addEdge(n.src.process,i.getPortName(n.src.port),n.tgt.process,i.getPortName(n.tgt.port),k):i.addEdgeIndex(n.src.process,i.getPortName(n.src.port),n.src.index,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,k):"number"==typeof n.tgt.index?i.addInitialIndex(n.data,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,k):i.addInitial(n.data,n.tgt.process,i.getPortName(n.tgt.port),k);if(e.inports)for(g in w=e.inports)h=w[g],i.addInport(g,h.process,i.getPortName(h.port),h.metadata);if(e.outports)for(g in E=e.outports)h=E[g],i.addOutport(g,h.process,i.getPortName(h.port),h.metadata);if(e.groups)for(u=0,d=(x=e.groups).length;u<d;u++)s=x[u],i.addGroup(s.name,s.nodes,s.metadata||{});return i.endTransaction("loadJSON"),t(null,i)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(29).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(6).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,u,p,l,h,f,m,g,y,v,b,w,E;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,u=(v=d(e.initializers).reverse()).length;i<u;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(E=[],a=0,l=(w=d(e.nodes).reverse()).length;a<l;a++)h=w[a],E.push(e.removeNode(h.id));return E},h=function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,g,y,v,b,w,E,x,S;for(m(e),o=0,u=(y=t.nodes).length;o<u;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,l=(b=t.initializers).length;a<l;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in E=t.outports)f=E[g],e.addOutport(g,f.process,f.port,f.metadata);for(S=[],c=0,d=(x=t.groups).length;c<d;c++)n=x[c],S.push(e.addGroup(n.name,n.nodes,n.metadata));return S},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),p=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[p++]=t>>16&255,c[p++]=t>>8&255,c[p++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[p++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[p++]=t>>8&255,c[p++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(p(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function p(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,p=-7,l=r?o-1:0,d=r?-1:1,h=e[t+l];for(l+=d,i=h&(1<<-p)-1,h>>=-p,p+=a;p>0;i=256*i+e[t+l],l+=d,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;p>0;s=256*s+e[t+l],l+=d,p-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=u}return(h?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=p?(a=0,s=p):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+h]=255&s,h+=f,s/=256,u-=8);e[r+h-f]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(3))},function(e,t,r){e.exports=function(){"use strict";function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var n,o,i=arguments.length>1?arguments[1]:{},s=this,a={},c={start:pr},u=pr,p=function(){return s.getResult()},l="INPORT=",d={type:"literal",value:"INPORT=",description:'"INPORT="'},h=".",f={type:"literal",value:".",description:'"."'},m=":",g={type:"literal",value:":",description:'":"'},y=function(e,t,r){return s.registerInports(e,t,r)},v="OUTPORT=",b={type:"literal",value:"OUTPORT=",description:'"OUTPORT="'},w=function(e,t,r){return s.registerOutports(e,t,r)},E="DEFAULT_INPORT=",x={type:"literal",value:"DEFAULT_INPORT=",description:'"DEFAULT_INPORT="'},S=function(e){vn=e},k="DEFAULT_OUTPORT=",_={type:"literal",value:"DEFAULT_OUTPORT=",description:'"DEFAULT_OUTPORT="'},P=function(e){bn=e},C=function(e){return s.registerAnnotation(e[0],e[1])},A=function(e){return s.registerEdges(e)},T=",",D={type:"literal",value:",",description:'","'},O=/^[\n\r\u2028\u2029]/,R={type:"class",value:"[\\n\\r\\u2028\\u2029]",description:"[\\n\\r\\u2028\\u2029]"},N="#",I={type:"literal",value:"#",description:'"#"'},j="->",F={type:"literal",value:"->",description:'"->"'},M=function(e,t){return[e,t]},L=function(e,t,r){return[{tgt:_n(t,e)},{src:Pn(t,r)}]},G=function(e,t){return{src:Pn(e,t)}},B=function(e,t){return{tgt:_n(t,e)}},U="'",q={type:"literal",value:"'",description:'"\'"'},z=function(e){return{data:e.join("")}},$=function(e){return{data:e}},H=function(e){return e},V=/^[a-zA-Z_]/,X={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},J=/^[a-zA-Z0-9_\-]/,W={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},Y=function(e){return Sn(e)},K=function(e,t){return s.addNode(e,t),e},Q=function(e){return s.addAnonymousNode(e,ir().start.offset)},Z="(",ee={type:"literal",value:"(",description:'"("'},te=/^[a-zA-Z\/\-0-9_]/,re={type:"class",value:"[a-zA-Z/\\-0-9_]",description:"[a-zA-Z/\\-0-9_]"},ne=")",oe={type:"literal",value:")",description:'")"'},ie=function(e,t){var r={};return r.comp=e?e.join(""):"",t&&(r.meta=t.join("").split(",")),r},se=/^[a-zA-Z\/=_,0-9]/,ae={type:"class",value:"[a-zA-Z/=_,0-9]",description:"[a-zA-Z/=_,0-9]"},ce=function(e){return e},ue="@",pe={type:"literal",value:"@",description:'"@"'},le=/^[a-zA-Z0-9\-_]/,de={type:"class",value:"[a-zA-Z0-9\\-_]",description:"[a-zA-Z0-9\\-_]"},he=/^[a-zA-Z0-9\-_ .]/,fe={type:"class",value:"[a-zA-Z0-9\\-_ \\.]",description:"[a-zA-Z0-9\\-_ \\.]"},me=function(e,t){return[e.join(""),t.join("")]},ge=function(e,t){return{port:i.caseSensitive?e:e.toLowerCase(),index:null!=t?t:void 0}},ye=function(e){return e},ve=/^[a-zA-Z.0-9_]/,be={type:"class",value:"[a-zA-Z.0-9_]",description:"[a-zA-Z.0-9_]"},we=function(e){return Sn(e)},Ee="[",xe={type:"literal",value:"[",description:'"["'},Se=/^[0-9]/,ke={type:"class",value:"[0-9]",description:"[0-9]"},_e="]",Pe={type:"literal",value:"]",description:'"]"'},Ce=function(e){return parseInt(e.join(""))},Ae=/^[^\n\r\u2028\u2029]/,Te={type:"class",value:"[^\\n\\r\\u2028\\u2029]",description:"[^\\n\\r\\u2028\\u2029]"},De=/^[\\]/,Oe={type:"class",value:"[\\\\]",description:"[\\\\]"},Re=/^[']/,Ne={type:"class",value:"[']",description:"[']"},Ie=function(){return"'"},je=/^[^']/,Fe={type:"class",value:"[^']",description:"[^']"},Me=" ",Le={type:"literal",value:" ",description:'" "'},Ge=function(e){return e},Be="{",Ue={type:"literal",value:"{",description:'"{"'},qe="}",ze={type:"literal",value:"}",description:'"}"'},$e={type:"other",description:"whitespace"},He=/^[ \t\n\r]/,Ve={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Xe="false",Je={type:"literal",value:"false",description:'"false"'},We=function(){return!1},Ye="null",Ke={type:"literal",value:"null",description:'"null"'},Qe=function(){return null},Ze="true",et={type:"literal",value:"true",description:'"true"'},tt=function(){return!0},rt=function(e,t){return t},nt=function(e,t){var r,n={};for(n[e.name]=e.value,r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n},ot=function(e){return null!==e?e:{}},it=function(e,t){return{name:e,value:t}},st=function(e,t){return t},at=function(e,t){return[e].concat(t)},ct=function(e){return null!==e?e:[]},ut={type:"other",description:"number"},pt=function(){return parseFloat(or())},lt=/^[1-9]/,dt={type:"class",value:"[1-9]",description:"[1-9]"},ht=/^[eE]/,ft={type:"class",value:"[eE]",description:"[eE]"},mt="-",gt={type:"literal",value:"-",description:'"-"'},yt="+",vt={type:"literal",value:"+",description:'"+"'},bt="0",wt={type:"literal",value:"0",description:'"0"'},Et={type:"other",description:"string"},xt=function(e){return e.join("")},St='"',kt={type:"literal",value:'"',description:'"\\""'},_t="\\",Pt={type:"literal",value:"\\",description:'"\\\\"'},Ct="/",At={type:"literal",value:"/",description:'"/"'},Tt="b",Dt={type:"literal",value:"b",description:'"b"'},Ot=function(){return"\b"},Rt="f",Nt={type:"literal",value:"f",description:'"f"'},It=function(){return"\f"},jt="n",Ft={type:"literal",value:"n",description:'"n"'},Mt=function(){return"\n"},Lt="r",Gt={type:"literal",value:"r",description:'"r"'},Bt=function(){return"\r"},Ut="t",qt={type:"literal",value:"t",description:'"t"'},zt=function(){return"\t"},$t="u",Ht={type:"literal",value:"u",description:'"u"'},Vt=function(e){return String.fromCharCode(parseInt(e,16))},Xt=function(e){return e},Jt=/^[^\0-\x1F"\\]/,Wt={type:"class",value:"[^\\0-\\x1F\\x22\\x5C]",description:"[^\\0-\\x1F\\x22\\x5C]"},Yt=/^[0-9a-f]/i,Kt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Qt=0,Zt=0,er=[{line:1,column:1,seenCR:!1}],tr=0,rr=[],nr=0;if("startRule"in i){if(!(i.startRule in c))throw new Error("Can't start parsing from rule \""+i.startRule+'".');u=c[i.startRule]}function or(){return t.substring(Zt,Qt)}function ir(){return ar(Zt,Qt)}function sr(e){var r,n,o=er[e];if(o)return o;for(r=e-1;!er[r];)r--;for(o={line:(o=er[r]).line,column:o.column,seenCR:o.seenCR};r<e;)"\n"===(n=t.charAt(r))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return er[e]=o,o}function ar(e,t){var r=sr(e),n=sr(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function cr(e){Qt<tr||(Qt>tr&&(tr=Qt,rr=[]),rr.push(e))}function ur(t,r,n,o){return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==t?t:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,n),r,n,o)}function pr(){var e,t,r;for(e=Qt,t=[],r=lr();r!==a;)t.push(r),r=lr();return t!==a&&(Zt=e,t=p()),e=t}function lr(){var e,r,n,o,i,s,c,u,p;return e=Qt,(r=Mr())!==a?(t.substr(Qt,7)===l?(n=l,Qt+=7):(n=a,0===nr&&cr(d)),n!==a&&(o=xr())!==a?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=a,0===nr&&cr(f)),i!==a&&(s=Nr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&cr(g)),c!==a&&(u=Nr())!==a&&Mr()!==a?((p=dr())===a&&(p=null),p!==a?(Zt=e,e=r=y(o,s,u)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Mr())!==a?(t.substr(Qt,8)===v?(n=v,Qt+=8):(n=a,0===nr&&cr(b)),n!==a&&(o=xr())!==a?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=a,0===nr&&cr(f)),i!==a&&(s=Nr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&cr(g)),c!==a&&(u=Nr())!==a&&Mr()!==a?((p=dr())===a&&(p=null),p!==a?(Zt=e,e=r=w(o,s,u)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Mr())!==a?(t.substr(Qt,15)===E?(n=E,Qt+=15):(n=a,0===nr&&cr(x)),n!==a&&(o=Nr())!==a&&(i=Mr())!==a?((s=dr())===a&&(s=null),s!==a?(Zt=e,e=r=S(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Mr())!==a?(t.substr(Qt,16)===k?(n=k,Qt+=16):(n=a,0===nr&&cr(_)),n!==a&&(o=Nr())!==a&&(i=Mr())!==a?((s=dr())===a&&(s=null),s!==a?(Zt=e,e=r=P(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Tr())!==a&&(n=hr())!==a?(Zt=e,e=r=C(r)):(Qt=e,e=a),e===a&&(e=Qt,(r=fr())!==a?((n=hr())===a&&(n=null),n!==a?e=r=[r,n]:(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Mr())!==a&&(n=hr())!==a?e=r=[r,n]:(Qt=e,e=a),e===a&&(e=Qt,(r=Mr())!==a&&(n=mr())!==a&&(o=Mr())!==a?((i=dr())===a&&(i=null),i!==a?(Zt=e,e=r=A(n)):(Qt=e,e=a)):(Qt=e,e=a)))))))),e}function dr(){var e,r,n,o,i;return e=Qt,(r=Mr())!==a?(44===t.charCodeAt(Qt)?(n=T,Qt++):(n=a,0===nr&&cr(D)),n===a&&(n=null),n!==a?((o=fr())===a&&(o=null),o!==a?((i=hr())===a&&(i=null),i!==a?e=r=[r,n,o,i]:(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e}function hr(){var e;return O.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(R)),e}function fr(){var e,r,n,o,i;if(e=Qt,(r=Mr())!==a)if(35===t.charCodeAt(Qt)?(n=N,Qt++):(n=a,0===nr&&cr(I)),n!==a){for(o=[],i=jr();i!==a;)o.push(i),i=jr();o!==a?e=r=[r,n,o]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}function mr(){var e,r,n,o;return e=Qt,(r=gr())!==a&&Mr()!==a?(t.substr(Qt,2)===j?(n=j,Qt+=2):(n=a,0===nr&&cr(F)),n!==a&&Mr()!==a&&(o=mr())!==a?(Zt=e,e=r=M(r,o)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=yr()),e}function gr(){var e;return(e=vr())===a&&(e=br())===a&&(e=Er()),e}function yr(){var e;return(e=wr())===a&&(e=vr()),e}function vr(){var e,t,r,n;return e=Qt,(t=Or())!==a&&(r=xr())!==a&&(n=Rr())!==a?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=a),e===a&&(e=Qt,(t=Or())===a&&(t=null),t!==a&&(r=Pr())!==a?((n=Rr())===a&&(n=null),n!==a?(Zt=e,e=t=L(t,r,n)):(Qt=e,e=a)):(Qt=e,e=a)),e}function br(){var e,t,r;return e=Qt,(t=xr())!==a?((r=Rr())===a&&(r=null),r!==a?(Zt=e,e=t=G(t,r)):(Qt=e,e=a)):(Qt=e,e=a),e}function wr(){var e,t,r;return e=Qt,(t=Or())===a&&(t=null),t!==a&&(r=xr())!==a?(Zt=e,e=t=B(t,r)):(Qt=e,e=a),e}function Er(){var e,r,n,o;if(e=Qt,39===t.charCodeAt(Qt)?(r=U,Qt++):(r=a,0===nr&&cr(q)),r!==a){for(n=[],o=Fr();o!==a;)n.push(o),o=Fr();n!==a?(39===t.charCodeAt(Qt)?(o=U,Qt++):(o=a,0===nr&&cr(q)),o!==a?(Zt=e,e=r=z(n)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e===a&&(e=Qt,(r=Gr())!==a&&(Zt=e,r=$(r)),e=r),e}function xr(){var e,t;return e=Qt,(t=kr())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=Sr())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=_r())!==a&&(Zt=e,t=H(t)),e=t)),e}function Sr(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(X)),n!==a){for(o=[],J.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(W));i!==a;)o.push(i),J.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(W));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=Y(r)),e=r}function kr(){var e,t,r;return e=Qt,(t=Sr())!==a&&(r=Cr())!==a?(Zt=e,e=t=K(t,r)):(Qt=e,e=a),e}function _r(){var e,t;return e=Qt,(t=Cr())!==a&&(Zt=e,t=Q(t)),e=t}function Pr(){var e;return(e=kr())===a&&(e=_r()),e}function Cr(){var e,r,n,o,i;if(e=Qt,40===t.charCodeAt(Qt)?(r=Z,Qt++):(r=a,0===nr&&cr(ee)),r!==a){for(n=[],te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(re));o!==a;)n.push(o),te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(re));n===a&&(n=null),n!==a?((o=Ar())===a&&(o=null),o!==a?(41===t.charCodeAt(Qt)?(i=ne,Qt++):(i=a,0===nr&&cr(oe)),i!==a?(Zt=e,e=r=ie(n,o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Ar(){var e,r,n,o;if(e=Qt,58===t.charCodeAt(Qt)?(r=m,Qt++):(r=a,0===nr&&cr(g)),r!==a){if(n=[],se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ae)),o!==a)for(;o!==a;)n.push(o),se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ae));else n=a;n!==a?(Zt=e,e=r=ce(n)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Tr(){var e,r,n,o,i,s,c;if(e=Qt,35===t.charCodeAt(Qt)?(r=N,Qt++):(r=a,0===nr&&cr(I)),r!==a)if(Lr()!==a)if(64===t.charCodeAt(Qt)?(n=ue,Qt++):(n=a,0===nr&&cr(pe)),n!==a){if(o=[],le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(de)),i!==a)for(;i!==a;)o.push(i),le.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(de));else o=a;if(o!==a)if((i=Lr())!==a){if(s=[],he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&cr(fe)),c!==a)for(;c!==a;)s.push(c),he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&cr(fe));else s=a;s!==a?(Zt=e,e=r=me(o,s)):(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a}else Qt=e,e=a;else Qt=e,e=a;else Qt=e,e=a;return e}function Dr(){var e,t,r;return e=Qt,(t=Nr())!==a?((r=Ir())===a&&(r=null),r!==a?(Zt=e,e=t=ge(t,r)):(Qt=e,e=a)):(Qt=e,e=a),e}function Or(){var e,t;return e=Qt,(t=Dr())!==a&&Lr()!==a?(Zt=e,e=t=ye(t)):(Qt=e,e=a),e}function Rr(){var e,t;return e=Qt,Lr()!==a&&(t=Dr())!==a?(Zt=e,e=ye(t)):(Qt=e,e=a),e}function Nr(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(X)),n!==a){for(o=[],ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(be));i!==a;)o.push(i),ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(be));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=we(r)),e=r}function Ir(){var e,r,n,o;if(e=Qt,91===t.charCodeAt(Qt)?(r=Ee,Qt++):(r=a,0===nr&&cr(xe)),r!==a){if(n=[],Se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ke)),o!==a)for(;o!==a;)n.push(o),Se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ke));else n=a;n!==a?(93===t.charCodeAt(Qt)?(o=_e,Qt++):(o=a,0===nr&&cr(Pe)),o!==a?(Zt=e,e=r=Ce(n)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}function jr(){var e;return Ae.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Te)),e}function Fr(){var e,r,n;return e=Qt,De.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(Oe)),r!==a?(Re.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(Ne)),n!==a?(Zt=e,e=r=Ie()):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(je.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Fe))),e}function Mr(){var e,r;for(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&cr(Le));r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&cr(Le));return e===a&&(e=null),e}function Lr(){var e,r;if(e=[],32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&cr(Le)),r!==a)for(;r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Me,Qt++):(r=a,0===nr&&cr(Le));else e=a;return e}function Gr(){var e,t;return e=Qt,Vr()!==a&&(t=Xr())!==a&&Vr()!==a?(Zt=e,e=Ge(t)):(Qt=e,e=a),e}function Br(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(91===t.charCodeAt(Qt)?(n=Ee,Qt++):(n=a,0===nr&&cr(xe)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Ur(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(123===t.charCodeAt(Qt)?(n=Be,Qt++):(n=a,0===nr&&cr(Ue)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function qr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(93===t.charCodeAt(Qt)?(n=_e,Qt++):(n=a,0===nr&&cr(Pe)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function zr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(125===t.charCodeAt(Qt)?(n=qe,Qt++):(n=a,0===nr&&cr(ze)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function $r(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(58===t.charCodeAt(Qt)?(n=m,Qt++):(n=a,0===nr&&cr(g)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Hr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(44===t.charCodeAt(Qt)?(n=T,Qt++):(n=a,0===nr&&cr(D)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Vr(){var e,r;for(nr++,e=[],He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(Ve));r!==a;)e.push(r),He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(Ve));return nr--,e===a&&(r=a,0===nr&&cr($e)),e}function Xr(){var e;return(e=Jr())===a&&(e=Wr())===a&&(e=Yr())===a&&(e=Kr())===a&&(e=Zr())===a&&(e=en())===a&&(e=ln()),e}function Jr(){var e,r;return e=Qt,t.substr(Qt,5)===Xe?(r=Xe,Qt+=5):(r=a,0===nr&&cr(Je)),r!==a&&(Zt=e,r=We()),e=r}function Wr(){var e,r;return e=Qt,t.substr(Qt,4)===Ye?(r=Ye,Qt+=4):(r=a,0===nr&&cr(Ke)),r!==a&&(Zt=e,r=Qe()),e=r}function Yr(){var e,r;return e=Qt,t.substr(Qt,4)===Ze?(r=Ze,Qt+=4):(r=a,0===nr&&cr(et)),r!==a&&(Zt=e,r=tt()),e=r}function Kr(){var e,t,r,n,o,i;if(e=Qt,Ur()!==a){if(t=Qt,(r=Qr())!==a){for(n=[],o=Qt,Hr()!==a&&(i=Qr())!==a?(Zt=o,o=rt(r,i)):(Qt=o,o=a);o!==a;)n.push(o),o=Qt,Hr()!==a&&(i=Qr())!==a?(Zt=o,o=rt(r,i)):(Qt=o,o=a);n!==a?(Zt=t,t=r=nt(r,n)):(Qt=t,t=a)}else Qt=t,t=a;t===a&&(t=null),t!==a&&(r=zr())!==a?(Zt=e,e=ot(t)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Qr(){var e,t,r;return e=Qt,(t=ln())!==a&&$r()!==a&&(r=Xr())!==a?(Zt=e,e=t=it(t,r)):(Qt=e,e=a),e}function Zr(){var e,t,r,n,o,i;if(e=Qt,Br()!==a){if(t=Qt,(r=Xr())!==a){for(n=[],o=Qt,Hr()!==a&&(i=Xr())!==a?(Zt=o,o=st(r,i)):(Qt=o,o=a);o!==a;)n.push(o),o=Qt,Hr()!==a&&(i=Xr())!==a?(Zt=o,o=st(r,i)):(Qt=o,o=a);n!==a?(Zt=t,t=r=at(r,n)):(Qt=t,t=a)}else Qt=t,t=a;t===a&&(t=null),t!==a&&(r=qr())!==a?(Zt=e,e=ct(t)):(Qt=e,e=a)}else Qt=e,e=a;return e}function en(){var e,t,r,n;return nr++,e=Qt,(t=cn())===a&&(t=null),t!==a&&an()!==a?((r=sn())===a&&(r=null),r!==a?((n=on())===a&&(n=null),n!==a?(Zt=e,e=t=pt()):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),nr--,e===a&&(t=a,0===nr&&cr(ut)),e}function tn(){var e;return 46===t.charCodeAt(Qt)?(e=h,Qt++):(e=a,0===nr&&cr(f)),e}function rn(){var e;return lt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(dt)),e}function nn(){var e;return ht.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(ft)),e}function on(){var e,t,r,n,o;if(e=Qt,(t=nn())!==a)if((r=cn())===a&&(r=un()),r===a&&(r=null),r!==a){if(n=[],(o=gn())!==a)for(;o!==a;)n.push(o),o=gn();else n=a;n!==a?e=t=[t,r,n]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}function sn(){var e,t,r,n;if(e=Qt,(t=tn())!==a){if(r=[],(n=gn())!==a)for(;n!==a;)r.push(n),n=gn();else r=a;r!==a?e=t=[t,r]:(Qt=e,e=a)}else Qt=e,e=a;return e}function an(){var e,t,r,n;if((e=pn())===a)if(e=Qt,(t=rn())!==a){for(r=[],n=gn();n!==a;)r.push(n),n=gn();r!==a?e=t=[t,r]:(Qt=e,e=a)}else Qt=e,e=a;return e}function cn(){var e;return 45===t.charCodeAt(Qt)?(e=mt,Qt++):(e=a,0===nr&&cr(gt)),e}function un(){var e;return 43===t.charCodeAt(Qt)?(e=yt,Qt++):(e=a,0===nr&&cr(vt)),e}function pn(){var e;return 48===t.charCodeAt(Qt)?(e=bt,Qt++):(e=a,0===nr&&cr(wt)),e}function ln(){var e,t,r;if(nr++,e=Qt,fn()!==a){for(t=[],r=dn();r!==a;)t.push(r),r=dn();t!==a&&(r=fn())!==a?(Zt=e,e=xt(t)):(Qt=e,e=a)}else Qt=e,e=a;return nr--,e===a&&(a,0===nr&&cr(Et)),e}function dn(){var e,r,n,o,i,s,c,u,p;return(e=mn())===a&&(e=Qt,hn()!==a?(34===t.charCodeAt(Qt)?(r=St,Qt++):(r=a,0===nr&&cr(kt)),r===a&&(92===t.charCodeAt(Qt)?(r=_t,Qt++):(r=a,0===nr&&cr(Pt)),r===a&&(47===t.charCodeAt(Qt)?(r=Ct,Qt++):(r=a,0===nr&&cr(At)),r===a&&(r=Qt,98===t.charCodeAt(Qt)?(n=Tt,Qt++):(n=a,0===nr&&cr(Dt)),n!==a&&(Zt=r,n=Ot()),(r=n)===a&&(r=Qt,102===t.charCodeAt(Qt)?(n=Rt,Qt++):(n=a,0===nr&&cr(Nt)),n!==a&&(Zt=r,n=It()),(r=n)===a&&(r=Qt,110===t.charCodeAt(Qt)?(n=jt,Qt++):(n=a,0===nr&&cr(Ft)),n!==a&&(Zt=r,n=Mt()),(r=n)===a&&(r=Qt,114===t.charCodeAt(Qt)?(n=Lt,Qt++):(n=a,0===nr&&cr(Gt)),n!==a&&(Zt=r,n=Bt()),(r=n)===a&&(r=Qt,116===t.charCodeAt(Qt)?(n=Ut,Qt++):(n=a,0===nr&&cr(qt)),n!==a&&(Zt=r,n=zt()),(r=n)===a&&(r=Qt,117===t.charCodeAt(Qt)?(n=$t,Qt++):(n=a,0===nr&&cr(Ht)),n!==a?(o=Qt,i=Qt,(s=yn())!==a&&(c=yn())!==a&&(u=yn())!==a&&(p=yn())!==a?i=s=[s,c,u,p]:(Qt=i,i=a),(o=i!==a?t.substring(o,Qt):i)!==a?(Zt=r,r=n=Vt(o)):(Qt=r,r=a)):(Qt=r,r=a))))))))),r!==a?(Zt=e,e=Xt(r)):(Qt=e,e=a)):(Qt=e,e=a)),e}function hn(){var e;return 92===t.charCodeAt(Qt)?(e=_t,Qt++):(e=a,0===nr&&cr(Pt)),e}function fn(){var e;return 34===t.charCodeAt(Qt)?(e=St,Qt++):(e=a,0===nr&&cr(kt)),e}function mn(){var e;return Jt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Wt)),e}function gn(){var e;return Se.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(ke)),e}function yn(){var e;return Yt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Kt)),e}var vn="IN",bn="OUT";delete(s=this).properties,delete s.inports,delete s.outports,delete s.groups,s.edges=[],o={},s.validateContents=function(e,t){e.processes&&Object.keys(e.processes).forEach((function(t){if(!e.processes[t].component)throw new Error('Node "'+t+'" does not have a component defined')})),e.inports&&Object.keys(e.inports).forEach((function(t){var r=e.inports[t];if(!e.processes[r.process])throw new Error('Inport "'+t+'" is connected to an undefined target node "'+r.process+'"')})),e.outports&&Object.keys(e.outports).forEach((function(t){var r=e.outports[t];if(!e.processes[r.process])throw new Error('Outport "'+t+'" is connected to an undefined source node "'+r.process+'"')})),e.connections&&e.connections.forEach((function(t){if(t.tgt&&!e.processes[t.tgt.process]){if(t.data)throw new Error('IIP containing "'+t.data+'" is connected to an undefined target node "'+t.tgt.process+'"');throw new Error('Edge from "'+t.src.process+'" port "'+t.src.port+'" is connected to an undefined target node "'+t.tgt.process+'"')}if(t.src&&!e.processes[t.src.process])throw new Error('Edge to "'+t.tgt.process+'" port "'+t.tgt.port+'" is connected to an undefined source node "'+t.src.process+'"')}))},s.addNode=function(e,t){if(o[e]||(o[e]={}),t.comp&&(o[e].component=t.comp),t.meta){for(var r={},n=0;n<t.meta.length;n++){var i=t.meta[n].split("=");1===i.length&&(i=["routes",i[0]]);var s=i[0],a=i[1];"x"!==s&&"y"!==s||(a=parseFloat(a)),r[s]=a}o[e].metadata=r}};var wn={},En={};s.addAnonymousNode=function(e,t){if(!En[t]){var r=e.comp.replace(/[^a-zA-Z0-9]+/,"_");wn[r]=(wn[r]||0)+1,En[t]="_"+r+"_"+wn[r],this.addNode(En[t],e)}return En[t]},s.getResult=function(){var e={inports:s.inports||{},outports:s.outports||{},groups:s.groups||[],processes:o||{},connections:s.processEdges()};s.properties&&(e.properties=s.properties),e.caseSensitive=i.caseSensitive||!1;var t=s.validateSchema;if(void 0!==i.validateSchema&&(t=i.validateSchema),t){if(void 0===n)var n=r(73);var a=r(141),c=n.validateMultiple(e,a);if(!c.valid)throw new Error("fbp: Did not validate againt graph schema:\n"+JSON.stringify(c.errors,null,2))}return(void 0===i.validateContents||i.validateContents)&&s.validateContents(e),e};var xn=function(e,t){for(var r=-1,n=e?e.length:0,o=[];++r<n;){var i=e[r];i instanceof Array?Array.prototype.push.apply(o,t?i:xn(i)):o.push(i)}return o};function Sn(e){return e[0]+e[1].join("")}function kn(e,t,r){i.caseSensitive||(r=r.toLowerCase());var n={process:e,port:t?t.port:r};return t&&null!=t.index&&(n.index=t.index),n}function _n(e,t){return kn(e,t,vn)}function Pn(e,t){return kn(e,t,bn)}if(s.registerAnnotation=function(e,t){if(s.properties||(s.properties={}),"runtime"===e)return s.properties.environment={},void(s.properties.environment.type=t);s.properties[e]=t},s.registerInports=function(e,t,r){s.inports||(s.inports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.inports[r]={process:e,port:t}},s.registerOutports=function(e,t,r){s.outports||(s.outports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.outports[r]={process:e,port:t}},s.registerEdges=function(e){Array.isArray(e)&&e.forEach((function(e,t){s.edges.push(e)}))},s.processEdges=function(){var e,t;e=xn(s.edges),t=[];for(var r=1;r<e.length;r+=1)("src"in e[r-1]||"data"in e[r-1])&&"tgt"in e[r]&&(e[r-1].tgt=e[r].tgt,t.push(e[r-1]),r++);return t},(n=u())!==a&&Qt===t.length)return n;throw n!==a&&Qt<t.length&&cr({type:"end",description:"end of input"}),ur(null,rr,tr<t.length?t.charAt(tr):null,tr<t.length?ar(tr,tr+1):ar(tr,tr))}}}()},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","id":"graph.json","title":"FBP graph","description":"A graph of FBP processes and connections between them.\\nThis is the primary way of specifying FBP programs.\\n","name":"graph","type":"object","additionalProperties":false,"properties":{"caseSensitive":{"type":"boolean","description":"Whether the graph port identifiers should be treated as case-sensitive"},"properties":{"type":"object","description":"User-defined properties attached to the graph.","additionalProperties":true,"properties":{"name":{"type":"string","description":"Name of the graph"},"environment":{"type":"object","description":"Information about the execution environment for the graph","additionalProperties":true,"required":["type"],"properties":{"type":{"type":"string","description":"Runtime type the graph is for","example":"noflo-nodejs"},"content":{"type":"string","description":"HTML fixture for browser-based graphs"}}},"description":{"type":"string","description":"Graph description"},"icon":{"type":"string","description":"Name of the icon that can be used for depicting the graph"}}},"inports":{"type":["object","undefined"],"description":"Exported inports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph inport"},"y":{"type":"integer","description":"Y coordinate of a graph inport"}}}}}}},"outports":{"type":["object","undefined"],"description":"Exported outports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","required":[],"additionalProperties":true,"properties":{"x":{"type":"integer","description":"X coordinate of a graph outport"},"y":{"type":"integer","description":"Y coordinate of a graph outport"}}}}}}},"groups":{"type":"array","description":"List of groups of processes","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"nodes":{"type":"array","items":{"type":"string"}},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"description":{"type":"string"}}}}}},"processes":{"type":"object","description":"The processes of this graph.\\nEach process is an instance of a component.\\n","additionalProperties":false,"patternProperties":{"[a-zA-Z0-9_]+":{"type":"object","properties":{"component":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph node"},"y":{"type":"integer","description":"Y coordinate of a graph node"}}}}}}},"connections":{"type":"array","description":"Connections of the graph.\\nA connection either connects ports of two processes, or specifices an IIP as initial input packet to a port.\\n","items":{"type":"object","additionalProperties":false,"properties":{"src":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"tgt":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"data":{},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"route":{"type":"integer","description":"Route identifier of a graph edge"},"schema":{"type":"string","format":"uri","description":"JSON schema associated with a graph edge"},"secure":{"type":"boolean","description":"Whether edge data should be treated as secure"}}}}}}}}')},function(e,t){var r=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};e.exports=function(e,t){var n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_;for(p in null==t&&(t={}),c="string"==typeof e?JSON.parse(e):e,l=[],h="",i=function(e){return null!=c.processes[e].metadata&&(e=c.processes[e].metadata.label),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},o=function(e,t){return null!=t.process&&null!=c.processes[t.process].metadata?e=c.processes[t.process].metadata.label:null!=t.process&&(e=t.process),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},c.properties&&(c.properties.environment&&c.properties.environment.type&&(h+="# @runtime "+c.properties.environment.type+"\n"),Object.keys(c.properties).forEach((function(e){if(e.match(/^[a-zA-Z0-9\-_]+$/)){var t=c.properties[e];"string"==typeof t&&t.match(/^[a-zA-Z0-9\-_\s\.]+$/)&&(h+="# @"+e+" "+t+"\n")}}))),m=c.inports)f=o(p,a=m[p]),p=c.caseSensitive?p:p.toUpperCase(),a.port=c.caseSensitive?a.port:a.port.toUpperCase(),h+="INPORT="+f+"."+a.port+":"+p+"\n";for(p in g=c.outports)f=o(p,d=g[p]),p=c.caseSensitive?p:p.toUpperCase(),d.port=c.caseSensitive?d.port:d.port.toUpperCase(),h+="OUTPORT="+f+"."+d.port+":"+p+"\n";for(h+="\n",s=0,u=(y=c.connections).length;s<u;s++)null!=(n=y[s]).data?(k=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),S=n.tgt.process,_=c.processes[S].component,x=i(S),r.call(l,_)<0&&(x+="("+_+")",l.push(_)),h+='"'+n.data+'" -> '+k+" "+x+"\n"):(w=c.caseSensitive?n.src.port:n.src.port.toUpperCase(),b=n.src.process,E=c.processes[b].component,v=i(b),r.call(l,E)<0&&(v+="("+E+")",l.push(E)),k=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),S=n.tgt.process,_=c.processes[S].component,x=i(S),r.call(l,_)<0&&(x+="("+_+")",l.push(_)),h+=v+" "+w+" -> "+k+" "+x+"\n");return h}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,E=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},x=r(5);f=x.EventEmitter,b=r(15),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,u,p,l,h,f,m,g,v,b,w,E,x,S,k,_,P,C,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(x=s.graph.nodes).length;p<f;p++)E=x[p],s.appendCommand("addNode",E);for(h=0,m=(S=s.graph.edges).length;h<m;h++)a=S[h],s.appendCommand("addEdge",a);for(b=0,g=(k=s.graph.initializers).length;b<g;b++)u=k[b],s.appendCommand("addInitial",u);for(l in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),_=s.graph.inports)A=_[l],s.appendCommand("addInport",{name:l,port:A});for(l in P=s.graph.outports)A=P[l],s.appendCommand("addOutport",{name:l,port:A});for(w=0,v=(C=s.graph.groups).length;w<v;w++)c=C[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(E(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(E(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(u)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(u=a=this.currentRevision,h=e+1;a>=h;u=a+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(a=[],c=o=u=e|=0,p=t|=this.store.lastRevision;u<=p?o<p:o>p;c=u<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,u;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(u=this.store.fetchTransaction(a)).length;i<s;i++)n=u[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(6).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t,r){var n=r(145),o={};t.setSource=function(e,t,r,i,s,a){n.setSource(o,e,t,r,i,s,a)},t.getSource=function(e,t,r){n.getSource(o,e,t,r)},t.getLanguages=n.getLanguages,t.register=function(e,t){e.setLibraryIcon("flow","random"),e.setLibraryIcon("github","github"),e.setLibraryIcon("indexeddb","database"),e.setLibraryIcon("objects","list"),e.setLibraryIcon("strings","font"),e.registerComponent("ui","BlobToEntry",r(146)),e.registerComponent("ui","CheckGistExists",r(147)),e.registerComponent("ui","CheckRepoExists",r(148)),e.registerComponent("ui","CheckSyncState",r(149)),e.registerComponent("ui","CheckTokenGrant",r(153)),e.registerComponent("ui","CleanAction",r(159)),e.registerComponent("ui","CleanProject",r(160)),e.registerComponent("ui","ClearUserData",r(161)),e.registerComponent("ui","CollectInitialData",r(162)),e.registerComponent("ui","CreateContext",r(163)),e.registerComponent("ui","CreateEmptyContext",r(164)),e.registerComponent("ui","CreateLoadingContext",r(165)),e.registerComponent("ui","DatabaseReady",r(166)),e.registerComponent("ui","DispatchAction",r(167)),e.registerComponent("ui","EnsureId",r(168)),e.registerComponent("ui","EnsureLocalRuntimes",r(169)),e.registerComponent("ui","ErrorToContext",r(170)),e.registerComponent("ui","ExchangeGrantToken",r(171)),e.registerComponent("ui","FindNodesInGraph",r(172)),e.registerComponent("ui","GetActionValues",r(173)),e.registerComponent("ui","GetRemoteProjects",r(174)),e.registerComponent("ui","GetRemoteRuntimes",r(175)),e.registerComponent("ui","GetRemoteUser",r(182)),e.registerComponent("ui","GetUrl",r(183)),e.registerComponent("ui","GetUserToken",r(184)),e.registerComponent("ui","GistToProject",r(185)),e.registerComponent("ui","HasActionRuntime",r(186)),e.registerComponent("ui","ListenRuntime",r(187)),e.registerComponent("ui","LoadTests",r(188)),e.registerComponent("ui","LoadUserData",r(318)),e.registerComponent("ui","LoggingMiddleware",r(319)),e.registerComponent("ui","LoginOAuth",r(320)),e.registerComponent("ui","MapStateToProps",r(321)),e.registerComponent("ui","OpenLiveMode",r(327)),e.registerComponent("ui","OpenNewProject",r(328)),e.registerComponent("ui","OpenProject",r(329)),e.registerComponent("ui","OpenProjectMode",r(330)),e.registerComponent("ui","PopulateProjectRuntime",r(331)),e.registerComponent("ui","PopulateRuntimeData",r(332)),e.registerComponent("ui","PreparePulls",r(333)),e.registerComponent("ui","PreparePush",r(334)),e.registerComponent("ui","ReconnectRuntime",r(335)),e.registerComponent("ui","RefreshRemoteUser",r(336)),e.registerComponent("ui","RemoveRemoteProject",r(337)),e.registerComponent("ui","RemoveRemoteRuntime",r(338)),e.registerComponent("ui","Router",r(339)),e.registerComponent("ui","RunTests",r(340)),e.registerComponent("ui","RuntimeReducer",r(341)),e.registerComponent("ui","RuntimeToProject",r(343)),e.registerComponent("ui","SearchGraphNodeToContext",r(344)),e.registerComponent("ui","SendComponentChanges",r(345)),e.registerComponent("ui","SendCurrentHash",r(346)),e.registerComponent("ui","SendEdges",r(347)),e.registerComponent("ui","SendGraphChanges",r(348)),e.registerComponent("ui","SendNewGraph",r(349)),e.registerComponent("ui","SetAction",r(350)),e.registerComponent("ui","SetToContext",r(351)),e.registerComponent("ui","SetUrl",r(352)),e.registerComponent("ui","SetUrlHash",r(353)),e.registerComponent("ui","StartNetwork",r(354)),e.registerComponent("ui","State",r(355)),e.registerComponent("ui","StopNetwork",r(356)),e.registerComponent("ui","StorageReducer",r(357)),e.registerComponent("ui","Store",r(358)),e.registerComponent("ui","StoreRemoteProject",r(359)),e.registerComponent("ui","StoreRemoteRuntime",r(360)),e.registerComponent("ui","StoreUser",r(361)),e.registerComponent("ui","StoreUserPreferences",r(362)),e.registerComponent("ui","UpdateFromTree",r(363)),e.registerComponent("ui","Save",r(364)),e.registerComponent("ui","SaveData",r(365)),e.registerComponent("ui","GetRuntimeClient",r(366)),e.registerComponent("ui","MigrateLocalStorage",r(367)),e.registerComponent("ui","ContextReducer",r(368)),e.registerComponent("ui","Delete",r(369)),e.registerComponent("ui","DeleteData",r(370)),e.registerComponent("ui","GithubMiddleware",r(371)),e.registerComponent("ui","GithubReducer",r(372)),e.registerComponent("ui","GithubSynchronization",r(373)),e.registerComponent("ui","Load",r(374)),e.registerComponent("ui","LoadData",r(375)),e.registerComponent("ui","PrepareStorage",r(376)),e.registerComponent("ui","RegistryMiddleware",r(377)),e.registerComponent("ui","RegistryReducer",r(378)),e.registerComponent("ui","RuntimeMiddleware",r(379)),e.registerComponent("ui","StorageMiddleware",r(380)),e.registerComponent("ui","UrlMiddleware",r(381)),e.registerComponent("ui","UserMiddleware",r(382)),e.registerComponent("ui","UserReducer",r(383)),e.registerComponent("ui","main",r(112)),e.registerComponent("core","Kick",r(384)),e.registerComponent("core","Merge",r(385)),e.registerComponent("core","Output",r(386)),e.registerComponent("core","Repeat",r(389)),e.registerComponent("core","RepeatAsync",r(390)),e.registerComponent("core","SendNext",r(391)),e.registerComponent("core","Split",r(392)),e.registerComponent("flow","Race",r(393)),e.registerComponent("github","CreateCommit",r(394)),e.registerComponent("github","CreateTree",r(398)),e.registerComponent("github","GetBlob",r(399)),e.registerComponent("github","GetReference",r(400)),e.registerComponent("github","UpdateReference",r(401)),e.registerComponent("graph","LoadJson",r(402)),e.registerComponent("indexeddb","BeginTransaction",r(403)),e.registerComponent("indexeddb","CreateIndex",r(404)),e.registerComponent("indexeddb","CreateStore",r(405)),e.registerComponent("indexeddb","Delete",r(406)),e.registerComponent("indexeddb","GetStore",r(407)),e.registerComponent("indexeddb","Open",r(408)),e.registerComponent("indexeddb","Put",r(410)),e.registerComponent("indexeddb","Query",r(411)),e.registerComponent("indexeddb","UpgradeRouter",r(412)),e.registerComponent("interaction","ListenHash",r(413)),e.registerComponent("interaction","ListenResize",r(414)),e.registerComponent("objects","CallMethod",r(415)),e.registerComponent("objects","CreateObject",r(416)),e.registerComponent("objects","GetObjectKey",r(417)),e.registerComponent("strings","SendString",r(418)),e.registerComponent(null,"Graph",r(419));var o=[];o.push(r(420)),n.registerCustomLoaders(e,o,t)}},function(module,exports){exports.registerCustomLoaders=function(e,t,r){if(!t.length)return r();var n=t.shift();e.registerLoader(n,(function(n){if(n)return r(n);exports.registerCustomLoaders(e,t,r)}))},exports.setSource=function(sources,loader,packageId,name,source,language,callback){var implementation,originalSource=source;if("coffeescript"===language){if("undefined"!=typeof window&&!window.CoffeeScript)return callback(new Error("CoffeeScript compiler needed for "+packageId+"/"+name+" not available"));try{source=window.CoffeeScript.compile(source,{bare:!0})}catch(e){return callback(e)}}if(("es6"===language||"es2015"===language)&&"undefined"!=typeof window&&window.babel)try{source=window.babel.transform(source).code}catch(e){return callback(e)}try{var withExports="(function () { var exports = {}; "+source+"; return exports; })();";implementation=eval(withExports)}catch(e){return callback(e)}if("function"!=typeof implementation&&(!implementation.getComponent||"function"!=typeof implementation.getComponent))return callback(new Error("Provided source for "+packageId+"/"+name+" failed to create a runnable component"));var fullName=packageId+"/"+name;sources[fullName]={language:language,source:originalSource},loader.registerComponent(packageId,name,implementation,callback)},exports.getSource=function(e,t,r,n){if(!t.components[r])return n(new Error("Component "+r+" not available"));var o=t.components[r];if(-1!==r.indexOf("/"))var i=r.split("/"),s={name:i[1],library:i[0]};else s={name:r,library:""};return t.isGraph(o)?(s.code=JSON.stringify(o,null,2),s.language="json",n(null,s)):e[r]?(s.code=e[r].source,s.language=e[r].language,s.tests=e[r].tests,n(null,s)):"function"==typeof o?(s.code=o.toString(),s.language="javascript",n(null,s)):"function"==typeof o.getComponent?(s.code=o.getComponent.toString(),s.language="javascript",n(null,s)):n(new Error("Unable to get sources for "+r))},exports.getLanguages=function(){var e=["javascript","es2015"];return"undefined"!=typeof window&&window.CoffeeScript&&e.push("coffeescript"),e}},function(e,t,r){const n=r(0),o=r(21),i=r(17),s=(e,t,r,i,s)=>{let a=t;const c=r;let u="loadJSON";"fbp"===c.remote.language&&(u="loadFBP"),"json"===c.remote.language&&(a=JSON.parse(a)),n.graph[u](a,(t,r)=>{if(t)return void s(new Error(`Failed to load ${c.remote.name}: ${t.message}`));const a=r;if(a.properties||(a.properties={}),a.properties.sha=e,a.properties.changed=!1,a.properties.project=i.id,c.local)return c.local.startTransaction(e),n.graph.mergeResolveTheirs(c.local,a),c.local.endTransaction(e),c.local.properties.changed=!1,o.addToList(i.graphs,c.local),void s(null,c.local);a.properties.name=c.remote.name,a.name=c.remote.name,a.properties.id=`${i.id}/${a.name}`,a.properties.environment||(a.properties.environment={}),a.properties.environment.type||(a.properties.environment.type=i.type),o.addToList(i.graphs,a),s(null,a),s()})},a=(e,t,r,n,i)=>{const s=r;if(s.local)return s.local.code=t,s.local.sha=e,s.local.changed=!1,o.addToList(n.components,s.local),void i(null,s.local);const a={id:`${n.id}/${s.remote.name}`,project:n.id,name:s.remote.name,code:t,language:s.remote.language,sha:e,changed:!1};o.addToList(n.components,a),i(null,a)},c=(e,t,r,n,i)=>{const s=r;if(s.local)return s.local.code=t,s.local.sha=e,s.local.changed=!1,o.addToList(n.specs,s.local),void i(null,s.local);const a={id:`${n.id}/${s.remote.name}`,project:n.id,type:"spec",name:s.remote.name,code:t,language:s.remote.language,sha:e,changed:!1};o.addToList(n.specs,a),i(null,a)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("blob",{datatype:"array",description:"Git blob entries"}),e.inPorts.add("operation",{datatype:"object",description:"Sync operation",required:!0}),e.outPorts.add("graph",{datatype:"object",scoped:!1}),e.outPorts.add("component",{datatype:"object",scoped:!1}),e.outPorts.add("spec",{datatype:"object",scoped:!1}),e.outPorts.add("project",{datatype:"object",scoped:!1}),e.outPorts.add("error",{datatype:"object",scoped:!1}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("operation"))return;if(!e.hasData("blob"))return;const[r,n]=e.getData("operation","blob");if(!(null!=r.pull?r.pull.length:void 0))return void t.done(new Error("Operation does not provide any pull entries"));const o=[],u=[];n.forEach(e=>{const{sha:t}=e;let n=e.content.replace(/\s/g,"");"base64"===e.encoding&&(n=decodeURIComponent(escape(atob(n))));const i=r.pull.find(e=>e.remote&&e.remote.sha===t);if(!i)return void u.push("No entry found for blob "+t);let p,l;switch(i.type){case"graph":p=s,l="graph";break;case"spec":p=c,l="spec";break;default:p=a,l="component"}p(t,n,i,r.project,(e,t)=>{e?u.push(e):o.push({type:l,entity:t})})}),u.length?t.done(u[0]):(o.forEach(e=>{const r={};r[e.type]=e.entity,t.send(r)}),r.project.main=i.findMainGraph(r.project),t.sendDone({project:r.project}))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),n.helpers.WirePattern(e,{out:["existing","new"],async:!0},(e,t,r,n)=>{if(!e.state||!e.state.projects||!e.state.projects.length)return r.new.send(e),void n();const o=e.state.projects.filter(t=>t.gist===e.payload.graph);if(!o.length)return r.new.send(e),void n();r.existing.send(["project",o[0].id,o[0].main]),n()})}},function(e,t,r){const n=r(0),o=r(10),{v4:i}=r(20),s=r(17),a=e=>{const t=e.payload.repo.split("/");return{project:{id:i(),name:t[1],namespace:t[1].replace(/^noflo-/,""),repo:e.payload.repo,branch:e.payload.branch,graphs:[],components:[],specs:[]},repo:e.payload.repo}};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("openmain",{datatype:"array"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(!r.state||!r.state.projects||!r.state.projects.length)return void t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)});const n=r.state.projects.filter(e=>e.repo===r.payload.repo&&("master"===r.payload.branch&&!e.branch||e.branch===r.payload.branch));n.length?s.getProjectHash(n[0],(e,i)=>{let s=i;if(s||(s=["project",n[0].id,n[0].main]),r.payload.component){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.components.find(e=>e.name===r);return n?n.name:null})(r.payload.component,n[0]);e&&(s[2]="component",s[3]=e)}if(r.payload.graph){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.graphs.find(e=>e.name===r);return n?n.properties.id:null})(r.payload.graph,n[0]);e&&(delete s[3],s[2]=e)}t.sendDone({existing:s})}):t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)})})}},function(e,t,r){const n=r(0),o=r(38),i=(e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()},s=(e,t,r,n)=>i(`/repos/${e}/git/trees/${t}`,r,n),a=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(coffee|js|hpp|c|py)$"));n.components=n.components.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf("."));const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;case"js":t.language="javascript";break;case"hpp":t.language="c++";break;case"c":t.language="c";break;case"py":t.language="python";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},c=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(yaml|coffee)$"));n.specs=n.specs.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf(".")),t.type="spec";const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},u=(e,t,r,n)=>((e,t,r,n)=>i(`/repos/${e}/git/commits/${t}`,r,n))(e,t,r,(o,i)=>{o?n(o):i?s(e,i.tree.sha,r,(t,o)=>{if(t)return void n(t);let u=null,p=null,l=null;const d={tree:i.tree.sha,graphs:[],components:[],specs:[]};o.tree.forEach(e=>{"fbp.json"===e.path&&"blob"===e.type||("graphs"!==e.path||"tree"!==e.type?"components"!==e.path||"tree"!==e.type?"spec"===e.path&&"tree"===e.type&&(l=e.sha):p=e.sha:u=e.sha)}),u?s(e,u,r,(t,o)=>{t?n(t):(((e,t,r)=>{const n=t;if(!e)return;let o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(fbp|json)$"));o=o.filter(e=>{if(-1===e.path.indexOf(".fbp"))return!0;const t=e.path.replace(".fbp",".json");return!o.find(e=>e.path===t)}),n.graphs=n.graphs.concat(o.map(e=>{const t=e;return t.name=t.path.substr(0,t.path.indexOf(".")),t.language=t.path.substr(t.path.lastIndexOf(".")+1),t.fullPath=`${r}${t.path}`,t}))})(o,d,"graphs/"),p?s(e,p,r,(t,o)=>{t?n(t):(a(o,d,"components/"),l?s(e,l,r,(e,t)=>{e?n(e):(c(t,d,"spec/"),n(null,d))}):n(null,d))}):n(null,d))}):p?s(e,p,r,(t,o)=>{t?n(t):(a(o,d,"components/"),l?s(e,l,r,(e,t)=>{e?n(e):(c(t,d,"spec/"),n(null,d))}):n(null,d))}):l?s(e,l,r,(e,t)=>e?n(e):(c(t,d,"spec/"),n(null,d))):n(null,d)}):n(new Error(`No commit found for ${e} ${t}`))}),p=e=>e.replace(/\s/g,"_"),l=(e,t)=>{const r=p(t.name);if("graph"===e)return`graphs/${r}.json`;let n="components";switch("spec"===e&&(n="spec"),t.language){case"coffeescript":return`${n}/${r}.coffee`;case"javascript":case"es2015":return`${n}/${r}.js`;case"c++":return`${n}/${r}.hpp`;case"python":return`${n}/${r}.py`;default:return`${n}/${r}.${t.language}`}},d=(e,t,r,n)=>n.pull.push({path:r.fullPath,type:e,local:t,remote:r}),h=(e,t,r,n)=>n.push.push({path:(null!=r?r.fullPath:void 0)||l(e,t),type:e,local:t,remote:r}),f=(e,t,r,n)=>n.conflict.push({path:r.fullPath,type:e,local:t,remote:r});t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("reference",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("noop",{datatype:"object"}),e.outPorts.add("local",{datatype:"object"}),e.outPorts.add("remote",{datatype:"object"}),e.outPorts.add("both",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["reference","project"],params:"token",out:["noop","local","remote","both"],async:!0},(t,r,n,o)=>{const i={repo:t.project.repo,project:t.project,ref:t.reference.ref,commit:t.reference.object.sha,push:[],pull:[],conflict:[]};u(i.repo,i.commit,e.params.token,(e,r)=>{if(e)return void o(e);i.tree=r.tree,r.graphs.forEach(e=>{const r=t.project.graphs.filter(t=>t.properties.sha===e.sha||p(t.name)===e.name);r.length?r[0].properties.sha!==e.sha?!1!==r[0].properties.changed?f("graph",r[0],e,i):d("graph",r[0],e,i):r[0].properties.changed&&h("graph",r[0],e,i):d("graph",null,e,i)});let s=t.project.graphs.filter(e=>{let t=!0;return r.graphs.forEach(r=>{e.properties.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t});return s.forEach(e=>{h("graph",e,null,i)}),r.components.forEach(e=>{const r=t.project.components.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("component",r[0],e,i):d("component",r[0],e,i):r[0].changed&&h("component",r[0],e,i):d("component",null,e,i)}),s=t.project.components.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.components.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t}),s.forEach(e=>{h("component",e,null,i)}),r.specs.forEach(e=>{const r=t.project.specs.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("spec",r[0],e,i):d("spec",r[0],e,i):r[0].changed&&h("spec",r[0],e,i):d("spec",null,e,i)}),s=t.project.specs.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.specs.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t}),s.forEach(e=>{h("spec",e,null,i)}),i.conflict.length||i.push.length&&i.pull.length?(n.both.send(i),void o()):i.push.length?(n.local.send(i),void o()):i.pull.length?(n.remote.send(i),void o()):(n.noop.send(i),void o())})}),e}},function(e,t,r){(function(t){
/*!
 * octo.js
 * Copyright (c) 2012 Justin Palmer <justin@labratrevenge.com>
 * MIT Licensed
 */
!function(){"undefined"==typeof superagent&&(superagent=r(151),void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node")&&(btoa=r(76)));var n={api:function(){var e,r,n,o,i,s="https://api.github.com";superagent;function a(){}function c(s,c,u){var p=1,l=30,d={},h=!1,f=!1,m={};void 0!==t&&t.execPath&&t.execPath.match(/node/)&&(d["User-Agent"]="Octo.js");var g=function(){var t=superagent[s](a.host()+c);t.on("error",(function(e){y._handledError=e,y.trigger("error",e)})),i&&t.set("Authorization","token "+i),!i&&n&&o&&t.set("Authorization","Basic "+btoa(n+":"+o)),t.set(d).query({page:p,per_page:l}).timeout(3e3).send(u).end((function(t){if(!y._handledError){if(t.error)return y._handledError=t,void y.trigger("error",t);e=~~t.header["x-ratelimit-limit"],r=~~t.header["x-ratelimit-remaining"];var n=t.header.link;h=/rel=\"next\"/i.test(n),f=/rel=\"next\"/.test(n),y.trigger("end",t),t.ok&&y.trigger("success",t)}}))};function y(){g()}return y.page=function(e){return arguments.length?(p=e,y):p},y.perpage=function(e){return arguments.length?(l=e,y):l},y.next=function(){return p+=1,g(),y},y.prev=function(){return p-=1,g(),y},y.hasnext=function(){return h},y.hasprev=function(){return f},y.on=function(e,t){return void 0===m[e]&&(m[e]=[]),m[e].push(t),y},y.off=function(e,t){if(m[e]instanceof Array)for(var r=m[e],n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1);break}return y},y.trigger=function(e,t){return m[e]instanceof Array&&m[e].forEach((function(e){e.call(y,t)})),y},y.set=function(e,t){return d[e]=t,y},y}return a.host=function(e){return arguments.length?(s=e,a):s},a.get=function(e,t){return new c("get",e)},a.post=function(e,t){return new c("post",e,t)},a.patch=function(e,t){return new c("patch",e,t)},a.put=function(e,t){return new c("put",e,t)},a.del=function(e,t){return new c("del",e,t)},a.limit=function(){return e},a.remaining=function(){return r},a.username=function(e){return arguments.length?(n=e,a):n},a.password=function(e){return arguments.length?(o=e,a):o},a.token=function(e){return arguments.length?(i=e,a):i},a}};e.exports=n}()}).call(this,r(3))},function(e,t,r){var n=r(152),o=r(75),i="undefined"==typeof window?this:window;function s(){}var a="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function c(e){return e===Object(e)}function u(e){if(!c(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function p(e){for(var t,r={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o].split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function l(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var c=0,u=i.length;c<u;++c)t=(r=i[c]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=a(r.slice(t+1)),s[n]=o;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function d(e,t){var r=this;n.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var t=new l(r);"HEAD"==e&&(t.text=null),r.callback(null,t)}))}function h(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}h.serializeObject=u,h.parseString=p,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},l.prototype.get=function(e){return this.header[e.toLowerCase()]},l.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=t.split(/ *; */).shift();var r=function(e){return o(e.split(/ *; */),(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})}(t);for(var n in r)this[n]=r[n]},l.prototype.parseBody=function(e){var t=h.parse[this.type];return t?t(e):null},l.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},l.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=l,n(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},d.prototype.set=function(e,t){if(c(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},d.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=u(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},d.prototype.send=function(e){var t=c(e),r=this.getHeader("Content-Type");if(t&&c(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},d.prototype.callback=function(e,t){var r=this._callback;return 2==r.length?r(e,t):e?this.emit("error",e):void r(t)},d.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,r=this.xhr=function(){if(i.XMLHttpRequest&&("file:"!=i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;if(this._callback=e||s,r.onreadystatechange=function(){if(4==r.readyState)return 0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end")},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),o&&!this._timer&&(this._timer=setTimeout((function(){t.abort()}),o)),n&&(n=h.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}(a)){var c=h.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var u in this.header)null!=this.header[u]&&r.setRequestHeader(u,this.header[u]);return this.emit("request",this),r.send(a),this},h.Request=d,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=function(e,t){var r=h("DELETE",e);return t&&r.end(t),r},h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=h},function(e,t){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){const n=r(30),o=r(39),i=r(0);t.getComponent=()=>{const e=new i.Component;return e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("code",{datatype:"string"}),e.outPorts.add("error",{datatype:"string"}),i.helpers.WirePattern(e,{in:["in"],out:["pass","code"],forwardGroups:!0,async:!0},(e,t,r,i)=>{if("string"!=typeof e.payload)return i(new Error("URL must be a string"));const s=n.parse(e.payload);if(!s.query)return r.pass.send(e),i();const a=o.parse(s.query);return a.error&&a.error_description&&i(new Error(a.error_description)),a.code?(r.code.send(a.code),i()):(r.pass.send(e),i())})}},function(e,t,r){(function(e,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,u=/^xn--/,p=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(d[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(l,".")).split("."),t).join(".")}function v(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=36)e=h(e/35);return h(n+36*e/(e+38))}function x(e){var t,r,n,o,i,s,a,u,p,l,d,f=[],g=e.length,y=0,v=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&m("not-basic"),f.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(i=y,s=1,a=36;o>=g&&m("invalid-input"),((u=(d=e.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>h((c-y)/s))&&m("overflow"),y+=u*s,!(u<(p=a<=w?1:a>=w+26?26:a-w));a+=36)s>h(c/(l=36-p))&&m("overflow"),s*=l;w=E(y-i,t=f.length+1,0==i),h(y/t)>c-v&&m("overflow"),v+=h(y/t),y%=t,f.splice(y++,0,v)}return b(f)}function S(e){var t,r,n,o,i,s,a,u,p,l,d,g,y,b,x,S=[];for(g=(e=v(e)).length,t=128,r=0,i=72,s=0;s<g;++s)(d=e[s])<128&&S.push(f(d));for(n=o=S.length,o&&S.push("-");n<g;){for(a=c,s=0;s<g;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>h((c-r)/(y=n+1))&&m("overflow"),r+=(a-t)*y,t=a,s=0;s<g;++s)if((d=e[s])<t&&++r>c&&m("overflow"),d==t){for(u=r,p=36;!(u<(l=p<=i?1:p>=i+26?26:p-i));p+=36)x=u-l,b=36-l,S.push(f(w(l+x%b,0))),u=h(x/b);S.push(f(w(u,0))),i=E(r,y,n==o),r=0,++n}++r,++t}return S.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:x,encode:S,toASCII:function(e){return y(e,(function(e){return p.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return y(e,(function(e){return u.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return a}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r(155)(e),r(9))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var p=0;p<u;++p){var l,d,h,f,m=e[p].replace(a,"%20"),g=m.indexOf(r);g>=0?(l=m.substr(0,g),d=m.substr(g+1)):(l=m,d=""),h=decodeURIComponent(l),f=decodeURIComponent(d),n(s,h)?o(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(n(s))+r;return o(e[s])?i(e[s],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[s]))})).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Strips state from action payloads for backwards compat",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"all"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!0},(e,t,r,n)=>{r.send(e.payload||e),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{r.send({id:e.id,name:e.name,namespace:e.namespace,runtime:e.runtime,type:e.type,repo:e.repo,branch:e.branch,gist:e.gist,main:e.main}),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("clear",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"clear",out:"user",async:!0},(e,t,r,n)=>{const o={};["flowhub-avatar","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{localStorage.removeItem(e),o[e]=null}),r.send(o),n()})}},function(e,t,r){const n=r(0),o=(e,t)=>e.getStream(t).filter(e=>"data"===e.type&&!(!e.data||!0===e.data)).map(e=>e.data);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("component",{datatype:"object"}),e.inPorts.add("spec",{datatype:"object"}),e.inPorts.add("runtime",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.process((e,t)=>{if(!e.hasStream("project","graph","component","spec","runtime"))return;const r={projects:o(e,"project"),graphs:o(e,"graph"),components:o(e,"component"),specs:o(e,"spec"),runtimes:o(e,"runtime")};t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok"),project:null,runtime:null,component:null,graphs:[],remote:[]};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok")};r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="spinner",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","loading")};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),window.nofloDBReady=!0,t.done())})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="code-fork",e.inPorts.add("routes",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("handle",{datatype:"all",addressable:!0}),e.outPorts.add("handling",{datatype:"integer"}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("routes","in"))return;const[r,o]=e.getData("routes","in");if(!(null!=o?o.action:void 0))return void t.sendDone({pass:o});const i=r.split(","),s=((e,t)=>t.map(t=>{if(-1===t.indexOf("*"))return t;return t.split(":").map((t,r)=>"*"!==t?t:e[r]?e[r]:t).join(":")}).indexOf(e.join(":")))(o.action.split(":"),i);-1!==s?(t.send({handling:s,handle:new n.IP("data",o,{index:s})}),t.done()):t.sendDone({pass:o})})}},function(e,t,r){const n=r(0),o=e=>{let t=e;return null==t&&(t=60466176),t=Math.floor(Math.random()*t),t.toString(36)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("id",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","id"],async:!0},(e,t,r,n)=>{const i=e;if(i.properties){if(i.properties.id)return i.id=i.properties.id,r.out.send(i),r.id.send(i.id),void n();const e=o();return i.properties.id=e,i.id=e,r.out.send(i),r.id.send(i.id),void n()}if(i.id)return r.out.send(i),r.id.send(i.id),void n();i.id=o(),r.out.send(i),r.id.send(i.id),n()})}},function(e,t,r){const n=r(0),{v4:o}=r(20),i="https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe";t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("runtimes",{datatype:"array"}),n.helpers.WirePattern(e,{out:["out","runtimes"],async:!0,forwardGroups:!1},(e,t,r,n)=>{const s=e||[],a=(e=>{if(e.find(e=>"iframe"===e.protocol&&e.address===i))return null;return{label:"NoFlo HTML5 environment",id:o(),protocol:"iframe",address:i,type:"noflo-browser",seen:Date.now()}})(s);a&&(r.out.send(a),s.push(a)),r.runtimes.send(s),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="exclamation-triangle",e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"error",out:"out",async:!0},(e,t,r,n)=>{r.send({state:"error",error:e.payload||e}),n()})}},function(e,t,r){const n=r(39),o=r(0);t.getComponent=()=>{const e=new o.Component;return e.inPorts.add("code",{datatype:"string"}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),o.helpers.WirePattern(e,{in:"code",out:"token",async:!0},(e,t,r,o)=>{const i={redirect:"http://localhost:9999",clientid:"46fe25abef8d07e6dc2d",clientsecret:"",token_server:"https://github.com",token_endpoint:"/login/oauth/access_token",gatekeeper_server:"https://noflo-gate.herokuapp.com",gatekeeper_endpoint:"/authenticate"};return"https:"===window.location.protocol&&(i.redirect="",i.clientid="",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/ssl"),"undefined"!=typeof chrome&&chrome.identity&&(i.redirect="https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/",i.clientid="f29ae9f73bfb223d69d7",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/chrome"),((e,t,r)=>{const o=new XMLHttpRequest;if(o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);r(new Error("Authentication token exchange failed with "+e.error))}catch(e){r(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void r(e)}const t=e.token||e.access_token||null;r(null,t)},t.clientsecret){const r={code:e,client_id:t.clientid,client_secret:t.clientsecret,grant_type:"authorization_code",redirect_uri:t.redirect||window.location.href};return o.open("POST",`${t.token_server}${t.token_endpoint}`,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","application/json"),void o.send(n.stringify(r))}o.open("GET",`${t.gatekeeper_server}${t.gatekeeper_endpoint}/${e}`,!0),o.send(null)})(e,i,(e,t)=>e?o(e):t?(r.send(t),o()):o(new Error("OAuth token exchange didn't return a token")))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("search",{datatype:"string"}),e.outPorts.add("nodes",{datatype:"object"}),n.helpers.WirePattern(e,{in:"search",params:["graph"],out:"nodes",async:!0},(t,r,n,o)=>{if(null==t)return void o();if(!e.params.graph)return void o();if(t.length<1)return n.send(null),void o();const i=t.toLowerCase();e.params.graph.nodes.forEach(e=>{e.metadata.label.toLowerCase().indexOf(i)>=0&&n.send(e)}),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Reads requested keys from action and sends them out alongside the action payload",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("keys",{datatype:"string",control:!0}),e.outPorts.add("values",{datatype:"all",addressable:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("keys").length&&!e.hasData("keys"))return;const r=e.getData("in");if(e.hasData("keys")){const o=((e,t)=>e.map(e=>{if(-1===e.indexOf("["))return t[e];const r=e.match(/(.*)\[([0-9]+|last)\]/);if(!r)return null;const n=t[r[1]];return"last"===r[2]?n[n.length-1]:n[r[2]]}))(e.getData("keys").split(","),r.state);for(let e=0;e<o.length;e+=1){const r=o[e];t.send({values:new n.IP("data",r,{index:e})})}}t.sendDone({state:r.state||{},out:r.payload||r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("projects",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"user",out:"projects",async:!0},(e,t,r,n)=>{if(!e["flowhub-token"])return void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(200===o.status){let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}return r.send(e),void n()}n(new Error(o.responseText))}},o.open("GET","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization","Bearer "+e["flowhub-token"]),o.send(null)})}},function(e,t,r){const n=r(0),o=r(54);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array",required:!0}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{params:["runtimes"],in:"user",out:"runtime",async:!0},(t,r,n,i)=>{if(!t["flowhub-token"])return void i();const s=e.params.runtimes||[];o.list(t["flowhub-token"],{host:"https://api.flowhub.io"},(e,t)=>{if(e)return void i(e);const r=t.filter(e=>{const t=e,r=s.find(e=>e.id===t.runtime.id);if(!r)return!0;const n=new Date(r.seen);return(t.runtime.seen.getTime()!==n.getTime()||t.runtime.address!==r.address||t.runtime.secret!==r.secret)&&(t.runtime.capabilities=r.capabilities,t.runtime.components=r.components,!0)});r.length?(n.beginGroup("https://api.flowhub.io"),r.forEach(e=>{n.send(e.runtime)}),n.endGroup(),i()):i()})})}},function(e,t,r){var n;"undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:(console.warn("Using browser-only version of superagent in non-browser environment"),n=this);var o=r(177),i=r(178),s=r(77),a=r(179),c=r(181);function u(){}var p=t=e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1==arguments.length?new t.Request("GET",e):new t.Request(e,r)};t.Request=y,p.getXHR=function(){if(!(!n.XMLHttpRequest||n.location&&"file:"==n.location.protocol&&n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var l="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function d(e){if(!s(e))return e;var t=[];for(var r in e)h(t,r,e[r]);return t.join("&")}function h(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach((function(r){h(e,t,r)}));else if(s(r))for(var n in r)h(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function f(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;i<s;++i)-1==(r=(t=o[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,r,n,o,i=e.split(/\r?\n/),s={},a=0,c=i.length;a<c;++a)-1!==(t=(r=i[a]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),o=l(r.slice(t+1)),s[n]=o);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new g(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)}))}function v(e,t,r){var n=p("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}p.serializeObject=d,p.parseString=f,p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":d,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},a(g.prototype),g.prototype._parseBody=function(e){var t=p.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=p.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},p.Response=g,o(y.prototype),i(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},y.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var n=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,n)},y.prototype.query=function(e){return"string"!=typeof e&&(e=d(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||u,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var e=this,t=this.xhr=p.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||p.serialize[o?o.split(";")[0]:""];!i&&m(o)&&(i=p.serialize["application/json"]),i&&(r=i(r))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},p.agent=function(){return new c},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){c.prototype[e.toLowerCase()]=function(t,r){var n=new p.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}})),c.prototype.del=c.prototype.delete,p.get=function(e,t,r){var n=p("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.head=function(e,t,r){var n=p("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.options=function(e,t,r){var n=p("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.del=v,p.delete=v,p.patch=function(e,t,r){var n=p("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.post=function(e,t,r){var n=p("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.put=function(e,t,r){var n=p("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";var n=r(77);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(e){return this._parser=e,this},o.prototype.responseType=function(e){return this._responseType=e,this},o.prototype.serialize=function(e){return this._serializer=e,this},o.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},o.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){r.end((function(r,n){r?t(r):e(n)}))}))}return this._fullfilledPromise.then(e,t)},o.prototype.catch=function(e){return this.then(void 0,e)},o.prototype.use=function(e){return e(this),this},o.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},o.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},o.prototype.get=function(e){return this._header[e.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(e,t){if(n(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},o.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},o.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),n(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var o in t)this.field(e,t[o]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},o.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},o.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},o.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},o.prototype.redirects=function(e){return this._maxRedirects=e,this},o.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(e){var t=n(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&n(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||r||this.type("json"),this},o.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},o.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},o.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,r){"use strict";var n=r(180);function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var o in r)this[o]=r[o];this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,r){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){r.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),r.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=r},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"token",out:"user",async:!0},(e,t,r,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);n(new Error(e.message||"User fetching failed with "+o.status))}catch(e){n(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}r.send(e),n()},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization","Bearer "+e),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(r.send(window.location.href),n()))}},function(e,t,r){const n=r(0),o=r(38);t.getComponent=()=>{const e=new n.Component;return e.description="Get user token from action",e.icon="key",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("limit",{datatype:"int",default:50}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["limit"],out:["token","out"],async:!0},(t,r,n,i)=>{let s;t.state&&t.state.user&&t.state.user["github-token"]&&(s=t.state.user["github-token"]);const a=o.api();s&&a.token(s);const c=a.get("/rate_limit");c.on("success",r=>{if(((null!=r.body.rate?r.body.rate.remaining:void 0)||0)<(e.params.limit?parseInt(e.params.limit,10):50))return s?void i(new Error("GitHub API access rate limited, try again later")):void i(new Error("GitHub API access rate limited. Please log in to increase the limit"));n.token.send(s),n.out.send(t.payload),i()}),c.on("error",e=>{const t=e.error||e.body;i(t?new Error("Failed to communicate with GitHub: "+t):new Error("Failed to communicate with GitHub. Try again later"))}),c()})}},function(e,t,r){const n=r(0),o=r(38),i=r(10);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object",required:!0}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["token"],out:["graph","component","project"],async:!0},(t,r,s,a)=>{const c=o.api();e.params.token&&c.token(e.params.token);const u={id:t.graph,gist:t.graph,graphs:[],components:[],specs:[]},p=c.get("/gists/"+t.graph);return p.on("success",e=>{(null!=e.body?e.body.files:void 0)?(u.name=e.body.description,Object.keys(e.body.files).forEach(t=>{const r=e.body.files[t],o=i.basename(t,i.extname(t));if(".json"===i.extname(t))return void n.graph.loadJSON(r.content,(e,t)=>(t.setProperties({project:u.id,id:`${u.id}/${o}`}),u.main||(u.main=t.properties.id),u.name||(u.name=t.name),t.properties&&t.properties.environment&&t.properties.environment.type&&!u.type&&(u.type=t.properties.environment.type),u.graphs.push(t)));const s={name:o,language:r.language,project:u.id,id:`${u.id}/${o}`,code:r.content,tests:""};u.components.push(s)}),s.project.send(u),u.graphs.forEach(e=>{s.graph.send(e)}),u.components.forEach(e=>{s.components.send(e)}),a()):a(new Error(`Gist ${t.gist} didn't provide any files`))}),p.on("error",e=>a(e.error||e.body)),p()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("missed",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");r.state.runtime?t.sendDone({out:r}):t.sendDone({missed:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;e.inPorts.add("in",{description:"Runtime client instance",datatype:"object"}),e.outPorts.add("runtimeupdate",{datatype:"object"}),e.outPorts.add("status",{description:"Runtime status change",datatype:"object"}),e.outPorts.add("components",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("started",{datatype:"object"}),e.outPorts.add("stopped",{datatype:"object"}),e.outPorts.add("packet",{datatype:"object"}),e.outPorts.add("output",{datatype:"object"}),e.outPorts.add("icon",{datatype:"object"}),e.outPorts.add("networkerror",{datatype:"object"}),e.outPorts.add("processerror",{datatype:"object"}),e.outPorts.add("protocolerror",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={};const t=t=>{e.clients[t]&&(e.clients[t].client.removeListener("connected",e.clients[t].onConnected),e.clients[t].client.transport.removeListener("status",e.clients[t].onStatus),e.clients[t].client.removeListener("signal",e.clients[t].onSignal),e.clients[t].client.removeListener("protocolError",e.clients[t].onProtocolError),e.clients[t].context.deactivate(),delete e.clients[t])};return e.tearDown=r=>{Object.keys(e.clients).forEach(e=>{t(e)}),r()},e.process((r,n,o)=>{if(!r.hasData("in"))return;const i=r.getData("in");let{id:s}=i.definition;t(s);const a=()=>{i.definition.id!==s&&(e.clients[i.definition.id]=e.clients[s],delete e.clients[s],s=i.definition.id)};e.clients[s]={context:o,client:i,onConnected(){a(),n.send({runtimeupdate:i.definition}),i.canSend("component","list")&&setTimeout(()=>i.protocol.component.list().then(e=>n.send({components:{components:e,runtime:s}})).then(()=>i.definition.graph?i.protocol.network.getstatus({graph:i.definition.graph}).then(e=>{e.running&&n.send({started:{status:e,runtime:s}})}):Promise.resolve()).catch(e=>{const t=e;t.runtime=s,n.send({error:t})}),1)},onStatus(e){a(),i.definition.seen=new Date,n.send({status:{status:e,runtime:s}})},onSignal(e){((e,t,r)=>{const n=e;switch("error"===n.command&&(n.payload.runtime=t,r.send({error:{payload:n.payload}})),`${n.protocol}:${n.command}`){case"component:component":return void r.send({component:{component:n.payload,runtime:t}});case"network:started":return void r.send({started:{status:n.payload,runtime:t}});case"network:stopped":return void r.send({stopped:{status:n.payload,runtime:t}});case"network:begingroup":return n.payload.type="openBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:data":return n.payload.type="data",void r.send({packet:{packet:n.payload,runtime:t}});case"network:endgroup":return n.payload.type="closeBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:output":return void r.send({output:{output:n.payload,runtime:t}});case"network:error":return void r.send({networkerror:{error:n.payload,runtime:t}});case"network:processerror":return void r.send({processerror:{error:n.payload,runtime:t}});case"network:icon":r.send({icon:{icon:n.payload,runtime:t}})}})(e,s,n)},onProtocolError(e){n.send({protocolerror:{error:e,runtime:s}})}},i.on("connected",e.clients[s].onConnected),i.transport.on("status",e.clients[s].onStatus),i.on("signal",e.clients[s].onSignal),i.on("protocolError",e.clients[s].onProtocolError)})}},function(e,t,r){const n=r(0),o=r(55);t.getComponent=()=>{const e=new n.Component;return e.description="Load fbp-spedc tests for the project",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const{project:r}=e.getData("in"),n=r.specs.filter(e=>"yaml"===e.language&&e.code).map(e=>{try{return o.testsuite.loadYAML(e.code)}catch(e){return[]}}).reduce((e,t)=>e.concat(t),[]);t.sendDone({out:[...n]})})}},function(e,t,r){e.exports={runner:r(78),subprocess:r(109),mocha:r(317),testsuite:r(62),schema:r(98),getSchema:function(t){const r=t.replace(".json","");return e.exports.schema[r]},ui:{}}},function(e,t,r){t.transports={websocket:r(191),iframe:r(196),opener:r(197),webrtc:r(198),base:r(31)},t.connection=r(215),t.Signaller=r(89),t.getTransport=function(e){return t.transports[e]}},function(e,t,r){const n=r(31),o=r(40);e.exports=class extends n{constructor(e){super(e),this.handleError=this.handleError.bind(this),this.handleMessage=this.handleMessage.bind(this),this.connecting=!1,this.connection=null,this.protocol="noflo",this.buffer=[],this.container=null}getElement(){if(this.container)return this.container;this.container=document.createElement("div"),this.container.classList.add("preview-container");const e=document.createElement("pre"),t=document.createElement("img");return this.container.appendChild(t),this.container.appendChild(e),this.on("network",r=>{if("output"!==r.command)return;const n=r.payload;if(null!=n.type&&"previewurl"===n.type){const e=n.url.indexOf(!0)?"&":"?";t.src=`${n.url+e}timestamp=${(new Date).getTime()}`}if(null!=n.message){const t=n.message.replace(/[\u00A0-\u99999<>&]/gim,e=>`&#${e.charCodeAt(0)};`);e.innerHTML+=t+"\n",e.scrollTop=e.scrollHeight}}),this.on("disconnected",()=>{e.innerHTML=""}),this.container}isConnected(){return this.connection&&!1===this.connecting}connect(){this.connection||this.connecting||(this.protocol?this.connection=new o.WebSocket(this.getAddress(),this.protocol):this.connection=new o.WebSocket(this.getAddress()),this.connection.addEventListener("open",()=>(this.connecting=!1,this.sendRuntime("getruntime",{}),this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.flush()),!1),this.connection.addEventListener("message",this.handleMessage,!1),this.connection.addEventListener("error",this.handleError,!1),this.connection.addEventListener("close",()=>{this.connection=null,this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")},!1),this.connecting=!0)}disconnect(){this.connection&&(this.connecting=!1,this.connection.close())}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.connection&&this.connection.send(JSON.stringify({protocol:e,command:t,payload:r}))}handleError(e){if("noflo"===this.protocol)return delete this.protocol,this.connecting=!1,this.connection=null,void setTimeout(()=>{this.connect()},1);this.connection=null,this.connecting=!1;const t=new Error("Connection failed");t.event=e,this.emit("error",t)}handleMessage(e){const t=JSON.parse(e.data);return this.recvMessage(t)}flush(){this.buffer.forEach(e=>{this.send(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){var n;try{n=r(193)}catch(e){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(194);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){e.exports=r(195).version},function(e){e.exports=JSON.parse('{"_from":"websocket@^1.0.8","_id":"websocket@1.0.32","_inBundle":false,"_integrity":"sha512-i4yhcllSP4wrpoPMU2N0TQ/q0O94LRG/eUQjEAamRltjQ1oT1PFFKOG4i877OlJgCG8rw6LrrowJp+TYCEWF7Q==","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"websocket@^1.0.8","name":"websocket","escapedName":"websocket","rawSpec":"^1.0.8","saveSpec":null,"fetchSpec":"^1.0.8"},"_requiredBy":["/fbp-protocol","/fbp-protocol-client"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.32.tgz","_shasum":"1f16ddab3a21a2d929dec1687ab21cfdc6d3dbb1","_spec":"websocket@^1.0.8","_where":"/home/runner/work/noflo-ui/noflo-ui/node_modules/fbp-protocol","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"Iaki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","test":"tape test/unit/*.js"},"version":"1.0.32"}')},function(e,t,r){const n=r(31);e.exports=class extends n{constructor(e){super(e),this.updateIframe=this.updateIframe.bind(this),this.onLoaded=this.onLoaded.bind(this),this.onMessage=this.onMessage.bind(this),this.origin=window.location.origin,this.connecting=!1,this.connected=!1,this.buffer=[],this.iframe=null}getElement(){return this.iframe}isConnected(){return this.connected}setMain(e){this.graph&&this.graph.removeListener("changeProperties",this.updateIframe),e?(e.on("changeProperties",this.updateIframe),super.setMain(e),this.updateIframe()):super.setMain(e)}setParentElement(e){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.appendChild(this.iframe)}connect(){if(!this.iframe)throw new Error("Unable to connect without a parent element");return this.iframe.addEventListener("load",this.onLoaded,!1),this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),this.iframe.setAttribute("src",this.getAddress()),this.iframe.id="preview-iframe",window.addEventListener("message",this.onMessage,!1)}updateIframe(){if(!this.iframe||!this.graph)return;const e=this.graph.properties.environment;e&&e.content&&this.send("iframe","setcontent",e.content)}disconnect(){return this.iframe&&this.iframe.removeEventListener("load",this.onLoaded,!1),this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}onLoaded(){let e;this.once("capabilities",()=>(e&&clearTimeout(e),this.connecting=!1,this.connected=!0,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.updateIframe(),this.flush())),this.postMessage("runtime","getruntime",{}),e=setTimeout(()=>{this.postMessage("runtime","getruntime",{})},500)}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}postMessage(e,t,r){const n=this.iframe.contentWindow;if(n){try{if("about:blank"===n.location.href)return;if(-1!==n.location.href.indexOf("chrome-extension://"))throw new Error("Use * for IFRAME communications in a Chrome app")}catch(o){return void n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),n.location.href)}}onMessage(e){let t;e.source&&e.source!==this.iframe.contentWindow||("string"==typeof e.data?t=JSON.parse(e.data):({data:t}=e),this.recvMessage(t))}flush(){this.buffer.forEach(e=>{this.postMessage(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){const n=r(31);e.exports=class extends n{constructor(e){super(e),this.onMessage=this.onMessage.bind(this),this.connecting=!1,this.connected=!1,this.buffer=[]}getElement(){return null}isConnected(){return this.connected}setParentElement(){}connect(){let e;this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),window.addEventListener("message",this.onMessage,!1),this.once("capabilities",()=>{e&&clearTimeout(e),this.connecting=!1,this.connected=!0,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.flush()}),this.postMessage("runtime","getruntime",{}),e=setTimeout(()=>{this.postMessage("runtime","getruntime",{})},500)}updateIframe(){}disconnect(){this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}postMessage(e,t,r){window.opener&&window.opener.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}onMessage(e){let t;e.source&&e.source!==window.opener||("string"==typeof e.data?t=JSON.parse(e.data):({data:t}=e),this.recvMessage(t))}flush(){this.buffer.forEach(e=>{this.postMessage(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){const n=r(4)("fbp-protocol-client:webrtc"),o=r(200),{v4:i}=r(20),s=r(31),{isBrowser:a}=r(40),c=r(89);e.exports=class extends s{constructor(e){super(e),this.id=i(),this.handleMessage=this.handleMessage.bind(this),this.signaller=null,this.connecting=!1,this.protocol="webrtc",this.buffer=[],this.peers={}}getElement(){return null}isConnected(){return!!Object.keys(this.peers).filter(e=>this.peers[e].connected).length}maybeDisconnected(){this.signaller&&!this.signaller.isConnected()&&(this.signaller=null,this.connecting=!1),this.isConnected()||(this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected"))}connect(){let e,t;if(this.isConnected()||this.connecting)return;if(this.signaller&&this.signaller.isConnected())return;const o=this.getAddress();-1!==o.indexOf("#")?([t,e]=o.split("#"),"webrtc://"===t&&(t=null)):e=o,t||(t="wss://api.flowhub.io/"),this.signaller=new c(this.id,"client",t);const i={channelName:e,initiator:!0};a()||(i.wrtc=r(214)),this.signaller.connect(),this.signaller.once("connected",()=>{this.signaller.join(e)}),this.signaller.on("join",e=>{this.peers[e.id]||(this.signaller.joinReply(e.id,this.id),this.connectPeer(e,i))}),this.signaller.on("signal",(e,t)=>{const r=this.peers[t.id];r||r.destroyed?(n(`${this.id} received signalling data for peer ${t.id}`),r.signal(e)):n(`${this.id} received signalling data for unknown/destroyed peer ${t.id}`)}),this.signaller.on("error",e=>{n(this.id+" signaller errored",e),this.connecting=!1,this.signaller=null,this.maybeDisconnected(),this.emit("error",e)}),this.signaller.on("disconnected",()=>{this.signaller=null,this.connecting=!1,this.maybeDisconnected()}),this.connecting=!0}connectPeer(e,t){n(`${this.id} connecting to peer ${e.id}`);const r=new o(t);this.peers[e.id]=r,r.on("signal",t=>{n(`${this.id} sending signalling data to peer ${e.id}`),this.signaller.signal(e.id,t)}),r.on("connect",()=>{n(`${this.id} connected to peer ${e.id}`),this.connecting=!1,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.sendRuntime("getruntime",{}),this.flush()}),r.on("data",this.handleMessage),r.on("close",()=>{n(`${this.id} disconnected from peer ${e.id}`),delete this.peers[e.id],this.maybeDisconnected()}),r.on("error",t=>{n(`${this.id} peer ${e.id} errored`,t),delete this.peers[e.id],this.maybeDisconnected(),this.emit("error",t)})}disconnect(){this.connecting=!1,Object.keys(this.peers).forEach(e=>{this.peers[e].destroy(),delete this.peers[e]}),this.signaller&&(this.signaller.disconnect(),this.signaller=null)}send(e,t,r){const n={protocol:e,command:t,payload:r};this.isConnected()?Object.keys(this.peers).forEach(e=>{const t=this.peers[e];t.connected&&t.send(JSON.stringify(n))}):this.buffer.push(n)}handleMessage(e){const t=JSON.parse(e);return this.recvMessage(t)}flush(){this.buffer.forEach(e=>{this.send(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){e.exports=function(e){function t(e){let r;function i(...e){if(!i.enabled)return;const n=i,o=Number(new Date),s=o-(r||o);n.diff=s,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];r=i.call(n,t),e.splice(a,1),a--}return r}),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=t.selectColor(e),i.destroy=n,i.extend=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function n(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){const e=t.instances[r];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(80),Object.keys(e).forEach(r=>{t[r]=e[r]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},function(e,t,r){(function(t){/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(4)("simple-peer"),o=r(201),i=r(202),s=r(203),a=r(212),c=r(213);function u(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class p extends s.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=i(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||i(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||p.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},p.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void a(()=>this.destroy(c(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{var r;!t.address||t.address.endsWith(".local")?(r="Ignoring unsupported ICE candidate.",console.warn(r)):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var r=this._senderMap.get(e)||new Map,n=r.get(t);if(n)throw n.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}replaceTrack(e,t,r){this._debug("replaceTrack()");var n=this._senderMap.get(e),o=n?n.get(r):null;if(!o)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null!=o.replaceTrack?o.replaceTrack(t):this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(c(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,r){if(this.destroyed)return r(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=u(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=u(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(r=>{var n=[];r.forEach(e=>{n.push(t(e))}),e(null,n)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(r=>{if(!this.destroyed){var n=[];r.result().forEach(e=>{var r={};e.names().forEach(t=>{r[t]=e.stat(t)}),r.id=e.id,r.type=e.type,r.timestamp=e.timestamp,n.push(t(r))}),e(null,n)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,r)=>{if(this.destroyed)return;t&&(r=[]);var n={},o={},i={},s=!1;r.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(n[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(i[e.id]=e)});const a=e=>{s=!0;var t=o[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var r=n[e.remoteCandidateId];r&&(r.ip||r.address)?(this.remoteAddress=r.ip||r.address,this.remotePort=Number(r.port)):r&&r.ipAddress?(this.remoteAddress=r.ipAddress,this.remotePort=Number(r.portNumber)):"string"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(":"),this.remoteAddress=r[0],this.remotePort=Number(r[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(i[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),s||Object.keys(i).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var u=this._cb;this._cb=null,u(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiate"),this.emit("negotiate"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],n.apply(null,e)}}p.WEBRTC_SUPPORT=!!o(),p.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},p.channelConfig={},e.exports=p}).call(this,r(14).Buffer)},function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,r){"use strict";(function(t,n){var o=r(81).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)i.getRandomValues(r.slice(s,s+65536));else i.getRandomValues(r);if("function"==typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(9),r(3))},function(e,t,r){(t=e.exports=r(82)).Stream=t,t.Readable=t,t.Writable=r(86),t.Duplex=r(24),t.Transform=r(88),t.PassThrough=r(210),t.finished=r(56),t.pipeline=r(211)},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(14).Buffer,a=r(206).inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,u;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,o=s.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,r=o,n=a,s.prototype.copy.call(t,r,n),a+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,r),u&&i(t,u),e}()},function(e,t){},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(9))},function(e,t,r){"use strict";(function(t){var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(56),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),p=Symbol("lastPromise"),l=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[p]=null,e[s]=null,e[a]=null,t(h(r,!1)))}}function m(e){t.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[c]?n(e[c]):r(h(void 0,!0))}))}));var n,o=this[p];if(o)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(h(void 0,!0)):t[l](r,n)}),n)}}(o,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(h(i,!1));n=new Promise(this[l])}return this[p]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(h(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(o(t={},d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:e._readableState.endEmitted,writable:!0}),o(t,l,{value:function(e,t){var n=r[d].read();n?(r[p]=null,r[s]=null,r[a]=null,e(h(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[p]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[p]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[p]=null,r[s]=null,r[a]=null,n(h(void 0,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this,r(3))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=o;var n=r(88);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(23)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var o=r(22).codes,i=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(56)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);a=!0,i()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new s("pipe"))}}function u(e){e()}function p(e,t){return e.pipe(t)}function l(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=l(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var s=t.map((function(e,r){var i=r<t.length-1;return c(e,i,r>0,(function(e){n||(n=e),e&&s.forEach(u),i||(s.forEach(u),o(n))}))}));return t.reduce(p)}},function(e,t){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind(globalThis):e=>(r||(r=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},function(e,t,r){"use strict";function n(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=void 0),null!=t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),n(new o,r)}}},function(e,t,r){"use strict";t.MediaStream=window.MediaStream,t.MediaStreamTrack=window.MediaStreamTrack,t.RTCDataChannel=window.RTCDataChannel,t.RTCDataChannelEvent=window.RTCDataChannelEvent,t.RTCDtlsTransport=window.RTCDtlsTransport,t.RTCIceCandidate=window.RTCIceCandidate,t.RTCIceTransport=window.RTCIceTransport,t.RTCPeerConnection=window.RTCPeerConnection,t.RTCPeerConnectionIceEvent=window.RTCPeerConnectionIceEvent,t.RTCRtpReceiver=window.RTCRtpReceiver,t.RTCRtpSender=window.RTCRtpSender,t.RTCRtpTransceiver=window.RTCRtpTransceiver,t.RTCSctpTransport=window.RTCSctpTransport,t.RTCSessionDescription=window.RTCSessionDescription,t.getUserMedia=window.getUserMedia,t.mediaDevices=navigator.mediaDevices},function(e,t){t.sendGraph=function(e,t,r,n){if((null!=e.properties.environment?e.properties.environment.type:void 0)&&!["all",t.definition.type].includes(e.properties.environment.type))return void r(new Error(`Graph type ${e.properties.environment.type} doesn't match runtime type ${t.definition.type}`));if(!t.canDo("protocol:graph"))return void r(new Error("Runtime doesn't support graph protocol"));const o=e.name||e.properties.id;t.sendGraph("clear",{id:o,name:e.name,main:n,library:e.properties.project,icon:e.properties.icon||"",description:e.properties.description||""}),e.nodes.forEach(e=>{t.sendGraph("addnode",{id:e.id,component:e.component,metadata:e.metadata,graph:o})}),e.edges.forEach(e=>{t.sendGraph("addedge",{src:{node:e.from.node,port:e.from.port},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})}),e.initializers.forEach(e=>{t.sendGraph("addinitial",{src:{data:e.from.data},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})}),e.inports&&Object.keys(e.inports).forEach(r=>{const n=e.inports[r];t.sendGraph("addinport",{public:r,node:n.process,port:n.port,graph:o})}),e.outports&&Object.keys(e.outports).forEach(r=>{const n=e.outports[r];t.sendGraph("addoutport",{public:r,node:n.process,port:n.port,graph:o})}),r()}},function(e,t,r){const{parse:n}=r(30);t.addressToProtocol=e=>{const t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=(e,t,r="Request timed out")=>Promise.race([new Promise(e),new Promise((e,n)=>{setTimeout(()=>{n(new Error(r))},t)})])},function(e,t,r){const n=r(57);function o(e,t,r=!0){return n.shared.capabilities.items._enumDescriptions.filter(n=>r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf(`${e}:${t}`):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf(`${e}:${t}`)).map(e=>e.name)}t.canSend=(e,t,r)=>{if("runtime"===e&&"getruntime"===t)return!0;const n=o(e,t,!0);return r.filter(e=>-1!==n.indexOf(e)).length>0},t.canReceive=(e,t,r)=>{if("runtime"===e&&"runtime"===t)return!0;const n=o(e,t,!1);return r.filter(e=>-1!==n.indexOf(e)).length>0}},function(e,t,r){const n=r(219),o=r(253),i=r(57),s=r(254);function a(){}e.exports=()=>{const e=new n({extendRefs:!0,schemaId:"id",logger:{log:a,warn:a,error:console.log}});return e.addMetaSchema(o),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(i).forEach(t=>{i[t].id=`/${t}/`,e.addSchema(i[t])}),e.addSchema(s),(t,r)=>new Promise((n,o)=>{const[i,s,a]=t.slice(1).split("/");if(!s)return e.validate(t,r)?void n(r):void o(new Error("Runtime definition "+e.errorsText()));const c=r;c.protocol=i,e.validate(t,c)?n(r):o("input"!==s?new Error(`Runtime sent invalid payload for ${i}:${a}: ${e.errorsText()}`):new Error(`Client sent invalid payload for ${i}:${a}: ${e.errorsText()}`))})}},function(e,t,r){"use strict";var n=r(220),o=r(58),i=r(224),s=r(90),a=r(91),c=r(225),u=r(226),p=r(247),l=r(25);e.exports=y,y.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},y.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},y.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return S(this,t=o.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},y.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},y.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return n},y.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var i=r.schema,a=r.root,c=r.baseId,u=n.call(e,i,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:i,root:a,baseId:c,validate:u}),u}}(this,e)}},y.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var i=this._getId(e);i&&(i=o.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},y.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},y.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",i=0;i<e.length;i++){var s=e[i];s&&(o+=n+s.dataPath+" "+s.message+r)}return o.slice(0,-r.length)},y.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,a=i?i(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var u=o.normalizeId(this._getId(e));u&&n&&S(this,u);var p,l=!1!==this._opts.validateSchema&&!t;l&&!(p=u&&u==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=o.ids.call(this,e),h=new s({id:u,schema:e,localRefs:d,cacheKey:a,meta:r});"#"!=u[0]&&n&&(this._refs[u]=h);this._cache.put(a,h),l&&p&&this.validateSchema(e,!0);return h},y.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},y.prototype.compileAsync=r(248);var d=r(249);y.prototype.addKeyword=d.add,y.prototype.getKeyword=d.get,y.prototype.removeKeyword=d.remove,y.prototype.validateKeyword=d.validate;var h=r(60);y.ValidationError=h.Validation,y.MissingRefError=h.MissingRef,y.$dataMetaSchema=p;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function y(e){if(!(this instanceof y))return new y(e);e=this._opts=l.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:k,warn:k,error:k};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function(e){switch(e.schemaId){case"auto":return x;case"id":return w;default:return E}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=l.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(252),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(97);e._opts.$data&&(n=p(n,g));e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function v(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function E(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function x(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function S(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function k(){}},function(e,t,r){"use strict";var n=r(58),o=r(25),i=r(60),s=r(91),a=r(92),c=o.ucs2length,u=r(59),p=i.Validation;function l(e,t,r){var n=h.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function d(e,t,r){var n=h.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function h(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function y(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,h,b){var w=this,E=this._opts,x=[void 0],S={},k=[],_={},P=[],C={},A=[];r=r||{schema:t,refVal:x,refs:S};var T=l.call(this,t,r,b),D=this._compilations[T.index];if(T.compiling)return D.callValidate=function e(){var t=D.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var O=this._formats,R=this.RULES;try{var N=j(t,r,h,b);D.validate=N;var I=D.callValidate;return I&&(I.schema=N.schema,I.errors=null,I.refs=N.refs,I.refVal=N.refVal,I.root=N.root,I.$async=N.$async,E.sourceCode&&(I.source=N.source)),N}finally{d.call(this,t,r,b)}function j(t,s,l,d){var h=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(w,t,s,l,d);var b,_=!0===t.$async,C=a({isTop:!0,schema:t,isRoot:h,baseId:d,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:R,validate:a,util:o,resolve:n,resolveRef:F,usePattern:G,useDefault:B,useCustomRule:U,opts:E,formats:O,logger:w.logger,self:w});C=v(x,g)+v(k,f)+v(P,m)+v(A,y)+C,E.processCode&&(C=E.processCode(C,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(w,R,O,r,x,P,A,u,c,p),x[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",C),e}return b.schema=t,b.errors=null,b.refs=S,b.refVal=x,b.root=h?b:s,_&&(b.$async=!0),!0===E.sourceCode&&(b.source={code:C,patterns:k,defaults:P}),b}function F(t,o,i){o=n.url(t,o);var s,a,c=S[o];if(void 0!==c)return L(s=x[c],a="refVal["+c+"]");if(!i&&r.refs){var u=r.refs[o];if(void 0!==u)return L(s=r.refVal[u],a=M(o,s))}a=M(o);var p=n.call(w,j,r,o);if(void 0===p){var l=h&&h[o];l&&(p=n.inlineRef(l,E.inlineRefs)?l:e.call(w,l,r,h,t))}if(void 0!==p)return function(e,t){var r=S[e];x[r]=t}(o,p),L(p,a);!function(e){delete S[e]}(o)}function M(e,t){var r=x.length;return x[r]=t,S[e]=r,"refVal"+r}function L(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function G(e){var t=_[e];return void 0===t&&(t=_[e]=k.length,k[t]=e),"pattern"+t}function B(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=C[t];return void 0===r&&(r=C[t]=P.length,P[r]=e),"default"+r}}function U(e,t,r,n){if(!1!==w._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var i=e.definition.validateSchema;if(i)if(!i(t)){var s="keyword schema is invalid: "+w.errorsText(i.errors);if("log"!=w._opts.validateSchema)throw new Error(s);w.logger.error(s)}}var a,c=e.definition.compile,u=e.definition.inline,p=e.definition.macro;if(c)a=c.call(w,t,r,n);else if(p)a=p.call(w,t,r,n),!1!==E.validateSchema&&w.validateSchema(a,!0);else if(u)a=u.call(w,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var l=A.length;return A[l]=a,{code:"customRule"+l,validate:a}}}},function(e,t,r){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){var n=t("[0-9]","[A-Fa-f]"),o=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",i),a=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),p=r(r(o+"|"+t(c,i,"[\\:]"))+"*"),l=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(l+"\\."+l+"\\."+l+"\\."+l),h=r(n+"{1,4}"),f=r(r(h+"\\:"+h)+"|"+d),m=r(r(h+"\\:")+"{6}"+f),g=r("\\:\\:"+r(h+"\\:")+"{5}"+f),y=r(r(h)+"?\\:\\:"+r(h+"\\:")+"{4}"+f),v=r(r(r(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+r(h+"\\:")+"{3}"+f),b=r(r(r(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+r(h+"\\:")+"{2}"+f),w=r(r(r(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),E=r(r(r(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),x=r(r(r(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),S=r(r(r(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),k=r([m,g,y,v,b,w,E,x,S].join("|")),_=r(r(c+"|"+o)+"+"),P=(r(k+"\\%25"+_),r(k+r("\\%25|\\%(?!"+n+"{2})")+_)),C=r("[vV]"+n+"+\\."+t(c,i,"[\\:]")+"+"),A=r("\\["+r(P+"|"+k+"|"+C)+"\\]"),T=r(r(o+"|"+t(c,i))+"*"),D=r(A+"|"+d+"(?!"+T+")|"+T),O=r("[0-9]*"),R=r(r(p+"@")+"?"+D+r("\\:"+O)+"?"),N=r(o+"|"+t(c,i,"[\\:\\@]")),I=r(N+"*"),j=r(N+"+"),F=r(r(o+"|"+t(c,i,"[\\@]"))+"+"),M=r(r("\\/"+I)+"*"),L=r("\\/"+r(j+M)+"?"),G=r(F+M),B=r(j+M),U="(?!"+N+")",q=(r(M+"|"+L+"|"+G+"|"+B+"|"+U),r(r(N+"|"+t("[\\/\\?]",a))+"*")),z=r(r(N+"|[\\/\\?]")+"*"),$=r(r("\\/\\/"+R+M)+"|"+L+"|"+B+"|"+U),H=r(u+"\\:"+$+r("\\?"+q)+"?"+r("\\#"+z)+"?"),V=r(r("\\/\\/"+R+M)+"|"+L+"|"+G+"|"+U),X=r(V+r("\\?"+q)+"?"+r("\\#"+z)+"?");return r(H+"|"+X),r(u+"\\:"+$+r("\\?"+q)+"?"),r(r("\\/\\/("+r("("+p+")@")+"?("+D+")"+r("\\:("+O+")")+"?)")+"?("+M+"|"+L+"|"+B+"|"+U+")"),r("\\?("+q+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+D+")"+r("\\:("+O+")")+"?)")+"?("+M+"|"+L+"|"+G+"|"+U+")"),r("\\?("+q+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+D+")"+r("\\:("+O+")")+"?)")+"?("+M+"|"+L+"|"+B+"|"+U+")"),r("\\?("+q+")"),r("\\#("+z+")"),r("("+p+")@"),r("\\:("+O+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,s),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+k+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+_+")")+"?\\]?$")}}var s=i(!1),a=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,p=/^xn--/,l=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function y(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(d,".")).split("."),t).join(".");return n+o}function v(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},E=function(e){var t,r=[],n=e.length,o=0,i=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var p=a>0?a+1:0;p<n;){for(var l=o,d=1,h=36;;h+=36){p>=n&&g("invalid-input");var m=(t=e.charCodeAt(p++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((u-o)/d))&&g("overflow"),o+=m*d;var y=h<=s?1:h>=s+26?26:h-s;if(m<y)break;var v=36-y;d>f(u/v)&&g("overflow"),d*=v}var b=r.length+1;s=w(o-l,b,0==l),f(o/b)>u-i&&g("overflow"),i+=f(o/b),o%=b,r.splice(o++,0,i)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=v(e)).length,n=128,o=0,i=72,s=!0,a=!1,c=void 0;try{for(var p,l=e[Symbol.iterator]();!(s=(p=l.next()).done);s=!0){var d=p.value;d<128&&t.push(m(d))}}catch(e){a=!0,c=e}finally{try{!s&&l.return&&l.return()}finally{if(a)throw c}}var h=t.length,y=h;for(h&&t.push("-");y<r;){var E=u,x=!0,S=!1,k=void 0;try{for(var _,P=e[Symbol.iterator]();!(x=(_=P.next()).done);x=!0){var C=_.value;C>=n&&C<E&&(E=C)}}catch(e){S=!0,k=e}finally{try{!x&&P.return&&P.return()}finally{if(S)throw k}}var A=y+1;E-n>f((u-o)/A)&&g("overflow"),o+=(E-n)*A,n=E;var T=!0,D=!1,O=void 0;try{for(var R,N=e[Symbol.iterator]();!(T=(R=N.next()).done);T=!0){var I=R.value;if(I<n&&++o>u&&g("overflow"),I==n){for(var j=o,F=36;;F+=36){var M=F<=i?1:F>=i+26?26:F-i;if(j<M)break;var L=j-M,G=36-M;t.push(m(b(M+L%G,0))),j=f(L/G)}t.push(m(b(j,0))),i=w(o,A,y==h),o=0,++y}}}catch(e){D=!0,O=e}finally{try{!T&&N.return&&N.return()}finally{if(D)throw O}}++o,++n}return t.join("")},S=function(e){return y(e,(function(e){return l.test(e)?"xn--"+x(e):e}))},k=function(e){return y(e,(function(e){return p.test(e)?E(e.slice(4).toLowerCase()):e}))},_={};function P(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function C(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var s=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function A(e,t){function r(e){var r=C(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,P).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,P).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,P).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,P).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,P).replace(t.PCT_ENCODED,o)),e}function T(e){return e.replace(/^0*(.*)/,"$1")||"0"}function D(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(T).join("."):e}function O(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),o=n[1],i=n[2];if(o){for(var s=o.toLowerCase().split("::").reverse(),a=c(s,2),u=a[0],p=a[1],l=p?p.split(":").map(T):[],d=u.split(":").map(T),h=t.IPV4ADDRESS.test(d[d.length-1]),f=h?7:8,m=d.length-f,g=Array(f),y=0;y<f;++y)g[y]=l[y]||d[m+y]||"";h&&(g[f-1]=D(g[f-1],t));var v=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=g.slice(0,v.index),E=g.slice(v.index+v.length);b=w.join(":")+"::"+E.join(":")}else b=g.join(":");return i&&(b+="%"+i),b}return e}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(R);if(o){N?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=O(D(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=_[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)A(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=S(r.host.replace(n.PCT_ENCODED,C).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}A(r,s)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function j(e,t){var r=!1!==t.iri?a:s,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(O(D(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var F=/^\.\.?\//,M=/^\/\.(\/|$)/,L=/^\/\.\.(\/|$)/,G=/^\/?(?:.|\n)*?(?=\/|$)/;function B(e){for(var t=[];e.length;)if(e.match(F))e=e.replace(F,"");else if(e.match(M))e=e.replace(M,"/");else if(e.match(L))e=e.replace(L,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(G);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:s,n=[],o=_[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?k(e.host):S(e.host.replace(r.PCT_ENCODED,C).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}A(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=j(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||o&&o.absolutePath||(c=B(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=I(U(e,r),r),t=I(U(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=B(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=B(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function z(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:s.PCT_ENCODED,C)}var $={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},H={scheme:"https",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize};function V(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var X={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=V(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(V(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=c(r,2),o=n[0],i=n[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},J={scheme:"wss",domainHost:X.domainHost,parse:X.parse,serialize:X.serialize},W={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",Q=r(r("%[EFef]"+K+"%"+K+K+"%"+K+K)+"|"+r("%[89A-Fa-f]"+K+"%"+K+K)+"|"+r("%"+K+K)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(Y,"g"),te=new RegExp(Q,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),ne=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ne;function ie(e){var t=C(e);return t.match(ee)?t:e}var se={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,i={},s=r.query.split("&"),a=0,c=s.length;a<c;++a){var u=s[a].split("=");switch(u[0]){case"to":for(var p=u[1].split(","),l=0,d=p.length;l<d;++l)n.push(p[l]);break;case"subject":r.subject=z(u[1],t);break;case"body":r.body=z(u[1],t);break;default:o=!0,i[z(u[0],t)]=z(u[1],t)}}o&&(r.headers=i)}r.query=void 0;for(var h=0,f=n.length;h<f;++h){var m=n[h].split("@");if(m[0]=z(m[0]),t.unicodeSupport)m[1]=z(m[1],t).toLowerCase();else try{m[1]=S(z(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=m.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var s=0,a=i.length;s<a;++s){var c=String(i[s]),u=c.lastIndexOf("@"),p=c.slice(0,u).replace(te,ie).replace(te,o).replace(re,P),l=c.slice(u+1);try{l=t.iri?k(l):S(z(l,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=p+"@"+l}n.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var f in d)d[f]!==W[f]&&h.push(f.replace(te,ie).replace(te,o).replace(ne,P)+"="+d[f].replace(te,ie).replace(te,o).replace(oe,P));return h.length&&(n.query=h.join("&")),n}},ae=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ae),n=e;if(r){var o=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),s=r[2],a=o+":"+(t.nid||i),c=_[a];n.nid=i,n.nss=s,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),i=_[o];i&&(e=i.serialize(e,t));var s=e,a=e.nss;return s.path=(n||t.nid)+":"+a,s}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,pe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};_[$.scheme]=$,_[H.scheme]=H,_[X.scheme]=X,_[J.scheme]=J,_[se.scheme]=se,_[ce.scheme]=ce,_[pe.scheme]=pe,e.SCHEMES=_,e.pctEncChar=P,e.pctDecChars=C,e.parse=I,e.removeDotSegments=B,e.serialize=U,e.resolveComponents=q,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return U(q(I(e,n),I(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=U(I(e,t),t):"object"===n(e)&&(e=I(U(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=U(I(e,r),r):"object"===n(e)&&(e=U(e,r)),"string"==typeof t?t=U(I(t,r),r):"object"===n(t)&&(t=U(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:s.ESCAPE,P)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,o,i,s,a,c,u,p,l){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var d in r(i,s,a,c,u,p,l),i){var h=i[d];if(Array.isArray(h)){if(d in n.arrayKeywords)for(var f=0;f<h.length;f++)e(t,r,o,h[f],s+"/"+d+"/"+f,a,s,d,i,f)}else if(d in n.propsKeywords){if(h&&"object"==typeof h)for(var m in h)e(t,r,o,h[m],s+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,d,i,m)}else(d in n.keywords||t.allKeys&&!(d in n.skipKeywords))&&e(t,r,o,h,s+"/"+d,a,s,d,i)}o(i,s,a,c,u,p,l)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(25),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,p=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function g(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[n])}function y(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],o=r[2],i=r[3],a=r[5];return(n<=23&&o<=59&&i<=59||23==n&&59==o&&60==i)&&(!t||a)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:p,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:l,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f},m.full={date:g,time:y,"date-time":function(e){var t=e.split(v);return 2==t.length&&g(t[0])&&y(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:p,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:l,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var v=/t|\s/i;var b=/\/|:/;var w=/[^\\]\\Z/;function E(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(227),o=r(25).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var o;if("object"==typeof r){var i=Object.keys(r)[0];o=r[i],r=i,o.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=o(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(228),allOf:r(229),anyOf:r(230),$comment:r(231),const:r(232),contains:r(233),dependencies:r(234),enum:r(235),format:r(236),if:r(237),items:r(238),maximum:r(93),minimum:r(93),maxItems:r(94),minItems:r(94),maxLength:r(95),minLength:r(95),maxProperties:r(96),minProperties:r(96),multipleOf:r(239),not:r(240),oneOf:r(241),pattern:r(242),properties:r(243),propertyNames:r(244),required:r(245),uniqueItems:r(246),validate:r(92)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(a||""),d="valid"+s;if("#"==c||"#/"==c)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),p&&(i+=" if (true) { ")}}else if(h.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=h.schema,g.schemaPath="",g.errSchemaPath=c,i+=" "+e.validate(g).replace(/validate\.schema/g,h.code)+" ",p&&(i+=" if ("+y+") { ")}else n=!0===h.$async||e.async&&!1!==h.$async,o=h.code}if(o){var v;(v=v||[]).push(i),i="",e.opts.passContext?i+=" "+o+".call(this, ":i+=" "+o+"( ",i+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(i+=" var "+d+"; "),i+=" try { await "+b+"; ",p&&(i+=" "+d+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(i+=" "+d+" = false; "),i+=" } ",p&&(i+=" if ("+d+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",p&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var p="valid"+c.level,l=c.baseId,d=!0,h=o;if(h)for(var f,m=-1,g=h.length-1;m<g;)f=h[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(d=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=s+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=l,a&&(n+=" if ("+p+") { ",u+="}"));return a&&(n+=d?" if (true) { ":" "+u.slice(0,-1)+" "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level;if(s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=h.baseId;n+=" var "+d+" = errors; var "+l+" = false;  ";var y=e.compositeRule;e.compositeRule=h.compositeRule=!0;var v=s;if(v)for(var b,w=-1,E=v.length-1;w<E;)b=v[w+=1],h.schema=b,h.schemaPath=a+"["+w+"]",h.errSchemaPath=c+"/"+w,n+="  "+e.validate(h)+" ",h.baseId=g,n+=" "+l+" = "+l+" || "+m+"; if (!"+l+") { ",f+="}";e.compositeRule=h.compositeRule=y,n+=" "+f+" if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else u&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; "),d||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+l+" = equal("+p+", schema"+o+"); if (!"+l+") {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level,m="i"+o,g=h.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+d+" = errors;var "+l+";",b){var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+p+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var E=p+"["+m+"]";h.dataPathArr[g]=m;var x=e.validate(h);h.baseId=v,e.util.varOccurences(x,y)<2?n+=" "+e.util.varReplace(x,y,E)+" ":n+=" var "+y+" = "+E+"; "+x+" ",n+=" if ("+f+") break; }  ",e.compositeRule=h.compositeRule=w,n+="  if (!"+f+") {"}else n+=" if ("+p+".length == 0) {";var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var k=n;return n=S.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m={},g={},y=e.opts.ownProperties;for(E in s)if("__proto__"!=E){var v=s[E],b=Array.isArray(v)?g:m;b[E]=v}n+="var "+l+" = errors;";var w=e.errorPath;for(var E in n+="var missing"+o+";",g)if((b=g[E]).length){if(n+=" if ( "+p+e.util.getProperty(E)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(E)+"') "),u){n+=" && ( ";var x=b;if(x)for(var S=-1,k=x.length-1;S<k;){D=x[S+=1],S&&(n+=" || "),n+=" ( ( "+(I=p+(N=e.util.getProperty(D)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(D)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?D:N)+") ) "}n+=")) {  ";var _="missing"+o,P="' + "+_+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,_,!0):w+" + "+_);var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var A=n;n=C.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var T=b;if(T)for(var D,O=-1,R=T.length-1;O<R;){D=T[O+=1];var N=e.util.getProperty(D),I=(P=e.util.escapeQuotes(D),p+N);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,D,e.opts.jsonPointers)),n+=" if ( "+I+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(D)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",u&&(h+="}",n+=" else { ")}e.errorPath=w;var j=d.baseId;for(var E in m){v=m[E];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+f+" = true; if ( "+p+e.util.getProperty(E)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(E)+"') "),n+=") { ",d.schema=v,d.schemaPath=a+e.util.getProperty(E),d.errSchemaPath=c+"/"+e.util.escapeFragment(E),n+="  "+e.validate(d)+" ",d.baseId=j,n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}"))}return u&&(n+="   "+h+" if ("+l+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="i"+o,f="schema"+o;d||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+l+";",d&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=l+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+p+", "+f+"["+h+"])) { "+l+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+l+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||"");if(!1===e.opts.format)return u&&(n+=" if (true) { "),n;var l,d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",l="schema"+o):l=s;var h=e.opts.unknownFormats,f=Array.isArray(h);if(d){n+=" var "+(m="format"+o)+" = formats["+l+"]; var "+(g="isObject"+o)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+o)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+o+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),n+=" (","ignore"!=h&&(n+=" ("+l+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+o+" ? await "+m+"("+p+") : "+m+"("+p+")) ":n+=" "+m+"("+p+") ",n+=" : "+m+".test("+p+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==h)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(n+=" if (true) { "),n;if(f&&h.indexOf(s)>=0)return u&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return u&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(s)+".validate")+"("+p+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(s);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+p+") ":" "+b+".test("+p+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=d?""+l:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+l+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var E=n;return n=w.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=h.baseId;if(y||v){var w;h.createErrors=!1,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+d+" = errors; var "+l+" = true;  ";var E=e.compositeRule;e.compositeRule=h.compositeRule=!0,n+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=E,y?(n+=" if ("+f+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+l+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'then'; ":w="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+l+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g="i"+o,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+d+" = errors;var "+l+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){n+=" "+l+" = "+p+".length <= "+s.length+"; ";var E=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+l+") {   ";var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var S=n;n=x.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=E,u&&(f+="}",n+=" else { ")}var k=s;if(k)for(var _,P=-1,C=k.length-1;P<C;)if(_=k[P+=1],e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all)){n+=" "+m+" = true; if ("+p+".length > "+P+") { ";var A=p+"["+P+"]";h.schema=_,h.schemaPath=a+"["+P+"]",h.errSchemaPath=c+"/"+P,h.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0),h.dataPathArr[y]=P;var T=e.validate(h);h.baseId=b,e.util.varOccurences(T,v)<2?n+=" "+e.util.varReplace(T,v,A)+" ":n+=" var "+v+" = "+A+"; "+T+" ",n+=" }  ",u&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))){h.schema=w,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+p+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+p+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";h.dataPathArr[y]=g;T=e.validate(h);h.baseId=b,e.util.varOccurences(T,v)<2?n+=" "+e.util.varReplace(T,v,A)+" ":n+=" var "+v+" = "+A+"; "+T+" ",u&&(n+=" if (!"+m+") break; "),n+=" } }  ",u&&(n+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+p+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";h.dataPathArr[y]=g;T=e.validate(h);h.baseId=b,e.util.varOccurences(T,v)<2?n+=" "+e.util.varReplace(T,v,A)+" ":n+=" var "+v+" = "+A+"; "+T+" ",u&&(n+=" if (!"+m+") break; "),n+=" }"}return u&&(n+=" "+f+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="var division"+i+";if (",d&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+i+" = "+l+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+i+" !== parseInt(division"+i+") ",o+=" ) ",d&&(o+="  )  "),o+=" ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c,n+=" var "+l+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+e.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),e.compositeRule=d.compositeRule=m,n+=" if ("+h+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g=h.baseId,y="prevValid"+o,v="passingSchemas"+o;n+="var "+d+" = errors , "+y+" = false , "+l+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var w=s;if(w)for(var E,x=-1,S=w.length-1;x<S;)E=w[x+=1],(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all))?(h.schema=E,h.schemaPath=a+"["+x+"]",h.errSchemaPath=c+"/"+x,n+="  "+e.validate(h)+" ",h.baseId=g):n+=" var "+m+" = true; ",x&&(n+=" if ("+m+" && "+y+") { "+l+" = false; "+v+" = ["+v+", "+x+"]; } else { ",f+="}"),n+=" if ("+m+") { "+l+" = "+y+" = true; "+v+" = "+x+"; }";return e.compositeRule=h.compositeRule=b,n+=f+"if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(d?"(new RegExp("+n+"))":e.usePattern(a))+".test("+l+") ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",o+=d?""+n:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=d?"' + "+n+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m="key"+o,g="idx"+o,y=d.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+o,w=Object.keys(s||{}).filter(N),E=e.schema.patternProperties||{},x=Object.keys(E).filter(N),S=e.schema.additionalProperties,k=w.length||x.length,_=!1===S,P="object"==typeof S&&Object.keys(S).length,C=e.opts.removeAdditional,A=_||P||C,T=e.opts.ownProperties,D=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var R=e.util.toHash(O);function N(e){return"__proto__"!==e}if(n+="var "+l+" = errors;var "+f+" = true;",T&&(n+=" var "+b+" = undefined;"),A){if(n+=T?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+p+") { ",k){if(n+=" var isAdditional"+o+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var I=w;if(I)for(var j=-1,F=I.length-1;j<F;)W=I[j+=1],n+=" || "+m+" == "+e.util.toQuotedString(W)+" "}if(x.length){var M=x;if(M)for(var L=-1,G=M.length-1;L<G;)ie=M[L+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==C)n+=" delete "+p+"["+m+"]; ";else{var B=e.errorPath,U="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),_)if(C)n+=" delete "+p+"["+m+"]; ";else{n+=" "+f+" = false; ";var q=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var z=n;n=re.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+z+"]); ":n+=" validate.errors = ["+z+"]; return false; ":n+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=q,u&&(n+=" break; ")}else if(P)if("failing"==C){n+=" var "+l+" = errors;  ";var $=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var H=p+"["+m+"]";d.dataPathArr[y]=m;var V=e.validate(d);d.baseId=D,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",n+=" if (!"+f+") { errors = "+l+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+m+"]; }  ",e.compositeRule=d.compositeRule=$}else{d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=p+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=D,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",u&&(n+=" if (!"+f+") break; ")}e.errorPath=B}k&&(n+=" } "),n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}")}var X=e.opts.useDefaults&&!e.compositeRule;if(w.length){var J=w;if(J)for(var W,Y=-1,K=J.length-1;Y<K;){var Q=s[W=J[Y+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){var Z=e.util.getProperty(W),ee=(H=p+Z,X&&void 0!==Q.default);d.schema=Q,d.schemaPath=a+Z,d.errSchemaPath=c+"/"+e.util.escapeFragment(W),d.errorPath=e.util.getPath(e.errorPath,W,e.opts.jsonPointers),d.dataPathArr[y]=e.util.toQuotedString(W);V=e.validate(d);if(d.baseId=D,e.util.varOccurences(V,v)<2){V=e.util.varReplace(V,v,H);var te=H}else{te=v;n+=" var "+v+" = "+H+"; "}if(ee)n+=" "+V+" ";else{if(R&&R[W]){n+=" if ( "+te+" === undefined ",T&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(W)+"') "),n+=") { "+f+" = false; ";B=e.errorPath,q=c;var re,ne=e.util.escapeQuotes(W);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,W,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";z=n;n=re.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+z+"]); ":n+=" validate.errors = ["+z+"]; return false; ":n+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=q,e.errorPath=B,n+=" } else { "}else u?(n+=" if ( "+te+" === undefined ",T&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(W)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+te+" !== undefined ",T&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(W)+"') "),n+=" ) { ");n+=" "+V+" } "}}u&&(n+=" if ("+f+") { ",h+="}")}}if(x.length){var oe=x;if(oe)for(var ie,se=-1,ae=oe.length-1;se<ae;){Q=E[ie=oe[se+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){d.schema=Q,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=T?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+p+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=p+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=D,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",u&&(n+=" if (!"+f+") break; "),n+=" } ",u&&(n+=" else "+f+" = true; "),n+=" }  ",u&&(n+=" if ("+f+") { ",h+="}")}}}return u&&(n+=" "+h+" if ("+l+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="errs__"+o,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(n+="var "+l+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c;var f="key"+o,m="idx"+o,g="i"+o,y="' + "+f+" + '",v="data"+(d.dataLevel=e.dataLevel+1),b="dataProperties"+o,w=e.opts.ownProperties,E=e.baseId;w&&(n+=" var "+b+" = undefined; "),n+=w?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+p+") { ",n+=" var startErrs"+o+" = errors; ";var x=f,S=e.compositeRule;e.compositeRule=d.compositeRule=!0;var k=e.validate(d);d.baseId=E,e.util.varOccurences(k,v)<2?n+=" "+e.util.varReplace(k,v,x)+" ":n+=" var "+v+" = "+x+"; "+k+" ",e.compositeRule=d.compositeRule=S,n+=" if (!"+h+") { for (var "+g+"=startErrs"+o+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),u&&(n+=" break; "),n+=" } }"}return u&&(n+="  if ("+l+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(i||""),l="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="schema"+o;if(!d)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=s;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=g)}}else f=s;if(d||f.length){var w=e.errorPath,E=d||f.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(u)if(n+=" var missing"+o+"; ",E){d||(n+=" var "+h+" = validate.schema"+a+"; ");var S="' + "+(T="schema"+o+"["+(P="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,T,e.opts.jsonPointers)),n+=" var "+l+" = true; ",d&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+h+".length; "+P+"++) { "+l+" = "+p+"["+h+"["+P+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+h+"["+P+"]) "),n+="; if (!"+l+") break; } ",d&&(n+="  }  "),n+="  if (!"+l+") {   ",(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var k=n;n=A.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var _=f;if(_)for(var P=-1,C=_.length-1;P<C;){O=_[P+=1],P&&(n+=" || "),n+=" ( ( "+(j=p+(I=e.util.getProperty(O)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:I)+") ) "}n+=") {  ";var A;S="' + "+(T="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,T,!0):w+" + "+T),(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";k=n;n=A.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(E){d||(n+=" var "+h+" = validate.schema"+a+"; ");var T;S="' + "+(T="schema"+o+"["+(P="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,T,e.opts.jsonPointers)),d&&(n+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+h+".length; "+P+"++) { if ("+p+"["+h+"["+P+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+h+"["+P+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var D=f;if(D)for(var O,R=-1,N=D.length-1;R<N;){O=D[R+=1];var I=e.util.getProperty(O),j=(S=e.util.escapeQuotes(O),p+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),n+=" if ( "+j+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else u&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,l="data"+(s||""),d="valid"+i,h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,(a||h)&&!1!==e.opts.uniqueItems){h&&(o+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),o+=" var i = "+l+".length , "+d+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+d+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+l+"[i]; ";var g="checkDataType"+(m?"s":"");o+=" if ("+e.util[g](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",h&&(o+="  }  "),o+=" if (!"+d+") {   ";var y=y||[];y.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,i=t[r].split("/"),s=e;for(o=1;o<i.length;o++)s=s[i[o]];for(o=0;o<n.length;o++){var a=n[o],c=s[a];c&&(s[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(60).MissingRef;e.exports=function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var s=a(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof n)return o(e);throw e}function o(n){var o=n.missingSchema;if(u(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];return s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(c,c),s.then((function(e){if(!u(o))return a(e).then((function(){u(o)||i.addSchema(e,o,void 0,r)}))})).then((function(){return e(t)}));function c(){delete i._loadingSchemas[o]}function u(e){return i._refs[e]||i._schemas[e]}}}(e)}));o&&s.then((function(e){o(null,e)}),o);return s;function a(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(250),i=r(251);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var s=0;s<i.length;s++)c(e,i[s],t);else c(e,i,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function c(e,t,n){for(var i,s=0;s<r.length;s++){var a=r[s];if(a.type==t){i=a;break}}i||(i={type:t,rules:[]},r.push(i));var c={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};i.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+s+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",o="schema"+s):o=c;var g,y,v,b,w,E="definition"+s,x=this.definition,S="";if(m&&x.$data){w="keywordValidate"+s;var k=x.validateSchema;i+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+u,w=b.code,g=x.compile,y=x.inline,v=x.macro}var _=w+".errors",P="i"+s,C="ruleErr"+s,A=x.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(i+=_+" = null;"),i+="var "+f+" = errors;var "+h+";",m&&x.$data&&(S+="}",i+=" if ("+o+" === undefined) { "+h+" = true; } else { ",k&&(S+="}",i+=" "+h+" = "+E+".validateSchema("+o+"); if ("+h+") { ")),y)x.statements?i+=" "+b.validate+" ":i+=" "+h+" = "+b.validate+"; ";else if(v){var T=e.util.copy(e);S="";T.level++;var D="valid"+T.level;T.schema=b.validate,T.schemaPath="";var O=e.compositeRule;e.compositeRule=T.compositeRule=!0;var R=e.validate(T).replace(/validate\.schema/g,w);e.compositeRule=T.compositeRule=O,i+=" "+R}else{(F=F||[]).push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",g||!1===x.schema?i+=" , "+d+" ":i+=" , "+o+" , "+d+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var N=a?"data"+(a-1||""):"parentData",I=a?e.dataPathArr[a]:"parentDataProperty",j=i+=" , "+N+" , "+I+" , rootData )  ";i=F.pop(),!1===x.errors?(i+=" "+h+" = ",A&&(i+="await "),i+=j+"; "):i+=A?" var "+(_="customErrors"+s)+" = null; try { "+h+" = await "+j+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+_+" = e.errors; else throw e; } ":" "+_+" = null; "+h+" = "+j+"; "}if(x.modifying&&(i+=" if ("+N+") "+d+" = "+N+"["+I+"];"),i+=""+S,x.valid)l&&(i+=" if (true) { ");else{var F;i+=" if ( ",void 0===x.valid?(i+=" !",i+=v?""+D:""+h):i+=" "+!x.valid+" ",i+=") { ",n=this.keyword,(F=F||[]).push(i),i="",(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var M=i;i=F.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=i;i=F.pop(),y?x.errors?"full"!=x.errors&&(i+="  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+C+".schema = "+o+"; "+C+".data = "+d+"; "),i+=" } "):!1===x.errors?i+=" "+L+" ":(i+=" if ("+f+" == errors) { "+L+" } else {  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+C+".schema = "+o+"; "+C+".data = "+d+"; "),i+=" } } "):v?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===x.errors?i+=" "+L+" ":(i+=" if (Array.isArray("+_+")) { if (vErrors === null) vErrors = "+_+"; else vErrors = vErrors.concat("+_+"); errors = vErrors.length;  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+C+" = vErrors["+P+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(i+=" "+C+".schema = "+o+"; "+C+".data = "+d+"; "),i+=" } } else { "+L+" } "),i+=" } ",l&&(i+=" else { ")}return i}},function(e,t,r){"use strict";var n=r(97);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},function(e){e.exports=JSON.parse('{"id":"/definition/","type":"object","properties":{"id":{"type":"string","format":"uuid"},"label":{"type":"string"},"address":{"type":"string"},"type":{"type":"string"},"protocol":{"type":"string"},"secret":{"type":"string"},"allCapabilities":{"$ref":"/shared/capabilities"},"capabilities":{"$ref":"/shared/capabilities"}},"required":["address"],"additionalProperties":true}')},function(e,t,r){const n=r(4)("fbp-client:observer"),o=r(4)("fbp-client:observer:ignored");function i(e,t){return"*"===t||e===t}function s(e,t){if("function"==typeof t)return t(e);return t.filter(t=>{const[r,n]=t.split(":");return i(e.protocol,r)&&i(e.command,n)}).length>0}function a(e){const t=`${e.protocol}:${e.command}`;let r=`Unexpected ${t} message`,n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);const o=new Error(r);return o.signature=t,n&&(o.stack=n),o}class c{constructor(e,t){this.client=e,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(t)}subscribe(e){this.listener=t=>{s(t,e)?(n(`Observed ${t.protocol}:${t.command}`),this.signals.push(t)):o(`${t.protocol}:${t.command}`)},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=e=>{this.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}unsubscribe(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}until(e,t){return new Promise((r,o)=>{if(this.protocolErrors.length){const e=this.protocolErrors[0];return n("Failed with protocol error "+e.message),e.signals=this.signals.slice(0),this.unsubscribe(),this.signals=[],void o(e)}for(let i=0;i<this.signals.length;i+=1){const c=this.signals[i];if(s(c,t)){const e=a(c);return n(`Failed with ${c.protocol}:${c.command}`),e.signals=this.signals.slice(0,i+1),this.unsubscribe(),this.signals=[],void o(e)}if(s(c,e)){n(`Succeeded with ${c.protocol}:${c.command}`);const e=this.signals.slice(0,i+1);return this.unsubscribe(),this.signals=[],void r(e)}}let i=null;const c=u=>{if(s(u,t)){n(`Failed with ${u.protocol}:${u.command}`);const e=a(u);return e.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],void o(e)}if(s(u,e)){n(`Succeeded with ${u.protocol}:${u.command}`);const e=this.signals.slice(0);this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],r(e)}};i=e=>{n("Failed with protocol error "+e.message);const t=e;t.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],o(t)},this.client.on("signal",c),this.client.options.skipValidation||this.client.on("protocolError",i)})}}e.exports=(e,t)=>new c(e,t)},function(e,t,r){const n=r(4)("fbp-client:adapter:signal"),o=r(4)("fbp-client:adapter:request"),i=r(4)("fbp-client:adapter:response");class s{constructor(e,t){this.client=e,this.commands=[],this.listener=null,this.version=t,this.subscribe(),this.tick()}subscribe(){this.client.transport.on("message",e=>{this.listener?this.listener(e):(n(`${e.protocol}:${e.command}`),this.client.validate(`/${e.protocol}/output/${e.command}`,e).then(()=>this.client.canReceive(e.protocol,e.command)).then(()=>this.client.signal(e),e=>this.client.protocolError(e)))}),this.client.transport.on("status",({online:e})=>{e&&this.tick()})}send(e,t,r){return new Promise((s,a)=>{const c=[];this.commands.push(()=>{let u=null;this.listener=r=>{this.client.validate(`/${r.protocol}/output/${r.command}`,r).then(()=>this.client.canReceive(r.protocol,r.command)).then(()=>{if(!(r=>{if(r.protocol!==e)return!1;const n=[];switch(`${e}:${t}`){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)})(r))return n(`${r.protocol}:${r.command}`),void this.client.signal(r);if(u&&(clearTimeout(u),u=null),i(`${r.protocol}:${r.command} for request ${e}:${t}`),"error"===r.command){const e=new Error(r.payload.message);return e.stack=r.payload.stack,this.listener=null,a(e),void this.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(this.listener=null,s(c),void this.tick()):void c.push(r.payload);this.listener=null,s(r.payload),this.tick()},e=>{this.listener=null,a(e),this.tick()})},o(`${e}:${t}`),this.client.transport.send(e,t,r),"component"!==e&&(u="runtime"===e&&"packet"===t&&this.version<=.6?setTimeout(()=>{this.listener=null,s(r),this.tick()},10):setTimeout(()=>{this.listener=null,a(new Error(`${e}:${t} timed out`)),this.tick()},this.client.options.commandTimeout))}),this.tick()})}tick(){if(!this.commands.length)return;if(!this.client.isConnected())return;if(this.listener)return;this.commands.shift()()}}e.exports=(e,t)=>new s(e,t)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(258),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(9))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,s,a,c=1,u={},p=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return u[c]=o,n(c),c++},d.clearImmediate=h}function h(e){delete u[e]}function f(e){if(p)setTimeout(f,0,e);else{var t=u[e];if(t){p=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),p=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(9),r(3))},function(e,t,r){const n=r(260),o=r(4)("fbp-spec:protocol"),i=r(61),s=r(41);t.sendGraph=function(e,r,a){if(!r)return void a(new Error("Graph not defined"));let c=r.name||r.properties.id;c||(c="fixture."+s.randomString(10));r.name=c,r instanceof n.Graph?(o("sendgraph",c),i.resolve().then(()=>e.protocol.graph.send(r,!1)).then(()=>c).nodeify(a)):n.graph.loadJSON(r,(r,n)=>{r?a(r):t.sendGraph(e,n,a)})},t.startNetwork=function(e,t,r){o("startnetwork",t),i.resolve().then(()=>e.protocol.network.start({graph:t})).nodeify(r)},t.stopNetwork=function(e,t,r){o("stopnetwork",t),i.resolve().then(()=>e.protocol.network.stop({graph:t})).nodeify(r)},t.sendPackets=function(e,t,r,n){o("sendpackets",t,r),i.all(Object.keys(r).map(n=>e.protocol.runtime.packet({event:"data",port:n,payload:r[n],graph:t}))).nodeify(n)},t.getComponents=function(e,t){o("get components"),i.resolve().then(()=>e.protocol.component.list()).then(e=>{const t={};return e.forEach(e=>{t[e.name]=e}),t}).nodeify(t)},t.getCapabilities=function(e,t){const r=e.definition;r&&r.capabilities&&r.capabilities.length?t(null,r.capabilities):i.resolve().then(()=>e.protocol.runtime.getruntime()).then(e=>e.capabilities).nodeify(t)},t.getComponentTests=function(e,t){o("get component tests"),i.resolve().then(()=>e.protocol.component.list()).then(t=>i.all(t.map(t=>e.protocol.component.getsource({name:t.name}).then(e=>e,()=>({tests:null}))))).then(e=>{const t={};return e.forEach(e=>{if(!e.tests)return;const r=e.library?`${e.library}/${e.name}`:e.name;t[r]=e.tests}),t}).nodeify(t)}},function(e,t,r){t.graph=r(261),t.Graph=t.graph.Graph,t.journal=r(263),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,l,d,h,f,m,g=r(5);p=g.EventEmitter,d=r(15),f=r(262),l=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,u=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=u.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_,P;if(v=this.getNode(e)){for(this.checkTransactionStart(),P=[],n=0,u=(E=this.edges).length;n<u;n++)(t=E[n]).from.node!==v.id&&t.to.node!==v.id||P.push(t);for(s=0,p=P.length;s<p;s++)t=P[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(P=[],a=0,l=(x=this.initializers).length;a<l;a++)(i=x[a]).to.node===v.id&&P.push(i);for(c=0,d=P.length;c<d;c++)i=P[c],this.removeInitial(i.to.node,i.to.port);for(w in P=[],S=this.inports)S[w].process===e&&P.push(w);for(g=0,h=P.length;g<h;g++)w=P[g],this.removeInport(w);for(w in P=[],k=this.outports)k[w].process===e&&P.push(w);for(y=0,f=P.length;y<f;y++)w=P[y],this.removeOutport(w);for(b=0,m=(_=this.groups).length;b<m;b++)(r=_[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,u=(m=this.edges).length;o<u;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,l=(b=this.groups).length;c<l;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,u,p,l,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,u=(d=this.edges).length;i<u;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,l=(m=this.initializers).length;c<l;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(u=0,d=(g=this.edges).length;u<d;u++)o=g[u],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)_=v[g],a.properties[g]=_;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(E=this.groups).length;o<p;o++)n={name:(r=E[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,l=(x=this.nodes).length;s<l;s++)f=x[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(S=this.edges).length;c<d;c++)e={src:{process:(t=S[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(u=0,h=(k=this.initializers).length;u<h;u++)i=k[u],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(6).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=l,t.createGraph=function(e,t){return new l(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,u,p,d,h,f,m,g,y,v,b,w,E,x,S,k,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(g in(i="string"==typeof e?JSON.parse(e):JSON.parse(JSON.stringify(e))).properties||(i.properties={}),i.processes||(i.processes={}),i.connections||(i.connections=[]),r=i.caseSensitive||!1,(s=new l(i.properties.name,{caseSensitive:r})).startTransaction("loadJSON",_),m={},v=i.properties)k=v[g],"name"!==g&&(m[g]=k);for(u in s.setProperties(m),b=i.processes)(o=b[u]).metadata||(o.metadata={}),s.addNode(u,o.component,o.metadata);for(c=0,d=(w=i.connections).length;c<d;c++)_=(n=w[c]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?s.addEdge(n.src.process,s.getPortName(n.src.port),n.tgt.process,s.getPortName(n.tgt.port),_):s.addEdgeIndex(n.src.process,s.getPortName(n.src.port),n.src.index,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,_):"number"==typeof n.tgt.index?s.addInitialIndex(n.data,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,_):s.addInitial(n.data,n.tgt.process,s.getPortName(n.tgt.port),_);if(i.inports)for(y in E=i.inports)f=E[y],s.addInport(y,f.process,s.getPortName(f.port),f.metadata);if(i.outports)for(y in x=i.outports)f=x[y],s.addOutport(y,f.process,s.getPortName(f.port),f.metadata);if(i.groups)for(p=0,h=(S=i.groups).length;p<h;p++)a=S[p],s.addGroup(a.name,a.nodes,a.metadata||{});return s.endTransaction("loadJSON"),t(null,s)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(29).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(6).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,u,p,l,h,f,m,g,y,v,b,w,E;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,u=(v=d(e.initializers).reverse()).length;i<u;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(E=[],a=0,l=(w=d(e.nodes).reverse()).length;a<l;a++)h=w[a],E.push(e.removeNode(h.id));return E},h=function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,g,y,v,b,w,E,x,S;for(m(e),o=0,u=(y=t.nodes).length;o<u;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,l=(b=t.initializers).length;a<l;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in E=t.outports)f=E[g],e.addOutport(g,f.process,f.port,f.metadata);for(S=[],c=0,d=(x=t.groups).length;c<d;c++)n=x[c],S.push(e.addGroup(n.name,n.nodes,n.metadata));return S},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(3))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,E=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},x=r(5);f=x.EventEmitter,b=r(15),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,u,p,l,h,f,m,g,v,b,w,E,x,S,k,_,P,C,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(x=s.graph.nodes).length;p<f;p++)E=x[p],s.appendCommand("addNode",E);for(h=0,m=(S=s.graph.edges).length;h<m;h++)a=S[h],s.appendCommand("addEdge",a);for(b=0,g=(k=s.graph.initializers).length;b<g;b++)u=k[b],s.appendCommand("addInitial",u);for(l in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),_=s.graph.inports)A=_[l],s.appendCommand("addInport",{name:l,port:A});for(l in P=s.graph.outports)A=P[l],s.appendCommand("addOutport",{name:l,port:A});for(w=0,v=(C=s.graph.groups).length;w<v;w++)c=C[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(E(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(E(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(u)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(u=a=this.currentRevision,h=e+1;a>=h;u=a+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(a=[],c=o=u=e|=0,p=t|=this.store.lastRevision;u<=p?o<p:o>p;c=u<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,u;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(u=this.store.fetchTransaction(a)).length;i<s;i++)n=u[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(6).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t,r){r(265),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return f})),r.d(t,"Request",(function(){return E})),r.d(t,"Response",(function(){return S})),r.d(t,"DOMException",(function(){return _})),r.d(t,"fetch",(function(){return P}));var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||p(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var e,t,r,n=m(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=g(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=l(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[l(e)]},f.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},f.prototype.set=function(e,t){this.map[l(e)]=d(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];S.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var _=n.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function P(e,t){return new Promise((function(r,o){var i=new E(e,t);if(i.signal&&i.signal.aborted)return o(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){r(new S(o,n))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new _("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":c&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof f?i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,d(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",u)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}P.polyfill=!0,n.fetch||(n.fetch=P,n.Headers=f,n.Request=E,n.Response=S)},function(e){e.exports=JSON.parse('{"id":"base.json","$schema":"http://json-schema.org/draft-04/schema","title":"Base definitions","definitions":{"JsonPath":{"type":"string","description":"JsonPath, see http://goessner.net/articles/JsonPath/","format":"jsonpath","example":"products.book[2]"}}}')},function(e){e.exports=JSON.parse('{"id":"testcase.json","$schema":"http://json-schema.org/draft-04/schema","title":"Testcase","description":"A single test case","type":"object","properties":{"name":{"type":"string","description":"Name of this testcase/scenario"},"assertion":{"type":"string","description":"Description of what this testcase asserts"},"inputs":{"description":"The inputs send to the fixture input ports, or a sequence of such inputs","oneOf":[{"type":"object"},{"type":"array","items":{"type":"object"}}]},"expect":{"description":"Expected data on fixture output ports.\\nCan either be an object, or a sequence of such objects.\\n","oneOf":[{"$ref":"outputdata.json"},{"type":"array","items":[{"$ref":"outputdata.json"}]}]},"timeout":{"type":"number","description":"Timeout (in milliseconds). Overrides that set in the suite","default":2000},"skip":{"type":"string","description":"Flag to skip testcase.\\nShould be a description of the reason for skipping.\\n"}},"required":["name","assertion","inputs","expect"]}')},function(e){e.exports=JSON.parse('{"id":"testsuite.json","$schema":"http://json-schema.org/draft-04/schema","title":"Test suite","description":"A collection of test cases","type":["object"],"properties":{"topic":{"type":"string","description":"The component/graph under test","example":"MyComponent3"},"name":{"type":"string","description":"Name of this test suite. Topic is used if no name is provided.","default":""},"fixture":{"type":"object","description":"The graph fixture to run for each test case"},"cases":{"type":"array","description":"The test cases","items":{"$ref":"testcase.json"},"default":[]},"timeout":{"type":"number","description":"Timeout (in milliseconds) for setup and default for each test case.","default":2000},"skip":{"type":"string","description":"Flag to skip test suite (and all containing test cases).\\nShould be a description of the reason for skipping.\\n"}},"required":["topic"]}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"TestSuite list","description":"Array of TestSuite","type":"array","items":{"$ref":"testsuite.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"Expectation list","description":"Array of Expectation","type":"array","items":{"$ref":"expectation.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsfile.json","$schema":"http://json-schema.org/draft-04/schema","title":"Tests file","description":"One or more suites","oneOf":[{"$ref":"testsuites.json"},{"$ref":"testsuite.json"}]}')},function(e,t,r){"use strict";var n=r(273),o=r(292);function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=r(7),e.exports.Schema=r(27),e.exports.FAILSAFE_SCHEMA=r(63),e.exports.JSON_SCHEMA=r(101),e.exports.CORE_SCHEMA=r(100),e.exports.DEFAULT_SAFE_SCHEMA=r(33),e.exports.DEFAULT_FULL_SCHEMA=r(42),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=r(32),e.exports.MINIMAL_SCHEMA=r(63),e.exports.SAFE_SCHEMA=r(33),e.exports.DEFAULT_SCHEMA=r(42),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},function(e,t,r){"use strict";var n=r(26),o=r(32),i=r(274),s=r(33),a=r(42),c=Object.prototype.hasOwnProperty,u=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,l=/[,\[\]\{\}]/,d=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function f(e){return Object.prototype.toString.call(e)}function m(e){return 10===e||13===e}function g(e){return 9===e||32===e}function y(e){return 9===e||32===e||10===e||13===e}function v(e){return 44===e||91===e||93===e||123===e||125===e}function b(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function w(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function E(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var x=new Array(256),S=new Array(256),k=0;k<256;k++)x[k]=w(k)?1:0,S[k]=w(k);function _(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||a,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function P(e,t){return new o(t,new i(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function C(e,t){throw P(e,t)}function A(e,t){e.onWarning&&e.onWarning.call(null,P(e,t))}var T={YAML:function(e,t,r){var n,o,i;null!==e.version&&C(e,"duplication of %YAML directive"),1!==r.length&&C(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&C(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),i=parseInt(n[2],10),1!==o&&C(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&A(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&C(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],d.test(n)||C(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,n)&&C(e,'there is a previously declared suffix for "'+n+'" tag handle'),h.test(o)||C(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function D(e,t,r,n){var o,i,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,i=a.length;o<i;o+=1)9===(s=a.charCodeAt(o))||32<=s&&s<=1114111||C(e,"expected valid JSON character");else u.test(a)&&C(e,"the stream contains non-printable characters");e.result+=a}}function O(e,t,r,o){var i,s,a,u;for(n.isObject(r)||C(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,u=(i=Object.keys(r)).length;a<u;a+=1)s=i[a],c.call(t,s)||(t[s]=r[s],o[s]=!0)}function R(e,t,r,n,o,i,s,a){var u,p;if(Array.isArray(o))for(u=0,p=(o=Array.prototype.slice.call(o)).length;u<p;u+=1)Array.isArray(o[u])&&C(e,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===f(o[u])&&(o[u]="[object Object]");if("object"==typeof o&&"[object Object]"===f(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(i))for(u=0,p=i.length;u<p;u+=1)O(e,t,i[u],r);else O(e,t,i,r);else e.json||c.call(r,o)||!c.call(t,o)||(e.line=s||e.line,e.position=a||e.position,C(e,"duplicated mapping key")),t[o]=i,delete r[o];return t}function N(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):C(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function I(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!m(o))break;for(N(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&A(e,"deficient indentation"),n}function j(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!y(t)))}function F(e,t){1===t?e.result+=" ":t>1&&(e.result+=n.repeat("\n",t-1))}function M(e,t){var r,n,o=e.tag,i=e.anchor,s=[],a=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);0!==n&&45===n&&y(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,I(e,!0,-1)&&e.lineIndent<=t)s.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,B(e,t,3,!1,!0),s.push(e.result),I(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)C(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=o,e.anchor=i,e.kind="sequence",e.result=s,!0)}function L(e){var t,r,n,o,i=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&C(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(i=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):C(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!y(o);)33===o&&(s?C(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),d.test(r)||C(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),l.test(n)&&C(e,"tag suffix cannot contain flow indicator characters")}return n&&!h.test(n)&&C(e,"tag name cannot contain such characters: "+n),i?e.tag=n:c.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:C(e,'undeclared tag handle "'+r+'"'),!0}function G(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&C(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!y(r)&&!v(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&C(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function B(e,t,r,o,i){var s,a,u,p,l,d,h,f,w=1,k=!1,_=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=u=4===r||3===r,o&&I(e,!0,-1)&&(k=!0,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)),1===w)for(;L(e)||G(e);)I(e,!0,-1)?(k=!0,u=s,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)):u=!1;if(u&&(u=k||i),1!==w&&4!==r||(h=1===r||2===r?t:t+1,f=e.position-e.lineStart,1===w?u&&(M(e,f)||function(e,t,r){var n,o,i,s,a,c=e.tag,u=e.anchor,p={},l={},d=null,h=null,f=null,m=!1,v=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),a=e.input.charCodeAt(e.position);0!==a;){if(n=e.input.charCodeAt(e.position+1),i=e.line,s=e.position,63!==a&&58!==a||!y(n)){if(!B(e,r,2,!1,!0))break;if(e.line===i){for(a=e.input.charCodeAt(e.position);g(a);)a=e.input.charCodeAt(++e.position);if(58===a)y(a=e.input.charCodeAt(++e.position))||C(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(R(e,p,l,d,h,null),d=h=f=null),v=!0,m=!1,o=!1,d=e.tag,h=e.result;else{if(!v)return e.tag=c,e.anchor=u,!0;C(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=c,e.anchor=u,!0;C(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(m&&(R(e,p,l,d,h,null),d=h=f=null),v=!0,m=!0,o=!0):m?(m=!1,o=!0):C(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,a=n;if((e.line===i||e.lineIndent>t)&&(B(e,t,4,!0,o)&&(m?h=e.result:f=e.result),m||(R(e,p,l,d,h,f,i,s),d=h=f=null),I(e,!0,-1),a=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==a)C(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&R(e,p,l,d,h,null),v&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=p),v}(e,f,h))||function(e,t){var r,n,o,i,s,a,c,u,p,l,d=!0,h=e.tag,f=e.anchor,m={};if(91===(l=e.input.charCodeAt(e.position)))o=93,a=!1,n=[];else{if(123!==l)return!1;o=125,a=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),l=e.input.charCodeAt(++e.position);0!==l;){if(I(e,!0,t),(l=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=f,e.kind=a?"mapping":"sequence",e.result=n,!0;d||C(e,"missed comma between flow collection entries"),p=null,i=s=!1,63===l&&y(e.input.charCodeAt(e.position+1))&&(i=s=!0,e.position++,I(e,!0,t)),r=e.line,B(e,t,1,!1,!0),u=e.tag,c=e.result,I(e,!0,t),l=e.input.charCodeAt(e.position),!s&&e.line!==r||58!==l||(i=!0,l=e.input.charCodeAt(++e.position),I(e,!0,t),B(e,t,1,!1,!0),p=e.result),a?R(e,n,m,u,c,p):i?n.push(R(e,null,m,u,c,p)):n.push(c),I(e,!0,t),44===(l=e.input.charCodeAt(e.position))?(d=!0,l=e.input.charCodeAt(++e.position)):d=!1}C(e,"unexpected end of the stream within a flow collection")}(e,h)?_=!0:(a&&function(e,t){var r,o,i,s,a,c=1,u=!1,p=!1,l=t,d=0,h=!1;if(124===(s=e.input.charCodeAt(e.position)))o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)1===c?c=43===s?3:2:C(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=s)&&a<=57?a-48:-1)>=0))break;0===i?C(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?C(e,"repeat of an indentation width identifier"):(l=t+i-1,p=!0)}if(g(s)){do{s=e.input.charCodeAt(++e.position)}while(g(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!m(s)&&0!==s)}for(;0!==s;){for(N(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!p||e.lineIndent<l)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!p&&e.lineIndent>l&&(l=e.lineIndent),m(s))d++;else{if(e.lineIndent<l){3===c?e.result+=n.repeat("\n",u?1+d:d):1===c&&u&&(e.result+="\n");break}for(o?g(s)?(h=!0,e.result+=n.repeat("\n",u?1+d:d)):h?(h=!1,e.result+=n.repeat("\n",d+1)):0===d?u&&(e.result+=" "):e.result+=n.repeat("\n",d):e.result+=n.repeat("\n",u?1+d:d),u=!0,p=!0,d=0,r=e.position;!m(s)&&0!==s;)s=e.input.charCodeAt(++e.position);D(e,r,e.position,!1)}}return!0}(e,h)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(D(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else m(r)?(D(e,n,o,!0),F(e,I(e,!1,t)),n=o=e.position):e.position===e.lineStart&&j(e)?C(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);C(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var r,n,o,i,s,a,c;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return D(e,r,e.position,!0),e.position++,!0;if(92===a){if(D(e,r,e.position,!0),m(a=e.input.charCodeAt(++e.position)))I(e,!1,t);else if(a<256&&x[a])e.result+=S[a],e.position++;else if((s=120===(c=a)?2:117===c?4:85===c?8:0)>0){for(o=s,i=0;o>0;o--)(s=b(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+s:C(e,"expected hexadecimal character");e.result+=E(i),e.position++}else C(e,"unknown escape sequence");r=n=e.position}else m(a)?(D(e,r,n,!0),F(e,I(e,!1,t)),r=n=e.position):e.position===e.lineStart&&j(e)?C(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}C(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?_=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!y(n)&&!v(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&C(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||C(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],I(e,!0,-1),!0}(e)?function(e,t,r){var n,o,i,s,a,c,u,p,l=e.kind,d=e.result;if(y(p=e.input.charCodeAt(e.position))||v(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p)return!1;if((63===p||45===p)&&(y(n=e.input.charCodeAt(e.position+1))||r&&v(n)))return!1;for(e.kind="scalar",e.result="",o=i=e.position,s=!1;0!==p;){if(58===p){if(y(n=e.input.charCodeAt(e.position+1))||r&&v(n))break}else if(35===p){if(y(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&j(e)||r&&v(p))break;if(m(p)){if(a=e.line,c=e.lineStart,u=e.lineIndent,I(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=c,e.lineIndent=u;break}}s&&(D(e,o,i,!1),F(e,e.line-a),o=i=e.position,s=!1),g(p)||(i=e.position+1),p=e.input.charCodeAt(++e.position)}return D(e,o,i,!1),!!e.result||(e.kind=l,e.result=d,!1)}(e,h,1===r)&&(_=!0,null===e.tag&&(e.tag="?")):(_=!0,null===e.tag&&null===e.anchor||C(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===w&&(_=u&&M(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&C(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,l=e.implicitTypes.length;p<l;p+=1)if((d=e.implicitTypes[p]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else c.call(e.typeMap[e.kind||"fallback"],e.tag)?(d=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&d.kind!==e.kind&&C(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result)?(e.result=d.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):C(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):C(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||_}function U(e){var t,r,n,o,i=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(I(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&C(e,"directive name must not be less than one character in length");0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!m(o));break}if(m(o))break;for(t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&N(e),c.call(T,r)?T[r](e,r,n):A(e,'unknown document directive "'+r+'"')}I(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,I(e,!0,-1)):s&&C(e,"directives end mark is expected"),B(e,e.lineIndent-1,4,!1,!0),I(e,!0,-1),e.checkLineBreaks&&p.test(e.input.slice(i,e.position))&&A(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&j(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,I(e,!0,-1)):e.position<e.length-1&&C(e,"end of the stream or a document separator is expected")}function q(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new _(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,C(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)U(r);return r.documents}function z(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=q(e,r);if("function"!=typeof t)return n;for(var o=0,i=n.length;o<i;o+=1)t(n[o])}function $(e,t){var r=q(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new o("expected a single document in the stream, but found more")}}e.exports.loadAll=z,e.exports.load=$,e.exports.safeLoadAll=function(e,t,r){return"object"==typeof t&&null!==t&&void 0===r&&(r=t,t=null),z(e,t,n.extend({schema:s},r))},e.exports.safeLoad=function(e,t){return $(e,n.extend({schema:s},t))}},function(e,t,r){"use strict";var n=r(26);function o(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}o.prototype.getSnippet=function(e,t){var r,o,i,s,a;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",o=this.position;o>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o-1));)if(o-=1,this.position-o>t/2-1){r=" ... ",o+=5;break}for(i="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){i=" ... ",s-=5;break}return a=this.buffer.slice(o,s),n.repeat(" ",e)+r+a+i+"\n"+n.repeat(" ",e+this.position-o+r.length)+"^"},o.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},e.exports=o},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(26),o=r(7);function i(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,a=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;a=!0}return a&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!i(e.charCodeAt(o)))return!1;a=!0}return a&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!s(e.charCodeAt(o)))return!1;a=!0}return!(!a||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,i=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){i.unshift(parseInt(e,10))})),n=0,r=1,i.forEach((function(e){n+=e*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,r){"use strict";var n=r(26),o=r(7),i=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var s=/^[-+]?[0-9]+e/;e.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!i.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){o.unshift(parseFloat(e,10))})),t=0,n=1,o.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(e))return"-0.0";return r=e.toString(10),s.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(7),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==o.exec(e)||null!==i.exec(e))},construct:function(e){var t,r,n,s,a,c,u,p,l=0,d=null;if(null===(t=o.exec(e))&&(t=i.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(a=+t[4],c=+t[5],u=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),p=new Date(Date.UTC(r,n,s,a,c,u,l)),d&&p.setTime(p.getTime()-d),p},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,r){"use strict";var n;try{n=r(14).Buffer}catch(e){}var o=r(7),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,s=i;for(r=0;r<o;r++)if(!((t=s.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,o=e.replace(/[\r\n=]/g,""),s=o.length,a=i,c=0,u=[];for(t=0;t<s;t++)t%4==0&&t&&(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)),c=c<<6|a.indexOf(o.charAt(t));return 0===(r=s%4*6)?(u.push(c>>16&255),u.push(c>>8&255),u.push(255&c)):18===r?(u.push(c>>10&255),u.push(c>>2&255)):12===r&&u.push(c>>4&255),n?n.from?n.from(u):new n(u):u},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n="",o=0,s=e.length,a=i;for(t=0;t<s;t++)t%3==0&&t&&(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]),o=(o<<8)+e[t];return 0===(r=s%3)?(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]):2===r?(n+=a[o>>10&63],n+=a[o>>4&63],n+=a[o<<2&63],n+=a[64]):1===r&&(n+=a[o>>2&63],n+=a[o<<4&63],n+=a[64],n+=a[64]),n}})},function(e,t,r){"use strict";var n=r(7),o=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,s,a,c=[],u=e;for(t=0,r=u.length;t<r;t+=1){if(n=u[t],a=!1,"[object Object]"!==i.call(n))return!1;for(s in n)if(o.call(n,s)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==c.indexOf(s))return!1;c.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(7),o=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,s,a=e;for(s=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(n=a[t],"[object Object]"!==o.call(n))return!1;if(1!==(i=Object.keys(n)).length)return!1;s[t]=[i[0],n[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}})},function(e,t,r){"use strict";var n=r(7),o=Object.prototype.hasOwnProperty;e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(o.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,r){"use strict";var n=r(7);e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,r){"use strict";var n;try{n=r(291)}catch(e){"undefined"!=typeof window&&(n=window.esprima)}var o=r(7);e.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=n.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,r="("+e+")",o=n.parse(r,{range:!0}),i=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?new Function(i,r.slice(t[0]+1,t[1]-1)):new Function(i,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(8),s=r(15);function a(e,t,r){var s=null,a=function(e,t){r&&r(e,t),s&&s.visit(e,t)},c="function"==typeof r?a:null,u=!1;if(t){u="boolean"==typeof t.comment&&t.comment;var p="boolean"==typeof t.attachComment&&t.attachComment;(u||p)&&((s=new n.CommentHandler).attach=p,t.comment=!0,c=a)}var l,d=!1;t&&"string"==typeof t.sourceType&&(d="module"===t.sourceType),l=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,c):new i.Parser(e,t,c);var h=d?l.parseModule():l.parseScript();return u&&s&&(h.comments=s.comments),l.config.tokens&&(h.tokens=l.tokens),l.config.tolerant&&(h.errors=l.errorHandler.errors),h}t.parse=a,t.parseModule=function(e,t,r){var n=t||{};return n.sourceType="module",a(e,n,r)},t.parseScript=function(e,t,r){var n=t||{};return n.sourceType="script",a(e,n,r)},t.tokenize=function(e,t,r){var n,o=new s.Tokenizer(e,t);n=[];try{for(;;){var i=o.getNextToken();if(!i)break;r&&(i=r(i)),n.push(i)}}catch(e){o.errorHandler.tolerate(e)}return o.errorHandler.tolerant&&(n.errors=o.errors()),n};var c=r(2);t.Syntax=c.Syntax,t.version="4.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],o=this.leading.length-1;o>=0;--o){var i=this.leading[o];t.end.offset>=i.start&&(r.unshift(i.comment),this.leading.splice(o,1),this.trailing.splice(o,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}return this.trailing.length=0,t}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var i=o.node.trailingComments[0];i&&i.range[0]>=e.end.offset&&(t=o.node.trailingComments,delete o.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,r=[];this.stack.length>0&&((i=this.stack[this.stack.length-1])&&i.start>=e.start.offset);)t=i.node,this.stack.pop();if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;n>=0;--n){var o=t.leadingComments[n];o.range[1]<=e.start.offset&&(r.unshift(o),t.leadingComments.splice(n,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,r}for(n=this.leading.length-1;n>=0;--n){var i;(i=this.leading[n]).start<=e.start.offset&&(r.unshift(i.comment),this.leading.splice(n,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(t),o=this.findLeadingComments(t);o.length>0&&(e.leadingComments=o),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var o={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(o.comment.loc=e.loc),e.type=r,this.leading.push(o),this.trailing.push(o)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),s=r(5),a=r(6),c=r(7),u=r(8),p=r(13),l=r(14);function d(e){var t;switch(e.type){case a.JSXSyntax.JSXIdentifier:t=e.name;break;case a.JSXSyntax.JSXNamespacedName:var r=e;t=d(r.namespace)+":"+d(r.name);break;case a.JSXSyntax.JSXMemberExpression:var n=e;t=d(n.object)+"."+d(n.property)}return t}p.TokenName[100]="JSXIdentifier",p.TokenName[101]="JSXText";var h=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return o(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",r=!0,n=!1,o=!1,s=!1;!this.scanner.eof()&&r&&!n;){var a=this.scanner.source[this.scanner.index];if(a===e)break;if(n=";"===a,t+=a,++this.scanner.index,!n)switch(t.length){case 2:o="#"===a;break;case 3:o&&(r=(s="x"===a)||i.Character.isDecimalDigit(a.charCodeAt(0)),o=o&&!s);break;default:r=(r=r&&!(o&&!i.Character.isDecimalDigit(a.charCodeAt(0))))&&!(s&&!i.Character.isHexDigit(a.charCodeAt(0)))}}if(r&&n&&t.length>2){var c=t.substr(1,t.length-2);o&&c.length>1?t=String.fromCharCode(parseInt(c.substr(1),10)):s&&c.length>2?t=String.fromCharCode(parseInt("0"+c.substr(1),16)):o||s||!l.XHTMLEntities[c]||(t=l.XHTMLEntities[c])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:a=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,r=this.scanner.source[this.scanner.index++],n="";!this.scanner.eof()&&(c=this.scanner.source[this.scanner.index++])!==r;)n+="&"===c?this.scanXHTMLEntity(r):c;return{type:8,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var o=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),a=46===o&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=a.length,{type:7,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var c=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(c)&&92!==c)++this.scanner.index;else{if(45!==c)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,i.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var n={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(n)),n},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=t;this.expectJSX(":");var n=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(r,n))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var o=t;this.expectJSX(".");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(o,i))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=r;this.expectJSX(":");var o=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(n,o))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),o=this.matchJSX("/");return o&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(r,o,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),o=this.finalize(t,new s.JSXText(r.value,n));e.push(o)}if("{"!==this.scanner.source[this.scanner.index])break;var i=this.parseJSXExpressionContainer();e.push(i)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===a.JSXSyntax.JSXOpeningElement){var o=n;if(o.selfClosing){var i=this.finalize(r,new s.JSXElement(o,[],null));e.children.push(i)}else t.push(e),e={node:r,opening:o,closing:null,children:[]}}if(n.type===a.JSXSyntax.JSXClosingElement){e.closing=n;var c=d(e.opening.name);if(c!==d(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",c),!(t.length>0))break;i=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(i),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var o=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=o.children,n=o.closing}return this.finalize(e,new s.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(u.Parser);t.JSXParser=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e};t.JSXClosingElement=o;var i=function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r};t.JSXElement=i;var s=function(){this.type=n.JSXSyntax.JSXEmptyExpression};t.JSXEmptyExpression=s;var a=function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXExpressionContainer=a;var c=function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e};t.JSXIdentifier=c;var u=function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXMemberExpression=u;var p=function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXAttribute=p;var l=function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXNamespacedName=l;var d=function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r};t.JSXOpeningElement=d;var h=function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXSpreadAttribute=h;var f=function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t};t.JSXText=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(e){this.type=n.Syntax.ArrayExpression,this.elements=e};t.ArrayExpression=o;var i=function(e){this.type=n.Syntax.ArrayPattern,this.elements=e};t.ArrayPattern=i;var s=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1};t.ArrowFunctionExpression=s;var a=function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r};t.AssignmentExpression=a;var c=function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AssignmentPattern=c;var u=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0};t.AsyncArrowFunctionExpression=u;var p=function(e,t,r){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionDeclaration=p;var l=function(e,t,r){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=l;var d=function(e){this.type=n.Syntax.AwaitExpression,this.argument=e};t.AwaitExpression=d;var h=function(e,t,r){var o="||"===e||"&&"===e;this.type=o?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r};t.BinaryExpression=h;var f=function(e){this.type=n.Syntax.BlockStatement,this.body=e};t.BlockStatement=f;var m=function(e){this.type=n.Syntax.BreakStatement,this.label=e};t.BreakStatement=m;var g=function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CallExpression=g;var y=function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t};t.CatchClause=y;var v=function(e){this.type=n.Syntax.ClassBody,this.body=e};t.ClassBody=v;var b=function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r};t.ClassDeclaration=b;var w=function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r};t.ClassExpression=w;var E=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ComputedMemberExpression=E;var x=function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r};t.ConditionalExpression=x;var S=function(e){this.type=n.Syntax.ContinueStatement,this.label=e};t.ContinueStatement=S;var k=function(){this.type=n.Syntax.DebuggerStatement};t.DebuggerStatement=k;var _=function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.Directive=_;var P=function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t};t.DoWhileStatement=P;var C=function(){this.type=n.Syntax.EmptyStatement};t.EmptyStatement=C;var A=function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e};t.ExportAllDeclaration=A;var T=function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportDefaultDeclaration=T;var D=function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r};t.ExportNamedDeclaration=D;var O=function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExportSpecifier=O;var R=function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e};t.ExpressionStatement=R;var N=function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1};t.ForInStatement=N;var I=function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r};t.ForOfStatement=I;var j=function(e,t,r,o){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=o};t.ForStatement=j;var F=function(e,t,r,o){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionDeclaration=F;var M=function(e,t,r,o){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionExpression=M;var L=function(e){this.type=n.Syntax.Identifier,this.name=e};t.Identifier=L;var G=function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r};t.IfStatement=G;var B=function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDeclaration=B;var U=function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportDefaultSpecifier=U;var q=function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportNamespaceSpecifier=q;var z=function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.ImportSpecifier=z;var $=function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t};t.LabeledStatement=$;var H=function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t};t.Literal=H;var V=function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t};t.MetaProperty=V;var X=function(e,t,r,o,i){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=o,this.static=i};t.MethodDefinition=X;var J=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="module"};t.Module=J;var W=function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t};t.NewExpression=W;var Y=function(e){this.type=n.Syntax.ObjectExpression,this.properties=e};t.ObjectExpression=Y;var K=function(e){this.type=n.Syntax.ObjectPattern,this.properties=e};t.ObjectPattern=K;var Q=function(e,t,r,o,i,s){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=o,this.kind=e,this.method=i,this.shorthand=s};t.Property=Q;var Z=function(e,t,r,o){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:o}};t.RegexLiteral=Z;var ee=function(e){this.type=n.Syntax.RestElement,this.argument=e};t.RestElement=ee;var te=function(e){this.type=n.Syntax.ReturnStatement,this.argument=e};t.ReturnStatement=te;var re=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="script"};t.Script=re;var ne=function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e};t.SequenceExpression=ne;var oe=function(e){this.type=n.Syntax.SpreadElement,this.argument=e};t.SpreadElement=oe;var ie=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.StaticMemberExpression=ie;var se=function(){this.type=n.Syntax.Super};t.Super=se;var ae=function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchCase=ae;var ce=function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.SwitchStatement=ce;var ue=function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TaggedTemplateExpression=ue;var pe=function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateElement=pe;var le=function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.TemplateLiteral=le;var de=function(){this.type=n.Syntax.ThisExpression};t.ThisExpression=de;var he=function(e){this.type=n.Syntax.ThrowStatement,this.argument=e};t.ThrowStatement=he;var fe=function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r};t.TryStatement=fe;var me=function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UnaryExpression=me;var ge=function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r};t.UpdateExpression=ge;var ye=function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclaration=ye;var ve=function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t};t.VariableDeclarator=ve;var be=function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t};t.WhileStatement=be;var we=function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t};t.WithStatement=we;var Ee=function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t};t.YieldExpression=Ee},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(10),i=r(11),s=r(7),a=r(12),c=r(2),u=r(13),p=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),s=this.lastMarker.index,a=this.lastMarker.line,c=this.lastMarker.column+1;throw this.errorHandler.createError(s,a,c,i)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),s=this.lastMarker.index,a=this.scanner.lineNumber,c=this.lastMarker.column+1;this.errorHandler.tolerateError(s,a,c,i)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||i.Messages.UnexpectedToken;if(e?(t||(n=2===e.type?i.Messages.UnexpectedEOS:3===e.type?i.Messages.UnexpectedIdentifier:6===e.type?i.Messages.UnexpectedNumber:8===e.type?i.Messages.UnexpectedString:10===e.type?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=i.Messages.StrictReservedWord))),r=e.value):r="ILLEGAL",n=n.replace("%0",r),e&&"number"==typeof e.lineNumber){var o=e.start,s=e.lineNumber,a=this.lastMarker.index-this.lastMarker.column,c=e.start-a+1;return this.errorHandler.createError(o,s,c,n)}return o=this.lastMarker.index,s=this.lastMarker.line,c=this.lastMarker.column+1,this.errorHandler.createError(o,s,c,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var o={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,o)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:u.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var r=e.pattern,n=e.flags;t.regex={pattern:r,flags:n}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,o},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,o},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal("true"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(n,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(n,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var r=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await;this.context.allowYield=!1,this.context.await=!0;var n=this.parseFormalParameters(),o=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new s.AsyncFunctionExpression(null,n.params,o))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:this.context.strict&&r.octal&&this.tolerateUnexpectedToken(r,i.Messages.StrictOctalLiteral);var n=this.getTokenRaw(r);e=this.finalize(t,new s.Literal(r.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(r.value));break;case 7:"["===r.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(r);break;default:e=this.throwUnexpectedToken(r)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===c.Syntax.Identifier&&e.name===t||e.type===c.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r=this.createNode(),n=this.lookahead,o=null,a=null,c=!1,u=!1,p=!1,l=!1;if(3===n.type){var d=n.value;this.nextToken(),c=this.match("["),o=(l=!(this.hasLineTerminator||"async"!==d||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(r,new s.Identifier(d))}else this.match("*")?this.nextToken():(c=this.match("["),o=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(3===n.type&&!l&&"get"===n.value&&h)t="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod();else if(3===n.type&&!l&&"set"===n.value&&h)t="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod();else if(7===n.type&&"*"===n.value&&h)t="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0;else if(o||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!l)!c&&this.isPropertyKey(o,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))a=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0;else if(3===n.type)if(d=this.finalize(r,new s.Identifier(n.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),p=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);a=this.finalize(r,new s.AssignmentPattern(d,f))}else p=!0,a=d;else this.throwUnexpectedToken(this.nextToken());return this.finalize(r,new s.Property(t,o,c,a,u,p))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r=t.value,o=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:o},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:n},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new s.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case c.Syntax.Identifier:case c.Syntax.MemberExpression:case c.Syntax.RestElement:case c.Syntax.AssignmentPattern:break;case c.Syntax.SpreadElement:e.type=c.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case c.Syntax.ArrayExpression:e.type=c.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case c.Syntax.ObjectExpression:for(e.type=c.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case c.Syntax.AssignmentExpression:e.type=c.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var t=this.lookahead,r=[];if(this.match("..."))e=this.parseRestElement(r),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[e],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var o=[];for(this.context.isAssignmentTarget=!1,o.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),o.push(this.parseRestElement(r)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new s.SequenceExpression(o)))}if(!n){if(this.expect(")"),this.match("=>")&&(e.type===c.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:"ArrowParameterPlaceHolder",params:[e],async:!1}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===c.Syntax.SequenceExpression)for(i=0;i<e.expressions.length;i++)this.reinterpretExpressionAsPattern(e.expressions[i]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",params:e.type===c.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert("new"===r.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var o=this.parseIdentifierName();e=new s.MetaProperty(r,o)}else this.throwUnexpectedToken(this.lookahead);else{var i=this.isolateCoverGrammar(this.parseLeftHandSideExpression),a=this.match("(")?this.parseArguments():[];e=new s.NewExpression(i,a),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.matchContextualKeyword("async"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var o=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,o))}else if(this.match("(")){var i=r&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var a=i?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,a)),i&&this.match("=>")){for(var c=0;c<a.length;++c)this.reinterpretExpressionAsPattern(a[c]);e={type:"ArrowParameterPlaceHolder",params:a,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),o=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,o));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var u=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,u))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,r))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,r));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var o=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,o))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(r,new s.UpdateExpression(n.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=this.nextToken().value;o=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(a,e,o))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(r.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===c.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==c.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var o=[e,this.lookahead],i=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),c=[i,r.value,a],u=[n];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;c.length>2&&n<=u[u.length-1];){a=c.pop();var p=c.pop();u.pop(),i=c.pop(),o.pop();var l=this.startNode(o[o.length-1]);c.push(this.finalize(l,new s.BinaryExpression(p,i,a)))}c.push(this.nextToken().value),u.push(n),o.push(this.lookahead),c.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var d=c.length-1;t=c[d];for(var h=o.pop();d>1;){var f=o.pop(),m=h&&h.lineStart;l=this.startNode(f,m),p=c[d-1],t=this.finalize(l,new s.BinaryExpression(p,c[d-2],t)),d-=2,h=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(":");var o=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,n,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case c.Syntax.Identifier:this.validateParam(e,t,t.name);break;case c.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case c.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case c.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case c.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e],n=!1;switch(e.type){case c.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":r=e.params,n=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var o=0;o<r.length;++o)(s=r[o]).type===c.Syntax.AssignmentPattern?s.right.type===c.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=c.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):n&&s.type===c.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),r[o]=s;if(this.context.strict||!this.context.allowYield)for(o=0;o<r.length;++o){var s;(s=r[o]).type===c.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var a=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(a,t.message)}return{simple:t.simple,params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if(e=this.parseConditionalExpression(),3===r.type&&r.lineNumber===this.lookahead.lineNumber&&"async"===r.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var n=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(n),e={type:"ArrowParameterPlaceHolder",params:[n],async:!0}}if("ArrowParameterPlaceHolder"===e.type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=e.async,a=this.reinterpretAsCoverFormalsList(e);if(a){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var u=this.context.strict,p=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var l=this.context.allowYield,d=this.context.await;this.context.allowYield=!0,this.context.await=o;var h=this.startNode(t);this.expect("=>");var f=void 0;if(this.match("{")){var m=this.context.allowIn;this.context.allowIn=!0,f=this.parseFunctionSourceElements(),this.context.allowIn=m}else f=this.isolateCoverGrammar(this.parseAssignmentExpression);var g=f.type!==c.Syntax.BlockStatement;this.context.strict&&a.firstRestricted&&this.throwUnexpectedToken(a.firstRestricted,a.message),this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message),e=o?this.finalize(h,new s.AsyncArrowFunctionExpression(a.params,f,g)):this.finalize(h,new s.ArrowFunctionExpression(a.params,f,g)),this.context.strict=u,this.context.allowStrictDirective=p,this.context.allowYield=l,this.context.await=d}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===c.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var v=(r=this.nextToken()).value,b=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(v,e,b)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&n.type!==c.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new s.VariableDeclarator(n,o))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert("let"===r||"const"===r,"Lexical declaration must be either let or const");var o=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(o,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect("...");var n=this.parsePattern(e,t);return this.finalize(r,new s.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect("[");for(var n=[];!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new s.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,o=this.createNode(),i=!1,a=!1;if(3===this.lookahead.type){var c=this.lookahead;r=this.parseVariableIdentifier();var u=this.finalize(o,new s.Identifier(c.value));if(this.match("=")){e.push(c),a=!0,this.nextToken();var p=this.parseAssignmentExpression();n=this.finalize(this.startNode(c),new s.AssignmentPattern(u,p))}else this.match(":")?(this.expect(":"),n=this.parsePatternWithDefault(e,t)):(e.push(c),a=!0,n=u)}else i=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),n=this.parsePatternWithDefault(e,t);return this.finalize(o,new s.Property("init",r,i,n,!1,a))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new s.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match("[")?r=this.parseArrayPattern(e,t):this.match("{")?r=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var o=this.context.allowYield;this.context.allowYield=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=o,n=this.finalize(this.startNode(r),new s.AssignmentPattern(n,i))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&"yield"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):(this.context.strict||"let"!==r.value||"var"!==e)&&this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new s.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var");this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var n=null;return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===c.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword("if"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new s.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new s.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,o=null,a=null,u=!0,p=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var l=this.context.allowIn;this.context.allowIn=!1;var d=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=l,1===d.length&&this.matchKeyword("in")){var h=d[0];h.init&&(h.id.type===c.Syntax.ArrayPattern||h.id.type===c.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){n=this.createNode();var f=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(l=this.context.allowIn,this.context.allowIn=!1,d=this.parseBindingList(f,{inFor:!0}),this.context.allowIn=l,1===d.length&&null===d[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new s.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,u=!1):(this.consumeSemicolon(),n=this.finalize(n,new s.VariableDeclaration(d,f)))):(n=this.finalize(n,new s.Identifier(f)),this.nextToken(),e=n,t=this.parseExpression(),n=null)}else{var m=this.lookahead;if(l=this.context.allowIn,this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=l,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,u=!1;else{if(this.match(",")){for(var g=[n];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(a=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(p,new s.ForStatement(n,o,a,r)):u?this.finalize(p,new s.ForInStatement(e,t,r)):this.finalize(p,new s.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier();t=r;var n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier(),n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name),t=r}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(r,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],o=!1;for(this.expect("{");!this.match("}");){var a=this.parseSwitchCase();null===a.test&&(o&&this.throwError(i.Messages.MultipleDefaultsInSwitch),o=!0),n.push(a)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new s.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===c.Syntax.Identifier&&this.match(":")){this.nextToken();var n=r,o="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,o)&&this.throwError(i.Messages.Redeclaration,"Label",n.name),this.context.labelSet[o]=!0;var a=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),a=this.parseClassDeclaration();else if(this.matchKeyword("function")){var u=this.lookahead,p=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(u,i.Messages.StrictFunction):p.generator&&this.tolerateUnexpectedToken(u,i.Messages.GeneratorInLegacyContext),a=p}else a=this.parseStatement();delete this.context.labelSet[o],e=new s.LabeledStatement(n,a)}else this.consumeSemicolon(),e=new s.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},o=0;o<t.length;o++){var a="$"+t[o].value;Object.prototype.hasOwnProperty.call(n,a)&&this.tolerateError(i.Messages.DuplicateBinding,t[o].value),n[a]=!0}this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var u=this.parseBlock();return this.finalize(e,new s.CatchClause(r,u))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,o=this.context.inSwitch,i=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=o,this.context.inFunctionBody=i,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof s.Identifier,e.params.push(r)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var r=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===r.lineNumber&&4===r.type&&"function"===r.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),r=this.matchContextualKeyword("async");r&&this.nextToken(),this.expectKeyword("function");var n,o=!r&&this.match("*");o&&this.nextToken();var a=null,c=null;if(!e||!this.match("(")){var u=this.lookahead;a=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(c=u,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(c=u,n=i.Messages.StrictReservedWord)}var p=this.context.await,l=this.context.allowYield;this.context.await=r,this.context.allowYield=!o;var d=this.parseFormalParameters(c),h=d.params,f=d.stricted;c=d.firstRestricted,d.message&&(n=d.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&c&&this.throwUnexpectedToken(c,n),this.context.strict&&f&&this.tolerateUnexpectedToken(f,n),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=p,this.context.allowYield=l,r?this.finalize(t,new s.AsyncFunctionDeclaration(a,h,y)):this.finalize(t,new s.FunctionDeclaration(a,h,y,o))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var r,n=!t&&this.match("*");n&&this.nextToken();var o,a=null,c=this.context.await,u=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!n,!this.match("(")){var p=this.lookahead;a=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(p.value)&&this.tolerateUnexpectedToken(p,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(p.value)?(o=p,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(p.value)&&(o=p,r=i.Messages.StrictReservedWord)}var l=this.parseFormalParameters(o),d=l.params,h=l.stricted;o=l.firstRestricted,l.message&&(r=l.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=l.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,r),this.context.strict&&h&&this.tolerateUnexpectedToken(h,r),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=c,this.context.allowYield=u,t?this.finalize(e,new s.AsyncFunctionExpression(a,d,g)):this.finalize(e,new s.FunctionExpression(a,d,g,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),n=r.type===c.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,n?new s.Directive(r,n):new s.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective();t.push(n);var o=n.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,i.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();1!==r.params.length?this.tolerateError(i.Messages.BadSetterArity):r.params[0]instanceof s.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new s.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n="",o=null,a=null,c=!1,u=!1,p=!1,l=!1;if(this.match("*"))this.nextToken();else if(c=this.match("["),"static"===(o=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,p=!0,c=this.match("["),this.match("*")?this.nextToken():o=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var d=this.lookahead.value;":"!==d&&"("!==d&&"*"!==d&&(l=!0,t=this.lookahead,o=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,i.Messages.ConstructorIsAsync))}var h=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&h?(n="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod()):"set"===t.value&&h&&(n="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod()):7===t.type&&"*"===t.value&&h&&(n="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0),!n&&o&&this.match("(")&&(n="init",a=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0),n||this.throwUnexpectedToken(this.lookahead),"init"===n&&(n="method"),c||(p&&this.isPropertyKey(o,"prototype")&&this.throwUnexpectedToken(t,i.Messages.StaticPrototype),!p&&this.isPropertyKey(o,"constructor")&&(("method"!==n||!u||a&&a.generator)&&this.throwUnexpectedToken(t,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,i.Messages.DuplicateConstructor):e.value=!0,n="constructor")),this.finalize(r,new s.MethodDefinition(o,c,a,n,p))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),o=null;this.matchKeyword("extends")&&(this.nextToken(),o=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=r,this.finalize(t,new s.ClassDeclaration(n,o,i))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=3===this.lookahead.type?this.parseVariableIdentifier():null,n=null;this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(r,n,o))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var r=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?r=r.concat(this.parseNamedImports()):this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(r.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.match("{")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else this.matchKeyword("class")?(r=this.parseClassDeclaration(!0),e=this.finalize(t,new s.ExportDefaultDeclaration(r))):this.matchContextualKeyword("async")?(r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new s.ExportDefaultDeclaration(r))):(this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value),r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(r)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(o))}else if(4===this.lookahead.type){switch(r=void 0,this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction())r=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null));else{var a=[],c=null,u=!1;for(this.expect("{");!this.match("}");)u=u||this.matchKeyword("default"),a.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),c=this.parseModuleSpecifier(),this.consumeSemicolon()):u?(n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause,this.throwError(n,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,a,c))}return e},e}();t.Parser=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,"column",{value:t}))}return r},e.prototype.createError=function(e,t,r,n){var o="Line "+t+": "+n,i=this.constructError(o,r);return i.index=e,i.lineNumber=t,i.description=n,i},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var o=this.createError(e,t,r,n);if(!this.tolerant)throw o;this.recordError(o)},e}();t.ErrorHandler=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(4),i=r(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function a(e){return"01234567".indexOf(e)}var c=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(i)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:r};n.push(s)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}}return this.trackComment&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:r},n.push(s)),n},e.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};r.push(i)}return r}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},i={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},r.push(i)),this.tolerateUnexpectedToken(),r},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(r))++this.index;else if(o.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2,n=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,n=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(n))}else{if(60!==r||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,n=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);r>=56320&&r<=57343&&(t=1024*(t-55296)+r-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+s(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=o.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)r+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},e.prototype.octalToDecimal=function(e){var t="0"!==e,r=a(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+a(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+a(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===r.length?3:this.isKeyword(r)?4:"null"===r?5:"true"===r||"false"===r?1:3)&&t+r.length!==this.index){var n=this.index;this.index=t,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=n}return{type:e,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var r=!1,s="";!this.eof();){var a=this.source[this.index++];if(a===t){t="";break}if("\\"===a)if((a=this.source[this.index++])&&o.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(a){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var c=this.scanHexEscape(a);null===c&&this.throwUnexpectedToken(),s+=c}break;case"x":var u=this.scanHexEscape(a);null===u&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),s+=u;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=a,this.tolerateUnexpectedToken();break;default:if(a&&o.Character.isOctalDigit(a.charCodeAt(0))){var p=this.octalToDecimal(a);r=p.octal||r,s+=String.fromCharCode(p.code)}else s+=a}else{if(o.Character.isLineTerminator(a.charCodeAt(0)))break;s+=a}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],s=!1,a=2;for(++this.index;!this.eof();){var c=this.source[this.index++];if("`"===c){a=1,s=!0,t=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=c}else if("\\"===c)if(c=this.source[this.index++],o.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var u=this.index,p=this.scanHexEscape(c);null!==p?e+=p:(this.index=u,e+=c)}break;case"x":var l=this.scanHexEscape(c);null===l&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),e+=l;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===c?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=c}else o.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=c}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-a),cooked:e,head:n,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&n.throwUnexpectedToken(i.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):""})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(r)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],r=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){s=!0;break}"["===e&&(r=!0)}return s||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!o.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var r=this.index,n=this.scanHexEscape("u");if(null!==n)for(e+=n;r<this.index;++r)this.source[r];else this.index=r,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(12),i=r(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var r=this.values[this.paren-1];t="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(n=this.values[this.curly-4])&&!this.beforeFunctionExpression(n);else if("function"===this.values[this.curly-4]){var n;t=!(n=this.values[this.curly-5])||!this.beforeFunctionExpression(n)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),a=function(){function e(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=this.scanner.source.slice(r.slice[0],r.slice[1]),o={type:r.multiLine?"BlockComment":"LineComment",value:n};this.trackRange&&(o.range=r.range),this.trackLoc&&(o.loc=r.loc),this.buffer.push(o)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var a="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(a);var c={type:i.TokenName[a.type],value:this.scanner.source.slice(a.start,a.end)};if(this.trackRange&&(c.range=[a.start,a.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=s),9===a.type){var u=a.pattern,p=a.flags;c.regex={pattern:u,flags:p}}this.buffer.push(c)}}return this.buffer.shift()},e}();t.Tokenizer=a}])},e.exports=n()},function(e,t,r){"use strict";var n=r(26),o=r(32),i=r(42),s=r(33),a=Object.prototype.toString,c=Object.prototype.hasOwnProperty,u={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},p=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function l(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else{if(!(e<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");r="U",i=8}return"\\"+r+n.repeat("0",i-t.length)+t}function d(e){this.schema=e.schema||i,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=n.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,i,s,a,u;if(null===t)return{};for(r={},o=0,i=(n=Object.keys(t)).length;o<i;o+=1)s=n[o],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&c.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[s]=a;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function h(e,t){for(var r,o=n.repeat(" ",t),i=0,s=-1,a="",c=e.length;i<c;)-1===(s=e.indexOf("\n",i))?(r=e.slice(i),i=c):(r=e.slice(i,s+1),i=s+1),r.length&&"\n"!==r&&(a+=o),a+=r;return a}function f(e,t){return"\n"+n.repeat(" ",e.indent*t)}function m(e){return 32===e||9===e}function g(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function y(e,t){return g(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&(35!==e||t&&function(e){return g(e)&&!m(e)&&65279!==e&&13!==e&&10!==e}(t))}function v(e){return/^\n* /.test(e)}function b(e,t,r,n,o){var i,s,a,c,u=!1,p=!1,l=-1!==n,d=-1,h=g(c=e.charCodeAt(0))&&65279!==c&&!m(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&!m(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!g(s=e.charCodeAt(i)))return 5;a=i>0?e.charCodeAt(i-1):null,h=h&&y(s,a)}else{for(i=0;i<e.length;i++){if(10===(s=e.charCodeAt(i)))u=!0,l&&(p=p||i-d-1>n&&" "!==e[d+1],d=i);else if(!g(s))return 5;a=i>0?e.charCodeAt(i-1):null,h=h&&y(s,a)}p=p||l&&i-d-1>n&&" "!==e[d+1]}return u||p?r>9&&v(e)?5:p?4:3:h&&!o(e)?1:2}function w(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==p.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,r),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;switch(b(t,a,e.indent,s,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+E(t,e.indent)+x(h(t,i));case 4:return">"+E(t,e.indent)+x(h(function(e,t){var r,n,o=/(\n+)([^\n]*)/g,i=(a=e.indexOf("\n"),a=-1!==a?a:e.length,o.lastIndex=a,S(e.slice(0,a),t)),s="\n"===e[0]||" "===e[0];var a;for(;n=o.exec(e);){var c=n[1],u=n[2];r=" "===u[0],i+=c+(s||r||""===u?"":"\n")+S(u,t),s=r}return i}(t,s),i));case 5:return'"'+function(e){for(var t,r,n,o="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(r=e.charCodeAt(i+1))>=56320&&r<=57343?(o+=l(1024*(t-55296)+r-56320+65536),i++):(n=u[t],o+=!n&&g(t)?e[i]:n||l(t));return o}(t)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function E(e,t){var r=v(e)?String(t):"",n="\n"===e[e.length-1];return r+(n&&("\n"===e[e.length-2]||"\n"===e)?"+":n?"":"-")+"\n"}function x(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function S(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,i=0,s=0,a=0,c="";r=o.exec(e);)(a=r.index)-i>t&&(n=s>i?s:a,c+="\n"+e.slice(i,n),i=n+1),s=a;return c+="\n",e.length-i>t&&s>i?c+=e.slice(i,s)+"\n"+e.slice(s+1):c+=e.slice(i),c.slice(1)}function k(e,t,r){var n,i,s,u,p,l;for(s=0,u=(i=r?e.explicitTypes:e.implicitTypes).length;s<u;s+=1)if(((p=i[s]).instanceOf||p.predicate)&&(!p.instanceOf||"object"==typeof t&&t instanceof p.instanceOf)&&(!p.predicate||p.predicate(t))){if(e.tag=r?p.tag:"?",p.represent){if(l=e.styleMap[p.tag]||p.defaultStyle,"[object Function]"===a.call(p.represent))n=p.represent(t,l);else{if(!c.call(p.represent,l))throw new o("!<"+p.tag+'> tag resolver accepts not "'+l+'" style');n=p.represent[l](t,l)}e.dump=n}return!0}return!1}function _(e,t,r,n,i,s){e.tag=null,e.dump=r,k(e,r,!1)||k(e,r,!0);var c=a.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var u,p,l="[object Object]"===c||"[object Array]"===c;if(l&&(p=-1!==(u=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(i=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(l&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var i,s,a,c,u,p,l="",d=e.tag,h=Object.keys(r);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new o("sortKeys must be a boolean or a function");for(i=0,s=h.length;i<s;i+=1)p="",n&&0===i||(p+=f(e,t)),c=r[a=h[i]],_(e,t+1,a,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=f(e,t)),_(e,t+1,c,!0,u)&&(e.dump&&10===e.dump.charCodeAt(0)?p+=":":p+=": ",l+=p+=e.dump));e.tag=d,e.dump=l||"{}"}(e,t,e.dump,i),p&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,r){var n,o,i,s,a,c="",u=e.tag,p=Object.keys(r);for(n=0,o=p.length;n<o;n+=1)a="",0!==n&&(a+=", "),e.condenseFlow&&(a+='"'),s=r[i=p[n]],_(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),_(e,t,s,!1,!1)&&(c+=a+=e.dump));e.tag=u,e.dump="{"+c+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c){var d=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(!function(e,t,r,n){var o,i,s="",a=e.tag;for(o=0,i=r.length;o<i;o+=1)_(e,t+1,r[o],!0,!0)&&(n&&0===o||(s+=f(e,t)),e.dump&&10===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=a,e.dump=s||"[]"}(e,d,e.dump,i),p&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,r){var n,o,i="",s=e.tag;for(n=0,o=r.length;n<o;n+=1)_(e,t,r[n],!1,!1)&&(0!==n&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=s,e.dump="["+i+"]"}(e,d,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump))}else{if("[object String]"!==c){if(e.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&w(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function P(e,t){var r,n,o=[],i=[];for(function e(t,r,n){var o,i,s;if(null!==t&&"object"==typeof t)if(-1!==(i=r.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(r.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)e(t[i],r,n);else for(o=Object.keys(t),i=0,s=o.length;i<s;i+=1)e(t[o[i]],r,n)}(e,o,i),r=0,n=i.length;r<n;r+=1)t.duplicates.push(o[i[r]]);t.usedDuplicates=new Array(n)}function C(e,t){var r=new d(t=t||{});return r.noRefs||P(e,r),_(r,0,e,!0,!0)?r.dump+"\n":""}e.exports.dump=C,e.exports.safeDump=function(e,t){return C(e,n.extend({schema:s},t))}},function(e,t,r){e.exports=r(18)},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var n=r(295);
/*!
 * test utility
 */t.test=r(296),
/*!
 * type utility
 */
t.type=r(64),
/*!
 * expectTypes utility
 */
t.expectTypes=r(297),
/*!
 * message utility
 */
t.getMessage=r(298),
/*!
 * actual utility
 */
t.getActual=r(104),
/*!
 * Inspect util
 */
t.inspect=r(65),
/*!
 * Object Display util
 */
t.objDisplay=r(105),
/*!
 * Flag utility
 */
t.flag=r(13),
/*!
 * Flag transferring utility
 */
t.transferFlags=r(19),
/*!
 * Deep equal utility
 */
t.eql=r(300),
/*!
 * Deep path info
 */
t.getPathInfo=n.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=n.hasProperty,
/*!
 * Function name
 */
t.getName=r(106),
/*!
 * add Property
 */
t.addProperty=r(301),
/*!
 * add Method
 */
t.addMethod=r(302),
/*!
 * overwrite Property
 */
t.overwriteProperty=r(303),
/*!
 * overwrite Method
 */
t.overwriteMethod=r(304),
/*!
 * Add a chainable method
 */
t.addChainableMethod=r(305),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=r(306),
/*!
 * Compare by inspect method
 */
t.compareByInspect=r(307),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=r(108),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=r(308),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=r(309),
/*!
 * Proxify util
 */
t.proxify=r(45),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=r(44),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=r(43),
/*!
 * isNaN method
 */
t.isNaN=r(310)},function(e,t,r){"use strict";function n(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function i(e,t,r){var n=e,o=null;r=void 0===r?t.length:r;for(var i=0;i<r;i++){var s=t[i];n&&(n=void 0===s.p?n[s.i]:n[s.p],i===r-1&&(o=n))}return o}function s(e,t){var r=o(t),s=r[r.length-1],a={parent:r.length>1?i(e,r,r.length-1):e,name:s.p||s.i,value:i(e,r)};return a.exists=n(a.parent,a.name),a}e.exports={hasProperty:n,getPathInfo:s,getPathValue:function(e,t){return s(e,t).value},setPathValue:function(e,t,r){return function(e,t,r){for(var n=e,o=r.length,i=null,s=0;s<o;s++){var a=null,c=null;if(i=r[s],s===o-1)n[a=void 0===i.p?i.i:i.p]=t;else if(void 0!==i.p&&n[i.p])n=n[i.p];else if(void 0!==i.i&&n[i.i])n=n[i.i];else{var u=r[s+1];a=void 0===i.p?i.i:i.p,c=void 0===u.p?[]:{},n[a]=c,n=n[a]}}}(e,r,o(t)),e}}},function(e,t,r){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(13);e.exports=function(e,t){var r=n(e,"negate"),o=t[0];return r?!o:o}},function(e,t,r){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(103),o=r(13),i=r(64);e.exports=function(e,t){var r=o(e,"message"),s=o(e,"ssfi");r=r?r+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,r){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&r===t.length-1?"or ":"")+n+" "+e})).join(", "),c=i(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new n(r+"object tested must be "+a+", but "+c+" given",void 0,s)}},function(e,t,r){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(13),o=r(104),i=r(105);e.exports=function(e,t){var r=n(e,"negate"),s=n(e,"object"),a=t[3],c=o(e,t),u=r?t[2]:t[1],p=n(e,"message");return"function"==typeof u&&(u=u()),u=(u=u||"").replace(/#\{this\}/g,(function(){return i(s)})).replace(/#\{act\}/g,(function(){return i(c)})).replace(/#\{exp\}/g,(function(){return i(a)})),p?p+": "+u:u}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var r in e)t.push(r);return t}},function(e,t,r){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(64);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var i="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function s(e,t,r){if(!r||g(e)||g(t))return null;var n=r.get(e);if(n){var o=n.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,r,n){if(r&&!g(e)&&!g(t)){var o=r.get(e);o?o.set(t,n):((o=new i).set(t,n),r.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,r){if(r&&r.comparator)return p(e,t,r);var n=u(e,t);return null!==n?n:p(e,t,r)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!g(e)&&!g(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function p(e,t,r){(r=r||{}).memoize=!1!==r.memoize&&(r.memoize||new i);var o=r&&r.comparator,p=s(e,t,r.memoize);if(null!==p)return p;var g=s(t,e,r.memoize);if(null!==g)return g;if(o){var y=o(e,t);if(!1===y||!0===y)return a(e,t,r.memoize,y),y;var v=u(e,t);if(null!==v)return v}var b=n(e);if(b!==n(t))return a(e,t,r.memoize,!1),!1;a(e,t,r.memoize,!0);var w=function(e,t,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,n);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){return d(f(e),f(t),r)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,n);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return l(e,t,n);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){var n=m(e),o=m(t);if(n.length&&n.length===o.length)return n.sort(),o.sort(),!1!==d(n,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,r,n){var o=r.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(!1===c(e[r[i]],t[r[i]],n))return!1;return!0}(e,t,n,r);var i=h(e),s=h(t);if(i.length&&i.length===s.length)return i.sort(),s.sort(),d(i,s,r);if(0===n.length&&0===i.length&&0===o.length&&0===s.length)return!0;return!1}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,n)}}(e,t,b,r);return a(e,t,r.memoize,w),w}function l(e,t,r){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],o=[];return e.forEach((function(e,t){n.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(n.sort(),o.sort(),r)}
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function d(e,t,r){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var o=-1;++o<n;)if(!1===c(e[o],t[o],r))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */
function h(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return f(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function f(e){for(var t=e.next(),r=[t.value];!1===t.done;)t=e.next(),r.push(t.value);return r}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function m(e){var t=[];for(var r in e)t.push(r);return t}function g(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=i},function(e,t,r){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(18),o=r(13),i=r(43),s=r(19);e.exports=function(e,t,r){r=void 0===r?function(){}:r,Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=r.call(this);if(void 0!==t)return t;var a=new n.Assertion;return s(this,a),a},configurable:!0})}},function(e,t,r){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(44),o=r(18),i=r(13),s=r(45),a=r(19);e.exports=function(e,t,r){var c=function(){i(this,"lockSsfi")||i(this,"ssfi",c);var e=r.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};n(c,t,!1),e[t]=s(c,t)}},function(e,t,r){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(18),o=r(13),i=r(43),s=r(19);e.exports=function(e,t,r){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=r(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var u=new n.Assertion;return s(this,u),u},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(44),o=r(18),i=r(13),s=r(45),a=r(19);e.exports=function(e,t,r){var c=e[t],u=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(u=c);var p=function(){i(this,"lockSsfi")||i(this,"ssfi",p);var e=i(this,"lockSsfi");i(this,"lockSsfi",!0);var t=r(u).apply(this,arguments);if(i(this,"lockSsfi",e),void 0!==t)return t;var n=new o.Assertion;return a(this,n),n};n(p,t,!1),e[t]=s(p,t)}},function(e,t,r){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(44),o=r(18),i=r(13),s=r(45),a=r(19),c="function"==typeof Object.setPrototypeOf,u=function(){},p=Object.getOwnPropertyNames(u).filter((function(e){var t=Object.getOwnPropertyDescriptor(u,e);return"object"!=typeof t||!t.configurable})),l=Function.prototype.call,d=Function.prototype.apply;e.exports=function(e,t,r,u){"function"!=typeof u&&(u=function(){});var h={method:r,chainingBehavior:u};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var r=function(){i(this,"lockSsfi")||i(this,"ssfi",r);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(n(r,t,!0),c){var u=Object.create(this);u.call=l,u.apply=d,Object.setPrototypeOf(r,u)}else{Object.getOwnPropertyNames(e).forEach((function(t){if(-1===p.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}}))}return a(this,r),s(r)},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(18),o=r(19);e.exports=function(e,t,r,i){var s=e.__methods[t],a=s.chainingBehavior;s.chainingBehavior=function(){var e=i(a).call(this);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t};var c=s.method;s.method=function(){var e=r(c).apply(this,arguments);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t}}},function(e,t,r){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(65);e.exports=function(e,t){return n(e)<n(t)?-1:1}},function(e,t,r){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(108);e.exports=function(e){return Object.keys(e).concat(n(e))}},function(e,t,r){"use strict";var n=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var r=String(e).match(n);r&&(t=r[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var r="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(r):"string"==typeof t&&-1!==r.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,r){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(28);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var r=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */
function i(e,r,n,s){return o(this,"ssfi",n||i),o(this,"lockSsfi",s),o(this,"object",e),o(this,"message",r),t.proxify(this)}e.Assertion=i,Object.defineProperty(i,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=e}}),Object.defineProperty(i,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=e}}),i.addProperty=function(e,r){t.addProperty(this.prototype,e,r)},i.addMethod=function(e,r){t.addMethod(this.prototype,e,r)},i.addChainableMethod=function(e,r,n){t.addChainableMethod(this.prototype,e,r,n)},i.overwriteProperty=function(e,r){t.overwriteProperty(this.prototype,e,r)},i.overwriteMethod=function(e,r){t.overwriteMethod(this.prototype,e,r)},i.overwriteChainableMethod=function(e,r,n){t.overwriteChainableMethod(this.prototype,e,r,n)},i.prototype.assert=function(e,i,s,a,c,u){var p=t.test(this,arguments);if(!1!==u&&(u=!0),void 0===a&&void 0===c&&(u=!1),!0!==n.showDiff&&(u=!1),!p){i=t.getMessage(this,arguments);var l=t.getActual(this,arguments);throw new r(i,{actual:l,expected:a,showDiff:u},n.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(i.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion,n=e.AssertionError,o=t.flag;function i(e,r){r&&o(this,"message",r),e=e.toLowerCase();var n=o(this,"object"),i=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(n).toLowerCase(),"expected #{this} to be "+i+e,"expected #{this} not to be "+i+e)}function s(e,r){return t.isNaN(e)&&t.isNaN(r)||e===r}function a(){o(this,"contains",!0)}function c(e,i){i&&o(this,"message",i);var a=o(this,"object"),c=t.type(a).toLowerCase(),u=o(this,"message"),p=o(this,"negate"),l=o(this,"ssfi"),d=o(this,"deep"),h=d?"deep ":"";u=u?u+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(d)throw new n(u+"unable to use .deep.include with WeakSet",void 0,l);f=a.has(e);break;case"map":var m=d?t.eql:s;a.forEach((function(t){f=f||m(t,e)}));break;case"set":d?a.forEach((function(r){f=f||t.eql(r,e)})):f=a.has(e);break;case"array":f=d?a.some((function(r){return t.eql(r,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new n(u+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,l);var g=Object.keys(e),y=null,v=0;if(g.forEach((function(i){var s=new r(a);if(t.transferFlags(this,s,!0),o(s,"lockSsfi",!0),p&&1!==g.length)try{s.property(i,e[i])}catch(e){if(!t.checkError.compatibleConstructor(e,n))throw e;null===y&&(y=e),v++}else s.property(i,e[i])}),this),p&&g.length>1&&v===g.length)throw y;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function u(){var e=o(this,"object"),r=t.type(e);this.assert("Arguments"===r,"expected #{this} to be arguments but got "+r,"expected #{this} to not be arguments")}function p(e,t){t&&o(this,"message",t);var r=o(this,"object");if(o(this,"deep")){var n=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",n)}else this.assert(e===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function l(e,r){r&&o(this,"message",r),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function d(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),p=u?u+": ":"",l=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to above must be a number";else s=p+"the argument to above must be a date";if(f)throw new n(s,void 0,l);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m>e,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",e,m)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),p=u?u+": ":"",l=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to least must be a number";else s=p+"the argument to least must be a date";if(f)throw new n(s,void 0,l);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m>=e,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",e,m)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),p=u?u+": ":"",l=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to below must be a number";else s=p+"the argument to below must be a date";if(f)throw new n(s,void 0,l);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m<e,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",e,m)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function m(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),u=o(this,"message"),p=u?u+": ":"",l=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,u,l,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to most must be a number";else s=p+"the argument to most must be a date";if(f)throw new n(s,void 0,l);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m<=e,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",e,m)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function g(e,r){r&&o(this,"message",r);var i=o(this,"object"),s=o(this,"ssfi"),a=o(this,"message");try{var c=i instanceof e}catch(r){if(r instanceof TypeError)throw new n((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,s);throw r}var u=t.getName(e);null===u&&(u="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+u,"expected #{this} to not be an instance of "+u)}function y(e,r,i){i&&o(this,"message",i);var s=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),u=o(this,"object"),p=o(this,"ssfi"),l=typeof e;if(c=c?c+": ":"",s){if("string"!==l)throw new n(c+"the argument to property must be a string when using nested syntax",void 0,p)}else if("string"!==l&&"number"!==l&&"symbol"!==l)throw new n(c+"the argument to property must be a string, number, or symbol",void 0,p);if(s&&a)throw new n(c+'The "nested" and "own" flags cannot be combined.',void 0,p);if(null==u)throw new n(c+"Target cannot be null or undefined.",void 0,p);var d,h=o(this,"deep"),f=o(this,"negate"),m=s?t.getPathInfo(u,e):null,g=s?m.value:u[e],y="";h&&(y+="deep "),a&&(y+="own "),s&&(y+="nested "),y+="property ",d=a?Object.prototype.hasOwnProperty.call(u,e):s?m.exists:t.hasProperty(u,e),f&&1!==arguments.length||this.assert(d,"expected #{this} to have "+y+t.inspect(e),"expected #{this} to not have "+y+t.inspect(e)),arguments.length>1&&this.assert(d&&(h?t.eql(r,g):r===g),"expected #{this} to have "+y+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+y+t.inspect(e)+" of #{act}",r,g),o(this,"object",g)}function v(e,t,r){o(this,"own",!0),y.apply(this,arguments)}function b(e,r,n){"string"==typeof r&&(n=r,r=null),n&&o(this,"message",n);var i=o(this,"object"),s=Object.getOwnPropertyDescriptor(Object(i),e);s&&r?this.assert(t.eql(r,s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(r)+", got "+t.inspect(s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(r),r,s,!0):this.assert(s,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",s)}function w(){o(this,"doLength",!0)}function E(e,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=t.type(s).toLowerCase(),c=o(this,"message"),u=o(this,"ssfi"),p="length";switch(a){case"map":case"set":p="size",i=s.size;break;default:new r(s,c,u,!0).to.have.property("length"),i=s.length}this.assert(i==e,"expected #{this} to have a "+p+" of #{exp} but got #{act}","expected #{this} to not have a "+p+" of #{act}",e,i)}function x(e,t){t&&o(this,"message",t);var r=o(this,"object");this.assert(e.exec(r),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function S(e){var r,i,s=o(this,"object"),a=t.type(s),c=t.type(e),u=o(this,"ssfi"),p=o(this,"deep"),l="",d=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)l=p?"deeply ":"",i=[],s.forEach((function(e,t){i.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(i=t.getOwnEnumerableProperties(s),c){case"Array":if(arguments.length>1)throw new n(f,void 0,u);break;case"Object":if(arguments.length>1)throw new n(f,void 0,u);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new n(h+"keys required",void 0,u);var m=e.length,g=o(this,"any"),y=o(this,"all"),v=e;if(g||y||(y=!0),g&&(d=v.some((function(e){return i.some((function(r){return p?t.eql(e,r):e===r}))}))),y&&(d=v.every((function(e){return i.some((function(r){return p?t.eql(e,r):e===r}))})),o(this,"contains")||(d=d&&e.length==i.length)),m>1){var b=(e=e.map((function(e){return t.inspect(e)}))).pop();y&&(r=e.join(", ")+", and "+b),g&&(r=e.join(", ")+", or "+b)}else r=t.inspect(e[0]);r=(m>1?"keys ":"key ")+r,r=(o(this,"contains")?"contain ":"have ")+r,this.assert(d,"expected #{this} to "+l+r,"expected #{this} to not "+l+r,v.slice(0).sort(t.compareByInspect),i.sort(t.compareByInspect),!0)}function k(e,n,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"ssfi"),u=o(this,"message"),p=o(this,"negate")||!1;new r(a,u,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(n=e,e=null);try{a()}catch(e){s=e}var l=void 0===e&&void 0===n,d=Boolean(e&&n),h=!1,f=!1;if(l||!l&&!p){var m="an error";e instanceof Error?m="#{exp}":e&&(m=t.checkError.getConstructorName(e)),this.assert(s,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),s instanceof Error?s.toString():"string"==typeof s?s:s&&t.checkError.getConstructorName(s))}if(e&&s){if(e instanceof Error)t.checkError.compatibleInstance(s,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!p?" but #{act} was thrown":""),e.toString(),s.toString()));t.checkError.compatibleConstructor(s,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)))}if(s&&null!=n){var g="including";n instanceof RegExp&&(g="matching"),t.checkError.compatibleMessage(s,n)===p&&(d&&p?f=!0:this.assert(p,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",n,t.checkError.getMessage(s)))}h&&f&&this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)),o(this,"object",s)}function _(e,r){r&&o(this,"message",r);var n=o(this,"object"),i=o(this,"itself"),s="function"!=typeof n||i?n[e]:n.prototype[e];this.assert("function"==typeof s,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function P(e,r){r&&o(this,"message",r);var n=e(o(this,"object"));this.assert(n,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),n)}function C(e,t,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new r(s,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new n((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(s-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function A(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","change"),o(this,"realDelta",u!==i),this.assert(i!==u,"expected "+p+" to change","expected "+p+" to not change")}function T(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","increase"),o(this,"realDelta",u-i),this.assert(u-i>0,"expected "+p+" to increase","expected "+p+" to not increase")}function D(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var u=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",u),o(this,"deltaBehavior","decrease"),o(this,"realDelta",i-u),this.assert(u-i<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){r.addProperty(e)})),r.addProperty("not",(function(){o(this,"negate",!0)})),r.addProperty("deep",(function(){o(this,"deep",!0)})),r.addProperty("nested",(function(){o(this,"nested",!0)})),r.addProperty("own",(function(){o(this,"own",!0)})),r.addProperty("ordered",(function(){o(this,"ordered",!0)})),r.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),r.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),r.addChainableMethod("an",i),r.addChainableMethod("a",i),r.addChainableMethod("include",c,a),r.addChainableMethod("contain",c,a),r.addChainableMethod("contains",c,a),r.addChainableMethod("includes",c,a),r.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),r.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),r.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),r.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),r.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),r.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),r.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),r.addProperty("empty",(function(){var e,r=o(this,"object"),i=o(this,"ssfi"),s=o(this,"message");switch(s=s?s+": ":"",t.type(r).toLowerCase()){case"array":case"string":e=r.length;break;case"map":case"set":e=r.size;break;case"weakmap":case"weakset":throw new n(s+".empty was passed a weak collection",void 0,i);case"function":var a=s+".empty was passed a function "+t.getName(r);throw new n(a.trim(),void 0,i);default:if(r!==Object(r))throw new n(s+".empty was passed non-string primitive "+t.inspect(r),void 0,i);e=Object.keys(r).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),r.addProperty("arguments",u),r.addProperty("Arguments",u),r.addMethod("equal",p),r.addMethod("equals",p),r.addMethod("eq",p),r.addMethod("eql",l),r.addMethod("eqls",l),r.addMethod("above",d),r.addMethod("gt",d),r.addMethod("greaterThan",d),r.addMethod("least",h),r.addMethod("gte",h),r.addMethod("below",f),r.addMethod("lt",f),r.addMethod("lessThan",f),r.addMethod("most",m),r.addMethod("lte",m),r.addMethod("within",(function(e,i,s){s&&o(this,"message",s);var a,c=o(this,"object"),u=o(this,"doLength"),p=o(this,"message"),l=p?p+": ":"",d=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),m=t.type(i).toLowerCase(),g=!0,y="date"===f&&"date"===m?e.toUTCString()+".."+i.toUTCString():e+".."+i;if(u&&"map"!==h&&"set"!==h&&new r(c,p,d,!0).to.have.property("length"),u||"date"!==h||"date"===f&&"date"===m)if("number"===f&&"number"===m||!u&&"number"!==h)if(u||"date"===h||"number"===h)g=!1;else{a=l+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date"}else a=l+"the arguments to within must be numbers";else a=l+"the arguments to within must be dates";if(g)throw new n(a,void 0,d);if(u){var v,b="length";"map"===h||"set"===h?(b="size",v=c.size):v=c.length,this.assert(v>=e&&v<=i,"expected #{this} to have a "+b+" within "+y,"expected #{this} to not have a "+b+" within "+y)}else this.assert(c>=e&&c<=i,"expected #{this} to be within "+y,"expected #{this} to not be within "+y)})),r.addMethod("instanceof",g),r.addMethod("instanceOf",g),r.addMethod("property",y),r.addMethod("ownProperty",v),r.addMethod("haveOwnProperty",v),r.addMethod("ownPropertyDescriptor",b),r.addMethod("haveOwnPropertyDescriptor",b),r.addChainableMethod("length",E,w),r.addChainableMethod("lengthOf",E,w),r.addMethod("match",x),r.addMethod("matches",x),r.addMethod("string",(function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).is.a("string"),this.assert(~i.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),r.addMethod("keys",S),r.addMethod("key",S),r.addMethod("throw",k),r.addMethod("throws",k),r.addMethod("Throw",k),r.addMethod("respondTo",_),r.addMethod("respondsTo",_),r.addProperty("itself",(function(){o(this,"itself",!0)})),r.addMethod("satisfy",P),r.addMethod("satisfies",P),r.addMethod("closeTo",C),r.addMethod("approximately",C),r.addMethod("members",(function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).to.be.an("array"),new r(e,s,a,!0).to.be.an("array");var c,u,p,l=o(this,"contains"),d=o(this,"ordered");l?(u="expected #{this} to be "+(c=d?"an ordered superset":"a superset")+" of #{exp}",p="expected #{this} to not be "+c+" of #{exp}"):(u="expected #{this} to have the same "+(c=d?"ordered members":"members")+" as #{exp}",p="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,r,n,o){if(!n){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,i){if(o)return r?r(e,t[i]):e===t[i];if(!r){var s=t.indexOf(e);return-1!==s&&(n||t.splice(s,1),!0)}return t.some((function(o,i){return!!r(e,o)&&(n||t.splice(i,1),!0)}))}))}(e,i,h,l,d),u,p,e,i,!0)})),r.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),s=o(this,"ssfi");new r(e,i,s,!0).to.be.an("array"),this.assert(e.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,n)})),r.addMethod("change",A),r.addMethod("changes",A),r.addMethod("increase",T),r.addMethod("increases",T),r.addMethod("decrease",D),r.addMethod("decreases",D),r.addMethod("by",(function(e,t){t&&o(this,"message",t);var r,n=o(this,"deltaMsgObj"),i=o(this,"initialDeltaValue"),s=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");r="change"===a?Math.abs(s-i)===Math.abs(e):c===Math.abs(e),this.assert(r,"expected "+n+" to "+a+" by "+e,"expected "+n+" to not "+a+" by "+e)})),r.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),r.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),r.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),r.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,r){return new e.Assertion(t,r)},e.expect.fail=function(t,r,n,o){throw arguments.length<2&&(n=t,t=void 0),n=n||"expect.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion;function n(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)},configurable:!0});var t={fail:function(r,n,o,i){throw arguments.length<2&&(o=r,r=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:r,expected:n,operator:i},t.fail)},equal:function(e,t,n){new r(e,n).to.equal(t)},Throw:function(e,t,n,o){new r(e,o).to.Throw(t,n)},exist:function(e,t){new r(e,t).to.exist},not:{}};return t.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},t.not.Throw=function(e,t,n,o){new r(e,o).to.not.Throw(t,n)},t.not.exist=function(e,t){new r(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=n,e.Should=n}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var r=e.Assertion,n=t.flag,o=e.assert=function(t,n){new r(null,null,e.assert,!0).assert(t,n,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,r,n,i){throw arguments.length<2&&(n=t,t=void 0),n=n||"assert.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:i},o.fail)},o.isOk=function(e,t){new r(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new r(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,i){var s=new r(e,i,o.equal,!0);s.assert(t==n(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,i){var s=new r(e,i,o.notEqual,!0);s.assert(t!=n(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,n){new r(e,n,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,n){new r(e,n,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,n){new r(e,n,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,n){new r(e,n,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,n){new r(e,n,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,n){new r(e,n,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,n){new r(e,n,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,n){new r(e,n,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new r(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new r(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new r(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new r(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new r(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new r(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new r(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new r(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new r(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new r(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new r(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new r(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new r(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new r(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new r(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new r(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new r(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new r(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new r(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new r(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new r(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new r(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new r(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new r(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new r(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,n){new r(e,n,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,n){new r(e,n,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,n){new r(e,n,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,n){new r(e,n,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,n){new r(e,n,o.include,!0).include(t)},o.notInclude=function(e,t,n){new r(e,n,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,n){new r(e,n,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,n){new r(e,n,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,n){new r(e,n,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,n){new r(e,n,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,n){new r(e,n,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,n){new r(e,n,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,n){new r(e,n,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,n){new r(e,n,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,n){new r(e,n,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,n){new r(e,n,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,n){new r(e,n,o.match,!0).to.match(t)},o.notMatch=function(e,t,n){new r(e,n,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,n){new r(e,n,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,n){new r(e,n,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,n,i){new r(e,i,o.propertyVal,!0).to.have.property(t,n)},o.notPropertyVal=function(e,t,n,i){new r(e,i,o.notPropertyVal,!0).to.not.have.property(t,n)},o.deepPropertyVal=function(e,t,n,i){new r(e,i,o.deepPropertyVal,!0).to.have.deep.property(t,n)},o.notDeepPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},o.ownProperty=function(e,t,n){new r(e,n,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,n){new r(e,n,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,n,i){new r(e,i,o.ownPropertyVal,!0).to.have.own.property(t,n)},o.notOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},o.deepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},o.notDeepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},o.nestedProperty=function(e,t,n){new r(e,n,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,n){new r(e,n,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,n,i){new r(e,i,o.nestedPropertyVal,!0).to.have.nested.property(t,n)},o.notNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},o.deepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},o.notDeepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},o.lengthOf=function(e,t,n){new r(e,n,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,n){new r(e,n,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,n){new r(e,n,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,n){new r(e,n,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,n){new r(e,n,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,n){new r(e,n,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,n){new r(e,n,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,i,s){("string"==typeof t||t instanceof RegExp)&&(i=t,t=null);var a=new r(e,s,o.throws,!0).to.throw(t,i);return n(a,"object")},o.doesNotThrow=function(e,t,n,i){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new r(e,i,o.doesNotThrow,!0).to.not.throw(t,n)},o.operator=function(i,s,a,c){var u;switch(s){case"==":u=i==a;break;case"===":u=i===a;break;case">":u=i>a;break;case">=":u=i>=a;break;case"<":u=i<a;break;case"<=":u=i<=a;break;case"!=":u=i!=a;break;case"!==":u=i!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+s+'"',void 0,o.operator)}var p=new r(u,c,o.operator,!0);p.assert(!0===n(p,"object"),"expected "+t.inspect(i)+" to be "+s+" "+t.inspect(a),"expected "+t.inspect(i)+" to not be "+s+" "+t.inspect(a))},o.closeTo=function(e,t,n,i){new r(e,i,o.closeTo,!0).to.be.closeTo(t,n)},o.approximately=function(e,t,n,i){new r(e,i,o.approximately,!0).to.be.approximately(t,n)},o.sameMembers=function(e,t,n){new r(e,n,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,n){new r(e,n,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,n){new r(e,n,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,n){new r(e,n,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,n){new r(e,n,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,n){new r(e,n,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,n){new r(e,n,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,n){new r(e,n,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,n){new r(e,n,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,n){new r(e,n,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,n){new r(e,n,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,n){new r(e,n,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,n){new r(e,n,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,n){new r(e,n,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,n){new r(e,n,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,n,i){3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.changes,!0).to.change(t,n)},o.changesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesBy,!0).to.change(t,n).by(i)},o.doesNotChange=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotChange,!0).to.not.change(t,n)},o.changesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesButNotBy,!0).to.change(t,n).but.not.by(i)},o.increases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.increases,!0).to.increase(t,n)},o.increasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesBy,!0).to.increase(t,n).by(i)},o.doesNotIncrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotIncrease,!0).to.not.increase(t,n)},o.increasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesButNotBy,!0).to.increase(t,n).but.not.by(i)},o.decreases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.decreases,!0).to.decrease(t,n)},o.decreasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesBy,!0).to.decrease(t,n).by(i)},o.doesNotDecrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotDecrease,!0).to.not.decrease(t,n)},o.doesNotDecreaseBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);return new r(e,s,o.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(i)},o.decreasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(i)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new r(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new r(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new r(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new r(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new r(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new r(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new r(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new r(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,r){return o[r]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,r){(function(t){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){var r=t[s][1][e];return o(r||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var i=!1,s=0;s<n.length;s++)o(n[s]);return o}({"./aesprim":[function(e,t,r){!function(e,t){"use strict";t(void 0!==r?r:e.esprima={})}(this,(function(e){"use strict";var t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v;function b(e,t){if(!e)throw new Error("ASSERT: "+t)}function w(e){return e>=48&&e<=57}function E(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function x(e){return"01234567".indexOf(e)>=0}function S(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function k(e){return 10===e||13===e||8232===e||8233===e}function _(e){return 64==e||36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function P(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function C(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return"eval"===e||"arguments"===e}function T(e,t,r,n,o){var i;b("number"==typeof r,"Comment must have valid position"),y.lastCommentStart>=r||(y.lastCommentStart=r,i={type:e,value:t},v.range&&(i.range=[r,n]),v.loc&&(i.loc=o),v.comments.push(i),v.attachComment&&(v.leadingComments.push(i),v.trailingComments.push(i)))}function D(e){var t,r,n,o;for(t=l-e,r={start:{line:d,column:l-h-e}};l<f;)if(n=u.charCodeAt(l),++l,k(n))return v.comments&&(o=u.slice(t+e,l-1),r.end={line:d,column:l-h-1},T("Line",o,t,l-1,r)),13===n&&10===u.charCodeAt(l)&&++l,++d,void(h=l);v.comments&&(o=u.slice(t+e,l),r.end={line:d,column:l-h},T("Line",o,t,l,r))}function O(){var e,t,r,n;for(v.comments&&(e=l-2,t={start:{line:d,column:l-h-2}});l<f;)if(k(r=u.charCodeAt(l)))13===r&&10===u.charCodeAt(l+1)&&++l,++d,++l,h=l,l>=f&&X({},s.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===u.charCodeAt(l+1))return++l,++l,void(v.comments&&(n=u.slice(e+2,l-2),t.end={line:d,column:l-h},T("Block",n,e,l,t)));++l}else++l;X({},s.UnexpectedToken,"ILLEGAL")}function R(){var e,t;for(t=0===l;l<f;)if(S(e=u.charCodeAt(l)))++l;else if(k(e))++l,13===e&&10===u.charCodeAt(l)&&++l,++d,h=l,t=!0;else if(47===e)if(47===(e=u.charCodeAt(l+1)))++l,++l,D(2),t=!0;else{if(42!==e)break;++l,++l,O()}else if(t&&45===e){if(45!==u.charCodeAt(l+1)||62!==u.charCodeAt(l+2))break;l+=3,D(3)}else{if(60!==e)break;if("!--"!==u.slice(l+1,l+4))break;++l,++l,++l,++l,D(4)}}function N(e){var t,r,n,o=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(l<f&&E(u[l])))return"";n=u[l++],o=16*o+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(o)}function I(){var e,t;for(e=u.charCodeAt(l++),t=String.fromCharCode(e),92===e&&(117!==u.charCodeAt(l)&&X({},s.UnexpectedToken,"ILLEGAL"),++l,(e=N("u"))&&"\\"!==e&&_(e.charCodeAt(0))||X({},s.UnexpectedToken,"ILLEGAL"),t=e);l<f&&P(e=u.charCodeAt(l));)++l,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==u.charCodeAt(l)&&X({},s.UnexpectedToken,"ILLEGAL"),++l,(e=N("u"))&&"\\"!==e&&P(e.charCodeAt(0))||X({},s.UnexpectedToken,"ILLEGAL"),t+=e);return t}function j(){var e,r;return e=l,{type:1===(r=92===u.charCodeAt(l)?I():function(){var e,t;for(e=l++;l<f;){if(92===(t=u.charCodeAt(l)))return l=e,I();if(!P(t))break;++l}return u.slice(e,l)}()).length?t.Identifier:function(e){if(p&&C(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(r)?t.Keyword:"null"===r?t.NullLiteral:"true"===r||"false"===r?t.BooleanLiteral:t.Identifier,value:r,lineNumber:d,lineStart:h,start:e,end:l}}function F(){var e,r,n,o,i=l,a=u.charCodeAt(l),c=u[l];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++l,v.tokenize&&(40===a?v.openParenToken=v.tokens.length:123===a&&(v.openCurlyToken=v.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(a),lineNumber:d,lineStart:h,start:i,end:l};default:if(61===(e=u.charCodeAt(l+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return l+=2,{type:t.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:d,lineStart:h,start:i,end:l};case 33:case 61:return l+=2,61===u.charCodeAt(l)&&++l,{type:t.Punctuator,value:u.slice(i,l),lineNumber:d,lineStart:h,start:i,end:l}}}return">>>="===(o=u.substr(l,4))?{type:t.Punctuator,value:o,lineNumber:d,lineStart:h,start:i,end:l+=4}:">>>"===(n=o.substr(0,3))||"<<="===n||">>="===n?{type:t.Punctuator,value:n,lineNumber:d,lineStart:h,start:i,end:l+=3}:c===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(c)>=0||"=>"===r?{type:t.Punctuator,value:r,lineNumber:d,lineStart:h,start:i,end:l+=2}:"<>=!+-*%&|^/".indexOf(c)>=0?(++l,{type:t.Punctuator,value:c,lineNumber:d,lineStart:h,start:i,end:l}):void X({},s.UnexpectedToken,"ILLEGAL")}function M(){var e,r,n;if(b(w((n=u[l]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=l,e="","."!==n){if(e=u[l++],n=u[l],"0"===e){if("x"===n||"X"===n)return++l,function(e){for(var r="";l<f&&E(u[l]);)r+=u[l++];return 0===r.length&&X({},s.UnexpectedToken,"ILLEGAL"),_(u.charCodeAt(l))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:d,lineStart:h,start:e,end:l}}(r);if(x(n))return function(e){for(var r="0"+u[l++];l<f&&x(u[l]);)r+=u[l++];return(_(u.charCodeAt(l))||w(u.charCodeAt(l)))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:d,lineStart:h,start:e,end:l}}(r);n&&w(n.charCodeAt(0))&&X({},s.UnexpectedToken,"ILLEGAL")}for(;w(u.charCodeAt(l));)e+=u[l++];n=u[l]}if("."===n){for(e+=u[l++];w(u.charCodeAt(l));)e+=u[l++];n=u[l]}if("e"===n||"E"===n)if(e+=u[l++],"+"!==(n=u[l])&&"-"!==n||(e+=u[l++]),w(u.charCodeAt(l)))for(;w(u.charCodeAt(l));)e+=u[l++];else X({},s.UnexpectedToken,"ILLEGAL");return _(u.charCodeAt(l))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:h,start:r,end:l}}function L(){var e,r,n,o;return g=null,R(),e=l,r=function(){var e,t,r,n;for(b("/"===(e=u[l]),"Regular expression literal must start with a slash"),t=u[l++],r=!1,n=!1;l<f;)if(t+=e=u[l++],"\\"===e)k((e=u[l++]).charCodeAt(0))&&X({},s.UnterminatedRegExp),t+=e;else if(k(e.charCodeAt(0)))X({},s.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||X({},s.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,r,n;for(t="",r="";l<f&&P((e=u[l]).charCodeAt(0));)if(++l,"\\"===e&&l<f)if("u"===(e=u[l])){if(n=++l,e=N("u"))for(r+=e,t+="\\u";n<l;++n)t+=u[n];else l=n,r+="u",t+="\\u";J({},s.UnexpectedToken,"ILLEGAL")}else t+="\\",J({},s.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),o=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){X({},s.InvalidRegExp)}return r}(r.value,n.value),v.tokenize?{type:t.RegularExpression,value:o,lineNumber:d,lineStart:h,start:e,end:l}:{literal:r.literal+n.literal,value:o,start:e,end:l}}function G(){var e,t,r,n;return R(),e=l,t={start:{line:d,column:l-h}},r=L(),t.end={line:d,column:l-h},v.tokenize||(v.tokens.length>0&&(n=v.tokens[v.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||v.tokens.pop()),v.tokens.push({type:"RegularExpression",value:r.literal,range:[e,l],loc:t})),r}function B(){var e;return R(),l>=f?{type:t.EOF,lineNumber:d,lineStart:h,start:l,end:l}:_(e=u.charCodeAt(l))?j():40===e||41===e||59===e?F():39===e||34===e?function(){var e,r,n,o,i,a,c,p,m="",g=!1;for(c=d,p=h,b("'"===(e=u[l])||'"'===e,"String literal must starts with a quote"),r=l,++l;l<f;){if((n=u[l++])===e){e="";break}if("\\"===n)if((n=u[l++])&&k(n.charCodeAt(0)))++d,"\r"===n&&"\n"===u[l]&&++l,h=l;else switch(n){case"u":case"x":a=l,(i=N(n))?m+=i:(l=a,m+=n);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:x(n)?(0!==(o="01234567".indexOf(n))&&(g=!0),l<f&&x(u[l])&&(g=!0,o=8*o+"01234567".indexOf(u[l++]),"0123".indexOf(n)>=0&&l<f&&x(u[l])&&(o=8*o+"01234567".indexOf(u[l++]))),m+=String.fromCharCode(o)):m+=n}else{if(k(n.charCodeAt(0)))break;m+=n}}return""!==e&&X({},s.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:m,octal:g,startLineNumber:c,startLineStart:p,lineNumber:d,lineStart:h,start:r,end:l}}():46===e?w(u.charCodeAt(l+1))?M():F():w(e)?M():v.tokenize&&47===e?function(){var e,t;if(!(e=v.tokens[v.tokens.length-1]))return G();if("Punctuator"===e.type){if("]"===e.value)return F();if(")"===e.value)return!(t=v.tokens[v.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?F():G();if("}"===e.value){if(v.tokens[v.openCurlyToken-3]&&"Keyword"===v.tokens[v.openCurlyToken-3].type){if(!(t=v.tokens[v.openCurlyToken-4]))return F()}else{if(!v.tokens[v.openCurlyToken-4]||"Keyword"!==v.tokens[v.openCurlyToken-4].type)return F();if(!(t=v.tokens[v.openCurlyToken-5]))return G()}return n.indexOf(t.value)>=0?F():G()}return G()}return"Keyword"===e.type?G():F()}():F()}function U(){var e,n,o;return R(),e={start:{line:d,column:l-h}},n=B(),e.end={line:d,column:l-h},n.type!==t.EOF&&(o=u.slice(n.start,n.end),v.tokens.push({type:r[n.type],value:o,range:[n.start,n.end],loc:e})),n}function q(){var e;return l=(e=g).end,d=e.lineNumber,h=e.lineStart,g=void 0!==v.tokens?U():B(),l=e.end,d=e.lineNumber,h=e.lineStart,e}function z(){var e,t,r;e=l,t=d,r=h,g=void 0!==v.tokens?U():B(),l=e,d=t,h=r}function $(e,t){this.line=e,this.column=t}function H(e,t,r,n){this.start=new $(e,t),this.end=new $(r,n)}function V(){var e,t,r,n;return e=l,t=d,r=h,R(),n=d!==t,l=e,d=t,h=r,n}function X(e,t){var r,n=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,(function(e,t){return b(t<n.length,"Message reference must be in range"),n[t]}));throw"number"==typeof e.lineNumber?((r=new Error("Line "+e.lineNumber+": "+o)).index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-h+1):((r=new Error("Line "+d+": "+o)).index=l,r.lineNumber=d,r.column=l-h+1),r.description=o,r}function J(){try{X.apply(null,arguments)}catch(e){if(!v.errors)throw e;v.errors.push(e)}}function W(e){if(e.type===t.EOF&&X(e,s.UnexpectedEOS),e.type===t.NumericLiteral&&X(e,s.UnexpectedNumber),e.type===t.StringLiteral&&X(e,s.UnexpectedString),e.type===t.Identifier&&X(e,s.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))X(e,s.UnexpectedReserved);else if(p&&C(e.value))return void J(e,s.StrictReservedWord);X(e,s.UnexpectedToken,e.value)}X(e,s.UnexpectedToken,e.value)}function Y(e){var r=q();r.type===t.Punctuator&&r.value===e||W(r)}function K(e){var r=q();r.type===t.Keyword&&r.value===e||W(r)}function Q(e){return g.type===t.Punctuator&&g.value===e}function Z(e){return g.type===t.Keyword&&g.value===e}function ee(){var e;59===u.charCodeAt(l)||Q(";")?q():(e=d,R(),d===e&&(g.type===t.EOF||Q("}")||W(g)))}function te(e){return e.type===o.Identifier||e.type===o.MemberExpression}function re(e,t){var r,n,o;return r=p,o=g,n=_e(),t&&p&&A(e[0].name)&&J(t,s.StrictParamName),p=r,m.markEnd(m.createFunctionExpression(null,e,[],n),o)}function ne(){var e,r;return r=g,(e=q()).type===t.StringLiteral||e.type===t.NumericLiteral?(p&&e.octal&&J(e,s.StrictOctalLiteral),m.markEnd(m.createLiteral(e),r)):m.markEnd(m.createIdentifier(e.value),r)}function oe(){var e,r,n,o,i,a;return a=g,(e=g).type===t.Identifier?(n=ne(),"get"!==e.value||Q(":")?"set"!==e.value||Q(":")?(Y(":"),o=me(),m.markEnd(m.createProperty("init",n,o),a)):(r=ne(),Y("("),(e=g).type!==t.Identifier?(Y(")"),J(e,s.UnexpectedToken,e.value),o=re([])):(i=[ve()],Y(")"),o=re(i,e)),m.markEnd(m.createProperty("set",r,o),a)):(r=ne(),Y("("),Y(")"),o=re([]),m.markEnd(m.createProperty("get",r,o),a))):e.type!==t.EOF&&e.type!==t.Punctuator?(r=ne(),Y(":"),o=me(),m.markEnd(m.createProperty("init",r,o),a)):void W(e)}function ie(){var e,r,n,a;if(Q("("))return function(){var e;return Y("("),e=ge(),Y(")"),e}();if(Q("["))return function(){var e,t=[];for(e=g,Y("[");!Q("]");)Q(",")?(q(),t.push(null)):(t.push(me()),Q("]")||Y(","));return q(),m.markEnd(m.createArrayExpression(t),e)}();if(Q("{"))return function(){var e,t,r,n,a,c=[],u={},l=String;for(a=g,Y("{");!Q("}");)t=(e=oe()).key.type===o.Identifier?e.key.name:l(e.key.value),n="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,r="$"+t,Object.prototype.hasOwnProperty.call(u,r)?(u[r]===i.Data?p&&n===i.Data?J({},s.StrictDuplicateProperty):n!==i.Data&&J({},s.AccessorDataProperty):n===i.Data?J({},s.AccessorDataProperty):u[r]&n&&J({},s.AccessorGetSet),u[r]|=n):u[r]=n,c.push(e),Q("}")||Y(",");return Y("}"),m.markEnd(m.createObjectExpression(c),a)}();if(e=g.type,a=g,e===t.Identifier)n=m.createIdentifier(q().value);else if(e===t.StringLiteral||e===t.NumericLiteral)p&&g.octal&&J(g,s.StrictOctalLiteral),n=m.createLiteral(q());else if(e===t.Keyword){if(Z("function"))return function(){var e,t,r,n,o,i,a,c,u,l=null;return u=g,K("function"),Q("(")||(e=g,l=ve(),p?A(e.value)&&J(e,s.StrictFunctionName):A(e.value)?(r=e,n=s.StrictFunctionName):C(e.value)&&(r=e,n=s.StrictReservedWord)),o=Pe(r),i=o.params,t=o.stricted,r=o.firstRestricted,o.message&&(n=o.message),c=p,a=_e(),p&&r&&X(r,n),p&&t&&J(t,n),p=c,m.markEnd(m.createFunctionExpression(l,i,[],a),u)}();Z("this")?(q(),n=m.createThisExpression()):W(q())}else e===t.BooleanLiteral?((r=q()).value="true"===r.value,n=m.createLiteral(r)):e===t.NullLiteral?((r=q()).value=null,n=m.createLiteral(r)):Q("/")||Q("/=")?(n=void 0!==v.tokens?m.createLiteral(G()):m.createLiteral(L()),z()):W(q());return m.markEnd(n,a)}function se(){var e=[];if(Y("("),!Q(")"))for(;l<f&&(e.push(me()),!Q(")"));)Y(",");return Y(")"),e}function ae(){var e,r;return r=g,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=q())||W(e),m.markEnd(m.createIdentifier(e.value),r)}function ce(){return Y("."),ae()}function ue(){var e;return Y("["),e=ge(),Y("]"),e}function pe(){var e,t,r;return r=g,K("new"),e=function(){var e,t,r,n;for(n=g,e=y.allowIn,t=Z("new")?pe():ie(),y.allowIn=e;Q(".")||Q("[");)Q("[")?(r=ue(),t=m.createMemberExpression("[",t,r)):(r=ce(),t=m.createMemberExpression(".",t,r)),m.markEnd(t,n);return t}(),t=Q("(")?se():[],m.markEnd(m.createNewExpression(e,t),r)}function le(){var e,r,n=g;return e=function(){var e,t,r,n,o;for(o=g,e=y.allowIn,y.allowIn=!0,t=Z("new")?pe():ie(),y.allowIn=e;;){if(Q("."))n=ce(),t=m.createMemberExpression(".",t,n);else if(Q("("))r=se(),t=m.createCallExpression(t,r);else{if(!Q("["))break;n=ue(),t=m.createMemberExpression("[",t,n)}m.markEnd(t,o)}return t}(),g.type===t.Punctuator&&(!Q("++")&&!Q("--")||V()||(p&&e.type===o.Identifier&&A(e.name)&&J({},s.StrictLHSPostfix),te(e)||J({},s.InvalidLHSInAssignment),r=q(),e=m.markEnd(m.createPostfixExpression(r.value,e),n))),e}function de(){var e,r,n;return g.type!==t.Punctuator&&g.type!==t.Keyword?r=le():Q("++")||Q("--")?(n=g,e=q(),r=de(),p&&r.type===o.Identifier&&A(r.name)&&J({},s.StrictLHSPrefix),te(r)||J({},s.InvalidLHSInAssignment),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Q("+")||Q("-")||Q("~")||Q("!")?(n=g,e=q(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Z("delete")||Z("void")||Z("typeof")?(n=g,e=q(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n),p&&"delete"===r.operator&&r.argument.type===o.Identifier&&J({},s.StrictDelete)):r=le(),r}function he(e,r){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function fe(){var e,t,r,n,o;return o=g,e=function(){var e,t,r,n,o,i,s,a,c,u;if(e=g,c=de(),0===(o=he(n=g,y.allowIn)))return c;for(n.prec=o,q(),t=[e,g],i=[c,n,s=de()];(o=he(g,y.allowIn))>0;){for(;i.length>2&&o<=i[i.length-2].prec;)s=i.pop(),a=i.pop().value,c=i.pop(),r=m.createBinaryExpression(a,c,s),t.pop(),e=t[t.length-1],m.markEnd(r,e),i.push(r);(n=q()).prec=o,i.push(n),t.push(g),r=de(),i.push(r)}for(r=i[u=i.length-1],t.pop();u>1;)r=m.createBinaryExpression(i[u-1].value,i[u-2],r),u-=2,e=t.pop(),m.markEnd(r,e);return r}(),Q("?")&&(q(),t=y.allowIn,y.allowIn=!0,r=me(),y.allowIn=t,Y(":"),n=me(),e=m.createConditionalExpression(e,r,n),m.markEnd(e,o)),e}function me(){var e,r,n,i,a,c;return e=g,a=g,i=r=fe(),g.type!==t.Punctuator||"="!==(c=g.value)&&"*="!==c&&"/="!==c&&"%="!==c&&"+="!==c&&"-="!==c&&"<<="!==c&&">>="!==c&&">>>="!==c&&"&="!==c&&"^="!==c&&"|="!==c||(te(r)||J({},s.InvalidLHSInAssignment),p&&r.type===o.Identifier&&A(r.name)&&J(e,s.StrictLHSAssignment),e=q(),n=me(),i=m.markEnd(m.createAssignmentExpression(e.value,r,n),a)),i}function ge(){var e,t=g;if(e=me(),Q(",")){for(e=m.createSequenceExpression([e]);l<f&&Q(",");)q(),e.expressions.push(me());m.markEnd(e,t)}return e}function ye(){var e,t;return t=g,Y("{"),e=function(){for(var e,t=[];l<f&&!Q("}")&&void 0!==(e=Ae());)t.push(e);return t}(),Y("}"),m.markEnd(m.createBlockStatement(e),t)}function ve(){var e,r;return r=g,(e=q()).type!==t.Identifier&&W(e),m.markEnd(m.createIdentifier(e.value),r)}function be(e){var t,r,n=null;return r=g,t=ve(),p&&A(t.name)&&J({},s.StrictVarName),"const"===e?(Y("="),n=me()):Q("=")&&(q(),n=me()),m.markEnd(m.createVariableDeclarator(t,n),r)}function we(e){var t=[];do{if(t.push(be(e)),!Q(","))break;q()}while(l<f);return t}function Ee(){var e,t,r,n,o,i,a,c,u,p;return e=t=r=null,K("for"),Y("("),Q(";")?q():(Z("var")||Z("let")?(y.allowIn=!1,p=g,c=q(),u=we(),e=m.markEnd(m.createVariableDeclaration(u,c.value),p),y.allowIn=!0,1===e.declarations.length&&Z("in")&&(q(),n=e,o=ge(),e=null)):(y.allowIn=!1,e=ge(),y.allowIn=!0,Z("in")&&(te(e)||J({},s.InvalidLHSInForIn),q(),n=e,o=ge(),e=null)),void 0===n&&Y(";")),void 0===n&&(Q(";")||(t=ge()),Y(";"),Q(")")||(r=ge())),Y(")"),a=y.inIteration,y.inIteration=!0,i=ke(),y.inIteration=a,void 0===n?m.createForStatement(e,t,r,i):m.createForInStatement(n,o,i)}function xe(){var e,t,r,n=[];for(r=g,Z("default")?(q(),e=null):(K("case"),e=ge()),Y(":");l<f&&!(Q("}")||Z("default")||Z("case"));)t=ke(),n.push(t);return m.markEnd(m.createSwitchCase(e,n),r)}function Se(){var e,t,r,n,o=[],i=null;return K("try"),e=ye(),Z("catch")&&o.push((n=g,K("catch"),Y("("),Q(")")&&W(g),t=ve(),p&&A(t.name)&&J({},s.StrictCatchVariable),Y(")"),r=ye(),m.markEnd(m.createCatchClause(t,r),n))),Z("finally")&&(q(),i=ye()),0!==o.length||i||X({},s.NoCatchOrFinally),m.createTryStatement(e,[],o,i)}function ke(){var e,r,n,i,a,c,d,h,v,b=g.type;if(b===t.EOF&&W(g),b===t.Punctuator&&"{"===g.value)return ye();if(i=g,b===t.Punctuator)switch(g.value){case";":return m.markEnd((Y(";"),m.createEmptyStatement()),i);case"(":return m.markEnd(function(){var e=ge();return ee(),m.createExpressionStatement(e)}(),i)}if(b===t.Keyword)switch(g.value){case"break":return m.markEnd(function(){var e,r=null;return K("break"),59===u.charCodeAt(l)?(q(),y.inIteration||y.inSwitch||X({},s.IllegalBreak),m.createBreakStatement(null)):V()?(y.inIteration||y.inSwitch||X({},s.IllegalBreak),m.createBreakStatement(null)):(g.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||X({},s.UnknownLabel,r.name)),ee(),null!==r||y.inIteration||y.inSwitch||X({},s.IllegalBreak),m.createBreakStatement(r))}(),i);case"continue":return m.markEnd(function(){var e,r=null;return K("continue"),59===u.charCodeAt(l)?(q(),y.inIteration||X({},s.IllegalContinue),m.createContinueStatement(null)):V()?(y.inIteration||X({},s.IllegalContinue),m.createContinueStatement(null)):(g.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||X({},s.UnknownLabel,r.name)),ee(),null!==r||y.inIteration||X({},s.IllegalContinue),m.createContinueStatement(r))}(),i);case"debugger":return m.markEnd((K("debugger"),ee(),m.createDebuggerStatement()),i);case"do":return m.markEnd((K("do"),v=y.inIteration,y.inIteration=!0,d=ke(),y.inIteration=v,K("while"),Y("("),h=ge(),Y(")"),Q(";")&&q(),m.createDoWhileStatement(d,h)),i);case"for":return m.markEnd(Ee(),i);case"function":return m.markEnd(Ce(),i);case"if":return m.markEnd(function(){var e,t,r;return K("if"),Y("("),e=ge(),Y(")"),t=ke(),Z("else")?(q(),r=ke()):r=null,m.createIfStatement(e,t,r)}(),i);case"return":return m.markEnd((c=null,K("return"),y.inFunctionBody||J({},s.IllegalReturn),32===u.charCodeAt(l)&&_(u.charCodeAt(l+1))?(c=ge(),ee(),m.createReturnStatement(c)):V()?m.createReturnStatement(null):(Q(";")||Q("}")||g.type===t.EOF||(c=ge()),ee(),m.createReturnStatement(c))),i);case"switch":return m.markEnd(function(){var e,t,r,n,o;if(K("switch"),Y("("),e=ge(),Y(")"),Y("{"),t=[],Q("}"))return q(),m.createSwitchStatement(e,t);for(n=y.inSwitch,y.inSwitch=!0,o=!1;l<f&&!Q("}");)null===(r=xe()).test&&(o&&X({},s.MultipleDefaultsInSwitch),o=!0),t.push(r);return y.inSwitch=n,Y("}"),m.createSwitchStatement(e,t)}(),i);case"throw":return m.markEnd(function(){var e;return K("throw"),V()&&X({},s.NewlineAfterThrow),e=ge(),ee(),m.createThrowStatement(e)}(),i);case"try":return m.markEnd(Se(),i);case"var":return m.markEnd((K("var"),a=we(),ee(),m.createVariableDeclaration(a,"var")),i);case"while":return m.markEnd(function(){var e,t,r;return K("while"),Y("("),e=ge(),Y(")"),r=y.inIteration,y.inIteration=!0,t=ke(),y.inIteration=r,m.createWhileStatement(e,t)}(),i);case"with":return m.markEnd(function(){var e,t;return p&&(R(),J({},s.StrictModeWith)),K("with"),Y("("),e=ge(),Y(")"),t=ke(),m.createWithStatement(e,t)}(),i)}return(e=ge()).type===o.Identifier&&Q(":")?(q(),n="$"+e.name,Object.prototype.hasOwnProperty.call(y.labelSet,n)&&X({},s.Redeclaration,"Label",e.name),y.labelSet[n]=!0,r=ke(),delete y.labelSet[n],m.markEnd(m.createLabeledStatement(e,r),i)):(ee(),m.markEnd(m.createExpressionStatement(e),i))}function _e(){var e,r,n,i,a,c,d,h,v=[];for(h=g,Y("{");l<f&&g.type===t.StringLiteral&&(r=g,e=Ae(),v.push(e),e.expression.type===o.Literal);)"use strict"===u.slice(r.start+1,r.end-1)?(p=!0,n&&J(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(i=y.labelSet,a=y.inIteration,c=y.inSwitch,d=y.inFunctionBody,y.labelSet={},y.inIteration=!1,y.inSwitch=!1,y.inFunctionBody=!0;l<f&&!Q("}")&&void 0!==(e=Ae());)v.push(e);return Y("}"),y.labelSet=i,y.inIteration=a,y.inSwitch=c,y.inFunctionBody=d,m.markEnd(m.createBlockStatement(v),h)}function Pe(e){var t,r,n,o,i,a,c=[];if(Y("("),!Q(")"))for(o={};l<f&&(r=g,t=ve(),i="$"+r.value,p?(A(r.value)&&(n=r,a=s.StrictParamName),Object.prototype.hasOwnProperty.call(o,i)&&(n=r,a=s.StrictParamDupe)):e||(A(r.value)?(e=r,a=s.StrictParamName):C(r.value)?(e=r,a=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(o,i)&&(e=r,a=s.StrictParamDupe)),c.push(t),o[i]=!0,!Q(")"));)Y(",");return Y(")"),{params:c,stricted:n,firstRestricted:e,message:a}}function Ce(){var e,t,r,n,o,i,a,c,u,l;return l=g,K("function"),n=g,e=ve(),p?A(n.value)&&J(n,s.StrictFunctionName):A(n.value)?(a=n,c=s.StrictFunctionName):C(n.value)&&(a=n,c=s.StrictReservedWord),t=(i=Pe(a)).params,o=i.stricted,a=i.firstRestricted,i.message&&(c=i.message),u=p,r=_e(),p&&a&&X(a,c),p&&o&&J(o,c),p=u,m.markEnd(m.createFunctionDeclaration(e,t,[],r),l)}function Ae(){if(g.type===t.Keyword)switch(g.value){case"const":case"let":return e=g.value,n=g,K(e),r=we(e),ee(),m.markEnd(m.createVariableDeclaration(r,e),n);case"function":return Ce();default:return ke()}var e,r,n;if(g.type!==t.EOF)return ke()}function Te(){var e,r;return R(),z(),r=g,p=!1,e=function(){for(var e,r,n,i=[];l<f&&(r=g).type===t.StringLiteral&&(e=Ae(),i.push(e),e.expression.type===o.Literal);)"use strict"===u.slice(r.start+1,r.end-1)?(p=!0,n&&J(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;l<f&&void 0!==(e=Ae());)i.push(e);return i}(),m.markEnd(m.createProgram(e),r)}function De(){var e,t,r,n=[];for(e=0;e<v.tokens.length;++e)r={type:(t=v.tokens[e]).type,value:t.value},v.range&&(r.range=t.range),v.loc&&(r.loc=t.loc),n.push(r);v.tokens=n}(r={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",r[t.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],o={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},a={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},c={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===o.Program&&e.body.length>0)){for(v.trailingComments.length>0?v.trailingComments[0].range[0]>=e.range[1]?(r=v.trailingComments,v.trailingComments=[]):v.trailingComments.length=0:v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=v.bottomRightStack[v.bottomRightStack.length-1].trailingComments,delete v.bottomRightStack[v.bottomRightStack.length-1].trailingComments);v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].range[0]>=e.range[0];)t=v.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):v.leadingComments.length>0&&v.leadingComments[v.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=v.leadingComments,v.leadingComments=[]),r&&(e.trailingComments=r),v.bottomRightStack.push(e)}},markEnd:function(e,t){return v.range&&(e.range=[t.start,l]),v.loc&&(e.loc=new H(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,l-h),this.postProcess(e)),v.attachComment&&this.processComment(e),e},postProcess:function(e){return v.source&&(e.loc.source=v.source),e},createArrayExpression:function(e){return{type:o.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:o.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?o.LogicalExpression:o.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:o.BlockStatement,body:e}},createBreakStatement:function(e){return{type:o.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:o.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:o.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:o.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:o.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:o.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:o.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:o.EmptyStatement}},createExpressionStatement:function(e){return{type:o.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:o.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:o.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:o.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:o.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:o.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:o.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:o.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:o.Literal,value:e.value,raw:u.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:o.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:o.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:o.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:o.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:o.Program,body:e}},createProperty:function(e,t,r){return{type:o.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:o.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:o.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:o.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:o.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:o.ThisExpression}},createThrowStatement:function(e){return{type:o.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:o.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:o.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:o.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:o.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:o.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:o.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:o.WithStatement,object:e,body:t}}},e.version="1.2.2",e.tokenize=function(e,r){var n;"string"==typeof e||e instanceof String||(e=String(e)),m=c,l=0,d=(u=e).length>0?1:0,h=0,f=u.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},(r=r||{}).tokens=!0,v.tokens=[],v.tokenize=!0,v.openParenToken=-1,v.openCurlyToken=-1,v.range="boolean"==typeof r.range&&r.range,v.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(v.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(v.errors=[]);try{if(z(),g.type===t.EOF)return v.tokens;for(q();g.type!==t.EOF;)try{q()}catch(e){if(v.errors){v.errors.push(e);break}throw e}De(),n=v.tokens,void 0!==v.comments&&(n.comments=v.comments),void 0!==v.errors&&(n.errors=v.errors)}catch(e){throw e}finally{v={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=c,l=0,d=(u=e).length>0?1:0,h=0,f=u.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},void 0!==t&&(v.range="boolean"==typeof t.range&&t.range,v.loc="boolean"==typeof t.loc&&t.loc,v.attachComment="boolean"==typeof t.attachComment&&t.attachComment,v.loc&&null!==t.source&&void 0!==t.source&&(v.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(v.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(v.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(v.errors=[]),v.attachComment&&(v.range=!0,v.comments=[],v.bottomRightStack=[],v.trailingComments=[],v.leadingComments=[]));try{r=Te(),void 0!==v.comments&&(r.comments=v.comments),void 0!==v.tokens&&(De(),r.tokens=v.tokens),void 0!==v.errors&&(r.errors=v.errors)}catch(e){throw e}finally{v={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),o)o.hasOwnProperty(e)&&(t[e]=o[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()}))},{}],1:[function(e,t,r){(function(n){var o=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(e,r,n,o,i,s,a){o.ast||(o.ast=t,t.initialize());var c=s.length-1;switch(i){case 1:return o.ast.set({expression:{type:"root",value:s[c]}}),o.ast.unshift(),o.ast.yield();case 2:return o.ast.set({expression:{type:"root",value:s[c-1]}}),o.ast.unshift(),o.ast.yield();case 3:return o.ast.unshift(),o.ast.yield();case 4:return o.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:s[c-1]}}),o.ast.unshift(),o.ast.yield();case 5:case 6:break;case 7:o.ast.set({operation:"member"}),o.ast.push();break;case 8:o.ast.set({operation:"subscript"}),o.ast.push();break;case 9:o.ast.set({scope:"child"});break;case 10:o.ast.set({scope:"descendant"});break;case 11:break;case 12:o.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:o.ast.set({expression:{type:"wildcard",value:s[c]}});break;case 15:o.ast.set({expression:{type:"identifier",value:s[c]}});break;case 16:o.ast.set({expression:{type:"script_expression",value:s[c]}});break;case 17:o.ast.set({expression:{type:"numeric_literal",value:parseInt(s[c])}});break;case 18:break;case 19:o.ast.set({scope:"child"});break;case 20:o.ast.set({scope:"descendant"});break;case 21:case 22:case 23:break;case 24:s[c].length>1?o.ast.set({expression:{type:"union",value:s[c]}}):this.$=s[c];break;case 25:this.$=[s[c]];break;case 26:this.$=s[c-2].concat(s[c]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(s[c])}},o.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:s[c]}},o.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:s[c]}},o.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:s[c]}},o.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:s[c]}},o.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:s[c]}},o.ast.set(this.$);break;case 33:case 34:this.$=s[c]}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,s="",a=0,c=0,u=0,p=2,l=1,d=o.slice.call(arguments,1);this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;function m(){var e;return"number"!=typeof(e=t.lexer.lex()||l)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,y,v,b,w,E,x,S,k,_={};;){if(v=r[r.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null==g&&(g=m()),b=i[v]&&i[v][g]),void 0===b||!b.length||!b[0]){var P="";for(E in k=[],i[v])this.terminals_[E]&&E>p&&k.push("'"+this.terminals_[E]+"'");P=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(a+1)+": Unexpected "+(g==l?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(P,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:h,expected:k})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(b[0]){case 1:r.push(g),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(b[1]),g=null,y?(g=y,y=null):(c=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],_.$=n[n.length-x],_._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},f&&(_._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),void 0!==(w=this.performAction.apply(_,[s,c,a,this.yy,b[1],n,o].concat(d))))return w;x&&(r=r.slice(0,-1*x*2),n=n.slice(0,-1*x),o=o.slice(0,-1*x)),r.push(this.productions_[b[1]][0]),n.push(_.$),o.push(_._$),S=i[r[r.length-2]][r[r.length-1]],r.push(S);break;case 3:return!0}}return!0}},t={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(e){for(var t in e)this._node[t]=e[t];return this._node},node:function(e){return arguments.length&&(this._node=e),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var e=this._nodes;return this.initialize(),e}},r={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((r=this._input.match(this.rules[o[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,o[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,o[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return t.yytext=t.yytext.substr(1,t.yyleng-2),32;case 11:return t.yytext=t.yytext.substr(1,t.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function n(){this.yy={}}return e.lexer=r,n.prototype=e,e.Parser=n,new n}();void 0!==e&&void 0!==r&&(r.parser=o,r.Parser=o.Parser,r.parse=function(){return o.parse.apply(o,arguments)},r.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),n.exit(1));var o=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return r.parser.parse(o)},void 0!==t&&e.main===t&&r.main(n.argv.slice(1)))}).call(this,e("_process"))},{_process:14,fs:12,path:13}],2:[function(e,t,r){t.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(e,t,r){var n=e("./dict"),o=e("fs"),i={lex:{macros:{esc:"\\\\",int:n.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[n.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[n.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[n.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};o.readFileSync&&(i.moduleInclude=o.readFileSync(e.resolve("../include/module.js")),i.actionInclude=o.readFileSync(e.resolve("../include/action.js"))),t.exports=i},{"./dict":2,fs:12}],4:[function(e,t,r){var n=e("./aesprim"),o=e("./slice"),i=e("static-eval"),s=e("underscore").uniq,a=function(){return this.initialize.apply(this,arguments)};function c(t,r,o){var i=e("./index"),s=h(n.parse(r).body[0].expression,{"@":t.value}),a=o.replace(/\{\{\s*value\s*\}\}/g,s),c=i.nodes(t.value,a);return c.forEach((function(e){e.path=t.path.concat(e.path.slice(1))})),c}function u(e){return Array.isArray(e)}function p(e){return function(t,r,n,o){var i=t.value,s=t.path,a=[],c=function(t,i){var s;u(t)?(t.forEach((function(e,t){a.length>=o||n(t,e,r)&&a.push({path:i.concat(t),value:e})})),t.forEach((function(t,r){a.length>=o||e&&c(t,i.concat(r))}))):(s=t)&&!(s instanceof Array)&&s instanceof Object&&(this.keys(t).forEach((function(e){a.length>=o||n(e,t[e],r)&&a.push({path:i.concat(e),value:t[e]})})),this.keys(t).forEach((function(r){a.length>=o||e&&c(t[r],i.concat(r))})))}.bind(this);return c(i,s),a}}function l(e){return function(t,r,n){return this.descend(r,t.expression.value,e,n)}}function d(e){return function(t,r,n){return this.traverse(r,t.expression.value,e,n)}}function h(){try{return i.apply(this,arguments)}catch(e){}}function f(e){return e=e.filter((function(e){return e})),s(e,(function(e){return e.path.map((function(e){return String(e).replace("-","--")})).join("-")}))}function m(e){var t=String(e);return t.match(/^-?[0-9]+$/)?parseInt(t):null}a.prototype.initialize=function(){this.traverse=p(!0),this.descend=p()},a.prototype.keys=Object.keys,a.prototype.resolve=function(e){var t=[e.operation,e.scope,e.expression.type].join("-"),r=this._fns[t];if(!r)throw new Error("couldn't resolve key: "+t);return r.bind(this)},a.prototype.register=function(e,t){if(!t instanceof Function)throw new Error("handler must be a function");this._fns[e]=t},a.prototype._fns={"member-child-identifier":function(e,t){var r=e.expression.value,n=t.value;if(n instanceof Object&&r in n)return[{value:n[r],path:t.path.concat(r)}]},"member-descendant-identifier":d((function(e,t,r){return e==r})),"subscript-child-numeric_literal":l((function(e,t,r){return e===r})),"member-child-numeric_literal":l((function(e,t,r){return String(e)===String(r)})),"subscript-descendant-numeric_literal":d((function(e,t,r){return e===r})),"member-child-wildcard":l((function(){return!0})),"member-descendant-wildcard":d((function(){return!0})),"subscript-descendant-wildcard":d((function(){return!0})),"subscript-child-wildcard":l((function(){return!0})),"subscript-child-slice":function(e,t){if(u(t.value)){var r=e.expression.value.split(":").map(m),n=t.value.map((function(e,r){return{value:e,path:t.path.concat(r)}}));return o.apply(null,[n].concat(r))}},"subscript-child-union":function(e,t){var r=[];return e.expression.value.forEach((function(e){var n={operation:"subscript",scope:"child",expression:e.expression},o=this.resolve(n)(n,t);o&&(r=r.concat(o))}),this),f(r)},"subscript-descendant-union":function(t,r,n){var o=e(".."),i=this,s=[];return o.nodes(r,"$..*").slice(1).forEach((function(e){s.length>=n||t.expression.value.forEach((function(t){var r={operation:"subscript",scope:"child",expression:t.expression},n=i.resolve(r)(r,e);s=s.concat(n)}))})),f(s)},"subscript-child-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.descend(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-descendant-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.traverse(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$[{{value}}]")},"member-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$.{{value}}")},"member-descendant-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$..value")}},a.prototype._fns["subscript-child-string_literal"]=a.prototype._fns["member-child-identifier"],a.prototype._fns["member-descendant-numeric_literal"]=a.prototype._fns["subscript-descendant-string_literal"]=a.prototype._fns["member-descendant-identifier"],t.exports=a},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"static-eval":15,underscore:12}],5:[function(e,t,r){var n=e("assert"),o=e("./dict"),i=e("./parser"),s=e("./handlers"),a=function(){this.initialize.apply(this,arguments)};function c(e){return"[object String]"==Object.prototype.toString.call(e)}a.prototype.initialize=function(){this.parser=new i,this.handlers=new s},a.prototype.parse=function(e){return n.ok(c(e),"we need a path"),this.parser.parse(e)},a.prototype.parent=function(e,t){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path");var r=this.nodes(e,t)[0];return r.path.pop(),this.value(e,r.path)},a.prototype.apply=function(e,t,r){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),n.equal(typeof r,"function","fn needs to be function");var o=this.nodes(e,t).sort((function(e,t){return t.path.length-e.path.length}));return o.forEach((function(t){var n=t.path.pop(),o=this.value(e,this.stringify(t.path)),i=t.value=r.call(e,o[n]);o[n]=i}),this),o},a.prototype.value=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),arguments.length>=3){var o=this.nodes(e,t).shift();if(!o)return this._vivify(e,t,r);var i=o.path.slice(-1).shift(),s=this.parent(e,this.stringify(o.path));s[i]=r}return this.query(e,this.stringify(t),1).shift()},a.prototype._vivify=function(e,t,r){var o=this;n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path");var i=this.parser.parse(t).map((function(e){return e.expression.value})),s=function(t,r){var n=t.pop(),i=o.value(e,t);i||(s(t.concat(),"string"==typeof n?{}:[]),i=o.value(e,t)),i[n]=r};return s(i,r),this.query(e,t)[0]},a.prototype.query=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(c(t),"we need a path"),this.nodes(e,t,r).map((function(e){return e.value}))},a.prototype.paths=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),this.nodes(e,t,r).map((function(e){return e.path}))},a.prototype.nodes=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),0===r)return[];var o=this.parser.parse(t),i=this.handlers,s=[{path:["$"],value:e}],a=[];return o.length&&"root"==o[0].expression.type&&o.shift(),o.length?(o.forEach((function(e,t){if(!(a.length>=r)){var n=i.resolve(e),c=[];s.forEach((function(i){if(!(a.length>=r)){var s=n(e,i,r);t==o.length-1?a=a.concat(s||[]):c=c.concat(s||[])}})),s=c}})),r?a.slice(0,r):a):s},a.prototype.stringify=function(e){n.ok(e,"we need a path");var t="$",r={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return(e=this._normalize(e)).forEach((function(e){if("root"!=e.expression.type){var n,o=[e.scope,e.operation].join("-"),i=r[o];if(n="string_literal"==e.expression.type?JSON.stringify(e.expression.value):e.expression.value,!i)throw new Error("couldn't find template "+o);t+=i.replace(/{{value}}/,n)}})),t},a.prototype._normalize=function(e){if(n.ok(e,"we need a path"),"string"==typeof e)return this.parser.parse(e);if(Array.isArray(e)&&"string"==typeof e[0]){var t=[{expression:{type:"root",value:"$"}}];return e.forEach((function(e,r){if("$"!=e||0!==r)if("string"==typeof e&&e.match("^"+o.identifier+"$"))t.push({operation:"member",scope:"child",expression:{value:e,type:"identifier"}});else{var n="number"==typeof e?"numeric_literal":"string_literal";t.push({operation:"subscript",scope:"child",expression:{value:e,type:n}})}})),t}if(Array.isArray(e)&&"object"==typeof e[0])return e;throw new Error("couldn't understand path "+e)},a.Handlers=s,a.Parser=i;var u=new a;u.JSONPath=a,t.exports=u},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(e,t,r){var n=e("./grammar"),o=e("../generated/parser"),i=function(){var e=new o.Parser,t=e.parseError;return e.yy.parseError=function(){e.yy.ast&&e.yy.ast.initialize(),t.apply(e,arguments)},e};i.grammar=n,t.exports=i},{"../generated/parser":1,"./grammar":3}],7:[function(e,t,r){function n(e){return String(e).match(/^[0-9]+$/)?parseInt(e):Number.isFinite(e)?parseInt(e,10):0}t.exports=function(e,t,r,o){if("string"==typeof t)throw new Error("start cannot be a string");if("string"==typeof r)throw new Error("end cannot be a string");if("string"==typeof o)throw new Error("step cannot be a string");var i=e.length;if(0===o)throw new Error("step cannot be zero");if(o=o?n(o):1,r=r<0?i+r:r,t=n(0===(t=t<0?i+t:t)?0:t||(o>0?0:i-1)),r=n(0===r?0:r||(o>0?i:-1)),t=o>0?Math.max(0,t):Math.min(i,t),r=o>0?Math.min(r,i):Math.max(-1,r),o>0&&r<=t)return[];if(o<0&&t<=r)return[];for(var s=[],a=t;a!=r&&!(o<0&&a<=r||o>0&&a>=r);a+=o)s.push(e[a]);return s}},{}],8:[function(e,t,r){var n=e("util/"),o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,s=t.exports=p;function a(e,t){return n.isUndefined(t)?""+t:n.isNumber(t)&&!isFinite(t)||n.isFunction(t)||n.isRegExp(t)?t.toString():t}function c(e,t){return n.isString(e)?e.length<t?e:e.slice(0,t):e}function u(e,t,r,n,o){throw new s.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function p(e,t){e||u(e,!0,t,"==",s.ok)}function l(e,t){if(e===t)return!0;if(n.isBuffer(e)&&n.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return n.isDate(e)&&n.isDate(t)?e.getTime()===t.getTime():n.isRegExp(e)&&n.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:n.isObject(e)||n.isObject(t)?function(e,t){if(n.isNullOrUndefined(e)||n.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;var r=d(e),i=d(t);if(r&&!i||!r&&i)return!1;if(r)return e=o.call(e),t=o.call(t),l(e,t);var s,a,c=m(e),u=m(t);if(c.length!=u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;a>=0;a--)if(c[a]!=u[a])return!1;for(a=c.length-1;a>=0;a--)if(s=c[a],!l(e[s],t[s]))return!1;return!0}(e,t):e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function f(e,t,r,o){var i;n.isString(r)&&(o=r,r=null);try{t()}catch(e){i=e}if(o=(r&&r.name?" ("+r.name+").":".")+(o?" "+o:"."),e&&!i&&u(i,r,"Missing expected exception"+o),!e&&h(i,r)&&u(i,r,"Got unwanted exception"+o),e&&i&&r&&!h(i,r)||!e&&i)throw i}s.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return c(JSON.stringify(e.actual,a),128)+" "+e.operator+" "+c(JSON.stringify(e.expected,a),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=t.name,i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},n.inherits(s.AssertionError,Error),s.fail=u,s.ok=p,s.equal=function(e,t,r){e!=t&&u(e,t,r,"==",s.equal)},s.notEqual=function(e,t,r){e==t&&u(e,t,r,"!=",s.notEqual)},s.deepEqual=function(e,t,r){l(e,t)||u(e,t,r,"deepEqual",s.deepEqual)},s.notDeepEqual=function(e,t,r){l(e,t)&&u(e,t,r,"notDeepEqual",s.notDeepEqual)},s.strictEqual=function(e,t,r){e!==t&&u(e,t,r,"===",s.strictEqual)},s.notStrictEqual=function(e,t,r){e===t&&u(e,t,r,"!==",s.notStrictEqual)},s.throws=function(e,t,r){f.apply(this,[!0].concat(o.call(arguments)))},s.doesNotThrow=function(e,t){f.apply(this,[!1].concat(o.call(arguments)))},s.ifError=function(e){if(e)throw e};var m=Object.keys||function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t}},{"util/":11}],9:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],10:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],11:[function(e,r,n){(function(t,r){var o=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},n.deprecate=function(e,o){if(v(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,s={};function a(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(t)?r.showHidden=t:t&&n._extend(r,t),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,e,r.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function u(e,t){return e}function p(e,t,r){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return y(o)||(o=p(e,o,r)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var s=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),x(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(S(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(x(t))return l(t)}var u,w="",k=!1,_=["{","}"];return h(t)&&(k=!0,_=["[","]"]),S(t)&&(w=" [Function"+(t.name?": "+t.name:"")+"]"),b(t)&&(w=" "+RegExp.prototype.toString.call(t)),E(t)&&(w=" "+Date.prototype.toUTCString.call(t)),x(t)&&(w=" "+l(t)),0!==s.length||k&&0!=t.length?r<0?b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=k?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)A(t,String(s))?i.push(d(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,t,r,a,s):s.map((function(n){return d(e,t,r,a,n,k)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,w,_)):_[0]+w+_[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),A(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===k(e)}function x(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(v(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=f,n.isNull=m,n.isNullOrUndefined=function(e){return null==e},n.isNumber=g,n.isString=y,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=v,n.isRegExp=b,n.isObject=w,n.isDate=E,n.isError=x,n.isFunction=S,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){console.log("%s - %s",C(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":10,_process:14,inherits:9}],12:[function(e,t,r){},{}],13:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,o="/"===s.charAt(0))}return(o?"/":"")+(r=t(n(r.split("/"),(function(e){return!!e})),!o).join("/"))||"."},r.normalize=function(e){var i=r.isAbsolute(e),s="/"===o(e,-1);return(e=t(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},r.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(o=!1,n=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,p=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?p=u.concat(p):d=-1,p.length&&f())}function f(){if(!l){var e=c(h);l=!0;for(var t=p.length;t;){for(u=p,p=[];++d<t;)u&&u[d].run();d=-1,t=p.length}u=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new m(e,t)),1!==p.length||l||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],15:[function(e,t,r){var n=e("escodegen").generate;t.exports=function(e,t){t||(t={});var r={},o=function e(o,i){if("Literal"===o.type)return o.value;if("UnaryExpression"===o.type){var s=e(o.argument);return"+"===o.operator?+s:"-"===o.operator?-s:"~"===o.operator?~s:"!"===o.operator?!s:r}if("ArrayExpression"===o.type){for(var a=[],c=0,u=o.elements.length;c<u;c++){if((y=e(o.elements[c]))===r)return r;a.push(y)}return a}if("ObjectExpression"===o.type){var p={};for(c=0;c<o.properties.length;c++){var l=null===(v=o.properties[c]).value?v.value:e(v.value);if(l===r)return r;p[v.key.value||v.key.name]=l}return p}if("BinaryExpression"===o.type||"LogicalExpression"===o.type){if((u=e(o.left))===r)return r;var d=e(o.right);if(d===r)return r;var h=o.operator;return"=="===h?u==d:"==="===h?u===d:"!="===h?u!=d:"!=="===h?u!==d:"+"===h?u+d:"-"===h?u-d:"*"===h?u*d:"/"===h?u/d:"%"===h?u%d:"<"===h?u<d:"<="===h?u<=d:">"===h?u>d:">="===h?u>=d:"|"===h?u|d:"&"===h?u&d:"^"===h?u^d:"&&"===h?u&&d:"||"===h?u||d:r}if("Identifier"===o.type)return{}.hasOwnProperty.call(t,o.name)?t[o.name]:r;if("ThisExpression"===o.type)return{}.hasOwnProperty.call(t,"this")?t.this:r;if("CallExpression"===o.type){var f=e(o.callee);if(f===r)return r;if("function"!=typeof f)return r;var m=o.callee.object?e(o.callee.object):r;m===r&&(m=null);var g=[];for(c=0,u=o.arguments.length;c<u;c++){var y;if((y=e(o.arguments[c]))===r)return r;g.push(y)}return f.apply(m,g)}var v;if("MemberExpression"===o.type)return(p=e(o.object))===r||"function"==typeof p?r:"Identifier"===o.property.type?p[o.property.name]:(v=e(o.property))===r?r:p[v];if("ConditionalExpression"===o.type)return(s=e(o.test))===r?r:e(s?o.consequent:o.alternate);if("ExpressionStatement"===o.type)return(s=e(o.expression))===r?r:s;if("ReturnStatement"===o.type)return e(o.argument);if("FunctionExpression"===o.type){var b=o.body.body,w={};for(Object.keys(t).forEach((function(e){w[e]=t[e]})),c=0;c<o.params.length;c++){var E=o.params[c];if("Identifier"!=E.type)return r;t[E.name]=null}for(var c in b)if(e(b[c])===r)return r;t=w;var x=Object.keys(t),S=x.map((function(e){return t[e]}));return Function(x.join(", "),"return "+n(o)).apply(null,S)}if("TemplateLiteral"===o.type){var k="";for(c=0;c<o.expressions.length;c++)k+=e(o.quasis[c]),k+=e(o.expressions[c]);return k+=e(o.quasis[c])}if("TaggedTemplateExpression"===o.type){var _=e(o.tag),P=o.quasi,C=P.quasis.map(e),A=P.expressions.map(e);return _.apply(null,[C].concat(A))}return"TemplateElement"===o.type?o.value.cooked:r}(e);return o===r?void 0:o}},{escodegen:12}],jsonpath:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")}).call(this,r(9))},function(e,t,r){const n=r(4)("fbp-spec:mocha"),o=r(78),{Runner:i}=o,s=r(62),a=r(102),c=r(109);t.run=function(e,t,r){let u;const p=r;null==r.starttimeout&&(p.starttimeout=5e3),null==r.fixturetimeout&&(p.fixturetimeout=2e3);const l={connectTimeout:r.starttimeout,commandTimeout:r.commandtimeout},d=new i(e,l);try{u=s.getSuitesSync(t)}catch(e){throw console.log("Unable to get suites:",e),e}let h=null;before((function(t){this.timeout(r.starttimeout+500),function(t){if(!e.command)return void t(null);h=c.start(e.command,{},t)}(e=>{n("started",e),a.noError(e),d.connect(t)})})),after(e=>{var t;t=t=>{n("stopped",t),a.noError(t),d.disconnect(e)},h&&h.kill(),t(null)}),u.forEach(e=>{if(null==e.timeout){e.timeout=r.fixturetimeout}!function(e,t){(t.skip?describe.skip:describe)(""+t.name,()=>{beforeEach((function(r){null!=t.timeout&&this.timeout(t.timeout),e.setupSuite(t,r)})),afterEach(r=>e.teardownSuite(t,r)),t.cases.forEach(r=>{(r.skip?describe.skip:describe)(r.name,()=>it(r.assertion,(function(n){null!=t.timeout&&this.timeout(t.timeout),null!=r.timeout&&this.timeout(r.timeout),o.runTestAndCheck(e,r,(e,t)=>{n(e||t.error)})})))})})}(d,e)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),e.outPorts.add("error",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"start",out:"user",async:!0},(e,t,r,n)=>{const o={"grid-avatar":"flowhub-avatar","grid-token":"flowhub-token","grid-user":"flowhub-user"};Object.keys(o).forEach(e=>{const t=o[e],r=localStorage.getItem(e);r&&(localStorage.setItem(t,r),localStorage.removeItem(e))});const i={};["flowhub-avatar","flowhub-debug","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{i[e]=localStorage.getItem(e)}),((e,t)=>{const r=e;if(r["flowhub-user"]){try{r["flowhub-user"]=JSON.parse(r["flowhub-user"])}catch(e){return void t(e)}t(null,r)}else t(null,r)})(i,(e,t)=>{e?n(e):(r.send(t),n())})})}},function(e,t,r){const n=r(0),o=r(4)("noflo-ui:action"),i=r(4)("noflo-ui:action:full"),s=r(4)("noflo-ui:error"),a=(e,t,r)=>{let n=t,o=r;null==n&&(n="click"),null==o&&(o="menu"),"function"==typeof window.ga&&window.ga("send","event",o,n,e)};t.getComponent=()=>{const e=new n.Component;return e.icon="file-text",e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),n.helpers.WirePattern(e,{in:"in",out:"pass",forwardGroups:!0,async:!0},(e,t,r,n)=>{const{action:c}=e;switch(o(c),i(c,e.payload),c.match(/:error$/)&&s(e.payload),c){case"application:hash":(e=>{let t=e;"function"==typeof window.ga&&t&&(-1!==t.indexOf("?")&&([t]=t.split("?")),window.ga("set","page",`${window.location.pathname}${window.location.search}#${t}`),window.ga("send","pageview"))})(e.payload);break;case"user:login":a("userLogin");break;case"user:logout":a("userLogout");break;case"github:open":a("pullGithub","navigation","url");break;case"gist:open":a("pullGist","navigation","url");break;case"main:open":a("openHome","navigation","url");break;case"runtime:start":a("startRuntime","click","button");break;case"runtime:stop":a("stopRuntime","click","button");break;case"runtime:output":e.payload.output.message&&console.error(e.payload.output.message);break;case"runtime:processerror":console.error(e.payload.error.error);break;case"runtime:networkerror":case"runtime:protocolerror":console.error(e.payload.error);break;case"runtime:error":console.error(e.payload)}r.send(e),n()})}},function(e,t,r){const n=r(0),o=r(30),i=r(39),s=(e,t)=>{let r;const n=o.parse(e);return r=t?o.parse("https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"):"https:"===window.location.protocol?o.parse(""):o.parse("http://localhost:9999"),n.host===r.host},a=e=>{const t={client_id:e.client,response_type:"code",redirect_uri:e.url};return e.scopes.length&&(t.scope=e.scopes.join(" ")),"https://github.com/login/oauth/authorize?"+i.stringify(t)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("codeurl",{datatype:"string"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:["codeurl","redirect"],async:!0},(e,t,r,n)=>{let o;if("undefined"!=typeof chrome&&chrome.identity)return o=chrome.identity.getRedirectURL(),s(o,!0)?void chrome.identity.launchWebAuthFlow({interactive:!0,url:a({client:"f29ae9f73bfb223d69d7",url:chrome.identity.getRedirectURL(),scopes:e.payload.scopes})},e=>{r.codeurl.send({payload:e}),n()}):void n(new Error("App URL must match GitHub app configuration https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"));if(!s(e.payload.url))return void n(new Error("App URL must match GitHub app configuration http://localhost:9999"));const i={client:"46fe25abef8d07e6dc2d",url:e.payload.url,scopes:e.payload.scopes};"https:"===window.location.protocol&&(i.client=""),r.redirect.send(a(i)),n()})}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(11),i=e=>{const t=e;if(!(null!=t.runtime?t.runtime.id:void 0))return null;t.runtimeStatuses||(t.runtimeStatuses={}),t.runtimeExecutions||(t.runtimeExecutions={}),t.componentLibraries||(t.componentLibraries={});return{definition:t.runtime,status:t.runtimeStatuses[t.runtime.id]||{},execution:t.runtimeExecutions[t.runtime.id]||{running:!1,label:"not started"}}};t.getComponent=()=>{const e=new n.Component;return e.description="Map application state to UI properties",e.inPorts.add("state",{datatype:"object",description:"Full application state"}),e.inPorts.add("updated",{datatype:"object",description:"Updated application state values"}),e.outPorts.add("props",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("state","updated"))return;const[r,n]=e.getData("state","updated"),s={};Object.keys(n).forEach(e=>{switch(e){case"runtime":return(null!=r.runtime?r.runtime.id:void 0)?(s.runtime=i(r),void(s.componentLibrary=r.componentLibraries[r.runtime.id]||[])):(s.runtime=n.runtime,s.componentLibrary=[],s.packets=[],s.events=[],s.edges=[],void(s.icons={}));case"componentLibraries":if(!(null!=r.runtime?r.runtime.id:void 0))return;return void(s.componentLibrary=n[e][r.runtime.id]||[]);case"runtimeStatuses":case"runtimeExecutions":return void(s.runtime=i(r));case"runtimePackets":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimePackets[r.runtime.id])return void(s.packets=[]);const e=n.runtimePackets[r.runtime.id].toarray();e.reverse();const t=r.project?r.project.namespace:null;return void(s.packets=e.filter(e=>e.graph===o(r.graphs[0],t)))}case"runtimeEvents":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimeEvents[r.runtime.id])return void(s.events=[]);const e=n.runtimeEvents[r.runtime.id].toarray();return e.reverse(),void(s.events=e)}case"runtimeIcons":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(s.icons={},!n.runtimeIcons[r.runtime.id])return;if(!(null!=r.graphs?r.graphs.length:void 0))return;const e=r.graphs[r.graphs.length-1],t=e.name||e.properties.id;if(!n.runtimeIcons[r.runtime.id][t])return;return void Object.keys(n.runtimeIcons[r.runtime.id][t]).forEach(e=>{const o=n.runtimeIcons[r.runtime.id][t][e];s.icons[e]=o})}default:s[e]=n[e]}}),t.sendDone({props:s})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.Journal=t.graph=t.journal=void 0;var n=r(323);t.journal=n;var o=r(325);t.graph=o;var i=n.Journal;t.Journal=i;var s=o.Graph;t.Graph=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryJournalStore=t.JournalStore=t.Journal=void 0;var u=r(5),p=r(15),l=r(110);t.JournalStore=l.default;var d=r(324);function h(e){var t=e.args;switch(e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}function f(e,t){var r={};return Object.keys(e).forEach((function(e){r[e]=null})),Object.keys(t).forEach((function(e){var n=t[e];r[e]=n})),r}t.MemoryJournalStore=d.default;var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=s(u);function u(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=c.call(this)).graph=e,n.entries=[],n.subscribed=!0,n.store=r||new d.default(n.graph),0===n.store.countTransactions()?(n.currentRevision=-1,n.startTransaction("initial",t||{}),n.graph.nodes.forEach((function(e){n.appendCommand("addNode",e)})),n.graph.edges.forEach((function(e){n.appendCommand("addEdge",e)})),n.graph.initializers.forEach((function(e){n.appendCommand("addInitial",e)})),Object.keys(n.graph.properties).length>0&&n.appendCommand("changeProperties",n.graph.properties),Object.keys(n.graph.inports).forEach((function(e){var t=n.graph.inports[e];n.appendCommand("addInport",{name:e,port:t})})),Object.keys(n.graph.outports).forEach((function(e){var t=n.graph.outports[e];n.appendCommand("addOutport",{name:e,port:t})})),n.graph.groups.forEach((function(e){n.appendCommand("addGroup",e)})),n.endTransaction("initial",t||{})):n.currentRevision=n.store.lastRevision,n.graph.on("addNode",(function(e){n.appendCommand("addNode",e)})),n.graph.on("removeNode",(function(e){n.appendCommand("removeNode",e)})),n.graph.on("renameNode",(function(e,t){var r={oldId:e,newId:t};n.appendCommand("renameNode",r)})),n.graph.on("changeNode",(function(e,t){n.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),n.graph.on("addEdge",(function(e){n.appendCommand("addEdge",e)})),n.graph.on("removeEdge",(function(e){n.appendCommand("removeEdge",e)})),n.graph.on("changeEdge",(function(e,t){n.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),n.graph.on("addInitial",(function(e){n.appendCommand("addInitial",e)})),n.graph.on("removeInitial",(function(e){n.appendCommand("removeInitial",e)})),n.graph.on("changeProperties",(function(e,t){return n.appendCommand("changeProperties",{new:e,old:t})})),n.graph.on("addGroup",(function(e){return n.appendCommand("addGroup",e)})),n.graph.on("renameGroup",(function(e,t){return n.appendCommand("renameGroup",{oldName:e,newName:t})})),n.graph.on("removeGroup",(function(e){return n.appendCommand("removeGroup",e)})),n.graph.on("changeGroup",(function(e,t){return n.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),n.graph.on("addExport",(function(e){return n.appendCommand("addExport",e)})),n.graph.on("removeExport",(function(e){return n.appendCommand("removeExport",e)})),n.graph.on("addInport",(function(e,t){return n.appendCommand("addInport",{name:e,port:t})})),n.graph.on("removeInport",(function(e,t){return n.appendCommand("removeInport",{name:e,port:t})})),n.graph.on("renameInport",(function(e,t){return n.appendCommand("renameInport",{oldId:e,newId:t})})),n.graph.on("changeInport",(function(e,t,r){return n.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),n.graph.on("addOutport",(function(e,t){return n.appendCommand("addOutport",{name:e,port:t})})),n.graph.on("removeOutport",(function(e,t){return n.appendCommand("removeOutport",{name:e,port:t})})),n.graph.on("renameOutport",(function(e,t){return n.appendCommand("renameOutport",{oldId:e,newId:t})})),n.graph.on("changeOutport",(function(e,t,r){return n.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),n.graph.on("startTransaction",(function(e,t){n.startTransaction(e,t)})),n.graph.on("endTransaction",(function(e,t){n.endTransaction(e,t)})),n}return t=u,(n=[{key:"startTransaction",value:function(e,t){if(this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");this.currentRevision+=1,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){this.subscribed&&(this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[])}},{key:"appendCommand",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.subscribed){var n={cmd:e,args:p(t),rev:r};this.entries.push(n)}}},{key:"executeEntry",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.addNode(t.id,t.component);break;case"removeNode":this.graph.removeNode(t.id);break;case"renameNode":this.graph.renameNode(t.oldId,t.newId);break;case"changeNode":this.graph.setNodeMetadata(t.id,f(t.old,t.new));break;case"addEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,f(t.old,t.new));break;case"addInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"removeInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.new);break;case"addGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"renameGroup":this.graph.renameGroup(t.oldName,t.newName);break;case"removeGroup":this.graph.removeGroup(t.name);break;case"changeGroup":this.graph.setGroupMetadata(t.name,f(t.old,t.new));break;case"addInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"removeInport":this.graph.removeInport(t.name);break;case"renameInport":this.graph.renameInport(t.oldId,t.newId);break;case"changeInport":this.graph.setInportMetadata(t.name,f(t.old,t.new));break;case"addOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));break;case"removeOutport":this.graph.removeOutport(t.name);break;case"renameOutport":this.graph.renameOutport(t.oldId,t.newId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,f(t.old,t.new));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.removeNode(t.id);break;case"removeNode":this.graph.addNode(t.id,t.component);break;case"renameNode":this.graph.renameNode(t.newId,t.oldId);break;case"changeNode":this.graph.setNodeMetadata(t.id,f(t.new,t.old));break;case"addEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,f(t.new,t.old));break;case"addInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"removeInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.old);break;case"addGroup":this.graph.removeGroup(t.name);break;case"renameGroup":this.graph.renameGroup(t.newName,t.oldName);break;case"removeGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"changeGroup":this.graph.setGroupMetadata(t.name,f(t.new,t.old));break;case"addInport":this.graph.removeInport(t.name);break;case"removeInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameInport":this.graph.renameInport(t.newId,t.oldId);break;case"changeInport":this.graph.setInportMetadata(t.name,f(t.new,t.old));break;case"addOutport":this.graph.removeOutport(t.name);break;case"removeOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameOutport":this.graph.renameOutport(t.newId,t.oldId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,f(t.new,t.old));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t=this;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(var r=this.currentRevision+1,n=r,o=e,i=r<=o;i?n<=o:n>=o;i?n+=1:n-=1)this.store.fetchTransaction(n).forEach((function(e){t.executeEntry(e)}));else for(var s=this.currentRevision,a=e+1;s>=a;s-=1){var c=this.store.fetchTransaction(s).slice(0);c.reverse(),c.forEach((function(e){t.executeEntryInversed(e)}))}this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){this.canUndo()&&this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){this.canRedo()&&this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=t||this.store.lastRevision,n=[],o=e,i=r,s=e<=i;s?o<i:o>i;s?o+=1:o-=1){var a=this.store.fetchTransaction(o);a.forEach((function(e){n.push(h(e))}))}return n.join("\n")}},{key:"toJSON",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||this.store.lastRevision,n=[],o=e,i=r;o<i;o+=1){var s=this.store.fetchTransaction(o);s.forEach((function(e){n.push(h(e))}))}return n}},{key:"save",value:function(e,t){var n=JSON.stringify(this.toJSON(),null,4);(0,r(6).writeFile)("".concat(e,".json"),n,"utf-8",t)}}])&&o(t.prototype,n),a&&o(t,a),u}(u.EventEmitter);t.Journal=m},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,n,c=a(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this,e)).transactions=[],t}return t=p,(r=[{key:"countTransactions",value:function(){return this.transactions.length}},{key:"putTransaction",value:function(e,t){i(u(p.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}])&&o(t.prototype,r),n&&o(t,n),p}(r(110).default);t.default=p},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeResolveTheirs=t.equivalent=t.loadFile=t.loadFBP=t.loadJSON=t.createGraph=t.Graph=void 0;var h=r(5),f=r(15),m=r(326),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,n,o,s=p(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,l),(e=s.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=l,(n=[{key:"getPortName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.transaction.id)throw Error("Nested transactions not supported");this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){this.transaction.id?"implicit"===this.transaction.id&&(this.transaction.depth+=1):this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){"implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth&&this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t=this;this.checkTransactionStart();var r=f(this.properties);Object.keys(e).forEach((function(r){var n=e[r];t.properties[r]=n})),this.emit("changeProperties",this.properties,r),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.inports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",o,this.inports[o]),this.checkTransactionEnd()}}},{key:"removeInport",value:function(e){var t=this.getPortName(e);if(this.inports[t]){this.checkTransactionStart();var r=this.inports[t];this.setInportMetadata(t,{}),delete this.inports[t],this.emit("removeInport",t,r),this.checkTransactionEnd()}}},{key:"renameInport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.inports[r]&&n!==r&&(this.checkTransactionStart(),this.inports[n]=this.inports[r],delete this.inports[r],this.emit("renameInport",r,n),this.checkTransactionEnd())}},{key:"setInportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.inports[n]){this.checkTransactionStart(),this.inports[n].metadata||(this.inports[n].metadata={});var o=f(this.inports[n].metadata);Object.keys(t).forEach((function(e){var o=t[e],i=r.inports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeInport",n,this.inports[n],o,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.outports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",o,this.outports[o]),this.checkTransactionEnd()}}},{key:"removeOutport",value:function(e){var t=this.getPortName(e);if(this.outports[t]){this.checkTransactionStart();var r=this.outports[t];this.setOutportMetadata(t,{}),delete this.outports[t],this.emit("removeOutport",t,r),this.checkTransactionEnd()}}},{key:"renameOutport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.outports[r]&&(this.checkTransactionStart(),this.outports[n]=this.outports[r],delete this.outports[r],this.emit("renameOutport",r,n),this.checkTransactionEnd())}},{key:"setOutportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.outports[n]){this.checkTransactionStart();var o=f(this.outports[n].metadata);this.outports[n].metadata||(this.outports[n].metadata={}),Object.keys(t).forEach((function(e){var o=t[e],i=r.outports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeOutport",n,this.outports[n],o,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){this.checkTransactionStart();var n={name:e,nodes:t,metadata:r};return this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd(),n}},{key:"renameGroup",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){n&&n.name===e&&(n.name=t,r.emit("renameGroup",e,t))})),this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t=this;this.checkTransactionStart(),this.groups=this.groups.filter((function(r){return!(!r||r.name===e&&(t.setGroupMetadata(r.name,{}),t.emit("removeGroup",r),1))})),this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){if(n&&n.name===e){var o=f(n.metadata);Object.keys(t).forEach((function(e){var r=t[e],o=n;o.metadata&&(null!=r?o.metadata[e]=r:delete o.metadata[e])})),r.emit("changeGroup",n,o,t)}})),this.checkTransactionEnd()}},{key:"addNode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.checkTransactionStart();var n={id:e,component:t,metadata:r};return this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t=this,r=this.getNode(e);r&&(this.checkTransactionStart(),this.edges.forEach((function(e){e.from.node!==r.id&&e.to.node!==r.id||t.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),this.initializers.forEach((function(e){e.to.node===r.id&&t.removeInitial(e.to.node,e.to.port)})),Object.keys(this.inports).forEach((function(r){t.inports[r].process===e&&t.removeInport(r)})),Object.keys(this.outports).forEach((function(r){t.outports[r].process===e&&t.removeOutport(r)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes.splice(n,1),0===r.nodes.length&&t.removeGroup(r.name))}})),this.setNodeMetadata(e,{}),this.nodes=this.nodes.filter((function(e){return e!==r})),this.emit("removeNode",r),this.checkTransactionEnd())}},{key:"getNode",value:function(e){var t=this.nodes.find((function(t){return t&&t.id===e}));return t||null}},{key:"renameNode",value:function(e,t){var r=this;this.checkTransactionStart();var n=this.getNode(e);n&&(n.id=t,this.edges.forEach((function(r){var n=r;n&&(n.from.node===e&&(n.from.node=t),n.to.node===e&&(n.to.node=t))})),this.initializers.forEach((function(r){var n=r;n&&n.to.node===e&&(n.to.node=t)})),Object.keys(this.inports).forEach((function(n){var o=r.inports[n];o.process===e&&(o.process=t)})),Object.keys(this.outports).forEach((function(n){var o=r.outports[n];o.process===e&&(o.process=t)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes[n]=t)}})),this.emit("renameNode",e,t),this.checkTransactionEnd())}},{key:"setNodeMetadata",value:function(e,t){var r=this.getNode(e);if(r){this.checkTransactionStart(),r.metadata||(r.metadata={});var n=f(r.metadata);Object.keys(t).forEach((function(e){if(r.metadata){var n=t[e];null!=n?r.metadata[e]=n:delete r.metadata[e]}})),this.emit("changeNode",r,n,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=this.getPortName(t),s=this.getPortName(n);if(this.edges.some((function(t){return t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===s})))return null;if(!this.getNode(e))return null;if(!this.getNode(r))return null;this.checkTransactionStart();var a={from:{node:e,port:i},to:{node:r,port:s},metadata:o};return this.edges.push(a),this.emit("addEdge",a),this.checkTransactionEnd(),a}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=this.getPortName(t),c=this.getPortName(o),u=null===i?void 0:i,p=null===r?void 0:r;if(this.edges.some((function(t){return t.from.node===e&&t.from.port===a&&t.from.index===p&&t.to.node===n&&t.to.port===c&&t.to.index===u})))return null;if(!this.getNode(e))return null;if(!this.getNode(n))return null;this.checkTransactionStart();var l={from:{node:e,port:a,index:p},to:{node:n,port:c,index:u},metadata:s};return this.edges.push(l),this.emit("addEdge",l),this.checkTransactionEnd(),l}},{key:"removeEdge",value:function(e,t,r,n){var o=this;if(this.getEdge(e,t,r,n)){this.checkTransactionStart();var i=this.getPortName(t),s=this.getPortName(n);this.edges=this.edges.filter((function(t){if(r&&s){if(t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===s)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1}else if(t.from.node===e&&t.from.port===i||t.to.node===e&&t.to.port===i)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1;return!0})),this.checkTransactionEnd()}}},{key:"getEdge",value:function(e,t,r,n){var o=this.getPortName(t),i=this.getPortName(n),s=this.edges.find((function(t){return!!t&&t.from.node===e&&t.from.port===o&&t.to.node===r&&t.to.port===i}));return s||null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i=this.getEdge(e,t,r,n);if(i){this.checkTransactionStart(),i.metadata||(i.metadata={});var s=f(i.metadata);Object.keys(o).forEach((function(e){var t=o[e];i.metadata||(i.metadata={}),null!==t?i.metadata[e]=t:delete i.metadata[e]})),this.emit("changeEdge",i,s,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.getNode(t))return null;var o=this.getPortName(r);this.checkTransactionStart();var i={from:{data:e},to:{node:t,port:o},metadata:n};return this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addInitialIndex",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.getNode(t))return null;var i=null===n?void 0:n,s=this.getPortName(r);this.checkTransactionStart();var a={from:{data:e},to:{node:t,port:s,index:i},metadata:o};return this.initializers.push(a),this.emit("addInitial",a),this.checkTransactionEnd(),a}},{key:"addGraphInitial",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.inports[t];return n?this.addInitial(e,n.process,n.port,r):null}},{key:"addGraphInitialIndex",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.inports[t];return o?this.addInitialIndex(e,o.process,o.port,r,n):null}},{key:"removeInitial",value:function(e,t){var r=this,n=this.getPortName(t);this.checkTransactionStart(),this.initializers=this.initializers.filter((function(t){return t.to.node!==e||t.to.port!==n||(r.emit("removeInitial",t),!1)})),this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t=this.inports[e];t&&this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e=function(e){return e.replace(/\./g,"")},t=function(e){return'"'.concat(function(e){return e.replace(/"/g,'\\"')}(e),'"')},r="digraph {\n";return this.nodes.forEach((function(e){r+="    ".concat(t(e.id)," [label=").concat(t(e.id)," shape=box]\n")})),this.initializers.forEach((function(n,o){var i;i="function"==typeof n.from.data?"Function":JSON.stringify(n.from.data),r+="    data".concat(o," [label=").concat(t(i)," shape=plaintext]\n"),r+="    data".concat(o," -> ").concat(t(n.to.node),"[headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),this.edges.forEach((function(n){r+="    ".concat(t(n.from.node)," -> ").concat(t(n.to.node),"[taillabel=").concat(e(n.from.port)," headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),r+="}"}},{key:"toYUML",value:function(){var e=[];return this.initializers.forEach((function(t){e.push("(start)[".concat(t.to.port,"]->(").concat(t.to.node,")"))})),this.edges.forEach((function(t){e.push("(".concat(t.from.node,")[").concat(t.from.port,"]->(").concat(t.to.node,")"))})),e.join(",")}},{key:"toJSON",value:function(){var e={caseSensitive:this.caseSensitive,properties:i({name:this.name},this.properties),inports:i({},this.inports),outports:i({},this.outports),groups:this.groups.map((function(e){var t={name:e.name,nodes:e.nodes};return e.metadata&&Object.keys(e.metadata).length&&(t.metadata=i({},e.metadata)),t})),processes:{},connections:[]};return this.nodes.forEach((function(t){e.processes||(e.processes={}),e.processes[t.id]={component:t.component},t.metadata&&(e.processes[t.id].metadata=i({},t.metadata))})),this.edges.forEach((function(t){var r={src:{process:t.from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),this.initializers.forEach((function(t){var r={data:t.from.data,tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),e}},{key:"save",value:function(e,t){if(m.isBrowser())t(new Error("Saving graphs not supported on browser"));else{var n=JSON.stringify(this.toJSON(),null,4),o=e;o.match(/\.json$/)||(o="".concat(e,".json")),r(6).writeFile(o,n,"utf-8",(function(e){e?t(e):t(null,o)}))}}}])&&c(t.prototype,n),o&&c(t,o),l}(h.EventEmitter);function y(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(r="string"==typeof e?JSON.parse(e):f(e)).properties||(r.properties={}),r.processes||(r.processes={}),r.connections||(r.connections=[]);var o=new g(r.properties.name,{caseSensitive:r.caseSensitive||!1});o.startTransaction("loadJSON",n);var i={};return Object.keys(r.properties).forEach((function(e){if("name"!==e&&r.properties){var t=r.properties[e];i[e]=t}})),o.setProperties(i),Object.keys(r.processes).forEach((function(e){if(r.processes){var t=r.processes[e];t.metadata||(t.metadata={}),o.addNode(e,t.component,t.metadata)}})),r.connections.forEach((function(e){var t=e.metadata?e.metadata:{};void 0===e.data?void 0!==e.src&&("number"!=typeof e.src.index&&"number"!=typeof e.tgt.index?o.addEdge(e.src.process,o.getPortName(e.src.port),e.tgt.process,o.getPortName(e.tgt.port),t):o.addEdgeIndex(e.src.process,o.getPortName(e.src.port),e.src.index,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t)):"number"==typeof e.tgt.index?o.addInitialIndex(e.data,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t):o.addInitial(e.data,e.tgt.process,o.getPortName(e.tgt.port),t)})),r.inports&&Object.keys(r.inports).forEach((function(e){if(r.inports&&r.inports[e]){var t=r.inports[e];o.addInport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.outports&&Object.keys(r.outports).forEach((function(e){if(r.outports&&r.outports[e]){var t=r.outports[e];o.addOutport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.groups&&r.groups.forEach((function(e){o.addGroup(e.name,e.nodes,e.metadata||{})})),o.endTransaction("loadJSON"),t(null,o)}function v(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{n=r(29).parse(e,{caseSensitive:i})}catch(e){return t(e)}return y(n,t,o)}function b(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200!==r.status&&t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))),t(null,r.responseText))},r.open("GET",e,!0),r.send()}t.Graph=g,t.createGraph=function(e,t){return new g(e,t)},t.loadJSON=y,t.loadFBP=v,t.loadFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];m.isBrowser()?b(e,(function(r,o){r?t(r):o?"fbp"!==e.split(".").pop()?y(o,t,n):v(o,t,n):t(new Error("No data received"))})):r(6).readFile(e,"utf-8",(function(r,n){r?t(r):"fbp"!==e.split(".").pop()?y(n,t,{}):v(n,t,{},o)}))},t.mergeResolveTheirs=function(e,t){var r;(r=e).groups.reverse(),r.groups.forEach((function(e){null!=e&&r.removeGroup(e.name)})),Object.keys(r.outports).forEach((function(e){r.removeOutport(e)})),Object.keys(r.inports).forEach((function(e){r.removeInport(e)})),r.setProperties({}),r.initializers.reverse(),r.initializers.forEach((function(e){r.removeInitial(e.to.node,e.to.port)})),r.edges.reverse(),r.edges.forEach((function(e){r.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),r.nodes.reverse(),r.nodes.forEach((function(e){r.removeNode(e.id)})),t.nodes.forEach((function(t){e.addNode(t.id,t.component,t.metadata)})),t.edges.forEach((function(t){e.addEdge(t.from.node,t.from.port,t.to.node,t.to.port,t.metadata)})),t.initializers.forEach((function(t){"number"!=typeof t.to.index?e.addInitial(t.from.data,t.to.node,t.to.port,t.metadata||{}):e.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata||{})})),e.setProperties(t.properties),Object.keys(t.inports).forEach((function(r){var n=t.inports[r];e.addInport(r,n.process,n.port,n.metadata||{})})),Object.keys(t.outports).forEach((function(r){var n=t.outports[r];e.addOutport(r,n.process,n.port,n.metadata||{})})),t.groups.forEach((function(t){e.addGroup(t.name,t.nodes,t.metadata||{})}))},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)}}).call(this,r(3))},function(e,t,r){const n=r(0),{v4:o}=r(20),i=r(30),s=r(10),{loadGraph:a,ensureIframe:c,getRemoteNodes:u,getSource:p}=r(11),{findGraph:l,findComponent:d,guessLanguage:h}=r(17),{addToList:f,unnamespace:m}=r(21),g=e=>e.definition&&e.definition.namespace?e.definition.namespace:null;t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.inPorts.add("projects",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("spec",{datatype:"object"}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client","projects"))return;const[r,n,y]=e.getData("in","client","projects"),v={state:"ok",graphs:[],remote:r.nodes||[],project:{},component:null,runtime:r.runtime};Promise.resolve().then(()=>c(n,{id:o()})).then(()=>n.connect()).then(e=>e.graph?(v.project=((e,t)=>{const r=t.find(t=>!(!t.runtime||t.runtime!==e.definition.id));if(r)return r;return{id:o(),name:g(e),namespace:g(e),runtime:e.definition.id,type:e.definition.type,graphs:[],components:[],specs:[]}})(n,y),((e,t)=>{const r=t;if(e.definition.repository){const t=i.parse(e.definition.repository);if("github.com"===t.hostname&&t.pathname){const e=t.pathname.slice(1),n=s.dirname(e),o=s.basename(e,s.extname(e));r.repo=`${n}/${o}`,r.name=o}}e.definition.repositoryVersion&&(r.branch=e.definition.repositoryVersion)})(n,v.project),p(n,e.graph)):Promise.reject(new Error(`Runtime ${e.id} is not running a graph`))).then(e=>a(e)).then(e=>{e.setProperties({id:`${v.project.id}/${m((null!=e.properties?e.properties.id:void 0)||e.name)}`,project:v.project.id,runtimeName:n.definition.graph}),f(v.project.graphs,e),v.project.main=e.properties.id}).then(()=>((e,t)=>e?t.connect().then(()=>t.protocol.component.list()).then(t=>t.map(e=>e.name).filter(t=>((e,t)=>{if(-1===t.indexOf("/")&&"Graph"!==t)return!0;const[r]=t.split("/");return r===e})(e,t))).then(e=>Promise.all(e.map(e=>p(t,e)))):Promise.resolve([]))(v.project.namespace,n)).then(e=>{const t=e.filter(e=>"json"===e.language&&(e.name!==n.definition.graph&&`${e.library}/${e.name}`!==n.definition.graph));return Promise.all(t.map(e=>a(e).then(t=>{const r=t;return r.name=m(e.name),r.setProperties({id:`${v.project.id}/${m((null!=r.properties?r.properties.id:void 0)||r.name)}`,project:v.project.id}),r}))).then(t=>{t.forEach(e=>{f(v.project.graphs,e)});e.filter(e=>"json"!==e.language).forEach(e=>{const t=e;t.project=v.project.id,t.id=`${v.project.id}/${t.name}`,f(v.project.components,t)});e.filter(e=>e.tests).forEach(e=>{const t={id:`${v.project.id}/${e.name}`,name:e.name,code:e.tests,language:h(e.tests,e.language),project:v.project.id,type:"spec"};f(v.project.specs,t)})})}).then(()=>{n.definition.project=v.project.id,n.definition.seen=new Date,n.definition.label||(n.definition.label=v.project.name+" runtime")}).then(()=>{if(r.component){if(v.component=d(r.component,v.project),!v.component)throw new Error(`Component ${r.component} not found`);return}const e=l(r.graph||v.project.main,v.project);if(!e)throw new Error(`Graph ${r.graph||v.project.main} not found`);f(v.graphs,e)}).then(()=>u(n,v)).then(()=>t.send({out:v,project:v.project})).then(()=>{v.project.graphs.forEach(e=>{t.send({graph:e})}),v.project.components.forEach(e=>{t.send({component:e})}),v.project.specs.forEach(e=>{t.send({spec:e})})}).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(17);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("hash",{datatype:"array"}),n.helpers.WirePattern(e,{in:["in","project"],out:["out","hash"],async:!0,forwardGroups:!1},(e,t,r,n)=>{r.out.send(e.project),e.in.state.project||e.project.runtime?n():o.getProjectHash(e.project,(e,t)=>(e||r.hash.send(t),n()))})}},function(e,t,r){const n=r(0),{findProject:o,findGraph:i,findComponent:s,findByComponent:a}=r(17);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{if(!(null!=e.state.projects?e.state.projects.length:void 0))return void n(new Error("No projects found"));const c={state:"",project:null,runtime:null,component:null,graphs:[],remote:[]};if(c.project=o(e.payload.project,e.state.projects),!c.project)return void n(new Error(`Project ${e.payload.project} not found`));if(e.payload.component)return c.component=s(e.payload.component,c.project),c.component?(c.state="ok",r.send(c),void n()):void n(new Error(`Component ${e.payload.component} not found`));const u=i(e.payload.graph,c.project);if(!u)return void n(new Error(`Graph ${e.payload.graph} not found`));c.graphs.push(u);let p=u;for(;e.payload.nodes.length;){let t;const r=e.payload.nodes.shift();if("object"!=typeof p)c.remote.push(r);else{const o=p.getNode(r);if(!o)return void n(new Error(`Node ${r} not found`));if(!o.component)return void n(new Error(`Node ${r} has no component defined`));if([t,p]=a(o.component,c.project),"component"===t){if(c.component=p,e.payload.nodes.length)return void n(new Error(`Component ${r} cannot have subnodes`));break}"runtime"===t?c.remote.push(r):c.graphs.push(p)}}c.state=c.remote.length?"loading":"ok",r.send(c),n()})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,getRemoteNodes:s,ensureIframe:a,graphRuntimeIdentifier:c}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client");r.project.runtime?t.done(new Error("Runtime projects must be accessed via runtime")):((null!=r.remote?r.remote.length:void 0)&&(r.state="loading"),t.send({out:r}),Promise.resolve().then(()=>a(n,r.project)).then(()=>n.connect()).then(()=>((e,t,r=null)=>{const n=t.filter(t=>[null,e.definition.type].includes(i(t)));return Promise.all(n.map(t=>e.protocol.component.source({name:t.name,language:t.language,library:r||e.definition.namespace,code:t.code})))})(n,r.project.components,r.project.namespace)).then(()=>((e,t,r=null)=>{const n=t.filter(t=>o(t)===e.definition.type);return Promise.all(n.map(t=>e.protocol.graph.send({...t,name:c(t,r),properties:{...t.properties,library:r}},t.properties.main)))})(n,r.project.graphs,r.project.namespace)).then(()=>(null!=r.graphs?r.graphs.length:void 0)?(n.transport.graph===r.graphs[0]||n.transport.setMain(r.graphs[0]),Promise.resolve()):Promise.resolve()).then(()=>s(n,r)).then(()=>"loading"!==r.state?Promise.resolve():(r.state="ok",t.send({out:r}))).then(()=>t.done(),e=>t.done(e)))})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,isDefaultRuntime:s}=r(11),a=(e,t)=>{const r=(e=>{if(e.graphs.length){const t=o(e.graphs[0]);if(t)return t}if(e.component){const t=i(e.component);if(t)return t}return e.project&&e.project.type?e.project.type:"all"})(e);return t.filter(e=>"all"===r||e.type===r)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("skipped",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");r.compatible=a(r,n),r.runtime=((e,t)=>{if(e.runtime)return e.runtime;if(!t.length)return null;const[r]=t.filter(t=>{if(e.project&&t.project){if(s(t))return!0;if(t.project!==e.project.id)return!1}return!(!e.project||t.project!==e.project.id)||"iframe"===t.protocol});return r||null})(r,r.compatible),r.runtime?t.sendDone({out:r}):t.sendDone({skipped:r})})}},function(e,t,r){const n=r(0),{v4:o}=r(20);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{required:!0,datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");if(!r.runtime)return void t.done(new Error("No runtime defined"));"string"==typeof r.runtime&&"endpoint?"===r.runtime.substr(0,9)&&(r.runtime=(e=>{const t={};return e.split("&").forEach(e=>{const[r,n]=e.split("=");t[r]=n}),t.protocol&&t.address?t:null})(r.runtime.substr(9)));const i=((e,t)=>{if(!t||!t.length)return null;let r=e;return"string"==typeof e&&(r={id:e}),t.find(e=>e.id===r.id||!r.id&&r.protocol===e.protocol&&r.address===e.address)})(r.runtime,n);if(!i)return r.runtime.id||(r.runtime.id=o()),t.send({new:r.runtime}),t.send({out:r}),void t.done();r.runtime=i,t.send({out:r}),t.done()})}},function(e,t,r){const n=r(0),{v4:o}=r(20),i=(e,t,r,o,s)=>{if(!e.length)return void s();const a=e.shift();a.remote?(o.send({repository:new n.IP("data",t,{scope:r}),sha:new n.IP("data",a.remote.sha,{scope:r})}),setTimeout(()=>i(e,t,r,o,s),100)):i(e,t,r,o,s)};t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a set of blob fetching requests for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("sha",{datatype:"string"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(0===r.pull.length)return void t.done();const s=o();t.send({out:new n.IP("data",r,{scope:s})}),t.send({sha:new n.IP("openBracket",s,{scope:s})});const a=r.pull.slice(0);i(a,r.repo,s,t,()=>{t.send({sha:new n.IP("closeBracket",s,{scope:s})}),t.done()})})}},function(e,t,r){const n=r(0),o=(e,t)=>{if(["component","spec"].includes(e))return t.code;const r=t.toJSON();return delete r.properties.sha,delete r.properties.id,delete r.properties.project,delete r.properties.changed,JSON.stringify(r,null,4)};t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a GitHub tree for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("tree",{datatype:"array"}),e.outPorts.add("basetree",{datatype:"string"}),e.outPorts.add("parentcommits",{datatype:"array"}),e.outPorts.add("message",{datatype:"string"}),e.outPorts.add("ref",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","repository","tree","basetree","parentcommits","message","ref"],async:!0},(e,t,r,n)=>(null!=e.push?e.push.length:void 0)?(r.out.send(e),r.basetree.send(e.tree),r.tree.send(e.push.map(e=>{return{path:(t=e.type,r=e.path,"graph"!==t?r:r.replace(".fbp",".json")),content:o(e.type,e.local),mode:"100644"};var t,r})),r.repository.send(e.repo),r.parentcommits.send([e.commit]),r.message.send(e.message),r.ref.send(e.ref),n()):n())}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[,r]=e.getData("in","client");r.disconnect().then(()=>r.connect()).then(()=>t.send({out:r.definition})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.outPorts.add("invalid",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",out:["pass","updated","invalid"],async:!0},(e,t,r,n)=>{if(!e||!e["flowhub-token"])return r.pass.send(e),void n();if(!navigator.onLine)return r.pass.send(e),void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{let t;if(4===o.readyState){if(401===o.status)return r.invalid.send(e),void n();if(200===o.status){try{t=JSON.parse(o.responseText)}catch(e){return void n(e)}if(JSON.stringify(t)===JSON.stringify(e["flowhub-user"]))return r.pass.send(e),void n();r.updated.send(t),n()}else try{const e=JSON.parse(o.responseText);n(new Error(e.message||"User fetching failed with "+o.status))}catch(e){n(new Error(o.responseText))}}},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization","Bearer "+e["flowhub-token"]),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,o)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void o();const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState){if(![200,201,404].includes(i.status)){let{message:e}=JSON.parse(i.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void o(new Error(e))}n.send(t)}},i.open("DELETE","https://api.flowhub.io/projects/"+t.id,!0),i.setRequestHeader("Authorization","Bearer "+e.params.user["flowhub-token"]),i.send()})}},function(e,t,r){const n=r(0),o=r(54);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,i)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void i();new o.Runtime(t,{host:"https://api.flowhub.io"}).del(e.params.user["flowhub-token"],e=>e?i(e):(n.send(t),i()))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("route",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("missed",{datatype:"bang"}),n.helpers.WirePattern(e,{in:"in",out:["route","redirect","missed"],forwardGroups:!1,async:!0},(e,t,r,n)=>{const o=(e=>{const t={route:"",subroute:"open",runtime:null,project:null,graph:null,component:null,nodes:[]};if(""===e)return t.route="main",t;const r=e.split("/").map(e=>decodeURIComponent(e));switch(r.shift()){case"project":return t.route="storage",t.project=r.shift(),"component"===r[0]&&2===r.length?([,t.component]=r,t):(t.graph=r.shift(),t.nodes=r,t);case"example":return{route:"redirect",url:"gist/"+r.join("/")};case"gist":return t.route="github",t.subroute="gist",t.graph=r.shift(),t.remote=r,t;case"github":{t.route="github";const[e,n]=r.splice(0,2);return t.repo=`${e}/${n}`,t.branch="master",r.length?"tree"===r[0]?(r.shift(),t.branch=r.join("/"),t):("blob"===r[0]&&(r.shift(),t.branch=r.shift(),"graphs"===r[0]&&([,t.graph]=r),"components"===r[0]&&([,t.component]=r)),t):t}case"runtime":return t.route="runtime",t.runtime=r.shift(),"component"===r[0]&&2===r.length?([,t.component]=r,t):(t.graph=r.shift(),t.nodes=r,t);default:return{route:"redirect",url:""}}})(e.payload);if(!o)return r.missed.send({payload:o}),void n();if("redirect"===o.route)return r.redirect.send("#"+o.url),void n();const i=`${o.route}:${o.subroute}`;delete o.subroute,r.route.send({action:i,payload:o}),n()})}},function(e,t,r){const n=r(0),o=r(55);t.getComponent=()=>{const e=new n.Component;return e.description="Execute fbp-spedc tests in the project",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),{project:i}=r,s=i.specs.filter(e=>"yaml"===e.language&&e.code).map(e=>{try{return o.testsuite.loadYAML(e.code)}catch(e){return[]}}).reduce((e,t)=>e.concat(t),[]);s.length||t.done(),t.send({out:[...s]}),n.connect().then(()=>new Promise((e,r)=>{const i=new o.runner.Runner(n);o.runner.runAll(i,s,()=>{t.send({out:s})},t=>{t?r(t):e()})})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(342),i=r(4)("noflo-ui:reducer:runtime"),{componentForLibrary:s}=r(11),a=r(21),c=(e,t,r,n)=>{const i=e.runtimeEvents||{};return t?(i[t]||(i[t]=new o(400)),i[t].enq({type:r,payload:n}),i):i},u=(e,t,r)=>{const n=e||{};if(!t)return n;if(!n[t])return n;const i=n[t].toarray().filter(r);return i.reverse(),n[t]=new o(400),i.forEach(e=>{n[t].enq(e)}),n};t.getComponent=()=>{const e=new n.Component;return e.icon="cogs",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("context",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");switch(r.action){case"runtime:opening":return void t.sendDone({context:{state:"loading"}});case"runtime:opened":return void t.sendDone({context:{...r.payload}});case"runtime:components":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=r.payload.components.map(s),void t.sendDone({context:{componentLibraries:e}})}case"runtime:component":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=e[r.payload.runtime]||[],a.addToList(e[r.payload.runtime],s(r.payload.component)),void t.sendDone({context:{componentLibraries:e}})}case"runtime:status":{const e=r.state.runtimeStatuses||{},n=e[r.payload.runtime];let o=r.state.runtimeEvents||{};n&&n.online&&!r.payload.status.online&&(o=c(r.state,r.payload.runtime,"disconnected",r.payload.status)),n&&n.online||!r.payload.status.online||(o=c(r.state,r.payload.runtime,"connected",r.payload.status)),e[r.payload.runtime]=r.payload.status;const i={runtimeStatuses:e,runtimeEvents:o};if(!r.payload.status.online){const e=r.state.runtimeExecutions||{};e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",i.runtimeExecutions=e}return void t.sendDone({context:i})}case"runtime:started":{const e=r.state.runtimeExecutions||{};let n=r.state.runtimeEvents||{};return e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].label="running",r.payload.status.running||(e[r.payload.runtime].label="finished"),n=c(r.state,r.payload.runtime,"started "+r.payload.status.graph,r.payload.status),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:n}})}case"runtime:stopped":{const e=r.state.runtimeExecutions||{};let n=r.state.runtimeEvents||{};return e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",n=c(r.state,r.payload.runtime,"stopped "+r.payload.status.graph,r.payload.status),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:n}})}case"runtime:packet":{const e=((e,t,r)=>{const n=r,i=e.runtimePackets||{};return t?(i[t]||(i[t]=new o(400)),delete n.runtime,i[t].enq(n),i):i})(r.state,r.payload.runtime,r.payload.packet);return void t.sendDone({context:{runtimePackets:e}})}case"runtime:processerror":{const e=c(r.state,r.payload.runtime,"processerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:networkerror":{const e=c(r.state,r.payload.runtime,"networkerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:protocolerror":{const e=c(r.state,r.payload.runtime,"protocolerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:output":{const e=c(r.state,r.payload.runtime,"output",r.payload.output);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:icon":{const e=r.state.runtimeIcons||{};e[r.payload.runtime]||(e[r.payload.runtime]={}),e[r.payload.runtime][r.payload.icon.graph]||(e[r.payload.runtime][r.payload.icon.graph]={});return e[r.payload.runtime][r.payload.icon.graph][r.payload.icon.id]=r.payload.icon.icon,void t.sendDone({context:{runtimeIcons:e}})}case"runtime:testsuites":return void t.sendDone({context:{suites:r.payload}});case"runtime:error":{let e=r.payload.runtime;!e&&r.state.runtime&&(e=r.state.runtime.id);const n=c(r.state,e,"error",r.payload);return t.send({context:{runtimeEvents:n}}),void t.sendDone({context:{state:"error",error:r.payload}})}case"runtime:clearevents":{const e=u(r.state.runtimeEvents,r.payload.runtime,e=>!(!r.payload.type||e.type===r.payload.type)||(!(!r.payload.graph||e.payload.graph===r.payload.graph)||!(!r.payload.id||e.payload.id===r.payload.id)));return void t.send({context:{runtimeEvents:e}})}case"runtime:clearpackets":{const e=u(r.state.runtimePackets,r.payload.runtime,e=>{if(r.payload.type&&e.type!==r.payload.type)return!0;if(r.payload.graph&&e.graph!==r.payload.graph)return!0;if(null!=r.payload.edge?r.payload.edge.from:void 0){if(!e.src)return!0;if(e.src.node!==r.payload.edge.from.node)return!0;if(e.src.port!==r.payload.edge.from.port)return!0}if(null!=r.payload.edge?r.payload.edge.to:void 0){if(!e.tgt)return!0;if(e.tgt.node!==r.payload.edge.to.node)return!0;if(e.tgt.port!==r.payload.edge.to.port)return!0}return!1});return void t.send({context:{runtimePackets:e}})}default:i("Unknown action "+r.action)}})}},function(e,t){function r(e){if(!(this instanceof r))return new r(e);if("object"==typeof e&&Array.isArray(e._buffer)&&"number"==typeof e._capacity&&"number"==typeof e._first&&"number"==typeof e._size)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);else{if("number"!=typeof e||e%1!=0||e<1)throw new TypeError("Invalid capacity");this._buffer=new Array(e),this._capacity=e,this._first=0,this._size=0}}r.prototype={size:function(){return this._size},capacity:function(){return this._capacity},enq:function(e){this._first>0?this._first--:this._first=this._capacity-1,this._buffer[this._first]=e,this._size<this._capacity&&this._size++},push:function(e){this._size==this._capacity?(this._buffer[this._first]=e,this._first=(this._first+1)%this._capacity):(this._buffer[(this._first+this._size)%this._capacity]=e,this._size++)},deq:function(){if(0==this._size)throw new RangeError("dequeue on empty buffer");var e=this._buffer[(this._first+this._size-1)%this._capacity];return this._size--,e},pop:function(){return this.deq()},shift:function(){if(0==this._size)throw new RangeError("shift on empty buffer");var e=this._buffer[this._first];return this._first==this._capacity-1?this._first=0:this._first++,this._size--,e},get:function(e,t){if(0==this._size&&0==e&&(null==t||0==t))return[];if("number"!=typeof e||e%1!=0||e<0)throw new TypeError("Invalid start");if(e>=this._size)throw new RangeError("Index past end of buffer: "+e);if(null==t)return this._buffer[(this._first+e)%this._capacity];if("number"!=typeof t||t%1!=0||t<0)throw new TypeError("Invalid end");if(t>=this._size)throw new RangeError("Index past end of buffer: "+t);return this._first+e>=this._capacity&&(e-=this._capacity,t-=this._capacity),this._first+t<this._capacity?this._buffer.slice(this._first+e,this._first+t+1):this._buffer.slice(this._first+e,this._capacity).concat(this._buffer.slice(0,this._first+t+1-this._capacity))},toarray:function(){return 0==this._size?[]:this.get(0,this._size-1)}},e.exports=r},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{e.hasData("in","client")&&(e.getData("in","client"),t.done(new Error("Edit as Project is no longer supported")))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("nodes",{datatype:"array"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:"nodes",out:"context",async:!0},(e,t,r,n)=>{const o={searchGraphResult:e};r.send(o),n()})}},function(e,t,r){const n=r(0),{getComponentType:o}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n,i]=e.getData("in","project","client"),{component:s}=r,a=o(s);if(a&&a!==i.definition.type)return void t.done();let c=s.tests||"";n.specs.forEach(e=>{e.name===s.name&&(c=e.code)}),i.connect().then(()=>i.protocol.component.source({name:s.name,language:s.language,library:(null!=n?n.namespace:void 0)||i.definition.namespace,code:s.code,tests:c})).then(e=>t.send({out:{component:e,runtime:i.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),t.sendDone({out:window.location.href.split("#")[1]||""}))})}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("client",{datatype:"object"}),e.inPorts.add("graphs",{datatype:"array"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("edges",{datatype:"array"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("client","graphs","project","edges"))return;const[r,n,i,s]=e.getData("client","graphs","project","edges");if(t.send({out:s}),!n.length)return void t.done(new Error("No graph specified"));const a=n[n.length-1],c=i?i.namespace:null;r.protocol.network.edges({graph:o(a,c),edges:s.map(e=>({src:e.from,tgt:e.to}))}).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o,graphRuntimeIdentifier:i}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n]=e.getData("in","client"),s=e.getData("project"),a=o(r.graph);if(a&&a!==n.definition.type)return void t.done();const c=r.changes.map(e=>{const t=e;return t.event=e.event.toLowerCase(),t}).filter(e=>n.protocol.graph[e.event]);n.connect().then(()=>Promise.all(c.map(e=>n.protocol.graph[e.event](((e,t,r,n)=>{const o={};return Object.keys(t).forEach(r=>{const n=t[r];"from"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"to"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"metadata"===r&&["removenode","removeedge","removeinitial","removeinport","removeoutport","removegroup"].includes(e)||["node","port"].includes(r)&&["removeinport","removeoutport"].includes(e)||"component"===r&&["changenode","removenode"].includes(e)||("metadata"===r&&n&&(o.metadata={},Object.keys(n).forEach(e=>{const t=n[e];"route"===e&&null===t||(o.metadata[e]=t)})),o[r]=n):o.tgt=n:o.src=n}),o.graph=i(r,n),o})(e.event,e.payload,r.graph,s.namespace)).catch(e=>"Requested graph not found"===e.message?n.protocol.graph.send({...r.graph,name:i(r.graph,s.namespace),properties:{...r.graph.properties,library:s.namespace}},r.graph.properties.main):Promise.reject(e))))).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o,graphRuntimeIdentifier:i}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),{graph:s,project:a}=r,c=o(s);if(c&&c!==n.definition.type)return void t.done();const u=a?a.namespace:null;n.connect().then(()=>n.protocol.graph.send({...s,name:i(s,u),properties:{...s.properties,library:u}},s.properties.main)).then(()=>t.sendDone({out:r}),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("action",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("out",{datatype:"all",scoped:!1}),n.helpers.WirePattern(e,{params:["action"],forwardGroups:!1,async:!0},(t,r,n,o)=>(n.send({action:e.params.action,payload:t}),o()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="indent",e.inPorts.add("context",{datatype:"object"}),e.inPorts.add("key",{datatype:"string",required:!0}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:["context","value"],params:"key",out:"context",async:!0},(t,r,n,o)=>{const i=t;i.context[e.params.key]=i.value,n.send(i.context),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.href=e.payload,r.send(!0),n()))}},function(e,t,r){const n=r(0),{hashToString:o}=r(111);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.hash=o(e.payload),r.send(!0),n()))}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),i=r.project?r.project.namespace:null;n.connect().then(()=>n.protocol.network.start({graph:o(r.graph,i)})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(4)("noflo-ui:state");t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.state={},e.tearDown=t=>{e.state={},t()},n.helpers.WirePattern(e,{in:"in",out:["state","updated"],async:!0,forwardGroups:!1},(t,r,n,i)=>(Object.keys(t).forEach(r=>{const n=t[r];e.state[r]!==n&&(o(r+" changed",e.state[r],n),e.state[r]=n)}),n.state.send(e.state),n.updated.send(t),i()))}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),i=r.project?r.project.namespace:null;n.connect().then(()=>n.protocol.network.stop({graph:o(r.graph,i)})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(21),i=(e,t)=>{const r=(null!=e.properties?e.properties.project:void 0)||e.project;if(!r)return null;const n=t.filter(e=>e.id===r);return n.length?n[0]:null};t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:"out",forwardGroups:!1,async:!0},(e,t,r,n)=>{switch(e.action){case"storage:db":{const t=e.state||{};return t.db=e.payload,r.send(t),void n()}case"storage:opened":return r.send(e.payload),void n();case"storage:stored:initial":{const t=e.payload;return t.storedGraphs=t.graphs,delete t.graphs,t.projects.sort(o.sortByName),t.storedGraphs.sort(o.sortByName),t.components.sort(o.sortByName),t.specs.sort(o.sortByName),t.runtimes.sort(o.sortBySeen),t.projects.forEach(e=>{const r=e;r.graphs=t.storedGraphs.filter(e=>e.properties.project===r.id),r.components=t.components.filter(e=>e.project===r.id),r.specs=t.specs.filter(e=>e.project===r.id)}),r.send(t),void n()}case"storage:stored:project":{const t={},i=e.payload;return i.graphs||(i.graphs=[]),e.state.storedGraphs&&!i.graphs.length&&(i.graphs=e.state.storedGraphs.filter(e=>e.properties.project===i.id)),i.components||(i.components=[]),e.state.components&&!i.components.length&&(i.components=e.state.components.filter(e=>e.project===i.id)),i.specs||(i.specs=[]),e.state.specs&&!i.specs.length&&(i.specs=e.state.specs.filter(e=>e.project===i.id)),t.projects=e.state.projects||[],o.addToList(t.projects,i),r.send(t),void n()}case"storage:removed:project":{const t={};return t.projects=e.state.projects||[],o.removeFromList(t.projects,{id:e.payload}),r.send(t),void n()}case"storage:stored:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.addToList(t.storedGraphs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.graphs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.removeFromList(t.storedGraphs,{properties:{id:e.payload}}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.graphs,{properties:{id:e.payload}}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:component":{const t={};t.components=e.state.components||[],o.addToList(t.components,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.components,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:component":{const t={};t.components=e.state.components||[],o.removeFromList(t.components,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.components,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:spec":{const t={};t.specs=e.state.specs||[],o.addToList(t.specs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.specs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:spec":{const t={};t.specs=e.state.specs||[],o.removeFromList(t.specs,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.specs,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.addToList(t.runtimes,e.payload,o.sortBySeen),r.send(t),void n()}case"storage:removed:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.removeFromList(t.runtimes,{id:e.payload}),r.send(t),void n()}case"storage:error":{const t={state:"error",error:e.payload};return r.send(t),void n()}default:n()}})}},function(e,t,r){const n=r(0),o=r(4)("noflo-ui:store"),i=r(4)("noflo-ui:store:error");t.getComponent=()=>{const e=new n.Component;return e.icon="rocket",e.inPorts.add("action",{datatype:"all"}),e.inPorts.add("state",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object",scoped:!1}),e.state={},e.tearDown=t=>{e.state={},t()},e.forwardBrackets={},e.process((t,r)=>{if(t.hasData("state"))return e.state=t.getData("state"),void r.done();if(!t.hasStream("action"))return;t.getStream("action").filter(e=>"data"===e.type).map(e=>e.data).forEach(t=>{t.action?(t.state?e.state=t.state:o(t.action+" was sent without state, using previous state"),r.send({pass:{action:t.action,state:e.state,payload:t.payload}})):i("Received action without expected payload",t)}),r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","user"))return;const[r,n]=e.getData("in","user");if(!n||!n["flowhub-token"])return void t.sendDone({out:r});const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(![200,201].includes(o.status)){let{message:e}=JSON.parse(o.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void t.done(new Error(e))}t.sendDone({out:r})}};const i=JSON.stringify({repo:r.repo,active:!0});o.open("POST","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization","Bearer "+n["flowhub-token"]),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(i)})}},function(e,t,r){const n=r(0),o=r(54),{isDefaultRuntime:i}=r(11);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,s)=>{if(["opener","microflo"].includes(t.protocol))return n.send(t),void s();if(i(t))return n.send(t),void s();if(!(e.params&&e.params.user&&e.params.user["flowhub-token"]&&e.params.user["flowhub-user"]&&e.params.user["flowhub-user"].id))return n.send(t),void s();const a=t;a.user=e.params.user["flowhub-user"].id,t.secret||(a.secret=null);new o.Runtime(t,{host:"https://api.flowhub.io"}).register(e.params.user["flowhub-token"],e=>{e?s(e):(n.send(t),s())})})}},function(e,t,r){const n=r(0),o=r(30);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),n.helpers.WirePattern(e,{in:"user",out:["user","redirect"],async:!0},(e,t,r,n)=>{const i=(null!=e.plan?e.plan.type:void 0)||"free",s=(null!=e.github?e.github.token:void 0)||"",a=(null!=e.github?e.github.username:void 0)||"";((e,t)=>{if(!e)return void t(null,null);const r=new XMLHttpRequest,n=new FileReader;r.open("GET",e,!0),r.responseType="blob",r.onload=()=>200!==r.status?t(new Error("Avatar request returned "+r.status)):(n.onload=e=>t(null,e.target.result),n.readAsDataURL(r.response)),r.onerror=()=>t(new Error("Avatar request failed")),r.send()})(e.avatar,(t,c)=>{const u={"flowhub-avatar":c,"flowhub-plan":i,"flowhub-token":s,"flowhub-user":JSON.stringify(e),"github-token":s,"github-username":a};c||delete u["flowhub-avatar"],Object.keys(u).forEach(e=>{const t=u[e];localStorage.setItem(e,t)}),u["flowhub-user"]=e,r.user.send(u),((e,t)=>{const r=o.parse(window.location.href);delete r.search;const n=o.format(r);if(n!==r){if(null!=window.history?window.history.replaceState:void 0)return window.history.replaceState({},"clear",r.pathname),void t();e.send(n),t()}else t()})(r.redirect,n)})})}},function(e,t,r){const n=r(0),o=["flowhub-theme","flowhub-debug"];t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","user"))return;const[r,n]=e.getData("in","user"),i=Object.keys(r);for(let e=0;e<i.length;e+=1){const s=i[e],a=r[s];if(-1===o.indexOf(s))return void t.done(new Error(s+" is not a valid preference"));localStorage.setItem(s,a),n[s]=a}t.sendDone({out:n})})}},function(e,t,r){const n=r(0),o=r(38),i=(e,t,r,n)=>((e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);return i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()})(`/repos/${e}/git/trees/${t}`,r,n),s=(e,t,r,n,o,a,c)=>{const u=[],p=[];return t.tree.forEach(t=>{const n=t;n.fullPath=`${e}${n.path}`,"tree"!==n.type?r.forEach(e=>{const t=e;if(n.fullPath===t.path||n.fullPath===t.path.replace(".fbp",".json")){if("graph"===t.type)return t.local.properties.sha=n.sha,t.local.properties.changed=!1,p.push(t),void a.graph.send(t.local);t.local.sha=n.sha,t.local.changed=!1,p.push(t),"spec"!==t.type?a.component.send(t.local):a.spec.send(t.local)}}):u.push(n)}),p.forEach(e=>{r.splice(r.indexOf(e),1)}),0===r.length?c():u.forEach(e=>i(n,e.sha,o,(t,i)=>t?c(t):s(e.fullPath+"/",i,r,n,o,a,c)))};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("tree",{datatype:"object"}),e.inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("spec",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["in","tree","repository"],params:"token",out:["graph","component","spec"],async:!0},(t,r,n,o)=>t.tree.tree&&(null!=t.in.push?t.in.push.length:void 0)?s("",t.tree,t.in.push,t.repository,e.params.token,n,o):o()),e}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{item:{process:"Put",port:"value"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Put:{component:"indexeddb/Put"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Put",port:"store"}},{src:{process:"EnsureId",port:"out"},tgt:{process:"Put",port:"value"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Put",port:"error"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"OriginalProject",port:"out"},graph:{process:"OriginalGraph",port:"out"},component:{process:"OriginalComponent",port:"out"},spec:{process:"OriginalSpec",port:"out"},runtime:{process:"OriginalRuntime",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},SaveProject:{component:"ui/Save"},ProjectsStore:{component:"strings/SendString"},OriginalProject:{component:"core/SendNext"},ConvertProject:{component:"ui/CleanProject"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},SaveGraph:{component:"ui/Save"},GraphsStore:{component:"strings/SendString"},OriginalGraph:{component:"core/SendNext"},ConvertGraph:{component:"objects/CallMethod"},GetComponentsDb:{component:"ui/GetActionValues"},SaveComponent:{component:"ui/Save"},ComponentsStore:{component:"strings/SendString"},OriginalComponent:{component:"core/SendNext"},GetSpecsDb:{component:"ui/GetActionValues"},SaveSpec:{component:"ui/Save"},SpecsStore:{component:"strings/SendString"},OriginalSpec:{component:"core/SendNext"},GetRuntimesDb:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/Save"},RuntimesStore:{component:"strings/SendString"},OriginalRuntime:{component:"core/SendNext"}},connections:[{data:"storage:save:project,storage:save:graph,storage:save:component,storage:save:spec,storage:save:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"SaveProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"OriginalProject",port:"data"}},{src:{process:"SaveProject",port:"item"},tgt:{process:"OriginalProject",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"SaveProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ConvertProject",port:"in"}},{src:{process:"ConvertProject",port:"out"},tgt:{process:"SaveProject",port:"item"}},{src:{process:"SaveProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"SaveGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"OriginalGraph",port:"data"}},{src:{process:"SaveGraph",port:"item"},tgt:{process:"OriginalGraph",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"SaveGraph",port:"store"}},{data:"toJSON",tgt:{process:"ConvertGraph",port:"method"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"SaveGraph",port:"item"}},{src:{process:"SaveGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"SaveComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"OriginalComponent",port:"data"}},{src:{process:"SaveComponent",port:"item"},tgt:{process:"OriginalComponent",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"SaveComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"SaveComponent",port:"item"}},{src:{process:"SaveComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"SaveSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"OriginalSpec",port:"data"}},{src:{process:"SaveSpec",port:"item"},tgt:{process:"OriginalSpec",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"SaveSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SaveSpec",port:"item"}},{src:{process:"SaveSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"SaveRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"OriginalRuntime",port:"data"}},{src:{process:"SaveRuntime",port:"item"},tgt:{process:"OriginalRuntime",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"SaveRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"SaveRuntime",port:"item"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t,r){const n=r(0),o=r(79),i=(e,t,r)=>{const n=e,i=t;return n.id&&i[n.id]?Promise.resolve(i[n.id]):(n.secret||(n.secret=""),o(n,{skipValidation:!0,connectionTimeout:5e3}).then(e=>{if(r.send({instance:e}),!e.definition.id)return e;const t=n.id;return i[t]=e,e.isConnected()||e.once("connected",()=>{e.definition.id!==t&&(delete i[t],i[e.definition.id]=e)}),e}))};t.getComponent=()=>{const e=new n.Component;return e.description="Holder for runtime instances",e.inPorts.add("initial",{description:"Initialize client for all stored runtime definitions",datatype:"object"}),e.inPorts.add("updated",{description:"Update client instance for a runtime definition",datatype:"object"}),e.inPorts.add("in",{description:"Get client instance for a route definition",datatype:"object",addressable:!0}),e.outPorts.add("instance",{description:"Client instance when created",datatype:"object"}),e.outPorts.add("out",{description:"Route runtime client was matched for",datatype:"object",addressable:!0}),e.outPorts.add("client",{description:"Runtime client instance",datatype:"object",addressable:!0}),e.outPorts.add("updated",{description:"Updated runtime definition",datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={},e.tearDown=t=>(e.clients={},t()),e.process((t,r)=>{if(t.hasData("initial")){let n=t.getData("initial");return n||(n=[]),void Promise.all(n.map(t=>i(t,e.clients,r))).then(()=>r.done(),e=>r.done(e))}if(t.hasData("updated")){const n=t.getData("updated"),o=n.payload||n;o.secret||(o.secret=""),i(o,e.clients,r).then(()=>(r.send({updated:n}),r.done()),e=>r.done(e))}const o=t.attached("in").filter(e=>t.hasData(["in",e]));o.length&&Promise.all(o.map(n=>{const o=t.getData(["in",n]);if(!o.runtime)return Promise.reject(new Error("No runtime defined"));let{runtime:s}=o;return"string"==typeof s&&(s={id:s},o.runtime=s),i(s,e.clients,r).then(e=>({client:e,route:o,idx:n}))})).then(e=>(()=>{const t=[];return e.forEach(e=>{t.push(r.send({client:new n.IP("data",e.client,{index:e.idx}),out:new n.IP("data",e.route,{index:e.idx})}))}),t})()).then(()=>r.done(),e=>r.done(e))}),e}},function(e,t,r){const n=r(0),o=()=>{const e=localStorage.getItem("noflo-ui-graphs"),t=[];return e?(e.split(",").forEach(e=>{const r=(e=>{const t=localStorage.getItem(e);if(!t)return null;const r=JSON.parse(t);return r.id=e,r.project="",r})(e);r&&t.push(r)}),t):t};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graphstore",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("graphstore"))return;const r=e.getData("graphstore");if("undefined"!=typeof chrome&&chrome.storage)return void t.done();try{localStorage.getItem("noflo")}catch(e){return void t.done()}const n=o();if(0===n.length)return void t.done();let i=0;const s=()=>{i+=1,i===n.length&&t.done()};n.forEach(e=>{r.put(e).onsuccess=s})})}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanEdges:{component:"ui/CleanAction"},CreateEdgeCtx:{component:"objects/CreateObject"},SetEdges:{component:"ui/SetToContext"},MergeContext:{component:"core/Merge"},CleanNodes:{component:"ui/CleanAction"},CreateNodeCtx:{component:"objects/CreateObject"},SetNodes:{component:"ui/SetToContext"},CleanSearch:{component:"ui/CleanAction"},CleanSearchResults:{component:"ui/CleanAction"},CleanGraph:{component:"ui/CleanAction"},GetGraph:{component:"objects/GetObjectKey"},SendGraphKey:{component:"strings/SendString"},FindNodesInGraph:{component:"ui/FindNodesInGraph"},CleanSearchterm:{component:"ui/CleanAction"},GetSearchTerm:{component:"objects/GetObjectKey"},SendSearchKey:{component:"strings/SendString"},NodesToContext:{component:"ui/SearchGraphNodeToContext"}},connections:[{data:"context:edges,context:nodes,context:search_library,context:search_graph,context:search_library_result,context:graph",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanEdges",port:"in"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"CreateEdgeCtx",port:"start"}},{src:{process:"CreateEdgeCtx",port:"out"},tgt:{process:"SetEdges",port:"context"}},{data:"edges",tgt:{process:"SetEdges",port:"key"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"SetEdges",port:"value"}},{src:{process:"SetEdges",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CleanNodes",port:"in"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"CreateNodeCtx",port:"start"}},{src:{process:"CreateNodeCtx",port:"out"},tgt:{process:"SetNodes",port:"context"}},{data:"nodes",tgt:{process:"SetNodes",port:"key"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"SetNodes",port:"value"}},{src:{process:"SetNodes",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"CleanSearch",port:"in"}},{src:{process:"CleanSearch",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"CleanSearchResults",port:"in"}},{src:{process:"CleanSearchResults",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"CleanGraph",port:"in"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"GetGraph",port:"in"}},{data:"graph",tgt:{process:"SendGraphKey",port:"string"}},{src:{process:"SendGraphKey",port:"out"},tgt:{process:"GetGraph",port:"key"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"SendGraphKey",port:"in"}},{src:{process:"GetGraph",port:"out"},tgt:{process:"FindNodesInGraph",port:"graph"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"CleanSearchterm",port:"in"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"GetSearchTerm",port:"in"}},{data:"search",tgt:{process:"SendSearchKey",port:"string"}},{src:{process:"SendSearchKey",port:"out"},tgt:{process:"GetSearchTerm",port:"key"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"SendSearchKey",port:"in"}},{src:{process:"GetSearchTerm",port:"out"},tgt:{process:"FindNodesInGraph",port:"search"}},{src:{process:"FindNodesInGraph",port:"nodes"},tgt:{process:"NodesToContext",port:"nodes"}},{src:{process:"NodesToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"search"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{key:{process:"Delete",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Delete:{component:"indexeddb/Delete"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Delete",port:"store"}},{src:{process:"EnsureId",port:"id"},tgt:{process:"Delete",port:"key"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Delete",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"DeleteProject",port:"key"},graph:{process:"DeleteGraph",port:"key"},component:{process:"DeleteComponent",port:"key"},spec:{process:"DeleteSpec",port:"key"},runtime:{process:"DeleteRuntime",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},DeleteProject:{component:"ui/Delete"},ProjectsStore:{component:"strings/SendString"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},DeleteGraph:{component:"ui/Delete"},GraphsStore:{component:"strings/SendString"},GetComponentsDb:{component:"ui/GetActionValues"},DeleteComponent:{component:"ui/Delete"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},DeleteSpec:{component:"ui/Delete"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},DeleteRuntime:{component:"ui/Delete"},RuntimesStore:{component:"strings/SendString"}},connections:[{data:"storage:delete:project,storage:delete:graph,storage:delete:component,storage:delete:spec,storage:delete:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"DeleteProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"DeleteProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"DeleteProject",port:"item"}},{src:{process:"DeleteProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"DeleteGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"DeleteGraph",port:"store"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"DeleteGraph",port:"item"}},{src:{process:"DeleteGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"DeleteComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"DeleteComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"DeleteComponent",port:"item"}},{src:{process:"DeleteComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"DeleteSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"DeleteSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"DeleteSpec",port:"item"}},{src:{process:"DeleteSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"DeleteRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"DeleteRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"DeleteRuntime",port:"item"}},{src:{process:"DeleteRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},ApplicationRedirectAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},OpenMainAction:{component:"ui/SetAction"},SaveGraphAction:{component:"ui/SetAction"},SaveComponentAction:{component:"ui/SetAction"},SaveSpecAction:{component:"ui/SetAction"},SaveProjectAction:{component:"ui/SetAction"},GithubPullAction:{component:"ui/SetAction"},GithubOperationAction:{component:"ui/SetAction"},GithubLoadingAction:{component:"ui/SetAction"},GithubReadyAction:{component:"ui/SetAction"},ErrorAction:{component:"ui/SetAction"},CheckRepo:{component:"ui/CheckRepoExists"},CheckGist:{component:"ui/CheckGistExists"},GetGistToken:{component:"ui/GetUserToken"},GetGist:{component:"ui/GistToProject"},GetPrepareToken:{component:"ui/GetUserToken"},GithubSynchronization:{component:"ui/GithubSynchronization"},GetSyncToken:{component:"ui/GetUserToken"},GetPullToken:{component:"ui/GetUserToken"}},connections:[{data:"github:open,github:gist,github:sync:prepare,github:sync:synchronize,github:sync:pull",tgt:{process:"Dispatch",port:"routes"}},{data:"application:sethash",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"main:open",tgt:{process:"OpenMainAction",port:"action"}},{src:{process:"OpenMainAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"SaveGraphAction",port:"action"}},{src:{process:"SaveGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"SaveComponentAction",port:"action"}},{src:{process:"SaveComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:spec",tgt:{process:"SaveSpecAction",port:"action"}},{src:{process:"SaveSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:project",tgt:{process:"SaveProjectAction",port:"action"}},{src:{process:"SaveProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:sync:pull",tgt:{process:"GithubPullAction",port:"action"}},{src:{process:"GithubPullAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:operation",tgt:{process:"GithubOperationAction",port:"action"}},{src:{process:"GithubOperationAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:loading",tgt:{process:"GithubLoadingAction",port:"action"}},{src:{process:"GithubLoadingAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:ready",tgt:{process:"GithubReadyAction",port:"action"}},{src:{process:"GithubReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:error",tgt:{process:"ErrorAction",port:"action"}},{src:{process:"ErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckRepo",port:"in"}},{src:{process:"CheckRepo",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckRepo",port:"openmain"},tgt:{process:"OpenMainAction",port:"in"}},{src:{process:"CheckRepo",port:"new"},tgt:{process:"GithubPullAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CheckGist",port:"in"}},{src:{process:"CheckGist",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckGist",port:"new"},tgt:{process:"GetGistToken",port:"in"}},{data:"1",tgt:{process:"GetGistToken",port:"limit"}},{src:{process:"GetGistToken",port:"token"},tgt:{process:"GetGist",port:"token"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GetGist",port:"in"}},{src:{process:"GetGistToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GetGist",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GetGist",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GetGist",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetPrepareToken",port:"in"}},{src:{process:"GetPrepareToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubSynchronization",port:"prepare"}},{src:{process:"GetPrepareToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubOperationAction",port:"in"}},{src:{process:"GithubSynchronization",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSyncToken",port:"in"}},{src:{process:"GetSyncToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetSyncToken",port:"out"},tgt:{process:"GithubSynchronization",port:"sync"}},{src:{process:"GetSyncToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GithubSynchronization",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GithubSynchronization",port:"spec"},tgt:{process:"SaveSpecAction",port:"in"}},{src:{process:"GithubSynchronization",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GithubSynchronization",port:"loading"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GithubSynchronization",port:"ready"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetPullToken",port:"in"}},{src:{process:"GetPullToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPullToken",port:"out"},tgt:{process:"GithubSynchronization",port:"pull"}},{src:{process:"GetPullToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"},Loading:{component:"ui/CreateLoadingContext"},Ready:{component:"ui/CreateEmptyContext"}},connections:[{data:"github:operation,github:error,github:loading,github:ready",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"syncOperation",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Loading",port:"start"}},{src:{process:"Loading",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"Ready",port:"start"}},{src:{process:"Ready",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{token:{process:"Token",port:"in"},prepare:{process:"RepoToPrepare",port:"in"},sync:{process:"DoSync",port:"in"},pull:{process:"PullRepo",port:"in"}},outports:{operation:{process:"MergeOps",port:"out"},component:{process:"UpdatedComponent",port:"out"},graph:{process:"UpdatedGraph",port:"out"},spec:{process:"UpdatedSpec",port:"out"},project:{process:"BlobToEntry",port:"project"},loading:{process:"Loading",port:"out"},ready:{process:"Ready",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{SendRepoKey:{component:"strings/SendString"},GetRepoToPrepare:{component:"objects/GetObjectKey"},RepoToPrepare:{component:"core/Split"},Token:{component:"core/Repeat"},GetReference:{component:"github/GetReference"},CheckSyncState:{component:"ui/CheckSyncState"},SendProjectKey:{component:"strings/SendString"},GetProject:{component:"objects/GetObjectKey"},Errors:{component:"core/Merge"},MergeOps:{component:"core/Merge"},DoSync:{component:"core/Repeat"},PreparePulls:{component:"ui/PreparePulls"},GetBlob:{component:"github/GetBlob"},BlobToEntry:{component:"ui/BlobToEntry"},CompletePulls:{component:"flow/Race"},UpdatedComponent:{component:"core/Merge"},UpdatedGraph:{component:"core/Merge"},UpdatedSpec:{component:"core/Merge"},Ready:{component:"core/Repeat"},PreparePush:{component:"ui/PreparePush"},UpdateFromTree:{component:"ui/UpdateFromTree"},CreateTree:{component:"github/CreateTree"},SendTreeSha:{component:"strings/SendString"},GetTreeSha:{component:"objects/GetObjectKey"},CreateCommit:{component:"github/CreateCommit"},UpdateReference:{component:"github/UpdateReference"},SendPullRepo:{component:"strings/SendString"},GetPullRepo:{component:"objects/GetObjectKey"},PullRepo:{component:"core/Split"},Loading:{component:"core/Repeat"},GetPullReference:{component:"github/GetReference"},CheckPullState:{component:"ui/CheckSyncState"},SendPullProject:{component:"strings/SendString"},GetPullProject:{component:"objects/GetObjectKey"}},connections:[{data:"repo",tgt:{process:"SendRepoKey",port:"string"}},{src:{process:"SendRepoKey",port:"out"},tgt:{process:"GetRepoToPrepare",port:"key"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"GetRepoToPrepare",port:"in"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"SendRepoKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetReference",port:"token"}},{src:{process:"GetRepoToPrepare",port:"out"},tgt:{process:"GetReference",port:"repository"}},{src:{process:"GetReference",port:"reference"},tgt:{process:"CheckSyncState",port:"reference"}},{data:"project",tgt:{process:"SendProjectKey",port:"string"}},{src:{process:"SendProjectKey",port:"out"},tgt:{process:"GetProject",port:"key"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"GetProject",port:"in"}},{src:{process:"GetProject",port:"out"},tgt:{process:"CheckSyncState",port:"project"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"SendProjectKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckSyncState",port:"token"}},{src:{process:"GetReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"noop"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"local"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"remote"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"both"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePulls",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetBlob",port:"token"}},{src:{process:"PreparePulls",port:"out"},tgt:{process:"BlobToEntry",port:"operation"}},{src:{process:"PreparePulls",port:"repository"},tgt:{process:"GetBlob",port:"repository"}},{src:{process:"PreparePulls",port:"sha"},tgt:{process:"GetBlob",port:"sha"}},{src:{process:"GetBlob",port:"out"},tgt:{process:"CompletePulls",port:"in",index:0}},{src:{process:"CompletePulls",port:"out"},tgt:{process:"BlobToEntry",port:"blob"}},{src:{process:"GetBlob",port:"error"},tgt:{process:"CompletePulls",port:"error"}},{src:{process:"CompletePulls",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"BlobToEntry",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"BlobToEntry",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"BlobToEntry",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"BlobToEntry",port:"project"},tgt:{process:"Ready",port:"in"}},{src:{process:"BlobToEntry",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePush",port:"in"}},{src:{process:"PreparePush",port:"out"},tgt:{process:"UpdateFromTree",port:"in"}},{src:{process:"PreparePush",port:"basetree"},tgt:{process:"CreateTree",port:"base"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateTree",port:"token"}},{src:{process:"PreparePush",port:"tree"},tgt:{process:"CreateTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateTree",port:"repository"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"UpdateFromTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateFromTree",port:"repository"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateFromTree",port:"token"}},{data:"sha",tgt:{process:"SendTreeSha",port:"string"}},{src:{process:"SendTreeSha",port:"out"},tgt:{process:"GetTreeSha",port:"key"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"GetTreeSha",port:"in"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"SendTreeSha",port:"in"}},{src:{process:"GetTreeSha",port:"out"},tgt:{process:"CreateCommit",port:"tree"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateCommit",port:"token"}},{src:{process:"PreparePush",port:"message"},tgt:{process:"CreateCommit",port:"message"}},{src:{process:"PreparePush",port:"parentcommits"},tgt:{process:"CreateCommit",port:"parents"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateCommit",port:"repository"}},{src:{process:"CreateCommit",port:"out"},tgt:{process:"UpdateReference",port:"commit"}},{src:{process:"PreparePush",port:"ref"},tgt:{process:"UpdateReference",port:"reference"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateReference",port:"token"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateReference",port:"repository"}},{src:{process:"UpdateFromTree",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"UpdateFromTree",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"UpdateFromTree",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"UpdateFromTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateCommit",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"UpdateReference",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"repo",tgt:{process:"SendPullRepo",port:"string"}},{src:{process:"SendPullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"key"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"Loading",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"SendPullRepo",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetPullReference",port:"token"}},{src:{process:"GetPullRepo",port:"out"},tgt:{process:"GetPullReference",port:"repository"}},{src:{process:"GetPullReference",port:"reference"},tgt:{process:"CheckPullState",port:"reference"}},{data:"project",tgt:{process:"SendPullProject",port:"string"}},{src:{process:"SendPullProject",port:"out"},tgt:{process:"GetPullProject",port:"key"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"GetPullProject",port:"in"}},{src:{process:"GetPullProject",port:"out"},tgt:{process:"CheckPullState",port:"project"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"SendPullProject",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckPullState",port:"token"}},{src:{process:"GetPullReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckPullState",port:"remote"},tgt:{process:"DoSync",port:"in"}},{src:{process:"CheckPullState",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github-alt"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Read",port:"db"},store:{process:"Store",port:"in"}},outports:{item:{process:"Query",port:"item"},empty:{process:"Query",port:"empty"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldQuery:{component:"strings/SendString"},HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Read:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Query:{component:"indexeddb/Query"},Errors:{component:"core/Merge"}},connections:[{data:"",tgt:{process:"HoldQuery",port:"string"}},{data:"readonly",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldQuery",port:"in"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Read",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Read",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Read",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Query",port:"store"}},{src:{process:"HoldQuery",port:"out"},tgt:{process:"Query",port:"all"}},{src:{process:"Read",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Query",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"LoadProjects",port:"item"},graph:{process:"ConvertGraph",port:"out"},component:{process:"LoadComponents",port:"item"},spec:{process:"LoadSpecs",port:"item"},runtime:{process:"Runtimes",port:"out"},complete:{process:"Collect",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},LoadProjects:{component:"ui/Load"},ProjectsStore:{component:"strings/SendString"},GetGraphsDb:{component:"ui/GetActionValues"},LoadGraphs:{component:"ui/Load"},GraphsStore:{component:"strings/SendString"},ConvertGraph:{component:"graph/LoadJson"},GetComponentsDb:{component:"ui/GetActionValues"},LoadComponents:{component:"ui/Load"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},LoadSpecs:{component:"ui/Load"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},LoadRuntimes:{component:"ui/Load"},RuntimesStore:{component:"strings/SendString"},Runtimes:{component:"core/Merge"},SplitAction:{component:"core/Split"},GetAllRuntimesDb:{component:"ui/GetActionValues"},LoadAllRuntimes:{component:"ui/Load"},AllRuntimesStore:{component:"strings/SendString"},Collect:{component:"ui/CollectInitialData"},Errors:{component:"core/Merge"}},connections:[{data:"storage:load:projects,storage:load:graphs,storage:load:components,storage:load:specs,storage:load:runtimes,storage:load:all",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"LoadProjects",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"LoadProjects",port:"store"}},{src:{process:"LoadProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"LoadGraphs",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"LoadGraphs",port:"store"}},{src:{process:"LoadGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadGraphs",port:"item"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"LoadComponents",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"LoadComponents",port:"store"}},{src:{process:"LoadComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"LoadSpecs",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"LoadSpecs",port:"store"}},{src:{process:"LoadSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"LoadRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"LoadRuntimes",port:"store"}},{src:{process:"LoadRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SplitAction",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetSpecsDb",port:"in"}},{data:"db",tgt:{process:"GetAllRuntimesDb",port:"keys"}},{src:{process:"GetAllRuntimesDb",port:"values",index:0},tgt:{process:"LoadAllRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"AllRuntimesStore",port:"string"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetAllRuntimesDb",port:"in"}},{src:{process:"GetAllRuntimesDb",port:"out"},tgt:{process:"AllRuntimesStore",port:"in"}},{src:{process:"AllRuntimesStore",port:"out"},tgt:{process:"LoadAllRuntimes",port:"store"}},{src:{process:"LoadAllRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadAllRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"LoadProjects",port:"item"},tgt:{process:"Collect",port:"project"}},{src:{process:"LoadProjects",port:"empty"},tgt:{process:"Collect",port:"project"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadGraphs",port:"empty"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadComponents",port:"item"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadComponents",port:"empty"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadSpecs",port:"item"},tgt:{process:"Collect",port:"spec"}},{src:{process:"LoadSpecs",port:"empty"},tgt:{process:"Collect",port:"spec"}},{src:{process:"Runtimes",port:"out"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"LoadAllRuntimes",port:"empty"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{name:{process:"Open",port:"name"}},outports:{error:{process:"Errors",port:"out"},db:{process:"Open",port:"db"}},groups:[],processes:{Open:{component:"indexeddb/Open"},Errors:{component:"core/Merge"},Upgrade:{component:"indexeddb/UpgradeRouter"},CreateProjects:{component:"indexeddb/CreateStore"},CreateGraphs:{component:"indexeddb/CreateStore"},GraphProject:{component:"indexeddb/CreateIndex"},Migrate:{component:"ui/MigrateLocalStorage"},CreateComponents:{component:"indexeddb/CreateStore"},ComponentProject:{component:"indexeddb/CreateIndex"},CreateRuntimes:{component:"indexeddb/CreateStore"},CreateJournals:{component:"indexeddb/CreateStore"},JournalGraph:{component:"indexeddb/CreateIndex"},CreateSpecs:{component:"indexeddb/CreateStore"},SpecProject:{component:"indexeddb/CreateIndex"},DatabaseReady:{component:"ui/DatabaseReady"}},connections:[{src:{process:"Open",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"4",tgt:{process:"Open",port:"version"}},{src:{process:"Open",port:"upgrade"},tgt:{process:"Upgrade",port:"upgrade"}},{data:"projects",tgt:{process:"CreateProjects",port:"name"}},{data:"id",tgt:{process:"CreateProjects",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateProjects",port:"db"}},{src:{process:"CreateProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graphs",tgt:{process:"CreateGraphs",port:"name"}},{data:"id",tgt:{process:"CreateGraphs",port:"keypath"}},{src:{process:"CreateProjects",port:"db"},tgt:{process:"CreateGraphs",port:"db"}},{src:{process:"CreateGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"GraphProject",port:"name"}},{data:"project",tgt:{process:"GraphProject",port:"keypath"}},{src:{process:"CreateGraphs",port:"store"},tgt:{process:"GraphProject",port:"store"}},{src:{process:"GraphProject",port:"store"},tgt:{process:"Migrate",port:"graphstore"}},{src:{process:"GraphProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"components",tgt:{process:"CreateComponents",port:"name"}},{data:"id",tgt:{process:"CreateComponents",port:"keypath"}},{src:{process:"CreateGraphs",port:"db"},tgt:{process:"CreateComponents",port:"db"}},{src:{process:"CreateComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"ComponentProject",port:"name"}},{data:"project",tgt:{process:"ComponentProject",port:"keypath"}},{src:{process:"CreateComponents",port:"store"},tgt:{process:"ComponentProject",port:"store"}},{src:{process:"ComponentProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"runtimes",tgt:{process:"CreateRuntimes",port:"name"}},{data:"id",tgt:{process:"CreateRuntimes",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateRuntimes",port:"db"}},{src:{process:"CreateRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"journals",tgt:{process:"CreateJournals",port:"name"}},{data:"id",tgt:{process:"CreateJournals",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateJournals",port:"db"}},{src:{process:"CreateJournals",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graph",tgt:{process:"JournalGraph",port:"name"}},{data:"graph",tgt:{process:"JournalGraph",port:"keypath"}},{src:{process:"CreateJournals",port:"store"},tgt:{process:"JournalGraph",port:"store"}},{src:{process:"JournalGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"specs",tgt:{process:"CreateSpecs",port:"name"}},{data:"id",tgt:{process:"CreateSpecs",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateSpecs",port:"db"}},{src:{process:"CreateSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"SpecProject",port:"name"}},{data:"project",tgt:{process:"SpecProject",port:"keypath"}},{src:{process:"CreateSpecs",port:"store"},tgt:{process:"SpecProject",port:"store"}},{src:{process:"SpecProject",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Open",port:"db"},tgt:{process:"DatabaseReady",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},RuntimeSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},RuntimeDeleteAction:{component:"ui/SetAction"},RegistryProjectsAction:{component:"ui/SetAction"},RegistryErrorAction:{component:"ui/SetAction"},GetUserStateFetch:{component:"ui/GetActionValues"},GetRuntimes:{component:"ui/GetRemoteRuntimes"},GetUserStatePut:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/StoreRemoteRuntime"},GetUserStateDel:{component:"ui/GetActionValues"},RemoveRuntime:{component:"ui/RemoveRemoteRuntime"},GetUserStateProjects:{component:"ui/GetActionValues"},GetRemoteProjects:{component:"ui/GetRemoteProjects"},GetUserStateRepos:{component:"ui/GetActionValues"},SplitPullAction:{component:"core/Split"},SendPullAction:{component:"core/Kick"},StoreRemoteProject:{component:"ui/StoreRemoteProject"},GetUserStateDelRepo:{component:"ui/GetActionValues"},RemoveRepository:{component:"ui/RemoveRemoteProject"}},connections:[{data:"flowhub:runtimes:fetch,flowhub:runtimes:register,flowhub:runtimes:remove,flowhub:projects:fetch,github:sync:pull,github:sync:prepare,flowhub:projects:remove",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:delete:runtime",tgt:{process:"RuntimeDeleteAction",port:"action"}},{src:{process:"RuntimeDeleteAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:projects",tgt:{process:"RegistryProjectsAction",port:"action"}},{src:{process:"RegistryProjectsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:error",tgt:{process:"RegistryErrorAction",port:"action"}},{src:{process:"RegistryErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user,runtimes",tgt:{process:"GetUserStateFetch",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetUserStateFetch",port:"in"}},{src:{process:"GetUserStateFetch",port:"values",index:0},tgt:{process:"GetRuntimes",port:"user"}},{src:{process:"GetUserStateFetch",port:"values",index:1},tgt:{process:"GetRuntimes",port:"runtimes"}},{src:{process:"GetRuntimes",port:"runtime"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"GetRuntimes",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStatePut",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetUserStatePut",port:"in"}},{src:{process:"GetUserStatePut",port:"values",index:0},tgt:{process:"SaveRuntime",port:"user"}},{src:{process:"GetUserStatePut",port:"out"},tgt:{process:"SaveRuntime",port:"in"}},{src:{process:"SaveRuntime",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateDel",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetUserStateDel",port:"in"}},{src:{process:"GetUserStateDel",port:"values",index:0},tgt:{process:"RemoveRuntime",port:"user"}},{src:{process:"GetUserStateDel",port:"out"},tgt:{process:"RemoveRuntime",port:"in"}},{src:{process:"RemoveRuntime",port:"out"},tgt:{process:"RuntimeDeleteAction",port:"in"}},{src:{process:"RemoveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateProjects",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateProjects",port:"in"}},{src:{process:"GetUserStateProjects",port:"values",index:0},tgt:{process:"GetRemoteProjects",port:"user"}},{src:{process:"GetRemoteProjects",port:"projects"},tgt:{process:"RegistryProjectsAction",port:"in"}},{src:{process:"GetRemoteProjects",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateRepos",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"SplitPullAction",port:"in"}},{src:{process:"SplitPullAction",port:"out"},tgt:{process:"GetUserStateRepos",port:"in"}},{src:{process:"SplitPullAction",port:"out"},tgt:{process:"SendPullAction",port:"data"}},{src:{process:"SendPullAction",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"GetUserStateRepos",port:"values",index:0},tgt:{process:"StoreRemoteProject",port:"user"}},{src:{process:"GetUserStateRepos",port:"out"},tgt:{process:"StoreRemoteProject",port:"in"}},{src:{process:"StoreRemoteProject",port:"out"},tgt:{process:"SendPullAction",port:"in"}},{src:{process:"StoreRemoteProject",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"StoreRemoteProject",port:"in"}},{data:"user",tgt:{process:"GetUserStateDelRepo",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetUserStateDelRepo",port:"in"}},{src:{process:"GetUserStateDelRepo",port:"values",index:0},tgt:{process:"RemoveRepository",port:"user"}},{src:{process:"GetUserStateDelRepo",port:"out"},tgt:{process:"RemoveRepository",port:"in"}},{src:{process:"RemoveRepository",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"flowhub:projects,flowhub:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"remoteProjects",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},ProjectSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},GraphSaveAction:{component:"ui/SetAction"},ComponentSaveAction:{component:"ui/SetAction"},SpecSaveAction:{component:"ui/SetAction"},RuntimeRegisterAction:{component:"ui/SetAction"},RuntimeSaveAction:{component:"ui/SetAction"},RuntimeErrorAction:{component:"ui/SetAction"},RuntimeOpenedAction:{component:"ui/SetAction"},RuntimeOpeningAction:{component:"ui/SetAction"},RuntimeStatusAction:{component:"ui/SetAction"},RuntimeComponentsAction:{component:"ui/SetAction"},RuntimeComponentAction:{component:"ui/SetAction"},RuntimeStartedAction:{component:"ui/SetAction"},RuntimeStoppedAction:{component:"ui/SetAction"},RuntimePacketAction:{component:"ui/SetAction"},RuntimeIconAction:{component:"ui/SetAction"},RuntimeOutputAction:{component:"ui/SetAction"},RuntimeNetworkErrorAction:{component:"ui/SetAction"},RuntimeProcessErrorAction:{component:"ui/SetAction"},RuntimeProtocolErrorAction:{component:"ui/SetAction"},RuntimeLoadTestsAction:{component:"ui/SetAction"},RuntimeTestSuitesAction:{component:"ui/SetAction"},ApplicationRecreateAction:{component:"ui/SetAction"},StorageOpenedAction:{component:"ui/SetAction"},StorageReadyAction:{component:"ui/SetAction"},ContextEdgesAction:{component:"ui/SetAction"},GetRuntimesState:{component:"ui/GetActionValues"},PopulateRuntimeData:{component:"ui/PopulateRuntimeData"},OpenLiveMode:{component:"ui/OpenLiveMode"},GetProjectRuntimesState:{component:"ui/GetActionValues"},PopulateProjectRuntime:{component:"ui/PopulateProjectRuntime"},OpenProjectMode:{component:"ui/OpenProjectMode"},GetEdgeState:{component:"ui/GetActionValues"},HasEdgeRuntime:{component:"ui/HasActionRuntime"},SendEdges:{component:"ui/SendEdges"},GetRuntimeToProjectValues:{component:"ui/GetActionValues"},RuntimeToProject:{component:"ui/RuntimeToProject"},GetStoredRuntimes:{component:"ui/GetActionValues"},EnsureLocalRuntimes:{component:"ui/EnsureLocalRuntimes"},GetClient:{component:"ui/GetRuntimeClient"},ListenRuntime:{component:"ui/ListenRuntime"},GetStartValues:{component:"ui/GetActionValues"},StartNetwork:{component:"ui/StartNetwork"},GetStopValues:{component:"ui/GetActionValues"},StopNetwork:{component:"ui/StopNetwork"},GetReconnectValues:{component:"ui/GetActionValues"},ReconnectRuntime:{component:"ui/ReconnectRuntime"},GetComponentValues:{component:"ui/GetActionValues"},SendComponentChanges:{component:"ui/SendComponentChanges"},GetGraphChangeValues:{component:"ui/GetActionValues"},SendGraphChanges:{component:"ui/SendGraphChanges"},GetNewGraphValues:{component:"ui/GetActionValues"},SendNewGraph:{component:"ui/SendNewGraph"},GetLoadTestsValues:{component:"ui/GetActionValues"},LoadTests:{component:"ui/LoadTests"},Async:{component:"core/RepeatAsync"},GetRunTestsValues:{component:"ui/GetActionValues"},RunTests:{component:"ui/RunTests"}},connections:[{data:"runtime:open,storage:opened,context:edges,project:fromruntime,storage:ready,storage:stored:runtime,runtime:start,runtime:stop,runtime:reconnect,runtime:sendComponent,runtime:sendGraphChanges,runtime:sendGraph,runtime:loadTests,runtime:runTests",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:project",tgt:{process:"ProjectSaveAction",port:"action"}},{src:{process:"ProjectSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"GraphSaveAction",port:"action"}},{src:{process:"GraphSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"ComponentSaveAction",port:"action"}},{src:{process:"ComponentSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:spec",tgt:{process:"SpecSaveAction",port:"action"}},{src:{process:"SpecSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:register",tgt:{process:"RuntimeRegisterAction",port:"action"}},{src:{process:"RuntimeRegisterAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:error",tgt:{process:"RuntimeErrorAction",port:"action"}},{src:{process:"RuntimeErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opened",tgt:{process:"RuntimeOpenedAction",port:"action"}},{src:{process:"RuntimeOpenedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opening",tgt:{process:"RuntimeOpeningAction",port:"action"}},{src:{process:"RuntimeOpeningAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:status",tgt:{process:"RuntimeStatusAction",port:"action"}},{src:{process:"RuntimeStatusAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:components",tgt:{process:"RuntimeComponentsAction",port:"action"}},{src:{process:"RuntimeComponentsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:component",tgt:{process:"RuntimeComponentAction",port:"action"}},{src:{process:"RuntimeComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:started",tgt:{process:"RuntimeStartedAction",port:"action"}},{src:{process:"RuntimeStartedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:stopped",tgt:{process:"RuntimeStoppedAction",port:"action"}},{src:{process:"RuntimeStoppedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:packet",tgt:{process:"RuntimePacketAction",port:"action"}},{src:{process:"RuntimePacketAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:icon",tgt:{process:"RuntimeIconAction",port:"action"}},{src:{process:"RuntimeIconAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:output",tgt:{process:"RuntimeOutputAction",port:"action"}},{src:{process:"RuntimeOutputAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:networkerror",tgt:{process:"RuntimeNetworkErrorAction",port:"action"}},{src:{process:"RuntimeNetworkErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:processerror",tgt:{process:"RuntimeProcessErrorAction",port:"action"}},{src:{process:"RuntimeProcessErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:protocolerror",tgt:{process:"RuntimeProtocolErrorAction",port:"action"}},{src:{process:"RuntimeProtocolErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:loadTests",tgt:{process:"RuntimeLoadTestsAction",port:"action"}},{src:{process:"RuntimeLoadTestsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:testsuites",tgt:{process:"RuntimeTestSuitesAction",port:"action"}},{src:{process:"RuntimeTestSuitesAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:recreatestate",tgt:{process:"ApplicationRecreateAction",port:"action"}},{src:{process:"ApplicationRecreateAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenedAction",port:"action"}},{src:{process:"StorageOpenedAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"context:edges",tgt:{process:"ContextEdgesAction",port:"action"}},{src:{process:"ContextEdgesAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"runtimes,projects",tgt:{process:"GetRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetRuntimesState",port:"in"}},{src:{process:"GetRuntimesState",port:"values",index:0},tgt:{process:"PopulateRuntimeData",port:"runtimes"}},{src:{process:"GetRuntimesState",port:"out"},tgt:{process:"PopulateRuntimeData",port:"in"}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"GetClient",port:"in",index:0}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"RuntimeOpeningAction",port:"in"}},{src:{process:"PopulateRuntimeData",port:"new"},tgt:{process:"GetClient",port:"updated"}},{src:{process:"PopulateRuntimeData",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"out",index:0},tgt:{process:"OpenLiveMode",port:"in"}},{src:{process:"GetRuntimesState",port:"values",index:1},tgt:{process:"OpenLiveMode",port:"projects"}},{src:{process:"GetClient",port:"client",index:0},tgt:{process:"OpenLiveMode",port:"client"}},{src:{process:"OpenLiveMode",port:"out"},tgt:{process:"RuntimeOpenedAction",port:"in"}},{src:{process:"OpenLiveMode",port:"out"},tgt:{process:"RuntimeLoadTestsAction",port:"in"}},{src:{process:"OpenLiveMode",port:"project"},tgt:{process:"ProjectSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"graph"},tgt:{process:"GraphSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"component"},tgt:{process:"ComponentSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"spec"},tgt:{process:"SpecSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"runtime"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetProjectRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetProjectRuntimesState",port:"in"}},{src:{process:"GetProjectRuntimesState",port:"values",index:0},tgt:{process:"PopulateProjectRuntime",port:"runtimes"}},{src:{process:"GetProjectRuntimesState",port:"out"},tgt:{process:"PopulateProjectRuntime",port:"in"}},{src:{process:"PopulateProjectRuntime",port:"out"},tgt:{process:"GetClient",port:"in",index:1}},{src:{process:"PopulateProjectRuntime",port:"skipped"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"GetClient",port:"out",index:1},tgt:{process:"OpenProjectMode",port:"in"}},{src:{process:"GetClient",port:"client",index:1},tgt:{process:"OpenProjectMode",port:"client"}},{src:{process:"OpenProjectMode",port:"out"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"OpenProjectMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"graphs,project",tgt:{process:"GetEdgeState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"HasEdgeRuntime",port:"in"}},{src:{process:"HasEdgeRuntime",port:"out"},tgt:{process:"GetEdgeState",port:"in"}},{src:{process:"HasEdgeRuntime",port:"missed"},tgt:{process:"Passed",port:"in"}},{src:{process:"GetEdgeState",port:"state"},tgt:{process:"GetClient",port:"in",index:2}},{src:{process:"GetClient",port:"client",index:2},tgt:{process:"SendEdges",port:"client"}},{src:{process:"GetEdgeState",port:"values",index:0},tgt:{process:"SendEdges",port:"graphs"}},{src:{process:"GetEdgeState",port:"values",index:1},tgt:{process:"SendEdges",port:"project"}},{src:{process:"GetEdgeState",port:"out"},tgt:{process:"SendEdges",port:"edges"}},{src:{process:"SendEdges",port:"out"},tgt:{process:"ContextEdgesAction",port:"in"}},{src:{process:"SendEdges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetRuntimeToProjectValues",port:"in"}},{src:{process:"GetRuntimeToProjectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:3}},{src:{process:"GetClient",port:"out",index:3},tgt:{process:"RuntimeToProject",port:"in"}},{src:{process:"GetClient",port:"client",index:3},tgt:{process:"RuntimeToProject",port:"client"}},{src:{process:"RuntimeToProject",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetStoredRuntimes",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetStoredRuntimes",port:"in"}},{src:{process:"GetStoredRuntimes",port:"values",index:0},tgt:{process:"EnsureLocalRuntimes",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"runtimes"},tgt:{process:"GetClient",port:"initial"}},{src:{process:"GetStoredRuntimes",port:"out"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"GetClient",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"instance"},tgt:{process:"ListenRuntime",port:"in"}},{src:{process:"ListenRuntime",port:"runtimeupdate"},tgt:{process:"RuntimeRegisterAction",port:"in"}},{src:{process:"ListenRuntime",port:"status"},tgt:{process:"RuntimeStatusAction",port:"in"}},{src:{process:"ListenRuntime",port:"components"},tgt:{process:"RuntimeComponentsAction",port:"in"}},{src:{process:"ListenRuntime",port:"component"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"ListenRuntime",port:"started"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"ListenRuntime",port:"stopped"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"ListenRuntime",port:"packet"},tgt:{process:"RuntimePacketAction",port:"in"}},{src:{process:"ListenRuntime",port:"icon"},tgt:{process:"RuntimeIconAction",port:"in"}},{src:{process:"ListenRuntime",port:"output"},tgt:{process:"RuntimeOutputAction",port:"in"}},{src:{process:"ListenRuntime",port:"networkerror"},tgt:{process:"RuntimeNetworkErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"processerror"},tgt:{process:"RuntimeProcessErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"protocolerror"},tgt:{process:"RuntimeProtocolErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"GetClient",port:"updated"}},{src:{process:"GetClient",port:"updated"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetStartValues",port:"in"}},{src:{process:"GetStartValues",port:"out"},tgt:{process:"GetClient",port:"in",index:4}},{src:{process:"GetClient",port:"out",index:4},tgt:{process:"StartNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:4},tgt:{process:"StartNetwork",port:"client"}},{src:{process:"StartNetwork",port:"out"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"StartNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"GetStopValues",port:"in"}},{src:{process:"GetStopValues",port:"out"},tgt:{process:"GetClient",port:"in",index:5}},{src:{process:"GetClient",port:"out",index:5},tgt:{process:"StopNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:5},tgt:{process:"StopNetwork",port:"client"}},{src:{process:"StopNetwork",port:"out"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"StopNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:8},tgt:{process:"GetReconnectValues",port:"in"}},{src:{process:"GetReconnectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:6}},{src:{process:"GetClient",port:"out",index:6},tgt:{process:"ReconnectRuntime",port:"in"}},{src:{process:"GetClient",port:"client",index:6},tgt:{process:"ReconnectRuntime",port:"client"}},{src:{process:"ReconnectRuntime",port:"out"},tgt:{process:"ApplicationRecreateAction",port:"in"}},{src:{process:"ReconnectRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetComponentValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:9},tgt:{process:"GetComponentValues",port:"in"}},{src:{process:"GetComponentValues",port:"out"},tgt:{process:"GetClient",port:"in",index:7}},{src:{process:"GetClient",port:"out",index:7},tgt:{process:"SendComponentChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:7},tgt:{process:"SendComponentChanges",port:"client"}},{src:{process:"GetComponentValues",port:"values",index:0},tgt:{process:"SendComponentChanges",port:"project"}},{src:{process:"SendComponentChanges",port:"out"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"SendComponentChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetGraphChangeValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:10},tgt:{process:"GetGraphChangeValues",port:"in"}},{src:{process:"GetGraphChangeValues",port:"out"},tgt:{process:"GetClient",port:"in",index:8}},{src:{process:"GetClient",port:"out",index:8},tgt:{process:"SendGraphChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:8},tgt:{process:"SendGraphChanges",port:"client"}},{src:{process:"GetGraphChangeValues",port:"values",index:0},tgt:{process:"SendGraphChanges",port:"project"}},{src:{process:"SendGraphChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetNewGraphValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:11},tgt:{process:"GetNewGraphValues",port:"in"}},{src:{process:"GetNewGraphValues",port:"out"},tgt:{process:"GetClient",port:"in",index:9}},{src:{process:"GetClient",port:"out",index:9},tgt:{process:"SendNewGraph",port:"in"}},{src:{process:"GetClient",port:"client",index:9},tgt:{process:"SendNewGraph",port:"client"}},{src:{process:"SendNewGraph",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetLoadTestsValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:12},tgt:{process:"GetLoadTestsValues",port:"in"}},{src:{process:"GetLoadTestsValues",port:"out"},tgt:{process:"LoadTests",port:"in"}},{src:{process:"LoadTests",port:"out"},tgt:{process:"Async",port:"in"}},{src:{process:"Async",port:"out"},tgt:{process:"RuntimeTestSuitesAction",port:"in"}},{src:{process:"LoadTests",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetRunTestsValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:13},tgt:{process:"GetRunTestsValues",port:"in"}},{src:{process:"GetRunTestsValues",port:"out"},tgt:{process:"GetClient",port:"in",index:10}},{src:{process:"GetClient",port:"out",index:10},tgt:{process:"RunTests",port:"in"}},{src:{process:"GetClient",port:"client",index:10},tgt:{process:"RunTests",port:"client"}},{src:{process:"RunTests",port:"out"},tgt:{process:"RuntimeTestSuitesAction",port:"in"}},{src:{process:"RunTests",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"cogs"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},StorageDbAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},StorageReadyAction:{component:"ui/SetAction"},StorageInitialLoadAction:{component:"ui/SetAction"},StorageInitialDataAction:{component:"ui/SetAction"},StorageProjectAction:{component:"ui/SetAction"},StorageGraphAction:{component:"ui/SetAction"},StorageComponentAction:{component:"ui/SetAction"},StorageSpecAction:{component:"ui/SetAction"},StorageRuntimeAction:{component:"ui/SetAction"},RemovedProjectAction:{component:"ui/SetAction"},RemovedGraphAction:{component:"ui/SetAction"},RemovedComponentAction:{component:"ui/SetAction"},RemovedSpecAction:{component:"ui/SetAction"},RemovedRuntimeAction:{component:"ui/SetAction"},StorageErrorAction:{component:"ui/SetAction"},StorageOpenAction:{component:"ui/SetAction"},RuntimeLoadTestsAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},DbName:{component:"strings/SendString"},PrepareStorage:{component:"ui/PrepareStorage"},LoadData:{component:"ui/LoadData"},SplitSave:{component:"core/Split"},OpenNewProject:{component:"ui/OpenNewProject"},SaveData:{component:"ui/SaveData"},DeleteData:{component:"ui/DeleteData"},OpenProject:{component:"ui/OpenProject"}},connections:[{data:"noflo:ready,storage:load:*,storage:save:*,storage:delete:*,storage:open",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:db",tgt:{process:"StorageDbAction",port:"action"}},{src:{process:"StorageDbAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:load:all",tgt:{process:"StorageInitialLoadAction",port:"action"}},{src:{process:"StorageInitialLoadAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:initial",tgt:{process:"StorageInitialDataAction",port:"action"}},{src:{process:"StorageInitialDataAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:project",tgt:{process:"StorageProjectAction",port:"action"}},{src:{process:"StorageProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:graph",tgt:{process:"StorageGraphAction",port:"action"}},{src:{process:"StorageGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:component",tgt:{process:"StorageComponentAction",port:"action"}},{src:{process:"StorageComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:spec",tgt:{process:"StorageSpecAction",port:"action"}},{src:{process:"StorageSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:runtime",tgt:{process:"StorageRuntimeAction",port:"action"}},{src:{process:"StorageRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:project",tgt:{process:"RemovedProjectAction",port:"action"}},{src:{process:"RemovedProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:graph",tgt:{process:"RemovedGraphAction",port:"action"}},{src:{process:"RemovedGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:component",tgt:{process:"RemovedComponentAction",port:"action"}},{src:{process:"RemovedComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:spec",tgt:{process:"RemovedSpecAction",port:"action"}},{src:{process:"RemovedSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:runtime",tgt:{process:"RemovedRuntimeAction",port:"action"}},{src:{process:"RemovedRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:error",tgt:{process:"StorageErrorAction",port:"action"}},{src:{process:"StorageErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenAction",port:"action"}},{src:{process:"StorageOpenAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:loadTests",tgt:{process:"RuntimeLoadTestsAction",port:"action"}},{src:{process:"RuntimeLoadTestsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:sethash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"noflo-ui",tgt:{process:"DbName",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"DbName",port:"in"}},{src:{process:"DbName",port:"out"},tgt:{process:"PrepareStorage",port:"name"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageDbAction",port:"in"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageInitialLoadAction",port:"in"}},{src:{process:"PrepareStorage",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"LoadData",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageInitialDataAction",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"LoadData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"SplitSave",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"OpenNewProject",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"SaveData",port:"in"}},{src:{process:"SaveData",port:"project"},tgt:{process:"OpenNewProject",port:"project"}},{src:{process:"OpenNewProject",port:"out"},tgt:{process:"StorageProjectAction",port:"in"}},{src:{process:"OpenNewProject",port:"hash"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"SaveData",port:"graph"},tgt:{process:"StorageGraphAction",port:"in"}},{src:{process:"SaveData",port:"component"},tgt:{process:"StorageComponentAction",port:"in"}},{src:{process:"SaveData",port:"spec"},tgt:{process:"StorageSpecAction",port:"in"}},{src:{process:"SaveData",port:"runtime"},tgt:{process:"StorageRuntimeAction",port:"in"}},{src:{process:"SaveData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"DeleteData",port:"in"}},{src:{process:"DeleteData",port:"project"},tgt:{process:"RemovedProjectAction",port:"in"}},{src:{process:"DeleteData",port:"graph"},tgt:{process:"RemovedGraphAction",port:"in"}},{src:{process:"DeleteData",port:"component"},tgt:{process:"RemovedComponentAction",port:"in"}},{src:{process:"DeleteData",port:"spec"},tgt:{process:"RemovedSpecAction",port:"in"}},{src:{process:"DeleteData",port:"runtime"},tgt:{process:"RemovedRuntimeAction",port:"in"}},{src:{process:"DeleteData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"OpenProject",port:"in"}},{src:{process:"OpenProject",port:"out"},tgt:{process:"StorageOpenAction",port:"in"}},{src:{process:"OpenProject",port:"out"},tgt:{process:"RuntimeLoadTestsAction",port:"in"}},{src:{process:"OpenProject",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"database"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},ApplicationUrlAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},ApplicationRedirectAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},NofloReady:{component:"core/Split"},InitialURL:{component:"ui/GetUrl"},SplitReady:{component:"core/Split"},Async:{component:"core/RepeatAsync"},ListenHash:{component:"interaction/ListenHash"},Redirect:{component:"ui/SetUrl"},HashToAction:{component:"ui/Router"},SetUrlHash:{component:"ui/SetUrlHash"},SendCurrentHash:{component:"ui/SendCurrentHash"}},connections:[{data:"noflo:ready,storage:ready,application:redirect,application:hash,application:sethash,application:recreatestate",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"application:url",tgt:{process:"ApplicationUrlAction",port:"action"}},{src:{process:"ApplicationUrlAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:hash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"NofloReady",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"InitialURL",port:"in"}},{src:{process:"InitialURL",port:"out"},tgt:{process:"ApplicationUrlAction",port:"in"}},{src:{process:"ListenHash",port:"initial"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"ListenHash",port:"change"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"SplitReady",port:"in"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Async",port:"in"}},{src:{process:"Async",port:"out"},tgt:{process:"ListenHash",port:"start"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Redirect",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"HashToAction",port:"in"}},{src:{process:"HashToAction",port:"route"},tgt:{process:"NewActions",port:"in"}},{src:{process:"HashToAction",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"SetUrlHash",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SendCurrentHash",port:"in"}},{src:{process:"SendCurrentHash",port:"out"},tgt:{process:"ApplicationHashAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"slack"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},UserInfoAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},UserErrorAction:{component:"ui/SetAction"},ApplicationRedirectAction:{component:"ui/SetAction"},RegistryRuntimesFetch:{component:"ui/SetAction"},UserLogoutAction:{component:"ui/SetAction"},CheckQuery:{component:"ui/CheckTokenGrant"},ExchangeToken:{component:"ui/ExchangeGrantToken"},GetRemoteUser:{component:"ui/GetRemoteUser"},StoreUser:{component:"ui/StoreUser"},LoadUser:{component:"ui/LoadUserData"},RefreshUser:{component:"ui/RefreshRemoteUser"},Login:{component:"ui/LoginOAuth"},Reset:{component:"ui/ClearUserData"},GetUserStateForUpdate:{component:"ui/GetActionValues"},StoreUserPreferences:{component:"ui/StoreUserPreferences"}},connections:[{data:"application:url,user:login,user:logout,user:update",tgt:{process:"Dispatch",port:"routes"}},{data:"user:info",tgt:{process:"UserInfoAction",port:"action"}},{src:{process:"UserInfoAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:error",tgt:{process:"UserErrorAction",port:"action"}},{src:{process:"UserErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:fetch",tgt:{process:"RegistryRuntimesFetch",port:"action"}},{src:{process:"RegistryRuntimesFetch",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:logout",tgt:{process:"UserLogoutAction",port:"action"}},{src:{process:"UserLogoutAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"CheckQuery",port:"code"},tgt:{process:"ExchangeToken",port:"code"}},{src:{process:"CheckQuery",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"ExchangeToken",port:"token"},tgt:{process:"GetRemoteUser",port:"token"}},{src:{process:"ExchangeToken",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"GetRemoteUser",port:"user"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"GetRemoteUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"RegistryRuntimesFetch",port:"in"}},{src:{process:"StoreUser",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckQuery",port:"pass"},tgt:{process:"LoadUser",port:"start"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"RefreshUser",port:"in"}},{src:{process:"RefreshUser",port:"pass"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"RefreshUser",port:"updated"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"RefreshUser",port:"invalid"},tgt:{process:"UserLogoutAction",port:"in"}},{src:{process:"LoadUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"RefreshUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"Login",port:"in"}},{src:{process:"Login",port:"codeurl"},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"Login",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Login",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Reset",port:"clear"}},{src:{process:"Reset",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateForUpdate",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateForUpdate",port:"in"}},{src:{process:"GetUserStateForUpdate",port:"values",index:0},tgt:{process:"StoreUserPreferences",port:"user"}},{src:{process:"GetUserStateForUpdate",port:"out"},tgt:{process:"StoreUserPreferences",port:"in"}},{src:{process:"StoreUserPreferences",port:"out"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUserPreferences",port:"error"},tgt:{process:"UserErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanUser:{component:"ui/CleanAction"},UserToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"user:info,user:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanUser",port:"in"}},{data:"user",tgt:{process:"UserToContext",port:"key"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"UserToContext",port:"value"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"UserToContext",port:"context"}},{src:{process:"UserToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="This component generates a single packet and sends it to\nthe output port. Mostly usable for debugging, but can also be useful\nfor starting up networks.",e.icon="share",e.inPorts.add("in",{datatype:"bang",description:"Signal to send the data packet"}),e.inPorts.add("data",{datatype:"all",description:"Packet to be sent",control:!0,default:null}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{if(!e.hasStream("in"))return;if(e.attached("data").length&&!e.hasData("data"))return;e.getData("in");const r=e.getData("data");t.send({out:r}),t.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="This component receives data on multiple input ports and \nsends the same data out to the connected output port",e.icon="compress",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");return t.sendDone({out:r})})}},function(e,t,r){const n=r(0),{inspect:o}=r(46);t.getComponent=()=>{const e=new n.Component;return e.description="Sends the data items to console.log",e.icon="bug",e.inPorts.add("in",{datatype:"all",description:"Packet to be printed through console.log"}),e.inPorts.add("options",{datatype:"object",description:"Options to be passed to console.log",control:!0}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("options").length&&!e.hasData("options"))return;let r=null;e.has("options")&&(r=e.getData("options"));const n=e.getData("in");((e,t)=>{null!=e?console.log(o(t,e.showHidden,e.depth,e.colors)):console.log(t)})(r,n),t.sendDone({out:n})})}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Forwards packets and metadata in the same way \nit receives them",e.icon="forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Like 'Repeat', except repeat on next tick",e.icon="step-forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");setTimeout(()=>t.sendDone({out:r}),0)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Sends next packet in buffer when receiving a bang",e.icon="forward",e.inPorts.add("data",{datatype:"all"}),e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"all"}),e.outPorts.add("empty",{datatype:"bang",required:!1}),e.forwardBrackets={},e.process((t,r)=>{if(!t.hasData("in"))return;const n=t.getData("in");if(!t.hasData("data"))return void r.sendDone({empty:!0});let o=!1;for(;t.has("data");){if(o){if("data"===e.inPorts.data.getBuffer(n.scope)[0].type)break}const i=t.get("data");r.send({out:i}),"data"===i.type&&(o=!0)}r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="expand",e.description="This component receives data on a single input port and \nsends the same data out to all connected output ports",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Like Promise.race, wait for result from all connected inputs and send first result or an error out",e.icon="compress",e.inPorts.add("in",{datatype:"all",addressable:!0}),e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.pending={},e.tearDown=t=>(e.pending={},t()),e.forwardBrackets={},e.process((t,r)=>{if(t.hasData("error")){const n=t.getData("error");return e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved?void r.done():(e.pending[t.scope].rejected=!0,void r.sendDone({error:n}))}const n=t.attached("in").filter(e=>t.hasStream(["in",e]));if(!n.length)return;if(e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved)return n.forEach(e=>{const r=t.getStream(["in",e]);return Array.from(r).map(e=>e.drop())}),void r.done();const o=t.getStream(["in",n[0]]).filter(e=>"data"===e.type);e.pending[t.scope].resolved=!0;const i=o.map(e=>e.data);r.sendDone({out:i})})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(34),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub commit",e.inPorts.add("message",{datatype:"string",description:"Commit message"}),e.inPorts.add("tree",{datatype:"string",description:"Tree SHA"}),e.inPorts.add("parents",{datatype:"array",description:"Parent commits"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["message","tree","parents","repository"],params:["token"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/commits"),{message:t.message,tree:t.tree,parents:t.parents||[]})).on("success",(function(e){return n.send(e.body.sha),i()})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){(function(t){
/*!
 * octo.js
 * Copyright (c) 2012 Justin Palmer <justin@labratrevenge.com>
 * MIT Licensed
 */
!function(){"undefined"==typeof superagent&&(superagent=r(396),void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node")&&(btoa=r(76)));var n={api:function(){var e,r,n,o,i,s="https://api.github.com";superagent;function a(){}function c(s,c,u){var p=1,l=30,d={},h=!1,f=!1,m={};void 0!==t&&t.execPath&&t.execPath.match(/node/)&&(d["User-Agent"]="Octo.js");var g=function(){var t=superagent[s](a.host()+c);t.on("error",(function(e){y._handledError=e,y.trigger("error",e)})),i&&t.set("Authorization","token "+i),!i&&n&&o&&t.set("Authorization","Basic "+btoa(n+":"+o)),t.set(d).query({page:p,per_page:l}).timeout(3e3).send(u).end((function(t){if(!y._handledError){if(t.error)return y._handledError=t,void y.trigger("error",t);e=~~t.header["x-ratelimit-limit"],r=~~t.header["x-ratelimit-remaining"];var n=t.header.link;h=/rel=\"next\"/i.test(n),f=/rel=\"next\"/.test(n),y.trigger("end",t),t.ok&&y.trigger("success",t)}}))};function y(){g()}return y.page=function(e){return arguments.length?(p=e,y):p},y.perpage=function(e){return arguments.length?(l=e,y):l},y.next=function(){return p+=1,g(),y},y.prev=function(){return p-=1,g(),y},y.hasnext=function(){return h},y.hasprev=function(){return f},y.on=function(e,t){return void 0===m[e]&&(m[e]=[]),m[e].push(t),y},y.off=function(e,t){if(m[e]instanceof Array)for(var r=m[e],n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1);break}return y},y.trigger=function(e,t){return m[e]instanceof Array&&m[e].forEach((function(e){e.call(y,t)})),y},y.set=function(e,t){return d[e]=t,y},y}return a.host=function(e){return arguments.length?(s=e,a):s},a.get=function(e,t){return new c("get",e)},a.post=function(e,t){return new c("post",e,t)},a.patch=function(e,t){return new c("patch",e,t)},a.put=function(e,t){return new c("put",e,t)},a.del=function(e,t){return new c("del",e,t)},a.limit=function(){return e},a.remaining=function(){return r},a.username=function(e){return arguments.length?(n=e,a):n},a.password=function(e){return arguments.length?(o=e,a):o},a.token=function(e){return arguments.length?(i=e,a):i},a}};e.exports=n}()}).call(this,r(3))},function(e,t,r){var n=r(397),o=r(75),i="undefined"==typeof window?this:window;function s(){}var a="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function c(e){return e===Object(e)}function u(e){if(!c(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function p(e){for(var t,r={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o].split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function l(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var c=0,u=i.length;c<u;++c)t=(r=i[c]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=a(r.slice(t+1)),s[n]=o;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function d(e,t){var r=this;n.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var t=new l(r);"HEAD"==e&&(t.text=null),r.callback(null,t)}))}function h(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}h.serializeObject=u,h.parseString=p,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},l.prototype.get=function(e){return this.header[e.toLowerCase()]},l.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=t.split(/ *; */).shift();var r=function(e){return o(e.split(/ *; */),(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})}(t);for(var n in r)this[n]=r[n]},l.prototype.parseBody=function(e){var t=h.parse[this.type];return t?t(e):null},l.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},l.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=l,n(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},d.prototype.set=function(e,t){if(c(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},d.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=u(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},d.prototype.send=function(e){var t=c(e),r=this.getHeader("Content-Type");if(t&&c(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},d.prototype.callback=function(e,t){var r=this._callback;return 2==r.length?r(e,t):e?this.emit("error",e):void r(t)},d.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,r=this.xhr=function(){if(i.XMLHttpRequest&&("file:"!=i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;if(this._callback=e||s,r.onreadystatechange=function(){if(4==r.readyState)return 0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end")},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),o&&!this._timer&&(this._timer=setTimeout((function(){t.abort()}),o)),n&&(n=h.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}(a)){var c=h.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var u in this.header)null!=this.header[u]&&r.setRequestHeader(u,this.header[u]);return this.emit("request",this),r.send(a),this},h.Request=d,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=function(e,t){var r=h("DELETE",e);return t&&r.end(t),r},h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=h},function(e,t){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(34),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub tree",e.inPorts.add("tree",{datatype:"array",description:"Tree entries to create"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("base",{datatype:"string",description:"Base tree to create the tree for"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["tree","repository"],params:["token","base"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/trees"),{tree:t.tree,base_tree:e.params.base})).on("success",(function(e){return n.send(e.body),i()})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(34),t.getComponent=function(){var e;return(e=new n.Component).description="Get a git blob",e.inPorts.add("repository",{datatype:"string",description:"Repository path",required:!0}),e.inPorts.add("sha",{datatype:"string",description:"Blob SHA",required:!0}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","sha"],params:["token"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.get("/repos/".concat(t.repository,"/git/blobs/").concat(t.sha))).on("success",(function(e){return e.body?(n.beginGroup(t.repository),n.beginGroup(t.sha),n.send(e.body),n.endGroup(),n.endGroup(),i()):i(new Error("no result available"))})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(34),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"repository",params:["token","reference"],out:"reference",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a,c,u,p;return s=o.api(),(null!=(c=e.params)?c.token:void 0)&&s.token(e.params.token),a=(null!=(u=e.params)?u.reference:void 0)||"heads/master",(p=s.get("/repos/".concat(t,"/git/refs/").concat(a))).on("success",(function(e){if(e.body)return n.beginGroup(t),n.beginGroup(a),n.send(e.body),n.endGroup(),n.endGroup(),i();i(new Error("No result received"))})),p.on("error",(function(e){return i(e.error||e.body)})),p()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(34),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("commit",{datatype:"string",description:"Commit SHA"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.inPorts.add("force",{datatype:"boolean",default:!1,required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","commit"],params:["token","reference","force"],out:"reference",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a,c,u,p;return s=o.api(),e.params.token&&s.token(e.params.token),a=(null!=(c=e.params)?c.reference:void 0)||"heads/master","true"===String(null!=(u=e.params)?u.force:void 0),"refs/"===a.substr(0,5)&&(a=a.substr(5)),(p=s.patch("/repos/".concat(t.repository,"/git/refs/").concat(a),{sha:t.commit,force:!1})).on("success",(function(e){return n.send(e.body),i()})),p.on("error",(function(e){return i(e.error||e.body)})),p()}))}},function(e,t,r){"use strict";var n;n=r(0),n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Convert a Graph JSON structure into a NoFlo Graph",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((function(e,t){var r;if(e.hasData("in"))return r=e.getData("in"),n.graph.loadJSON(r,(function(e,n){return e?t.done(e):((r.id&&n.properties.id!==r.id||r.project&&n.properties.project!==r.project)&&n.setProperties({id:r.id,project:r.project}),t.sendDone({out:n}))}))}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Start an IndexedDB transaction",e.inPorts.add("stores",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("mode",{datatype:"string",default:"readwrite",control:!0}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.outPorts.add("complete",{datatype:"bang"}),e.forwardBrackets={stores:["transaction","db","error","complete"]},e.process((function(e,t){var r,o,i,s,a;if(e.hasData("db","stores")){i=e.hasData("mode")?e.getData("mode"):"readwrite";var c=n(e.getData("db","stores"),2);r=c[0],"string"==typeof(s=c[1])&&(s=s.split(","));try{a=r.transaction(s,i)}catch(e){return o=e,t.done(o)}return a.oncomplete=function(){return t.send({complete:!0}),a.onerror=null,a.oncomplete=null,t.done()},a.onerror=function(e){return t.done(e)},t.send({transaction:a}),t.send({db:r})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Add an index to an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("keypath",{datatype:"string"}),e.inPorts.add("unique",{datatype:"boolean",control:!0,default:!1}),e.inPorts.add("multientry",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("index",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["index","store","error"]},e.process((function(e,t){var r,o,i,s,a,c;if(e.hasData("store","name","keypath")){c=!!e.hasData("unique")&&e.getData("unique"),i=!!e.hasData("multientry")&&e.getData("multientry");var u=n(e.getData("store","name","keypath"),3);return a=u[0],s=u[1],o=u[2],a.onerror=function(e){return t.done(e)},r=a.createIndex(s,o,{unique:c,multiEntry:i}),a.onerror=null,t.sendDone({index:r,store:a})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Add an object store to an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("keypath",{datatype:"string",control:!0}),e.inPorts.add("autoincrement",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process((function(e,t){var r,o,i,s,a;if(e.hasData("name","db")){i=e.hasData("keypath")?e.getData("keypath"):"",r=!!e.hasData("autoincrement")&&e.getData("autoincrement");var c=n(e.getData("name","db"),2);return s=c[0],(o=c[1]).transaction.onerror=function(e){return t.done(e)},a=o.createObjectStore(s,{keyPath:i,autoIncrement:r}),o.transaction.onerror=null,t.send({store:a,db:o}),t.done()}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Remove an item from an IndexedDB database",e.icon="trash",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("key",{datatype:"string"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={key:["key","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("store","key")){var s=n(e.getData("store","key"),2);return i=s[0],r=s[1],(o=i.delete(r)).onerror=function(e){return t.done(e)},o.onsuccess=function(e){return t.send({store:i,key:r}),t.done()}}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Get an object store from an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("transaction",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("name","transaction")){var s=n(e.getData("name","transaction"),2);return r=s[0],(i=s[1]).onerror=function(e){return t.done(e)},o=i.objectStore(r),i.onerror=null,t.sendDone({store:o,transaction:i})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i,s;s=r(0),i=r(409),t.getComponent=function(){var e;return(e=new s.Component).description="Open an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("version",{datatype:"integer"}),e.outPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["db","error"]},e.process((function(e,t){var r,o,s;if(e.hasData("name","version")){var a=n(e.getData("name","version"),2);return r=a[0],s=a[1],(o=i.open(r,parseInt(s))).onerror=function(e){return t.done(e)},o.onupgradeneeded=function(e){return t.send({upgrade:{oldVersion:e.oldVersion,newVersion:parseInt(s),db:e.target.result}})},o.onsuccess=function(e){return t.sendDone({db:e.target.result})}}}))}},function(e,t){e.exports=window.overrideIndexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Store an object into an IndexedDB store",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("value",{datatype:"all"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={value:["key","value","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("store","value")){var s=n(e.getData("store","value"),2);return o=s[0],i=s[1],r=o.put(i),t.send({store:o}),r.onerror=function(e){return t.done(e)},r.onsuccess=function(e){return t.sendDone({key:e.target.result,value:i})}}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).icon="search",e.description="Query a store in an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("range",{datatype:"object"}),e.inPorts.add("all",{datatype:"bang"}),e.outPorts.add("item",{datatype:"all"}),e.outPorts.add("range",{datatype:"object"}),e.outPorts.add("empty",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={all:["item","error"],range:["item","error"]},e.process((function(e,t){var r,o,s,a,c;if(e.hasData("store")){if(r=!1,a=function(e){var n;return(n=e.target.result)?(r||(t.send({item:new i.IP("openBracket")}),r=!0),t.send({item:n.value}),n.continue()):(r?t.send({item:new i.IP("closeBracket")}):t.send({empty:!0}),void t.done())},e.hasData("all")){var u=n(e.getData("store","all"),2);return c=u[0],u[1],(s=c.openCursor()).onerror=function(e){return t.done(e)},void(s.onsuccess=a)}if(e.hasData("range")){var p=n(e.getData("store","range"),2);return c=p[0],o=p[1],t.send({range:o}),(s=c.openCursor(o)).onerror=function(e){return t.done(e)},s.onsuccess=a}}}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).icon="code-fork",e.description="Route upgrades between IndexeDB database versions",e.inPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("versions",{datatype:"object",addressable:!0}),e.outPorts.add("missed",{datatype:"object"}),e.forwardBrackets={upgrade:["versions","missed"]},e.process((function(t,r){var o,i,s;if(t.hasData("upgrade")){for(s=t.getData("upgrade"),i=!1,o=0;o<s.newVersion;)o<s.oldVersion?o++:e.outPorts.versions.isAttached(o)?(r.send({versions:new n.IP("data",s.db,{index:o})}),o++):(o++,i=!0);return i?r.sendDone({missed:s.db}):r.done()}}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen for hash changes in browser's URL bar",e.icon="slack",e.inPorts.add("start",{datatype:"bang",description:"Start listening for hash changes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for hash changes"}),e.outPorts.add("initial",{datatype:"string"}),e.outPorts.add("change",{datatype:"string"}),e.current=null,e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("hashchange",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(r){return e.current=null,t(),r()},e.forwardBrackets={},e.process((function(r,o,i){var s;if(r.hasData("start"))return r.getData("start"),t(),s=function(t){var r,i;if(r=e.current,e.current=window.location.href.split("#")[1]||"",r&&o.send({change:new n.IP("openBracket",r)}),(i={})[t]=e.current,o.send(i),r)return o.send({change:new n.IP("closeBracket",r)})},e.subscriber={callback:function(e){return s("change")},ctx:i},s("initial"),void window.addEventListener("hashchange",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),o.done())}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen to window resize events",e.icon="desktop",e.inPorts.add("start",{datatype:"bang",description:"Start listening for screen resizes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for screen resizes"}),e.outPorts.add("width",{datatype:"number"}),e.outPorts.add("height",{datatype:"number"}),e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("resize",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(e){return t(),e()},e.forwardBrackets={},e.process((function(r,n,o){if(r.hasData("start"))return r.getData("start"),t(),e.subscriber={callback:function(e){return n.send({width:window.innerWidth,height:window.innerHeight})},ctx:o},n.send({width:window.innerWidth,height:window.innerHeight}),void window.addEventListener("resize",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),n.done())}))}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component;return e.description="call a method on an object",e.icon="gear",e.inPorts=new n.InPorts({in:{datatype:"object",description:"Object on which a method will be called",required:!0},method:{datatype:"string",description:"Name of the method to call",required:!0,control:!0},arguments:{datatype:"all",description:"Arguments given to the method (one argument per IP)"}}),e.outPorts=new n.OutPorts({out:{datatype:"all",description:"Value returned by the method call",required:!0},error:{datatype:"object"}}),e.process((e,t)=>{if(!e.hasData("method","in"))return;if(e.attached("arguments").length>0&&!e.hasData("arguments"))return;let r=[];const n=e.getStream("arguments").filter(e=>"data"===e.type&&null!=e.data).map(e=>e.data);r=r.concat(n);const o=e.getData("in"),i=e.getData("method");o[i]?t.sendDone({out:o[i].apply(o,r)}):t.sendDone(new Error(`Method '${i}' not available`))})}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component({description:"Create an empty object"});return e.inPorts=new n.InPorts({start:{datatype:"bang",description:"Signal to create a new object"}}),e.outPorts=new n.OutPorts({out:{datatype:"object",description:"A new empty object"}}),e.forwardBrackets={start:["out"]},e.process((e,t)=>{e.hasData("start")&&(e.getData("start"),t.sendDone({out:{}}))})}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component;return e.icon="indent",e.inPorts=new n.InPorts({in:{datatype:"object",description:"Object to get keys from",required:!0},key:{datatype:"string",description:"Keys to extract from the object (one key per IP)",required:!0},sendgroup:{datatype:"boolean",description:"true to send keys as groups around value IPs, false otherwise",control:!0,default:!1}}),e.outPorts=new n.OutPorts({out:{datatype:"all",description:"Values extracts from the input object given the input keys (one value per IP, potentially grouped using the key names)"},object:{datatype:"object",description:"Object forwarded from input if at least one property matches the input keys"},missed:{datatype:"object",description:"Object forwarded from input if no property matches the input keys"}}),e.process((e,t)=>{if(!e.hasData("in"))return;if(!e.hasStream("key"))return;if(e.attached("sendgroup").length>0&&!e.hasData("sendgroup"))return;const r=e.getStream("key").filter(e=>"data"===e.type).map(e=>e.data),o=e.getData("in");let i=e.getData("sendgroup");i="true"===i||!0===i,"object"==typeof o?null!==o?(r.forEach(e=>{void 0===o[e]&&(i&&t.send({missed:new n.IP("openBracket",e)}),t.send({missed:new n.IP("data",o)}),i&&t.send({missed:new n.IP("closeBracket",e)})),i&&t.send({out:new n.IP("openBracket",e)}),t.send({out:new n.IP("data",o[e])}),i&&t.send({out:new n.IP("closeBracket",e)})}),t.send({object:new n.IP("data",o)}),t.done()):t.sendDone(new Error("Data is NULL")):t.sendDone(new Error("Data is not an object"))})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Send a string when receiving a packet",e.inPorts.add("string",{datatype:"string",description:"String to send",control:!0}),e.inPorts.add("in",{datatype:"bang",description:"Send the string out"}),e.outPorts.add("out",{datatype:"string"}),e.process((function(e,t){if(e.has("string","in"))return e.getData("in"),t.sendDone({out:e.getData("string")})}))}},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p;p=r(0),u=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,t);var r,a,c,u=s(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this)).metadata=e,t.network=null,t.ready=!0,t.started=!1,t.starting=!1,t.baseDir=null,t.loader=null,t.load=0,t.inPorts=new p.InPorts({graph:{datatype:"all",description:"NoFlo graph definition to be used with the subgraph component",required:!0}}),t.outPorts=new p.OutPorts,t.inPorts.graph.on("ip",(function(e){if("data"===e.type)return t.setGraph(e.data,(function(e){if(e)return t.error(e)}))})),t}return r=l,(a=[{key:"setGraph",value:function(t,r){var o=this;return this.ready=!1,"object"===n(t)?"function"==typeof t.addNode?void this.createNetwork(t,r):void p.graph.loadJSON(t,(function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))})):("/"!==t.substr(0,1)&&":"!==t.substr(1,1)&&e&&e.cwd&&(t="".concat(e.cwd(),"/").concat(t)),p.graph.loadFile(t,(function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))})))}},{key:"createNetwork",value:function(e,t){var r=this;return this.description=e.properties.description||"",this.icon=e.properties.icon||this.icon,e.name||(e.name=this.nodeId),e.componentLoader=this.loader,p.createNetwork(e,(function(e,n){return r.network=n,e?t(e):(r.emit("network",r.network),r.subscribeNetwork(r.network),r.network.connect((function(e){var n,o,i;if(e)return t(e);for(n in i=r.network.processes)o=i[n],r.findEdgePorts(n,o);return r.setToReady(),t()})))}),!0)}},{key:"subscribeNetwork",value:function(e){var t,r=this;return t=[],this.network.on("start",(function(){var e;return e={},t.push(e),r.activate(e)})),this.network.on("end",(function(){var e;if(e=t.pop())return r.deactivate(e)}))}},{key:"isExportedInport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.inports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"isExportedOutport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.outports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"setToReady",value:function(){var t=this;return void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick((function(){return t.ready=!0,t.emit("ready")})):setTimeout((function(){return t.ready=!0,t.emit("ready")}),0)}},{key:"findEdgePorts",value:function(e,t){var r,n,o,i,s,a=this;for(i in r=t.component.inPorts.ports,n=t.component.outPorts.ports,r)o=r[i],!1!==(s=this.isExportedInport(o,e,i))&&(this.inPorts.add(s,o),this.inPorts[s].on("connect",(function(){if(!a.starting&&!a.network.isStarted()){if(!a.network.startupDate)return a.setUp((function(){}));a.network.setStarted(!0)}})));for(i in n)o=n[i],!1!==(s=this.isExportedOutport(o,e,i))&&this.outPorts.add(s,o);return!0}},{key:"isReady",value:function(){return this.ready}},{key:"isSubgraph",value:function(){return!0}},{key:"isLegacy",value:function(){return!1}},{key:"setUp",value:function(e){var t=this;if(this.starting=!0,this.isReady())return this.network?this.network.start((function(r){return r?e(r):(t.starting=!1,e())})):e(null);this.once("ready",(function(){return t.setUp(e)}))}},{key:"tearDown",value:function(e){return this.starting=!1,this.network?this.network.stop((function(t){return t?e(t):e()})):e(null)}}])&&o(r.prototype,a),c&&o(r,c),l}(p.Component),t.getComponent=function(e){return new u(e)}}).call(this,r(3))},function(e,t,r){const n=r(421);e.exports=(e,t)=>{const r=document.querySelectorAll("noflo-polymer");return[].forEach.call(r,t=>{((e,t)=>{const r=t.getAttribute("name"),o=t.getAttribute("inports");let i=[];o&&(i=o.split(" "));const s=t.getAttribute("outports");let a=[];s&&(a=s.split(" "));const c=n(r,i,a);e.registerComponent("polymer",r,c)})(e,t)}),t(null)}},function(e,t,r){const n=r(0);e.exports=(e,t,r)=>()=>{const o=new n.Component;return o.inPorts.add("selector",{datatype:"string",description:"DOM selector for getting the element"}),o.inPorts.add("element",{datatype:"object",description:"Existing Polymer element instance"}),o.inPorts.add("event",{datatype:"string",description:"Fire an event on polymer element"}),o.outPorts.add("element",{datatype:"object"}),o.outPorts.add("error",{datatype:"object"}),t.forEach(e=>{o.inPorts.add(e,{datatype:"all"})}),r.forEach(e=>{o.outPorts.add(e,{datatype:"all"})}),o.setUp=e=>{o.element=null,o.ctx=null,o.eventHandlers={},e()},o.tearDown=t=>{o.element&&(r.forEach(t=>{"element"!==e&&o.eventHandlers[t]&&o.element.removeEventListener(t,o.eventHandlers[t],!1)}),o.originalFire&&(o.element.fire=o.originalFire,delete o.originalFire),o.element=null,o.eventHandlers={}),o.ctx&&(o.ctx.deactivate(),o.ctx=null),t()},o.bindToElement=(t,n,i)=>{"object"==typeof t?t.tagName===e.toUpperCase()?o.element?n.done(new Error(o.nodeId+" is already bound to an element. Rebinding not allowed")):(o.element=t,o.ctx=i,n.send({element:t}),r.forEach(e=>{if("element"!==e)if("event"!==e)o.eventHandlers[e]=t=>{const r={};r[e]=t.detail,n.send(r)},t.addEventListener(e,o.eventHandlers[e],!1);else{o.originalFire=t.fire.bind(t);t.fire=(e,t,i)=>{if(-1!==r.indexOf(e))return void o.originalFire(e,t,i);if(-1!==e.indexOf("-changed"))return void o.originalFire(e,t,i);const s=t&&t.value?t.value:t;n.send({event:{action:e,payload:s}}),o.originalFire(e,t,i)}}}),o.element.fire("noflo:ready",!0)):n.done(new Error(`${o.nodeId} received a ${t.tagName} element instead of ${e.toUpperCase()}`)):n.done(new Error(o.nodeId+" received an element that is not an object"))},o.process((e,r,n)=>{if(e.hasData("element")){const t=e.getData("element");return void o.bindToElement(t,r,n)}if(e.hasData("selector")){const t=e.getData("selector"),i=document.querySelector(t);return i?void o.bindToElement(i,r,n):void r.done(new Error(`No element matching '${t}' found`))}if(!o.element)return;let i=!1;if(e.hasData("event")){i=!0;const t=e.getData("event");o.element.fire(e.getData(t))}t.forEach(t=>{if(e.hasData(t)){if("function"==typeof o.element[t])return i=!0,void o.element[t](e.getData(t));if(Array.isArray(o.element[t])){if(!e.hasStream(t))return;i=!0;const r=e.getStream(t).filter(e=>"data"===e.type).map(e=>e.data);o.element[t]=r}else i=!0,o.element[t]=e.getData(t)}}),i&&r.done()}),o}},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var o=n.formatters[r];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e})),n.formatArgs.call(i,t);var p=i.log||n.log;p.apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(80),Object.keys(e).forEach((function(t){n[t]=e[t]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){(function(e){var n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S={}.hasOwnProperty;o=r(36),n=r(16),f=r(37),x=r(113),u=r(47)("noflo:helpers"),t.WirePattern=function(t,r,n){var o,s,a;if(o="in"in r?r.in:"in",x.isArray(o)||(o=[o]),s="out"in r?r.out:"out",x.isArray(s)||(s=[s]),"error"in r||(r.error="error"),"async"in r||(r.async=!1),"ordered"in r||(r.ordered=!0),"group"in r||(r.group=!1),"field"in r||(r.field=null),"forwardGroups"in r||(r.forwardGroups=!1),r.forwardGroups&&("string"==typeof r.forwardGroups&&(r.forwardGroups=[r.forwardGroups]),"boolean"==typeof r.forwardGroups&&(r.forwardGroups=o)),"receiveStreams"in r||(r.receiveStreams=!1),r.receiveStreams)throw new Error("WirePattern receiveStreams is deprecated");if("sendStreams"in r||(r.sendStreams=!1),r.sendStreams)throw new Error("WirePattern sendStreams is deprecated");return r.async&&(r.sendStreams=s),"params"in r||(r.params=[]),"string"==typeof r.params&&(r.params=[r.params]),"name"in r||(r.name=""),"dropInput"in r||(r.dropInput=!1),"arrayPolicy"in r||(r.arrayPolicy={in:"any",params:"all"}),r.inPorts=o,r.outPorts=s,i(r,n),(r.legacy||(null!=e&&null!=(a=e.env)?a.NOFLO_WIREPATTERN_LEGACY:void 0))&&f.deprecated("noflo.helpers.WirePattern legacy mode is deprecated"),g(t,r,n)},g=function(e,t,r){return b(e,t),E(e),v(e,t),e.ordered=t.ordered,e.process((function(n,o,i){var a,c,h,f,g,y;if(s(t,n,o))return e.params=m(t,n),a=l(t,n),h=p(e,t.inPorts[0],n),f=d(t.outPorts,o),u("WirePattern Process API call with",a,h,e.params,i.scope),g=function(){throw new Error("noflo.helpers.WirePattern postpone is deprecated")},y=function(){throw new Error("noflo.helpers.WirePattern resume is deprecated")},c=w(e,t,o),r.call(e,a,h,f,(function(e){return c(),o.done(e)}),g,y,n.scope)}))},i=function(e,t){if(e.group&&f.deprecated("noflo.helpers.WirePattern group option is deprecated. Please port to Process API"),e.field&&f.deprecated("noflo.helpers.WirePattern field option is deprecated. Please port to Process API"),t.length>4&&f.deprecated("noflo.helpers.WirePattern postpone and resume are deprecated. Please port to Process API"),!e.async)throw new Error("noflo.helpers.WirePattern synchronous is deprecated. Please use async: true");if(t.length<4)throw new Error("noflo.helpers.WirePattern callback doesn't use callback argument");"error"!==e.error&&f.deprecated('noflo.helpers.WirePattern custom error port name is deprecated. Please switch to "error" or port to WirePattern')},b=function(e,t){var r,n,o,i,s;for(s=[],r=0,n=(i=t.params).length;r<n;r++)o=i[r],s.push(e.inPorts[o].options.control=!0);return s},v=function(e,t){var r,n,o,i,s,a,c,u;if(e.forwardBrackets={},t.forwardGroups)for(o=t.inPorts,x.isArray(t.forwardGroups)&&(o=t.forwardGroups),r=0,s=o.length;r<s;r++){for(n=o[r],e.forwardBrackets[n]=[],i=0,a=(u=t.outPorts).length;i<a;i++)c=u[i],e.forwardBrackets[n].push(c);e.outPorts.error&&e.forwardBrackets[n].push("error")}},w=function(e,t,r){var o,i,s,a;return i=[],o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern error method is deprecated. Please send error to callback instead"),i.push({err:t,groups:r}),e.hasErrors=!0},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern fail method is deprecated. Please send error to callback instead"),e&&o(e,t),a(),r.done()},a=function(){if(i.length)return t.name&&r.sendIP("error",new n("openBracket",t.name)),i.forEach((function(e){var t,o,i,s,a,c,u,p;for(o=0,s=(c=e.groups).length;o<s;o++)t=c[o],r.sendIP("error",new n("openBracket",t));for(r.sendIP("error",new n("data",e.err)),p=[],i=0,a=(u=e.groups).length;i<a;i++)t=u[i],p.push(r.sendIP("error",new n("closeBracket",t)));return p})),t.name&&r.sendIP("error",new n("closeBracket",t.name)),e.hasErrors=!1,i=[]},e.hasErrors=!1,e.error=o,e.fail=s,a},E=function(e){var t;return t=Object.keys(e.inPorts.ports).filter((function(t){return!!e.inPorts[t].options.control&&!!e.inPorts[t].hasDefault()})),e.sendDefaults=function(){return f.deprecated("noflo.helpers.WirePattern sendDefaults method is deprecated. Please start with a Network"),t.forEach((function(t){var r;return r=o.createSocket(),e.inPorts[t].attach(r),r.send(),r.disconnect(),e.inPorts[t].detach(r)}))}},m=function(e,t){var r,n,o,i,s,a,c,u,p;if(!e.params.length)return{};for(c={},r=0,i=(u=e.params).length;r<i;r++)if(a=u[r],t.ports[a].isAddressable())for(c[a]={},o=0,s=(p=t.attached(a)).length;o<s;o++)n=p[o],t.hasData([a,n])&&(c[a][n]=t.getData([a,n]));else c[a]=t.getData(a);return c},y=function(e,t){var r,n,o,i,s,a,c,u,p,l,d;for(p=null,r=[],l=[],o=n=0,a=e.length;n<a;o=++n)if("openBracket"!==(i=e[o]).type){if("closeBracket"!==i.type)t(i,r)?(p=l.slice(0)).push(i):l=[];else if(r.pop(),p&&p.push(i),l.length&&l.pop(),p&&!l.length)break}else r.push(i.data),l.push(i);if(0!==(d=e.indexOf(p[0]))){for(e.splice(d,p.length),p.reverse(),u=[],s=0,c=p.length;s<c;s++)i=p[s],u.push(e.unshift(i));return u}},h=function(e,t,r,n,o){var i;if(t.group||t.field)return t.group&&(i=r.ports[n].getBuffer(r.scope,o),y(i,(function(e,t){var n,i,s,a;for(a=r.collatedBy.brackets,o=i=0,s=a.length;i<s;o=++i)if(n=a[o],t[o]!==n)return!1;return!0}))),t.field?(e[t.field]=r.collatedBy.field,i=r.ports[n].getBuffer(r.scope,o),y(i,(function(r){return r.data[t.field]===e[t.field]}))):void 0},l=function(e,t){var r,n,o,i,s,a,c,u,p;for(r={},n=0,s=(u=e.inPorts).length;n<s;n++)if(c=u[n],t.ports[c].isAddressable())for(r[c]={},i=0,a=(p=t.attached(c)).length;i<a;i++)o=p[i],t.hasData([c,o])&&(h(r,e,t,c,o),r[c][o]=t.getData([c,o]));else t.hasData(c)&&(h(r,e,t,c),r[c]=t.getData(c));return 1===e.inPorts.length?r[e.inPorts[0]]:r},p=function(e,t,r){var n,o;return null==(null!=(n=r.result.__bracketContext)?n[t]:void 0)?[]:(null!=(o=r.collatedBy)?o.brackets:void 0)?r.collatedBy.brackets:r.result.__bracketContext[t].filter((function(e){return e.source===t})).map((function(e){return e.ip.data}))},d=function(e,t){var r;return r={},e.forEach((function(e){return r[e]={connect:function(){},beginGroup:function(r,o){var i;return(i=new n("openBracket",r)).index=o,t.sendIP(e,i)},send:function(r,o){var i;return(i=new n("data",r)).index=o,t.sendIP(e,i)},endGroup:function(r,o){var i;return(i=new n("closeBracket",r)).index=o,t.sendIP(e,i)},disconnect:function(){}}})),1===e.length?r[e[0]]:r},s=function(e,t,r){var n,o,i,s,u,p,l,d,h,f,m;if(h=c(e,t),s=a(e,t),e.dropInput&&!h){for(d=!1,o=0,p=(m=e.inPorts).length;o<p;o++)if(f=m[o],t.ports[f].isAddressable()){if(!(n=t.attached(f)).length)continue;for(u=0,l=n.length;u<l;u++)for(i=n[u];t.has([f,i]);)d=!0,t.get([f,i]).drop()}else for(;t.has(f);)d=!0,t.get(f).drop();d&&r.done()}return s&&h},c=function(e,t){var r,n,o,i,s,a;for(n=0,o=(s=e.params).length;n<o;n++)if(i=s[n],t.ports[i].isRequired())if(t.ports[i].isAddressable()){if(!(r=t.attached(i)).length)return!1;if(a=r.filter((function(e){return t.hasData([i,e])})),"all"===e.arrayPolicy.params){if(a.length!==r.length)return!1;continue}if(!a.length)return!1}else if(!t.hasData(i))return!1;return!0},a=function(e,t){var r,n,o,i,s,a,c,u,p,l;for(e.group&&(n={},t.collatedBy={brackets:[],ready:!1},o=function(e,t){var r,n,o,i;for(o=n=0,i=e.length;n<i;o=++n)if(r=e[o],t[o]!==r)return!1;return!0},i=function(r,i){var s,a;if(a=i.slice(0),e.group instanceof RegExp){if(!(a=a.slice(0,1)).length)return!1;if(!e.group.test(a[0]))return!1}return t.collatedBy.ready?o(t.collatedBy.brackets,a):(s=a.join(":"),n[s]||(n[s]=[]),-1===n[s].indexOf(u)&&n[s].push(u),e.inPorts.indexOf(u)!==e.inPorts.length-1||n[s].length===e.inPorts.length&&(!t.collatedBy.ready&&(t.collatedBy.ready=!0,t.collatedBy.brackets=a,!0)))}),e.field&&(t.collatedBy={field:void 0,ready:!1}),s=function(r){var n,o,s,a,c,u,p;if(!e.group&&!e.field)return t.hasData(r);if(e.group){for(p=[],[],s=!1,a=0,u=(n=t.ports[r].getBuffer(t.scope)).length;a<u;a++)if("openBracket"!==(c=n[a]).type)if("closeBracket"!==c.type)o=i(c,p);else{if(p.pop(),p.length)continue;if(!o)continue;s=!0}else p.push(c.data);return s}return e.field?t.hasStream(r,(function(r){return t.collatedBy.ready?r.data[e.field]===t.collatedBy.field:(t.collatedBy.field=r.data[e.field],t.collatedBy.ready=!0,!0)})):void 0},a=0,c=(p=e.inPorts).length;a<c;a++)if(u=p[a],t.ports[u].isAddressable()){if(!(r=t.attached(u)).length)return!1;if(l=r.filter((function(e){return s([u,e])})),"all"===e.arrayPolicy.in){if(l.length!==r.length)return!1;continue}if(!l.length)return!1}else if(!s(u))return!1;return!0},t.CustomError=function(e,r){var n;return n=new Error(e),t.CustomizeError(n,r)},t.CustomizeError=function(e,t){var r,n;for(r in t)S.call(t,r)&&(n=t[r],e[r]=n);return e}}).call(this,r(3))},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,s,a,c,u,p,l,d,h,f,m;o=r(53).ComponentLoader,a=r(74).Network,s=r(16),u=r(36),i=r(35).Graph,p=function(t,r){return t||(t={}),t.name||(t.name=r),t.loader&&(t.baseDir=t.loader.baseDir),!t.baseDir&&e&&e.cwd&&(t.baseDir=e.cwd()),t.loader||(t.loader=new o(t.baseDir)),t.raw||(t.raw=!1),t},h=function(e,t,r){var o;return"object"===n(e)?(e.componentLoader=t.loader,void(o=new a(e,t)).connect((function(e){return e?r(e):r(null,o)}))):t.loader.load(e,(function(n,s){var c,u,p,l,d;if(n)return r(n);for(d in c=new i(t.name),p=t.name,c.addNode(p,e),u=s.inPorts.ports,l=s.outPorts.ports,u)u[d],c.addInport(d,p,d);for(d in l)l[d],c.addOutport(d,p,d);return c.componentLoader=t.loader,(o=new a(c,t)).connect((function(e){return e?r(e):r(null,o)}))}))},f=function(e,t,r,n){var o,i,a,c;return Object.keys(e.graph.inports),o={},c=[],i=Object.keys(e.graph.outports),a={},i.forEach((function(t){var r,n;return r=e.graph.outports[t],n=e.getNode(r.process),a[t]=u.createSocket(),n.component.outPorts[r.port].attach(a[t]),a[t].from={process:n,port:r.port},a[t].on("ip",(function(e){var r;return(r={})[t]=e,c.push(r)}))})),e.once("end",(function(){var e,t;for(e in a)(t=a[e]).from.process.component.outPorts[t.from.port].detach(t);return a={},o={},n(null,c)})),e.start((function(r){var i,a,c,p,l,d,h,f;if(r)return n(r);for(h=[],i=0,c=t.length;i<c;i++)a=t[i],h.push(function(){var t;for(p in t=[],a)f=a[p],o[p]||(l=e.graph.inports[p],d=e.getNode(l.process),o[p]=u.createSocket(),d.component.inPorts[l.port].attach(o[p])),s.isIP(f)?o[p].post(f):t.push(o[p].post(new s("data",f)));return t}());return h}))},c=function(e,t){var r;if("object"!==n(e))return"simple";if(Array.isArray(e))return e.filter((function(e){return"map"===c(e,t)})).length===e.length?"sequence":"simple";if(!Object.keys(e).length)return"simple";for(r in e)if(e[r],!t.graph.inports[r])return"simple";return"map"},d=function(e,t,r){var n,o;return"sequence"===t?e:"map"===t?[e]:(n=Object.keys(r.graph.inports)[0],r.graph.inports.in&&(n="in"),(o={})[n]=e,[o])},l=function(e,t){var r,n,o,i,s,a;if(t.raw)return e;for(s=null,r=a=[],n=0,o=e.length;n<o;n++)"openBracket"===(i=e[n]).type&&(s=r,r=[],s.push(r)),"data"===i.type&&r.push(i.data),"closeBracket"===i.type&&(r=s);return 1===a.length?a[0]:a},m=function(e,t,r,n){var o,i,s,a,c,u,p,d,h,f,m;if((o=e.filter((function(e){return null!=e.error})).map((function(e){return e.error}))).length)return n(l(o,r));if("sequence"===t)return n(null,e.map((function(e){var t,n,o;for(t in n={},e)o=e[t],r.raw?n[t]=o:n[t]=l([o],r);return n})));for(u={},i=0,a=e.length;i<a;i++)for(s in c=e[i])f=c[s],u[s]||(u[s]=[]),u[s].push(f);if(0===(m=Object.keys(u).filter((function(e){return u[e].length>0}))).length)return n(null);if(1===m.length&&"simple"===t)return n(null,l(u[m[0]],r));for(d in h={},u)p=u[d],h[d]=l(p,r);return n(null,h)},t.asCallback=function(e,t){return t=p(t,e),function(r,n){return h(e,t,(function(e,o){var i,s;return e?n(e):(s=c(r,o),i=d(r,s,o),f(o,i,0,(function(e,r){return e?n(e):m(r,s,t,n)})))}))}}}).call(this,r(3))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;i=r(426);var s=r(114);o=s.Component,t.asComponent=function(e,t){var r,s,a,c,u,p,l;for(s=!1,p=i(e).filter((function(e){return"callback"!==e.param||(s=!0,!1)})),r=new o(t),a=0,c=p.length;a<c;a++)l={required:!0},void 0!==(u=p[a]).default&&(l.default=u.default,l.required=!1),r.inPorts.add(u.param,l),r.forwardBrackets[u.param]=["out","error"];return p.length||r.inPorts.add("in",{datatype:"bang"}),r.outPorts.add("out"),r.outPorts.add("error"),r.process((function(t,r){var o,i,a,c;if(p.length){for(o=0,i=p.length;o<i;o++)if(u=p[o],!t.hasData(u.param))return;c=p.map((function(e){return t.getData(e.param)}))}else{if(!t.hasData("in"))return;t.getData("in"),c=[]}return s?(c.push((function(e,t){return e?r.done(e):r.sendDone(t)})),void(a=e.apply(null,c))):(a=e.apply(null,c))&&"object"===n(a)&&"function"==typeof a.then?void a.then((function(e){return r.sendDone(e)}),(function(e){return r.done(e)})):r.sendDone(a)})),r}},function(e,t,r){var n=r(119),o=r(427),i=r(428),s=r(429);e.exports=function(e){var t=[],r=e.toString().replace(/\/\*.*?\*\//g,"");r=o(t,r);var a=i(t,r,n.prePatterns).replace(/\n/g,"").replace(/\s*async\s*/,"").match(/(?:function\s*\((.*?)\)|\((.*?)\))|(.*?)\s*=>/);return a=a[1]||a[2]||a[3]||"",i(t,a,n.postPatterns).split(",").filter((function(e){return e})).map((function(e){var r=(e=s(t,e,!0)).split("="),n={param:r[0].trim()};return r[1]&&(n.default=s(t,r.slice(1).join("="))),n}))}},function(e,t,r){var n=r(119).stringPatterns,o=r(66);e.exports=function(e,t){for(;;){var r=n.reduce((function(e,r){return e.concat(t.match(r)||[])}),[]).sort((function(e,t){return e.length-t.length}))[0];if(!r)return t;t=t.replace(r,o(e.push(r)))}}},function(e,t,r){var n=r(66);e.exports=function(e,t,r){return r.forEach((function(r){for(;r.test(t);){var o=r.exec(t)[0];t=t.replace(o,n(e.push(o)))}})),t}},function(module,exports,__webpack_require__){var delim=__webpack_require__(66);module.exports=function(cache,string,skipEval){for(var pattern=/:~:(\d+?):~:/;pattern.test(string);){var id=pattern.exec(string)[1];string=string.replace(delim(id),cache[id-1])}return skipEval?string:eval("("+string+")")}},function(e,t,r){var n={};n.fbpGraph=r(431),n.Ease=r(435),"undefined"!=typeof window&&void 0===window.Ease&&(window.Ease=n.Ease);var o={contextPortSize:36,zbpBig:1.2,zbpNormal:.4,zbpSmall:.01,config:{nodeSize:72,nodeWidth:72,nodeRadius:8,nodeHeight:72,autoSizeNode:!0,maxPortCount:9,nodeHeightIncrement:12,focusAnimationDuration:1500}};for(var i in o)n[i]=o[i];"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);var s={TheGraph:n};n.factories=r(48),n.merge=r(50),r(438).register(s),r(443).register(s),r(444).register(s),r(445).register(s),r(446).register(s),r(447).register(s),r(448).register(s),r(449).register(s),r(450).register(s),r(451).register(s),n.menu=r(452),n.Menu=n.menu.Menu,n.factories.menu=n.menu.factories,n.config.menu=n.menu.config,n.config.menu.iconRect.rx=n.config.nodeRadius,n.config.menu.iconRect.ry=n.config.nodeRadius,n.modalbg=r(121),n.ModalBG=n.modalbg.ModalBG,n.config.ModalBG=n.config.factories,n.factories.ModalBG=n.modalbg.factories,n.FONT_AWESOME=r(123);var a=r(51);n.findMinMax=a.findMinMax,n.findNodeFit=a.findNodeFit,n.findFit=a.findFit,n.tooltip=r(453),n.Tooltip=n.tooltip.Tooltip,n.config.tooltip=n.tooltip.config,n.factories.tooltip=n.tooltip.factories,n.mixins=r(52),n.arcs=r(68),n.TextBG=r(122),n.SVGImage=r(120),n.thumb=r(124),n.nav=r(454),n.autolayout=r(455),n.library=r(456),n.clipboard=r(125),n.editor=r(457),n.render=r(458),n.render.register(s),e.exports=n},function(e,t,r){t.graph=r(432),t.Graph=t.graph.Graph,t.journal=r(434),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,l,d,h,f,m,g=r(5);p=g.EventEmitter,d=r(15),f=r(433),l=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,u=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=u.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_,P;if(v=this.getNode(e)){for(this.checkTransactionStart(),P=[],n=0,u=(E=this.edges).length;n<u;n++)(t=E[n]).from.node!==v.id&&t.to.node!==v.id||P.push(t);for(s=0,p=P.length;s<p;s++)t=P[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(P=[],a=0,l=(x=this.initializers).length;a<l;a++)(i=x[a]).to.node===v.id&&P.push(i);for(c=0,d=P.length;c<d;c++)i=P[c],this.removeInitial(i.to.node,i.to.port);for(w in P=[],S=this.inports)S[w].process===e&&P.push(w);for(g=0,h=P.length;g<h;g++)w=P[g],this.removeInport(w);for(w in P=[],k=this.outports)k[w].process===e&&P.push(w);for(y=0,f=P.length;y<f;y++)w=P[y],this.removeOutport(w);for(b=0,m=(_=this.groups).length;b<m;b++)(r=_[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,u=(m=this.edges).length;o<u;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,l=(b=this.groups).length;c<l;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,u,p,l,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,u=(d=this.edges).length;i<u;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,l=m.length;c<l;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],u=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):u.push(r);for(this.initializers=u,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,l=(m=this.initializers).length;c<l;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(u=0,d=(g=this.edges).length;u<d;u++)o=g[u],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,u,p,l,d,h,f,m,g,y,v,b,w,E,x,S,k,_;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)_=v[g],a.properties[g]=_;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(E=this.groups).length;o<p;o++)n={name:(r=E[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,l=(x=this.nodes).length;s<l;s++)f=x[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(S=this.edges).length;c<d;c++)e={src:{process:(t=S[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(u=0,h=(k=this.initializers).length;u<h;u++)i=k[u],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(6).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=l,t.createGraph=function(e,t){return new l(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,u,p,d,h,f,m,g,y,v,b,w,E,x,S,k,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(g in(i="string"==typeof e?JSON.parse(e):JSON.parse(JSON.stringify(e))).properties||(i.properties={}),i.processes||(i.processes={}),i.connections||(i.connections=[]),r=i.caseSensitive||!1,(s=new l(i.properties.name,{caseSensitive:r})).startTransaction("loadJSON",_),m={},v=i.properties)k=v[g],"name"!==g&&(m[g]=k);for(u in s.setProperties(m),b=i.processes)(o=b[u]).metadata||(o.metadata={}),s.addNode(u,o.component,o.metadata);for(c=0,d=(w=i.connections).length;c<d;c++)_=(n=w[c]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?s.addEdge(n.src.process,s.getPortName(n.src.port),n.tgt.process,s.getPortName(n.tgt.port),_):s.addEdgeIndex(n.src.process,s.getPortName(n.src.port),n.src.index,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,_):"number"==typeof n.tgt.index?s.addInitialIndex(n.data,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,_):s.addInitial(n.data,n.tgt.process,s.getPortName(n.tgt.port),_);if(i.inports)for(y in E=i.inports)f=E[y],s.addInport(y,f.process,s.getPortName(f.port),f.metadata);if(i.outports)for(y in x=i.outports)f=x[y],s.addOutport(y,f.process,s.getPortName(f.port),f.metadata);if(i.groups)for(p=0,h=(S=i.groups).length;p<h;p++)a=S[p],s.addGroup(a.name,a.nodes,a.metadata||{});return s.endTransaction("loadJSON"),t(null,s)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(29).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(6).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,u,p,l,h,f,m,g,y,v,b,w,E;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,u=(v=d(e.initializers).reverse()).length;i<u;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(E=[],a=0,l=(w=d(e.nodes).reverse()).length;a<l;a++)h=w[a],E.push(e.removeNode(h.id));return E},h=function(e,t){var r,n,o,i,s,a,c,u,p,l,d,h,f,g,y,v,b,w,E,x,S;for(m(e),o=0,u=(y=t.nodes).length;o<u;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,l=(b=t.initializers).length;a<l;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in E=t.outports)f=E[g],e.addOutport(g,f.process,f.port,f.metadata);for(S=[],c=0,d=(x=t.groups).length;c<d;c++)n=x[c],S.push(e.addGroup(n.name,n.nodes,n.metadata));return S},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(3))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,E=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},x=r(5);f=x.EventEmitter,b=r(15),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,u,p,l,h,f,m,g,v,b,w,E,x,S,k,_,P,C,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(x=s.graph.nodes).length;p<f;p++)E=x[p],s.appendCommand("addNode",E);for(h=0,m=(S=s.graph.edges).length;h<m;h++)a=S[h],s.appendCommand("addEdge",a);for(b=0,g=(k=s.graph.initializers).length;b<g;b++)u=k[b],s.appendCommand("addInitial",u);for(l in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),_=s.graph.inports)A=_[l],s.appendCommand("addInport",{name:l,port:A});for(l in P=s.graph.outports)A=P[l],s.appendCommand("addOutport",{name:l,port:A});for(w=0,v=(C=s.graph.groups).length;w<v;w++)c=C[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(E(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(E(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,u,p,l,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(u=o=p=this.currentRevision+1,l=e;p<=l?o<=l:o>=l;u=p<=l?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(u)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(u=a=this.currentRevision,h=e+1;a>=h;u=a+=-1)for(n=c=(t=this.store.fetchTransaction(u)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,u,p;for(a=[],c=o=u=e|=0,p=t|=this.store.lastRevision;u<=p?o<p:o>p;c=u<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,u;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(u=this.store.fetchTransaction(a)).length;i<s;i++)n=u[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(6).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce},function(e,t,r){"use strict";
/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(49),o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,l=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,f=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}function E(){}function x(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=w.prototype;var S=x.prototype=new E;S.constructor=x,n(S,w.prototype),S.isPureReactComponent=!0;var k={current:null},_=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var n,o={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,n)&&!P.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),p=0;p<c;p++)u[p]=arguments[p+2];o.children=u}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===o[n]&&(o[n]=c[n]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:k.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g,D=[];function O(e,t,r,n){if(D.length){var o=D.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function N(e,t,r){return null==e?0:function e(t,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case i:case s:c=!0}}if(c)return n(o,t,""===r?"."+I(t,0):r),1;if(c=0,r=""===r?".":r+":",Array.isArray(t))for(var u=0;u<t.length;u++){var p=r+I(a=t[u],u);c+=e(a,p,n,o)}else if(null===t||"object"!=typeof t?p=null:p="function"==typeof(p=g&&t[g]||t["@@iterator"])?p:null,"function"==typeof p)for(t=p.call(t),u=0;!(a=t.next()).done;)c+=e(a=a.value,p=r+I(a,u++),n,o);else if("object"===a)throw n=""+t,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return c}(e,"",t,r)}function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?M(e,n,r,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+r)),n.push(e))}function M(e,t,r,n,o){var i="";null!=r&&(i=(""+r).replace(T,"$&/")+"/"),N(e,F,t=O(t,i,n,o)),R(t)}var L={current:null};function G(){var e=L.current;if(null===e)throw Error(y(321));return e}var B={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return M(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;N(e,j,t=O(null,null,t,r)),R(t)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var t=[];return M(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=a,t.Profiler=u,t.PureComponent=x,t.StrictMode=c,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,r){if(null==e)throw Error(y(267,e));var o=n({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(p in t)_.call(t,p)&&!P.hasOwnProperty(p)&&(o[p]=void 0===t[p]&&void 0!==u?u[p]:t[p])}var p=arguments.length-2;if(1===p)o.children=r;else if(1<p){u=Array(p);for(var l=0;l<p;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:i,type:e.type,key:s,ref:a,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:l,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return G().useCallback(e,t)},t.useContext=function(e,t){return G().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return G().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return G().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return G().useLayoutEffect(e,t)},t.useMemo=function(e,t){return G().useMemo(e,t)},t.useReducer=function(e,t,r){return G().useReducer(e,t,r)},t.useRef=function(e){return G().useRef(e)},t.useState=function(e){return G().useState(e)},t.version="16.14.0"},function(e,t,r){"use strict";var n=r(49),o={};function i(e,t,r,n,o,i,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,s,a],p=0;(c=new Error(t.replace(/%s/g,(function(){return u[p++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}e.exports=function(e,t,r){var s=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},c={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)l(e,t[r])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=h(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var r in t){var n=t[r];if(t.hasOwnProperty(r)){if(i(!(r in u),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r),r in e)return i("DEFINE_MANY_MERGED"===(c.hasOwnProperty(r)?c[r]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),void(e[r]=h(e[r],n));e[r]=n}}}(e,t)},autobind:function(){}};function p(e,t){var r=a.hasOwnProperty(t)?a[t]:null;v.hasOwnProperty(t)&&i("OVERRIDE_BASE"===r,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===r||"DEFINE_MANY_MERGED"===r,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,r){if(r){i("function"!=typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,o=n.__reactAutoBindPairs;for(var s in r.hasOwnProperty("mixins")&&u.mixins(e,r.mixins),r)if(r.hasOwnProperty(s)&&"mixins"!==s){var c=r[s],l=n.hasOwnProperty(s);if(p(l,s),u.hasOwnProperty(s))u[s](e,c);else{var d=a.hasOwnProperty(s);if("function"==typeof c&&!d&&!l&&!1!==r.autobind)o.push(s,c),n[s]=c;else if(l){var m=a[s];i(d&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,s),"DEFINE_MANY_MERGED"===m?n[s]=h(n[s],c):"DEFINE_MANY"===m&&(n[s]=f(n[s],c))}else n[s]=c}}}else;}function d(e,t){for(var r in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(r)&&(i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function h(e,t){return function(){var r=e.apply(this,arguments),n=t.apply(this,arguments);if(null==r)return n;if(null==n)return r;var o={};return d(o,r),d(o,n),o}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function m(e,t){return t.bind(e)}var g={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},v={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},b=function(){};return n(b.prototype,e.prototype,v),function(e){var t=function(e,n,s){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[n]=m(e,o)}}(this),this.props=e,this.context=n,this.refs=o,this.updater=s||r,this.state=null;var a=this.getInitialState?this.getInitialState():null;i("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};for(var n in t.prototype=new b,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(l.bind(null,t)),l(t,g),l(t,e),l(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),a)t.prototype[n]||(t.prototype[n]=null);return t}}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(67),a=r(442),c=r(121).ModalBG,u=r(51),p=window.unwrap?window.unwrap:function(e){return e},l={27:function(e){e.refs.graph&&e.refs.graph.cancelPreviewEdge()},46:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes,n=e.refs.graph.state.selectedEdges,o=e.props.menus;for(var i in r)if(r.hasOwnProperty(i)){var s=t.getNode(i);o.node.actions.delete(t,i,s)}n.map((function(e){o.edge.actions.delete(t,null,e)}))},70:function(e){e.triggerFit()},83:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes;for(var n in r)if(r.hasOwnProperty(n)){var o=t.getNode(n);e.focusNode(o);break}}},d=[70,83,27];e.exports.register=function(e){var t=e.TheGraph;t.config.app={container:{className:"the-graph-app",name:"app"},canvas:{ref:"canvas",className:"app-canvas",style:{position:"absolute",top:0,left:0}},svg:{className:"app-svg",ref:"svg",style:{position:"absolute",top:0,left:0}},svgGroup:{className:"view"},graph:{ref:"graph"},tooltip:{ref:"tooltip"},modal:{className:"context"}},t.factories.app={createAppContainer:function(e,t){var r=["div",e];Array.isArray(t)&&(r=r.concat(t));return n.createElement.apply(n,r)},createAppCanvas:t.factories.createCanvas,createAppSvg:t.factories.createSvg,createAppSvgGroup:t.factories.createGroup,createAppGraph:function(e){return t.Graph(e)},createAppTooltip:function(e){return t.Tooltip(e)},createAppModalGroup:t.factories.createGroup,createAppModalBackground:function(e){return c(e)}};var r=[];n.Animate&&r.push(n.Animate),t.App=n.createFactory(i({displayName:"TheGraphApp",mixins:r,getDefaultProps:function(){return{width:null,height:null,readonly:!1,nodeIcons:{},minZoom:.15,maxZoom:15,offsetX:0,offsetY:0,menus:null,enableHotKeys:!1,getMenuDef:null,onPanScale:null,onNodeSelection:null,onEdgeSelection:null}},getInitialState:function(){var e=u.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);return{x:e.x,y:e.y,scale:e.scale,width:this.props.width,height:this.props.height,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,trackStartX:null,trackStartY:null,tooltip:"",tooltipX:0,tooltipY:0,tooltipVisible:!1,contextElement:null,contextType:null,offsetY:this.props.offsetY,offsetX:this.props.offsetX}},zoomFactor:0,zoomX:0,zoomY:0,onWheel:function(e){e.preventDefault(),this.zoomFactor||(this.zoomFactor=0),this.zoomFactor+=e.deltaY?e.deltaY:0-e.wheelDeltaY,this.zoomX=e.clientX,this.zoomY=e.clientY,requestAnimationFrame(this.scheduleWheelZoom)},scheduleWheelZoom:function(){if(!isNaN(this.zoomFactor)){var e=this.zoomFactor/-500;e=Math.min(.5,Math.max(-.5,e));var t=this.state.scale+this.state.scale*e;if(this.zoomFactor=0,t<this.state.minZoom?t=this.state.minZoom:t>this.state.maxZoom&&(t=this.state.maxZoom),t!==this.state.scale){var r=t/this.state.scale,n=this.state.x,o=this.state.y,i=this.zoomX,s=this.zoomY,a=r*(n-i)+i,c=r*(o-s)+s;this.setState({scale:t,x:a,y:c,tooltipVisible:!1})}}},lastScale:1,lastX:0,lastY:0,pinching:!1,onTransformStart:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.lastScale=1,this.lastX=e.center.x,this.lastY=e.center.y,this.pinching=!0},onTransform:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation();var t=this.state.scale,r=this.state.x,n=this.state.y,o=e.scale,i=o-this.lastScale+1;this.lastScale=o;var s=i*t;s=Math.max(s,this.props.minZoom);var a=e.center.x,c=e.center.y,u=i*(r-a)+a+(a-this.lastX),p=i*(n-c)+c+(c-this.lastY);this.lastX=a,this.lastY=c,this.setState({scale:s,x:u,y:p,tooltipVisible:!1})},onTransformEnd:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.pinching=!1},onTrackStart:function(e){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({trackStartX:this.state.x,trackStartY:this.state.y})},onTrack:function(e){this.pinching||this.menuShown||this.setState({x:this.state.trackStartX+e.gesture.deltaX,y:this.state.trackStartY+e.gesture.deltaY})},onTrackEnd:function(e){e.stopPropagation();var t=o.findDOMNode(this);t.removeEventListener("panmove",this.onTrack),t.removeEventListener("panend",this.onTrackEnd),this.setState({trackStartX:null,trackStartY:null})},onPanScale:function(){this.props.onPanScale&&this.props.onPanScale(this.state.x,this.state.y,this.state.scale)},defaultGetMenuDef:function(e){if(e.type&&this.props.menus&&this.props.menus[e.type]){var t=this.props.menus[e.type];return t.callback?t.callback(t,e):t}return null},showContext:function(e){this.setState({contextMenu:e,tooltipVisible:!1})},hideContext:function(e){this.setState({contextMenu:null})},changeTooltip:function(e){var t=e.detail.tooltip,r=e.detail.x+10,n=6*t.length;r+n>this.props.width&&(r=e.detail.x-n-10),this.setState({tooltip:t,tooltipVisible:!0,tooltipX:r,tooltipY:e.detail.y+20})},hideTooltip:function(e){this.setState({tooltip:"",tooltipVisible:!1})},triggerFit:function(e){var r=u.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);this.setState({x:r.x,y:r.y,scale:r.scale})},focusNode:function(e){var r=t.config.focusAnimationDuration,n=u.findNodeFit(e,this.state.width,this.state.height,t.config.nodeSize),o={x:-(this.state.x-this.state.width/2)/this.state.scale,y:-(this.state.y-this.state.height/2)/this.state.scale},i={x:e.metadata.x,y:e.metadata.y},s=u.findAreaFit(o,i,this.state.width,this.state.height,t.config.nodeSize),a=Math.abs(s.scale-this.state.scale),c=Math.abs(n.scale-s.scale),p=a+c;this.animate?this.animate({x:s.x,y:s.y,scale:s.scale},r*(a/p),"in-quint",function(){this.animate({x:n.x,y:n.y,scale:n.scale},r*(c/p),"out-quint")}.bind(this)):this.setState({x:n.x,y:n.y,scale:n.scale})},edgeStart:function(e){this.refs.graph.edgeStart(e),this.hideContext()},componentDidMount:function(){var e=o.findDOMNode(this.refs.svg);this.props.onNodeSelection&&e.addEventListener("tap",this.unselectAll);var t=new s.Manager(e,{domEvents:!0,inputClass:a.Input,recognizers:[[s.Tap,{}],[s.Press,{time:500}],[s.Pan,{direction:s.DIRECTION_ALL,threshold:5}],[s.Pinch,{}]]});e.addEventListener("panstart",this.onTrackStart),"ontouchstart"in document.documentElement&&t&&(t.on("pinchstart",this.onTransformStart),t.on("pinch",this.onTransform),t.on("pinchend",this.onTransformEnd)),"onwheel"in e?e.addEventListener("wheel",this.onWheel):"onmousewheel"in e&&e.addEventListener("mousewheel",this.onWheel),e.addEventListener("the-graph-tooltip",this.changeTooltip),e.addEventListener("the-graph-tooltip-hide",this.hideTooltip),e.addEventListener("the-graph-edge-start",this.edgeStart),e.addEventListener("contextmenu",this.onShowContext),this.mouseX=Math.floor(this.props.width/2),this.mouseY=Math.floor(this.props.height/2),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),bgCanvas=p(o.findDOMNode(this.refs.canvas)),this.bgContext=p(bgCanvas.getContext("2d")),this.componentDidUpdate(),setTimeout(function(){this.renderGraph()}.bind(this),500)},onShowContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap();var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.showContext({element:this,type:"main",x:t,y:r,graph:this.props.graph,itemKey:"graph",item:this.props.graph})},keyDown:function(e){(e.metaKey||e.ctrlKey)&&(t.metaKeyPressed=!0);var r=e.keyCode,n=l[r];if(n&&this.props.enableHotKeys){var o=this.props.readonly;(!o||o&&d[r])&&n(this)}},keyUp:function(e){t.metaKeyPressed&&(t.metaKeyPressed=!1)},unselectAll:function(e){this.props.onNodeSelection(),this.props.onEdgeSelection()},renderGraph:function(){this.refs.graph.markDirty()},componentDidUpdate:function(e,t){this.renderCanvas(this.bgContext),t&&t.x===this.state.x&&t.y===this.state.y&&t.scale===this.state.scale||this.onPanScale()},renderCanvas:function(e){e.clearRect(0,0,this.state.width,this.state.height);for(var r=this.state.scale,n=t.config.nodeSize*r,o=this.state.x%n,i=this.state.y%n,s=Math.floor(this.state.width/n)+1,a=Math.floor(this.state.height/n)+1,c=Math.floor(this.state.x/n)+(this.state.x<0?1:0),u=Math.floor(this.state.y/n)+(this.state.y<0?1:0);a--;)for(var p=s;p--;){var l=Math.round(p*n+o),d=Math.round(a*n+i);(c-p)%3==0&&(u-a)%3==0?(e.fillStyle="white",e.fillRect(l,d,1,1)):r>.5&&(e.fillStyle="grey",e.fillRect(l,d,1,1))}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:"Hello",graph:this.props.graph,node:this,ports:[],process:[],processKey:null,x:r.x,y:r.y,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:0,deltaY:0,highlightPort:!1})},render:function(){var e=this.state.scale,r="matrix("+e+",0,0,"+e+","+this.state.x+","+this.state.y+")",n=e>t.zbpBig?"big":e>t.zbpNormal?"normal":"small",o=null,i=this.props.getMenuDef||this.defaultGetMenuDef;if(this.state.contextMenu){var s=this.state.contextMenu,a=i(s);a&&Object.keys(a).length&&(o=s.element.getContext(a,s,this.hideContext))}var c=null;if(o){var u={width:this.state.width,height:this.state.height,triggerHideContext:this.hideContext,children:o};c=[t.factories.app.createAppModalBackground(u)],this.menuShown=!0}else this.menuShown=!1;var p={graph:this.props.graph,scale:this.state.scale,app:this,library:this.props.library,nodeIcons:this.props.nodeIcons,onNodeSelection:this.props.onNodeSelection,onEdgeSelection:this.props.onEdgeSelection,enableHotKeys:this.props.enableHotKeys,showContext:this.showContext,allowEdgeStart:!this.props.readonly};p=t.merge(t.config.app.graph,p);var l=t.factories.app.createAppGraph.call(this,p),d=t.merge(t.config.app.svgGroup,{transform:r}),h=t.factories.app.createAppSvgGroup.call(this,d,[l]),f={x:this.state.tooltipX,y:this.state.tooltipY,visible:this.state.tooltipVisible,label:this.state.tooltip};f=t.merge(t.config.app.tooltip,f);var m=t.factories.app.createAppTooltip.call(this,f),g=t.merge(t.config.app.modal,{children:c}),y=[h,m,t.factories.app.createAppModalGroup.call(this,g)],v=t.merge(t.config.app.svg,{width:this.state.width,height:this.state.height}),b=t.factories.app.createAppSvg.call(this,v,y),w=t.merge(t.config.app.canvas,{width:this.state.width,height:this.state.height}),E=[t.factories.app.createAppCanvas.call(this,w),b],x=t.merge(t.config.app.container,{style:{width:this.state.width,height:this.state.height}});return x.className+=" "+n,t.factories.app.createAppContainer.call(this,x,E)}}))}},function(e,t,r){"use strict";
/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2),o=r(49),i=r(440);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(s(227));function a(e,t,r,n,o,i,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}var c=!1,u=null,p=!1,l=null,d={onError:function(e){c=!0,u=e}};function h(e,t,r,n,o,i,s,p,l){c=!1,u=null,a.apply(d,arguments)}var f=null,m=null,g=null;function y(e,t,r){var n=e.type||"unknown-event";e.currentTarget=g(r),function(e,t,r,n,o,i,a,d,f){if(h.apply(this,arguments),c){if(!c)throw Error(s(198));var m=u;c=!1,u=null,p||(p=!0,l=m)}}(n,t,void 0,e),e.currentTarget=null}var v=null,b={};function w(){if(v)for(var e in b){var t=b[e],r=v.indexOf(e);if(!(-1<r))throw Error(s(96,e));if(!x[r]){if(!t.extractEvents)throw Error(s(97,e));for(var n in x[r]=t,r=t.eventTypes){var o=void 0,i=r[n],a=t,c=n;if(S.hasOwnProperty(c))throw Error(s(99,c));S[c]=i;var u=i.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&E(u[o],a,c);o=!0}else i.registrationName?(E(i.registrationName,a,c),o=!0):o=!1;if(!o)throw Error(s(98,n,e))}}}}function E(e,t,r){if(k[e])throw Error(s(100,e));k[e]=t,_[e]=t.eventTypes[r].dependencies}var x=[],S={},k={},_={};function P(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!b.hasOwnProperty(t)||b[t]!==n){if(b[t])throw Error(s(102,t));b[t]=n,r=!0}}r&&w()}var C=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),A=null,T=null,D=null;function O(e){if(e=m(e)){if("function"!=typeof A)throw Error(s(280));var t=e.stateNode;t&&(t=f(t),A(e.stateNode,e.type,t))}}function R(e){T?D?D.push(e):D=[e]:T=e}function N(){if(T){var e=T,t=D;if(D=T=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function I(e,t){return e(t)}function j(e,t,r,n,o){return e(t,r,n,o)}function F(){}var M=I,L=!1,G=!1;function B(){null===T&&null===D||(F(),N())}function U(e,t,r){if(G)return e(t,r);G=!0;try{return M(e,t,r)}finally{G=!1,B()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,$={},H={};function V(e,t,r,n,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){X[e]=new V(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];X[t]=new V(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){X[e]=new V(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){X[e]=new V(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){X[e]=new V(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){X[e]=new V(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){X[e]=new V(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){X[e]=new V(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){X[e]=new V(e,5,!1,e.toLowerCase(),null,!1)}));var J=/[\-:]([a-z])/g;function W(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(J,W);X[t]=new V(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(J,W);X[t]=new V(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(J,W);X[t]=new V(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){X[e]=new V(e,1,!1,e.toLowerCase(),null,!1)})),X.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){X[e]=new V(e,1,!1,e.toLowerCase(),null,!0)}));var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(e,t,r,n){var o=X.hasOwnProperty(t)?X[t]:null;(null!==o?0===o.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!z.call(H,e)||!z.call($,e)&&(q.test(e)?H[e]=!0:($[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,re=Z?Symbol.for("react.fragment"):60107,ne=Z?Symbol.for("react.strict_mode"):60108,oe=Z?Symbol.for("react.profiler"):60114,ie=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ce=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,pe=Z?Symbol.for("react.suspense_list"):60120,le=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,he=Z?Symbol.for("react.block"):60121,fe="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=fe&&e[fe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case re:return"Fragment";case te:return"Portal";case oe:return"Profiler";case ne:return"StrictMode";case ue:return"Suspense";case pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case ie:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case le:return ge(e.type);case he:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,o=e._debugSource,i=ge(e.type);r=null,n&&(r=ge(n.type)),n=i,i="",o?i=" (at "+o.fileName.replace(Q,"")+":"+o.lineNumber+")":r&&(i=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+i}t+=r,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=be(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function xe(e,t){var r=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Se(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=ve(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ke(e,t){null!=(t=t.checked)&&K(e,"checked",t,!1)}function _e(e,t){ke(e,t);var r=ve(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Pe(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Ce(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Ae(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Te(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ve(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:ve(r)}}function Re(e,t){var r=ve(t.value),n=ve(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ie="http://www.w3.org/1999/xhtml",je="http://www.w3.org/2000/svg";function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Le,Ge=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==je||"innerHTML"in e)e.innerHTML=t;else{for((Le=Le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Be(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function Ue(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qe={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionend:Ue("Transition","TransitionEnd")},ze={},$e={};function He(e){if(ze[e])return ze[e];if(!qe[e])return e;var t,r=qe[e];for(t in r)if(r.hasOwnProperty(t)&&t in $e)return ze[e]=r[t];return e}C&&($e=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ve=He("animationend"),Xe=He("animationiteration"),Je=He("animationstart"),We=He("transitionend"),Ye="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ke=new("function"==typeof WeakMap?WeakMap:Map);function Qe(e){var t=Ke.get(e);return void 0===t&&(t=new Map,Ke.set(e,t)),t}function Ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(s(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(n=o.return)){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return tt(o),e;if(i===n)return tt(o),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var it=null;function st(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)y(e,t[n],r[n]);else t&&y(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function at(e){if(null!==e&&(it=nt(it,e)),e=it,it=null,e){if(ot(e,st),it)throw Error(s(95));if(p)throw e=l,p=!1,l=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!C)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var pt=[];function lt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>pt.length&&pt.push(e)}function dt(e,t,r,n){if(pt.length){var o=pt.pop();return o.topLevelType=e,o.eventSystemFlags=n,o.nativeEvent=t,o.targetInst=r,o}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:r,ancestors:[]}}function ht(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=r.tag)&&6!==t||e.ancestors.push(r),r=Pr(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var o=ct(e.nativeEvent);n=e.topLevelType;var i=e.nativeEvent,s=e.eventSystemFlags;0===r&&(s|=64);for(var a=null,c=0;c<x.length;c++){var u=x[c];u&&(u=u.extractEvents(n,t,i,o,s))&&(a=nt(a,u))}at(a)}}function ft(e,t,r){if(!r.has(e)){switch(e){case"scroll":Jt(t,"scroll",!0);break;case"focus":case"blur":Jt(t,"focus",!0),Jt(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":ut(e)&&Jt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ye.indexOf(e)&&Xt(e,t)}r.set(e,null)}}var mt,gt,yt,vt=!1,bt=[],wt=null,Et=null,xt=null,St=new Map,kt=new Map,_t=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,r,n,o){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|r,nativeEvent:o,container:n}}function Tt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Dt(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e=At(t,r,n,o,i),null!==t&&(null!==(t=Cr(t))&&gt(t)),e):(e.eventSystemFlags|=n,e)}function Ot(e){var t=Pr(e.target);if(null!==t){var r=Ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=et(r)))return e.blockedOn=t,void i.unstable_runWithPriority(e.priority,(function(){yt(r)}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var r=Cr(t);return null!==r&&gt(r),e.blockedOn=t,!1}return!0}function Nt(e,t,r){Rt(e)&&r.delete(t)}function It(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Cr(e.blockedOn))&&mt(e);break}var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==wt&&Rt(wt)&&(wt=null),null!==Et&&Rt(Et)&&(Et=null),null!==xt&&Rt(xt)&&(xt=null),St.forEach(Nt),kt.forEach(Nt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,It)))}function Ft(e){function t(t){return jt(t,e)}if(0<bt.length){jt(bt[0],e);for(var r=1;r<bt.length;r++){var n=bt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==wt&&jt(wt,e),null!==Et&&jt(Et,e),null!==xt&&jt(xt,e),St.forEach(t),kt.forEach(t),r=0;r<_t.length;r++)(n=_t[r]).blockedOn===e&&(n.blockedOn=null);for(;0<_t.length&&null===(r=_t[0]).blockedOn;)Ot(r),null===r.blockedOn&&_t.shift()}var Mt={},Lt=new Map,Gt=new Map,Bt=["abort","abort",Ve,"animationEnd",Xe,"animationIteration",Je,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",We,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1],i="on"+(o[0].toUpperCase()+o.slice(1));i={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],eventPriority:t},Gt.set(n,t),Lt.set(n,i),Mt[o]=i}}Ut("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(Bt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zt=0;zt<qt.length;zt++)Gt.set(qt[zt],0);var $t=i.unstable_UserBlockingPriority,Ht=i.unstable_runWithPriority,Vt=!0;function Xt(e,t){Jt(t,e,!1)}function Jt(e,t,r){var n=Gt.get(t);switch(void 0===n?2:n){case 0:n=Wt.bind(null,t,1,e);break;case 1:n=Yt.bind(null,t,1,e);break;default:n=Kt.bind(null,t,1,e)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Wt(e,t,r,n){L||F();var o=Kt,i=L;L=!0;try{j(o,e,t,r,n)}finally{(L=i)||B()}}function Yt(e,t,r,n){Ht($t,Kt.bind(null,e,t,r,n))}function Kt(e,t,r,n){if(Vt)if(0<bt.length&&-1<Pt.indexOf(e))e=At(null,e,t,r,n),bt.push(e);else{var o=Qt(e,t,r,n);if(null===o)Tt(e,n);else if(-1<Pt.indexOf(e))e=At(o,e,t,r,n),bt.push(e);else if(!function(e,t,r,n,o){switch(t){case"focus":return wt=Dt(wt,e,t,r,n,o),!0;case"dragenter":return Et=Dt(Et,e,t,r,n,o),!0;case"mouseover":return xt=Dt(xt,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return St.set(i,Dt(St.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,kt.set(i,Dt(kt.get(i)||null,e,t,r,n,o)),!0}return!1}(o,e,t,r,n)){Tt(e,n),e=dt(e,n,null,t);try{U(ht,e)}finally{lt(e)}}}}function Qt(e,t,r,n){if(null!==(r=Pr(r=ct(n)))){var o=Ze(r);if(null===o)r=null;else{var i=o.tag;if(13===i){if(null!==(r=et(o)))return r;r=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}e=dt(e,n,r,t);try{U(ht,e)}finally{lt(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];function tr(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function rr(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=tr(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(Zt).forEach((function(e){er.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var nr=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function or(e,t){if(t){if(nr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62,""))}}function ir(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sr=Ie;function ar(e,t){var r=Qe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=_[t];for(var n=0;n<t.length;n++)ft(t[n],e,r)}function cr(){}function ur(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var r,n=pr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pr(n)}}function dr(){for(var e=window,t=ur();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=ur((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fr=null,mr=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vr="function"==typeof setTimeout?setTimeout:void 0,br="function"==typeof clearTimeout?clearTimeout:void 0;function wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Er(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var xr=Math.random().toString(36).slice(2),Sr="__reactInternalInstance$"+xr,kr="__reactEventHandlers$"+xr,_r="__reactContainere$"+xr;function Pr(e){var t=e[Sr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_r]||r[Sr]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Er(e);null!==e;){if(r=e[Sr])return r;e=Er(e)}return t}r=(e=r).parentNode}return null}function Cr(e){return!(e=e[Sr]||e[_r])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ar(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Tr(e){return e[kr]||null}function Dr(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Or(e,t){var r=e.stateNode;if(!r)return null;var n=f(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(s(231,t,typeof r));return r}function Rr(e,t,r){(t=Or(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function Nr(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Dr(t);for(t=r.length;0<t--;)Rr(r[t],"captured",e);for(t=0;t<r.length;t++)Rr(r[t],"bubbled",e)}}function Ir(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Or(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=nt(r._dispatchListeners,t),r._dispatchInstances=nt(r._dispatchInstances,e))}function jr(e){e&&e.dispatchConfig.registrationName&&Ir(e._targetInst,null,e)}function Fr(e){ot(e,Nr)}var Mr=null,Lr=null,Gr=null;function Br(){if(Gr)return Gr;var e,t,r=Lr,n=r.length,o="value"in Mr?Mr.value:Mr.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===o[i-t];t++);return Gr=o.slice(e,1<t?1-t:void 0)}function Ur(){return!0}function qr(){return!1}function zr(e,t,r,n){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(r):"target"===o?this.target=n:this[o]=r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Ur:qr,this.isPropagationStopped=qr,this}function $r(e,t,r,n){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}function Hr(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Vr(e){e.eventPool=[],e.getPooled=$r,e.release=Hr}o(zr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){this.isPersistent=Ur},isPersistent:qr,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=qr,this._dispatchInstances=this._dispatchListeners=null}}),zr.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},zr.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var i=new t;return o(i,r.prototype),r.prototype=i,r.prototype.constructor=r,r.Interface=o({},n.Interface,e),r.extend=n.extend,Vr(r),r},Vr(zr);var Xr=zr.extend({data:null}),Jr=zr.extend({data:null}),Wr=[9,13,27,32],Yr=C&&"CompositionEvent"in window,Kr=null;C&&"documentMode"in document&&(Kr=document.documentMode);var Qr=C&&"TextEvent"in window&&!Kr,Zr=C&&(!Yr||Kr&&8<Kr&&11>=Kr),en=String.fromCharCode(32),tn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rn=!1;function nn(e,t){switch(e){case"keyup":return-1!==Wr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function on(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var sn=!1;var an={eventTypes:tn,extractEvents:function(e,t,r,n){var o;if(Yr)e:{switch(e){case"compositionstart":var i=tn.compositionStart;break e;case"compositionend":i=tn.compositionEnd;break e;case"compositionupdate":i=tn.compositionUpdate;break e}i=void 0}else sn?nn(e,r)&&(i=tn.compositionEnd):"keydown"===e&&229===r.keyCode&&(i=tn.compositionStart);return i?(Zr&&"ko"!==r.locale&&(sn||i!==tn.compositionStart?i===tn.compositionEnd&&sn&&(o=Br()):(Lr="value"in(Mr=n)?Mr.value:Mr.textContent,sn=!0)),i=Xr.getPooled(i,t,r,n),o?i.data=o:null!==(o=on(r))&&(i.data=o),Fr(i),o=i):o=null,(e=Qr?function(e,t){switch(e){case"compositionend":return on(t);case"keypress":return 32!==t.which?null:(rn=!0,en);case"textInput":return(e=t.data)===en&&rn?null:e;default:return null}}(e,r):function(e,t){if(sn)return"compositionend"===e||!Yr&&nn(e,t)?(e=Br(),Gr=Lr=Mr=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zr&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=Jr.getPooled(tn.beforeInput,t,r,n)).data=e,Fr(t)):t=null,null===o?t:null===t?o:[o,t]}},cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!cn[e.type]:"textarea"===t}var pn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ln(e,t,r){return(e=zr.getPooled(pn.change,e,t,r)).type="change",R(r),Fr(e),e}var dn=null,hn=null;function fn(e){at(e)}function mn(e){if(Ee(Ar(e)))return e}function gn(e,t){if("change"===e)return t}var yn=!1;function vn(){dn&&(dn.detachEvent("onpropertychange",bn),hn=dn=null)}function bn(e){if("value"===e.propertyName&&mn(hn))if(e=ln(hn,e,ct(e)),L)at(e);else{L=!0;try{I(fn,e)}finally{L=!1,B()}}}function wn(e,t,r){"focus"===e?(vn(),hn=r,(dn=t).attachEvent("onpropertychange",bn)):"blur"===e&&vn()}function En(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mn(hn)}function xn(e,t){if("click"===e)return mn(t)}function Sn(e,t){if("input"===e||"change"===e)return mn(t)}C&&(yn=ut("input")&&(!document.documentMode||9<document.documentMode));var kn={eventTypes:pn,_isInputEventSupported:yn,extractEvents:function(e,t,r,n){var o=t?Ar(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var s=gn;else if(un(o))if(yn)s=Sn;else{s=En;var a=wn}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(s=xn);if(s&&(s=s(e,t)))return ln(s,r,n);a&&a(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&Ce(o,"number",o.value)}},_n=zr.extend({view:null,detail:null}),Pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pn[e])&&!!t[e]}function An(){return Cn}var Tn=0,Dn=0,On=!1,Rn=!1,Nn=_n.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:An,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Tn;return Tn=e.screenX,On?"mousemove"===e.type?e.screenX-t:0:(On=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Dn;return Dn=e.screenY,Rn?"mousemove"===e.type?e.screenY-t:0:(Rn=!0,0)}}),In=Nn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),jn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Fn={eventTypes:jn,extractEvents:function(e,t,r,n,o){var i="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(i&&0==(32&o)&&(r.relatedTarget||r.fromElement)||!s&&!i)return null;(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,s)?(s=t,null!==(t=(t=r.relatedTarget||r.toElement)?Pr(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Nn,c=jn.mouseLeave,u=jn.mouseEnter,p="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=In,c=jn.pointerLeave,u=jn.pointerEnter,p="pointer");if(e=null==s?i:Ar(s),i=null==t?i:Ar(t),(c=a.getPooled(c,s,r,n)).type=p+"leave",c.target=e,c.relatedTarget=i,(r=a.getPooled(u,t,r,n)).type=p+"enter",r.target=i,r.relatedTarget=e,p=t,(n=s)&&p)e:{for(u=p,s=0,e=a=n;e;e=Dr(e))s++;for(e=0,t=u;t;t=Dr(t))e++;for(;0<s-e;)a=Dr(a),s--;for(;0<e-s;)u=Dr(u),e--;for(;s--;){if(a===u||a===u.alternate)break e;a=Dr(a),u=Dr(u)}a=null}else a=null;for(u=a,a=[];n&&n!==u&&(null===(s=n.alternate)||s!==u);)a.push(n),n=Dr(n);for(n=[];p&&p!==u&&(null===(s=p.alternate)||s!==u);)n.push(p),p=Dr(p);for(p=0;p<a.length;p++)Ir(a[p],"bubbled",c);for(p=n.length;0<p--;)Ir(n[p],"captured",r);return 0==(64&o)?[c]:[c,r]}};var Mn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ln=Object.prototype.hasOwnProperty;function Gn(e,t){if(Mn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Ln.call(t,r[n])||!Mn(e[r[n]],t[r[n]]))return!1;return!0}var Bn=C&&"documentMode"in document&&11>=document.documentMode,Un={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},qn=null,zn=null,$n=null,Hn=!1;function Vn(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hn||null==qn||qn!==ur(r)?null:("selectionStart"in(r=qn)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},$n&&Gn($n,r)?null:($n=r,(e=zr.getPooled(Un.select,zn,e,t)).type="select",e.target=qn,Fr(e),e))}var Xn={eventTypes:Un,extractEvents:function(e,t,r,n,o,i){if(!(i=!(o=i||(n.window===n?n.document:9===n.nodeType?n:n.ownerDocument)))){e:{o=Qe(o),i=_.onSelect;for(var s=0;s<i.length;s++)if(!o.has(i[s])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?Ar(t):window,e){case"focus":(un(o)||"true"===o.contentEditable)&&(qn=o,zn=t,$n=null);break;case"blur":$n=zn=qn=null;break;case"mousedown":Hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hn=!1,Vn(r,n);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return Vn(r,n)}return null}},Jn=zr.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Wn=zr.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yn=_n.extend({relatedTarget:null});function Kn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Qn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eo=_n.extend({key:function(e){if(e.key){var t=Qn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:An,charCode:function(e){return"keypress"===e.type?Kn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),to=Nn.extend({dataTransfer:null}),ro=_n.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:An}),no=zr.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),oo=Nn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),io={eventTypes:Mt,extractEvents:function(e,t,r,n){var o=Lt.get(e);if(!o)return null;switch(e){case"keypress":if(0===Kn(r))return null;case"keydown":case"keyup":e=eo;break;case"blur":case"focus":e=Yn;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ro;break;case Ve:case Xe:case Je:e=Jn;break;case We:e=no;break;case"scroll":e=_n;break;case"wheel":e=oo;break;case"copy":case"cut":case"paste":e=Wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=In;break;default:e=zr}return Fr(t=e.getPooled(o,t,r,n)),t}};if(v)throw Error(s(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),f=Tr,m=Cr,g=Ar,P({SimpleEventPlugin:io,EnterLeaveEventPlugin:Fn,ChangeEventPlugin:kn,SelectEventPlugin:Xn,BeforeInputEventPlugin:an});var so=[],ao=-1;function co(e){0>ao||(e.current=so[ao],so[ao]=null,ao--)}function uo(e,t){ao++,so[ao]=e.current,e.current=t}var po={},lo={current:po},ho={current:!1},fo=po;function mo(e,t){var r=e.type.contextTypes;if(!r)return po;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function go(e){return null!=(e=e.childContextTypes)}function yo(){co(ho),co(lo)}function vo(e,t,r){if(lo.current!==po)throw Error(s(168));uo(lo,t),uo(ho,r)}function bo(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(s(108,ge(t)||"Unknown",i));return o({},r,{},n)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||po,fo=lo.current,uo(lo,e),uo(ho,ho.current),!0}function Eo(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=bo(e,t,fo),n.__reactInternalMemoizedMergedChildContext=e,co(ho),co(lo),uo(lo,e)):co(ho),uo(ho,r)}var xo=i.unstable_runWithPriority,So=i.unstable_scheduleCallback,ko=i.unstable_cancelCallback,_o=i.unstable_requestPaint,Po=i.unstable_now,Co=i.unstable_getCurrentPriorityLevel,Ao=i.unstable_ImmediatePriority,To=i.unstable_UserBlockingPriority,Do=i.unstable_NormalPriority,Oo=i.unstable_LowPriority,Ro=i.unstable_IdlePriority,No={},Io=i.unstable_shouldYield,jo=void 0!==_o?_o:function(){},Fo=null,Mo=null,Lo=!1,Go=Po(),Bo=1e4>Go?Po:function(){return Po()-Go};function Uo(){switch(Co()){case Ao:return 99;case To:return 98;case Do:return 97;case Oo:return 96;case Ro:return 95;default:throw Error(s(332))}}function qo(e){switch(e){case 99:return Ao;case 98:return To;case 97:return Do;case 96:return Oo;case 95:return Ro;default:throw Error(s(332))}}function zo(e,t){return e=qo(e),xo(e,t)}function $o(e,t,r){return e=qo(e),So(e,t,r)}function Ho(e){return null===Fo?(Fo=[e],Mo=So(Ao,Xo)):Fo.push(e),No}function Vo(){if(null!==Mo){var e=Mo;Mo=null,ko(e)}Xo()}function Xo(){if(!Lo&&null!==Fo){Lo=!0;var e=0;try{var t=Fo;zo(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Fo=null}catch(t){throw null!==Fo&&(Fo=Fo.slice(e+1)),So(Ao,Vo),t}finally{Lo=!1}}}function Jo(e,t,r){return 1073741821-(1+((1073741821-e+t/10)/(r/=10)|0))*r}function Wo(e,t){if(e&&e.defaultProps)for(var r in t=o({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Yo={current:null},Ko=null,Qo=null,Zo=null;function ei(){Zo=Qo=Ko=null}function ti(e){var t=Yo.current;co(Yo),e.type._context._currentValue=t}function ri(e,t){for(;null!==e;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}e=e.return}}function ni(e,t){Ko=e,Zo=Qo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ds=!0),e.firstContext=null)}function oi(e,t){if(Zo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Zo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qo){if(null===Ko)throw Error(s(308));Qo=t,Ko.dependencies={expirationTime:0,firstContext:t,responders:null}}else Qo=Qo.next=t;return e._currentValue}var ii=!1;function si(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ai(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ci(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ui(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function pi(e,t){var r=e.alternate;null!==r&&ai(r,e),null===(r=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function li(e,t,r,n){var i=e.updateQueue;ii=!1;var s=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==s){var c=s.next;s.next=a.next,a.next=c}s=a,i.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=a))}if(null!==s){c=s.next;var u=i.baseState,p=0,l=null,d=null,h=null;if(null!==c)for(var f=c;;){if((a=f.expirationTime)<n){var m={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===h?(d=h=m,l=u):h=h.next=m,a>p&&(p=a)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),ic(a,f.suspenseConfig);e:{var g=e,y=f;switch(a=t,m=r,y.tag){case 1:if("function"==typeof(g=y.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(a="function"==typeof(g=y.payload)?g.call(m,u,a):g))break e;u=o({},u,a);break e;case 2:ii=!0}}null!==f.callback&&(e.effectTag|=32,null===(a=i.effects)?i.effects=[f]:a.push(f))}if(null===(f=f.next)||f===c){if(null===(a=i.shared.pending))break;f=s.next=a.next,a.next=c,i.baseQueue=s=a,i.shared.pending=null}}null===h?l=u:h.next=d,i.baseState=l,i.baseQueue=h,sc(p),e.expirationTime=p,e.memoizedState=u}}function di(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=o,o=r,"function"!=typeof n)throw Error(s(191,n));n.call(o)}}}var hi=Y.ReactCurrentBatchConfig,fi=(new n.Component).refs;function mi(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:o({},t,r),e.memoizedState=r,0===e.expirationTime&&(e.updateQueue.baseState=r)}var gi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Va(),o=hi.suspense;(o=ci(n=Xa(n,e,o),o)).payload=t,null!=r&&(o.callback=r),ui(e,o),Ja(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Va(),o=hi.suspense;(o=ci(n=Xa(n,e,o),o)).tag=1,o.payload=t,null!=r&&(o.callback=r),ui(e,o),Ja(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Va(),n=hi.suspense;(n=ci(r=Xa(r,e,n),n)).tag=2,null!=t&&(n.callback=t),ui(e,n),Ja(e,r)}};function yi(e,t,r,n,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Gn(r,n)||!Gn(o,i))}function vi(e,t,r){var n=!1,o=po,i=t.contextType;return"object"==typeof i&&null!==i?i=oi(i):(o=go(t)?fo:lo.current,i=(n=null!=(n=t.contextTypes))?mo(e,o):po),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function bi(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function wi(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=fi,si(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=oi(i):(i=go(t)?fo:lo.current,o.context=mo(e,i)),li(e,r,o,n),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(mi(e,t,i,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&gi.enqueueReplaceState(o,o.state,null),li(e,r,o,n),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.effectTag|=4)}var Ei=Array.isArray;function xi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=n.refs;t===fi&&(t=n.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Si(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function ki(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Tc(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function u(e,t,r,n){return null!==t&&t.elementType===r.type?((n=o(t,r.props)).ref=xi(e,t,r),n.return=e,n):((n=Cc(r.type,r.key,r.props,null,e.mode,n)).ref=xi(e,t,r),n.return=e,n)}function p(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Dc(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function l(e,t,r,n,i){return null===t||7!==t.tag?((t=Ac(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Tc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(r=Cc(t.type,t.key,t.props,null,e.mode,r)).ref=xi(e,null,t),r.return=e,r;case te:return(t=Dc(t,e.mode,r)).return=e,t}if(Ei(t)||me(t))return(t=Ac(t,e.mode,r,null)).return=e,t;Si(e,t)}return null}function h(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==o?null:c(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return r.key===o?r.type===re?l(e,t,r.props.children,n,o):u(e,t,r,n):null;case te:return r.key===o?p(e,t,r,n):null}if(Ei(r)||me(r))return null!==o?null:l(e,t,r,n,null);Si(e,r)}return null}function f(e,t,r,n,o){if("string"==typeof n||"number"==typeof n)return c(t,e=e.get(r)||null,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return e=e.get(null===n.key?r:n.key)||null,n.type===re?l(t,e,n.props.children,o,n.key):u(t,e,n,o);case te:return p(t,e=e.get(null===n.key?r:n.key)||null,n,o)}if(Ei(n)||me(n))return l(t,e=e.get(r)||null,n,o,null);Si(t,n)}return null}function m(o,s,a,c){for(var u=null,p=null,l=s,m=s=0,g=null;null!==l&&m<a.length;m++){l.index>m?(g=l,l=null):g=l.sibling;var y=h(o,l,a[m],c);if(null===y){null===l&&(l=g);break}e&&l&&null===y.alternate&&t(o,l),s=i(y,s,m),null===p?u=y:p.sibling=y,p=y,l=g}if(m===a.length)return r(o,l),u;if(null===l){for(;m<a.length;m++)null!==(l=d(o,a[m],c))&&(s=i(l,s,m),null===p?u=l:p.sibling=l,p=l);return u}for(l=n(o,l);m<a.length;m++)null!==(g=f(l,o,m,a[m],c))&&(e&&null!==g.alternate&&l.delete(null===g.key?m:g.key),s=i(g,s,m),null===p?u=g:p.sibling=g,p=g);return e&&l.forEach((function(e){return t(o,e)})),u}function g(o,a,c,u){var p=me(c);if("function"!=typeof p)throw Error(s(150));if(null==(c=p.call(c)))throw Error(s(151));for(var l=p=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(o,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),a=i(b,a,g),null===l?p=b:l.sibling=b,l=b,m=y}if(v.done)return r(o,m),p;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(o,v.value,u))&&(a=i(v,a,g),null===l?p=v:l.sibling=v,l=v);return p}for(m=n(o,m);!v.done;g++,v=c.next())null!==(v=f(m,o,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=i(v,a,g),null===l?p=v:l.sibling=v,l=v);return e&&m.forEach((function(e){return t(o,e)})),p}return function(e,n,i,c){var u="object"==typeof i&&null!==i&&i.type===re&&null===i.key;u&&(i=i.props.children);var p="object"==typeof i&&null!==i;if(p)switch(i.$$typeof){case ee:e:{for(p=i.key,u=n;null!==u;){if(u.key===p){switch(u.tag){case 7:if(i.type===re){r(e,u.sibling),(n=o(u,i.props.children)).return=e,e=n;break e}break;default:if(u.elementType===i.type){r(e,u.sibling),(n=o(u,i.props)).ref=xi(e,u,i),n.return=e,e=n;break e}}r(e,u);break}t(e,u),u=u.sibling}i.type===re?((n=Ac(i.props.children,e.mode,c,i.key)).return=e,e=n):((c=Cc(i.type,i.key,i.props,null,e.mode,c)).ref=xi(e,n,i),c.return=e,e=c)}return a(e);case te:e:{for(u=i.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){r(e,n.sibling),(n=o(n,i.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Dc(i,e.mode,c)).return=e,e=n}return a(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==n&&6===n.tag?(r(e,n.sibling),(n=o(n,i)).return=e,e=n):(r(e,n),(n=Tc(i,e.mode,c)).return=e,e=n),a(e);if(Ei(i))return m(e,n,i,c);if(me(i))return g(e,n,i,c);if(p&&Si(e,i),void 0===i&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return r(e,n)}}var _i=ki(!0),Pi=ki(!1),Ci={},Ai={current:Ci},Ti={current:Ci},Di={current:Ci};function Oi(e){if(e===Ci)throw Error(s(174));return e}function Ri(e,t){switch(uo(Di,t),uo(Ti,e),uo(Ai,Ci),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Me(null,"");break;default:t=Me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}co(Ai),uo(Ai,t)}function Ni(){co(Ai),co(Ti),co(Di)}function Ii(e){Oi(Di.current);var t=Oi(Ai.current),r=Me(t,e.type);t!==r&&(uo(Ti,e),uo(Ai,r))}function ji(e){Ti.current===e&&(co(Ai),co(Ti))}var Fi={current:0};function Mi(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Li(e,t){return{responder:e,props:t}}var Gi=Y.ReactCurrentDispatcher,Bi=Y.ReactCurrentBatchConfig,Ui=0,qi=null,zi=null,$i=null,Hi=!1;function Vi(){throw Error(s(321))}function Xi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mn(e[r],t[r]))return!1;return!0}function Ji(e,t,r,n,o,i){if(Ui=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Gi.current=null===e||null===e.memoizedState?ys:vs,e=r(n,o),t.expirationTime===Ui){i=0;do{if(t.expirationTime=0,!(25>i))throw Error(s(301));i+=1,$i=zi=null,t.updateQueue=null,Gi.current=bs,e=r(n,o)}while(t.expirationTime===Ui)}if(Gi.current=gs,t=null!==zi&&null!==zi.next,Ui=0,$i=zi=qi=null,Hi=!1,t)throw Error(s(300));return e}function Wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$i?qi.memoizedState=$i=e:$i=$i.next=e,$i}function Yi(){if(null===zi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=zi.next;var t=null===$i?qi.memoizedState:$i.next;if(null!==t)$i=t,zi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(zi=e).memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},null===$i?qi.memoizedState=$i=e:$i=$i.next=e}return $i}function Ki(e,t){return"function"==typeof t?t(e):t}function Qi(e){var t=Yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=zi,o=n.baseQueue,i=r.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(null!==o){o=o.next,n=n.baseState;var c=a=i=null,u=o;do{var p=u.expirationTime;if(p<Ui){var l={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(a=c=l,i=n):c=c.next=l,p>qi.expirationTime&&(qi.expirationTime=p,sc(p))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),ic(p,u.suspenseConfig),n=u.eagerReducer===e?u.eagerState:e(n,u.action);u=u.next}while(null!==u&&u!==o);null===c?i=n:c.next=a,Mn(n,t.memoizedState)||(Ds=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function Zi(e){var t=Yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(null!==o){r.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);Mn(i,t.memoizedState)||(Ds=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function es(e){var t=Wi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:e}).dispatch=ms.bind(null,qi,e),[t.memoizedState,e]}function ts(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=qi.updateQueue)?(t={lastEffect:null},qi.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function rs(){return Yi().memoizedState}function ns(e,t,r,n){var o=Wi();qi.effectTag|=e,o.memoizedState=ts(1|t,r,void 0,void 0===n?null:n)}function os(e,t,r,n){var o=Yi();n=void 0===n?null:n;var i=void 0;if(null!==zi){var s=zi.memoizedState;if(i=s.destroy,null!==n&&Xi(n,s.deps))return void ts(t,r,i,n)}qi.effectTag|=e,o.memoizedState=ts(1|t,r,i,n)}function is(e,t){return ns(516,4,e,t)}function ss(e,t){return os(516,4,e,t)}function as(e,t){return os(4,2,e,t)}function cs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function us(e,t,r){return r=null!=r?r.concat([e]):null,os(4,2,cs.bind(null,t,e),r)}function ps(){}function ls(e,t){return Wi().memoizedState=[e,void 0===t?null:t],e}function ds(e,t){var r=Yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Xi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function hs(e,t){var r=Yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Xi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function fs(e,t,r){var n=Uo();zo(98>n?98:n,(function(){e(!0)})),zo(97<n?97:n,(function(){var n=Bi.suspense;Bi.suspense=void 0===t?null:t;try{e(!1),r()}finally{Bi.suspense=n}}))}function ms(e,t,r){var n=Va(),o=hi.suspense;o={expirationTime:n=Xa(n,e,o),suspenseConfig:o,action:r,eagerReducer:null,eagerState:null,next:null};var i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===qi||null!==i&&i===qi)Hi=!0,o.expirationTime=Ui,qi.expirationTime=Ui;else{if(0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,r);if(o.eagerReducer=i,o.eagerState=a,Mn(a,s))return}catch(e){}Ja(e,n)}}var gs={readContext:oi,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useResponder:Vi,useDeferredValue:Vi,useTransition:Vi},ys={readContext:oi,useCallback:ls,useContext:oi,useEffect:is,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,ns(4,2,cs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var r=Wi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Wi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ms.bind(null,qi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Wi().memoizedState=e},useState:es,useDebugValue:ps,useResponder:Li,useDeferredValue:function(e,t){var r=es(e),n=r[0],o=r[1];return is((function(){var r=Bi.suspense;Bi.suspense=void 0===t?null:t;try{o(e)}finally{Bi.suspense=r}}),[e,t]),n},useTransition:function(e){var t=es(!1),r=t[0];return t=t[1],[ls(fs.bind(null,t,e),[t,e]),r]}},vs={readContext:oi,useCallback:ds,useContext:oi,useEffect:ss,useImperativeHandle:us,useLayoutEffect:as,useMemo:hs,useReducer:Qi,useRef:rs,useState:function(){return Qi(Ki)},useDebugValue:ps,useResponder:Li,useDeferredValue:function(e,t){var r=Qi(Ki),n=r[0],o=r[1];return ss((function(){var r=Bi.suspense;Bi.suspense=void 0===t?null:t;try{o(e)}finally{Bi.suspense=r}}),[e,t]),n},useTransition:function(e){var t=Qi(Ki),r=t[0];return t=t[1],[ds(fs.bind(null,t,e),[t,e]),r]}},bs={readContext:oi,useCallback:ds,useContext:oi,useEffect:ss,useImperativeHandle:us,useLayoutEffect:as,useMemo:hs,useReducer:Zi,useRef:rs,useState:function(){return Zi(Ki)},useDebugValue:ps,useResponder:Li,useDeferredValue:function(e,t){var r=Zi(Ki),n=r[0],o=r[1];return ss((function(){var r=Bi.suspense;Bi.suspense=void 0===t?null:t;try{o(e)}finally{Bi.suspense=r}}),[e,t]),n},useTransition:function(e){var t=Zi(Ki),r=t[0];return t=t[1],[ds(fs.bind(null,t,e),[t,e]),r]}},ws=null,Es=null,xs=!1;function Ss(e,t){var r=kc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function ks(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function _s(e){if(xs){var t=Es;if(t){var r=t;if(!ks(e,t)){if(!(t=wr(r.nextSibling))||!ks(e,t))return e.effectTag=-1025&e.effectTag|2,xs=!1,void(ws=e);Ss(ws,r)}ws=e,Es=wr(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,xs=!1,ws=e}}function Ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ws=e}function Cs(e){if(e!==ws)return!1;if(!xs)return Ps(e),xs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yr(t,e.memoizedProps))for(t=Es;t;)Ss(e,t),t=wr(t.nextSibling);if(Ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Es=wr(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Es=null}}else Es=ws?wr(e.stateNode.nextSibling):null;return!0}function As(){Es=ws=null,xs=!1}var Ts=Y.ReactCurrentOwner,Ds=!1;function Os(e,t,r,n){t.child=null===e?Pi(t,null,r,n):_i(t,e.child,r,n)}function Rs(e,t,r,n,o){r=r.render;var i=t.ref;return ni(t,o),n=Ji(e,t,r,n,i,o),null===e||Ds?(t.effectTag|=1,Os(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Js(e,t,o))}function Ns(e,t,r,n,o,i){if(null===e){var s=r.type;return"function"!=typeof s||_c(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Cc(r.type,null,n,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Is(e,t,s,n,o,i))}return s=e.child,o<i&&(o=s.memoizedProps,(r=null!==(r=r.compare)?r:Gn)(o,n)&&e.ref===t.ref)?Js(e,t,i):(t.effectTag|=1,(e=Pc(s,n)).ref=t.ref,e.return=t,t.child=e)}function Is(e,t,r,n,o,i){return null!==e&&Gn(e.memoizedProps,n)&&e.ref===t.ref&&(Ds=!1,o<i)?(t.expirationTime=e.expirationTime,Js(e,t,i)):Fs(e,t,r,n,i)}function js(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Fs(e,t,r,n,o){var i=go(r)?fo:lo.current;return i=mo(t,i),ni(t,o),r=Ji(e,t,r,n,i,o),null===e||Ds?(t.effectTag|=1,Os(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Js(e,t,o))}function Ms(e,t,r,n,o){if(go(r)){var i=!0;wo(t)}else i=!1;if(ni(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vi(t,r,n),wi(t,r,n,o),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=r.contextType;"object"==typeof u&&null!==u?u=oi(u):u=mo(t,u=go(r)?fo:lo.current);var p=r.getDerivedStateFromProps,l="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate;l||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||c!==u)&&bi(t,s,n,u),ii=!1;var d=t.memoizedState;s.state=d,li(t,n,s,o),c=t.memoizedState,a!==n||d!==c||ho.current||ii?("function"==typeof p&&(mi(t,r,p,n),c=t.memoizedState),(a=ii||yi(t,r,a,n,d,c,u))?(l||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),n=!1)}else s=t.stateNode,ai(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:Wo(t.type,a),c=s.context,"object"==typeof(u=r.contextType)&&null!==u?u=oi(u):u=mo(t,u=go(r)?fo:lo.current),(l="function"==typeof(p=r.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||c!==u)&&bi(t,s,n,u),ii=!1,c=t.memoizedState,s.state=c,li(t,n,s,o),d=t.memoizedState,a!==n||c!==d||ho.current||ii?("function"==typeof p&&(mi(t,r,p,n),d=t.memoizedState),(p=ii||yi(t,r,a,n,c,d,u))?(l||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,d,u),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,d,u)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=d),s.props=n,s.state=d,s.context=u,n=p):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),n=!1);return Ls(e,t,r,n,i,o)}function Ls(e,t,r,n,o,i){js(e,t);var s=0!=(64&t.effectTag);if(!n&&!s)return o&&Eo(t,r,!1),Js(e,t,i);n=t.stateNode,Ts.current=t;var a=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&s?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,a,i)):Os(e,t,a,i),t.memoizedState=n.state,o&&Eo(t,r,!0),t.child}function Gs(e){var t=e.stateNode;t.pendingContext?vo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vo(0,t.context,!1),Ri(e,t.containerInfo)}var Bs,Us,qs,zs={dehydrated:null,retryTime:0};function $s(e,t,r){var n,o=t.mode,i=t.pendingProps,s=Fi.current,a=!1;if((n=0!=(64&t.effectTag))||(n=0!=(2&s)&&(null===e||null!==e.memoizedState)),n?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),uo(Fi,1&s),null===e){if(void 0!==i.fallback&&_s(t),a){if(a=i.fallback,(i=Ac(null,o,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(r=Ac(a,o,r,null)).return=t,i.sibling=r,t.memoizedState=zs,t.child=i,r}return o=i.children,t.memoizedState=null,t.child=Pi(t,null,o,r)}if(null!==e.memoizedState){if(o=(e=e.child).sibling,a){if(i=i.fallback,(r=Pc(e,e.pendingProps)).return=t,0==(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(r.child=a;null!==a;)a.return=r,a=a.sibling;return(o=Pc(o,i)).return=t,r.sibling=o,r.childExpirationTime=0,t.memoizedState=zs,t.child=r,o}return r=_i(t,e.child,i.children,r),t.memoizedState=null,t.child=r}if(e=e.child,a){if(a=i.fallback,(i=Ac(null,o,0,null)).return=t,i.child=e,null!==e&&(e.return=i),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(r=Ac(a,o,r,null)).return=t,i.sibling=r,r.effectTag|=2,i.childExpirationTime=0,t.memoizedState=zs,t.child=i,r}return t.memoizedState=null,t.child=_i(t,e,i.children,r)}function Hs(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t),ri(e.return,t)}function Vs(e,t,r,n,o,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailExpiration:0,tailMode:o,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailExpiration=0,s.tailMode=o,s.lastEffect=i)}function Xs(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(Os(e,t,n.children,r),0!=(2&(n=Fi.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,r);else if(19===e.tag)Hs(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(uo(Fi,n),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===Mi(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Vs(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Mi(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Vs(t,!0,r,null,i,t.lastEffect);break;case"together":Vs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Js(e,t,r){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&sc(n),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Pc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Pc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ws(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ys(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return go(t.type)&&yo(),null;case 3:return Ni(),co(ho),co(lo),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||!Cs(t)||(t.effectTag|=4),null;case 5:ji(t),r=Oi(Di.current);var i=t.type;if(null!==e&&null!=t.stateNode)Us(e,t,i,n,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(s(166));return null}if(e=Oi(Ai.current),Cs(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[Sr]=t,n[kr]=a,i){case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(e=0;e<Ye.length;e++)Xt(Ye[e],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"form":Xt("reset",n),Xt("submit",n);break;case"details":Xt("toggle",n);break;case"input":Se(n,a),Xt("invalid",n),ar(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xt("invalid",n),ar(r,"onChange");break;case"textarea":Oe(n,a),Xt("invalid",n),ar(r,"onChange")}for(var c in or(i,a),e=null,a)if(a.hasOwnProperty(c)){var u=a[c];"children"===c?"string"==typeof u?n.textContent!==u&&(e=["children",u]):"number"==typeof u&&n.textContent!==""+u&&(e=["children",""+u]):k.hasOwnProperty(c)&&null!=u&&ar(r,c)}switch(i){case"input":we(n),Pe(n,a,!0);break;case"textarea":we(n),Ne(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=cr)}r=e,t.updateQueue=r,null!==r&&(t.effectTag|=4)}else{switch(c=9===r.nodeType?r:r.ownerDocument,e===sr&&(e=Fe(i)),e===sr?"script"===i?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(i,{is:n.is}):(e=c.createElement(i),"select"===i&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,i),e[Sr]=t,e[kr]=n,Bs(e,t),t.stateNode=e,c=ir(i,n),i){case"iframe":case"object":case"embed":Xt("load",e),u=n;break;case"video":case"audio":for(u=0;u<Ye.length;u++)Xt(Ye[u],e);u=n;break;case"source":Xt("error",e),u=n;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),u=n;break;case"form":Xt("reset",e),Xt("submit",e),u=n;break;case"details":Xt("toggle",e),u=n;break;case"input":Se(e,n),u=xe(e,n),Xt("invalid",e),ar(r,"onChange");break;case"option":u=Ae(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=o({},n,{value:void 0}),Xt("invalid",e),ar(r,"onChange");break;case"textarea":Oe(e,n),u=De(e,n),Xt("invalid",e),ar(r,"onChange");break;default:u=n}or(i,u);var p=u;for(a in p)if(p.hasOwnProperty(a)){var l=p[a];"style"===a?rr(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&Ge(e,l):"children"===a?"string"==typeof l?("textarea"!==i||""!==l)&&Be(e,l):"number"==typeof l&&Be(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(k.hasOwnProperty(a)?null!=l&&ar(r,a):null!=l&&K(e,a,l,c))}switch(i){case"input":we(e),Pe(e,n,!1);break;case"textarea":we(e),Ne(e);break;case"option":null!=n.value&&e.setAttribute("value",""+ve(n.value));break;case"select":e.multiple=!!n.multiple,null!=(r=n.value)?Te(e,!!n.multiple,r,!1):null!=n.defaultValue&&Te(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=cr)}gr(i,n)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)qs(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));r=Oi(Di.current),Oi(Ai.current),Cs(t)?(r=t.stateNode,n=t.memoizedProps,r[Sr]=t,r.nodeValue!==n&&(t.effectTag|=4)):((r=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Sr]=t,t.stateNode=r)}return null;case 13:return co(Fi),n=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=r,t):(r=null!==n,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Cs(t):(n=null!==(i=e.memoizedState),r||null===i||null!==(i=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=i,i.nextEffect=a):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Fi.current)?Ca===wa&&(Ca=Ea):(Ca!==wa&&Ca!==Ea||(Ca=xa),0!==Ra&&null!==ka&&(Nc(ka,Pa),Ic(ka,Ra)))),(r||n)&&(t.effectTag|=4),null);case 4:return Ni(),null;case 10:return ti(t),null;case 17:return go(t.type)&&yo(),null;case 19:if(co(Fi),null===(n=t.memoizedState))return null;if(i=0!=(64&t.effectTag),null===(a=n.rendering)){if(i)Ws(n,!1);else if(Ca!==wa||null!==e&&0!=(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Mi(a))){for(t.effectTag|=64,Ws(n,!1),null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;null!==n;)a=r,(i=n).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(e=i.alternate)?(i.childExpirationTime=0,i.expirationTime=a,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;return uo(Fi,1&Fi.current|2),t.child}a=a.sibling}}else{if(!i)if(null!==(e=Mi(a))){if(t.effectTag|=64,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),Ws(n,!0),null===n.tail&&"hidden"===n.tailMode&&!a.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Bo()-n.renderingStartTime>n.tailExpiration&&1<r&&(t.effectTag|=64,i=!0,Ws(n,!1),t.expirationTime=t.childExpirationTime=r-1);n.isBackwards?(a.sibling=t.child,t.child=a):(null!==(r=n.last)?r.sibling=a:t.child=a,n.last=a)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=Bo()+500),r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Bo(),r.sibling=null,t=Fi.current,uo(Fi,i?1&t|2:1&t),r):null}throw Error(s(156,t.tag))}function Ks(e){switch(e.tag){case 1:go(e.type)&&yo();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ni(),co(ho),co(lo),0!=(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return ji(e),null;case 13:return co(Fi),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return co(Fi),null;case 4:return Ni(),null;case 10:return ti(e),null;default:return null}}function Qs(e,t){return{value:e,source:t,stack:ye(t)}}Bs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Us=function(e,t,r,n,i){var s=e.memoizedProps;if(s!==n){var a,c,u=t.stateNode;switch(Oi(Ai.current),e=null,r){case"input":s=xe(u,s),n=xe(u,n),e=[];break;case"option":s=Ae(u,s),n=Ae(u,n),e=[];break;case"select":s=o({},s,{value:void 0}),n=o({},n,{value:void 0}),e=[];break;case"textarea":s=De(u,s),n=De(u,n),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(u.onclick=cr)}for(a in or(r,n),r=null,s)if(!n.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(c in u=s[a])u.hasOwnProperty(c)&&(r||(r={}),r[c]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(k.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in n){var p=n[a];if(u=null!=s?s[a]:void 0,n.hasOwnProperty(a)&&p!==u&&(null!=p||null!=u))if("style"===a)if(u){for(c in u)!u.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in p)p.hasOwnProperty(c)&&u[c]!==p[c]&&(r||(r={}),r[c]=p[c])}else r||(e||(e=[]),e.push(a,r)),r=p;else"dangerouslySetInnerHTML"===a?(p=p?p.__html:void 0,u=u?u.__html:void 0,null!=p&&u!==p&&(e=e||[]).push(a,p)):"children"===a?u===p||"string"!=typeof p&&"number"!=typeof p||(e=e||[]).push(a,""+p):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(k.hasOwnProperty(a)?(null!=p&&ar(i,a),e||u===p||(e=[])):(e=e||[]).push(a,p))}r&&(e=e||[]).push("style",r),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},qs=function(e,t,r,n){r!==n&&(t.effectTag|=4)};var Zs="function"==typeof WeakSet?WeakSet:Set;function ea(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=ye(r)),null!==r&&ge(r.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ta(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){vc(e,t)}else t.current=null}function ra(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Wo(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function na(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,void 0!==n&&n()}r=r.next}while(r!==t)}}function oa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ia(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:return void oa(3,r);case 1:if(e=r.stateNode,4&r.effectTag)if(null===t)e.componentDidMount();else{var n=r.elementType===r.type?t.memoizedProps:Wo(r.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=r.updateQueue)&&di(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}di(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.effectTag&&gr(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&Ft(r)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function sa(e,t,r){switch("function"==typeof xc&&xc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;zo(97<r?97:r,(function(){var e=n;do{var r=e.destroy;if(void 0!==r){var o=t;try{r()}catch(e){vc(o,e)}}e=e.next}while(e!==n)}))}break;case 1:ta(t),"function"==typeof(r=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){vc(e,t)}}(t,r);break;case 5:ta(t);break;case 4:pa(e,t,r)}}function aa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&aa(t)}function ca(e){return 5===e.tag||3===e.tag||4===e.tag}function ua(e){e:{for(var t=e.return;null!==t;){if(ca(t)){var r=t;break e}t=t.return}throw Error(s(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(s(161))}16&r.effectTag&&(Be(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ca(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}n?function e(t,r,n){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==r.onclick||(r.onclick=cr));else if(4!==o&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t):function e(t,r,n){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t)}function pa(e,t,r){for(var n,o,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:o=!1;break e;case 3:case 4:n=n.containerInfo,o=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var c=e,u=i,p=r,l=u;;)if(sa(c,l,p),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(c=n,u=i.stateNode,8===c.nodeType?c.parentNode.removeChild(u):c.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(sa(e,i,r),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function la(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void na(3,t);case 1:return;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps,o=null!==e?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(r[kr]=n,"input"===e&&"radio"===n.type&&null!=n.name&&ke(r,n),ir(e,o),t=ir(e,n),o=0;o<i.length;o+=2){var a=i[o],c=i[o+1];"style"===a?rr(r,c):"dangerouslySetInnerHTML"===a?Ge(r,c):"children"===a?Be(r,c):K(r,a,c,t)}switch(e){case"input":_e(r,n);break;case"textarea":Re(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?Te(r,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?Te(r,!!n.multiple,n.defaultValue,!0):Te(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 12:return;case 13:if(r=t,null===t.memoizedState?n=!1:(n=!0,r=t.child,Ia=Bo()),null!==r)e:for(e=r;;){if(5===e.tag)i=e.stateNode,n?"function"==typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none":(i=e.stateNode,o=null!=(o=e.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,i.style.display=tr("display",o));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void da(t);case 19:return void da(t);case 17:return}throw Error(s(163))}function da(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zs),t.forEach((function(t){var n=wc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}var ha="function"==typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=ci(r,null)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Fa||(Fa=!0,Ma=n),ea(e,t)},r}function ma(e,t,r){(r=ci(r,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return ea(e,t),n(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===La?La=new Set([this]):La.add(this),ea(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var ga,ya=Math.ceil,va=Y.ReactCurrentDispatcher,ba=Y.ReactCurrentOwner,wa=0,Ea=3,xa=4,Sa=0,ka=null,_a=null,Pa=0,Ca=wa,Aa=null,Ta=1073741823,Da=1073741823,Oa=null,Ra=0,Na=!1,Ia=0,ja=null,Fa=!1,Ma=null,La=null,Ga=!1,Ba=null,Ua=90,qa=null,za=0,$a=null,Ha=0;function Va(){return 0!=(48&Sa)?1073741821-(Bo()/10|0):0!==Ha?Ha:Ha=1073741821-(Bo()/10|0)}function Xa(e,t,r){if(0==(2&(t=t.mode)))return 1073741823;var n=Uo();if(0==(4&t))return 99===n?1073741823:1073741822;if(0!=(16&Sa))return Pa;if(null!==r)e=Jo(e,0|r.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Jo(e,150,100);break;case 97:case 96:e=Jo(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==ka&&e===Pa&&--e,e}function Ja(e,t){if(50<za)throw za=0,$a=null,Error(s(185));if(null!==(e=Wa(e,t))){var r=Uo();1073741823===t?0!=(8&Sa)&&0==(48&Sa)?Za(e):(Ka(e),0===Sa&&Vo()):Ka(e),0==(4&Sa)||98!==r&&99!==r||(null===qa?qa=new Map([[e,t]]):(void 0===(r=qa.get(e))||r>t)&&qa.set(e,t))}}function Wa(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,o=null;if(null===n&&3===e.tag)o=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){o=n.stateNode;break}n=n.return}return null!==o&&(ka===o&&(sc(t),Ca===xa&&Nc(o,Pa)),Ic(o,t)),o}function Ya(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Rc(e,t=e.firstPendingTime))return t;var r=e.lastPingedTime;return 2>=(e=r>(e=e.nextKnownPendingLevel)?r:e)&&t!==e?0:e}function Ka(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ho(Za.bind(null,e));else{var t=Ya(e),r=e.callbackNode;if(0===t)null!==r&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Va();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==r){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=n)return;r!==No&&ko(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?Ho(Za.bind(null,e)):$o(n,Qa.bind(null,e),{timeout:10*(1073741821-t)-Bo()}),e.callbackNode=t}}}function Qa(e,t){if(Ha=0,t)return jc(e,t=Va()),Ka(e),null;var r=Ya(e);if(0!==r){if(t=e.callbackNode,0!=(48&Sa))throw Error(s(327));if(mc(),e===ka&&r===Pa||rc(e,r),null!==_a){var n=Sa;Sa|=16;for(var o=oc();;)try{cc();break}catch(t){nc(e,t)}if(ei(),Sa=n,va.current=o,1===Ca)throw t=Aa,rc(e,r),Nc(e,r),Ka(e),t;if(null===_a)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=Ca,ka=null,n){case wa:case 1:throw Error(s(345));case 2:jc(e,2<r?2:r);break;case Ea:if(Nc(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=lc(o)),1073741823===Ta&&10<(o=Ia+500-Bo())){if(Na){var i=e.lastPingedTime;if(0===i||i>=r){e.lastPingedTime=r,rc(e,r);break}}if(0!==(i=Ya(e))&&i!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=vr(dc.bind(null,e),o);break}dc(e);break;case xa:if(Nc(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=lc(o)),Na&&(0===(o=e.lastPingedTime)||o>=r)){e.lastPingedTime=r,rc(e,r);break}if(0!==(o=Ya(e))&&o!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}if(1073741823!==Da?n=10*(1073741821-Da)-Bo():1073741823===Ta?n=0:(n=10*(1073741821-Ta)-5e3,0>(n=(o=Bo())-n)&&(n=0),(r=10*(1073741821-r)-o)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ya(n/1960))-n)&&(n=r)),10<n){e.timeoutHandle=vr(dc.bind(null,e),n);break}dc(e);break;case 5:if(1073741823!==Ta&&null!==Oa){i=Ta;var a=Oa;if(0>=(n=0|a.busyMinDurationMs)?n=0:(o=0|a.busyDelayMs,n=(i=Bo()-(10*(1073741821-i)-(0|a.timeoutMs||5e3)))<=o?0:o+n-i),10<n){Nc(e,r),e.timeoutHandle=vr(dc.bind(null,e),n);break}}dc(e);break;default:throw Error(s(329))}if(Ka(e),e.callbackNode===t)return Qa.bind(null,e)}}return null}function Za(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Sa))throw Error(s(327));if(mc(),e===ka&&t===Pa||rc(e,t),null!==_a){var r=Sa;Sa|=16;for(var n=oc();;)try{ac();break}catch(t){nc(e,t)}if(ei(),Sa=r,va.current=n,1===Ca)throw r=Aa,rc(e,t),Nc(e,t),Ka(e),r;if(null!==_a)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,ka=null,dc(e),Ka(e)}return null}function ec(e,t){var r=Sa;Sa|=1;try{return e(t)}finally{0===(Sa=r)&&Vo()}}function tc(e,t){var r=Sa;Sa&=-2,Sa|=8;try{return e(t)}finally{0===(Sa=r)&&Vo()}}function rc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,br(r)),null!==_a)for(r=_a.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&yo();break;case 3:Ni(),co(ho),co(lo);break;case 5:ji(n);break;case 4:Ni();break;case 13:case 19:co(Fi);break;case 10:ti(n)}r=r.return}ka=e,_a=Pc(e.current,null),Pa=t,Ca=wa,Aa=null,Da=Ta=1073741823,Oa=null,Ra=0,Na=!1}function nc(e,t){for(;;){try{if(ei(),Gi.current=gs,Hi)for(var r=qi.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}if(Ui=0,$i=zi=qi=null,Hi=!1,null===_a||null===_a.return)return Ca=1,Aa=t,_a=null;e:{var o=e,i=_a.return,s=_a,a=t;if(t=Pa,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var c=a;if(0==(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var p=0!=(1&Fi.current),l=i;do{var d;if(d=13===l.tag){var h=l.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var f=l.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!p)}}if(d){var m=l.updateQueue;if(null===m){var g=new Set;g.add(c),l.updateQueue=g}else m.add(c);if(0==(2&l.mode)){if(l.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ci(1073741823,null);y.tag=2,ui(s,y)}s.expirationTime=1073741823;break e}a=void 0,s=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new ha,a=new Set,v.set(c,a)):void 0===(a=v.get(c))&&(a=new Set,v.set(c,a)),!a.has(s)){a.add(s);var b=bc.bind(null,o,c,s);c.then(b,b)}l.effectTag|=4096,l.expirationTime=t;break e}l=l.return}while(null!==l);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(s))}5!==Ca&&(Ca=2),a=Qs(a,s),l=i;do{switch(l.tag){case 3:c=a,l.effectTag|=4096,l.expirationTime=t,pi(l,fa(l,c,t));break e;case 1:c=a;var w=l.type,E=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof w.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===La||!La.has(E)))){l.effectTag|=4096,l.expirationTime=t,pi(l,ma(l,c,t));break e}}l=l.return}while(null!==l)}_a=pc(_a)}catch(e){t=e;continue}break}}function oc(){var e=va.current;return va.current=gs,null===e?gs:e}function ic(e,t){e<Ta&&2<e&&(Ta=e),null!==t&&e<Da&&2<e&&(Da=e,Oa=t)}function sc(e){e>Ra&&(Ra=e)}function ac(){for(;null!==_a;)_a=uc(_a)}function cc(){for(;null!==_a&&!Io();)_a=uc(_a)}function uc(e){var t=ga(e.alternate,e,Pa);return e.memoizedProps=e.pendingProps,null===t&&(t=pc(e)),ba.current=null,t}function pc(e){_a=e;do{var t=_a.alternate;if(e=_a.return,0==(2048&_a.effectTag)){if(t=Ys(t,_a,Pa),1===Pa||1!==_a.childExpirationTime){for(var r=0,n=_a.child;null!==n;){var o=n.expirationTime,i=n.childExpirationTime;o>r&&(r=o),i>r&&(r=i),n=n.sibling}_a.childExpirationTime=r}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=_a.firstEffect),null!==_a.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=_a.firstEffect),e.lastEffect=_a.lastEffect),1<_a.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=_a:e.firstEffect=_a,e.lastEffect=_a))}else{if(null!==(t=Ks(_a)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=_a.sibling))return t;_a=e}while(null!==_a);return Ca===wa&&(Ca=5),null}function lc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function dc(e){var t=Uo();return zo(99,hc.bind(null,e,t)),null}function hc(e,t){do{mc()}while(null!==Ba);if(0!=(48&Sa))throw Error(s(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=lc(r);if(e.firstPendingTime=o,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===ka&&(_a=ka=null,Pa=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,o=r.firstEffect):o=r:o=r.firstEffect,null!==o){var i=Sa;Sa|=32,ba.current=null,fr=Vt;var a=dr();if(hr(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(c=(c=a.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var p=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{c.nodeType,l.nodeType}catch(e){c=null;break e}var d=0,h=-1,f=-1,m=0,g=0,y=a,v=null;t:for(;;){for(var b;y!==c||0!==p&&3!==y.nodeType||(h=d+p),y!==l||0!==u&&3!==y.nodeType||(f=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===a)break t;if(v===c&&++m===p&&(h=d),v===l&&++g===u&&(f=d),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}c=-1===h||-1===f?null:{start:h,end:f}}else c=null}c=c||{start:0,end:0}}else c=null;mr={activeElementDetached:null,focusedElem:a,selectionRange:c},Vt=!1,ja=o;do{try{fc()}catch(e){if(null===ja)throw Error(s(330));vc(ja,e),ja=ja.nextEffect}}while(null!==ja);ja=o;do{try{for(a=e,c=t;null!==ja;){var w=ja.effectTag;if(16&w&&Be(ja.stateNode,""),128&w){var E=ja.alternate;if(null!==E){var x=E.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&w){case 2:ua(ja),ja.effectTag&=-3;break;case 6:ua(ja),ja.effectTag&=-3,la(ja.alternate,ja);break;case 1024:ja.effectTag&=-1025;break;case 1028:ja.effectTag&=-1025,la(ja.alternate,ja);break;case 4:la(ja.alternate,ja);break;case 8:pa(a,p=ja,c),aa(p)}ja=ja.nextEffect}}catch(e){if(null===ja)throw Error(s(330));vc(ja,e),ja=ja.nextEffect}}while(null!==ja);if(x=mr,E=dr(),w=x.focusedElem,c=x.selectionRange,E!==w&&w&&w.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(w.ownerDocument.documentElement,w)){null!==c&&hr(w)&&(E=c.start,void 0===(x=c.end)&&(x=E),"selectionStart"in w?(w.selectionStart=E,w.selectionEnd=Math.min(x,w.value.length)):(x=(E=w.ownerDocument||document)&&E.defaultView||window).getSelection&&(x=x.getSelection(),p=w.textContent.length,a=Math.min(c.start,p),c=void 0===c.end?a:Math.min(c.end,p),!x.extend&&a>c&&(p=c,c=a,a=p),p=lr(w,a),l=lr(w,c),p&&l&&(1!==x.rangeCount||x.anchorNode!==p.node||x.anchorOffset!==p.offset||x.focusNode!==l.node||x.focusOffset!==l.offset)&&((E=E.createRange()).setStart(p.node,p.offset),x.removeAllRanges(),a>c?(x.addRange(E),x.extend(l.node,l.offset)):(E.setEnd(l.node,l.offset),x.addRange(E))))),E=[];for(x=w;x=x.parentNode;)1===x.nodeType&&E.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<E.length;w++)(x=E[w]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Vt=!!fr,mr=fr=null,e.current=r,ja=o;do{try{for(w=e;null!==ja;){var S=ja.effectTag;if(36&S&&ia(w,ja.alternate,ja),128&S){E=void 0;var k=ja.ref;if(null!==k){var _=ja.stateNode;switch(ja.tag){case 5:E=_;break;default:E=_}"function"==typeof k?k(E):k.current=E}}ja=ja.nextEffect}}catch(e){if(null===ja)throw Error(s(330));vc(ja,e),ja=ja.nextEffect}}while(null!==ja);ja=null,jo(),Sa=i}else e.current=r;if(Ga)Ga=!1,Ba=e,Ua=t;else for(ja=o;null!==ja;)t=ja.nextEffect,ja.nextEffect=null,ja=t;if(0===(t=e.firstPendingTime)&&(La=null),1073741823===t?e===$a?za++:(za=0,$a=e):za=0,"function"==typeof Ec&&Ec(r.stateNode,n),Ka(e),Fa)throw Fa=!1,e=Ma,Ma=null,e;return 0!=(8&Sa)||Vo(),null}function fc(){for(;null!==ja;){var e=ja.effectTag;0!=(256&e)&&ra(ja.alternate,ja),0==(512&e)||Ga||(Ga=!0,$o(97,(function(){return mc(),null}))),ja=ja.nextEffect}}function mc(){if(90!==Ua){var e=97<Ua?97:Ua;return Ua=90,zo(e,gc)}}function gc(){if(null===Ba)return!1;var e=Ba;if(Ba=null,0!=(48&Sa))throw Error(s(331));var t=Sa;for(Sa|=32,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!=(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:case 22:na(5,r),oa(5,r)}}catch(t){if(null===e)throw Error(s(330));vc(e,t)}r=e.nextEffect,e.nextEffect=null,e=r}return Sa=t,Vo(),!0}function yc(e,t,r){ui(e,t=fa(e,t=Qs(r,t),1073741823)),null!==(e=Wa(e,1073741823))&&Ka(e)}function vc(e,t){if(3===e.tag)yc(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){yc(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===La||!La.has(n))){ui(r,e=ma(r,e=Qs(t,e),1073741823)),null!==(r=Wa(r,1073741823))&&Ka(r);break}}r=r.return}}function bc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),ka===e&&Pa===r?Ca===xa||Ca===Ea&&1073741823===Ta&&Bo()-Ia<500?rc(e,Pa):Na=!0:Rc(e,r)&&(0!==(t=e.lastPingedTime)&&t<r||(e.lastPingedTime=r,Ka(e)))}function wc(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(t=Xa(t=Va(),e,null)),null!==(e=Wa(e,t))&&Ka(e)}ga=function(e,t,r){var n=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||ho.current)Ds=!0;else{if(n<r){switch(Ds=!1,t.tag){case 3:Gs(t),As();break;case 5:if(Ii(t),4&t.mode&&1!==r&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:go(t.type)&&wo(t);break;case 4:Ri(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,o=t.type._context,uo(Yo,o._currentValue),o._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?$s(e,t,r):(uo(Fi,1&Fi.current),null!==(t=Js(e,t,r))?t.sibling:null);uo(Fi,1&Fi.current);break;case 19:if(n=t.childExpirationTime>=r,0!=(64&e.effectTag)){if(n)return Xs(e,t,r);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),uo(Fi,Fi.current),!n)return null}return Js(e,t,r)}Ds=!1}}else Ds=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=mo(t,lo.current),ni(t,r),o=Ji(null,t,n,e,o,r),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,go(n)){var i=!0;wo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,si(t);var a=n.getDerivedStateFromProps;"function"==typeof a&&mi(t,n,a,e),o.updater=gi,t.stateNode=o,o._reactInternalFiber=t,wi(t,n,e,r),t=Ls(null,t,n,!0,i,r)}else t.tag=0,Os(null,t,o,r),t=t.child;return t;case 16:e:{if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o),1!==o._status)throw o._result;switch(o=o._result,t.type=o,i=t.tag=function(e){if("function"==typeof e)return _c(e)?1:0;if(null!=e){if((e=e.$$typeof)===ce)return 11;if(e===le)return 14}return 2}(o),e=Wo(o,e),i){case 0:t=Fs(null,t,o,e,r);break e;case 1:t=Ms(null,t,o,e,r);break e;case 11:t=Rs(null,t,o,e,r);break e;case 14:t=Ns(null,t,o,Wo(o.type,e),n,r);break e}throw Error(s(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,Fs(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 1:return n=t.type,o=t.pendingProps,Ms(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 3:if(Gs(t),n=t.updateQueue,null===e||null===n)throw Error(s(282));if(n=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ai(e,t),li(t,n,null,r),(n=t.memoizedState.element)===o)As(),t=Js(e,t,r);else{if((o=t.stateNode.hydrate)&&(Es=wr(t.stateNode.containerInfo.firstChild),ws=t,o=xs=!0),o)for(r=Pi(t,null,n,r),t.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else Os(e,t,n,r),As();t=t.child}return t;case 5:return Ii(t),null===e&&_s(t),n=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,yr(n,o)?a=null:null!==i&&yr(n,i)&&(t.effectTag|=16),js(e,t),4&t.mode&&1!==r&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Os(e,t,a,r),t=t.child),t;case 6:return null===e&&_s(t),null;case 13:return $s(e,t,r);case 4:return Ri(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=_i(t,null,n,r):Os(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,Rs(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 7:return Os(e,t,t.pendingProps,r),t.child;case 8:case 12:return Os(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var c=t.type._context;if(uo(Yo,c._currentValue),c._currentValue=i,null!==a)if(c=a.value,0===(i=Mn(c,i)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(c,i):1073741823))){if(a.children===o.children&&!ho.current){t=Js(e,t,r);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){a=c.child;for(var p=u.firstContext;null!==p;){if(p.context===n&&0!=(p.observedBits&i)){1===c.tag&&((p=ci(r,null)).tag=2,ui(c,p)),c.expirationTime<r&&(c.expirationTime=r),null!==(p=c.alternate)&&p.expirationTime<r&&(p.expirationTime=r),ri(c.return,r),u.expirationTime<r&&(u.expirationTime=r);break}p=p.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Os(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=(i=t.pendingProps).children,ni(t,r),n=n(o=oi(o,i.unstable_observedBits)),t.effectTag|=1,Os(e,t,n,r),t.child;case 14:return i=Wo(o=t.type,t.pendingProps),Ns(e,t,o,i=Wo(o.type,i),n,r);case 15:return Is(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Wo(n,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,go(n)?(e=!0,wo(t)):e=!1,ni(t,r),vi(t,n,o),wi(t,n,o,r),Ls(null,t,n,!0,e,r);case 19:return Xs(e,t,r)}throw Error(s(156,t.tag))};var Ec=null,xc=null;function Sc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function kc(e,t,r,n){return new Sc(e,t,r,n)}function _c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var r=e.alternate;return null===r?((r=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cc(e,t,r,n,o,i){var a=2;if(n=e,"function"==typeof e)_c(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case re:return Ac(r.children,o,i,t);case ae:a=8,o|=7;break;case ne:a=8,o|=1;break;case oe:return(e=kc(12,r,t,8|o)).elementType=oe,e.type=oe,e.expirationTime=i,e;case ue:return(e=kc(13,r,t,o)).type=ue,e.elementType=ue,e.expirationTime=i,e;case pe:return(e=kc(19,r,t,o)).elementType=pe,e.expirationTime=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ie:a=10;break e;case se:a=9;break e;case ce:a=11;break e;case le:a=14;break e;case de:a=16,n=null;break e;case he:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=kc(a,r,t,o)).elementType=e,t.type=n,t.expirationTime=i,t}function Ac(e,t,r,n){return(e=kc(7,e,n,t)).expirationTime=r,e}function Tc(e,t,r){return(e=kc(6,e,null,t)).expirationTime=r,e}function Dc(e,t,r){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Rc(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==r&&r>=t&&e<=t}function Nc(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||0===r)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ic(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;0!==r&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function jc(e,t){var r=e.lastExpiredTime;(0===r||r>t)&&(e.lastExpiredTime=t)}function Fc(e,t,r,n){var o=t.current,i=Va(),a=hi.suspense;i=Xa(i,o,a);e:if(r){t:{if(Ze(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(s(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(go(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===r.tag){var u=r.type;if(go(u)){r=bo(r,u,c);break e}}r=c}else r=po;return null===t.context?t.context=r:t.pendingContext=r,(t=ci(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),ui(o,t),Ja(o,i),i}function Mc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Lc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Gc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}function Bc(e,t,r){var n=new Oc(e,t,r=null!=r&&!0===r.hydrate),o=kc(3,null,null,2===t?7:1===t?3:0);n.current=o,o.stateNode=n,si(o),e[_r]=n.current,r&&0!==t&&function(e,t){var r=Qe(t);Pt.forEach((function(e){ft(e,t,r)})),Ct.forEach((function(e){ft(e,t,r)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function Uc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(e,t,r,n,o){var i=r._reactRootContainer;if(i){var s=i._internalRoot;if("function"==typeof o){var a=o;o=function(){var e=Mc(s);a.call(e)}}Fc(t,s,e,o)}else{if(i=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Bc(e,0,t?{hydrate:!0}:void 0)}(r,n),s=i._internalRoot,"function"==typeof o){var c=o;o=function(){var e=Mc(s);c.call(e)}}tc((function(){Fc(t,s,e,o)}))}return Mc(s)}function zc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function $c(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Uc(t))throw Error(s(200));return zc(e,t,null,r)}Bc.prototype.render=function(e){Fc(e,this._internalRoot,null,null)},Bc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Fc(null,e,null,(function(){t[_r]=null}))},mt=function(e){if(13===e.tag){var t=Jo(Va(),150,100);Ja(e,t),Gc(e,t)}},gt=function(e){13===e.tag&&(Ja(e,3),Gc(e,3))},yt=function(e){if(13===e.tag){var t=Va();Ja(e,t=Xa(t,e,null)),Gc(e,t)}},A=function(e,t,r){switch(t){case"input":if(_e(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Tr(n);if(!o)throw Error(s(90));Ee(n),_e(n,o)}}}break;case"textarea":Re(e,r);break;case"select":null!=(t=r.value)&&Te(e,!!r.multiple,t,!1)}},I=ec,j=function(e,t,r,n,o){var i=Sa;Sa|=4;try{return zo(98,e.bind(null,t,r,n,o))}finally{0===(Sa=i)&&Vo()}},F=function(){0==(49&Sa)&&(function(){if(null!==qa){var e=qa;qa=null,e.forEach((function(e,t){jc(t,e),Ka(t)})),Vo()}}(),mc())},M=function(e,t){var r=Sa;Sa|=2;try{return e(t)}finally{0===(Sa=r)&&Vo()}};var Hc,Vc,Xc={Events:[Cr,Ar,Tr,P,S,Fr,function(e){ot(e,jr)},R,N,Kt,at,mc,{current:!1}]};Vc=(Hc={findFiberByHostInstance:Pr,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);Ec=function(e){try{t.onCommitFiberRoot(r,e,void 0,64==(64&e.current.effectTag))}catch(e){}},xc=function(e){try{t.onCommitFiberUnmount(r,e)}catch(e){}}}catch(e){}}(o({},Hc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Vc?Vc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xc,t.createPortal=$c,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Sa))throw Error(s(187));var r=Sa;Sa|=1;try{return zo(99,e.bind(null,t))}finally{Sa=r,Vo()}},t.hydrate=function(e,t,r){if(!Uc(t))throw Error(s(200));return qc(null,e,t,!0,r)},t.render=function(e,t,r){if(!Uc(t))throw Error(s(200));return qc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Uc(e))throw Error(s(40));return!!e._reactRootContainer&&(tc((function(){qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[_r]=null}))})),!0)},t.unstable_batchedUpdates=ec,t.unstable_createPortal=function(e,t){return $c(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Uc(r))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return qc(e,t,r,!1,n)},t.version="16.14.0"},function(e,t,r){"use strict";e.exports=r(441)},function(e,t,r){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,o,i,s,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,p=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(p,0),e}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(p,0))},o=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},s=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,h=window.Date,f=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var v=!1,b=null,w=-1,E=5,x=0;s=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,k=S.port2;S.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();x=e+E;try{b(!0,e)?k.postMessage(null):(v=!1,b=null)}catch(e){throw k.postMessage(null),e}}else v=!1},n=function(e){b=e,v||(v=!0,k.postMessage(null))},o=function(e,r){w=f((function(){e(t.unstable_now())}),r)},i=function(){m(w),w=-1}}function _(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(!(void 0!==o&&0<A(o,t)))break e;e[n]=t,e[r]=o,r=n}}function P(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,s=e[i],a=i+1,c=e[a];if(void 0!==s&&0>A(s,r))void 0!==c&&0>A(c,s)?(e[n]=c,e[a]=r,n=a):(e[n]=s,e[i]=r,n=i);else{if(!(void 0!==c&&0>A(c,r)))break e;e[n]=c,e[a]=r,n=a}}}return t}return null}function A(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var T=[],D=[],O=1,R=null,N=3,I=!1,j=!1,F=!1;function M(e){for(var t=P(D);null!==t;){if(null===t.callback)C(D);else{if(!(t.startTime<=e))break;C(D),t.sortIndex=t.expirationTime,_(T,t)}t=P(D)}}function L(e){if(F=!1,M(e),!j)if(null!==P(T))j=!0,n(G);else{var t=P(D);null!==t&&o(L,t.startTime-e)}}function G(e,r){j=!1,F&&(F=!1,i()),I=!0;var n=N;try{for(M(r),R=P(T);null!==R&&(!(R.expirationTime>r)||e&&!s());){var a=R.callback;if(null!==a){R.callback=null,N=R.priorityLevel;var c=a(R.expirationTime<=r);r=t.unstable_now(),"function"==typeof c?R.callback=c:R===P(T)&&C(T),M(r)}else C(T);R=P(T)}if(null!==R)var u=!0;else{var p=P(D);null!==p&&o(L,p.startTime-r),u=!1}return u}finally{R=null,N=n,I=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){j||I||(j=!0,n(G))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return P(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var r=N;N=t;try{return e()}finally{N=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=N;N=e;try{return t()}finally{N=r}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();if("object"==typeof s&&null!==s){var c=s.delay;c="number"==typeof c&&0<c?a+c:a,s="number"==typeof s.timeout?s.timeout:B(e)}else s=B(e),c=a;return e={id:O++,callback:r,priorityLevel:e,startTime:c,expirationTime:s=c+s,sortIndex:-1},c>a?(e.sortIndex=c,_(D,e),null===P(T)&&e===P(D)&&(F?i():F=!0,o(L,c-a))):(e.sortIndex=s,_(T,e),j||I||(j=!0,n(G))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var r=P(T);return r!==R&&null!==R&&null!==r&&null!==r.callback&&r.startTime<=e&&r.expirationTime<R.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=N;return function(){var r=N;N=t;try{return e.apply(this,arguments)}finally{N=r}}}},function(e,t,r){var n=r(67),o=["","webkit","Moz","MS","ms","o"];var i="ontouchstart"in window,s=void 0!==function(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),s=0;s<o.length;){if((n=(r=o[s])?r+i:t)in e)return n;s++}}(window,"PointerEvent"),a=i&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),c="pointerdown",u="pointermove pointerup pointercancel";function p(){this.evEl=c+" "+u,this.evWin="",n.Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(c="MSPointerDown",u="MSPointerMove MSPointerUp MSPointerCancel"),n.inherit(p,n.PointerEventInput,{}),p.prototype.constructor=function(){};function l(){this.evEl="mousedown mousemove mouseup",this.evWin="",this.pressed=!1,n.Input.apply(this,arguments)}function d(){n.Input.apply(this,arguments);var e=this.handler.bind(this);this.touch=new n.TouchInput(this.manager,e),this.mouse=new l(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}n.inherit(l,n.MouseInput,{}),l.prototype.constructor=function(){},n.inherit(d,n.TouchMouseInput,{}),d.prototype.constructor=function(){};var h=null;h=s?p:a?n.TouchInput:i?d:l,e.exports={Input:h}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(51);e.exports.register=function(e){var t=e.TheGraph;t.config.graph={container:{},groupsGroup:{className:"groups"},edgesGroup:{className:"edges"},iipsGroup:{className:"iips"},nodesGroup:{className:"nodes"},inportsGroup:{className:"ex-inports"},outportsGroup:{className:"ex-outports"},node:{},iip:{},inportEdge:{},inportNode:{},outportEdge:{},outportNode:{},nodeGroup:{},selectionGroup:{key:"selectiongroup",isSelectionGroup:!0,label:"",description:""},edgePreview:{key:"edge-preview",label:""}},t.factories.graph={createGraphContainerGroup:t.factories.createGroup,createGraphGroupsGroup:t.factories.createGroup,createGraphEdgesGroup:t.factories.createGroup,createGraphIIPGroup:t.factories.createGroup,createGraphNodesGroup:t.factories.createGroup,createGraphInportsGroup:t.factories.createGroup,createGraphOutportsGroup:t.factories.createGroup,createGraphNode:function(e){return t.Node(e)},createGraphEdge:function(e){return t.Edge(e)},createGraphIIP:function(e){return t.IIP(e)},createGraphGroup:function(e){return t.Group(e)},createGraphEdgePreview:function(e){return t.Edge(e)}},t.Graph=n.createFactory(i({displayName:"TheGraphGraph",mixins:[],getDefaultProps:function(){return{library:{},graph:null,app:null,offsetX:0,offsetY:0,nodeIcons:{}}},getInitialState:function(){return{displaySelectionGroup:!0,edgePreview:null,edgePreviewX:0,edgePreviewY:0,forceSelection:!1,selectedNodes:[],errorNodes:[],selectedEdges:[],animatedEdges:[],offsetX:this.props.offsetX,offsetY:this.props.offsetY}},componentDidMount:function(){this.mounted=!0,this.subscribeGraph(null,this.props.graph),o.findDOMNode(this).addEventListener("the-graph-node-remove",this.removeNode)},componentWillUnmount:function(){this.mounted=!1},componentWillReceiveProps:function(e){this.subscribeGraph(this.props.graph,e.graph),this.markDirty()},subscribeGraph:function(e,t){e&&(e.removeListener("addEdge",this.resetPortRoute),e.removeListener("changeEdge",this.resetPortRoute),e.removeListener("removeEdge",this.resetPortRoute),e.removeListener("removeInitial",this.resetPortRoute),e.removeListener("changeNode",this.markDirty),e.removeListener("changeInport",this.markDirty),e.removeListener("changeOutport",this.markDirty),e.removeListener("endTransaction",this.markDirty)),t&&(t.on("addEdge",this.resetPortRoute),t.on("changeEdge",this.resetPortRoute),t.on("removeEdge",this.resetPortRoute),t.on("removeInitial",this.resetPortRoute),t.on("changeNode",this.markDirty),t.on("changeInport",this.markDirty),t.on("changeOutport",this.markDirty),t.on("endTransaction",this.markDirty))},edgePreview:null,edgeStart:function(e){var t,r=e.detail.port;if(this.state.edgePreview&&this.state.edgePreview.isIn!==e.detail.isIn){var n=this.state.edgePreview;return e.detail.isIn?n.to=r:n.from=r,this.addEdge(n),void this.cancelPreviewEdge()}(t=e.detail.isIn?{to:r}:{from:r}).isIn=e.detail.isIn,t.metadata={route:e.detail.route},t.type=e.detail.port.type;var i=o.findDOMNode(this.props.app);i.addEventListener("mousemove",this.renderPreviewEdge),i.addEventListener("panmove",this.renderPreviewEdge),i.addEventListener("tap",this.cancelPreviewEdge),this.setState({edgePreview:t})},cancelPreviewEdge:function(e){var t=o.findDOMNode(this.props.app);t.removeEventListener("mousemove",this.renderPreviewEdge),t.removeEventListener("panmove",this.renderPreviewEdge),t.removeEventListener("tap",this.cancelPreviewEdge),this.state.edgePreview&&(this.setState({edgePreview:null}),this.markDirty())},renderPreviewEdge:function(e){e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),t-=this.props.app.state.offsetX||0,r-=this.props.app.state.offsetY||0;var n=this.props.app.state.scale;this.setState({edgePreviewX:(t-this.props.app.state.x)/n,edgePreviewY:(r-this.props.app.state.y)/n}),this.markDirty()},addEdge:function(e){this.props.graph.addEdge(e.from.process,e.from.port,e.to.process,e.to.port,e.metadata)},moveGroup:function(e,r,n){for(var o=this.props.graph,i=e.length,s=0;s<i;s++){var a=o.getNode(e[s]);if(a)if(void 0!==r)o.setNodeMetadata(a.id,{x:a.metadata.x+r,y:a.metadata.y+n});else{var c=t.config.nodeHeight/2;o.setNodeMetadata(a.id,{x:Math.round(a.metadata.x/c)*c,y:Math.round(a.metadata.y/c)*c})}}},getComponentInfo:function(e){return console.error("DEPRECATED: getComponentInfo() will be removed in next version of the-graph. Use 'library' in props instead"),this.props.library[e]},portInfo:{},getPorts:function(e,t,r){var n=e.getNode(t),o=this.portInfo[t];if(!o){var i={},s={};if(r&&this.props.library){var a,c,u,p=this.props.library[r];if(!p)return{inports:i,outports:s};for(a=0,u=p.outports.length;a<u;a++)(c=p.outports[a]).name&&(s[c.name]={label:c.name,type:c.type,x:n.metadata.width,y:n.metadata.height/(u+1)*(a+1)});for(a=0,u=p.inports.length;a<u;a++)(c=p.inports[a]).name&&(i[c.name]={label:c.name,type:c.type,x:0,y:n.metadata.height/(u+1)*(a+1)})}o={inports:i,outports:s},this.portInfo[t]=o}return o},getNodeOutport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.outports[n]||(s.outports[n]={label:n,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.outports[n];return void 0!==o&&(a.route=o),a},getNodeInport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.inports[n]||(s.inports[n]={label:n,x:0,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.inports[n];return void 0!==o&&(a.route=o),a},resetPortRoute:function(e){if(e.from&&e.from.node){var t=this.portInfo[e.from.node];if(t){t.dirty=!0;var r=t.outports[e.from.port];r&&(r.route=null)}}if(e.to&&e.to.node){var n=this.portInfo[e.to.node];if(n){n.dirty=!0;var o=n.inports[e.to.port];o&&(o.route=null)}}},graphOutports:{},getGraphOutport:function(e){var r=this.graphOutports[e];return r||((r={inports:{},outports:{}}).inports[e]={label:e,type:"all",route:5,x:0,y:t.config.nodeHeight/2},this.graphOutports[e]=r),r},graphInports:{},getGraphInport:function(e){var r=this.graphInports[e];return r||((r={inports:{},outports:{}}).outports[e]={label:e,type:"all",route:2,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.graphInports[e]=r),r},setSelectedNodes:function(e){this.setState({selectedNodes:e}),this.markDirty()},setErrorNodes:function(e){this.setState({errorNodes:e}),this.markDirty()},setSelectedEdges:function(e){this.setState({selectedEdges:e}),this.markDirty()},setAnimatedEdges:function(e){this.setState({animatedEdges:e}),this.markDirty()},updateIcon:function(e,t){console.error("DEPRECATED: updateIcon() will be removed in next version of the-graph. Pass nodeIcons through props instead"),this.props.nodeIcons[e]=t,this.markDirty()},dirty:!1,libraryDirty:!1,markDirty:function(e){e&&e.libraryDirty&&(this.libraryDirty=!0),window.requestAnimationFrame(this.triggerRender)},triggerRender:function(e){this.mounted&&(this.dirty||(this.dirty=!0,this.forceUpdate()))},shouldComponentUpdate:function(){return this.dirty},render:function(){this.dirty=!1;var e=this,r=this.props.graph,n=(this.props.library,[]);this.libraryDirty&&(this.libraryDirty=!1,this.portInfo={});var o=null;this.state.edgePreview&&this.state.edgePreview.type&&(o={type:this.state.edgePreview.type,isIn:!this.state.edgePreview.isIn});var i=r.nodes.map((function(i){var s=e.props.library[i.component];if(!s)throw new Error("Component "+i.component+" is not in library");var a=i.id;if(i.metadata||(i.metadata={}),void 0===i.metadata.x&&(i.metadata.x=0),void 0===i.metadata.y&&(i.metadata.y=0),void 0===i.metadata.width&&(i.metadata.width=t.config.nodeWidth),i.metadata.height=t.config.nodeHeight,t.config.autoSizeNode&&s){var c=Math.max(s.inports.length,s.outports.length);if(c>t.config.maxPortCount){var u=c-t.config.maxPortCount;i.metadata.height=t.config.nodeHeight+u*t.config.nodeHeightIncrement}}i.metadata.label&&""!==i.metadata.label||(i.metadata.label=a);var p="cog",l="";e.props.nodeIcons[a]?p=e.props.nodeIcons[a]:s&&s.icon?p=s.icon:s&&s.iconsvg&&(l=s.iconsvg);var d=!0===e.state.selectedNodes[a];d&&n.push(a);var h={key:a,nodeID:a,x:i.metadata.x,y:i.metadata.y,label:i.metadata.label,sublabel:i.metadata.sublabel||i.component,width:i.metadata.width,height:i.metadata.height,app:e.props.app,graphView:e,graph:r,node:i,icon:p,iconsvg:l,ports:e.getPorts(r,a,i.component),onNodeSelection:e.props.onNodeSelection,selected:d,error:!0===e.state.errorNodes[a],showContext:e.props.showContext,highlightPort:o,allowEdgeStart:e.props.allowEdgeStart};return h=t.merge(t.config.graph.node,h),t.factories.graph.createGraphNode.call(this,h)})),a=r.edges.map((function(n){var o=r.getNode(n.from.node),i=r.getNode(n.to.node);if(o&&i){var s=0;n.metadata&&n.metadata.route&&(s=n.metadata.route);var a=e.getNodeOutport(r,n.from.node,n.from.port,s,o.component),c=e.getNodeInport(r,n.to.node,n.to.port,s,i.component),u=o.metadata.label+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+i.metadata.label+"()",p=n.from.node+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+n.to.node+"()",l={key:p,edgeID:p,graph:r,edge:n,app:e.props.app,sX:o.metadata.x+o.metadata.width,sY:o.metadata.y+a.y,tX:i.metadata.x,tY:i.metadata.y+c.y,label:u,route:s,onEdgeSelection:e.props.onEdgeSelection,selected:-1!==e.state.selectedEdges.indexOf(n),animated:-1!==e.state.animatedEdges.indexOf(n),showContext:e.props.showContext};return l=t.merge(t.config.graph.edge,l),t.factories.graph.createGraphEdge.call(this,l)}})),c=r.initializers.map((function(n){var o=r.getNode(n.to.node);if(o){var i=e.getNodeInport(r,n.to.node,n.to.port,0,o.component),s=o.metadata.x,a=o.metadata.y+i.y,c=n.from.data,u=typeof c,p={graph:r,label:!0===c||!1===c||"number"===u||"string"===u?c:u,x:s,y:a};return p=t.merge(t.config.graph.iip,p),t.factories.graph.createGraphIIP.call(this,p)}})),u=Object.keys(r.inports).map((function(n){var o=r.inports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var u=o.metadata;u.x||(u.x=0),u.y||(u.y=0),u.width||(u.width=t.config.nodeWidth),u.height||(u.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var l=p.inports[c];if(l){var d=r.getNode(s);if(d){var h={key:"inport.node."+n,export:o,exportKey:n,x:u.x,y:u.y,width:u.width,height:u.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphInport(n),isIn:!0,icon:u.icon?u.icon:"sign-in",showContext:e.props.showContext};h=t.merge(t.config.graph.inportNode,h);var f={key:"inport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:u.route?u.route:2,isIn:!0,label:"export in "+i.toUpperCase()+" -> "+c.toUpperCase()+" "+d.metadata.label,sX:h.x+t.config.nodeWidth,sY:h.y+t.config.nodeHeight/2,tX:d.metadata.x+l.x,tY:d.metadata.y+l.y,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.inportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,h)}console.warn("Node "+s+" not found for graph inport "+i)}else console.warn("Port "+s+"."+c+" not found for graph inport "+i)}else console.warn("Node "+s+" not found for graph inport "+i)})),p=Object.keys(r.outports).map((function(n){var o=r.outports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var u=o.metadata;u.x||(u.x=0),u.y||(u.y=0),u.width||(u.width=t.config.nodeWidth),u.height||(u.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var l=p.outports[c];if(l){var d=r.getNode(s);if(d){var h={key:"outport.node."+n,export:o,exportKey:n,x:u.x,y:u.y,width:u.width,height:u.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphOutport(n),isIn:!1,icon:u.icon?u.icon:"sign-out",showContext:e.props.showContext};h=t.merge(t.config.graph.outportNode,h);var f={key:"outport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:u.route?u.route:4,isIn:!1,label:d.metadata.label+" "+c.toUpperCase()+" -> "+i.toUpperCase()+" export out",sX:d.metadata.x+l.x,sY:d.metadata.y+l.y,tX:h.x,tY:h.y+t.config.nodeHeight/2,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.outportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,h)}console.warn("Node "+s+" not found for graph outport "+i)}else console.warn("Port "+s+"."+c+" not found for graph outport "+i)}else console.warn("Node "+s+" not found for graph outport "+i)})),l=r.groups.map((function(n){if(!(n.nodes.length<1)){var o=s.findMinMax(r,n.nodes);if(o){var i={key:"group."+n.name,graph:r,item:n,app:e.props.app,minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY,scale:e.props.scale,label:n.name,nodes:n.nodes,description:n.metadata.description,color:n.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};return i=t.merge(t.config.graph.nodeGroup,i),t.factories.graph.createGraphGroup.call(this,i)}}}));if(this.state.displaySelectionGroup&&n.length>=2){var d=s.findMinMax(r,n);if(d){var h={name:"selection",nodes:n,metadata:{color:1}},f={graph:r,app:e.props.app,item:h,minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,scale:e.props.scale,color:h.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};f=t.merge(t.config.graph.selectionGroup,f);var m=t.factories.graph.createGraphGroup.call(this,f);l.push(m)}}var g=this.state.edgePreview;if(g){var y;if(g.from){var v=r.getNode(g.from.process),b=this.getNodeOutport(r,g.from.process,g.from.port);y={sX:v.metadata.x+v.metadata.width,sY:v.metadata.y+b.y,tX:this.state.edgePreviewX,tY:this.state.edgePreviewY,route:g.metadata.route}}else{var w=r.getNode(g.to.process),E=this.getNodeInport(r,g.to.process,g.to.port);y={sX:this.state.edgePreviewX,sY:this.state.edgePreviewY,tX:w.metadata.x,tY:w.metadata.y+E.y,route:g.metadata.route}}y=t.merge(t.config.graph.edgePreview,y);var x=t.factories.graph.createGraphEdgePreview.call(this,y);a.push(x)}var S=t.merge(t.config.graph.groupsGroup,{children:l}),k=t.factories.graph.createGraphGroupsGroup.call(this,S),_=t.merge(t.config.graph.edgesGroup,{children:a}),P=t.factories.graph.createGraphEdgesGroup.call(this,_),C=t.merge(t.config.graph.iipsGroup,{children:c}),A=t.factories.graph.createGraphIIPGroup.call(this,C),T=t.merge(t.config.graph.nodesGroup,{children:i}),D=t.factories.graph.createGraphNodesGroup.call(this,T),O=t.merge(t.config.graph.inportsGroup,{children:u}),R=t.factories.graph.createGraphInportsGroup.call(this,O),N=t.merge(t.config.graph.outportsGroup,{children:p}),I=[k,P,A,D,R,t.factories.graph.createGraphGroupsGroup.call(this,N)],j=this.state.forceSelection||n.length>0?" selection":"",F=t.merge(t.config.graph.container,{className:"graph"+j});return t.factories.graph.createGraphContainerGroup.call(this,F,I)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(52).Tooltip;e.exports.register=function(e){var t=e.TheGraph;function r(e,t,r,n,o){var i=n*e*2/3,s=e/2;return{className:o,height:1.1*e,width:i,rx:s,ry:s,x:t-=i/2,y:r-=e/2}}t.config.node={snap:t.config.nodeSize,container:{},background:{className:"node-bg"},border:{className:"node-border drag",rx:t.config.nodeRadius,ry:t.config.nodeRadius},innerRect:{className:"node-rect drag",x:3,y:3,rx:t.config.nodeRadius-2,ry:t.config.nodeRadius-2},icon:{ref:"icon",className:"icon node-icon drag"},iconsvg:{className:"icon node-icon drag"},inports:{className:"inports"},outports:{className:"outports"},labelBackground:{className:"node-label-bg"},labelRect:{className:"text-bg-rect"},labelText:{className:"node-label"},sublabelBackground:{className:"node-sublabel-bg"},sublabelRect:{className:"text-bg-rect"},sublabelText:{className:"node-sublabel"}},t.factories.node={createNodeGroup:t.factories.createGroup,createNodeBackgroundRect:t.factories.createRect,createNodeBorderRect:t.factories.createRect,createNodeInnerRect:t.factories.createRect,createNodeIconText:t.factories.createText,createNodeIconSVG:t.factories.createImg,createNodeInportsGroup:t.factories.createGroup,createNodeOutportsGroup:t.factories.createGroup,createNodeLabelGroup:t.factories.createGroup,createNodeLabelRect:t.factories.createRect,createNodeLabelText:t.factories.createText,createNodeSublabelGroup:t.factories.createGroup,createNodeSublabelRect:t.factories.createRect,createNodeSublabelText:t.factories.createText,createNodePort:function(e){return t.Port(e)}},t.Node=n.createFactory(i({displayName:"TheGraphNode",mixins:[s],getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("panstart",this.onTrackStart),this.props.onNodeSelection&&e.addEventListener("tap",this.onNodeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onNodeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onNodeSelection(this.props.nodeID,this.props.node,r)},onTrackStart:function(e){if(e.stopPropagation(),!this.props.app.menuShown&&!this.props.app.pinching){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),t.addEventListener("pancancel",this.onTrackEnd),this.props.export?this.props.graph.startTransaction("moveexport"):(!0===this.state.moving&&(this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movenode")),this.props.graph.startTransaction("movenode")),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0})}},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY;this.setState({lastTrackX:t,lastTrackY:r});var i=this.props.app.state.scale,s=Math.round(n/i),a=Math.round(o/i);if(this.props.export){var c={x:this.props.export.metadata.x+s,y:this.props.export.metadata.y+a};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,c):this.props.graph.setOutportMetadata(this.props.exportKey,c)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:this.props.node.metadata.x+s,y:this.props.node.metadata.y+a})},onTrackEnd:function(e){e.stopPropagation(),this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null});var r=o.findDOMNode(this);r.removeEventListener("panmove",this.onTrack),r.removeEventListener("panend",this.onTrackEnd),r.removeEventListener("pancanel",this.onTrackEnd);var n=t.config.node.snap/2;if(this.props.export){var i={x:Math.round(this.props.export.metadata.x/n)*n,y:Math.round(this.props.export.metadata.y/n)*n};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,i):this.props.graph.setOutportMetadata(this.props.exportKey,i)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:Math.round(this.props.node.metadata.x/n)*n,y:Math.round(this.props.node.metadata.y/n)*n});this.props.export?this.props.graph.endTransaction("moveexport"):this.props.graph.endTransaction("movenode")},showContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"node",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:this.props.nodeID,item:this.props.export?this.props.export:this.props.node})},getContext:function(e,r,n){if(this.props.export)return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.exportKey});var o=r.x,i=r.y,s=this.props.app.state.scale,a=this.props.app.state.x,c=this.props.app.state.y,u=(this.props.x+this.props.width/2)*s+a-o,p=(this.props.y+this.props.height/2)*s+c-i,l=this.props.ports,d=this.props.nodeID,h=this.props.highlightPort;return this.props.graphView.state.edgePreview?this.props.graphView.state.edgePreview.isIn?t.NodeMenuPorts({ports:l.outports,triggerHideContext:n,isIn:!1,scale:s,processKey:d,deltaX:u,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:h}):t.NodeMenuPorts({ports:l.inports,triggerHideContext:n,isIn:!0,scale:s,processKey:d,deltaX:u,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:h}):t.NodeMenu({menu:e,options:r,triggerHideContext:n,label:this.props.label,graph:this.props.graph,graphView:this.props.graphView,node:this,icon:this.props.icon,ports:l,process:this.props.node,processKey:d,x:o,y:i,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:u,deltaY:p,highlightPort:h})},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpNormal},shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.icon!==this.props.icon||e.label!==this.props.label||e.sublabel!==this.props.sublabel||e.ports!==this.props.ports||e.selected!==this.props.selected||e.error!==this.props.error||e.highlightPort!==this.props.highlightPort||!0===e.ports.dirty},render:function(){this.props.ports.dirty&&(this.props.ports.dirty=!1);var e=this.props.label,n=this.props.sublabel;n&&n!==e||(n="");var o,i=this.props.x,s=this.props.y,a=this.props.width,c=this.props.height,u=this.props.nodeID,p=this.props.app,l=this.props.graph,d=this.props.node,h=void 0!==this.props.export,f=this.props.showContext,m=this.props.highlightPort,g=this.props.ports.inports;(o=Object.keys(g)).length;var y=o.map(function(e){var r=g[e],n={app:p,graph:l,node:d,key:u+".in."+r.label,label:r.label,processKey:u,isIn:!0,isExport:h,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:u,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),v=this.props.ports.outports;(o=Object.keys(v)).length;var b,w=o.map(function(e){var r=v[e],n={app:p,graph:l,node:d,key:u+".out."+r.label,label:r.label,processKey:u,isIn:!1,isExport:h,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:u,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),E=t.FONT_AWESOME[this.props.icon];if(E||(E=t.FONT_AWESOME.cog),this.props.iconsvg&&""!==this.props.iconsvg){var x=t.merge(t.config.node.iconsvg,{src:this.props.iconsvg,x:t.config.nodeRadius-4,y:t.config.nodeRadius-4,width:this.props.width-10,height:this.props.height-10});b=t.factories.node.createNodeIconSVG.call(this,x)}else{var S=t.merge(t.config.node.icon,{x:this.props.width/2,y:this.props.height/2,children:E});b=t.factories.node.createNodeIconText.call(this,S)}var k=t.merge(t.config.node.background,{width:this.props.width,height:this.props.height+25}),_=t.factories.node.createNodeBackgroundRect.call(this,k),P=t.merge(t.config.node.border,{width:this.props.width,height:this.props.height}),C=t.factories.node.createNodeBorderRect.call(this,P),A=t.merge(t.config.node.innerRect,{width:this.props.width-6,height:this.props.height-6}),T=t.factories.node.createNodeInnerRect.call(this,A),D=t.merge(t.config.node.inports,{children:y}),O=t.factories.node.createNodeInportsGroup.call(this,D),R=t.merge(t.config.node.outports,{children:w}),N=t.factories.node.createNodeOutportsGroup.call(this,R),I=t.merge(t.config.node.labelText,{x:this.props.width/2,y:this.props.height+15,children:e}),j=t.factories.node.createNodeLabelText.call(this,I),F=r(14,this.props.width/2,this.props.height+15,e.length,t.config.node.labelRect.className);F=t.merge(t.config.node.labelRect,F);var M=t.factories.node.createNodeLabelRect.call(this,F),L=t.factories.node.createNodeLabelGroup.call(this,t.config.node.labelBackground,[M,j]),G=t.merge(t.config.node.sublabelText,{x:this.props.width/2,y:this.props.height+30,children:n}),B=t.factories.node.createNodeSublabelText.call(this,G),U=r(9,this.props.width/2,this.props.height+30,n.length,t.config.node.sublabelRect.className);U=t.merge(t.config.node.sublabelRect,U);var q=t.factories.node.createNodeSublabelRect.call(this,U),z=t.factories.node.createNodeSublabelGroup.call(this,t.config.node.sublabelBackground,[q,B]),$=this.props.app.state.scale,H={r:12*this.props.width/$,className:"eventcatcher"},V=t.factories.createCircle(H),X=[_,C,T,b,O,N,L,z];this.state.moving&&X.push(V);var J={className:"node drag"+(this.props.selected?" selected":"")+(this.props.error?" error":""),name:this.props.nodeID,key:this.props.nodeID,title:e,transform:"translate("+i+","+s+")"};return J=t.merge(t.config.node.container,J),t.factories.node.createNodeGroup.call(this,J,X)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8);e.exports.register=function(e){var t=e.TheGraph;function r(e){return t.NodeMenuPorts(e)}t.config.nodeMenu={container:{className:"context-node"},inports:{},outports:{},menu:{x:0,y:0}},t.factories.nodeMenu={createNodeMenuGroup:t.factories.createGroup,createNodeMenuInports:r,createNodeMenuOutports:r,createNodeMenuMenu:function(e){return t.Menu(e)}},t.NodeMenu=n.createFactory(i({displayName:"TheGraphNodeMenu",radius:72,stopPropagation:function(e){e.stopPropagation()},componentDidMount:function(){o.findDOMNode(this).addEventListener("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()}),!1)},render:function(){var e=this.props.node.props.app.state.scale,r=this.props.ports,n=this.props.deltaX,o=this.props.deltaY,i={ports:r.inports,isIn:!0,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};i=t.merge(t.config.nodeMenu.inports,i);var s=t.factories.nodeMenu.createNodeMenuInports.call(this,i),a={ports:r.outports,isIn:!1,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};a=t.merge(t.config.nodeMenu.outports,a);var c=t.factories.nodeMenu.createNodeMenuOutports.call(this,a),u={menu:this.props.menu,options:this.props.options,triggerHideContext:this.props.triggerHideContext,icon:this.props.icon,label:this.props.label};u=t.merge(t.config.nodeMenu.menu,u);var p=[s,c,t.factories.nodeMenu.createNodeMenuMenu.call(this,u)],l={transform:"translate("+this.props.x+","+this.props.y+")",children:p};return l=t.merge(t.config.nodeMenu.container,l),t.factories.nodeMenu.createNodeMenuGroup.call(this,l)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPort={container:{},backgroundRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius,height:t.contextPortSize-1},circle:{r:10},text:{}},t.factories.nodeMenuPort={createNodeMenuPortGroup:t.factories.createGroup,createNodeMenuBackgroundRect:t.factories.createRect,createNodeMenuPortCircle:t.factories.createCircle,createNodeMenuPortText:t.factories.createText},t.NodeMenuPort=n.createFactory(i({displayName:"TheGraphNodeMenuPort",componentDidMount:function(){o.findDOMNode(this).addEventListener("tap",this.edgeStart)},edgeStart:function(e){e.stopPropagation();var t={process:this.props.processKey,port:this.props.label,type:this.props.port.type},r=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:t,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(r)},render:function(){var e=this.props.label.length,r=e>12?8*e+40:120,n=this.props.highlightPort,o={className:"context-port-bg"+(n&&n.isIn===this.props.isIn&&n.type===this.props.port.type?" highlight":""),x:this.props.x+(this.props.isIn?-r:0),y:this.props.y-t.contextPortSize/2,width:r};o=t.merge(t.config.nodeMenuPort.backgroundRect,o);var i=t.factories.nodeMenuPort.createNodeMenuBackgroundRect.call(this,o),s={className:"context-port-hole stroke route"+this.props.route,cx:this.props.x,cy:this.props.y};s=t.merge(t.config.nodeMenuPort.circle,s);var a=t.factories.nodeMenuPort.createNodeMenuPortCircle.call(this,s),c={className:"context-port-label fill route"+this.props.route,x:this.props.x+(this.props.isIn?-20:20),y:this.props.y,children:this.props.label.replace(/(.*)\/(.*)(_.*)\.(.*)/,"$2.$4")};c=t.merge(t.config.nodeMenuPort.text,c);var u=[i,a,t.factories.nodeMenuPort.createNodeMenuPortText.call(this,c)],p=t.merge(t.config.nodeMenuPort.container,{className:"context-port click context-port-"+(this.props.isIn?"in":"out")});return t.factories.nodeMenuPort.createNodeMenuPortGroup.call(this,p,u)}}))}},function(e,t,r){var n=r(2),o=r(8);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPorts={container:{},linesGroup:{className:"context-ports-lines"},portsGroup:{className:"context-ports-ports"},portPath:{className:"context-port-path"},nodeMenuPort:{}},t.factories.menuPorts={createNodeMenuPortsGroup:t.factories.createGroup,createNodeMenuPortsLinesGroup:t.factories.createGroup,createNodeMenuPortsPortsGroup:t.factories.createGroup,createNodeMenuPortsPortPath:t.factories.createPath,createNodeMenuPortsNodeMenuPort:function(e){return t.NodeMenuPort(e)}},t.NodeMenuPorts=n.createFactory(o({displayName:"TheGraphNodeMenuPorts",render:function(){for(var e=[],r=[],n=this.props.scale,o=this.props.ports,i=this.props.deltaX,s=this.props.deltaY,a=Object.keys(this.props.ports),c=a.length*t.contextPortSize,u=a.length,p=0;p<u;p++){var l=a[p],d=o[l],h=this.props.isIn?-100:100,f=0-c/2+p*t.contextPortSize+t.contextPortSize/2,m=(d.x-this.props.nodeWidth/2)*n+i,g=(d.y-this.props.nodeHeight/2)*n+s,y=t.merge(t.config.nodeMenuPorts.portPath,{d:["M",m,g,"L",h,f].join(" ")}),v=t.factories.menuPorts.createNodeMenuPortsPortPath.call(this,y),b={label:l,port:d,processKey:this.props.processKey,isIn:this.props.isIn,x:h,y:f,route:d.route,highlightPort:this.props.highlightPort};b=t.merge(t.config.nodeMenuPorts.nodeMenuPort,b);var w=t.factories.menuPorts.createNodeMenuPortsNodeMenuPort.call(this,b);r.push(v),e.push(w)}var E="";void 0!==this.props.translateX&&(E="translate("+this.props.translateX+","+this.props.translateY+")");var x=t.merge(t.config.nodeMenuPorts.linesGroup,{children:r}),S=t.factories.menuPorts.createNodeMenuPortsLinesGroup.call(this,x),k=t.merge(t.config.nodeMenuPorts.portsGroup,{children:e}),_=[S,t.factories.menuPorts.createNodeMenuPortsGroup.call(this,k)],P={className:"context-ports context-ports-"+(this.props.isIn?"in":"out"),transform:E};return P=t.merge(t.config.nodeMenuPorts.container,P),t.factories.menuPorts.createNodeMenuPortsGroup.call(this,P,_)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(52).Tooltip,a=r(68);e.exports.register=function(e){var t=e.TheGraph;t.config.port={container:{className:"port arrow"},backgroundCircle:{className:"port-circle-bg"},arc:{className:"port-arc"},innerCircle:{ref:"circleSmall"},text:{ref:"label",className:"port-label drag"}},t.factories.port={createPortGroup:t.factories.createGroup,createPortBackgroundCircle:t.factories.createCircle,createPortArc:t.factories.createPath,createPortInnerCircle:t.factories.createCircle,createPortLabelText:t.factories.createText},t.Port=n.createFactory(i({displayName:"TheGraphPort",mixins:[s],componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("tap",this.edgeStart),e.addEventListener("panstart",this.edgeStart),e.addEventListener("panend",this.triggerDropOnTarget),e.addEventListener("the-graph-edge-drop",this.edgeStart),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpBig||this.props.label.length>8},showContext:function(e){if(!(this.props.isExport||e&&e.target===o.findDOMNode(this.refs.label))){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isIn?"nodeInport":"nodeOutport",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.port})}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},edgeStart:function(e){if(!this.props.isExport&&this.props.allowEdgeStart&&(!e||e.target!==o.findDOMNode(this.refs.label))){e.stopPropagation&&e.stopPropagation();var t=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:this.props.port,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(t)}},triggerDropOnTarget:function(e){if(e.relatedTarget){var t=new CustomEvent("the-graph-edge-drop",{detail:null,bubbles:!0});e.relatedTarget.dispatchEvent(t)}},render:function(){var e;this.props.label.length>7&&(e={fontSize:30/(4*this.props.label.length)*6+"px"});var r=4,n=this.props.highlightPort,o=a.inport,i=a.outport;!n||n.isIn!==this.props.isIn||n.type!==this.props.port.type&&"any"!==this.props.port.type||(r=6,o=a.inportBig,i=a.outportBig);var s=t.merge(t.config.port.backgroundCircle,{r:r+1}),c=t.factories.port.createPortBackgroundCircle.call(this,s),u=t.merge(t.config.port.arc,{d:this.props.isIn?o:i}),p=t.factories.port.createPortArc.call(this,u),l={className:"port-circle-small fill route"+this.props.route,r:r-1.5};l=t.merge(t.config.port.innerCircle,l);var d=t.factories.port.createPortInnerCircle.call(this,l),h={x:this.props.isIn?5:-5,style:e,children:this.props.label};h=t.merge(t.config.port.text,h);var f=[c,p,d,t.factories.port.createPortLabelText.call(this,h)],m=t.merge(t.config.port.container,{title:this.props.label,transform:"translate("+this.props.x+","+this.props.y+")"});return t.factories.port.createPortGroup.call(this,m,f)}})),t.Port.defaultProps={allowEdgeStart:!0}}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(52).Tooltip;e.exports.register=function(e){var t=e.TheGraph;t.config.edge={curve:t.config.nodeSize,container:{className:"edge"},backgroundPath:{className:"edge-bg"},foregroundPath:{ref:"route",className:"edge-fg stroke route"},touchPath:{className:"edge-touch",ref:"touch"}},t.factories.edge={createEdgeGroup:t.factories.createGroup,createEdgeBackgroundPath:t.factories.createPath,createEdgeForegroundPath:t.factories.createPath,createEdgeTouchPath:t.factories.createPath,createEdgePathArray:function(e,t,r,n,o,i,s,a){return["M",e,t,"C",r,n,o,i,s,a]},createArrow:t.factories.createPolygon};var r=t.config.edge.curve,a=function(e,t,r,n,o,i,s,a,c){var u=1-e,p=n*e+i*u,l=o*e+s*u;return[((t*e+n*u)*e+p*u)*e+(p*e+(i*e+a*u)*u)*u,((r*e+o*u)*e+l*u)*e+(l*e+(s*e+c*u)*u)*u]};t.Edge=n.createFactory(i({displayName:"TheGraphEdge",mixins:[s],componentWillMount:function(){},componentDidMount:function(){var e=o.findDOMNode(this);this.props.onEdgeSelection&&e.addEventListener("tap",this.onEdgeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onEdgeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onEdgeSelection(this.props.edgeID,this.props.edge,r)},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"edge",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:null,item:this.props.export?this.props.export:this.props.edge})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.label,iconColor:this.props.route})},shouldComponentUpdate:function(e,t){return e.sX!==this.props.sX||e.sY!==this.props.sY||e.tX!==this.props.tX||e.tY!==this.props.tY||e.selected!==this.props.selected||e.animated!==this.props.animated||e.route!==this.props.route},getTooltipTrigger:function(){return o.findDOMNode(this.refs.touch)},shouldShowTooltip:function(){return!0},render:function(){var e,n,o,i,s=this.props.sX,c=this.props.sY,u=this.props.tX,p=this.props.tY;if(u-5<s){var l=(s-u)*r/200;Math.abs(p-c)<t.config.nodeSize/2?(e=s+l,n=c-l,o=u-l,i=p-l):(e=s+l,n=c+(p>c?l:-l),o=u-l,i=p+(p>c?-l:l))}else n=c,o=e=s+(u-s)/2,i=p;var d=t.factories.edge.createEdgePathArray(s,c,e,n,o,i,u,p);d=d.join(" ");var h=t.merge(t.config.edge.backgroundPath,{d:d}),f=t.factories.edge.createEdgeBackgroundPath(h),m=t.config.edge.foregroundPath.className+this.props.route,g=t.merge(t.config.edge.foregroundPath,{d:d,className:m}),y=t.factories.edge.createEdgeForegroundPath(g),v=t.merge(t.config.edge.touchPath,{d:d}),b=t.factories.edge.createEdgeTouchPath(v),w={className:"edge"+(this.props.selected?" selected":"")+(this.props.animated?" animated":""),title:this.props.label};w=t.merge(t.config.edge.container,w);var E=a(.5,s,c,e,n,o,i,u,p),x=function(t){return a(.5+t,s,c,e,n,o,i,u,p)},S=x(.01),k=x(-.01),_=1*(S[1]-k[1])/(S[0]-k[0]),P=E[1]-_*E[0],C=function(e,t,r,n,o,i){var s=e+o/Math.sqrt(1+r*r);return[s,Math.abs(r)===1/0?t+(i||1)*o:r*s+n]},A=12;S[0]>k[0]&&(A*=-1);var T=function(e,t,r,n){var o=-1/r,i=t-o*e;return[C(e,t,o,i,n/2),C(e,t,o,i,n/-2)]}((E=C(E[0],E[1],_,P,-1*A/2))[0],E[1],_,.9*A),D=S[1]>k[1]?-1:1,O=C(E[0],E[1],_,P,A,D);T.push(O);var R=T.map((function(e){return e.join(",")})).join(" "),N=t.factories.edge.createArrow({points:R,className:"arrow-bg"}),I=t.factories.edge.createArrow({points:R,className:"arrow fill route"+this.props.route});return t.factories.edge.createEdgeGroup(w,[f,N,y,b,I])}}))}},function(e,t,r){var n=r(2),o=r(8),i=r(122);e.exports.register=function(e){var t=e.TheGraph;t.config.iip={container:{className:"iip"},path:{className:"iip-path"},text:{className:"iip-info",height:5,halign:"right"}},t.factories.iip={createIIPContainer:t.factories.createGroup,createIIPPath:t.factories.createPath,createIIPText:function(e){return i(e)}};t.IIP=n.createFactory(o({displayName:"TheGraphIIP",shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.label!==this.props.label},render:function(){var e=this.props.x,r=this.props.y,n=["M",e,r,"L",e-10,r].join(" "),o=this.props.label+"";o.length>12&&(o=o.slice(0,9)+"...");var i=t.merge(t.config.iip.path,{d:n}),s=t.factories.iip.createIIPPath.call(this,i),a=t.merge(t.config.iip.text,{x:e-10,y:r,text:o}),c=[s,t.factories.iip.createIIPText.call(this,a)],u=t.merge(t.config.iip.container,{title:this.props.label});return t.factories.iip.createIIPContainer.call(this,u,c)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8);e.exports.register=function(e){var t=e.TheGraph;t.config.group={container:{className:"group"},boxRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius},labelText:{className:"group-label"},descriptionText:{className:"group-description"}},t.factories.group={createGroupGroup:t.factories.createGroup,createGroupBoxRect:t.factories.createRect,createGroupLabelText:t.factories.createText,createGroupDescriptionText:t.factories.createText},t.Group=n.createFactory(i({displayName:"TheGraphGroup",getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){o.findDOMNode(this.refs.events).addEventListener("panstart",this.onTrackStart);var e=o.findDOMNode(this);this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isSelectionGroup?"selection":"group",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.item})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},onTrackStart:function(e){e.stopPropagation(),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0});var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.props.graph.startTransaction("movegroup")},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY,i=Math.round(n/this.props.scale),s=Math.round(o/this.props.scale);this.setState({lastTrackX:t,lastTrackY:r}),this.props.triggerMoveGroup(this.props.item.nodes,i,s)},onTrackEnd:function(e){this.setState({moving:!1}),e.stopPropagation(),this.props.triggerMoveGroup(this.props.item.nodes);var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movegroup")},render:function(){var e=this.props.minX-t.config.nodeWidth/2,r=this.props.minY-t.config.nodeHeight/2,n=this.props.color?this.props.color:0,o=this.props.isSelectionGroup?" selection drag":"",i={x:e,y:r,width:this.props.maxX-e+.5*t.config.nodeWidth,height:this.props.maxY-r+.75*t.config.nodeHeight,className:"group-box color"+n+o};i=t.merge(t.config.group.boxRect,i);var s=t.factories.group.createGroupBoxRect.call(this,i),a={x:e+t.config.nodeRadius,y:r+9,children:this.props.label};a=t.merge(t.config.group.labelText,a);var c=t.factories.group.createGroupLabelText.call(this,a),u={x:e+t.config.nodeRadius,y:r+24,children:this.props.description};u=t.merge(t.config.group.descriptionText,u);var p=t.factories.group.createGroupDescriptionText.call(this,u),l={className:"eventcatcher drag",ref:"events"};if(this.props.isSelectionGroup?(l.x=i.x,l.y=i.y,l.width=i.width,l.height=i.height):(l.x=i.x,l.y=i.y,l.width=24*this.props.label.length*.75,l.height=48),this.state.moving){l.width+=2e3,l.height+=2e3,l.x-=1e3,l.y-=1e3}var d=[s,c,p,t.factories.createRect(l)],h=t.merge(t.config.group.container,{});return t.factories.group.createGroupGroup.call(this,h,d)}}))}},function(e,t,r){var n=r(2),o=r(12),i=r(8),s=r(68),a=r(50),c=r(123),u=r(48),p={radius:72,positions:{n4IconX:0,n4IconY:-52,n4LabelX:0,n4LabelY:-35,s4IconX:0,s4IconY:52,s4LabelX:0,s4LabelY:35,e4IconX:45,e4IconY:-5,e4LabelX:45,e4LabelY:15,w4IconX:-45,w4IconY:-5,w4LabelX:-45,w4LabelY:15},container:{className:"context-menu"},arcPath:{className:"context-arc context-node-info-bg"},sliceIconText:{className:"icon context-icon context-node-info-icon"},sliceLabelText:{className:"context-arc-label"},sliceIconLabelText:{className:"context-arc-icon-label"},circleXPath:{className:"context-circle-x",d:"M -51 -51 L 51 51 M -51 51 L 51 -51"},outlineCircle:{className:"context-circle"},labelText:{className:"context-node-label"},iconRect:{className:"context-node-rect",x:-24,y:-24,width:48,height:48,rx:8,ry:8}},l={createMenuGroup:u.createGroup,createMenuSlice:function(e){var t=e.direction,r=a(p.arcPath,{d:s[t]}),n=[l.createMenuSliceArcPath(r)];if(this.props.menu[t]){var o=this.props.menu[t];if(o.icon){var i={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:c[o.icon]};i=a(p.sliceIconText,i),n.push(l.createMenuSliceIconText.call(this,i))}if(o.label){var u={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:o.label};u=a(p.sliceLabelText,u),n.push(l.createMenuSliceLabelText.call(this,u))}if(o.iconLabel){var d={x:p.positions[t+"LabelX"],y:p.positions[t+"LabelY"],children:o.iconLabel};d=a(p.sliceIconLabelText,d),n.push(l.createMenuSliceIconLabelText.call(this,d))}}var h={ref:t,className:"context-slice context-node-info"+(this.state[t+"tappable"]?" click":""),children:n};return h=a(p.container,h),l.createMenuGroup.call(this,h)},createMenuSliceArcPath:u.createPath,createMenuSliceText:u.createText,createMenuSliceIconText:u.createText,createMenuSliceLabelText:u.createText,createMenuSliceIconLabelText:u.createText,createMenuCircleXPath:u.createPath,createMenuOutlineCircle:u.createCircle,createMenuLabelText:u.createText,createMenuMiddleIconRect:u.createRect,createMenuMiddleIconText:u.createText};var d=n.createFactory(i({displayName:"TheGraphMenu",radius:p.radius,getInitialState:function(){return{n4tappable:this.props.menu.n4&&this.props.menu.n4.action,s4tappable:this.props.menu.s4&&this.props.menu.s4.action,e4tappable:this.props.menu.e4&&this.props.menu.e4.action,w4tappable:this.props.menu.w4&&this.props.menu.w4.action}},onTapN4:function(){var e=this.props.options;this.props.menu.n4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapS4:function(){var e=this.props.options;this.props.menu.s4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapE4:function(){var e=this.props.options;this.props.menu.e4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapW4:function(){var e=this.props.options;this.props.menu.w4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},componentDidMount:function(){this.state.n4tappable&&this.refs.n4.addEventListener("tap",this.onTapN4),this.state.s4tappable&&this.refs.s4.addEventListener("tap",this.onTapS4),this.state.e4tappable&&this.refs.e4.addEventListener("tap",this.onTapE4),this.state.w4tappable&&this.refs.w4.addEventListener("tap",this.onTapW4),o.findDOMNode(this).addEventListener("contextmenu",(function(e){e&&(e.stopPropagation(),e.preventDefault())}),!1)},getPosition:function(){return{x:void 0!==this.props.x?this.props.x:this.props.options.x||0,y:void 0!==this.props.y?this.props.y:this.props.options.y||0}},render:function(){var e=this.props.menu,t=(this.props.options,this.getPosition()),r=a(p.circleXPath,{}),n=a(p.outlineCircle,{r:this.radius}),o=[l.createMenuSlice.call(this,{direction:"n4"}),l.createMenuSlice.call(this,{direction:"s4"}),l.createMenuSlice.call(this,{direction:"e4"}),l.createMenuSlice.call(this,{direction:"w4"}),l.createMenuCircleXPath.call(this,r),l.createMenuOutlineCircle.call(this,n)];if(this.props.label||e.icon){var i={x:0,y:0-this.radius-15,children:this.props.label?this.props.label:e.label};i=a(p.labelText,i),o.push(l.createMenuLabelText.call(this,i))}if(this.props.icon||e.icon){var s=void 0!==this.props.iconColor?this.props.iconColor:e.iconColor,u="";s&&(u=" fill route"+s);var d=a(p.iconRect,{}),h=l.createMenuMiddleIconRect.call(this,d),f={className:"icon context-node-icon"+u,children:c[this.props.icon?this.props.icon:e.icon]};f=a(p.iconText,f);var m=l.createMenuMiddleIconText.call(this,f);o.push(h,m)}var g={transform:"translate("+t.x+","+t.y+")",children:o};return g=a(p.container,g),l.createMenuGroup.call(this,g)}}));e.exports={Menu:d,config:p,factories:l}},function(e,t,r){var n=r(2),o=r(8),i=r(48),s=r(50),a={container:{},rect:{className:"tooltip-bg",x:0,y:-7,rx:3,ry:3,height:16},text:{className:"tooltip-label",ref:"label"}},c={createTooltipGroup:i.createGroup,createTooltipRect:i.createRect,createTooltipText:i.createText},u=n.createFactory(o({displayName:"TheGraphTooltip",render:function(){var e=s(a.rect,{width:6*this.props.label.length}),t=c.createTooltipRect.call(this,e),r=s(a.text,{children:this.props.label}),n=[t,c.createTooltipText.call(this,r)],o={className:"tooltip"+(this.props.visible?"":" hidden"),transform:"translate("+this.props.x+","+this.props.y+")"};return o=s(a.container,o),c.createTooltipGroup.call(this,o,n)}}));e.exports={config:a,factories:c,Tooltip:u}},function(e,t,r){var n=r(2),o=r(8),i=r(67),s=r(124);function a(e,t,r){e.clearRect(0,0,r.width,r.height),e.fillStyle=r.outsideFill;var n=Math.round((r.viewrectangle[0]/r.scale-r.thumbrectangle[0])*r.thumbscale),o=Math.round((r.viewrectangle[1]/r.scale-r.thumbrectangle[1])*r.thumbscale),i=Math.round(r.viewrectangle[2]*r.thumbscale/r.scale),s=Math.round(r.viewrectangle[3]*r.thumbscale/r.scale),a=!1;return n<0&&o<0&&i>r.width-n&&s>r.height-o?{hide:a=!0}:(a=!1,n<0?(i+=n,n=0,t.style.borderLeftColor=r.viewBoxBorder2):(t.style.borderLeftColor=r.viewBoxBorder,e.fillRect(0,0,n,r.height)),o<0?(s+=o,o=0,t.style.borderTopColor=r.viewBoxBorder2):(t.style.borderTopColor=r.viewBoxBorder,e.fillRect(n,0,i,o)),i>r.width-n?(i=r.width-n,t.style.borderRightColor=r.viewBoxBorder2):(t.style.borderRightColor=r.viewBoxBorder,e.fillRect(n+i,0,r.width-(n+i),r.height)),s>r.height-o?(s=r.height-o,t.style.borderBottomColor=r.viewBoxBorder2):(t.style.borderBottomColor=r.viewBoxBorder,e.fillRect(n,o+s,i,r.height-(o+s))),t.style.left=n+"px",t.style.top=o+"px",t.style.width=i+"px",t.style.height=s+"px",{hide:a})}var c=o({propTypes:{},getDefaultProps:function(){return{width:200,height:150,hidden:!1,backgroundColor:"hsla(184, 8%, 75%, 0.9)",outsideFill:"hsla(0, 0%, 0%, 0.4)",nodeSize:60,nodeLineWidth:1,viewrectangle:[0,0,0,0],viewscale:1,viewBoxBorder:"hsla(190, 100%, 80%, 0.4)",viewBoxBorder2:"hsla( 10,  60%, 32%, 0.3)",viewBoxBorderStyle:"dotted",graph:null}},getInitialState:function(){return{thumbscale:1,currentPan:[0,0]}},render:function(){var e=this.props,t={position:"absolute",top:0,left:0},r={height:e.height,width:e.width,overflow:"hidden",cursor:"move",backgroundColor:e.backgroundColor},o={key:"thumb",ref:this._refThumbCanvas,width:e.width,height:e.height,style:t},i={key:"viewbox",ref:this._refViewboxCanvas,width:e.width,height:e.height,style:t},s={key:"viewboxdiv",ref:this._refViewboxElement,style:{position:"absolute",top:0,left:0,width:e.width,height:e.height,borderStyle:"dotted",borderWidth:1}};return n.createElement("div",{key:"nav",style:r,ref:this._refTopElement},[n.createElement("div",s),n.createElement("canvas",i),n.createElement("canvas",o)])},componentDidUpdate:function(){this._updatePan(),this._renderElements()},componentDidMount:function(){this._updatePan(),this._renderElements(),this._setupEvents()},_refThumbCanvas:function(e){this._thumbContext=e.getContext("2d")},_refViewboxCanvas:function(e){this._viewboxContext=e.getContext("2d")},_refViewboxElement:function(e){this._viewboxElement=e},_refTopElement:function(e){this._topElement=e},_renderElements:function(){var e=function(e,t){var r={};for(var n in t)r[n]=t[n];return r.graph=null,r.lineWidth=t.nodeLineWidth,s.render(e,t.graph,r)}(this._thumbContext,this.props);!function(e,t,r,n){var o={};for(var i in n)o[i]=n[i];o.graph=null,o.scale=n.viewscale;var s=r.rectangle[2],c=r.rectangle[3];o.thumbscale=s>c?n.width/s:n.height/c,o.thumbrectangle=r.rectangle,a(e,t,o)}(this._viewboxContext,this._viewboxElement,e,this.props)},_updatePan:function(){this.state.currentPan=[-this.props.viewrectangle[0],-this.props.viewrectangle[1]]},_setupEvents:function(){this.hammer=new i.Manager(this._topElement,{recognizers:[[i.Tap],[i.Pan,{direction:i.DIRECTION_ALL}]]}),this.hammer.on("tap",function(e){this.props.onTap&&this.props.onTap(null,e)}.bind(this)),this.hammer.on("panmove",function(e){if(this.props.onPanTo){var t=this.state.currentPan[0],r=this.state.currentPan[1],n=this.state.thumbscale/this.props.viewscale;t-=e.deltaX/n,r-=e.deltaY/n;var o={x:Math.round(t),y:Math.round(r)};this.state.currentPan[0]=o.x,this.state.currentPan[1]=o.y,this.props.onPanTo(o,e)}}.bind(this))}});e.exports={render:a,calculateStyleFromTheme:function(e){var t={};return"dark"===e?(t.viewBoxBorder="hsla(190, 100%, 80%, 0.4)",t.viewBoxBorder2="hsla( 10,  60%, 32%, 0.3)",t.outsideFill="hsla(0, 0%, 0%, 0.4)",t.backgroundColor="hsla(0, 0%, 0%, 0.9)"):(t.viewBoxBorder="hsla(190, 100%, 20%, 0.8)",t.viewBoxBorder2="hsla( 10,  60%, 80%, 0.8)",t.outsideFill="hsla(0, 0%, 100%, 0.4)",t.backgroundColor="hsla(0, 0%, 100%, 0.9)"),t},Component:c}},function(e,t){e.exports={applyToGraph:function(e,t,r){console.error("DEPRECATED: TheGraph.autolayout.applyAutolayout() will be removed in next version");var n,o,i=t.children.slice();for(n=0,o=i.length;n<o;n++){var s=i[n],a=e.getNode(s.id);if(s.children){var c,u=s.children;for(c in u){var p=u[c];p.id&&e.setNodeMetadata(p.id,{x:Math.round((s.x+p.x)/r.snap)*r.snap,y:Math.round((s.y+p.y)/r.snap)*r.snap})}}if(a)e.setNodeMetadata(s.id,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap});else{var l=s.id.split(":::"),d=l[0],h=l[1];"inport"===d&&e.inports[h]?e.setInportMetadata(h,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap}):"outport"===d&&e.outports[h]&&e.setOutportMetadata(h,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap})}}}}},function(e,t){function r(e){var t=[];return e.nodes.forEach((function(r){var n={name:r.component,icon:"cog",description:"",inports:[],outports:[]};Object.keys(e.inports).forEach((function(t){var o=e.inports[t];if(o.process===r.id){for(var i=0;i<n.inports.length;i++)if(n.inports[i].name===o.port)return;n.inports.push({name:o.port,type:"all"})}})),Object.keys(e.outports).forEach((function(t){var o=e.outports[t];if(o.process===r.id){for(var i=0;i<n.outports.length;i++)if(n.outports[i].name===o.port)return;n.outports.push({name:o.port,type:"all"})}})),e.initializers.forEach((function(e){if(e.to.node===r.id){for(var t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}})),e.edges.forEach((function(e){var t;if(e.from.node===r.id){for(t=0;t<n.outports.length;t++)if(n.outports[t].name===e.from.port)return;n.outports.push({name:e.from.port,type:"all"})}if(e.to.node===r.id){for(t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}})),t.push(n)})),t}e.exports={mergeComponentDefinition:function(e,t){if(e===t)return t;var r,n,o,i,s,a=e.inports,c=t.inports;if(a!==c)for(r=0,o=a.length;r<o;r++){var u=a[r];for(s=!1,n=0,i=c.length;n<i;n++){var p=c[n];u.name===p.name&&(s=!0)}s||c.push(u)}var l=e.outports,d=t.outports;if(l!==d)for(r=0,o=l.length;r<o;r++){var h=l[r];for(s=!1,n=0,i=d.length;n<i;n++){var f=d[n];h.name===f.name&&(s=!0)}s||d.push(h)}return"cog"!==t.icon?e.icon=t.icon:t.icon=e.icon,t.iconsvg=e.iconsvg,t},componentsFromGraph:r,libraryFromGraph:function(e){var t={};return r(e).forEach((function(e){t[e.name]=e})),t}}},function(e,t,r){var n=r(125);e.exports={getDefaultMenus:function(e){console.error("DEPRECATED: TheGraph.menus.getDefaultMenus() will be removed in next version. Specify menus prop manually");var t={icon:"paste",iconLabel:"paste",action:function(e,t,r){var o=n.paste(e);this.selectedNodes=o.nodes,this.selectedEdges=[]}.bind(e)},r={delete:function(e,t,r){e.removeNode(t);for(var n=[],o=0,i=this.selectedNodes.length;o<i;o++){var s=this.selectedNodes[o];s!==r&&n.push(s)}this.selectedNodes=n}.bind(e),copy:function(e,t,r){n.copy(e,[t])}},o={delete:function(e,t,r){e.removeEdge(r.from.node,r.from.port,r.to.node,r.to.port);for(var n=[],o=0,i=this.selectedEdges.length;o<i;o++){var s=this.selectedEdges[o];s!==r&&n.push(s)}this.selectedEdges=n}.bind(e)};return{main:{icon:"sitemap",e4:t},edge:{actions:o,icon:"long-arrow-right",s4:{icon:"trash-o",iconLabel:"delete",action:o.delete}},node:{actions:r,s4:{icon:"trash-o",iconLabel:"delete",action:r.delete},w4:{icon:"copy",iconLabel:"copy",action:r.copy}},nodeInport:{w4:{icon:"sign-in",iconLabel:"export",action:function(e,t,r){var n=r.port;"start"===n&&(n="start1"),"graph"===n&&(n="graph1");for(var o=0;e.inports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x-144,y:i.metadata.y};e.addInport(n,r.process,r.port,s)}}},nodeOutport:{e4:{icon:"sign-out",iconLabel:"export",action:function(e,t,r){for(var n=r.port,o=0;e.outports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x+144,y:i.metadata.y};e.addOutport(n,r.process,r.port,s)}}},graphInport:{icon:"sign-in",iconColor:2,n4:{label:"inport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeInport(t)}}},graphOutport:{icon:"sign-out",iconColor:5,n4:{label:"outport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeOutport(t)}}},group:{icon:"th",s4:{icon:"trash-o",iconLabel:"ungroup",action:function(e,t,r){e.removeGroup(t)}},e4:t},selection:{icon:"th",w4:{icon:"copy",iconLabel:"copy",action:function(e,t,r){n.copy(e,r.nodes)}},e4:t}}}}},function(e,t,r){var n=r(2),o=r(12),i=r(51),s=null;function a(e){var t=getComputedStyle(e);[].forEach((function(r){var n=t.getPropertyValue(r);n&&e.setAttribute(r,n)})),["fill","stroke","stroke-width","opacity","text-anchor","font-size","visibility"].forEach((function(r){var n=t.getPropertyValue(r);n&&(e.style[r]=n)}))}e.exports={graphToDOM:function(e,t){t.library||(t.library=function(e){var t={},r={};function n(e,t){0==e.filter((function(e){return e.name==t})).length&&e.push({name:t,type:"all"})}function o(e,o){Object.keys(e).forEach((function(i){var s=e[i],a=t[r[s.process]];n(o?a.inports:a.outports,s.port)}))}return e.nodes.forEach((function(e){var n=e.component;r[e.id]=n,t[n]={name:n,description:n,icon:null,inports:[],outports:[]}})),e.edges.forEach((function(e){var o=r[e.to.node];if(n(t[o].inports,e.to.port),e.from){var i=r[e.from.node];n(t[i].outports,e.from.port)}})),o(e.inports,!0),o(e.outports,!1),t}(e)),t.theme||(t.theme="the-graph-dark"),t.width||(t.width=1200),t.margin||(t.margin=72);var r=i.findFit(e,t.width,100*t.width,t.margin),a=r.graphWidth/r.graphHeight;t.height||(t.height=t.width/a),console.log("f",a,t.height,JSON.stringify(r));var c={readonly:!0,width:t.width,height:t.height,graph:e,library:t.library},u=document.createElement("div");u.className=t.theme,u.width=c.width,u.height=c.height;var p=document.body;!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(p),p.appendChild(u);var l=n.createElement(s,c);return o.render(l,u),u.children[0]},exportImage:function(e,t,r){t||(t={}),t.format||(t.format="png"),void 0===t.background&&(t.background=!0),void 0===t.quality&&(t.quality=.9);var n=e.getElementsByTagName("svg")[0],o=e.getElementsByTagName("canvas")[0];if("svg"!=n.tagName.toLowerCase())return r(new Error("renderImage input must be SVG, got "+n.tagName));var i=function(e){for(var t=e.getElementsByTagName("*"),r=0;r<t.length;r++)a(t[r]);return e}(n),s=(new XMLSerializer).serializeToString(i);if("svg"==t.format)return r(null,s);var c=window.URL||window.webkitURL||window,u=new Image,p=new Blob([s],{type:"image/svg+xml"}),l=c.createObjectURL(p),d=document.createElement("canvas");d.width=n.getAttribute("width"),d.height=n.getAttribute("height");var h=d.getContext("2d");if(t.background){var f=getComputedStyle(e)["background-color"];h.fillStyle=f,h.fillRect(0,0,d.width,d.height),h.drawImage(o,0,0)}u.onerror=function(e){return r(e)},u.onload=function(){h.drawImage(u,0,0),c.revokeObjectURL(l);var e=d.toDataURL("image/"+t.format,t.quality);return r(null,e)},u.src=l},register:function(e){s=e.TheGraph.App}}},function(e,t,r){e.exports={postMessage:r(69),iframe:r(479),opener:r(480)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,l,d,h,f,m;d=r(0),u=r(5).EventEmitter,m=function(e,t,r){var n;switch(n=d.internalSocket.createSocket(),e.attach(n),t){case"begingroup":n.beginGroup(r);break;case"endgroup":n.endGroup(r);break;case"data":n.send(r)}return e.detach(n)},l=function(e,t,r){var n,o,i;if(e.graph&&(null!=(o=r?e.graph.inports[t]:e.graph.outports[t])?o.process:void 0)&&(n=null!=(i=e.getNode(o.process))?i.component:void 0))return r?n.inPorts[o.port]:n.outPorts[o.port]},h=function(e,t,r,n){var o,i,s,a;return o={id:e,type:"all",description:null!=(s=t.metadata)?s.description:void 0,addressable:!1,required:!1},(i=l(r,e,n))?(o.type=i.getDataType()||"all",("function"==typeof i.getSchema?i.getSchema():void 0)&&(o.schema=i.getSchema()),o.description=(null!=(a=t.metadata)?a.description:void 0)||i.getDescription()||"",o.addressable=i.isAddressable(),o.required=i.isRequired(),o):o},f=function(e,t){var r,n,o,i,s;if(n={graph:e,inPorts:[],outPorts:[]},!(null!=t?t.graph:void 0))return n;for(o in i=t.graph.inports)r=i[o],n.inPorts.push(h(o,r,t,!0));for(o in s=t.graph.outports)r=s[o],n.outPorts.push(h(o,r,t,!1));return n},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.outputSockets={},t.mainGraph=null,t.transport.network.on("addnetwork",(function(e,r){return t.subscribeExportedPorts(r,e,!0),t.subscribeOutPorts(r,e),t.sendPorts(r,e),e.isStarted()&&t.subscribeOutdata(r,e,!0),e.on("start",(function(){return t.subscribeOutdata(r,e,!0)}))})),t.transport.network.on("removenetwork",(function(e,r){return t.subscribeOutdata(r,e,!1),t.subscribeOutPorts(r,e),t.subscribeExportedPorts(r,e.graph,!1),t.sendPorts(r,null)})),t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("runtime",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("runtime",e,t)}},{key:"sendError",value:function(e,t){return this.send("error",new Error(e),t)}},{key:"receive",value:function(e,t,r){var n=this;switch(e){case"getruntime":return this.getRuntime(t,r);case"packet":return this.sendPacket(t,(function(e){e?n.sendError(e.message,r):n.send("packetsent",{port:t.port,event:t.event,graph:t.graph,payload:t.payload},r)}));default:return this.send("error",new Error("runtime:".concat(e," not supported")),r)}}},{key:"getRuntime",value:function(e,t){var r,n,o,i,s,a,c,u=this;for(n in(c=this.transport.options.type)||(c=d.isBrowser()?"noflo-browser":"noflo-nodejs"),i=(r=this.transport.options.capabilities).filter((function(t){return u.transport.canDo(t,e.secret)})),e={type:c,version:this.transport.version,capabilities:i,allCapabilities:r},this.mainGraph&&(e.graph=this.mainGraph),this.transport.options.id&&(e.id=this.transport.options.id),this.transport.options.label&&(e.label=this.transport.options.label),this.transport.options.namespace&&(e.namespace=this.transport.options.namespace),this.transport.options.repository&&(e.repository=this.transport.options.repository),this.transport.options.repositoryVersion&&(e.repositoryVersion=this.transport.options.repositoryVersion),this.send("runtime",e,t),a=[],s=this.transport.network.networks)o=s[n],a.push(this.sendPorts(n,o,t));return a}},{key:"sendPorts",value:function(e,t,r){var n;return n=f(e,t),this.emit("ports",n),r?this.send("ports",n,r):this.sendAll("ports",n)}},{key:"setMainGraph",value:function(e){return this.mainGraph=e}},{key:"subscribeExportedPorts",value:function(e,t,r){var n,o,i,s,a,c,u,p,l=this;for(p=function(){return l.sendPorts(e,t)},i=0,a=(o=["addInport","addOutport","removeInport","removeOutport"]).length;i<a;i++)n=o[i],t.graph.removeListener(n,p);if(r){for(u=[],s=0,c=o.length;s<c;s++)n=o[s],u.push(t.graph.on(n,p));return u}}},{key:"subscribeOutPorts",value:function(e,t,r){var n,o,i,s=this;if(i=function(){return s.subscribeOutdata(e,t,!1)},o=function(){return s.subscribeOutdata(e,t,!0)},(n=t.graph).removeListener("addOutport",o),n.removeListener("removeOutport",i),r)return n.on("addOutport",o),n.on("removeOutport",i)}},{key:"subscribeOutdata",value:function(e,t,r){var n,o,i,s,a,c,u=this;for(a in this.outputSockets[e]||(this.outputSockets[e]={}),o=this.outputSockets[e])for(c=o[a],i=0,s=events.length;i<s;i++)n=events[i],c.removeAllListeners(n);if(o={},r)return Object.keys(t.graph.outports).forEach((function(r){var i,s;if(s=t.graph.outports[r],c=d.internalSocket.createSocket(),o[r]=c,!(null!=(i=t.processes[s.process].component)?i.outPorts[s.port]:void 0))throw new Error("Exported outport ".concat(s.port," in node ").concat(s.process," not found"));return i.outPorts[s.port].attach(c),c.on("ip",(function(t){switch(t.type){case"openBracket":n="begingroup";break;case"closeBracket":n="endgroup";break;default:n=t.type}return u.emit("packet",{port:r,event:n,graph:e,payload:t.data}),u.sendAll("packet",{port:r,event:n,graph:e,payload:t.data})}))}))}},{key:"sendPacket",value:function(e,t){var r,n;return(r=this.transport.network.networks[e.graph])?(n=l(r.network,e.port,!0))?(m(n,e.event,e.payload),t()):t(new Error("Cannot find internal port for ".concat(e.port))):t(new Error("Cannot find network for graph ".concat(e.graph)))}}])&&o(t.prototype,r),n&&o(t,n),c}(u),e.exports=p},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p;p=r(0),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.graphs={},t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("graph",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("graph",e,t)}},{key:"receive",value:function(e,t,r){var n;if("clear"===e||(n=this.resolveGraph(t,r)))switch(e){case"clear":return this.initGraph(t,r);case"addnode":return this.addNode(n,t,r);case"removenode":return this.removeNode(n,t,r);case"renamenode":return this.renameNode(n,t,r);case"changenode":return this.changeNode(n,t,r);case"addedge":return this.addEdge(n,t,r);case"removeedge":return this.removeEdge(n,t,r);case"changeedge":return this.changeEdge(n,t,r);case"addinitial":return this.addInitial(n,t,r);case"removeinitial":return this.removeInitial(n,t,r);case"addinport":return this.addInport(n,t,r);case"removeinport":return this.removeInport(n,t,r);case"renameinport":return this.renameInport(n,t,r);case"addoutport":return this.addOutport(n,t,r);case"removeoutport":return this.removeOutport(n,t,r);case"renameoutport":return this.renameOutport(n,t,r);case"addgroup":return this.addGroup(n,t,r);case"removegroup":return this.removeGroup(n,t,r);case"renamegroup":return this.renameGroup(n,t,r);case"changegroup":return this.changeGroup(n,t,r);default:return this.send("error",new Error("graph:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.graphs[e.graph])return this.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"getLoader",value:function(e){return this.transport.component.getLoader(e,this.transport.options)}},{key:"sendGraph",value:function(e,t,r){var n;return n={graph:e,description:t.toJSON()},this.send("graph",n,r)}},{key:"initGraph",value:function(e,t){var r,n;if(e.id)return e.name||(e.name="NoFlo runtime"),n=new p.Graph(e.name),r=e.id,e.library&&(e.library=e.library.replace("noflo-",""),n.properties.library=e.library,r="".concat(e.library,"/").concat(r)),e.icon&&(n.properties.icon=e.icon),e.description&&(n.properties.description=e.description),n.baseDir=this.transport.options.baseDir,this.subscribeGraph(e.id,n,t),e.main?this.transport.runtime.setMainGraph(r,n,t):this.transport.component.registerGraph(r,n,t),this.graphs[e.id]=n,this.sendAll("clear",{id:e.id,name:e.name,library:e.library,main:e.main,icon:e.icon,description:e.description},t);this.send("error",new Error("No graph ID provided"),t)}},{key:"registerGraph",value:function(e,t){return"default/main"===e&&this.transport.runtime.setMainGraph(e,t),this.subscribeGraph(e,t,""),this.graphs[e]=t}},{key:"subscribeGraph",value:function(e,t,r){var n=this;return t.on("addNode",(function(t){return t.graph=e,n.sendAll("addnode",t,r)})),t.on("removeNode",(function(t){var o;return o={id:t.id,graph:e},n.sendAll("removenode",o,r)})),t.on("renameNode",(function(t,o){return n.sendAll("renamenode",{from:t,to:o,graph:e},r)})),t.on("changeNode",(function(t,o){return n.sendAll("changenode",{id:t.id,metadata:t.metadata,graph:e},r)})),t.on("addEdge",(function(t){var o;return"number"!=typeof t.from.index&&delete t.from.index,"number"!=typeof t.to.index&&delete t.to.index,o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addedge",o,r)})),t.on("removeEdge",(function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeedge",o,r)})),t.on("changeEdge",(function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("changeedge",o,r)})),t.on("addInitial",(function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addinitial",o,r)})),t.on("removeInitial",(function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeinitial",o,r)})),t.on("addGroup",(function(t){var o;return o={name:t.name,nodes:t.nodes,metadata:t.metadata,graph:e},n.sendAll("addgroup",o,r)})),t.on("removeGroup",(function(t){var o;return o={name:t.name,graph:e},n.sendAll("removegroup",o,r)})),t.on("renameGroup",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renamegroup",i,r)})),t.on("changeGroup",(function(t){var o;return o={name:t.name,metadata:t.metadata,graph:e},n.sendAll("changegroup",o,r)})),t.on("addInport",(function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addinport",i,r)})),t.on("addOutport",(function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addoutport",i,r)})),t.on("removeInport",(function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeinport",i,r)})),t.on("removeOutport",(function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeoutport",i,r)})),t.on("renameInport",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameinport",i,r)})),t.on("renameOutport",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameoutport",i,r)})),t.on("endTransaction",(function(){return n.emit("updated",{name:e,graph:t})}))}},{key:"addNode",value:function(e,t,r){if(t.id||t.component)return e.addNode(t.id,t.component,t.metadata);this.send("error",new Error("No ID or component supplied"),r)}},{key:"removeNode",value:function(e,t,r){if(t.id)return e.removeNode(t.id);this.send("error",new Error("No ID supplied"),r)}},{key:"renameNode",value:function(e,t,r){if(t.from||t.to)return e.renameNode(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeNode",value:function(e,t,r){if(t.id||t.metadata)return e.setNodeMetadata(t.id,t.metadata);this.send("error",new Error("No id or metadata supplied"),r)}},{key:"addEdge",value:function(e,t,r){if(t.src||t.tgt){if("number"!=typeof t.src.index&&"number"!=typeof t.tgt.index||!e.addEdgeIndex)return e.addEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);e.addEdgeIndex(t.src.node,t.src.port,t.src.index,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.removeEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"changeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.setEdgeMetadata(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"addInitial",value:function(e,t,r){if(t.src||t.tgt){if(!e.addInitialIndex||"number"!=typeof t.tgt.index)return e.addInitial(t.src.data,t.tgt.node,t.tgt.port,t.metadata);e.addInitialIndex(t.src.data,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeInitial",value:function(e,t,r){if(t.tgt)return e.removeInitial(t.tgt.node,t.tgt.port);this.send("error",new Error("No tgt supplied"),r)}},{key:"addInport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addInport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported inport information"),r)}},{key:"removeInport",value:function(e,t,r){if(t.public)return e.removeInport(t.public);this.send("error",new Error("Missing exported inport name"),r)}},{key:"renameInport",value:function(e,t,r){if(t.from||t.to)return e.renameInport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addOutport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addOutport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported outport information"),r)}},{key:"removeOutport",value:function(e,t,r){if(t.public)return e.removeOutport(t.public);this.send("error",new Error("Missing exported outport name"),r)}},{key:"renameOutport",value:function(e,t,r){if(t.from||t.to)return e.renameOutport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addGroup",value:function(e,t,r){if(t.name||t.nodes||t.metadata)return e.addGroup(t.name,t.nodes,t.metadata);this.send("error",new Error("No name or nodes or metadata supplied"),r)}},{key:"removeGroup",value:function(e,t,r){if(t.name)return e.removeGroup(t.name);this.send("error",new Error("No name supplied"),r)}},{key:"renameGroup",value:function(e,t,r){if(t.from||t.to)return e.renameGroup(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeGroup",value:function(e,t,r){if(t.name||t.metadata)return e.setEdgeMetadata(t.name,t.metadata);this.send("error",new Error("No name or metadata supplied"),r)}}])&&o(t.prototype,r),n&&o(t,n),c}(r(5).EventEmitter),e.exports=u},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,l,d,h,f,m,g;m=r(0),u=r(5).EventEmitter,g=function(e,r){var n,o,i,s;if(n={id:e.id,graph:r},e.socket.from&&(n.src={node:e.socket.from.process.id,port:e.socket.from.port}),e.socket.to&&(n.tgt={node:e.socket.to.process.id,port:e.socket.to.port}),e.subgraph&&(n.subgraph=e.subgraph),void 0!==e.group&&(n.group=e.group),e.datatype&&(n.type=e.datatype),e.schema&&(n.schema=e.schema),void 0!==e.data){if(m.isBrowser()||t.isBuffer(e.data)&&(e.data=e.data.slice(0,20)),(null!=(o=e.data)?o.toJSON:void 0)&&(n.data=e.data.toJSON()),null!=(i=e.data)?i.toString:void 0){if(n.data=e.data.toString(),"[object Object]"===n.data)try{n.data=JSON.parse(JSON.stringify(e.data))}catch(e){}}else n.data=e.data;(null!=(s=e.metadata)?s.secure:void 0)&&(n.data="DATA")}return n},h=function(e){return e?e.process+"("+e.port+")":""},d=function(e){return h(e.src)+" -> "+h(e.tgt)},l=function(e){return e?e.process.id+"("+e.port+")":""},f=function(e){return l(e.from)+" -> "+l(e.to)},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.networks={},t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("network",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("network",e,t)}},{key:"receive",value:function(e,t,r){var n;if(n=this.resolveGraph(t,r))switch(e){case"start":return this.startNetwork(n,t,r);case"stop":return this.stopNetwork(n,t,r);case"edges":return this.updateEdgesFilter(n,t,r);case"debug":return this.debugNetwork(n,t,r);case"getstatus":return this.getStatus(n,t,r);default:return this.send("error",new Error("network:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.transport.graph.graphs[e.graph])return this.transport.graph.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"updateEdgesFilter",value:function(e,t,r){var n,o,i,s,a,c;for((s=this.networks[t.graph])?s.filters={}:(s={network:null,filters:{}},this.networks[t.graph]=s),o=0,i=(a=t.edges).length;o<i;o++)n=a[o],c=d(n),s.filters[c]=!0;return this.send("edges",{graph:t.graph,edges:t.edges},r)}},{key:"eventFiltered",value:function(e,t){var r;return!this.transport.options.filterData||(r=f(t.socket),this.networks[e].filters[r])}},{key:"initNetwork",value:function(e,t,r,n){var o,i,s=this;if(!this.networks[t]||!this.networks[t].network)return e.componentLoader=this.transport.component.getLoader(e.baseDir,this.transport.options),(i=JSON.parse(JSON.stringify(this.transport.options))).delay=!0,m.createNetwork(e,(function(e,o){return e?n(e):(s.networks[t]&&s.networks[t].network?s.networks[t].network=o:s.networks[t]={network:o,filters:{}},s.emit("addnetwork",o,t,s.networks),s.subscribeNetwork(o,t,r),o.connect(n))}),i);(o=this.networks[t].network).stop((function(i){return i?n(i):(delete s.networks[t],s.emit("removenetwork",o,t,s.networks),s.initNetwork(e,t,r,n))}))}},{key:"subscribeNetwork",value:function(e,t,r){var n=this;return e.on("start",(function(o){return n.sendAll("started",{time:o.start,graph:t,running:e.isRunning(),started:e.isStarted()},r)})),e.on("end",(function(o){return n.sendAll("stopped",{time:new Date,uptime:o.uptime,graph:t,running:e.isRunning(),started:e.isStarted()},r)})),e.on("icon",(function(e){return e.graph=t,n.sendAll("icon",e,r)})),e.on("ip",(function(e){var o;if(n.eventFiltered(t,e)){switch(o={id:e.id,socket:e.socket,subgraph:e.subgraph,metadata:e.metadata},e.type){case"openBracket":o.type="begingroup",o.group=e.data||"";break;case"data":o.type="data",o.data=e.data,o.datatype=e.datatype,o.schema=e.schema;break;case"closeBracket":o.type="endgroup",o.group=e.data||""}return n.sendAll(o.type,g(o,t),r)}})),e.on("process-error",(function(e){var o,i,s,a,c;if(i=e.error.message,e.error.stack)for(o=e.error.stack.split("\n"),s=a=0,c=Math.min(o.length,3);0<=c?a<=c:a>=c;s=0<=c?++a:--a)i+="\n".concat(o[s]);return n.sendAll("processerror",{id:e.id,error:i,graph:t},r)}))}},{key:"_startNetwork",value:function(e,t,r,n){var o,i,s=this;return o=function(e){return e.start((function(e){return n(e)}))},(i=this.networks[t])&&i.network?o(i.network):this.initNetwork(e,t,r,(function(e){return e?n(e):(i=s.networks[t],o(i.network))}))}},{key:"startNetwork",value:function(e,t,r){var n=this;return this.networks[t.graph],this._startNetwork(e,t.graph,r,(function(e){e&&n.send("error",e,r)}))}},{key:"stopNetwork",value:function(e,t,r){var n,o=this;if(this.networks[t.graph])if(n=this.networks[t.graph].network){if(!n.isStarted())return this.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.networks[t.graph].network.stop((function(e){e?o.send("error",e,r):o.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r)}))}else this.send("error",new Error("Network ".concat(t.graph," not found")),r);else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"debugNetwork",value:function(e,t,r){var n;this.networks[t.graph]&&(n=this.networks[t.graph].network)?(n.setDebug(t.enable),this.send("setdebug",{enable:t.enable})):this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"getStatus",value:function(e,t,r){var n;if(this.networks[t.graph]){if(n=this.networks[t.graph].network)return this.send("status",{graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.send("error",new Error("Network ".concat(t.graph," not found")),r)}else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}}])&&o(t.prototype,r),n&&o(t,n),c}(u),e.exports=p}).call(this,r(14).Buffer)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,l,d,h;d=r(0),l=r(464),p=r(5).EventEmitter,h=r(465),u=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("component",e,t,r)}},{key:"receive",value:function(e,t,r){switch(e){case"list":return this.listComponents(t,r);case"getsource":return this.getSource(t,r);case"source":return this.setSource(t,r);default:return this.send("error",new Error("component:".concat(e," not supported")),r)}}},{key:"getLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loaders[e]||(this.loaders[e]=new d.ComponentLoader(e,t)),this.loaders[e]}},{key:"listComponents",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).listComponents((function(e,r){var i,s;if(!e)return i=Object.keys(r),s=0,i.forEach((function(e){return o.processComponent(n,e,t,(function(e){if(!(++s<i.length))return o.send("componentsready",s,t)}))}));o.send("error",e,t)}))}},{key:"getSource",value:function(e,t){var r,n=this;return r=this.transport.options.baseDir,this.getLoader(r,this.transport.options).getSource(e.name,(function(r,o){var i,s;return r?null==(i=n.transport.graph.graphs[e.name])?void n.send("error",r,t):(s=h.parseName(e.name),n.send("source",{name:s.name,library:s.library,code:JSON.stringify(i.toJSON()),language:"json"},t)):n.send("source",o,t)}))}},{key:"setSource",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).setSource(e.library,e.name,e.code,e.language,(function(r){if(!r)return o.emit("updated",{name:e.name,library:e.library,code:e.code,language:e.language}),o.processComponent(n,n.normalizeName(e.library,e.name),t);o.send("error",r,t)}))}},{key:"processComponent",value:function(e,t,r,n){var o=this;return n||(n=function(){}),e.load(t,(function(e,i){if(!i){if(e instanceof Error)return o.send("error",e,r),n(e);i=e}if(i.isReady())return o.sendComponent(t,i,r),n(null);i.once("ready",(function(){return o.sendComponent(t,i,r),n(null)}))}),!0)}},{key:"processPort",value:function(e,t){var r,n;return r={id:e,type:t.getDataType?t.getDataType():"all"},("function"==typeof t.getSchema?t.getSchema():void 0)&&(r.schema=t.getSchema()),t.isRequired&&(r.required=t.isRequired()),t.isAddressable&&(r.addressable=t.isAddressable()),t.getDescription&&(r.description=t.getDescription()),(null!=(n=t.options)?n.values:void 0)&&(r.values=t.options.values),("function"==typeof t.hasDefault?t.hasDefault():void 0)&&(r.default=t.options.default),r}},{key:"sendComponent",value:function(e,t,r){var n,o,i,s,a,c,u;for(a in o=[],i=[],c=t.inPorts)(s=c[a])&&"function"!=typeof s&&s.canAttach&&o.push(this.processPort(a,s));for(a in u=t.outPorts)(s=u[a])&&"function"!=typeof s&&s.canAttach&&i.push(this.processPort(a,s));return n=t.getIcon?t.getIcon():"gear",this.send("component",{name:e,description:t.description,subgraph:t.isSubgraph(),icon:n,inPorts:o,outPorts:i},r)}},{key:"registerGraph",value:function(e,t,r){var n,o,i=this;return o=l((function(){return i.processComponent(n,e,r)}),10),(n=this.getLoader(t.baseDir,this.transport.options)).listComponents((function(s,a){if(!s)return n.registerComponent("",e,t),o();i.send("error",s,r)})),t.on("addNode",o),t.on("removeNode",o),t.on("renameNode",o),t.on("addEdge",o),t.on("removeEdge",o),t.on("addInitial",o),t.on("removeInitial",o),t.on("addInport",o),t.on("removeInport",o),t.on("renameInport",o),t.on("addOutport",o),t.on("removeOutport",o),t.on("renameOutport",o)}}])&&o(t.prototype,r),n&&o(t,n),c}(p);return e.prototype.loaders={},e}.call(this),e.exports=u},function(e,t){function r(e,t,r){var n,o,i,s,a;function c(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(c,t-u):(n=null,r||(a=e.apply(i,o),i=o=null))}null==t&&(t=100);var u=function(){i=this,o=arguments,s=Date.now();var u=r&&!n;return n||(n=setTimeout(c,t)),u&&(a=e.apply(i,o),i=o=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=e.apply(i,o),i=o=null,clearTimeout(n),n=null)},u}r.debounce=r,e.exports=r},function(e,t){t.parseName=function(e){var t;return-1===e.indexOf("/")?{library:null,name:e}:{library:(t=e.split("/"))[0],name:t[1]}}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var s,a,c,u,p,l,d,h,f;h=r(0),u=r(4)("noflo-runtime-base:trace"),l=JSON.stringify;try{l=r(467)}catch(e){p=e,console.log("WARN: failed to load json-stringify-safe, circular objects may cause fail.\n".concat(p.message))}c=function(e){var t;return t=l(e),JSON.parse(t)},s=function(){function e(){n(this,e),this.events=[]}return i(e,[{key:"add",value:function(e){return this.events.push(e)}},{key:"getAll",value:function(e,t){var r,n,o;for(r=0,n=(o=this.events).length;r<n;r++)e(p=o[r]);return t(null)}}]),e}(),f=function(e,t,r,n){var o,i,s,a,c,u,p,l,d;for(u in i={},p=e.graph.outports)for(a=p[u],d=h.internalSocket.createSocket(),i[u]=d,e.processes[a.process].component.outPorts[a.port].attach(d),l=function(e){return function(r){var o;return o={id:"EXPORT: ".concat(t," ").concat(u.toUpperCase()," ->"),payload:r,socket:{to:{process:{id:t},port:u}}},n(e,o)}},s=0,c=r.length;s<c;s++)o=r[s],d.on(o,l(o));return i},d=function(e,t,r){var n,o,i,s,a,l,d,h;switch(u("event",e,t,"'".concat(r.id,"'")),h=r.socket,d=function(e){try{return e.group=r.group.toString()}catch(t){return u("group serialization error",p=t),e.error=p.message}},o=(n={protocol:"network",command:t,payload:{time:(new Date).toISOString(),graph:e,error:null,src:{node:null!=(i=h.from)?i.process.id:void 0,port:null!=(s=h.from)?s.port:void 0},tgt:{node:null!=(a=h.to)?a.process.id:void 0,port:null!=(l=h.to)?l.port:void 0},id:void 0,subgraph:void 0}}).payload,t){case"connect":case"disconnect":break;case"begingroup":case"endgroup":d(n.payload);break;case"data":try{o.data=c(r.data)}catch(e){u("data serialization error",p=e),o.error=p.message}break;default:throw new Error("trace: Unknown event type ".concat(t))}return u("event done",e,t,"'".concat(r.id,"'")),n},a=function(){function e(t){n(this,e),this.options=t,this.buffer=new s,this.header={graphs:{}}}return i(e,[{key:"attach",value:function(e){var t,r,n=this;return r=e.graph.name||e.graph.properties.name||"default",u("attach",r),(t=["connect","begingroup","data","endgroup","disconnect"]).forEach((function(t){return e.on(t,(function(e){var o;return o=d(r,t,e),n.buffer.add(o)}))})),f(e,r,t,(function(e,t){var o;return o=d(r,e,t),n.buffer.add(o)})),this.header.graphs[r]=e.graph.toJSON()}},{key:"detach",value:function(e){}},{key:"dumpString",value:function(e){var t,r,n=this;return r=[],t=function(e){return r.push(e)},this.buffer.getAll(t,(function(t){var o;return o={header:n.header,events:r},e(t,JSON.stringify(o,null,2))}))}},{key:"dumpFile",value:function(e,t){var n,o,i,s=this;return n=r(6),i=r(468),o=function(t){return n.open(e,"w",(function(r,n){return t(r,{path:e,fd:n})}))},e||(o=function(e){return i.open({suffix:".json"},e)}),o((function(e,r){var o,i,a,c;return e?t(e):(o=0,a=function(e,t){return n.write(r.fd,e,{encoding:"utf-8"},t)},c=function(e){var t;return t=o?",":"",o+=1,t+=JSON.stringify(e,null,2),a(t,(function(e){}))},u("streaming to file",r.path),i=JSON.stringify(s.header,null,2),a('{\n "header": '.concat(i,'\n, "events":\n['),(function(e){return s.buffer.getAll(c,(function(e){return e?t(e):(u("streamed ".concat(o," events")),a("]\n }",(function(e){return u("completed stream",r.path),t(e,r.path)})))}))})))}))}}]),e}(),e.exports.Tracer=a},function(e,t){function r(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}(e.exports=function(e,t,n,o){return JSON.stringify(e,r(t,o),n)}).getSerialize=r},function(e,t,r){(function(n){var o=r(6),i=r(10),s=r(469),a=r(470),c=r(132),u=(r(132).tmpdir(),r(477)),p=a.sync,l=i.resolve(c.tmpdir()),d=s.O_CREAT|s.O_TRUNC|s.O_RDWR|s.O_EXCL,h=function(e){return"function"==typeof e?[void 0,e]:[new Promise((function(e,r){t=function(){var t=Array.from(arguments),o=t.shift();n.nextTick((function(){o?r(o):1===t.length?e(t[0]):e(t)}))}})),t];var t},f=function(e,t){var r=m(e,t),o=new Date,s=[r.prefix,o.getFullYear(),o.getMonth(),o.getDate(),"-",n.pid,"-",(4294967296*Math.random()+1).toString(36),r.suffix].join("");return i.join(r.dir||l,s)},m=function(e,t){var r={prefix:null,suffix:null};if(e)switch(typeof e){case"string":r.prefix=e;break;case"object":r=e;break;default:throw new Error("Unknown affix declaration: "+r)}else r.prefix=t;return r},g=!1,y=!1,v=[],b=[];function w(e){if(!g)return!1;x(),v.push(e)}function E(e){if(!g)return!1;x(),b.push(e)}function x(){if(!g)return!1;y||(n.addListener("exit",(function(){try{S()}catch(e){throw console.warn("Fail to clean temporary files on exit : ",e),e}})),y=!0)}function S(){return!!g&&{files:function(){if(!g)return!1;for(var e,t=0;void 0!==(e=v.shift());)p(e),t++;return t}(),dirs:function(){if(!g)return!1;for(var e,t=0;void 0!==(e=b.shift());)p(e),t++;return t}()}}t.dir=l,t.track=function(t){return g=!1!==t,e.exports},t.mkdir=function(e,t){var r=h(t),n=r[0];t=r[1];var o=f(e,"d-");return u(o,448,(function(e){e||E(o),t(e,o)})),n},t.mkdirSync=function(e){var t=f(e,"d-");return u.sync(t,448),E(t),t},t.open=function(e,t){var r=h(t),n=r[0];t=r[1];var i=f(e,"f-");return o.open(i,d,parseInt("0600",8),(function(e,r){e||w(i),t(e,{path:i,fd:r})})),n},t.openSync=function(e){var t=f(e,"f-"),r=o.openSync(t,d,parseInt("0600",8));return w(t),{path:t,fd:r}},t.path=f,t.cleanup=function(e){var t=h(e),r=t[0];return e=t[1],g?(function(e){var t=h(e),r=t[0];if(e=t[1],!g)return e(new Error("not tracking")),r;var n,o=0,i=v.length;if(!i)return e(null,o),r;for(var s=function(t){if(i){if(t)return e(t),void(i=0);o++,--i||e(null,o)}};void 0!==(n=v.shift());)a(n,s)}((function(t,r){t?e(t,{files:r}):function(e){var t=h(e),r=t[0];if(e=t[1],!g)return e(new Error("not tracking")),r;var n,o=0,i=b.length;if(!i)return e(null,o),r;for(var s=function(t){if(i){if(t)return e(t,o),void(i=0);o++,--i||e(null,o)}};void 0!==(n=b.shift());)a(n,s)}((function(t,n){e(t,{files:r,dirs:n})}))})),r):(e(new Error("not tracking")),r)},t.cleanupSync=S,t.createWriteStream=function(e){var t=f(e,"s-"),r=o.createWriteStream(t,{flags:d,mode:parseInt("0600",8)});return w(t),r}}).call(this,r(3))},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){(function(t){e.exports=d,d.sync=y;var n=r(70),o=r(10),i=r(6),s=r(127),a=parseInt("666",8),c={nosort:!0,silent:!0},u=0,p="win32"===t.platform;function l(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(t){e[t]=e[t]||i[t],e[t+="Sync"]=e[t]||i[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||c}function d(e,t,r){"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),l(t);var o=0,i=null,a=0;if(t.disableGlob||!s.hasMagic(e))return c(null,[e]);function c(e,n){return e?r(e):0===(a=n.length)?r():void n.forEach((function(e){h(e,t,(function n(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&o<t.maxBusyTries)return o++,setTimeout((function(){h(e,t,n)}),100*o);if("EMFILE"===s.code&&u<t.emfileWait)return setTimeout((function(){h(e,t,n)}),u++);"ENOENT"===s.code&&(s=null)}u=0,function(e){i=i||e,0==--a&&r(i)}(s)}))}))}t.lstat(e,(function(r,n){if(!r)return c(null,[e]);s(e,t.glob,c)}))}function h(e,t,r){n(e),n(t),n("function"==typeof r),t.lstat(e,(function(n,o){return n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&p&&f(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,(function(n){if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return p?f(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))}))}function f(e,t,r,o){n(e),n(t),n("function"==typeof o),r&&n(r instanceof Error),t.chmod(e,a,(function(n){n?o("ENOENT"===n.code?null:r):t.stat(e,(function(n,i){n?o("ENOENT"===n.code?null:r):i.isDirectory()?g(e,t,r,o):t.unlink(e,o)}))}))}function m(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.chmodSync(e,a)}catch(e){if("ENOENT"===e.code)return;throw r}try{var o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?v(e,t,r):t.unlinkSync(e)}function g(e,t,r,i){n(e),n(t),r&&n(r instanceof Error),n("function"==typeof i),t.rmdir(e,(function(s){!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?i(r):i(s):function(e,t,r){n(e),n(t),n("function"==typeof r),t.readdir(e,(function(n,i){if(n)return r(n);var s,a=i.length;if(0===a)return t.rmdir(e,r);i.forEach((function(n){d(o.join(e,n),t,(function(n){if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))}))}))}))}(e,t,i)}))}function y(e,t){var r;if(l(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(var o=0;o<r.length;o++){e=r[o];try{var i=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&p&&m(e,t,r)}try{i&&i.isDirectory()?v(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return p?m(e,t,r):v(e,t,r);if("EISDIR"!==r.code)throw r;v(e,t,r)}}}function v(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw r;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||function(e,t){n(e),n(t),t.readdirSync(e).forEach((function(r){y(o.join(e,r),t)}));var r=p?100:1,i=0;for(;;){var s=!0;try{var a=t.rmdirSync(e,t);return s=!1,a}finally{if(++i<r&&s)continue}}}(e,t)}}}).call(this,r(3))},function(e,t,r){(function(e){var n=r(10),o="win32"===e.platform,i=r(6),s=e.env.NODE_DEBUG&&/fs/.test(e.env.NODE_DEBUG);function a(t){return"function"==typeof t?t:function(){var t;if(s){var r=new Error;t=function(e){e&&(r.message=e.message,n(e=r))}}else t=n;return t;function n(t){if(t){if(e.throwDeprecation)throw t;if(!e.noDeprecation){var r="fs: missing callback "+(t.stack||t.message);e.traceDeprecation?console.trace(r):console.error(r)}}}}()}n.normalize;if(o)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(o)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,p,l=e,d={},h={};function f(){var t=u.exec(e);r=t[0].length,s=t[0],a=t[0],p="",o&&!h[a]&&(i.lstatSync(a),h[a]=!0)}for(f();r<e.length;){c.lastIndex=r;var m=c.exec(e);if(p=s,s+=m[0],a=p+m[1],r=c.lastIndex,!(h[a]||t&&t[a]===a)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,a))g=t[a];else{var y=i.lstatSync(a);if(!y.isSymbolicLink()){h[a]=!0,t&&(t[a]=a);continue}var v=null;if(!o){var b=y.dev.toString(32)+":"+y.ino.toString(32);d.hasOwnProperty(b)&&(v=d[b])}null===v&&(i.statSync(a),v=i.readlinkSync(a)),g=n.resolve(p,v),t&&(t[a]=g),o||(d[b]=v)}e=n.resolve(g,e.slice(r)),f()}}return t&&(t[l]=e),e},t.realpath=function(t,r,s){if("function"!=typeof s&&(s=a(r),r=null),t=n.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return e.nextTick(s.bind(null,null,r[t]));var p,l,d,h,f=t,m={},g={};function y(){var r=u.exec(t);p=r[0].length,l=r[0],d=r[0],h="",o&&!g[d]?i.lstat(d,(function(e){if(e)return s(e);g[d]=!0,v()})):e.nextTick(v)}function v(){if(p>=t.length)return r&&(r[f]=t),s(null,t);c.lastIndex=p;var n=c.exec(t);return h=l,l+=n[0],d=h+n[1],p=c.lastIndex,g[d]||r&&r[d]===d?e.nextTick(v):r&&Object.prototype.hasOwnProperty.call(r,d)?E(r[d]):i.lstat(d,b)}function b(t,n){if(t)return s(t);if(!n.isSymbolicLink())return g[d]=!0,r&&(r[d]=d),e.nextTick(v);if(!o){var a=n.dev.toString(32)+":"+n.ino.toString(32);if(m.hasOwnProperty(a))return w(null,m[a],d)}i.stat(d,(function(e){if(e)return s(e);i.readlink(d,(function(e,t){o||(m[a]=t),w(e,t)}))}))}function w(e,t,o){if(e)return s(e);var i=n.resolve(h,t);r&&(r[o]=i),E(i)}function E(e){t=n.resolve(e,t.slice(p)),y()}y()}}).call(this,r(3))},function(e,t,r){var n=r(473),o=r(474);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,r){var i=[],s=o("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c,u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),g=u||l,y=s.body.indexOf(",")>=0;if(!g&&!y)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(g)c=s.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var r=[],n=o("{","}",t);if(!n)return t.split(",");var i=n.pre,s=n.body,a=n.post,c=i.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));return r.push.apply(r,c),r}(s.body)).length)if(1===(c=e(c[0],!1).map(d)).length)return(w=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+c[0]+e}))}var v,b=s.pre,w=s.post.length?e(s.post,!1):[""];if(g){var E=p(c[0]),x=p(c[1]),S=Math.max(c[0].length,c[1].length),k=3==c.length?Math.abs(p(c[2])):1,_=f;x<E&&(k*=-1,_=m);var P=c.some(h);v=[];for(var C=E;_(C,x);C+=k){var A;if(l)"\\"===(A=String.fromCharCode(C))&&(A="");else if(A=String(C),P){var T=S-A.length;if(T>0){var D=new Array(T+1).join("0");A=C<0?"-"+D+A.slice(1):D+A}}v.push(A)}}else v=n(c,(function(t){return e(t,!1)}));for(var O=0;O<v.length;O++)for(var R=0;R<w.length;R++){var N=b+v[O]+w[R];(!r||g||N)&&i.push(N)}return i}(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(l)};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function p(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function l(e){return e.split(i).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function d(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=t(e[o],o);r(i)?n.push.apply(n,i):n.push(i)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=o(e,r)),t instanceof RegExp&&(t=o(t,r));var n=i(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function o(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var n,o,i,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),p=c;if(c>=0&&u>0){for(n=[],i=r.length;p>=0&&!a;)p==c?(n.push(p),c=r.indexOf(e,p+1)):1==n.length?a=[n.pop(),u]:((o=n.pop())<i&&(i=o,s=u),u=r.indexOf(t,p+1)),p=c<u&&c>=0?c:u;n.length&&(a=[i,s])}return a}e.exports=n,n.range=i},function(e,t,r){(function(t){e.exports=f,f.GlobSync=m;var n=r(6),o=r(128),i=r(71),s=(i.Minimatch,r(127).Glob,r(46),r(10)),a=r(70),c=r(72),u=r(129),p=(u.alphasort,u.alphasorti,u.setopts),l=u.ownProp,d=u.childrenIgnored,h=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(p(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[o.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}}))}u.finish(this)},m.prototype._process=function(e,t,r){a(this instanceof m);for(var n,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,o).join("/")}var s,u=e.slice(o);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var p=this._makeAbs(s);d(this,s)||(u[0]===i.GLOBSTAR?this._processGlobStar(n,s,p,u,t,r):this._processReaddir(n,s,p,u,t,r))},m.prototype._processReaddir=function(e,t,r,n,o,i){var a=this._readdir(r,i);if(a){for(var c=n[0],u=!!this.minimatch.negate,p=c._glob,l=this.dot||"."===p.charAt(0),d=[],h=0;h<a.length;h++){if("."!==(g=a[h]).charAt(0)||l)(u&&!e?!g.match(c):g.match(c))&&d.push(g)}var f=d.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(h=0;h<f;h++){var m;g=d[h];m=e?[e,g]:[g],this._process(m.concat(n),o,i)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var h=0;h<f;h++){var g=d[h];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=s.join(this.root,g)),this._emitMatch(o,g)}}}},m.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var o=r&&r.isSymbolicLink();return this.symlinks[e]=o,o||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!l(this.symlinks,e))return this._readdirInGlobStar(e);if(l(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,r,n,o,i){var s=this._readdir(r,i);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,o,!1);var p=s.length;if(!this.symlinks[r]||!i)for(var l=0;l<p;l++){if("."!==s[l].charAt(0)||this.dot){var d=c.concat(s[l],a);this._process(d,o,!0);var h=c.concat(s[l],n);this._process(h,o,!0)}}}},m.prototype._processSimple=function(e,r){var n=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),o&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&l(this.cache,t)){var o=this.cache[t];if(Array.isArray(o)&&(o="DIR"),!r||"DIR"===o)return o;if(r&&"FILE"===o)return!1}var i=this.statCache[t];if(!i){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=n.statSync(t)}catch(e){i=s}else i=s}this.statCache[t]=i;o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,(!r||"FILE"!==o)&&o},m.prototype._mark=function(e){return u.mark(this,e)},m.prototype._makeAbs=function(e){return u.makeAbs(this,e)}}).call(this,r(3))},function(e,t,r){(function(t){var n=r(130),o=Object.create(null),i=r(131);function s(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n((function(e,r){return o[e]?(o[e].push(r),null):(o[e]=[r],function(e){return i((function r(){var n=o[e],i=n.length,a=s(arguments);try{for(var c=0;c<i;c++)n[c].apply(null,a)}finally{n.length>i?(n.splice(0,i),t.nextTick((function(){r.apply(null,a)}))):delete o[e]}}))}(e))}))}).call(this,r(3))},function(e,t,r){(function(t){var n=r(10),o=r(6),i=parseInt("0777",8);function s(e,r,a,c){"function"==typeof r?(a=r,r={}):r&&"object"==typeof r||(r={mode:r});var u=r.mode,p=r.fs||o;void 0===u&&(u=i&~t.umask()),c||(c=null);var l=a||function(){};e=n.resolve(e),p.mkdir(e,u,(function(t){if(!t)return l(null,c=c||e);switch(t.code){case"ENOENT":s(n.dirname(e),r,(function(t,n){t?l(t,n):s(e,r,l,n)}));break;default:p.stat(e,(function(e,r){e||!r.isDirectory()?l(t,c):l(null,c)}))}}))}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(r,s,a){s&&"object"==typeof s||(s={mode:s});var c=s.mode,u=s.fs||o;void 0===c&&(c=i&~t.umask()),a||(a=null),r=n.resolve(r);try{u.mkdirSync(r,c),a=a||r}catch(t){switch(t.code){case"ENOENT":a=e(n.dirname(r),s,a),e(r,s,a);break;default:var p;try{p=u.statSync(r)}catch(e){throw t}if(!p.isDirectory())throw t}}return a}}).call(this,r(3))},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m;d=r(126),m=r(5).EventEmitter,f=function(e){a(r,e);var t=u(r);function r(e){var n;return o(this,r),(n=t.call(this,e)).clients=[],n}return s(r,[{key:"_connect",value:function(e){var t=this;return this.clients.push(e),e.on("send",(function(r){return t._receive(r,{client:e})}))}},{key:"_disconnect",value:function(e){if(-1!==this.clients.indexOf(e))return this.clients.splice(this.clients.indexOf(e),1),e.removeAllListeners("send")}},{key:"_receive",value:function(e,t){return this.receive(e.protocol,e.command,e.payload,t)}},{key:"send",value:function(e,t,r,n){var o;if(n.client)return o={protocol:e,command:t,payload:r},n.client._receive(o)}},{key:"sendAll",value:function(e,t,r){var n,o,i,s,a,c;for(s={protocol:e,command:t,payload:r},c=[],o=0,i=(a=this.clients).length;o<i;o++)n=a[o],c.push(n._receive(s));return c}}]),r}(d),h=function(e){a(r,e);var t=u(r);function r(e,n){var i;return o(this,r),(i=t.call(this)).name=n,i.runtime=e,i.name||(i.name="Unnamed client"),i}return s(r,[{key:"connect",value:function(){return this.runtime._connect(this)}},{key:"disconnect",value:function(){return this.runtime._disconnect(this)}},{key:"send",value:function(e,t,r){var n;return n={protocol:e,command:t,payload:r},this.emit("send",n)}},{key:"_receive",value:function(e){var t=this;return setTimeout((function(){return t.emit("message",e)}),1)}}]),r}(m),t.Client=h,t.Runtime=f}).call(this,r(3))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(69),u=r(133),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=i(r);function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this,e)).setClient(window.parent),n}return r}(c);e.exports=function(e){var t=u.normalizeOptions(e),r=new p(t);return u.subscribe(window,(function(e,t){"iframe"!==e.protocol||"setcontent"!==e.command?r.receive(e.protocol,e.command,e.payload,{href:t.origin}):document.body.innerHTML=e.payload})),r}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=r(69),p=r(133),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r=a.call(this,e),t&&t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),r.openClient(t.getAttribute("href"))})),r}return t=c,(r=[{key:"openClient",value:function(e){var t=this,r=window.open(e,"_blank");if(!r)throw new Error("Unable to open client window at '".concat(e,"'"));this.context={href:"*"};var n=function(e){var t=e.data;"string"==typeof e.data&&(t=JSON.parse(e.data)),t.protocol&&t.command&&this.receive(t.protocol,t.command,t.payload,this.context)}.bind(this),o=setInterval((function(){r&&!r.closed||(t.setClient(null),window.removeEventListener("message",n),clearInterval(o))}),1e3);this.setClient(r),window.addEventListener("message",n)}}])&&o(t.prototype,r),n&&o(t,n),c}(u);e.exports=function(e,t){var r=p.normalizeOptions(e);return new l(r,t)}},function(e,t,r){const n=r(0);class o extends n.journal.JournalStore{constructor(e,t){super(e),this.db=t,this.transactions=[]}genKey(e){return`${this.graph.properties.id}_${e}`}putTransaction(e,t){super.putTransaction(e,t);return this.db.transaction(["journals"],"readwrite").objectStore("journals").add({id:this.genKey(e),graph:this.graph.properties.id,revId:e,entries:t}),this.transactions[e]=t,super.putTransaction(e,t)}fetchTransaction(e){return this.transactions[e]}init(e){this.db.transaction(["journals"]).objectStore("journals").index("graph").openCursor().onsuccess=t=>{const r=t.target.result;return r?(this.transactions[r.value.revId]=r.value.entries,r.value.revId>this.lastRevision&&(this.lastRevision=r.value.revId),r.continue()):e()}}}t.IDBJournalStore=o},function(e,t,r){const n={msgflo:r(483),sndflo:r(484),imgflo:r(485),noflo:r(486),javafbp:r(487),microflo:r(488)};n["noflo-browser"]=n.noflo,n["noflo-gnome"]=n.noflo,n["noflo-nodejs"]=n.noflo,e.exports=n},function(e,t){e.exports={runtimetypes:{msgflo:{shortname:"MsgFlo Message Queuing",icon:"cubes",description:"Message queue orchestration",helpurl:"https://msgflo.org/docs/usage/"}},preferredlanguage:"python",componenttemplates:{python:"#!/usr/bin/env python\nimport msgflo\n\nclass <%= name %>(msgflo.Participant):\n  def __init__(self, role):\n    d = {\n      'component': '<%= namespace %>/<%= name %>',\n      'label': '<%= description %>',\n      'icon': '<%= icon %>',\n      'inports': [\n        { 'id': 'in', 'type': 'any' },\n      ],\n      'outports': [\n        { 'id': 'out', 'type': 'any' },\n      ],\n    }\n    msgflo.Participant.__init__(self, d, role)\n\n  def process(self, inport, msg):\n    self.send('out', msg.data)\n    self.ack(msg)\n\nif __name__ == '__main__':\n  msgflo.main(<%= name %>)\n",coffeescript:"# To work in msgflo-nodejs source tree\ntry\n  msgflo = require 'msgflo-nodejs'\ncatch e\n  msgflo = require '..'\n\n<%= name %> = (client, role) ->\n\n  definition =\n    component: '<%= namespace %>/<%= name %>'\n    icon: '<%= icon %>'\n    label: '<%= description %>'\n    inports: [\n      id: 'in'\n      type: 'any'\n    ]\n    outports: [\n      id: 'out'\n      type: 'any'\n    ]\n  process = (inport, indata, callback) ->\n    return callback 'out', null, indata\n  return new msgflo.participant.Participant client, definition, process, role\n\nmodule.exports = <%= name %>\n",javascript:"try {\n  var msgflo = require('msgflo-nodejs');\n} catch (error) {\n  var e = error;\n  var msgflo = require('..');\n}\n\nvar <%= name %> = function(client, role) {\n  var definition = {\n    component: '<%= namespace %>/<%= name %>',\n    icon: '<%= icon %>',\n    label: '<%= description %>',\n    inports: [\n      {\n        id: 'in',\n        type: 'any'\n      }\n    ],\n    outports: [\n      {\n        id: 'out',\n        type: 'any'\n      }\n    ]\n  };\n  var process = function(inport, indata, callback) {\n    return callback('out', null, indata);\n  };\n  return new msgflo.participant.Participant(client, definition, process, role);\n};\n\nmodule.exports = <%= name %>;\n",yaml:"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\ncomponent: '<%= namespace %>/<%= name %>'\nlabel: '<%= description %>'\nicon: '<%= icon %>'\ninports:\n  open:\n    queue: /bitraf/door/#ROLE/open\n    type: object\noutports: {}\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{sndflo:{shortname:"SndFlo Sound Synthesis",icon:"music",description:"Create sound using SuperCollider",helpurl:"https://github.com/jonnor/sndflo#readme"}},componenttemplates:{supercollider:'SynthDef("MyFilter", {\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\n},\n    metadata: (\n        description: "my filter",\n        specs: (\n            freq: ControlSpec(20, 20000, \\exp, 0.1, 2200, "Hz")\n        )\n    )\n)\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{imgflo:{shortname:"ImgFlo Image Manipulation",icon:"picture-o",description:"Process images using GEGL",helpurl:"https://github.com/jonnor/imgflo#readme"}},componenttemplates:{c:'/* This file is an image processing operation for GEGL */\n\n#ifdef GEGL_PROPERTIES\n    // Dummy prop, for testing\n    property_double (x, "X", 0.0)\n        ui_range (0.0, 1024.0)\n        ui_meta ("unit", "pixel-coordinate")\n#else\n\n#define GEGL_OP_POINT_FILTER\n#include "gegl-op.h"\n\n#ifndef IMGFLO_OP_NAME\n#define IMGFLO_OP_NAME(orig) orig\n#endif\n\nstatic void prepare(GeglOperation *operation)\n{\n    const Babl *format = babl_format("YA float");\n    gegl_operation_set_format(operation, "input", format);\n    gegl_operation_set_format(operation, "output", format);\n}\n\ngboolean\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\n        const GeglRectangle *roi, gint level)\n{\n    float *in = in_buf;\n    float *out = out_buf;\n    while (samples--) {\n        *out++ = *in++;\n        *out++ = *in++;\n    }\n    return TRUE;\n}\n\nstatic void\ngegl_op_class_init (GeglOpClass *klass)\n{\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\n  point_filter_class->process = process;\n  operation_class->prepare = prepare;\n  gegl_operation_class_set_keys (operation_class,\n      "name",        IMGFLO_OP_NAME("myop2"),\n      "title",       "imgflo: Dynamic Flowhub",\n      "categories" , "dev",\n      "description", "First GEGL op written in Flowhub 22",\n  NULL);\n}\n\n#endif\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{"noflo-browser":{shortname:"NoFlo for Browser",icon:"html5",description:"Build client-side browser applications",helpurl:"https://github.com/noflo/noflo-browser-app#readme"},"noflo-nodejs":{shortname:"NoFlo for Node.js",icon:"cloud",description:"Build network applications",helpurl:"https://github.com/noflo/noflo-nodejs#readme"},"noflo-gnome":{shortname:"NoFlo for GNOME",icon:"desktop",description:"Build GNOME desktop applications",helpurl:"https://github.com/noflo/noflo-gnome#readme"}},preferredlanguage:"es2015",componenttemplates:{javascript:"var noflo = require('noflo');\n\nexports.getComponent = function() {\n  var c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process(function (input, output) {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    var data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n",coffeescript:"noflo = require 'noflo'\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = '<%= description %>'\n  c.icon = '<%= icon %>'\n  c.inPorts.add 'in',\n    datatype: 'all'\n    description: 'Packet to forward'\n  c.outPorts.add 'out',\n    datatype: 'all'\n  c.process (input, output) ->\n    # Check preconditions on input data\n    return unless input.hasData 'in'\n    # Read packets we need to process\n    data = input.getData 'in'\n    # Process data and send output\n    output.send\n      out: data\n    # Deactivate\n    output.done()\n",es2015:"const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n  c.process((input, output) => {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    const data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data,\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n",typescript:"import { Component } from 'noflo';\n\nexports.getComponent = (): Component => {\n  const c = new Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process((input, output): void => {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    const data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n"},examples:{clock:{label:"Animated clock",id:"86a28c01d66cd8bf672f4e0a3e1ba851"},camtopalette:{label:"Cam to palette",id:"efd306b5846c236998a63c535ceebed1",ssl:!0},canvas:{label:"Canvas pattern",id:"dc0414ecf989b4b130b119e948653350"},counter:{label:"Click counter",id:"38471e33458d644e907f4637434f5bbf"},draganddrop:{label:"Drag-and-drop physics",id:"026a7bc8f1b482f56ad336c9d72dd72f"},delaunaymasks:{label:"Delaunay masks",id:"d6c1fa7b4b9d437564e954f338d970b9",ssl:!0},reacttodo:{label:"React TODO list",id:"c111454c9fd2f74d37d1e8a4e739adfd"},webaudio:{label:"Web Audio",id:"6724a6eb8a1aaf351866e7a43c3ecd43"}}}},function(e,t){e.exports={runtimetypes:{javafbp:{shortname:"JavaFBP",icon:"android",description:"Program Java and Android applications",helpurl:"https://github.com/jonnor/javafbp-runtime#readme"}},componenttemplates:{java:"// TODO\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{microflo:{shortname:"MicroFlo Microcontroller Programming",icon:"lightbulb-o",description:"Program microcontrollers like Arduino",helpurl:"https://github.com/jonnor/microflo#readme"}},componenttemplates:{"c++":"// TODO\n"},examples:{}}},function(e,t){t.getIcon=(e,t="")=>{const r=null!=window.TheGraph?window.TheGraph.FONT_AWESOME:void 0;return r?r[e]?r[e]:t?r[t]:t:e},t.getIcons=()=>{const e=null!=window.TheGraph?window.TheGraph.FONT_AWESOME:void 0;return e||{}}},function(e,t,r){"use strict";r.r(t);var n=r(2),o=r.n(n);t.default=function(e){var t={passed:0,failed:0,skipped:0,total:0};return e.suites.forEach((function(e){e.cases.forEach((function(r){t.total+=1,e.skip||r.skip?t.skipped+=1:(!0===r.passed&&(t.passed+=1),!1===r.passed&&(t.failed+=1))}))})),o.a.createElement("ul",{className:"test-status"},o.a.createElement("li",{className:"pass"},t.passed),o.a.createElement("li",{className:"fail"},t.failed),o.a.createElement("li",{className:"skip"},t.skipped),o.a.createElement("li",{className:"total"},t.total))}},function(e,t,r){"use strict";r.r(t);var n=r(2),o=r.n(n);function i(e,t){return e.skip||t.skip?"skip":!0===e.passed?"pass":!1===e.passed?"fail":"pending"}t.default=function(e){return o.a.createElement("ul",null,e.suites.map((function(e){return o.a.createElement("li",{className:"testsuite"},o.a.createElement("div",{className:"suite-header"},o.a.createElement("label",{className:"name"},e.name),o.a.createElement("label",{className:"topic"},e.topic)),o.a.createElement("ul",null,e.cases.map((function(t){return o.a.createElement("li",{className:i(t,e)},o.a.createElement("div",{className:"testcase"},o.a.createElement("label",{className:"name"},t.name),o.a.createElement("label",{className:"assertion"},t.assertion),o.a.createElement("label",{className:"error"},t.error||"")))}))))})))}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ir})),r.d(t,"VERSION",(function(){return o.e})),r.d(t,"restArguments",(function(){return i})),r.d(t,"isObject",(function(){return s})),r.d(t,"isNull",(function(){return a})),r.d(t,"isUndefined",(function(){return c})),r.d(t,"isBoolean",(function(){return u})),r.d(t,"isElement",(function(){return p})),r.d(t,"isString",(function(){return d})),r.d(t,"isNumber",(function(){return h})),r.d(t,"isDate",(function(){return f})),r.d(t,"isRegExp",(function(){return m})),r.d(t,"isError",(function(){return g})),r.d(t,"isSymbol",(function(){return y})),r.d(t,"isMap",(function(){return v})),r.d(t,"isWeakMap",(function(){return b})),r.d(t,"isSet",(function(){return w})),r.d(t,"isWeakSet",(function(){return E})),r.d(t,"isArrayBuffer",(function(){return x})),r.d(t,"isDataView",(function(){return S})),r.d(t,"isArray",(function(){return k})),r.d(t,"isFunction",(function(){return C})),r.d(t,"isArguments",(function(){return D})),r.d(t,"isFinite",(function(){return O})),r.d(t,"isNaN",(function(){return R})),r.d(t,"isTypedArray",(function(){return G})),r.d(t,"isEmpty",(function(){return $})),r.d(t,"isMatch",(function(){return H})),r.d(t,"isEqual",(function(){return J})),r.d(t,"keys",(function(){return z})),r.d(t,"allKeys",(function(){return W})),r.d(t,"values",(function(){return Y})),r.d(t,"pairs",(function(){return K})),r.d(t,"invert",(function(){return Q})),r.d(t,"functions",(function(){return Z})),r.d(t,"methods",(function(){return Z})),r.d(t,"extend",(function(){return te})),r.d(t,"extendOwn",(function(){return re})),r.d(t,"assign",(function(){return re})),r.d(t,"defaults",(function(){return ne})),r.d(t,"create",(function(){return ie})),r.d(t,"clone",(function(){return se})),r.d(t,"tap",(function(){return ae})),r.d(t,"has",(function(){return ce})),r.d(t,"mapObject",(function(){return ye})),r.d(t,"identity",(function(){return ue})),r.d(t,"constant",(function(){return N})),r.d(t,"noop",(function(){return ve})),r.d(t,"property",(function(){return de})),r.d(t,"propertyOf",(function(){return be})),r.d(t,"matcher",(function(){return pe})),r.d(t,"matches",(function(){return pe})),r.d(t,"times",(function(){return we})),r.d(t,"random",(function(){return Ee})),r.d(t,"now",(function(){return xe})),r.d(t,"escape",(function(){return _e})),r.d(t,"unescape",(function(){return Pe})),r.d(t,"templateSettings",(function(){return Ce})),r.d(t,"template",(function(){return Re})),r.d(t,"result",(function(){return Ne})),r.d(t,"uniqueId",(function(){return je})),r.d(t,"chain",(function(){return Fe})),r.d(t,"iteratee",(function(){return me})),r.d(t,"partial",(function(){return Ge})),r.d(t,"bind",(function(){return Be})),r.d(t,"bindAll",(function(){return qe})),r.d(t,"memoize",(function(){return ze})),r.d(t,"delay",(function(){return $e})),r.d(t,"defer",(function(){return He})),r.d(t,"throttle",(function(){return Ve})),r.d(t,"debounce",(function(){return Xe})),r.d(t,"wrap",(function(){return Je})),r.d(t,"negate",(function(){return We})),r.d(t,"compose",(function(){return Ye})),r.d(t,"after",(function(){return Ke})),r.d(t,"before",(function(){return Qe})),r.d(t,"once",(function(){return Ze})),r.d(t,"findKey",(function(){return et})),r.d(t,"findIndex",(function(){return rt})),r.d(t,"findLastIndex",(function(){return nt})),r.d(t,"sortedIndex",(function(){return ot})),r.d(t,"indexOf",(function(){return st})),r.d(t,"lastIndexOf",(function(){return at})),r.d(t,"find",(function(){return ct})),r.d(t,"detect",(function(){return ct})),r.d(t,"findWhere",(function(){return ut})),r.d(t,"each",(function(){return pt})),r.d(t,"forEach",(function(){return pt})),r.d(t,"map",(function(){return lt})),r.d(t,"collect",(function(){return lt})),r.d(t,"reduce",(function(){return ht})),r.d(t,"foldl",(function(){return ht})),r.d(t,"inject",(function(){return ht})),r.d(t,"reduceRight",(function(){return ft})),r.d(t,"foldr",(function(){return ft})),r.d(t,"filter",(function(){return mt})),r.d(t,"select",(function(){return mt})),r.d(t,"reject",(function(){return gt})),r.d(t,"every",(function(){return yt})),r.d(t,"all",(function(){return yt})),r.d(t,"some",(function(){return vt})),r.d(t,"any",(function(){return vt})),r.d(t,"contains",(function(){return bt})),r.d(t,"includes",(function(){return bt})),r.d(t,"include",(function(){return bt})),r.d(t,"invoke",(function(){return wt})),r.d(t,"pluck",(function(){return Et})),r.d(t,"where",(function(){return xt})),r.d(t,"max",(function(){return St})),r.d(t,"min",(function(){return kt})),r.d(t,"shuffle",(function(){return Pt})),r.d(t,"sample",(function(){return _t})),r.d(t,"sortBy",(function(){return Ct})),r.d(t,"groupBy",(function(){return Tt})),r.d(t,"indexBy",(function(){return Dt})),r.d(t,"countBy",(function(){return Ot})),r.d(t,"partition",(function(){return Rt})),r.d(t,"toArray",(function(){return It})),r.d(t,"size",(function(){return jt})),r.d(t,"pick",(function(){return Mt})),r.d(t,"omit",(function(){return Lt})),r.d(t,"first",(function(){return Bt})),r.d(t,"head",(function(){return Bt})),r.d(t,"take",(function(){return Bt})),r.d(t,"initial",(function(){return Gt})),r.d(t,"last",(function(){return qt})),r.d(t,"rest",(function(){return Ut})),r.d(t,"tail",(function(){return Ut})),r.d(t,"drop",(function(){return Ut})),r.d(t,"compact",(function(){return zt})),r.d(t,"flatten",(function(){return $t})),r.d(t,"without",(function(){return Vt})),r.d(t,"uniq",(function(){return Xt})),r.d(t,"unique",(function(){return Xt})),r.d(t,"union",(function(){return Jt})),r.d(t,"intersection",(function(){return Wt})),r.d(t,"difference",(function(){return Ht})),r.d(t,"unzip",(function(){return Yt})),r.d(t,"transpose",(function(){return Yt})),r.d(t,"zip",(function(){return Kt})),r.d(t,"object",(function(){return Qt})),r.d(t,"range",(function(){return Zt})),r.d(t,"chunk",(function(){return er})),r.d(t,"mixin",(function(){return rr}));var n={};r.r(n),r.d(n,"VERSION",(function(){return o.e})),r.d(n,"restArguments",(function(){return i})),r.d(n,"isObject",(function(){return s})),r.d(n,"isNull",(function(){return a})),r.d(n,"isUndefined",(function(){return c})),r.d(n,"isBoolean",(function(){return u})),r.d(n,"isElement",(function(){return p})),r.d(n,"isString",(function(){return d})),r.d(n,"isNumber",(function(){return h})),r.d(n,"isDate",(function(){return f})),r.d(n,"isRegExp",(function(){return m})),r.d(n,"isError",(function(){return g})),r.d(n,"isSymbol",(function(){return y})),r.d(n,"isMap",(function(){return v})),r.d(n,"isWeakMap",(function(){return b})),r.d(n,"isSet",(function(){return w})),r.d(n,"isWeakSet",(function(){return E})),r.d(n,"isArrayBuffer",(function(){return x})),r.d(n,"isDataView",(function(){return S})),r.d(n,"isArray",(function(){return k})),r.d(n,"isFunction",(function(){return C})),r.d(n,"isArguments",(function(){return D})),r.d(n,"isFinite",(function(){return O})),r.d(n,"isNaN",(function(){return R})),r.d(n,"isTypedArray",(function(){return G})),r.d(n,"isEmpty",(function(){return $})),r.d(n,"isMatch",(function(){return H})),r.d(n,"isEqual",(function(){return J})),r.d(n,"keys",(function(){return z})),r.d(n,"allKeys",(function(){return W})),r.d(n,"values",(function(){return Y})),r.d(n,"pairs",(function(){return K})),r.d(n,"invert",(function(){return Q})),r.d(n,"functions",(function(){return Z})),r.d(n,"methods",(function(){return Z})),r.d(n,"extend",(function(){return te})),r.d(n,"extendOwn",(function(){return re})),r.d(n,"assign",(function(){return re})),r.d(n,"defaults",(function(){return ne})),r.d(n,"create",(function(){return ie})),r.d(n,"clone",(function(){return se})),r.d(n,"tap",(function(){return ae})),r.d(n,"has",(function(){return ce})),r.d(n,"mapObject",(function(){return ye})),r.d(n,"identity",(function(){return ue})),r.d(n,"constant",(function(){return N})),r.d(n,"noop",(function(){return ve})),r.d(n,"property",(function(){return de})),r.d(n,"propertyOf",(function(){return be})),r.d(n,"matcher",(function(){return pe})),r.d(n,"matches",(function(){return pe})),r.d(n,"times",(function(){return we})),r.d(n,"random",(function(){return Ee})),r.d(n,"now",(function(){return xe})),r.d(n,"escape",(function(){return _e})),r.d(n,"unescape",(function(){return Pe})),r.d(n,"templateSettings",(function(){return Ce})),r.d(n,"template",(function(){return Re})),r.d(n,"result",(function(){return Ne})),r.d(n,"uniqueId",(function(){return je})),r.d(n,"chain",(function(){return Fe})),r.d(n,"iteratee",(function(){return me})),r.d(n,"partial",(function(){return Ge})),r.d(n,"bind",(function(){return Be})),r.d(n,"bindAll",(function(){return qe})),r.d(n,"memoize",(function(){return ze})),r.d(n,"delay",(function(){return $e})),r.d(n,"defer",(function(){return He})),r.d(n,"throttle",(function(){return Ve})),r.d(n,"debounce",(function(){return Xe})),r.d(n,"wrap",(function(){return Je})),r.d(n,"negate",(function(){return We})),r.d(n,"compose",(function(){return Ye})),r.d(n,"after",(function(){return Ke})),r.d(n,"before",(function(){return Qe})),r.d(n,"once",(function(){return Ze})),r.d(n,"findKey",(function(){return et})),r.d(n,"findIndex",(function(){return rt})),r.d(n,"findLastIndex",(function(){return nt})),r.d(n,"sortedIndex",(function(){return ot})),r.d(n,"indexOf",(function(){return st})),r.d(n,"lastIndexOf",(function(){return at})),r.d(n,"find",(function(){return ct})),r.d(n,"detect",(function(){return ct})),r.d(n,"findWhere",(function(){return ut})),r.d(n,"each",(function(){return pt})),r.d(n,"forEach",(function(){return pt})),r.d(n,"map",(function(){return lt})),r.d(n,"collect",(function(){return lt})),r.d(n,"reduce",(function(){return ht})),r.d(n,"foldl",(function(){return ht})),r.d(n,"inject",(function(){return ht})),r.d(n,"reduceRight",(function(){return ft})),r.d(n,"foldr",(function(){return ft})),r.d(n,"filter",(function(){return mt})),r.d(n,"select",(function(){return mt})),r.d(n,"reject",(function(){return gt})),r.d(n,"every",(function(){return yt})),r.d(n,"all",(function(){return yt})),r.d(n,"some",(function(){return vt})),r.d(n,"any",(function(){return vt})),r.d(n,"contains",(function(){return bt})),r.d(n,"includes",(function(){return bt})),r.d(n,"include",(function(){return bt})),r.d(n,"invoke",(function(){return wt})),r.d(n,"pluck",(function(){return Et})),r.d(n,"where",(function(){return xt})),r.d(n,"max",(function(){return St})),r.d(n,"min",(function(){return kt})),r.d(n,"shuffle",(function(){return Pt})),r.d(n,"sample",(function(){return _t})),r.d(n,"sortBy",(function(){return Ct})),r.d(n,"groupBy",(function(){return Tt})),r.d(n,"indexBy",(function(){return Dt})),r.d(n,"countBy",(function(){return Ot})),r.d(n,"partition",(function(){return Rt})),r.d(n,"toArray",(function(){return It})),r.d(n,"size",(function(){return jt})),r.d(n,"pick",(function(){return Mt})),r.d(n,"omit",(function(){return Lt})),r.d(n,"first",(function(){return Bt})),r.d(n,"head",(function(){return Bt})),r.d(n,"take",(function(){return Bt})),r.d(n,"initial",(function(){return Gt})),r.d(n,"last",(function(){return qt})),r.d(n,"rest",(function(){return Ut})),r.d(n,"tail",(function(){return Ut})),r.d(n,"drop",(function(){return Ut})),r.d(n,"compact",(function(){return zt})),r.d(n,"flatten",(function(){return $t})),r.d(n,"without",(function(){return Vt})),r.d(n,"uniq",(function(){return Xt})),r.d(n,"unique",(function(){return Xt})),r.d(n,"union",(function(){return Jt})),r.d(n,"intersection",(function(){return Wt})),r.d(n,"difference",(function(){return Ht})),r.d(n,"unzip",(function(){return Yt})),r.d(n,"transpose",(function(){return Yt})),r.d(n,"zip",(function(){return Kt})),r.d(n,"object",(function(){return Qt})),r.d(n,"range",(function(){return Zt})),r.d(n,"chunk",(function(){return er})),r.d(n,"mixin",(function(){return rr})),r.d(n,"default",(function(){return nr}));var o=r(1);function i(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),o=0;o<r;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=n,e.apply(this,i)}}function s(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function a(e){return null===e}function c(e){return void 0===e}function u(e){return!0===e||!1===e||"[object Boolean]"===o.s.call(e)}function p(e){return!(!e||1!==e.nodeType)}function l(e){return function(t){return o.s.call(t)==="[object "+e+"]"}}var d=l("String"),h=l("Number"),f=l("Date"),m=l("RegExp"),g=l("Error"),y=l("Symbol"),v=l("Map"),b=l("WeakMap"),w=l("Set"),E=l("WeakSet"),x=l("ArrayBuffer"),S=l("DataView"),k=o.k||l("Array"),_=l("Function"),P=o.p.document&&o.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof P&&(_=function(e){return"function"==typeof e||!1});var C=_;function A(e,t){return null!=e&&o.i.call(e,t)}var T=l("Arguments");!function(){T(arguments)||(T=function(e){return A(e,"callee")})}();var D=T;function O(e){return!y(e)&&Object(o.f)(e)&&!isNaN(parseFloat(e))}function R(e){return h(e)&&Object(o.g)(e)}function N(e){return function(){return e}}function I(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=o.b}}function j(e){return function(t){return null==t?void 0:t[e]}}var F=j("byteLength"),M=I(F),L=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var G=o.r?function(e){return o.l?Object(o.l)(e)&&!S(e):M(e)&&L.test(o.s.call(e))}:N(!1),B=j("length"),U=I(B);function q(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=o.n.length,n=e.constructor,i=C(n)&&n.prototype||o.c,s="constructor";for(A(e,s)&&!t.contains(s)&&t.push(s);r--;)(s=o.n[r])in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function z(e){if(!s(e))return[];if(o.m)return Object(o.m)(e);var t=[];for(var r in e)A(e,r)&&t.push(r);return o.h&&q(e,t),t}function $(e){return null==e||(U(e)&&(k(e)||d(e)||D(e))?0===e.length:0===z(e).length)}function H(e,t){var r=z(t),n=r.length;if(null==e)return!n;for(var o=Object(e),i=0;i<n;i++){var s=r[i];if(t[s]!==o[s]||!(s in o))return!1}return!0}function V(e){return e instanceof V?e:this instanceof V?void(this._wrapped=e):new V(e)}function X(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&function e(t,r,n,i){t instanceof V&&(t=t._wrapped);r instanceof V&&(r=r._wrapped);var s=o.s.call(t);if(s!==o.s.call(r))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return o.d.valueOf.call(t)===o.d.valueOf.call(r);case"[object ArrayBuffer]":return e(new DataView(t),new DataView(r),n,i);case"[object DataView]":var a=F(t);if(a!==F(r))return!1;for(;a--;)if(t.getUint8(a)!==r.getUint8(a))return!1;return!0}if(G(t))return e(new DataView(t.buffer),new DataView(r.buffer),n,i);var c="[object Array]"===s;if(!c){if("object"!=typeof t||"object"!=typeof r)return!1;var u=t.constructor,p=r.constructor;if(u!==p&&!(C(u)&&u instanceof u&&C(p)&&p instanceof p)&&"constructor"in t&&"constructor"in r)return!1}i=i||[];var l=(n=n||[]).length;for(;l--;)if(n[l]===t)return i[l]===r;if(n.push(t),i.push(r),c){if((l=t.length)!==r.length)return!1;for(;l--;)if(!X(t[l],r[l],n,i))return!1}else{var d,h=z(t);if(l=h.length,z(r).length!==l)return!1;for(;l--;)if(d=h[l],!A(r,d)||!X(t[d],r[d],n,i))return!1}return n.pop(),i.pop(),!0}(e,t,r,n)}function J(e,t){return X(e,t)}function W(e){if(!s(e))return[];var t=[];for(var r in e)t.push(r);return o.h&&q(e,t),t}function Y(e){for(var t=z(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=e[t[o]];return n}function K(e){for(var t=z(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n}function Q(e){for(var t={},r=z(e),n=0,o=r.length;n<o;n++)t[e[r[n]]]=r[n];return t}function Z(e){var t=[];for(var r in e)C(e[r])&&t.push(r);return t.sort()}function ee(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var o=1;o<n;o++)for(var i=arguments[o],s=e(i),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==r[u]||(r[u]=i[u])}return r}}V.VERSION=o.e,V.prototype.value=function(){return this._wrapped},V.prototype.valueOf=V.prototype.toJSON=V.prototype.value,V.prototype.toString=function(){return String(this._wrapped)};var te=ee(W),re=ee(z),ne=ee(W,!0);function oe(e){if(!s(e))return{};if(o.j)return Object(o.j)(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function ie(e,t){var r=oe(e);return t&&re(r,t),r}function se(e){return s(e)?k(e)?e.slice():te({},e):e}function ae(e,t){return t(e),e}function ce(e,t){if(!k(t))return A(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(null==e||!o.i.call(e,i))return!1;e=e[i]}return!!r}function ue(e){return e}function pe(e){return e=re({},e),function(t){return H(t,e)}}function le(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function de(e){return k(e)?function(t){return le(t,e)}:j(e)}function he(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}}function fe(e,t,r){return null==e?ue:C(e)?he(e,t,r):s(e)&&!k(e)?pe(e):de(e)}function me(e,t){return fe(e,t,1/0)}function ge(e,t,r){return V.iteratee!==me?V.iteratee(e,t):fe(e,t,r)}function ye(e,t,r){t=ge(t,r);for(var n=z(e),o=n.length,i={},s=0;s<o;s++){var a=n[s];i[a]=t(e[a],a,e)}return i}function ve(){}function be(e){return null==e?function(){}:function(t){return k(t)?le(e,t):e[t]}}function we(e,t,r){var n=Array(Math.max(0,e));t=he(t,r,1);for(var o=0;o<e;o++)n[o]=t(o);return n}function Ee(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}V.iteratee=me;var xe=Date.now||function(){return(new Date).getTime()};function Se(e){var t=function(t){return e[t]},r="(?:"+z(e).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}}var ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_e=Se(ke),Pe=Se(Q(ke)),Ce=V.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ae=/(.)^/,Te={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},De=/\\|'|\r|\n|\u2028|\u2029/g;function Oe(e){return"\\"+Te[e]}function Re(e,t,r){!t&&r&&(t=r),t=ne({},t,V.templateSettings);var n,o=RegExp([(t.escape||Ae).source,(t.interpolate||Ae).source,(t.evaluate||Ae).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(o,(function(t,r,n,o,a){return s+=e.slice(i,a).replace(De,Oe),i=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return n.call(this,e,V)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a}function Ne(e,t,r){k(t)||(t=[t]);var n=t.length;if(!n)return C(r)?r.call(e):r;for(var o=0;o<n;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=r,o=n),e=C(i)?i.call(e):i}return e}var Ie=0;function je(e){var t=++Ie+"";return e?e+t:t}function Fe(e){var t=V(e);return t._chain=!0,t}function Me(e,t,r,n,o){if(!(n instanceof t))return e.apply(r,o);var i=oe(e.prototype),a=e.apply(i,o);return s(a)?a:i}var Le=i((function(e,t){var r=Le.placeholder,n=function(){for(var o=0,i=t.length,s=Array(i),a=0;a<i;a++)s[a]=t[a]===r?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return Me(e,n,this,this,s)};return n}));Le.placeholder=V;var Ge=Le,Be=i((function(e,t,r){if(!C(e))throw new TypeError("Bind must be called on a function");var n=i((function(o){return Me(e,n,t,this,r.concat(o))}));return n}));function Ue(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var o=n.length,i=0,s=B(e);i<s;i++){var a=e[i];if(U(a)&&(k(a)||D(a)))if(t>1)Ue(a,t-1,r,n),o=n.length;else for(var c=0,u=a.length;c<u;)n[o++]=a[c++];else r||(n[o++]=a)}return n}var qe=i((function(e,t){var r=(t=Ue(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=Be(e[n],e)}return e}));function ze(e,t){var r=function(n){var o=r.cache,i=""+(t?t.apply(this,arguments):n);return A(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return r.cache={},r}var $e=i((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),He=Ge($e,V,1);function Ve(e,t,r){var n,o,i,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:xe(),n=null,s=e.apply(o,i),n||(o=i=null)},u=function(){var u=xe();a||!1!==r.leading||(a=u);var p=t-(u-a);return o=this,i=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(c,p)),s};return u.cancel=function(){clearTimeout(n),a=0,n=o=i=null},u}function Xe(e,t,r){var n,o,s=function(t,r){n=null,r&&(o=e.apply(t,r))},a=i((function(i){if(n&&clearTimeout(n),r){var a=!n;n=setTimeout(s,t),a&&(o=e.apply(this,i))}else n=$e(s,t,this,i);return o}));return a.cancel=function(){clearTimeout(n),n=null},a}function Je(e,t){return Ge(t,e)}function We(e){return function(){return!e.apply(this,arguments)}}function Ye(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function Ke(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Qe(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var Ze=Ge(Qe,2);function et(e,t,r){t=ge(t,r);for(var n,o=z(e),i=0,s=o.length;i<s;i++)if(t(e[n=o[i]],n,e))return n}function tt(e){return function(t,r,n){r=ge(r,n);for(var o=B(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(r(t[i],i,t))return i;return-1}}var rt=tt(1),nt=tt(-1);function ot(e,t,r,n){for(var o=(r=ge(r,n,1))(t),i=0,s=B(e);i<s;){var a=Math.floor((i+s)/2);r(e[a])<o?i=a+1:s=a}return i}function it(e,t,r){return function(n,i,s){var a=0,c=B(n);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+c,a):c=s>=0?Math.min(s+1,c):s+c+1;else if(r&&s&&c)return n[s=r(n,i)]===i?s:-1;if(i!=i)return(s=t(o.q.call(n,a,c),R))>=0?s+a:-1;for(s=e>0?a:c-1;s>=0&&s<c;s+=e)if(n[s]===i)return s;return-1}}var st=it(1,rt,ot),at=it(-1,nt);function ct(e,t,r){var n=(U(e)?rt:et)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function ut(e,t){return ct(e,pe(t))}function pt(e,t,r){var n,o;if(t=he(t,r),U(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var i=z(e);for(n=0,o=i.length;n<o;n++)t(e[i[n]],i[n],e)}return e}function lt(e,t,r){t=ge(t,r);for(var n=!U(e)&&z(e),o=(n||e).length,i=Array(o),s=0;s<o;s++){var a=n?n[s]:s;i[s]=t(e[a],a,e)}return i}function dt(e){var t=function(t,r,n,o){var i=!U(t)&&z(t),s=(i||t).length,a=e>0?0:s-1;for(o||(n=t[i?i[a]:a],a+=e);a>=0&&a<s;a+=e){var c=i?i[a]:a;n=r(n,t[c],c,t)}return n};return function(e,r,n,o){var i=arguments.length>=3;return t(e,he(r,o,4),n,i)}}var ht=dt(1),ft=dt(-1);function mt(e,t,r){var n=[];return t=ge(t,r),pt(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function gt(e,t,r){return mt(e,We(ge(t)),r)}function yt(e,t,r){t=ge(t,r);for(var n=!U(e)&&z(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(!t(e[s],s,e))return!1}return!0}function vt(e,t,r){t=ge(t,r);for(var n=!U(e)&&z(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(t(e[s],s,e))return!0}return!1}function bt(e,t,r,n){return U(e)||(e=Y(e)),("number"!=typeof r||n)&&(r=0),st(e,t,r)>=0}var wt=i((function(e,t,r){var n,o;return C(t)?o=t:k(t)&&(n=t.slice(0,-1),t=t[t.length-1]),lt(e,(function(e){var i=o;if(!i){if(n&&n.length&&(e=le(e,n)),null==e)return;i=e[t]}return null==i?i:i.apply(e,r)}))}));function Et(e,t){return lt(e,de(t))}function xt(e,t){return mt(e,pe(t))}function St(e,t,r){var n,o,i=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=U(e)?e:Y(e)).length;a<c;a++)null!=(n=e[a])&&n>i&&(i=n);else t=ge(t,r),pt(e,(function(e,r,n){((o=t(e,r,n))>s||o===-1/0&&i===-1/0)&&(i=e,s=o)}));return i}function kt(e,t,r){var n,o,i=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=U(e)?e:Y(e)).length;a<c;a++)null!=(n=e[a])&&n<i&&(i=n);else t=ge(t,r),pt(e,(function(e,r,n){((o=t(e,r,n))<s||o===1/0&&i===1/0)&&(i=e,s=o)}));return i}function _t(e,t,r){if(null==t||r)return U(e)||(e=Y(e)),e[Ee(e.length-1)];var n=U(e)?se(e):Y(e),o=B(n);t=Math.max(Math.min(t,o),0);for(var i=o-1,s=0;s<t;s++){var a=Ee(s,i),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)}function Pt(e){return _t(e,1/0)}function Ct(e,t,r){var n=0;return t=ge(t,r),Et(lt(e,(function(e,r,o){return{value:e,index:n++,criteria:t(e,r,o)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")}function At(e,t){return function(r,n,o){var i=t?[[],[]]:{};return n=ge(n,o),pt(r,(function(t,o){var s=n(t,o,r);e(i,t,s)})),i}}var Tt=At((function(e,t,r){A(e,r)?e[r].push(t):e[r]=[t]})),Dt=At((function(e,t,r){e[r]=t})),Ot=At((function(e,t,r){A(e,r)?e[r]++:e[r]=1})),Rt=At((function(e,t,r){e[r?0:1].push(t)}),!0),Nt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function It(e){return e?k(e)?o.q.call(e):d(e)?e.match(Nt):U(e)?lt(e,ue):Y(e):[]}function jt(e){return null==e?0:U(e)?e.length:z(e).length}function Ft(e,t,r){return t in r}var Mt=i((function(e,t){var r={},n=t[0];if(null==e)return r;C(n)?(t.length>1&&(n=he(n,t[1])),t=W(e)):(n=Ft,t=Ue(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var s=t[o],a=e[s];n(a,s,e)&&(r[s]=a)}return r})),Lt=i((function(e,t){var r,n=t[0];return C(n)?(n=We(n),t.length>1&&(r=t[1])):(t=lt(Ue(t,!1,!1),String),n=function(e,r){return!bt(t,r)}),Mt(e,n,r)}));function Gt(e,t,r){return o.q.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function Bt(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:Gt(e,e.length-t)}function Ut(e,t,r){return o.q.call(e,null==t||r?1:t)}function qt(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:Ut(e,Math.max(0,e.length-t))}function zt(e){return mt(e,Boolean)}function $t(e,t){return Ue(e,t,!1)}var Ht=i((function(e,t){return t=Ue(t,!0,!0),mt(e,(function(e){return!bt(t,e)}))})),Vt=i((function(e,t){return Ht(e,t)}));function Xt(e,t,r,n){u(t)||(n=r,r=t,t=!1),null!=r&&(r=ge(r,n));for(var o=[],i=[],s=0,a=B(e);s<a;s++){var c=e[s],p=r?r(c,s,e):c;t&&!r?(s&&i===p||o.push(c),i=p):r?bt(i,p)||(i.push(p),o.push(c)):bt(o,c)||o.push(c)}return o}var Jt=i((function(e){return Xt(Ue(e,!0,!0))}));function Wt(e){for(var t=[],r=arguments.length,n=0,o=B(e);n<o;n++){var i=e[n];if(!bt(t,i)){var s;for(s=1;s<r&&bt(arguments[s],i);s++);s===r&&t.push(i)}}return t}function Yt(e){for(var t=e&&St(e,B).length||0,r=Array(t),n=0;n<t;n++)r[n]=Et(e,n);return r}var Kt=i(Yt);function Qt(e,t){for(var r={},n=0,o=B(e);n<o;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function Zt(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),o=Array(n),i=0;i<n;i++,e+=r)o[i]=e;return o}function er(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(o.q.call(e,n,n+=t));return r}function tr(e,t){return e._chain?V(t).chain():t}function rr(e){return pt(Z(e),(function(t){var r=V[t]=e[t];V.prototype[t]=function(){var e=[this._wrapped];return o.o.apply(e,arguments),tr(this,r.apply(V,e))}})),V}pt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o.a[e];V.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0]),tr(this,r)}})),pt(["concat","join","slice"],(function(e){var t=o.a[e];V.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),tr(this,e)}}));var nr=V,or=rr(n);or._=or;var ir=or}]);
//# sourceMappingURL=noflo-ui.min.js.map